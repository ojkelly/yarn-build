/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@ojkelly/plugin-all",
factory: function (require) {
"use strict";var plugin=(()=>{var cR=Object.create;var ws=Object.defineProperty;var lR=Object.getOwnPropertyDescriptor;var dR=Object.getOwnPropertyNames;var fR=Object.getPrototypeOf,pR=Object.prototype.hasOwnProperty;var R=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),hR=(e,t)=>{for(var r in t)ws(e,r,{get:t[r],enumerable:!0})},Gh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of dR(t))!pR.call(e,i)&&i!==r&&ws(e,i,{get:()=>t[i],enumerable:!(n=lR(t,i))||n.enumerable});return e};var z=(e,t,r)=>(r=e!=null?cR(fR(e)):{},Gh(t||!e||!e.__esModule?ws(r,"default",{value:e,enumerable:!0}):r,e)),_R=e=>Gh(ws({},"__esModule",{value:!0}),e);var e_=d((Hk,Jh)=>{function Yh(e){return Array.isArray(e)?e:[e]}var Qh="",Kh=" ",ic="\\",gR=/^\s+$/,mR=/^\\!/,ER=/^\\#/,yR=/\r?\n/g,SR=/^\.*\/|^\.+$/,sc="/",Xh=typeof Symbol<"u"?Symbol.for("node-ignore"):"node-ignore",AR=(e,t,r)=>Object.defineProperty(e,t,{value:r}),vR=/([0-z])-([0-z])/g,bR=e=>e.replace(vR,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:Qh),TR=e=>{let{length:t}=e;return e.slice(0,t-t%2)},RR=[[/\\?\s+$/,e=>e.indexOf("\\")===0?Kh:Qh],[/\\\s/g,()=>Kh],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)\\\*(?=.+)/g,(e,t)=>`${t}[^\\/]*`],[/\\\\\\(?=[$.|*+(){^])/g,()=>ic],[/\\\\/g,()=>ic],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===ic?`\\[${r}${TR(n)}${i}`:i==="]"&&n.length%2===0?`[${bR(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],zh=Object.create(null),OR=(e,t,r)=>{let n=zh[e];if(n)return n;let i=RR.reduce((s,o)=>s.replace(o[0],o[1].bind(e)),e);return zh[e]=r?new RegExp(i,"i"):new RegExp(i)},uc=e=>typeof e=="string",PR=e=>e&&uc(e)&&!gR.test(e)&&e.indexOf("#")!==0,CR=e=>e.split(yR),oc=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},IR=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(mR,"!").replace(ER,"#");let i=OR(e,n,t);return new oc(r,e,n,i)},wR=(e,t)=>{throw new t(e)},wt=(e,t,r)=>uc(e)?e?wt.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),Zh=e=>SR.test(e);wt.isNotRelative=Zh;wt.convert=e=>e;var ac=class{constructor({ignorecase:t=!0}={}){this._rules=[],this._ignorecase=t,AR(this,Xh,!0),this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[Xh]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(PR(t)){let r=IR(t,this._ignorecase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,Yh(uc(t)?CR(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(s=>{let{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let s=t&&wt.convert(t);return wt(s,t,wR),this._t(s,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(sc)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let s=this._t(i.join(sc)+sc,r,n,i);return r[t]=s.ignored?s:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return Yh(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Ns=e=>new ac(e),NR=()=>!1,LR=e=>wt(e&&wt.convert(e),e,NR);Ns.isPathValid=LR;Ns.default=Ns;Jh.exports=Ns;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");wt.convert=e;let t=/^[a-z]:\//i;wt.isNotRelative=r=>t.test(r)||Zh(r)}});var r_=d((Vk,t_)=>{"use strict";t_.exports=(...e)=>[...new Set([].concat(...e))]});var cc=d((Wk,s_)=>{"use strict";var xR=R("stream"),n_=xR.PassThrough,MR=Array.prototype.slice;s_.exports=DR;function DR(){let e=[],t=MR.call(arguments),r=!1,n=t[t.length-1];n&&!Array.isArray(n)&&n.pipe==null?t.pop():n={};let i=n.end!==!1,s=n.pipeError===!0;n.objectMode==null&&(n.objectMode=!0),n.highWaterMark==null&&(n.highWaterMark=64*1024);let o=n_(n);function a(){for(let l=0,f=arguments.length;l<f;l++)e.push(i_(arguments[l],n));return u(),this}function u(){if(r)return;r=!0;let l=e.shift();if(!l){process.nextTick(c);return}Array.isArray(l)||(l=[l]);let f=l.length+1;function p(){--f>0||(r=!1,u())}function h(g){function _(){g.removeListener("merge2UnpipeEnd",_),g.removeListener("end",_),s&&g.removeListener("error",v),p()}function v(A){o.emit("error",A)}if(g._readableState.endEmitted)return p();g.on("merge2UnpipeEnd",_),g.on("end",_),s&&g.on("error",v),g.pipe(o,{end:!1}),g.resume()}for(let g=0;g<l.length;g++)h(l[g]);p()}function c(){r=!1,o.emit("queueDrain"),i&&o.end()}return o.setMaxListeners(0),o.add=a,o.on("unpipe",function(l){l.emit("merge2UnpipeEnd")}),t.length&&a.apply(null,t),o}function i_(e,t){if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=i_(e[r],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(n_(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}});var o_=d(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.splitWhen=an.flatten=void 0;function BR(e){return e.reduce((t,r)=>[].concat(t,r),[])}an.flatten=BR;function FR(e,t){let r=[[]],n=0;for(let i of e)t(i)?(n++,r[n]=[]):r[n].push(i);return r}an.splitWhen=FR});var a_=d(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.isEnoentCodeError=void 0;function UR(e){return e.code==="ENOENT"}Ls.isEnoentCodeError=UR});var u_=d(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.createDirentFromStats=void 0;var lc=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function kR(e,t){return new lc(e,t)}xs.createDirentFromStats=kR});var c_=d(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.removeLeadingDotSegment=dt.escape=dt.makeAbsolute=dt.unixify=void 0;var jR=R("path"),qR=2,GR=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\())/g;function $R(e){return e.replace(/\\/g,"/")}dt.unixify=$R;function HR(e,t){return jR.resolve(e,t)}dt.makeAbsolute=HR;function VR(e){return e.replace(GR,"\\$2")}dt.escape=VR;function WR(e){if(e.charAt(0)==="."){let t=e.charAt(1);if(t==="/"||t==="\\")return e.slice(qR)}return e}dt.removeLeadingDotSegment=WR});var d_=d((Qk,l_)=>{l_.exports=function(t){if(typeof t!="string"||t==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1}});var p_=d((Zk,f_)=>{var YR=d_(),KR={"{":"}","(":")","[":"]"},XR=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,zR=/\\(.)|(^!|[*?{}()[\]]|\(\?)/;f_.exports=function(t,r){if(typeof t!="string"||t==="")return!1;if(YR(t))return!0;var n=XR,i;for(r&&r.strict===!1&&(n=zR);i=n.exec(t);){if(i[2])return!0;var s=i.index+i[0].length,o=i[1],a=o?KR[o]:null;if(o&&a){var u=t.indexOf(a,s);u!==-1&&(s=u+1)}t=t.slice(s)}return!1}});var __=d((Jk,h_)=>{"use strict";var QR=p_(),ZR=R("path").posix.dirname,JR=R("os").platform()==="win32",dc="/",eO=/\\/g,tO=/[\{\[].*[\}\]]$/,rO=/(^|[^\\])([\{\[]|\([^\)]+$)/,nO=/\\([\!\*\?\|\[\]\(\)\{\}])/g;h_.exports=function(t,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&JR&&t.indexOf(dc)<0&&(t=t.replace(eO,dc)),tO.test(t)&&(t+=dc),t+="a";do t=ZR(t);while(QR(t)||rO.test(t));return t.replace(nO,"$1")}});var Ms=d(Ke=>{"use strict";Ke.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;Ke.find=(e,t)=>e.nodes.find(r=>r.type===t);Ke.exceedsLimit=(e,t,r=1,n)=>n===!1||!Ke.isInteger(e)||!Ke.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=n;Ke.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];!n||(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};Ke.encloseBrace=e=>e.type!=="brace"?!1:e.commas>>0+e.ranges>>0===0?(e.invalid=!0,!0):!1;Ke.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:e.commas>>0+e.ranges>>0===0||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;Ke.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;Ke.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);Ke.flatten=(...e)=>{let t=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];Array.isArray(s)?r(s,t):s!==void 0&&t.push(s)}return t};return r(e),t}});var Ds=d((tj,m_)=>{"use strict";var g_=Ms();m_.exports=(e,t={})=>{let r=(n,i={})=>{let s=t.escapeInvalid&&g_.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a="";if(n.value)return(s||o)&&g_.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(e)}});var y_=d((rj,E_)=>{"use strict";E_.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}});var C_=d((nj,P_)=>{"use strict";var S_=y_(),pr=(e,t,r)=>{if(S_(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(S_(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),s=String(n.shorthand),o=String(n.capture),a=String(n.wrap),u=e+":"+t+"="+i+s+o+a;if(pr.cache.hasOwnProperty(u))return pr.cache[u].result;let c=Math.min(e,t),l=Math.max(e,t);if(Math.abs(c-l)===1){let _=e+"|"+t;return n.capture?`(${_})`:n.wrap===!1?_:`(?:${_})`}let f=O_(e)||O_(t),p={min:e,max:t,a:c,b:l},h=[],g=[];if(f&&(p.isPadded=f,p.maxLen=String(p.max).length),c<0){let _=l<0?Math.abs(l):1;g=A_(_,Math.abs(c),p,n),c=p.a=0}return l>=0&&(h=A_(c,l,p,n)),p.negatives=g,p.positives=h,p.result=iO(g,h,n),n.capture===!0?p.result=`(${p.result})`:n.wrap!==!1&&h.length+g.length>1&&(p.result=`(?:${p.result})`),pr.cache[u]=p,p.result};function iO(e,t,r){let n=fc(e,t,"-",!1,r)||[],i=fc(t,e,"",!1,r)||[],s=fc(e,t,"-?",!0,r)||[];return n.concat(s).concat(i).join("|")}function sO(e,t){let r=1,n=1,i=b_(e,r),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),r+=1,i=b_(e,r);for(i=T_(t+1,n)-1;e<i&&i<=t;)s.add(i),n+=1,i=T_(t+1,n)-1;return s=[...s],s.sort(uO),s}function oO(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=aO(e,t),i=n.length,s="",o=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?s+=u:u!=="0"||c!=="9"?s+=cO(u,c,r):o++}return o&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[o],digits:i}}function A_(e,t,r,n){let i=sO(e,t),s=[],o=e,a;for(let u=0;u<i.length;u++){let c=i[u],l=oO(String(o),String(c),n),f="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+R_(a.count),o=c+1;continue}r.isPadded&&(f=lO(c,r,n)),l.string=f+l.pattern+R_(l.count),s.push(l),o=c+1,a=l}return s}function fc(e,t,r,n,i){let s=[];for(let o of e){let{string:a}=o;!n&&!v_(t,"string",a)&&s.push(r+a),n&&v_(t,"string",a)&&s.push(r+a)}return s}function aO(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}function uO(e,t){return e>t?1:t>e?-1:0}function v_(e,t,r){return e.some(n=>n[t]===r)}function b_(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function T_(e,t){return e-e%Math.pow(10,t)}function R_(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function cO(e,t,r){return`[${e}${t-e===1?"":"-"}${t}]`}function O_(e){return/^-?(0+)\d/.test(e)}function lO(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}pr.cache={};pr.clearCache=()=>pr.cache={};P_.exports=pr});var _c=d((ij,B_)=>{"use strict";var dO=R("util"),N_=C_(),I_=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),fO=e=>t=>e===!0?Number(t):String(t),pc=e=>typeof e=="number"||typeof e=="string"&&e!=="",Ei=e=>Number.isInteger(+e),hc=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return!1;for(;t[++r]==="0";);return r>0},pO=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,hO=(e,t,r)=>{if(t>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return r===!1?String(e):e},w_=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},_O=(e,t)=>{e.negatives.sort((o,a)=>o<a?-1:o>a?1:0),e.positives.sort((o,a)=>o<a?-1:o>a?1:0);let r=t.capture?"":"?:",n="",i="",s;return e.positives.length&&(n=e.positives.join("|")),e.negatives.length&&(i=`-(${r}${e.negatives.join("|")})`),n&&i?s=`${n}|${i}`:s=n||i,t.wrap?`(${r}${s})`:s},L_=(e,t,r,n)=>{if(r)return N_(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);if(e===t)return i;let s=String.fromCharCode(t);return`[${i}-${s}]`},x_=(e,t,r)=>{if(Array.isArray(e)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${e.join("|")})`:e.join("|")}return N_(e,t,r)},M_=(...e)=>new RangeError("Invalid range arguments: "+dO.inspect(...e)),D_=(e,t,r)=>{if(r.strictRanges===!0)throw M_([e,t]);return[]},gO=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},mO=(e,t,r=1,n={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw M_([e,t]);return[]}i===0&&(i=0),s===0&&(s=0);let o=i>s,a=String(e),u=String(t),c=String(r);r=Math.max(Math.abs(r),1);let l=hc(a)||hc(u)||hc(c),f=l?Math.max(a.length,u.length,c.length):0,p=l===!1&&pO(e,t,n)===!1,h=n.transform||fO(p);if(n.toRegex&&r===1)return L_(w_(e,f),w_(t,f),!0,n);let g={negatives:[],positives:[]},_=S=>g[S<0?"negatives":"positives"].push(Math.abs(S)),v=[],A=0;for(;o?i>=s:i<=s;)n.toRegex===!0&&r>1?_(i):v.push(hO(h(i,A),f,p)),i=o?i-r:i+r,A++;return n.toRegex===!0?r>1?_O(g,n):x_(v,null,{wrap:!1,...n}):v},EO=(e,t,r=1,n={})=>{if(!Ei(e)&&e.length>1||!Ei(t)&&t.length>1)return D_(e,t,n);let i=n.transform||(p=>String.fromCharCode(p)),s=`${e}`.charCodeAt(0),o=`${t}`.charCodeAt(0),a=s>o,u=Math.min(s,o),c=Math.max(s,o);if(n.toRegex&&r===1)return L_(u,c,!1,n);let l=[],f=0;for(;a?s>=o:s<=o;)l.push(i(s,f)),s=a?s-r:s+r,f++;return n.toRegex===!0?x_(l,null,{wrap:!1,options:n}):l},Bs=(e,t,r,n={})=>{if(t==null&&pc(e))return[e];if(!pc(e)||!pc(t))return D_(e,t,n);if(typeof r=="function")return Bs(e,t,1,{transform:r});if(I_(r))return Bs(e,t,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,Ei(r)?Ei(e)&&Ei(t)?mO(e,t,r,i):EO(e,t,Math.max(Math.abs(r),1),i):r!=null&&!I_(r)?gO(r,i):Bs(e,t,1,r)};B_.exports=Bs});var k_=d((sj,U_)=>{"use strict";var yO=_c(),F_=Ms(),SO=(e,t={})=>{let r=(n,i={})=>{let s=F_.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a=s===!0||o===!0,u=t.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=F_.reduce(n.nodes),f=yO(...l,{...t,wrap:!1,toRegex:!0});if(f.length!==0)return l.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let l of n.nodes)c+=r(l,n);return c};return r(e)};U_.exports=SO});var G_=d((oj,q_)=>{"use strict";var AO=_c(),j_=Ds(),un=Ms(),hr=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?un.flatten(t).map(i=>`{${i}}`):t;for(let i of e)if(Array.isArray(i))for(let s of i)n.push(hr(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?hr(i,s,r):i+s);return un.flatten(n)},vO=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,n=(i,s={})=>{i.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(i.invalid||i.dollar){a.push(hr(a.pop(),j_(i,t)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(hr(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let f=un.reduce(i.nodes);if(un.exceedsLimit(...f,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let p=AO(...f,t);p.length===0&&(p=j_(i,t)),a.push(hr(a.pop(),p)),i.nodes=[];return}let u=un.encloseBrace(i),c=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let f=0;f<i.nodes.length;f++){let p=i.nodes[f];if(p.type==="comma"&&i.type==="brace"){f===1&&c.push(""),c.push("");continue}if(p.type==="close"){a.push(hr(a.pop(),c,u));continue}if(p.value&&p.type!=="open"){c.push(hr(c.pop(),p.value));continue}p.nodes&&n(p,i)}return c};return un.flatten(n(e))};q_.exports=vO});var H_=d((aj,$_)=>{"use strict";$_.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var X_=d((uj,K_)=>{"use strict";var bO=Ds(),{MAX_LENGTH:V_,CHAR_BACKSLASH:gc,CHAR_BACKTICK:TO,CHAR_COMMA:RO,CHAR_DOT:OO,CHAR_LEFT_PARENTHESES:PO,CHAR_RIGHT_PARENTHESES:CO,CHAR_LEFT_CURLY_BRACE:IO,CHAR_RIGHT_CURLY_BRACE:wO,CHAR_LEFT_SQUARE_BRACKET:W_,CHAR_RIGHT_SQUARE_BRACKET:Y_,CHAR_DOUBLE_QUOTE:NO,CHAR_SINGLE_QUOTE:LO,CHAR_NO_BREAK_SPACE:xO,CHAR_ZERO_WIDTH_NOBREAK_SPACE:MO}=H_(),DO=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},n=typeof r.maxLength=="number"?Math.min(V_,r.maxLength):V_;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let i={type:"root",input:e,nodes:[]},s=[i],o=i,a=i,u=0,c=e.length,l=0,f=0,p,h={},g=()=>e[l++],_=v=>{if(v.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&v.type==="text"){a.value+=v.value;return}return o.nodes.push(v),v.parent=o,v.prev=a,a=v,v};for(_({type:"bos"});l<c;)if(o=s[s.length-1],p=g(),!(p===MO||p===xO)){if(p===gc){_({type:"text",value:(t.keepEscaping?p:"")+g()});continue}if(p===Y_){_({type:"text",value:"\\"+p});continue}if(p===W_){u++;let v=!0,A;for(;l<c&&(A=g());){if(p+=A,A===W_){u++;continue}if(A===gc){p+=g();continue}if(A===Y_&&(u--,u===0))break}_({type:"text",value:p});continue}if(p===PO){o=_({type:"paren",nodes:[]}),s.push(o),_({type:"text",value:p});continue}if(p===CO){if(o.type!=="paren"){_({type:"text",value:p});continue}o=s.pop(),_({type:"text",value:p}),o=s[s.length-1];continue}if(p===NO||p===LO||p===TO){let v=p,A;for(t.keepQuotes!==!0&&(p="");l<c&&(A=g());){if(A===gc){p+=A+g();continue}if(A===v){t.keepQuotes===!0&&(p+=A);break}p+=A}_({type:"text",value:p});continue}if(p===IO){f++;let A={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};o=_(A),s.push(o),_({type:"open",value:p});continue}if(p===wO){if(o.type!=="brace"){_({type:"text",value:p});continue}let v="close";o=s.pop(),o.close=!0,_({type:v,value:p}),f--,o=s[s.length-1];continue}if(p===RO&&f>0){if(o.ranges>0){o.ranges=0;let v=o.nodes.shift();o.nodes=[v,{type:"text",value:bO(o)}]}_({type:"comma",value:p}),o.commas++;continue}if(p===OO&&f>0&&o.commas===0){let v=o.nodes;if(f===0||v.length===0){_({type:"text",value:p});continue}if(a.type==="dot"){if(o.range=[],a.value+=p,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){v.pop();let A=v[v.length-1];A.value+=a.value+p,a=A,o.ranges--;continue}_({type:"dot",value:p});continue}_({type:"text",value:p})}do if(o=s.pop(),o.type!=="root"){o.nodes.forEach(S=>{S.nodes||(S.type==="open"&&(S.isOpen=!0),S.type==="close"&&(S.isClose=!0),S.nodes||(S.type="text"),S.invalid=!0)});let v=s[s.length-1],A=v.nodes.indexOf(o);v.nodes.splice(A,1,...o.nodes)}while(s.length>0);return _({type:"eos"}),i};K_.exports=DO});var Z_=d((cj,Q_)=>{"use strict";var z_=Ds(),BO=k_(),FO=G_(),UO=X_(),Ge=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let i=Ge.create(n,t);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(Ge.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};Ge.parse=(e,t={})=>UO(e,t);Ge.stringify=(e,t={})=>z_(typeof e=="string"?Ge.parse(e,t):e,t);Ge.compile=(e,t={})=>(typeof e=="string"&&(e=Ge.parse(e,t)),BO(e,t));Ge.expand=(e,t={})=>{typeof e=="string"&&(e=Ge.parse(e,t));let r=FO(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};Ge.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?Ge.compile(e,t):Ge.expand(e,t);Q_.exports=Ge});var yi=d((lj,ng)=>{"use strict";var kO=R("path"),ft="\\\\/",J_=`[^${ft}]`,Nt="\\.",jO="\\+",qO="\\?",Fs="\\/",GO="(?=.)",eg="[^/]",mc=`(?:${Fs}|$)`,tg=`(?:^|${Fs})`,Ec=`${Nt}{1,2}${mc}`,$O=`(?!${Nt})`,HO=`(?!${tg}${Ec})`,VO=`(?!${Nt}{0,1}${mc})`,WO=`(?!${Ec})`,YO=`[^.${Fs}]`,KO=`${eg}*?`,rg={DOT_LITERAL:Nt,PLUS_LITERAL:jO,QMARK_LITERAL:qO,SLASH_LITERAL:Fs,ONE_CHAR:GO,QMARK:eg,END_ANCHOR:mc,DOTS_SLASH:Ec,NO_DOT:$O,NO_DOTS:HO,NO_DOT_SLASH:VO,NO_DOTS_SLASH:WO,QMARK_NO_DOT:YO,STAR:KO,START_ANCHOR:tg},XO={...rg,SLASH_LITERAL:`[${ft}]`,QMARK:J_,STAR:`${J_}*?`,DOTS_SLASH:`${Nt}{1,2}(?:[${ft}]|$)`,NO_DOT:`(?!${Nt})`,NO_DOTS:`(?!(?:^|[${ft}])${Nt}{1,2}(?:[${ft}]|$))`,NO_DOT_SLASH:`(?!${Nt}{0,1}(?:[${ft}]|$))`,NO_DOTS_SLASH:`(?!${Nt}{1,2}(?:[${ft}]|$))`,QMARK_NO_DOT:`[^.${ft}]`,START_ANCHOR:`(?:^|[${ft}])`,END_ANCHOR:`(?:[${ft}]|$)`},zO={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ng.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:zO,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:kO.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?XO:rg}}});var Si=d(Me=>{"use strict";var QO=R("path"),ZO=process.platform==="win32",{REGEX_BACKSLASH:JO,REGEX_REMOVE_BACKSLASH:eP,REGEX_SPECIAL_CHARS:tP,REGEX_SPECIAL_CHARS_GLOBAL:rP}=yi();Me.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Me.hasRegexChars=e=>tP.test(e);Me.isRegexChar=e=>e.length===1&&Me.hasRegexChars(e);Me.escapeRegex=e=>e.replace(rP,"\\$1");Me.toPosixSlashes=e=>e.replace(JO,"/");Me.removeBackslashes=e=>e.replace(eP,t=>t==="\\"?"":t);Me.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Me.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:ZO===!0||QO.sep==="\\";Me.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Me.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Me.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Me.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",s=`${n}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var dg=d((fj,lg)=>{"use strict";var ig=Si(),{CHAR_ASTERISK:yc,CHAR_AT:nP,CHAR_BACKWARD_SLASH:Ai,CHAR_COMMA:iP,CHAR_DOT:Sc,CHAR_EXCLAMATION_MARK:Ac,CHAR_FORWARD_SLASH:cg,CHAR_LEFT_CURLY_BRACE:vc,CHAR_LEFT_PARENTHESES:bc,CHAR_LEFT_SQUARE_BRACKET:sP,CHAR_PLUS:oP,CHAR_QUESTION_MARK:sg,CHAR_RIGHT_CURLY_BRACE:aP,CHAR_RIGHT_PARENTHESES:og,CHAR_RIGHT_SQUARE_BRACKET:uP}=yi(),ag=e=>e===cg||e===Ai,ug=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},cP=(e,t)=>{let r=t||{},n=e.length-1,i=r.parts===!0||r.scanToEnd===!0,s=[],o=[],a=[],u=e,c=-1,l=0,f=0,p=!1,h=!1,g=!1,_=!1,v=!1,A=!1,S=!1,b=!1,X=!1,x=!1,D=0,P,w,N={value:"",depth:0,isGlob:!1},j=()=>c>=n,y=()=>u.charCodeAt(c+1),$=()=>(P=w,u.charCodeAt(++c));for(;c<n;){w=$();let Ee;if(w===Ai){S=N.backslashes=!0,w=$(),w===vc&&(A=!0);continue}if(A===!0||w===vc){for(D++;j()!==!0&&(w=$());){if(w===Ai){S=N.backslashes=!0,$();continue}if(w===vc){D++;continue}if(A!==!0&&w===Sc&&(w=$())===Sc){if(p=N.isBrace=!0,g=N.isGlob=!0,x=!0,i===!0)continue;break}if(A!==!0&&w===iP){if(p=N.isBrace=!0,g=N.isGlob=!0,x=!0,i===!0)continue;break}if(w===aP&&(D--,D===0)){A=!1,p=N.isBrace=!0,x=!0;break}}if(i===!0)continue;break}if(w===cg){if(s.push(c),o.push(N),N={value:"",depth:0,isGlob:!1},x===!0)continue;if(P===Sc&&c===l+1){l+=2;continue}f=c+1;continue}if(r.noext!==!0&&(w===oP||w===nP||w===yc||w===sg||w===Ac)===!0&&y()===bc){if(g=N.isGlob=!0,_=N.isExtglob=!0,x=!0,w===Ac&&c===l&&(X=!0),i===!0){for(;j()!==!0&&(w=$());){if(w===Ai){S=N.backslashes=!0,w=$();continue}if(w===og){g=N.isGlob=!0,x=!0;break}}continue}break}if(w===yc){if(P===yc&&(v=N.isGlobstar=!0),g=N.isGlob=!0,x=!0,i===!0)continue;break}if(w===sg){if(g=N.isGlob=!0,x=!0,i===!0)continue;break}if(w===sP){for(;j()!==!0&&(Ee=$());){if(Ee===Ai){S=N.backslashes=!0,$();continue}if(Ee===uP){h=N.isBracket=!0,g=N.isGlob=!0,x=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&w===Ac&&c===l){b=N.negated=!0,l++;continue}if(r.noparen!==!0&&w===bc){if(g=N.isGlob=!0,i===!0){for(;j()!==!0&&(w=$());){if(w===bc){S=N.backslashes=!0,w=$();continue}if(w===og){x=!0;break}}continue}break}if(g===!0){if(x=!0,i===!0)continue;break}}r.noext===!0&&(_=!1,g=!1);let C=u,ce="",E="";l>0&&(ce=u.slice(0,l),u=u.slice(l),f-=l),C&&g===!0&&f>0?(C=u.slice(0,f),E=u.slice(f)):g===!0?(C="",E=u):C=u,C&&C!==""&&C!=="/"&&C!==u&&ag(C.charCodeAt(C.length-1))&&(C=C.slice(0,-1)),r.unescape===!0&&(E&&(E=ig.removeBackslashes(E)),C&&S===!0&&(C=ig.removeBackslashes(C)));let m={prefix:ce,input:e,start:l,base:C,glob:E,isBrace:p,isBracket:h,isGlob:g,isExtglob:_,isGlobstar:v,negated:b,negatedExtglob:X};if(r.tokens===!0&&(m.maxDepth=0,ag(w)||o.push(N),m.tokens=o),r.parts===!0||r.tokens===!0){let Ee;for(let Y=0;Y<s.length;Y++){let ct=Ee?Ee+1:l,lt=s[Y],qe=e.slice(ct,lt);r.tokens&&(Y===0&&l!==0?(o[Y].isPrefix=!0,o[Y].value=ce):o[Y].value=qe,ug(o[Y]),m.maxDepth+=o[Y].depth),(Y!==0||qe!=="")&&a.push(qe),Ee=lt}if(Ee&&Ee+1<e.length){let Y=e.slice(Ee+1);a.push(Y),r.tokens&&(o[o.length-1].value=Y,ug(o[o.length-1]),m.maxDepth+=o[o.length-1].depth)}m.slashes=s,m.parts=a}return m};lg.exports=cP});var _g=d((pj,hg)=>{"use strict";var Us=yi(),$e=Si(),{MAX_LENGTH:ks,POSIX_REGEX_SOURCE:lP,REGEX_NON_SPECIAL_CHARS:dP,REGEX_SPECIAL_CHARS_BACKREF:fP,REPLACEMENTS:fg}=Us,pP=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(i=>$e.escapeRegex(i)).join("..")}return r},cn=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,pg=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=fg[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(ks,r.maxLength):ks,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let s={type:"bos",value:"",output:r.prepend||""},o=[s],a=r.capture?"":"?:",u=$e.isWindows(t),c=Us.globChars(u),l=Us.extglobChars(c),{DOT_LITERAL:f,PLUS_LITERAL:p,SLASH_LITERAL:h,ONE_CHAR:g,DOTS_SLASH:_,NO_DOT:v,NO_DOT_SLASH:A,NO_DOTS_SLASH:S,QMARK:b,QMARK_NO_DOT:X,STAR:x,START_ANCHOR:D}=c,P=O=>`(${a}(?:(?!${D}${O.dot?_:f}).)*?)`,w=r.dot?"":v,N=r.dot?b:X,j=r.bash===!0?P(r):x;r.capture&&(j=`(${j})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let y={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};e=$e.removePrefix(e,y),i=e.length;let $=[],C=[],ce=[],E=s,m,Ee=()=>y.index===i-1,Y=y.peek=(O=1)=>e[y.index+O],ct=y.advance=()=>e[++y.index]||"",lt=()=>e.slice(y.index+1),qe=(O="",te=0)=>{y.consumed+=O,y.index+=te},Os=O=>{y.output+=O.output!=null?O.output:O.value,qe(O.value)},aR=()=>{let O=1;for(;Y()==="!"&&(Y(2)!=="("||Y(3)==="?");)ct(),y.start++,O++;return O%2===0?!1:(y.negated=!0,y.start++,!0)},Ps=O=>{y[O]++,ce.push(O)},fr=O=>{y[O]--,ce.pop()},V=O=>{if(E.type==="globstar"){let te=y.braces>0&&(O.type==="comma"||O.type==="brace"),T=O.extglob===!0||$.length&&(O.type==="pipe"||O.type==="paren");O.type!=="slash"&&O.type!=="paren"&&!te&&!T&&(y.output=y.output.slice(0,-E.output.length),E.type="star",E.value="*",E.output=j,y.output+=E.output)}if($.length&&O.type!=="paren"&&($[$.length-1].inner+=O.value),(O.value||O.output)&&Os(O),E&&E.type==="text"&&O.type==="text"){E.value+=O.value,E.output=(E.output||"")+O.value;return}O.prev=E,o.push(O),E=O},Cs=(O,te)=>{let T={...l[te],conditions:1,inner:""};T.prev=E,T.parens=y.parens,T.output=y.output;let G=(r.capture?"(":"")+T.open;Ps("parens"),V({type:O,value:te,output:y.output?"":g}),V({type:"paren",extglob:!0,value:ct(),output:G}),$.push(T)},uR=O=>{let te=O.close+(r.capture?")":""),T;if(O.type==="negate"){let G=j;O.inner&&O.inner.length>1&&O.inner.includes("/")&&(G=P(r)),(G!==j||Ee()||/^\)+$/.test(lt()))&&(te=O.close=`)$))${G}`),O.inner.includes("*")&&(T=lt())&&/^\.[^\\/.]+$/.test(T)&&(te=O.close=`)${T})${G})`),O.prev.type==="bos"&&(y.negatedExtglob=!0)}V({type:"paren",extglob:!0,value:m,output:te}),fr("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let O=!1,te=e.replace(fP,(T,G,oe,Ie,_e,nc)=>Ie==="\\"?(O=!0,T):Ie==="?"?G?G+Ie+(_e?b.repeat(_e.length):""):nc===0?N+(_e?b.repeat(_e.length):""):b.repeat(oe.length):Ie==="."?f.repeat(oe.length):Ie==="*"?G?G+Ie+(_e?j:""):j:G?T:`\\${T}`);return O===!0&&(r.unescape===!0?te=te.replace(/\\/g,""):te=te.replace(/\\+/g,T=>T.length%2===0?"\\\\":T?"\\":"")),te===e&&r.contains===!0?(y.output=e,y):(y.output=$e.wrapOutput(te,y,t),y)}for(;!Ee();){if(m=ct(),m==="\0")continue;if(m==="\\"){let T=Y();if(T==="/"&&r.bash!==!0||T==="."||T===";")continue;if(!T){m+="\\",V({type:"text",value:m});continue}let G=/^\\+/.exec(lt()),oe=0;if(G&&G[0].length>2&&(oe=G[0].length,y.index+=oe,oe%2!==0&&(m+="\\")),r.unescape===!0?m=ct():m+=ct(),y.brackets===0){V({type:"text",value:m});continue}}if(y.brackets>0&&(m!=="]"||E.value==="["||E.value==="[^")){if(r.posix!==!1&&m===":"){let T=E.value.slice(1);if(T.includes("[")&&(E.posix=!0,T.includes(":"))){let G=E.value.lastIndexOf("["),oe=E.value.slice(0,G),Ie=E.value.slice(G+2),_e=lP[Ie];if(_e){E.value=oe+_e,y.backtrack=!0,ct(),!s.output&&o.indexOf(E)===1&&(s.output=g);continue}}}(m==="["&&Y()!==":"||m==="-"&&Y()==="]")&&(m=`\\${m}`),m==="]"&&(E.value==="["||E.value==="[^")&&(m=`\\${m}`),r.posix===!0&&m==="!"&&E.value==="["&&(m="^"),E.value+=m,Os({value:m});continue}if(y.quotes===1&&m!=='"'){m=$e.escapeRegex(m),E.value+=m,Os({value:m});continue}if(m==='"'){y.quotes=y.quotes===1?0:1,r.keepQuotes===!0&&V({type:"text",value:m});continue}if(m==="("){Ps("parens"),V({type:"paren",value:m});continue}if(m===")"){if(y.parens===0&&r.strictBrackets===!0)throw new SyntaxError(cn("opening","("));let T=$[$.length-1];if(T&&y.parens===T.parens+1){uR($.pop());continue}V({type:"paren",value:m,output:y.parens?")":"\\)"}),fr("parens");continue}if(m==="["){if(r.nobracket===!0||!lt().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(cn("closing","]"));m=`\\${m}`}else Ps("brackets");V({type:"bracket",value:m});continue}if(m==="]"){if(r.nobracket===!0||E&&E.type==="bracket"&&E.value.length===1){V({type:"text",value:m,output:`\\${m}`});continue}if(y.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(cn("opening","["));V({type:"text",value:m,output:`\\${m}`});continue}fr("brackets");let T=E.value.slice(1);if(E.posix!==!0&&T[0]==="^"&&!T.includes("/")&&(m=`/${m}`),E.value+=m,Os({value:m}),r.literalBrackets===!1||$e.hasRegexChars(T))continue;let G=$e.escapeRegex(E.value);if(y.output=y.output.slice(0,-E.value.length),r.literalBrackets===!0){y.output+=G,E.value=G;continue}E.value=`(${a}${G}|${E.value})`,y.output+=E.value;continue}if(m==="{"&&r.nobrace!==!0){Ps("braces");let T={type:"brace",value:m,output:"(",outputIndex:y.output.length,tokensIndex:y.tokens.length};C.push(T),V(T);continue}if(m==="}"){let T=C[C.length-1];if(r.nobrace===!0||!T){V({type:"text",value:m,output:m});continue}let G=")";if(T.dots===!0){let oe=o.slice(),Ie=[];for(let _e=oe.length-1;_e>=0&&(o.pop(),oe[_e].type!=="brace");_e--)oe[_e].type!=="dots"&&Ie.unshift(oe[_e].value);G=pP(Ie,r),y.backtrack=!0}if(T.comma!==!0&&T.dots!==!0){let oe=y.output.slice(0,T.outputIndex),Ie=y.tokens.slice(T.tokensIndex);T.value=T.output="\\{",m=G="\\}",y.output=oe;for(let _e of Ie)y.output+=_e.output||_e.value}V({type:"brace",value:m,output:G}),fr("braces"),C.pop();continue}if(m==="|"){$.length>0&&$[$.length-1].conditions++,V({type:"text",value:m});continue}if(m===","){let T=m,G=C[C.length-1];G&&ce[ce.length-1]==="braces"&&(G.comma=!0,T="|"),V({type:"comma",value:m,output:T});continue}if(m==="/"){if(E.type==="dot"&&y.index===y.start+1){y.start=y.index+1,y.consumed="",y.output="",o.pop(),E=s;continue}V({type:"slash",value:m,output:h});continue}if(m==="."){if(y.braces>0&&E.type==="dot"){E.value==="."&&(E.output=f);let T=C[C.length-1];E.type="dots",E.output+=m,E.value+=m,T.dots=!0;continue}if(y.braces+y.parens===0&&E.type!=="bos"&&E.type!=="slash"){V({type:"text",value:m,output:f});continue}V({type:"dot",value:m,output:f});continue}if(m==="?"){if(!(E&&E.value==="(")&&r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){Cs("qmark",m);continue}if(E&&E.type==="paren"){let G=Y(),oe=m;if(G==="<"&&!$e.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(E.value==="("&&!/[!=<:]/.test(G)||G==="<"&&!/<([!=]|\w+>)/.test(lt()))&&(oe=`\\${m}`),V({type:"text",value:m,output:oe});continue}if(r.dot!==!0&&(E.type==="slash"||E.type==="bos")){V({type:"qmark",value:m,output:X});continue}V({type:"qmark",value:m,output:b});continue}if(m==="!"){if(r.noextglob!==!0&&Y()==="("&&(Y(2)!=="?"||!/[!=<:]/.test(Y(3)))){Cs("negate",m);continue}if(r.nonegate!==!0&&y.index===0){aR();continue}}if(m==="+"){if(r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){Cs("plus",m);continue}if(E&&E.value==="("||r.regex===!1){V({type:"plus",value:m,output:p});continue}if(E&&(E.type==="bracket"||E.type==="paren"||E.type==="brace")||y.parens>0){V({type:"plus",value:m});continue}V({type:"plus",value:p});continue}if(m==="@"){if(r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){V({type:"at",extglob:!0,value:m,output:""});continue}V({type:"text",value:m});continue}if(m!=="*"){(m==="$"||m==="^")&&(m=`\\${m}`);let T=dP.exec(lt());T&&(m+=T[0],y.index+=T[0].length),V({type:"text",value:m});continue}if(E&&(E.type==="globstar"||E.star===!0)){E.type="star",E.star=!0,E.value+=m,E.output=j,y.backtrack=!0,y.globstar=!0,qe(m);continue}let O=lt();if(r.noextglob!==!0&&/^\([^?]/.test(O)){Cs("star",m);continue}if(E.type==="star"){if(r.noglobstar===!0){qe(m);continue}let T=E.prev,G=T.prev,oe=T.type==="slash"||T.type==="bos",Ie=G&&(G.type==="star"||G.type==="globstar");if(r.bash===!0&&(!oe||O[0]&&O[0]!=="/")){V({type:"star",value:m,output:""});continue}let _e=y.braces>0&&(T.type==="comma"||T.type==="brace"),nc=$.length&&(T.type==="pipe"||T.type==="paren");if(!oe&&T.type!=="paren"&&!_e&&!nc){V({type:"star",value:m,output:""});continue}for(;O.slice(0,3)==="/**";){let Is=e[y.index+4];if(Is&&Is!=="/")break;O=O.slice(3),qe("/**",3)}if(T.type==="bos"&&Ee()){E.type="globstar",E.value+=m,E.output=P(r),y.output=E.output,y.globstar=!0,qe(m);continue}if(T.type==="slash"&&T.prev.type!=="bos"&&!Ie&&Ee()){y.output=y.output.slice(0,-(T.output+E.output).length),T.output=`(?:${T.output}`,E.type="globstar",E.output=P(r)+(r.strictSlashes?")":"|$)"),E.value+=m,y.globstar=!0,y.output+=T.output+E.output,qe(m);continue}if(T.type==="slash"&&T.prev.type!=="bos"&&O[0]==="/"){let Is=O[1]!==void 0?"|$":"";y.output=y.output.slice(0,-(T.output+E.output).length),T.output=`(?:${T.output}`,E.type="globstar",E.output=`${P(r)}${h}|${h}${Is})`,E.value+=m,y.output+=T.output+E.output,y.globstar=!0,qe(m+ct()),V({type:"slash",value:"/",output:""});continue}if(T.type==="bos"&&O[0]==="/"){E.type="globstar",E.value+=m,E.output=`(?:^|${h}|${P(r)}${h})`,y.output=E.output,y.globstar=!0,qe(m+ct()),V({type:"slash",value:"/",output:""});continue}y.output=y.output.slice(0,-E.output.length),E.type="globstar",E.output=P(r),E.value+=m,y.output+=E.output,y.globstar=!0,qe(m);continue}let te={type:"star",value:m,output:j};if(r.bash===!0){te.output=".*?",(E.type==="bos"||E.type==="slash")&&(te.output=w+te.output),V(te);continue}if(E&&(E.type==="bracket"||E.type==="paren")&&r.regex===!0){te.output=m,V(te);continue}(y.index===y.start||E.type==="slash"||E.type==="dot")&&(E.type==="dot"?(y.output+=A,E.output+=A):r.dot===!0?(y.output+=S,E.output+=S):(y.output+=w,E.output+=w),Y()!=="*"&&(y.output+=g,E.output+=g)),V(te)}for(;y.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(cn("closing","]"));y.output=$e.escapeLast(y.output,"["),fr("brackets")}for(;y.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(cn("closing",")"));y.output=$e.escapeLast(y.output,"("),fr("parens")}for(;y.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(cn("closing","}"));y.output=$e.escapeLast(y.output,"{"),fr("braces")}if(r.strictSlashes!==!0&&(E.type==="star"||E.type==="bracket")&&V({type:"maybe_slash",value:"",output:`${h}?`}),y.backtrack===!0){y.output="";for(let O of y.tokens)y.output+=O.output!=null?O.output:O.value,O.suffix&&(y.output+=O.suffix)}return y};pg.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(ks,r.maxLength):ks,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);e=fg[e]||e;let s=$e.isWindows(t),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:f,NO_DOTS_SLASH:p,STAR:h,START_ANCHOR:g}=Us.globChars(s),_=r.dot?f:l,v=r.dot?p:l,A=r.capture?"":"?:",S={negated:!1,prefix:""},b=r.bash===!0?".*?":h;r.capture&&(b=`(${b})`);let X=w=>w.noglobstar===!0?b:`(${A}(?:(?!${g}${w.dot?c:o}).)*?)`,x=w=>{switch(w){case"*":return`${_}${u}${b}`;case".*":return`${o}${u}${b}`;case"*.*":return`${_}${b}${o}${u}${b}`;case"*/*":return`${_}${b}${a}${u}${v}${b}`;case"**":return _+X(r);case"**/*":return`(?:${_}${X(r)}${a})?${v}${u}${b}`;case"**/*.*":return`(?:${_}${X(r)}${a})?${v}${b}${o}${u}${b}`;case"**/.*":return`(?:${_}${X(r)}${a})?${o}${u}${b}`;default:{let N=/^(.*?)\.(\w+)$/.exec(w);if(!N)return;let j=x(N[1]);return j?j+o+N[2]:void 0}}},D=$e.removePrefix(e,S),P=x(D);return P&&r.strictSlashes!==!0&&(P+=`${a}?`),P};hg.exports=pg});var mg=d((hj,gg)=>{"use strict";var hP=R("path"),_P=dg(),Tc=_g(),Rc=Si(),gP=yi(),mP=e=>e&&typeof e=="object"&&!Array.isArray(e),ae=(e,t,r=!1)=>{if(Array.isArray(e)){let l=e.map(p=>ae(p,t,r));return p=>{for(let h of l){let g=h(p);if(g)return g}return!1}}let n=mP(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=Rc.isWindows(t),o=n?ae.compileRe(e,t):ae.makeRe(e,t,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(i.ignore){let l={...t,ignore:null,onMatch:null,onResult:null};u=ae(i.ignore,l,r)}let c=(l,f=!1)=>{let{isMatch:p,match:h,output:g}=ae.test(l,o,t,{glob:e,posix:s}),_={glob:e,state:a,regex:o,posix:s,input:l,output:g,match:h,isMatch:p};return typeof i.onResult=="function"&&i.onResult(_),p===!1?(_.isMatch=!1,f?_:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(_),_.isMatch=!1,f?_:!1):(typeof i.onMatch=="function"&&i.onMatch(_),f?_:!0)};return r&&(c.state=a),c};ae.test=(e,t,r,{glob:n,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=r||{},o=s.format||(i?Rc.toPosixSlashes:null),a=e===n,u=a&&o?o(e):e;return a===!1&&(u=o?o(e):e,a=u===n),(a===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?a=ae.matchBase(e,t,r,i):a=t.exec(u)),{isMatch:Boolean(a),match:a,output:u}};ae.matchBase=(e,t,r,n=Rc.isWindows(r))=>(t instanceof RegExp?t:ae.makeRe(t,r)).test(hP.basename(e));ae.isMatch=(e,t,r)=>ae(t,r)(e);ae.parse=(e,t)=>Array.isArray(e)?e.map(r=>ae.parse(r,t)):Tc(e,{...t,fastpaths:!1});ae.scan=(e,t)=>_P(e,t);ae.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let i=t||{},s=i.contains?"":"^",o=i.contains?"":"$",a=`${s}(?:${e.output})${o}`;e&&e.negated===!0&&(a=`^(?!${a}).*$`);let u=ae.toRegex(a,t);return n===!0&&(u.state=e),u};ae.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=Tc.fastpaths(e,t)),i.output||(i=Tc(e,t)),ae.compileRe(i,t,r,n)};ae.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};ae.constants=gP;gg.exports=ae});var yg=d((_j,Eg)=>{"use strict";Eg.exports=mg()});var Pc=d((gj,bg)=>{"use strict";var Ag=R("util"),vg=Z_(),pt=yg(),Oc=Si(),Sg=e=>e===""||e==="./",ne=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,i=new Set,s=new Set,o=0,a=l=>{s.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<t.length;l++){let f=pt(String(t[l]),{...r,onResult:a},!0),p=f.state.negated||f.state.negatedExtglob;p&&o++;for(let h of e){let g=f(h,!0);!(p?!g.isMatch:g.isMatch)||(p?n.add(g.output):(n.delete(g.output),i.add(g.output)))}}let c=(o===t.length?[...s]:[...i]).filter(l=>!n.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?t.map(l=>l.replace(/\\/g,"")):t}return c};ne.match=ne;ne.matcher=(e,t)=>pt(e,t);ne.isMatch=(e,t,r)=>pt(t,r)(e);ne.any=ne.isMatch;ne.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,i=[],o=ne(e,t,{...r,onResult:a=>{r.onResult&&r.onResult(a),i.push(a.output)}});for(let a of i)o.includes(a)||n.add(a);return[...n]};ne.contains=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Ag.inspect(e)}"`);if(Array.isArray(t))return t.some(n=>ne.contains(e,n,r));if(typeof t=="string"){if(Sg(e)||Sg(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return ne.isMatch(e,t,{...r,contains:!0})};ne.matchKeys=(e,t,r)=>{if(!Oc.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=ne(Object.keys(e),t,r),i={};for(let s of n)i[s]=e[s];return i};ne.some=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=pt(String(i),r);if(n.some(o=>s(o)))return!0}return!1};ne.every=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=pt(String(i),r);if(!n.every(o=>s(o)))return!1}return!0};ne.all=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Ag.inspect(e)}"`);return[].concat(t).every(n=>pt(n,r)(e))};ne.capture=(e,t,r)=>{let n=Oc.isWindows(r),s=pt.makeRe(String(e),{...r,capture:!0}).exec(n?Oc.toPosixSlashes(t):t);if(s)return s.slice(1).map(o=>o===void 0?"":o)};ne.makeRe=(...e)=>pt.makeRe(...e);ne.scan=(...e)=>pt.scan(...e);ne.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let i of vg(String(n),t))r.push(pt.parse(i,t));return r};ne.braces=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!/\{.*\}/.test(e)?[e]:vg(e,t)};ne.braceExpand=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return ne.braces(e,{...t,expand:!0})};bg.exports=ne});var Ng=d(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.matchAny=U.convertPatternsToRe=U.makeRe=U.getPatternParts=U.expandBraceExpansion=U.expandPatternsWithBraceExpansion=U.isAffectDepthOfReadingPattern=U.endsWithSlashGlobStar=U.hasGlobStar=U.getBaseDirectory=U.isPatternRelatedToParentDirectory=U.getPatternsOutsideCurrentDirectory=U.getPatternsInsideCurrentDirectory=U.getPositivePatterns=U.getNegativePatterns=U.isPositivePattern=U.isNegativePattern=U.convertToNegativePattern=U.convertToPositivePattern=U.isDynamicPattern=U.isStaticPattern=void 0;var EP=R("path"),yP=__(),Cc=Pc(),Tg="**",SP="\\",AP=/[*?]|^!/,vP=/\[[^[]*]/,bP=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,TP=/[!*+?@]\([^(]*\)/,RP=/,|\.\./;function Rg(e,t={}){return!Og(e,t)}U.isStaticPattern=Rg;function Og(e,t={}){return e===""?!1:!!(t.caseSensitiveMatch===!1||e.includes(SP)||AP.test(e)||vP.test(e)||bP.test(e)||t.extglob!==!1&&TP.test(e)||t.braceExpansion!==!1&&OP(e))}U.isDynamicPattern=Og;function OP(e){let t=e.indexOf("{");if(t===-1)return!1;let r=e.indexOf("}",t+1);if(r===-1)return!1;let n=e.slice(t,r);return RP.test(n)}function PP(e){return js(e)?e.slice(1):e}U.convertToPositivePattern=PP;function CP(e){return"!"+e}U.convertToNegativePattern=CP;function js(e){return e.startsWith("!")&&e[1]!=="("}U.isNegativePattern=js;function Pg(e){return!js(e)}U.isPositivePattern=Pg;function IP(e){return e.filter(js)}U.getNegativePatterns=IP;function wP(e){return e.filter(Pg)}U.getPositivePatterns=wP;function NP(e){return e.filter(t=>!Ic(t))}U.getPatternsInsideCurrentDirectory=NP;function LP(e){return e.filter(Ic)}U.getPatternsOutsideCurrentDirectory=LP;function Ic(e){return e.startsWith("..")||e.startsWith("./..")}U.isPatternRelatedToParentDirectory=Ic;function xP(e){return yP(e,{flipBackslashes:!1})}U.getBaseDirectory=xP;function MP(e){return e.includes(Tg)}U.hasGlobStar=MP;function Cg(e){return e.endsWith("/"+Tg)}U.endsWithSlashGlobStar=Cg;function DP(e){let t=EP.basename(e);return Cg(e)||Rg(t)}U.isAffectDepthOfReadingPattern=DP;function BP(e){return e.reduce((t,r)=>t.concat(Ig(r)),[])}U.expandPatternsWithBraceExpansion=BP;function Ig(e){return Cc.braces(e,{expand:!0,nodupes:!0})}U.expandBraceExpansion=Ig;function FP(e,t){let{parts:r}=Cc.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return r.length===0&&(r=[e]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}U.getPatternParts=FP;function wg(e,t){return Cc.makeRe(e,t)}U.makeRe=wg;function UP(e,t){return e.map(r=>wg(r,t))}U.convertPatternsToRe=UP;function kP(e,t){return t.some(r=>r.test(e))}U.matchAny=kP});var xg=d(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.merge=void 0;var jP=cc();function qP(e){let t=jP(e);return e.forEach(r=>{r.once("error",n=>t.emit("error",n))}),t.once("close",()=>Lg(e)),t.once("end",()=>Lg(e)),t}qs.merge=qP;function Lg(e){e.forEach(t=>t.emit("close"))}});var Mg=d(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.isEmpty=ln.isString=void 0;function GP(e){return typeof e=="string"}ln.isString=GP;function $P(e){return e===""}ln.isEmpty=$P});var Lt=d(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.string=Se.stream=Se.pattern=Se.path=Se.fs=Se.errno=Se.array=void 0;var HP=o_();Se.array=HP;var VP=a_();Se.errno=VP;var WP=u_();Se.fs=WP;var YP=c_();Se.path=YP;var KP=Ng();Se.pattern=KP;var XP=xg();Se.stream=XP;var zP=Mg();Se.string=zP});var Fg=d(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.convertPatternGroupToTask=Ae.convertPatternGroupsToTasks=Ae.groupPatternsByBaseDirectory=Ae.getNegativePatternsAsPositive=Ae.getPositivePatterns=Ae.convertPatternsToTasks=Ae.generate=void 0;var xt=Lt();function QP(e,t){let r=Dg(e),n=Bg(e,t.ignore),i=r.filter(u=>xt.pattern.isStaticPattern(u,t)),s=r.filter(u=>xt.pattern.isDynamicPattern(u,t)),o=wc(i,n,!1),a=wc(s,n,!0);return o.concat(a)}Ae.generate=QP;function wc(e,t,r){let n=[],i=xt.pattern.getPatternsOutsideCurrentDirectory(e),s=xt.pattern.getPatternsInsideCurrentDirectory(e),o=Nc(i),a=Nc(s);return n.push(...Lc(o,t,r)),"."in a?n.push(xc(".",s,t,r)):n.push(...Lc(a,t,r)),n}Ae.convertPatternsToTasks=wc;function Dg(e){return xt.pattern.getPositivePatterns(e)}Ae.getPositivePatterns=Dg;function Bg(e,t){return xt.pattern.getNegativePatterns(e).concat(t).map(xt.pattern.convertToPositivePattern)}Ae.getNegativePatternsAsPositive=Bg;function Nc(e){let t={};return e.reduce((r,n)=>{let i=xt.pattern.getBaseDirectory(n);return i in r?r[i].push(n):r[i]=[n],r},t)}Ae.groupPatternsByBaseDirectory=Nc;function Lc(e,t,r){return Object.keys(e).map(n=>xc(n,e[n],t,r))}Ae.convertPatternGroupsToTasks=Lc;function xc(e,t,r,n){return{dynamic:n,positive:t,negative:r,base:e,patterns:[].concat(t,r.map(xt.pattern.convertToNegativePattern))}}Ae.convertPatternGroupToTask=xc});var kg=d(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.removeDuplicateSlashes=dn.transform=void 0;var ZP=/(?!^)\/{2,}/g;function JP(e){return e.map(t=>Ug(t))}dn.transform=JP;function Ug(e){return e.replace(ZP,"/")}dn.removeDuplicateSlashes=Ug});var qg=d(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.read=void 0;function eC(e,t,r){t.fs.lstat(e,(n,i)=>{if(n!==null){jg(r,n);return}if(!i.isSymbolicLink()||!t.followSymbolicLink){Mc(r,i);return}t.fs.stat(e,(s,o)=>{if(s!==null){if(t.throwErrorOnBrokenSymbolicLink){jg(r,s);return}Mc(r,i);return}t.markSymbolicLink&&(o.isSymbolicLink=()=>!0),Mc(r,o)})})}Gs.read=eC;function jg(e,t){e(t)}function Mc(e,t){e(null,t)}});var Gg=d($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.read=void 0;function tC(e,t){let r=t.fs.lstatSync(e);if(!r.isSymbolicLink()||!t.followSymbolicLink)return r;try{let n=t.fs.statSync(e);return t.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(n){if(!t.throwErrorOnBrokenSymbolicLink)return r;throw n}}$s.read=tC});var $g=d(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.createFileSystemAdapter=Vt.FILE_SYSTEM_ADAPTER=void 0;var Hs=R("fs");Vt.FILE_SYSTEM_ADAPTER={lstat:Hs.lstat,stat:Hs.stat,lstatSync:Hs.lstatSync,statSync:Hs.statSync};function rC(e){return e===void 0?Vt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},Vt.FILE_SYSTEM_ADAPTER),e)}Vt.createFileSystemAdapter=rC});var Hg=d(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var nC=$g(),Dc=class{constructor(t={}){this._options=t,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=nC.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(t,r){return t??r}};Bc.default=Dc});var _r=d(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.statSync=Wt.stat=Wt.Settings=void 0;var Vg=qg(),iC=Gg(),Fc=Hg();Wt.Settings=Fc.default;function sC(e,t,r){if(typeof t=="function"){Vg.read(e,Uc(),t);return}Vg.read(e,Uc(t),r)}Wt.stat=sC;function oC(e,t){let r=Uc(t);return iC.read(e,r)}Wt.statSync=oC;function Uc(e={}){return e instanceof Fc.default?e:new Fc.default(e)}});var Kg=d((Cj,Yg)=>{var Wg;Yg.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(Wg||(Wg=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var zg=d((Ij,Xg)=>{Xg.exports=uC;var aC=Kg();function uC(e,t){let r,n,i,s=!0;Array.isArray(e)?(r=[],n=e.length):(i=Object.keys(e),r={},n=i.length);function o(u){function c(){t&&t(u,r),t=null}s?aC(c):c()}function a(u,c,l){r[u]=l,(--n===0||c)&&o(c)}n?i?i.forEach(function(u){e[u](function(c,l){a(u,c,l)})}):e.forEach(function(u,c){u(function(l,f){a(c,l,f)})}):o(null),s=!1}});var kc=d(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var Vs=process.versions.node.split(".");if(Vs[0]===void 0||Vs[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var Qg=Number.parseInt(Vs[0],10),cC=Number.parseInt(Vs[1],10),Zg=10,lC=10,dC=Qg>Zg,fC=Qg===Zg&&cC>=lC;Ws.IS_SUPPORT_READDIR_WITH_FILE_TYPES=dC||fC});var Jg=d(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.createDirentFromStats=void 0;var jc=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function pC(e,t){return new jc(e,t)}Ys.createDirentFromStats=pC});var qc=d(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.fs=void 0;var hC=Jg();Ks.fs=hC});var Gc=d(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.joinPathSegments=void 0;function _C(e,t,r){return e.endsWith(r)?e+t:e+r+t}Xs.joinPathSegments=_C});var sm=d(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.readdir=Yt.readdirWithFileTypes=Yt.read=void 0;var gC=_r(),em=zg(),mC=kc(),tm=qc(),rm=Gc();function EC(e,t,r){if(!t.stats&&mC.IS_SUPPORT_READDIR_WITH_FILE_TYPES){nm(e,t,r);return}im(e,t,r)}Yt.read=EC;function nm(e,t,r){t.fs.readdir(e,{withFileTypes:!0},(n,i)=>{if(n!==null){zs(r,n);return}let s=i.map(a=>({dirent:a,name:a.name,path:rm.joinPathSegments(e,a.name,t.pathSegmentSeparator)}));if(!t.followSymbolicLinks){$c(r,s);return}let o=s.map(a=>yC(a,t));em(o,(a,u)=>{if(a!==null){zs(r,a);return}$c(r,u)})})}Yt.readdirWithFileTypes=nm;function yC(e,t){return r=>{if(!e.dirent.isSymbolicLink()){r(null,e);return}t.fs.stat(e.path,(n,i)=>{if(n!==null){if(t.throwErrorOnBrokenSymbolicLink){r(n);return}r(null,e);return}e.dirent=tm.fs.createDirentFromStats(e.name,i),r(null,e)})}}function im(e,t,r){t.fs.readdir(e,(n,i)=>{if(n!==null){zs(r,n);return}let s=i.map(o=>{let a=rm.joinPathSegments(e,o,t.pathSegmentSeparator);return u=>{gC.stat(a,t.fsStatSettings,(c,l)=>{if(c!==null){u(c);return}let f={name:o,path:a,dirent:tm.fs.createDirentFromStats(o,l)};t.stats&&(f.stats=l),u(null,f)})}});em(s,(o,a)=>{if(o!==null){zs(r,o);return}$c(r,a)})})}Yt.readdir=im;function zs(e,t){e(t)}function $c(e,t){e(null,t)}});var lm=d(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.readdir=Kt.readdirWithFileTypes=Kt.read=void 0;var SC=_r(),AC=kc(),om=qc(),am=Gc();function vC(e,t){return!t.stats&&AC.IS_SUPPORT_READDIR_WITH_FILE_TYPES?um(e,t):cm(e,t)}Kt.read=vC;function um(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map(n=>{let i={dirent:n,name:n.name,path:am.joinPathSegments(e,n.name,t.pathSegmentSeparator)};if(i.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{let s=t.fs.statSync(i.path);i.dirent=om.fs.createDirentFromStats(i.name,s)}catch(s){if(t.throwErrorOnBrokenSymbolicLink)throw s}return i})}Kt.readdirWithFileTypes=um;function cm(e,t){return t.fs.readdirSync(e).map(n=>{let i=am.joinPathSegments(e,n,t.pathSegmentSeparator),s=SC.statSync(i,t.fsStatSettings),o={name:n,path:i,dirent:om.fs.createDirentFromStats(n,s)};return t.stats&&(o.stats=s),o})}Kt.readdir=cm});var dm=d(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.createFileSystemAdapter=Xt.FILE_SYSTEM_ADAPTER=void 0;var fn=R("fs");Xt.FILE_SYSTEM_ADAPTER={lstat:fn.lstat,stat:fn.stat,lstatSync:fn.lstatSync,statSync:fn.statSync,readdir:fn.readdir,readdirSync:fn.readdirSync};function bC(e){return e===void 0?Xt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},Xt.FILE_SYSTEM_ADAPTER),e)}Xt.createFileSystemAdapter=bC});var fm=d(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var TC=R("path"),RC=_r(),OC=dm(),Hc=class{constructor(t={}){this._options=t,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=OC.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,TC.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new RC.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};Vc.default=Hc});var Qs=d(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.Settings=zt.scandirSync=zt.scandir=void 0;var pm=sm(),PC=lm(),Wc=fm();zt.Settings=Wc.default;function CC(e,t,r){if(typeof t=="function"){pm.read(e,Yc(),t);return}pm.read(e,Yc(t),r)}zt.scandir=CC;function IC(e,t){let r=Yc(t);return PC.read(e,r)}zt.scandirSync=IC;function Yc(e={}){return e instanceof Wc.default?e:new Wc.default(e)}});var _m=d((kj,hm)=>{"use strict";function wC(e){var t=new e,r=t;function n(){var s=t;return s.next?t=s.next:(t=new e,r=t),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}hm.exports=wC});var mm=d((jj,Kc)=>{"use strict";var NC=_m();function gm(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),r<1)throw new Error("fastqueue concurrency must be greater than 1");var n=NC(LC),i=null,s=null,o=0,a=null,u={push:_,drain:ht,saturated:ht,pause:l,paused:!1,concurrency:r,running:c,resume:h,idle:g,length:f,getQueue:p,unshift:v,empty:ht,kill:S,killAndDrain:b,error:X};return u;function c(){return o}function l(){u.paused=!0}function f(){for(var x=i,D=0;x;)x=x.next,D++;return D}function p(){for(var x=i,D=[];x;)D.push(x.value),x=x.next;return D}function h(){if(!!u.paused){u.paused=!1;for(var x=0;x<u.concurrency;x++)o++,A()}}function g(){return o===0&&u.length()===0}function _(x,D){var P=n.get();P.context=e,P.release=A,P.value=x,P.callback=D||ht,P.errorHandler=a,o===u.concurrency||u.paused?s?(s.next=P,s=P):(i=P,s=P,u.saturated()):(o++,t.call(e,P.value,P.worked))}function v(x,D){var P=n.get();P.context=e,P.release=A,P.value=x,P.callback=D||ht,o===u.concurrency||u.paused?i?(P.next=i,i=P):(i=P,s=P,u.saturated()):(o++,t.call(e,P.value,P.worked))}function A(x){x&&n.release(x);var D=i;D?u.paused?o--:(s===i&&(s=null),i=D.next,D.next=null,t.call(e,D.value,D.worked),s===null&&u.empty()):--o===0&&u.drain()}function S(){i=null,s=null,u.drain=ht}function b(){i=null,s=null,u.drain(),u.drain=ht}function X(x){a=x}}function ht(){}function LC(){this.value=null,this.callback=ht,this.next=null,this.release=ht,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var i=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=ht,e.errorHandler&&s(r,o),i.call(e.context,r,n),e.release(e)}}function xC(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(c,l){t.call(this,c).then(function(f){l(null,f)},l)}var i=gm(e,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=u,i;function a(c){return new Promise(function(l,f){s(c,function(p,h){if(p){f(p);return}l(h)})})}function u(c){return new Promise(function(l,f){o(c,function(p,h){if(p){f(p);return}l(h)})})}}Kc.exports=gm;Kc.exports.promise=xC});var Zs=d(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.joinPathSegments=_t.replacePathSegmentSeparator=_t.isAppliedFilter=_t.isFatalError=void 0;function MC(e,t){return e.errorFilter===null?!0:!e.errorFilter(t)}_t.isFatalError=MC;function DC(e,t){return e===null||e(t)}_t.isAppliedFilter=DC;function BC(e,t){return e.split(/[/\\]/).join(t)}_t.replacePathSegmentSeparator=BC;function FC(e,t,r){return e===""?t:e.endsWith(r)?e+t:e+r+t}_t.joinPathSegments=FC});var Qc=d(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var UC=Zs(),Xc=class{constructor(t,r){this._root=t,this._settings=r,this._root=UC.replacePathSegmentSeparator(t,r.pathSegmentSeparator)}};zc.default=Xc});var el=d(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var kC=R("events"),jC=Qs(),qC=mm(),Js=Zs(),GC=Qc(),Zc=class extends GC.default{constructor(t,r){super(t,r),this._settings=r,this._scandir=jC.scandir,this._emitter=new kC.EventEmitter,this._queue=qC(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(t){this._emitter.on("entry",t)}onError(t){this._emitter.once("error",t)}onEnd(t){this._emitter.once("end",t)}_pushToQueue(t,r){let n={directory:t,base:r};this._queue.push(n,i=>{i!==null&&this._handleError(i)})}_worker(t,r){this._scandir(t.directory,this._settings.fsScandirSettings,(n,i)=>{if(n!==null){r(n,void 0);return}for(let s of i)this._handleEntry(s,t.base);r(null,void 0)})}_handleError(t){this._isDestroyed||!Js.isFatalError(this._settings,t)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",t))}_handleEntry(t,r){if(this._isDestroyed||this._isFatalError)return;let n=t.path;r!==void 0&&(t.path=Js.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),Js.isAppliedFilter(this._settings.entryFilter,t)&&this._emitEntry(t),t.dirent.isDirectory()&&Js.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_emitEntry(t){this._emitter.emit("entry",t)}};Jc.default=Zc});var Em=d(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var $C=el(),tl=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new $C.default(this._root,this._settings),this._storage=[]}read(t){this._reader.onError(r=>{HC(t,r)}),this._reader.onEntry(r=>{this._storage.push(r)}),this._reader.onEnd(()=>{VC(t,this._storage)}),this._reader.read()}};rl.default=tl;function HC(e,t){e(t)}function VC(e,t){e(null,t)}});var ym=d(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var WC=R("stream"),YC=el(),nl=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new YC.default(this._root,this._settings),this._stream=new WC.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(t=>{this._stream.emit("error",t)}),this._reader.onEntry(t=>{this._stream.push(t)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}};il.default=nl});var Sm=d(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var KC=Qs(),eo=Zs(),XC=Qc(),sl=class extends XC.default{constructor(){super(...arguments),this._scandir=KC.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(t,r){this._queue.add({directory:t,base:r})}_handleQueue(){for(let t of this._queue.values())this._handleDirectory(t.directory,t.base)}_handleDirectory(t,r){try{let n=this._scandir(t,this._settings.fsScandirSettings);for(let i of n)this._handleEntry(i,r)}catch(n){this._handleError(n)}}_handleError(t){if(!!eo.isFatalError(this._settings,t))throw t}_handleEntry(t,r){let n=t.path;r!==void 0&&(t.path=eo.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),eo.isAppliedFilter(this._settings.entryFilter,t)&&this._pushToStorage(t),t.dirent.isDirectory()&&eo.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_pushToStorage(t){this._storage.push(t)}};ol.default=sl});var Am=d(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var zC=Sm(),al=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new zC.default(this._root,this._settings)}read(){return this._reader.read()}};ul.default=al});var vm=d(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var QC=R("path"),ZC=Qs(),cl=class{constructor(t={}){this._options=t,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,QC.sep),this.fsScandirSettings=new ZC.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};ll.default=cl});var fl=d(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.Settings=gt.walkStream=gt.walkSync=gt.walk=void 0;var bm=Em(),JC=ym(),eI=Am(),dl=vm();gt.Settings=dl.default;function tI(e,t,r){if(typeof t=="function"){new bm.default(e,to()).read(t);return}new bm.default(e,to(t)).read(r)}gt.walk=tI;function rI(e,t){let r=to(t);return new eI.default(e,r).read()}gt.walkSync=rI;function nI(e,t){let r=to(t);return new JC.default(e,r).read()}gt.walkStream=nI;function to(e={}){return e instanceof dl.default?e:new dl.default(e)}});var _l=d(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});var iI=R("path"),sI=_r(),Tm=Lt(),pl=class{constructor(t){this._settings=t,this._fsStatSettings=new sI.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(t){return iI.resolve(this._settings.cwd,t)}_makeEntry(t,r){let n={name:r,path:r,dirent:Tm.fs.createDirentFromStats(r,t)};return this._settings.stats&&(n.stats=t),n}_isFatalError(t){return!Tm.errno.isEnoentCodeError(t)&&!this._settings.suppressErrors}};hl.default=pl});var El=d(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var oI=R("stream"),aI=_r(),uI=fl(),cI=_l(),gl=class extends cI.default{constructor(){super(...arguments),this._walkStream=uI.walkStream,this._stat=aI.stat}dynamic(t,r){return this._walkStream(t,r)}static(t,r){let n=t.map(this._getFullEntryPath,this),i=new oI.PassThrough({objectMode:!0});i._write=(s,o,a)=>this._getEntry(n[s],t[s],r).then(u=>{u!==null&&r.entryFilter(u)&&i.push(u),s===n.length-1&&i.end(),a()}).catch(a);for(let s=0;s<n.length;s++)i.write(s);return i}_getEntry(t,r,n){return this._getStat(t).then(i=>this._makeEntry(i,r)).catch(i=>{if(n.errorFilter(i))return null;throw i})}_getStat(t){return new Promise((r,n)=>{this._stat(t,this._fsStatSettings,(i,s)=>i===null?r(s):n(i))})}};ml.default=gl});var Rm=d(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var pn=Lt(),yl=class{constructor(t,r,n){this._patterns=t,this._settings=r,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){let t=pn.pattern.expandPatternsWithBraceExpansion(this._patterns);for(let r of t){let n=this._getPatternSegments(r),i=this._splitSegmentsIntoSections(n);this._storage.push({complete:i.length<=1,pattern:r,segments:n,sections:i})}}_getPatternSegments(t){return pn.pattern.getPatternParts(t,this._micromatchOptions).map(n=>pn.pattern.isDynamicPattern(n,this._settings)?{dynamic:!0,pattern:n,patternRe:pn.pattern.makeRe(n,this._micromatchOptions)}:{dynamic:!1,pattern:n})}_splitSegmentsIntoSections(t){return pn.array.splitWhen(t,r=>r.dynamic&&pn.pattern.hasGlobStar(r.pattern))}};Sl.default=yl});var Om=d(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});var lI=Rm(),Al=class extends lI.default{match(t){let r=t.split("/"),n=r.length,i=this._storage.filter(s=>!s.complete||s.segments.length>n);for(let s of i){let o=s.sections[0];if(!s.complete&&n>o.length||r.every((u,c)=>{let l=s.segments[c];return!!(l.dynamic&&l.patternRe.test(u)||!l.dynamic&&l.pattern===u)}))return!0}return!1}};vl.default=Al});var Pm=d(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var ro=Lt(),dI=Om(),bl=class{constructor(t,r){this._settings=t,this._micromatchOptions=r}getFilter(t,r,n){let i=this._getMatcher(r),s=this._getNegativePatternsRe(n);return o=>this._filter(t,o,i,s)}_getMatcher(t){return new dI.default(t,this._settings,this._micromatchOptions)}_getNegativePatternsRe(t){let r=t.filter(ro.pattern.isAffectDepthOfReadingPattern);return ro.pattern.convertPatternsToRe(r,this._micromatchOptions)}_filter(t,r,n,i){if(this._isSkippedByDeep(t,r.path)||this._isSkippedSymbolicLink(r))return!1;let s=ro.path.removeLeadingDotSegment(r.path);return this._isSkippedByPositivePatterns(s,n)?!1:this._isSkippedByNegativePatterns(s,i)}_isSkippedByDeep(t,r){return this._settings.deep===1/0?!1:this._getEntryLevel(t,r)>=this._settings.deep}_getEntryLevel(t,r){let n=r.split("/").length;if(t==="")return n;let i=t.split("/").length;return n-i}_isSkippedSymbolicLink(t){return!this._settings.followSymbolicLinks&&t.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(t,r){return!this._settings.baseNameMatch&&!r.match(t)}_isSkippedByNegativePatterns(t,r){return!ro.pattern.matchAny(t,r)}};Tl.default=bl});var Cm=d(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});var gr=Lt(),Rl=class{constructor(t,r){this._settings=t,this._micromatchOptions=r,this.index=new Map}getFilter(t,r){let n=gr.pattern.convertPatternsToRe(t,this._micromatchOptions),i=gr.pattern.convertPatternsToRe(r,this._micromatchOptions);return s=>this._filter(s,n,i)}_filter(t,r,n){if(this._settings.unique&&this._isDuplicateEntry(t)||this._onlyFileFilter(t)||this._onlyDirectoryFilter(t)||this._isSkippedByAbsoluteNegativePatterns(t.path,n))return!1;let i=this._settings.baseNameMatch?t.name:t.path,s=this._isMatchToPatterns(i,r)&&!this._isMatchToPatterns(t.path,n);return this._settings.unique&&s&&this._createIndexRecord(t),s}_isDuplicateEntry(t){return this.index.has(t.path)}_createIndexRecord(t){this.index.set(t.path,void 0)}_onlyFileFilter(t){return this._settings.onlyFiles&&!t.dirent.isFile()}_onlyDirectoryFilter(t){return this._settings.onlyDirectories&&!t.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(t,r){if(!this._settings.absolute)return!1;let n=gr.path.makeAbsolute(this._settings.cwd,t);return gr.pattern.matchAny(n,r)}_isMatchToPatterns(t,r){let n=gr.path.removeLeadingDotSegment(t);return gr.pattern.matchAny(n,r)||gr.pattern.matchAny(n+"/",r)}};Ol.default=Rl});var Im=d(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});var fI=Lt(),Pl=class{constructor(t){this._settings=t}getFilter(){return t=>this._isNonFatalError(t)}_isNonFatalError(t){return fI.errno.isEnoentCodeError(t)||this._settings.suppressErrors}};Cl.default=Pl});var Nm=d(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});var wm=Lt(),Il=class{constructor(t){this._settings=t}getTransformer(){return t=>this._transform(t)}_transform(t){let r=t.path;return this._settings.absolute&&(r=wm.path.makeAbsolute(this._settings.cwd,r),r=wm.path.unixify(r)),this._settings.markDirectories&&t.dirent.isDirectory()&&(r+="/"),this._settings.objectMode?Object.assign(Object.assign({},t),{path:r}):r}};wl.default=Il});var no=d(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var pI=R("path"),hI=Pm(),_I=Cm(),gI=Im(),mI=Nm(),Nl=class{constructor(t){this._settings=t,this.errorFilter=new gI.default(this._settings),this.entryFilter=new _I.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new hI.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new mI.default(this._settings)}_getRootDirectory(t){return pI.resolve(this._settings.cwd,t.base)}_getReaderOptions(t){let r=t.base==="."?"":t.base;return{basePath:r,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(r,t.positive,t.negative),entryFilter:this.entryFilter.getFilter(t.positive,t.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}};Ll.default=Nl});var Lm=d(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var EI=El(),yI=no(),xl=class extends yI.default{constructor(){super(...arguments),this._reader=new EI.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t),i=[];return new Promise((s,o)=>{let a=this.api(r,t,n);a.once("error",o),a.on("data",u=>i.push(n.transform(u))),a.once("end",()=>s(i))})}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Ml.default=xl});var xm=d(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var SI=R("stream"),AI=El(),vI=no(),Dl=class extends vI.default{constructor(){super(...arguments),this._reader=new AI.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t),i=this.api(r,t,n),s=new SI.Readable({objectMode:!0,read:()=>{}});return i.once("error",o=>s.emit("error",o)).on("data",o=>s.emit("data",n.transform(o))).once("end",()=>s.emit("end")),s.once("close",()=>i.destroy()),s}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Bl.default=Dl});var Mm=d(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});var bI=_r(),TI=fl(),RI=_l(),Fl=class extends RI.default{constructor(){super(...arguments),this._walkSync=TI.walkSync,this._statSync=bI.statSync}dynamic(t,r){return this._walkSync(t,r)}static(t,r){let n=[];for(let i of t){let s=this._getFullEntryPath(i),o=this._getEntry(s,i,r);o===null||!r.entryFilter(o)||n.push(o)}return n}_getEntry(t,r,n){try{let i=this._getStat(t);return this._makeEntry(i,r)}catch(i){if(n.errorFilter(i))return null;throw i}}_getStat(t){return this._statSync(t,this._fsStatSettings)}};Ul.default=Fl});var Dm=d(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var OI=Mm(),PI=no(),kl=class extends PI.default{constructor(){super(...arguments),this._reader=new OI.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return this.api(r,t,n).map(n.transform)}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};jl.default=kl});var Bm=d(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var hn=R("fs"),CI=R("os"),II=Math.max(CI.cpus().length,1);_n.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:hn.lstat,lstatSync:hn.lstatSync,stat:hn.stat,statSync:hn.statSync,readdir:hn.readdir,readdirSync:hn.readdirSync};var ql=class{constructor(t={}){this._options=t,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,II),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0)}_getValue(t,r){return t===void 0?r:t}_getFileSystemMethods(t={}){return Object.assign(Object.assign({},_n.DEFAULT_FILE_SYSTEM_ADAPTER),t)}};_n.default=ql});var Vl=d((lq,km)=>{"use strict";var Fm=Fg(),Um=kg(),wI=Lm(),NI=xm(),LI=Dm(),Gl=Bm(),mr=Lt();async function $l(e,t){gn(e);let r=Hl(e,wI.default,t),n=await Promise.all(r);return mr.array.flatten(n)}(function(e){function t(o,a){gn(o);let u=Hl(o,LI.default,a);return mr.array.flatten(u)}e.sync=t;function r(o,a){gn(o);let u=Hl(o,NI.default,a);return mr.stream.merge(u)}e.stream=r;function n(o,a){gn(o);let u=Um.transform([].concat(o)),c=new Gl.default(a);return Fm.generate(u,c)}e.generateTasks=n;function i(o,a){gn(o);let u=new Gl.default(a);return mr.pattern.isDynamicPattern(o,u)}e.isDynamicPattern=i;function s(o){return gn(o),mr.path.escape(o)}e.escapePath=s})($l||($l={}));function Hl(e,t,r){let n=Um.transform([].concat(e)),i=new Gl.default(r),s=Fm.generate(n,i),o=new t(i);return s.map(o.read,o)}function gn(e){if(![].concat(e).every(n=>mr.string.isString(n)&&!mr.string.isEmpty(n)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}km.exports=$l});var qm=d(Er=>{"use strict";var{promisify:xI}=R("util"),jm=R("fs");async function Wl(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return(await xI(jm[e])(r))[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}function Yl(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return jm[e](r)[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}Er.isFile=Wl.bind(null,"stat","isFile");Er.isDirectory=Wl.bind(null,"stat","isDirectory");Er.isSymlink=Wl.bind(null,"lstat","isSymbolicLink");Er.isFileSync=Yl.bind(null,"statSync","isFile");Er.isDirectorySync=Yl.bind(null,"statSync","isDirectory");Er.isSymlinkSync=Yl.bind(null,"lstatSync","isSymbolicLink")});var Wm=d((fq,Kl)=>{"use strict";var yr=R("path"),Gm=qm(),$m=e=>e.length>1?`{${e.join(",")}}`:e[0],Hm=(e,t)=>{let r=e[0]==="!"?e.slice(1):e;return yr.isAbsolute(r)?r:yr.join(t,r)},MI=(e,t)=>yr.extname(e)?`**/${e}`:`**/${e}.${$m(t)}`,Vm=(e,t)=>{if(t.files&&!Array.isArray(t.files))throw new TypeError(`Expected \`files\` to be of type \`Array\` but received type \`${typeof t.files}\``);if(t.extensions&&!Array.isArray(t.extensions))throw new TypeError(`Expected \`extensions\` to be of type \`Array\` but received type \`${typeof t.extensions}\``);return t.files&&t.extensions?t.files.map(r=>yr.posix.join(e,MI(r,t.extensions))):t.files?t.files.map(r=>yr.posix.join(e,`**/${r}`)):t.extensions?[yr.posix.join(e,`**/*.${$m(t.extensions)}`)]:[yr.posix.join(e,"**")]};Kl.exports=async(e,t)=>{if(t={cwd:process.cwd(),...t},typeof t.cwd!="string")throw new TypeError(`Expected \`cwd\` to be of type \`string\` but received type \`${typeof t.cwd}\``);let r=await Promise.all([].concat(e).map(async n=>await Gm.isDirectory(Hm(n,t.cwd))?Vm(n,t):n));return[].concat.apply([],r)};Kl.exports.sync=(e,t)=>{if(t={cwd:process.cwd(),...t},typeof t.cwd!="string")throw new TypeError(`Expected \`cwd\` to be of type \`string\` but received type \`${typeof t.cwd}\``);let r=[].concat(e).map(n=>Gm.isDirectorySync(Hm(n,t.cwd))?Vm(n,t):n);return[].concat.apply([],r)}});var tE=d((pq,eE)=>{function Ym(e){return Array.isArray(e)?e:[e]}var Qm="",Km=" ",Xl="\\",DI=/^\s+$/,BI=/^\\!/,FI=/^\\#/,UI=/\r?\n/g,kI=/^\.*\/|^\.+$/,zl="/",Xm=typeof Symbol<"u"?Symbol.for("node-ignore"):"node-ignore",jI=(e,t,r)=>Object.defineProperty(e,t,{value:r}),qI=/([0-z])-([0-z])/g,Zm=()=>!1,GI=e=>e.replace(qI,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:Qm),$I=e=>{let{length:t}=e;return e.slice(0,t-t%2)},HI=[[/\\?\s+$/,e=>e.indexOf("\\")===0?Km:Qm],[/\\\s/g,()=>Km],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)\\\*(?=.+)/g,(e,t)=>`${t}[^\\/]*`],[/\\\\\\(?=[$.|*+(){^])/g,()=>Xl],[/\\\\/g,()=>Xl],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===Xl?`\\[${r}${$I(n)}${i}`:i==="]"&&n.length%2===0?`[${GI(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],zm=Object.create(null),VI=(e,t)=>{let r=zm[e];return r||(r=HI.reduce((n,i)=>n.replace(i[0],i[1].bind(e)),e),zm[e]=r),t?new RegExp(r,"i"):new RegExp(r)},Jl=e=>typeof e=="string",WI=e=>e&&Jl(e)&&!DI.test(e)&&e.indexOf("#")!==0,YI=e=>e.split(UI),Ql=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},KI=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(BI,"!").replace(FI,"#");let i=VI(e,t);return new Ql(r,e,n,i)},XI=(e,t)=>{throw new t(e)},Mt=(e,t,r)=>Jl(e)?e?Mt.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),Jm=e=>kI.test(e);Mt.isNotRelative=Jm;Mt.convert=e=>e;var Zl=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){jI(this,Xm,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[Xm]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(WI(t)){let r=KI(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,Ym(Jl(t)?YI(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(s=>{let{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let s=t&&Mt.convert(t);return Mt(s,t,this._allowRelativePaths?Zm:XI),this._t(s,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(zl)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let s=this._t(i.join(zl)+zl,r,n,i);return r[t]=s.ignored?s:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return Ym(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},io=e=>new Zl(e),zI=e=>Mt(e&&Mt.convert(e),e,Zm);io.isPathValid=zI;io.default=io;eE.exports=io;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");Mt.convert=e;let t=/^[a-z]:\//i;Mt.isNotRelative=r=>t.test(r)||Jm(r)}});var nE=d((hq,rE)=>{"use strict";rE.exports=e=>{let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}});var lE=d((_q,ed)=>{"use strict";var{promisify:QI}=R("util"),iE=R("fs"),Dt=R("path"),sE=Vl(),ZI=tE(),vi=nE(),oE=["**/node_modules/**","**/flow-typed/**","**/coverage/**","**/.git"],JI=QI(iE.readFile),ew=e=>t=>t.startsWith("!")?"!"+Dt.posix.join(e,t.slice(1)):Dt.posix.join(e,t),tw=(e,t)=>{let r=vi(Dt.relative(t.cwd,Dt.dirname(t.fileName)));return e.split(/\r?\n/).filter(Boolean).filter(n=>!n.startsWith("#")).map(ew(r))},aE=e=>{let t=ZI();for(let r of e)t.add(tw(r.content,{cwd:r.cwd,fileName:r.filePath}));return t},rw=(e,t)=>{if(e=vi(e),Dt.isAbsolute(t)){if(vi(t).startsWith(e))return t;throw new Error(`Path ${t} is not in cwd ${e}`)}return Dt.join(e,t)},uE=(e,t)=>r=>e.ignores(vi(Dt.relative(t,rw(t,r.path||r)))),nw=async(e,t)=>{let r=Dt.join(t,e),n=await JI(r,"utf8");return{cwd:t,filePath:r,content:n}},iw=(e,t)=>{let r=Dt.join(t,e),n=iE.readFileSync(r,"utf8");return{cwd:t,filePath:r,content:n}},cE=({ignore:e=[],cwd:t=vi(process.cwd())}={})=>({ignore:e,cwd:t});ed.exports=async e=>{e=cE(e);let t=await sE("**/.gitignore",{ignore:oE.concat(e.ignore),cwd:e.cwd}),r=await Promise.all(t.map(i=>nw(i,e.cwd))),n=aE(r);return uE(n,e.cwd)};ed.exports.sync=e=>{e=cE(e);let r=sE.sync("**/.gitignore",{ignore:oE.concat(e.ignore),cwd:e.cwd}).map(i=>iw(i,e.cwd)),n=aE(r);return uE(n,e.cwd)}});var fE=d((gq,dE)=>{"use strict";var{Transform:sw}=R("stream"),so=class extends sw{constructor(){super({objectMode:!0})}},td=class extends so{constructor(t){super(),this._filter=t}_transform(t,r,n){this._filter(t)&&this.push(t),n()}},rd=class extends so{constructor(){super(),this._pushed=new Set}_transform(t,r,n){this._pushed.has(t)||(this.push(t),this._pushed.add(t)),n()}};dE.exports={FilterStream:td,UniqueStream:rd}});var od=d((mq,Sr)=>{"use strict";var hE=R("fs"),oo=r_(),ow=cc(),ao=Vl(),uo=Wm(),nd=lE(),{FilterStream:aw,UniqueStream:uw}=fE(),_E=()=>!1,pE=e=>e[0]==="!",cw=e=>{if(!e.every(t=>typeof t=="string"))throw new TypeError("Patterns must be a string or an array of strings")},lw=(e={})=>{if(!e.cwd)return;let t;try{t=hE.statSync(e.cwd)}catch{return}if(!t.isDirectory())throw new Error("The `cwd` option must be a path to a directory")},dw=e=>e.stats instanceof hE.Stats?e.path:e,co=(e,t)=>{e=oo([].concat(e)),cw(e),lw(t);let r=[];t={ignore:[],expandDirectories:!0,...t};for(let[n,i]of e.entries()){if(pE(i))continue;let s=e.slice(n).filter(a=>pE(a)).map(a=>a.slice(1)),o={...t,ignore:t.ignore.concat(s)};r.push({pattern:i,options:o})}return r},fw=(e,t)=>{let r={};return e.options.cwd&&(r.cwd=e.options.cwd),Array.isArray(e.options.expandDirectories)?r={...r,files:e.options.expandDirectories}:typeof e.options.expandDirectories=="object"&&(r={...r,...e.options.expandDirectories}),t(e.pattern,r)},id=(e,t)=>e.options.expandDirectories?fw(e,t):[e.pattern],gE=e=>e&&e.gitignore?nd.sync({cwd:e.cwd,ignore:e.ignore}):_E,sd=e=>t=>{let{options:r}=e;return r.ignore&&Array.isArray(r.ignore)&&r.expandDirectories&&(r.ignore=uo.sync(r.ignore)),{pattern:t,options:r}};Sr.exports=async(e,t)=>{let r=co(e,t),n=async()=>t&&t.gitignore?nd({cwd:t.cwd,ignore:t.ignore}):_E,i=async()=>{let u=await Promise.all(r.map(async c=>{let l=await id(c,uo);return Promise.all(l.map(sd(c)))}));return oo(...u)},[s,o]=await Promise.all([n(),i()]),a=await Promise.all(o.map(u=>ao(u.pattern,u.options)));return oo(...a).filter(u=>!s(dw(u)))};Sr.exports.sync=(e,t)=>{let r=co(e,t),n=[];for(let o of r){let a=id(o,uo.sync).map(sd(o));n.push(...a)}let i=gE(t),s=[];for(let o of n)s=oo(s,ao.sync(o.pattern,o.options));return s.filter(o=>!i(o))};Sr.exports.stream=(e,t)=>{let r=co(e,t),n=[];for(let a of r){let u=id(a,uo.sync).map(sd(a));n.push(...u)}let i=gE(t),s=new aw(a=>!i(a)),o=new uw;return ow(n.map(a=>ao.stream(a.pattern,a.options))).pipe(s).pipe(o)};Sr.exports.generateGlobTasks=co;Sr.exports.hasMagic=(e,t)=>[].concat(e).some(r=>ao.isDynamicPattern(r,t));Sr.exports.gitignore=nd});var gy=d(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0})});var my=d(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo._globalThis=void 0;Eo._globalThis=typeof globalThis=="object"?globalThis:global});var Ey=d(br=>{"use strict";var kL=br&&br.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jL=br&&br.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&kL(t,e,r)};Object.defineProperty(br,"__esModule",{value:!0});jL(my(),br)});var yy=d(Tr=>{"use strict";var qL=Tr&&Tr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),GL=Tr&&Tr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qL(t,e,r)};Object.defineProperty(Tr,"__esModule",{value:!0});GL(Ey(),Tr)});var bd=d(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.VERSION=void 0;yo.VERSION="1.1.0"});var vy=d(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.isCompatible=An._makeCompatibilityCheck=void 0;var $L=bd(),Sy=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Ay(e){var t=new Set([e]),r=new Set,n=e.match(Sy);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(u){return u===e};function s(a){return r.add(a),!1}function o(a){return t.add(a),!0}return function(u){if(t.has(u))return!0;if(r.has(u))return!1;var c=u.match(Sy);if(!c)return s(u);var l={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return l.prerelease!=null||i.major!==l.major?s(u):i.major===0?i.minor===l.minor&&i.patch<=l.patch?o(u):s(u):i.minor<=l.minor?o(u):s(u)}}An._makeCompatibilityCheck=Ay;An.isCompatible=Ay($L.VERSION)});var vn=d(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.unregisterGlobal=Jt.getGlobal=Jt.registerGlobal=void 0;var HL=yy(),Ii=bd(),VL=vy(),WL=Ii.VERSION.split(".")[0],wi=Symbol.for("opentelemetry.js.api."+WL),Ni=HL._globalThis;function YL(e,t,r,n){var i;n===void 0&&(n=!1);var s=Ni[wi]=(i=Ni[wi])!==null&&i!==void 0?i:{version:Ii.VERSION};if(!n&&s[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(o.stack||o.message),!1}if(s.version!==Ii.VERSION){var o=new Error("@opentelemetry/api: All API registration versions must match");return r.error(o.stack||o.message),!1}return s[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Ii.VERSION+"."),!0}Jt.registerGlobal=YL;function KL(e){var t,r,n=(t=Ni[wi])===null||t===void 0?void 0:t.version;if(!(!n||!VL.isCompatible(n)))return(r=Ni[wi])===null||r===void 0?void 0:r[e]}Jt.getGlobal=KL;function XL(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Ii.VERSION+".");var r=Ni[wi];r&&delete r[e]}Jt.unregisterGlobal=XL});var by=d(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.DiagComponentLogger=void 0;var zL=vn(),QL=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Li("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Li("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Li("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Li("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Li("verbose",this._namespace,t)},e}();So.DiagComponentLogger=QL;function Li(e,t,r){var n=zL.getGlobal("diag");if(!!n)return r.unshift(t),n[e].apply(n,r)}});var Ao=d(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.DiagLogLevel=void 0;var ZL;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ZL=xi.DiagLogLevel||(xi.DiagLogLevel={}))});var Ty=d(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.createLogLevelDiagLogger=void 0;var Ft=Ao();function JL(e,t){e<Ft.DiagLogLevel.NONE?e=Ft.DiagLogLevel.NONE:e>Ft.DiagLogLevel.ALL&&(e=Ft.DiagLogLevel.ALL),t=t||{};function r(n,i){var s=t[n];return typeof s=="function"&&e>=i?s.bind(t):function(){}}return{error:r("error",Ft.DiagLogLevel.ERROR),warn:r("warn",Ft.DiagLogLevel.WARN),info:r("info",Ft.DiagLogLevel.INFO),debug:r("debug",Ft.DiagLogLevel.DEBUG),verbose:r("verbose",Ft.DiagLogLevel.VERBOSE)}}vo.createLogLevelDiagLogger=JL});var bn=d(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.DiagAPI=void 0;var ex=by(),tx=Ty(),rx=Ao(),bo=vn(),nx="diag",ix=function(){function e(){function t(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=bo.getGlobal("diag");if(!!o)return o[n].apply(o,i)}}var r=this;r.setLogger=function(n,i){var s,o;if(i===void 0&&(i=rx.DiagLogLevel.INFO),n===r){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=a.stack)!==null&&s!==void 0?s:a.message),!1}var u=bo.getGlobal("diag"),c=tx.createLogLevelDiagLogger(i,n);if(u){var l=(o=new Error().stack)!==null&&o!==void 0?o:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+l),c.warn("Current logger will overwrite one already registered from "+l)}return bo.registerGlobal("diag",c,r,!0)},r.disable=function(){bo.unregisterGlobal(nx,r)},r.createComponentLogger=function(n){return new ex.DiagComponentLogger(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();To.DiagAPI=ix});var Ry=d(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BaggageImpl=void 0;var sx=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var r=this._entries.get(t);if(!!r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=t[0],n=t[1];return[r,n]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),i=0,s=t;i<s.length;i++){var o=s[i];n._entries.delete(o)}return n},e.prototype.clear=function(){return new e},e}();Ro.BaggageImpl=sx});var Oy=d(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.baggageEntryMetadataSymbol=void 0;Oo.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var Td=d(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.baggageEntryMetadataFromString=Tn.createBaggage=void 0;var ox=bn(),ax=Ry(),ux=Oy(),cx=ox.DiagAPI.instance();function lx(e){return e===void 0&&(e={}),new ax.BaggageImpl(new Map(Object.entries(e)))}Tn.createBaggage=lx;function dx(e){return typeof e!="string"&&(cx.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:ux.baggageEntryMetadataSymbol,toString:function(){return e}}}Tn.baggageEntryMetadataFromString=dx});var Cy=d(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0})});var wy=d(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0})});var Ly=d(Ny=>{"use strict";Object.defineProperty(Ny,"__esModule",{value:!0})});var xy=d(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.DiagConsoleLogger=void 0;var Rd=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],fx=function(){function e(){function t(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(console){var o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,i)}}}for(var r=0;r<Rd.length;r++)this[Rd[r].n]=t(Rd[r].c)}return e}();Po.DiagConsoleLogger=fx});var Dy=d(er=>{"use strict";var px=er&&er.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),My=er&&er.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&px(t,e,r)};Object.defineProperty(er,"__esModule",{value:!0});My(xy(),er);My(Ao(),er)});var Od=d(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.defaultTextMapSetter=Rn.defaultTextMapGetter=void 0;Rn.defaultTextMapGetter={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}};Rn.defaultTextMapSetter={set:function(e,t,r){e!=null&&(e[t]=r)}}});var Fy=d(By=>{"use strict";Object.defineProperty(By,"__esModule",{value:!0})});var ky=d(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0})});var Mi=d(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.ROOT_CONTEXT=On.createContextKey=void 0;function hx(e){return Symbol.for(e)}On.createContextKey=hx;var _x=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var s=new e(r._currentContext);return s._currentContext.set(n,i),s},r.deleteValue=function(n){var i=new e(r._currentContext);return i._currentContext.delete(n),i}}return e}();On.ROOT_CONTEXT=new _x});var jy=d(Pn=>{"use strict";var gx=Pn&&Pn.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.NoopContextManager=void 0;var mx=Mi(),Ex=function(){function e(){}return e.prototype.active=function(){return mx.ROOT_CONTEXT},e.prototype.with=function(t,r,n){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return r.call.apply(r,gx([n],i))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();Pn.NoopContextManager=Ex});var Id=d(Cn=>{"use strict";var yx=Cn&&Cn.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.ContextAPI=void 0;var Sx=jy(),Pd=vn(),qy=bn(),Cd="context",Ax=new Sx.NoopContextManager,vx=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Pd.registerGlobal(Cd,t,qy.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return(i=this._getContextManager()).with.apply(i,yx([t,r,n],s))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Pd.getGlobal(Cd)||Ax},e.prototype.disable=function(){this._getContextManager().disable(),Pd.unregisterGlobal(Cd,qy.DiagAPI.instance())},e}();Cn.ContextAPI=vx});var wd=d(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.TraceFlags=void 0;var bx;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(bx=Di.TraceFlags||(Di.TraceFlags={}))});var Co=d(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.INVALID_SPAN_CONTEXT=Et.INVALID_TRACEID=Et.INVALID_SPANID=void 0;var Tx=wd();Et.INVALID_SPANID="0000000000000000";Et.INVALID_TRACEID="00000000000000000000000000000000";Et.INVALID_SPAN_CONTEXT={traceId:Et.INVALID_TRACEID,spanId:Et.INVALID_SPANID,traceFlags:Tx.TraceFlags.NONE}});var wo=d(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.NonRecordingSpan=void 0;var Rx=Co(),Ox=function(){function e(t){t===void 0&&(t=Rx.INVALID_SPAN_CONTEXT),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();Io.NonRecordingSpan=Ox});var Ld=d(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getSpanContext=Xe.setSpanContext=Xe.deleteSpan=Xe.setSpan=Xe.getSpan=void 0;var Px=Mi(),Cx=wo(),Nd=Px.createContextKey("OpenTelemetry Context Key SPAN");function Gy(e){return e.getValue(Nd)||void 0}Xe.getSpan=Gy;function $y(e,t){return e.setValue(Nd,t)}Xe.setSpan=$y;function Ix(e){return e.deleteValue(Nd)}Xe.deleteSpan=Ix;function wx(e,t){return $y(e,new Cx.NonRecordingSpan(t))}Xe.setSpanContext=wx;function Nx(e){var t;return(t=Gy(e))===null||t===void 0?void 0:t.spanContext()}Xe.getSpanContext=Nx});var No=d(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.wrapSpanContext=yt.isSpanContextValid=yt.isValidSpanId=yt.isValidTraceId=void 0;var Hy=Co(),Lx=wo(),xx=/^([0-9a-f]{32})$/i,Mx=/^[0-9a-f]{16}$/i;function Vy(e){return xx.test(e)&&e!==Hy.INVALID_TRACEID}yt.isValidTraceId=Vy;function Wy(e){return Mx.test(e)&&e!==Hy.INVALID_SPANID}yt.isValidSpanId=Wy;function Dx(e){return Vy(e.traceId)&&Wy(e.spanId)}yt.isSpanContextValid=Dx;function Bx(e){return new Lx.NonRecordingSpan(e)}yt.wrapSpanContext=Bx});var Md=d(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.NoopTracer=void 0;var Fx=Id(),Yy=Ld(),xd=wo(),Ux=No(),Ky=Fx.ContextAPI.getInstance(),kx=function(){function e(){}return e.prototype.startSpan=function(t,r,n){var i=Boolean(r?.root);if(i)return new xd.NonRecordingSpan;var s=n&&Yy.getSpanContext(n);return jx(s)&&Ux.isSpanContextValid(s)?new xd.NonRecordingSpan(s):new xd.NonRecordingSpan},e.prototype.startActiveSpan=function(t,r,n,i){var s,o,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);var u=o??Ky.active(),c=this.startSpan(t,s,u),l=Yy.setSpan(u,c);return Ky.with(l,a,void 0,c)}},e}();Lo.NoopTracer=kx;function jx(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}});var Dd=d(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.ProxyTracer=void 0;var qx=Md(),Gx=new qx.NoopTracer,$x=function(){function e(t,r,n,i){this._provider=t,this.name=r,this.version=n,this.options=i}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Gx},e}();xo.ProxyTracer=$x});var Xy=d(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.NoopTracerProvider=void 0;var Hx=Md(),Vx=function(){function e(){}return e.prototype.getTracer=function(t,r,n){return new Hx.NoopTracer},e}();Mo.NoopTracerProvider=Vx});var Bd=d(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.ProxyTracerProvider=void 0;var Wx=Dd(),Yx=Xy(),Kx=new Yx.NoopTracerProvider,Xx=function(){function e(){}return e.prototype.getTracer=function(t,r,n){var i;return(i=this.getDelegateTracer(t,r,n))!==null&&i!==void 0?i:new Wx.ProxyTracer(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Kx},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,r,n)},e}();Do.ProxyTracerProvider=Xx});var Qy=d(zy=>{"use strict";Object.defineProperty(zy,"__esModule",{value:!0})});var Zy=d(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.SamplingDecision=void 0;var zx;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(zx=Bi.SamplingDecision||(Bi.SamplingDecision={}))});var eS=d(Jy=>{"use strict";Object.defineProperty(Jy,"__esModule",{value:!0})});var tS=d(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.SpanKind=void 0;var Qx;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Qx=Fi.SpanKind||(Fi.SpanKind={}))});var nS=d(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0})});var sS=d(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0})});var oS=d(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.SpanStatusCode=void 0;var Zx;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Zx=Ui.SpanStatusCode||(Ui.SpanStatusCode={}))});var uS=d(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0})});var cS=d(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.validateValue=In.validateKey=void 0;var Fd="[_0-9a-z-*/]",Jx="[a-z]"+Fd+"{0,255}",e1="[a-z0-9]"+Fd+"{0,240}@[a-z]"+Fd+"{0,13}",t1=new RegExp("^(?:"+Jx+"|"+e1+")$"),r1=/^[ -~]{0,255}[!-~]$/,n1=/,|=/;function i1(e){return t1.test(e)}In.validateKey=i1;function s1(e){return r1.test(e)&&!n1.test(e)}In.validateValue=s1});var hS=d(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.TraceStateImpl=void 0;var lS=cS(),dS=32,o1=512,fS=",",pS="=",a1=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,r){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n},e.prototype.unset=function(t){var r=this._clone();return r._internalState.delete(t),r},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(r,n){return r.push(n+pS+t.get(n)),r},[]).join(fS)},e.prototype._parse=function(t){t.length>o1||(this._internalState=t.split(fS).reverse().reduce(function(r,n){var i=n.trim(),s=i.indexOf(pS);if(s!==-1){var o=i.slice(0,s),a=i.slice(s+1,n.length);lS.validateKey(o)&&lS.validateValue(a)&&r.set(o,a)}return r},new Map),this._internalState.size>dS&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,dS))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();Bo.TraceStateImpl=a1});var _S=d(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.createTraceState=void 0;var u1=hS();function c1(e){return new u1.TraceStateImpl(e)}Fo.createTraceState=c1});var mS=d(gS=>{"use strict";Object.defineProperty(gS,"__esModule",{value:!0})});var yS=d(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0})});var AS=d(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0})});var bS=d(vS=>{"use strict";Object.defineProperty(vS,"__esModule",{value:!0})});var PS=d(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.TraceAPI=void 0;var Ud=vn(),TS=Bd(),RS=No(),ki=Ld(),OS=bn(),kd="trace",l1=function(){function e(){this._proxyTracerProvider=new TS.ProxyTracerProvider,this.wrapSpanContext=RS.wrapSpanContext,this.isSpanContextValid=RS.isSpanContextValid,this.deleteSpan=ki.deleteSpan,this.getSpan=ki.getSpan,this.getSpanContext=ki.getSpanContext,this.setSpan=ki.setSpan,this.setSpanContext=ki.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=Ud.registerGlobal(kd,this._proxyTracerProvider,OS.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Ud.getGlobal(kd)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){Ud.unregisterGlobal(kd,OS.DiagAPI.instance()),this._proxyTracerProvider=new TS.ProxyTracerProvider},e}();Uo.TraceAPI=l1});var CS=d(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.NoopTextMapPropagator=void 0;var d1=function(){function e(){}return e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}();ko.NoopTextMapPropagator=d1});var IS=d(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.deleteBaggage=tr.setBaggage=tr.getBaggage=void 0;var f1=Mi(),jd=f1.createContextKey("OpenTelemetry Baggage Key");function p1(e){return e.getValue(jd)||void 0}tr.getBaggage=p1;function h1(e,t){return e.setValue(jd,t)}tr.setBaggage=h1;function _1(e){return e.deleteValue(jd)}tr.deleteBaggage=_1});var LS=d(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.PropagationAPI=void 0;var qd=vn(),g1=CS(),wS=Od(),Gd=IS(),m1=Td(),NS=bn(),$d="propagation",E1=new g1.NoopTextMapPropagator,y1=function(){function e(){this.createBaggage=m1.createBaggage,this.getBaggage=Gd.getBaggage,this.setBaggage=Gd.setBaggage,this.deleteBaggage=Gd.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return qd.registerGlobal($d,t,NS.DiagAPI.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=wS.defaultTextMapSetter),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=wS.defaultTextMapGetter),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){qd.unregisterGlobal($d,NS.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return qd.getGlobal($d)||E1},e}();jo.PropagationAPI=y1});var F=d(L=>{"use strict";var S1=L&&L.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ie=L&&L.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&S1(t,e,r)};Object.defineProperty(L,"__esModule",{value:!0});L.diag=L.propagation=L.trace=L.context=L.INVALID_SPAN_CONTEXT=L.INVALID_TRACEID=L.INVALID_SPANID=L.isValidSpanId=L.isValidTraceId=L.isSpanContextValid=L.createTraceState=L.baggageEntryMetadataFromString=void 0;ie(gy(),L);var A1=Td();Object.defineProperty(L,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return A1.baggageEntryMetadataFromString}});ie(Cy(),L);ie(wy(),L);ie(Ly(),L);ie(Dy(),L);ie(Od(),L);ie(Fy(),L);ie(ky(),L);ie(Dd(),L);ie(Bd(),L);ie(Qy(),L);ie(Zy(),L);ie(eS(),L);ie(tS(),L);ie(nS(),L);ie(sS(),L);ie(oS(),L);ie(wd(),L);ie(uS(),L);var v1=_S();Object.defineProperty(L,"createTraceState",{enumerable:!0,get:function(){return v1.createTraceState}});ie(mS(),L);ie(yS(),L);ie(AS(),L);var Hd=No();Object.defineProperty(L,"isSpanContextValid",{enumerable:!0,get:function(){return Hd.isSpanContextValid}});Object.defineProperty(L,"isValidTraceId",{enumerable:!0,get:function(){return Hd.isValidTraceId}});Object.defineProperty(L,"isValidSpanId",{enumerable:!0,get:function(){return Hd.isValidSpanId}});var Vd=Co();Object.defineProperty(L,"INVALID_SPANID",{enumerable:!0,get:function(){return Vd.INVALID_SPANID}});Object.defineProperty(L,"INVALID_TRACEID",{enumerable:!0,get:function(){return Vd.INVALID_TRACEID}});Object.defineProperty(L,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return Vd.INVALID_SPAN_CONTEXT}});ie(Mi(),L);ie(bS(),L);var b1=Id();L.context=b1.ContextAPI.getInstance();var T1=PS();L.trace=T1.TraceAPI.getInstance();var R1=LS();L.propagation=R1.PropagationAPI.getInstance();var O1=bn();L.diag=O1.DiagAPI.instance();L.default={trace:L.trace,context:L.context,propagation:L.propagation,diag:L.diag}});var qo=d(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.isTracingSuppressed=rr.unsuppressTracing=rr.suppressTracing=void 0;var P1=F(),Wd=(0,P1.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function C1(e){return e.setValue(Wd,!0)}rr.suppressTracing=C1;function I1(e){return e.deleteValue(Wd)}rr.unsuppressTracing=I1;function w1(e){return e.getValue(Wd)===!0}rr.isTracingSuppressed=w1});var xS=d(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.validateValue=wn.validateKey=void 0;var Yd="[_0-9a-z-*/]",N1=`[a-z]${Yd}{0,255}`,L1=`[a-z0-9]${Yd}{0,240}@[a-z]${Yd}{0,13}`,x1=new RegExp(`^(?:${N1}|${L1})$`),M1=/^[ -~]{0,255}[!-~]$/,D1=/,|=/;function B1(e){return x1.test(e)}wn.validateKey=B1;function F1(e){return M1.test(e)&&!D1.test(e)}wn.validateValue=F1});var Kd=d(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.TraceState=void 0;var MS=xS(),DS=32,U1=512,BS=",",FS="=",ji=class{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+FS+this.get(r)),t),[]).join(BS)}_parse(t){t.length>U1||(this._internalState=t.split(BS).reverse().reduce((r,n)=>{let i=n.trim(),s=i.indexOf(FS);if(s!==-1){let o=i.slice(0,s),a=i.slice(s+1,n.length);(0,MS.validateKey)(o)&&(0,MS.validateValue)(a)&&r.set(o,a)}return r},new Map),this._internalState.size>DS&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,DS))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new ji;return t._internalState=new Map(this._internalState),t}};Go.TraceState=ji});var zd=d(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.W3CTraceContextPropagator=Te.parseTraceParent=Te.TRACE_STATE_HEADER=Te.TRACE_PARENT_HEADER=void 0;var $o=F(),k1=qo(),j1=Kd();Te.TRACE_PARENT_HEADER="traceparent";Te.TRACE_STATE_HEADER="tracestate";var q1="00",G1="(?!ff)[\\da-f]{2}",$1="(?![0]{32})[\\da-f]{32}",H1="(?![0]{16})[\\da-f]{16}",V1="[\\da-f]{2}",W1=new RegExp(`^\\s?(${G1})-(${$1})-(${H1})-(${V1})(-.*)?\\s?$`);function US(e){let t=W1.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}Te.parseTraceParent=US;var Xd=class{inject(t,r,n){let i=$o.trace.getSpanContext(t);if(!i||(0,k1.isTracingSuppressed)(t)||!(0,$o.isSpanContextValid)(i))return;let s=`${q1}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||$o.TraceFlags.NONE).toString(16)}`;n.set(r,Te.TRACE_PARENT_HEADER,s),i.traceState&&n.set(r,Te.TRACE_STATE_HEADER,i.traceState.serialize())}extract(t,r,n){let i=n.get(r,Te.TRACE_PARENT_HEADER);if(!i)return t;let s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return t;let o=US(s);if(!o)return t;o.isRemote=!0;let a=n.get(r,Te.TRACE_STATE_HEADER);if(a){let u=Array.isArray(a)?a.join(","):a;o.traceState=new j1.TraceState(typeof u=="string"?u:void 0)}return $o.trace.setSpanContext(t,o)}fields(){return[Te.TRACE_PARENT_HEADER,Te.TRACE_STATE_HEADER]}};Te.W3CTraceContextPropagator=Xd});var Qd=d(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.BAGGAGE_MAX_TOTAL_LENGTH=Re.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=Re.BAGGAGE_MAX_NAME_VALUE_PAIRS=Re.BAGGAGE_HEADER=Re.BAGGAGE_ITEMS_SEPARATOR=Re.BAGGAGE_PROPERTIES_SEPARATOR=Re.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;Re.BAGGAGE_KEY_PAIR_SEPARATOR="=";Re.BAGGAGE_PROPERTIES_SEPARATOR=";";Re.BAGGAGE_ITEMS_SEPARATOR=",";Re.BAGGAGE_HEADER="baggage";Re.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;Re.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;Re.BAGGAGE_MAX_TOTAL_LENGTH=8192});var Zd=d(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.parseKeyPairsIntoRecord=St.parsePairKeyValue=St.getKeyPairs=St.serializeKeyPairs=void 0;var Y1=F(),Rr=Qd();function K1(e){return e.reduce((t,r)=>{let n=`${t}${t!==""?Rr.BAGGAGE_ITEMS_SEPARATOR:""}${r}`;return n.length>Rr.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"")}St.serializeKeyPairs=K1;function X1(e){return e.getAllEntries().map(([t,r])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=Rr.BAGGAGE_PROPERTIES_SEPARATOR+r.metadata.toString()),n})}St.getKeyPairs=X1;function kS(e){let t=e.split(Rr.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;let r=t.shift();if(!r)return;let n=r.split(Rr.BAGGAGE_KEY_PAIR_SEPARATOR);if(n.length!==2)return;let i=decodeURIComponent(n[0].trim()),s=decodeURIComponent(n[1].trim()),o;return t.length>0&&(o=(0,Y1.baggageEntryMetadataFromString)(t.join(Rr.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:s,metadata:o}}St.parsePairKeyValue=kS;function z1(e){return typeof e!="string"||e.length===0?{}:e.split(Rr.BAGGAGE_ITEMS_SEPARATOR).map(t=>kS(t)).filter(t=>t!==void 0&&t.value.length>0).reduce((t,r)=>(t[r.key]=r.value,t),{})}St.parseKeyPairsIntoRecord=z1});var jS=d(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.W3CBaggagePropagator=void 0;var Jd=F(),Q1=qo(),Or=Qd(),ef=Zd(),tf=class{inject(t,r,n){let i=Jd.propagation.getBaggage(t);if(!i||(0,Q1.isTracingSuppressed)(t))return;let s=(0,ef.getKeyPairs)(i).filter(a=>a.length<=Or.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,Or.BAGGAGE_MAX_NAME_VALUE_PAIRS),o=(0,ef.serializeKeyPairs)(s);o.length>0&&n.set(r,Or.BAGGAGE_HEADER,o)}extract(t,r,n){let i=n.get(r,Or.BAGGAGE_HEADER),s=Array.isArray(i)?i.join(Or.BAGGAGE_ITEMS_SEPARATOR):i;if(!s)return t;let o={};return s.length===0||(s.split(Or.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let c=(0,ef.parsePairKeyValue)(u);if(c){let l={value:c.value};c.metadata&&(l.metadata=c.metadata),o[c.key]=l}}),Object.entries(o).length===0)?t:Jd.propagation.setBaggage(t,Jd.propagation.createBaggage(o))}fields(){return[Or.BAGGAGE_HEADER]}};Ho.W3CBaggagePropagator=tf});var VS=d(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.isAttributeValue=nr.isAttributeKey=nr.sanitizeAttributes=void 0;var qS=F();function Z1(e){let t={};if(typeof e!="object"||e==null)return t;for(let[r,n]of Object.entries(e)){if(!GS(r)){qS.diag.warn(`Invalid attribute key: ${r}`);continue}if(!$S(n)){qS.diag.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?t[r]=n.slice():t[r]=n}return t}nr.sanitizeAttributes=Z1;function GS(e){return typeof e=="string"&&e.length>0}nr.isAttributeKey=GS;function $S(e){return e==null?!0:Array.isArray(e)?J1(e):HS(e)}nr.isAttributeValue=$S;function J1(e){let t;for(let r of e)if(r!=null){if(!t){if(HS(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}function HS(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}});var rf=d(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.loggingErrorHandler=void 0;var eM=F();function tM(){return e=>{eM.diag.error(rM(e))}}Vo.loggingErrorHandler=tM;function rM(e){return typeof e=="string"?e:JSON.stringify(nM(e))}function nM(e){let t={},r=e;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(t[n])return;let i=r[n];i&&(t[n]=String(i))}),r=Object.getPrototypeOf(r);return t}});var nf=d(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.globalErrorHandler=Nn.setGlobalErrorHandler=void 0;var iM=rf(),WS=(0,iM.loggingErrorHandler)();function sM(e){WS=e}Nn.setGlobalErrorHandler=sM;function oM(e){try{WS(e)}catch{}}Nn.globalErrorHandler=oM});var sf=d(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.TracesSamplerValues=void 0;var aM;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(aM=qi.TracesSamplerValues||(qi.TracesSamplerValues={}))});var of=d(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.parseEnvironment=we.DEFAULT_ENVIRONMENT=we.DEFAULT_ATTRIBUTE_COUNT_LIMIT=we.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;var ir=F(),uM=sf(),cM=",",lM=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function dM(e){return lM.indexOf(e)>-1}var fM=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function pM(e){return fM.indexOf(e)>-1}we.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0;we.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;we.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ir.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:we.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:we.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:we.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:we.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:uM.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:""};function hM(e,t,r,n=-1/0,i=1/0){if(typeof r[e]<"u"){let s=Number(r[e]);isNaN(s)||(s<n?t[e]=n:s>i?t[e]=i:t[e]=s)}}function _M(e,t,r,n=cM){let i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(s=>s.trim()))}var gM={ALL:ir.DiagLogLevel.ALL,VERBOSE:ir.DiagLogLevel.VERBOSE,DEBUG:ir.DiagLogLevel.DEBUG,INFO:ir.DiagLogLevel.INFO,WARN:ir.DiagLogLevel.WARN,ERROR:ir.DiagLogLevel.ERROR,NONE:ir.DiagLogLevel.NONE};function mM(e,t,r){let n=r[e];if(typeof n=="string"){let i=gM[n.toUpperCase()];i!=null&&(t[e]=i)}}function EM(e){let t={};for(let r in we.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":mM(n,t,e);break;default:if(dM(n))hM(n,t,e);else if(pM(n))_M(n,t,e);else{let i=e[n];typeof i<"u"&&i!==null&&(t[n]=String(i))}}}return t}we.parseEnvironment=EM});var KS=d(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.getEnv=void 0;var yM=R("os"),YS=of();function SM(){let e=(0,YS.parseEnvironment)(process.env);return Object.assign({HOSTNAME:yM.hostname()},YS.DEFAULT_ENVIRONMENT,e)}Wo.getEnv=SM});var XS=d(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo._globalThis=void 0;Yo._globalThis=typeof globalThis=="object"?globalThis:global});var zS=d(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.hexToBase64=void 0;function AM(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let i=e.substring(n,n+2),s=parseInt(i,16);r+=String.fromCharCode(s)}return Buffer.from(r,"ascii").toString("base64")}Ko.hexToBase64=AM});var JS=d(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.RandomIdGenerator=void 0;var vM=8,ZS=16,af=class{constructor(){this.generateTraceId=QS(ZS),this.generateSpanId=QS(vM)}};zo.RandomIdGenerator=af;var Xo=Buffer.allocUnsafe(ZS);function QS(e){return function(){for(let r=0;r<e/4;r++)Xo.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(Xo[r]>0);r++)r===e-1&&(Xo[e-1]=1);return Xo.toString("hex",0,e)}}});var eA=d(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.otperformance=void 0;var bM=R("perf_hooks");Qo.otperformance=bM.performance});var Jo=d(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.VERSION=void 0;Zo.VERSION="1.3.1"});var tA=d(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.MessageTypeValues=Q.RpcGrpcStatusCodeValues=Q.MessagingOperationValues=Q.MessagingDestinationKindValues=Q.HttpFlavorValues=Q.NetHostConnectionSubtypeValues=Q.NetHostConnectionTypeValues=Q.NetTransportValues=Q.FaasInvokedProviderValues=Q.FaasDocumentOperationValues=Q.FaasTriggerValues=Q.DbCassandraConsistencyLevelValues=Q.DbSystemValues=Q.SemanticAttributes=void 0;Q.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"};Q.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"};Q.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"};Q.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"};Q.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"};Q.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};Q.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"};Q.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"};Q.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"};Q.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"};Q.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"};Q.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"};Q.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16};Q.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}});var rA=d(Pr=>{"use strict";var TM=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),RM=Pr&&Pr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&TM(t,e,r)};Object.defineProperty(Pr,"__esModule",{value:!0});RM(tA(),Pr)});var nA=d(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.TelemetrySdkLanguageValues=Oe.OsTypeValues=Oe.HostArchValues=Oe.AwsEcsLaunchtypeValues=Oe.CloudPlatformValues=Oe.CloudProviderValues=Oe.SemanticResourceAttributes=void 0;Oe.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};Oe.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};Oe.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"};Oe.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"};Oe.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"};Oe.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"};Oe.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var iA=d(Cr=>{"use strict";var OM=Cr&&Cr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),PM=Cr&&Cr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&OM(t,e,r)};Object.defineProperty(Cr,"__esModule",{value:!0});PM(nA(),Cr)});var At=d(sr=>{"use strict";var CM=sr&&sr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),sA=sr&&sr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&CM(t,e,r)};Object.defineProperty(sr,"__esModule",{value:!0});sA(rA(),sr);sA(iA(),sr)});var oA=d(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.SDK_INFO=void 0;var IM=Jo(),Gi=At();ea.SDK_INFO={[Gi.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[Gi.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[Gi.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Gi.TelemetrySdkLanguageValues.NODEJS,[Gi.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:IM.VERSION}});var aA=d(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.unrefTimer=void 0;function wM(e){e.unref()}ta.unrefTimer=wM});var uA=d(He=>{"use strict";var NM=He&&He.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ir=He&&He.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&NM(t,e,r)};Object.defineProperty(He,"__esModule",{value:!0});Ir(KS(),He);Ir(XS(),He);Ir(zS(),He);Ir(JS(),He);Ir(eA(),He);Ir(oA(),He);Ir(aA(),He)});var uf=d(wr=>{"use strict";var LM=wr&&wr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xM=wr&&wr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&LM(t,e,r)};Object.defineProperty(wr,"__esModule",{value:!0});xM(uA(),wr)});var dA=d(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.isTimeInput=de.isTimeInputHrTime=de.hrTimeToMicroseconds=de.hrTimeToMilliseconds=de.hrTimeToNanoseconds=de.hrTimeToTimeStamp=de.hrTimeDuration=de.timeInputToHrTime=de.hrTime=void 0;var cf=uf(),lf=9,$i=Math.pow(10,lf);function ra(e){let t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(lf))*$i;return[r,n]}function cA(){let e=cf.otperformance.timeOrigin;if(typeof e!="number"){let t=cf.otperformance;e=t.timing&&t.timing.fetchStart}return e}function lA(e){let t=ra(cA()),r=ra(typeof e=="number"?e:cf.otperformance.now()),n=t[0]+r[0],i=t[1]+r[1];return i>$i&&(i-=$i,n+=1),[n,i]}de.hrTime=lA;function MM(e){if(df(e))return e;if(typeof e=="number")return e<cA()?lA(e):ra(e);if(e instanceof Date)return ra(e.getTime());throw TypeError("Invalid input type")}de.timeInputToHrTime=MM;function DM(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=$i),[r,n]}de.hrTimeDuration=DM;function BM(e){let t=lf,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n)}de.hrTimeToTimeStamp=BM;function FM(e){return e[0]*$i+e[1]}de.hrTimeToNanoseconds=FM;function UM(e){return Math.round(e[0]*1e3+e[1]/1e6)}de.hrTimeToMilliseconds=UM;function kM(e){return Math.round(e[0]*1e6+e[1]/1e3)}de.hrTimeToMicroseconds=kM;function df(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}de.isTimeInputHrTime=df;function jM(e){return df(e)||typeof e=="number"||e instanceof Date}de.isTimeInput=jM});var pA=d(fA=>{"use strict";Object.defineProperty(fA,"__esModule",{value:!0})});var hA=d(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.ExportResultCode=void 0;var qM;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(qM=Hi.ExportResultCode||(Hi.ExportResultCode={}))});var gA=d(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.CompositePropagator=void 0;var _A=F(),ff=class{constructor(t={}){var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(t,r,n){for(let i of this._propagators)try{i.inject(t,r,n)}catch(s){_A.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${s.message}`)}}extract(t,r,n){return this._propagators.reduce((i,s)=>{try{return s.extract(i,r,n)}catch(o){_A.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${o.message}`)}return i},t)}fields(){return this._fields.slice()}};na.CompositePropagator=ff});var EA=d(mA=>{"use strict";Object.defineProperty(mA,"__esModule",{value:!0})});var yA=d(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.getRPCMetadata=rt.deleteRPCMetadata=rt.setRPCMetadata=rt.RPCType=void 0;var GM=F(),pf=(0,GM.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA"),$M;(function(e){e.HTTP="http"})($M=rt.RPCType||(rt.RPCType={}));function HM(e,t){return e.setValue(pf,t)}rt.setRPCMetadata=HM;function VM(e){return e.deleteValue(pf)}rt.deleteRPCMetadata=VM;function WM(e){return e.getValue(pf)}rt.getRPCMetadata=WM});var _f=d(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.AlwaysOffSampler=void 0;var YM=F(),hf=class{shouldSample(){return{decision:YM.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};ia.AlwaysOffSampler=hf});var mf=d(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.AlwaysOnSampler=void 0;var KM=F(),gf=class{shouldSample(){return{decision:KM.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};sa.AlwaysOnSampler=gf});var AA=d(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.ParentBasedSampler=void 0;var oa=F(),XM=nf(),SA=_f(),Ef=mf(),yf=class{constructor(t){var r,n,i,s;this._root=t.root,this._root||((0,XM.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ef.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Ef.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new SA.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Ef.AlwaysOnSampler,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new SA.AlwaysOffSampler}shouldSample(t,r,n,i,s,o){let a=oa.trace.getSpanContext(t);return!a||!(0,oa.isSpanContextValid)(a)?this._root.shouldSample(t,r,n,i,s,o):a.isRemote?a.traceFlags&oa.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,s,o):this._remoteParentNotSampled.shouldSample(t,r,n,i,s,o):a.traceFlags&oa.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,s,o):this._localParentNotSampled.shouldSample(t,r,n,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};aa.ParentBasedSampler=yf});var vA=d(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.TraceIdRatioBasedSampler=void 0;var Sf=F(),Af=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:(0,Sf.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?Sf.SamplingDecision.RECORD_AND_SAMPLED:Sf.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,s=parseInt(t.slice(i,i+8),16);r=(r^s)>>>0}return r}};ua.TraceIdRatioBasedSampler=Af});var PA=d(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.isPlainObject=void 0;var zM="[object Object]",QM="[object Null]",ZM="[object Undefined]",JM=Function.prototype,bA=JM.toString,eD=bA.call(Object),tD=rD(Object.getPrototypeOf,Object),TA=Object.prototype,RA=TA.hasOwnProperty,Nr=Symbol?Symbol.toStringTag:void 0,OA=TA.toString;function rD(e,t){return function(r){return e(t(r))}}function nD(e){if(!iD(e)||sD(e)!==zM)return!1;let t=tD(e);if(t===null)return!0;let r=RA.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&bA.call(r)===eD}ca.isPlainObject=nD;function iD(e){return e!=null&&typeof e=="object"}function sD(e){return e==null?e===void 0?ZM:QM:Nr&&Nr in Object(e)?oD(e):aD(e)}function oD(e){let t=RA.call(e,Nr),r=e[Nr],n=!1;try{e[Nr]=void 0,n=!0}catch{}let i=OA.call(e);return n&&(t?e[Nr]=r:delete e[Nr]),i}function aD(e){return OA.call(e)}});var LA=d(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.merge=void 0;var CA=PA(),uD=20;function cD(...e){let t=e.shift(),r=new WeakMap;for(;e.length>0;)t=wA(t,e.shift(),0,r);return t}fa.merge=cD;function vf(e){return da(e)?e.slice():e}function wA(e,t,r=0,n){let i;if(!(r>uD)){if(r++,la(e)||la(t)||NA(t))i=vf(t);else if(da(e)){if(i=e.slice(),da(t))for(let s=0,o=t.length;s<o;s++)i.push(vf(t[s]));else if(Vi(t)){let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o];i[u]=vf(t[u])}}}else if(Vi(e))if(Vi(t)){if(!lD(e,t))return t;i=Object.assign({},e);let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o],c=t[u];if(la(c))typeof c>"u"?delete i[u]:i[u]=c;else{let l=i[u],f=c;if(IA(e,u,n)||IA(t,u,n))delete i[u];else{if(Vi(l)&&Vi(f)){let p=n.get(l)||[],h=n.get(f)||[];p.push({obj:e,key:u}),h.push({obj:t,key:u}),n.set(l,p),n.set(f,h)}i[u]=wA(i[u],c,r,n)}}}}else i=t;return i}}function IA(e,t,r){let n=r.get(e[t])||[];for(let i=0,s=n.length;i<s;i++){let o=n[i];if(o.key===t&&o.obj===e)return!0}return!1}function da(e){return Array.isArray(e)}function NA(e){return typeof e=="function"}function Vi(e){return!la(e)&&!da(e)&&!NA(e)&&typeof e=="object"}function la(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function lD(e,t){return!(!(0,CA.isPlainObject)(e)||!(0,CA.isPlainObject)(t))}});var MA=d(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.isUrlIgnored=Ln.urlMatches=void 0;function xA(e,t){return typeof t=="string"?e===t:!!e.match(t)}Ln.urlMatches=xA;function dD(e,t){if(!t)return!1;for(let r of t)if(xA(e,r))return!0;return!1}Ln.isUrlIgnored=dD});var DA=d(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.isWrapped=void 0;function fD(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}pa.isWrapped=fD});var BA=d(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.Deferred=void 0;var bf=class{constructor(){this._promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}};ha.Deferred=bf});var FA=d(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.BindOnceFuture=void 0;var pD=BA(),Tf=class{constructor(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new pD.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}};_a.BindOnceFuture=Tf});var ee=d(K=>{"use strict";var hD=K&&K.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),J=K&&K.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&hD(t,e,r)};Object.defineProperty(K,"__esModule",{value:!0});K.baggageUtils=void 0;J(jS(),K);J(VS(),K);J(nf(),K);J(rf(),K);J(dA(),K);J(pA(),K);J(hA(),K);J(Jo(),K);K.baggageUtils=Zd();J(uf(),K);J(gA(),K);J(zd(),K);J(EA(),K);J(yA(),K);J(_f(),K);J(mf(),K);J(AA(),K);J(vA(),K);J(qo(),K);J(Kd(),K);J(of(),K);J(LA(),K);J(sf(),K);J(MA(),K);J(DA(),K);J(FA(),K);J(Jo(),K)});var UA=d(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.ExceptionEventName=void 0;ga.ExceptionEventName="exception"});var Of=d(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.Span=void 0;var vt=F(),nt=ee(),Lr=At(),_D=UA(),Rf=class{constructor(t,r,n,i,s,o,a=[],u=(0,nt.hrTime)()){this.attributes={},this.links=[],this.events=[],this.status={code:vt.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=s,this.links=a,this.startTime=(0,nt.timeInputToHrTime)(u),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}spanContext(){return this._spanContext}setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(vt.diag.warn(`Invalid attribute key: ${t}`),this):(0,nt.isAttributeValue)(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=this._truncateToSize(r),this):(vt.diag.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(let[r,n]of Object.entries(t))this.setAttribute(r,n);return this}addEvent(t,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return vt.diag.warn("No events allowed."),this;this.events.length>=this._spanLimits.eventCountLimit&&(vt.diag.warn("Dropping extra events."),this.events.shift()),(0,nt.isTimeInput)(r)&&(typeof n>"u"&&(n=r),r=void 0),typeof n>"u"&&(n=(0,nt.hrTime)());let i=(0,nt.sanitizeAttributes)(r);return this.events.push({name:t,attributes:i,time:(0,nt.timeInputToHrTime)(n)}),this}setStatus(t){return this._isSpanEnded()?this:(this.status=t,this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t=(0,nt.hrTime)()){if(this._isSpanEnded()){vt.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=(0,nt.timeInputToHrTime)(t),this._duration=(0,nt.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&vt.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(t,r=(0,nt.hrTime)()){let n={};typeof t=="string"?n[Lr.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[Lr.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[Lr.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[Lr.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[Lr.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[Lr.SemanticAttributes.EXCEPTION_TYPE]||n[Lr.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(_D.ExceptionEventName,n,r):vt.diag.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&vt.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),this._ended}_truncateToLimitUtil(t,r){return t.length<=r?t:t.substr(0,r)}_truncateToSize(t){let r=this._attributeValueLengthLimit;return r<=0?(vt.diag.warn(`Attribute value limit must be positive, got ${r}`),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):t}};ma.Span=Rf});var Pf=d(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.buildSamplerFromEnv=Mn.DEFAULT_CONFIG=void 0;var Ea=F(),re=ee(),gD=(0,re.getEnv)(),mD=re.TracesSamplerValues.AlwaysOn,xn=1;Mn.DEFAULT_CONFIG={sampler:jA(gD),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,re.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,re.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,re.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,re.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,re.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,re.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT}};function jA(e=(0,re.getEnv)()){switch(e.OTEL_TRACES_SAMPLER){case re.TracesSamplerValues.AlwaysOn:return new re.AlwaysOnSampler;case re.TracesSamplerValues.AlwaysOff:return new re.AlwaysOffSampler;case re.TracesSamplerValues.ParentBasedAlwaysOn:return new re.ParentBasedSampler({root:new re.AlwaysOnSampler});case re.TracesSamplerValues.ParentBasedAlwaysOff:return new re.ParentBasedSampler({root:new re.AlwaysOffSampler});case re.TracesSamplerValues.TraceIdRatio:return new re.TraceIdRatioBasedSampler(kA(e));case re.TracesSamplerValues.ParentBasedTraceIdRatio:return new re.ParentBasedSampler({root:new re.TraceIdRatioBasedSampler(kA(e))});default:return Ea.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${mD}".`),new re.AlwaysOnSampler}}Mn.buildSamplerFromEnv=jA;function kA(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return Ea.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${xn}.`),xn;let t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Ea.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${xn}.`),xn):t<0||t>1?(Ea.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${xn}.`),xn):t}});var Cf=d(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.reconfigureLimits=Dn.mergeConfig=void 0;var ya=Pf();function ED(e){let t={sampler:(0,ya.buildSamplerFromEnv)()},r=Object.assign({},ya.DEFAULT_CONFIG,t,e);return r.generalLimits=Object.assign({},ya.DEFAULT_CONFIG.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},ya.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r}Dn.mergeConfig=ED;function yD(e){var t,r;let n=Object.assign({},e.spanLimits);return n.attributeCountLimit==null&&((t=e.generalLimits)===null||t===void 0?void 0:t.attributeCountLimit)!=null&&(n.attributeCountLimit=e.generalLimits.attributeCountLimit),n.attributeValueLengthLimit==null&&((r=e.generalLimits)===null||r===void 0?void 0:r.attributeValueLengthLimit)!=null&&(n.attributeValueLengthLimit=e.generalLimits.attributeValueLengthLimit),Object.assign({},e,{spanLimits:n})}Dn.reconfigureLimits=yD});var qA=d(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.Tracer=void 0;var ye=F(),Wi=ee(),SD=Of(),AD=Cf(),If=class{constructor(t,r,n){this._tracerProvider=n;let i=(0,AD.mergeConfig)(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new Wi.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=t}startSpan(t,r={},n=ye.context.active()){var i,s;if((0,Wi.isTracingSuppressed)(n))return ye.diag.debug("Instrumentation suppressed, returning Noop Span"),ye.trace.wrapSpanContext(ye.INVALID_SPAN_CONTEXT);r.root&&(n=ye.trace.deleteSpan(n));let o=ye.trace.getSpanContext(n),a=this._idGenerator.generateSpanId(),u,c,l;!o||!ye.trace.isSpanContextValid(o)?u=this._idGenerator.generateTraceId():(u=o.traceId,c=o.traceState,l=o.spanId);let f=(i=r.kind)!==null&&i!==void 0?i:ye.SpanKind.INTERNAL,p=((s=r.links)!==null&&s!==void 0?s:[]).map(b=>({context:b.context,attributes:(0,Wi.sanitizeAttributes)(b.attributes)})),h=(0,Wi.sanitizeAttributes)(r.attributes),g=this._sampler.shouldSample(n,u,t,f,h,p),_=g.decision===ye.SamplingDecision.RECORD_AND_SAMPLED?ye.TraceFlags.SAMPLED:ye.TraceFlags.NONE,v={traceId:u,spanId:a,traceFlags:_,traceState:c};if(g.decision===ye.SamplingDecision.NOT_RECORD)return ye.diag.debug("Recording is off, propagating context in a non-recording span"),ye.trace.wrapSpanContext(v);let A=new SD.Span(this,n,t,v,f,l,p,r.startTime),S=(0,Wi.sanitizeAttributes)(Object.assign(h,g.attributes));return A.setAttributes(S),A}startActiveSpan(t,r,n,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);let u=o??ye.context.active(),c=this.startSpan(t,s,u),l=ye.trace.setSpan(u,c);return ye.context.with(l,a,void 0,c)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};Sa.Tracer=If});var GA=d(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.defaultServiceName=void 0;function vD(){return`unknown_service:${process.argv0}`}Aa.defaultServiceName=vD});var HA=d(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.detectResources=void 0;var $A=xr(),wf=F(),bD=R("util"),TD=async(e={})=>{let t=Object.assign(e),r=await Promise.all((t.detectors||[]).map(async n=>{try{let i=await n.detect(t);return wf.diag.debug(`${n.constructor.name} found resource.`,i),i}catch(i){return wf.diag.debug(`${n.constructor.name} failed: ${i.message}`),$A.Resource.empty()}}));return RD(r),r.reduce((n,i)=>n.merge(i),$A.Resource.empty())};va.detectResources=TD;var RD=e=>{e.forEach(t=>{if(Object.keys(t.attributes).length>0){let r=bD.inspect(t.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});wf.diag.verbose(r)}})}});var YA=d(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.hostDetector=void 0;var VA=At(),OD=xr(),WA=R("os"),Nf=class{async detect(t){let r={[VA.SemanticResourceAttributes.HOST_NAME]:(0,WA.hostname)(),[VA.SemanticResourceAttributes.HOST_ARCH]:this._normalizeArch((0,WA.arch)())};return new OD.Resource(r)}_normalizeArch(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}}};ba.hostDetector=new Nf});var zA=d(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.osDetector=void 0;var KA=At(),PD=xr(),XA=R("os"),Lf=class{async detect(t){let r={[KA.SemanticResourceAttributes.OS_TYPE]:this._normalizeType((0,XA.platform)()),[KA.SemanticResourceAttributes.OS_VERSION]:(0,XA.release)()};return new PD.Resource(r)}_normalizeType(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}};Ta.osDetector=new Lf});var QA=d(bt=>{"use strict";var CD=bt&&bt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ra=bt&&bt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&CD(t,e,r)};Object.defineProperty(bt,"__esModule",{value:!0});Ra(GA(),bt);Ra(HA(),bt);Ra(YA(),bt);Ra(zA(),bt)});var xf=d(Mr=>{"use strict";var ID=Mr&&Mr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),wD=Mr&&Mr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ID(t,e,r)};Object.defineProperty(Mr,"__esModule",{value:!0});wD(QA(),Mr)});var xr=d(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.Resource=void 0;var Dr=At(),Mf=ee(),ND=xf(),Ut=class{constructor(t){this.attributes=t}static empty(){return Ut.EMPTY}static default(){return new Ut({[Dr.SemanticResourceAttributes.SERVICE_NAME]:(0,ND.defaultServiceName)(),[Dr.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Mf.SDK_INFO[Dr.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],[Dr.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:Mf.SDK_INFO[Dr.SemanticResourceAttributes.TELEMETRY_SDK_NAME],[Dr.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:Mf.SDK_INFO[Dr.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(t){if(!t||!Object.keys(t.attributes).length)return this;let r=Object.assign({},this.attributes,t.attributes);return new Ut(r)}};Oa.Resource=Ut;Ut.EMPTY=new Ut({})});var JA=d(ZA=>{"use strict";Object.defineProperty(ZA,"__esModule",{value:!0})});var tv=d(ev=>{"use strict";Object.defineProperty(ev,"__esModule",{value:!0})});var rv=d(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.browserDetector=void 0;var LD=F(),Pa=At(),Df=Yi(),Bf=class{async detect(t){if(!(typeof navigator<"u"))return Df.Resource.empty();let n={[Pa.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[Pa.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Web Browser",[Pa.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:navigator.userAgent};return this._getResourceAttributes(n,t)}_getResourceAttributes(t,r){return t[Pa.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]===""?(LD.diag.debug("BrowserDetector failed: Unable to find required browser resources. "),Df.Resource.empty()):new Df.Resource(Object.assign({},t))}};Ca.browserDetector=new Bf});var nv=d(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.envDetector=void 0;var xD=F(),MD=ee(),DD=At(),BD=xr(),Ff=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(t){let r={},n=(0,MD.getEnv)(),i=n.OTEL_RESOURCE_ATTRIBUTES,s=n.OTEL_SERVICE_NAME;if(i)try{let o=this._parseResourceAttributes(i);Object.assign(r,o)}catch(o){xD.diag.debug(`EnvDetector failed: ${o.message}`)}return s&&(r[DD.SemanticResourceAttributes.SERVICE_NAME]=s),new BD.Resource(r)}_parseResourceAttributes(t){if(!t)return{};let r={},n=t.split(this._COMMA_SEPARATOR,-1);for(let i of n){let s=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(s.length!==2)continue;let[o,a]=s;if(o=o.trim(),a=a.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(o))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(a))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[o]=a}return r}_isValid(t){return t.length<=this._MAX_LENGTH&&this._isPrintableString(t)}_isPrintableString(t){for(let r=0;r<t.length;r++){let n=t.charAt(r);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(t){return t.length>0&&this._isValid(t)}};Ia.envDetector=new Ff});var iv=d(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.processDetector=void 0;var FD=F(),ze=At(),Uf=xr(),kf=class{async detect(t){if(typeof process!="object")return Uf.Resource.empty();let r={[ze.SemanticResourceAttributes.PROCESS_PID]:process.pid,[ze.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[ze.SemanticResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[ze.SemanticResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||"",[ze.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:process.versions.node,[ze.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"nodejs",[ze.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Node.js"};return this._getResourceAttributes(r,t)}_getResourceAttributes(t,r){return t[ze.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||t[ze.SemanticResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||t[ze.SemanticResourceAttributes.PROCESS_COMMAND]===""||t[ze.SemanticResourceAttributes.PROCESS_COMMAND_LINE]===""||t[ze.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]===""?(FD.diag.debug("ProcessDetector failed: Unable to find required process resources. "),Uf.Resource.empty()):new Uf.Resource(Object.assign({},t))}};wa.processDetector=new kf});var sv=d(kt=>{"use strict";var UD=kt&&kt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jf=kt&&kt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&UD(t,e,r)};Object.defineProperty(kt,"__esModule",{value:!0});jf(rv(),kt);jf(nv(),kt);jf(iv(),kt)});var Yi=d(it=>{"use strict";var kD=it&&it.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ki=it&&it.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&kD(t,e,r)};Object.defineProperty(it,"__esModule",{value:!0});Ki(xr(),it);Ki(xf(),it);Ki(JA(),it);Ki(tv(),it);Ki(sv(),it)});var ov=d(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.MultiSpanProcessor=void 0;var jD=ee(),qf=class{constructor(t){this._spanProcessors=t}forceFlush(){let t=[];for(let r of this._spanProcessors)t.push(r.forceFlush());return new Promise(r=>{Promise.all(t).then(()=>{r()}).catch(n=>{(0,jD.globalErrorHandler)(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(t,r){for(let n of this._spanProcessors)n.onStart(t,r)}onEnd(t){for(let r of this._spanProcessors)r.onEnd(t)}shutdown(){let t=[];for(let r of this._spanProcessors)t.push(r.shutdown());return new Promise((r,n)=>{Promise.all(t).then(()=>{r()},n)})}};Na.MultiSpanProcessor=qf});var $f=d(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.NoopSpanProcessor=void 0;var Gf=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};La.NoopSpanProcessor=Gf});var av=d(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.BatchSpanProcessorBase=void 0;var Hf=F(),Bn=ee(),Vf=class{constructor(t,r){this._exporter=t,this._finishedSpans=[];let n=(0,Bn.getEnv)();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Bn.BindOnceFuture(this._shutdown,this)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,r){}onEnd(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&Hf.TraceFlags.SAMPLED)!==0&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())}_flushAll(){return new Promise((t,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,o=i;s<o;s++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);Hf.context.with((0,Bn.suppressTracing)(Hf.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),i=>{var s;clearTimeout(n),i.code===Bn.ExportResultCode.SUCCESS?t():r((s=i.error)!==null&&s!==void 0?s:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(t=>{(0,Bn.globalErrorHandler)(t)})},this._scheduledDelayMillis),(0,Bn.unrefTimer)(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};xa.BatchSpanProcessorBase=Vf});var uv=d(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.BatchSpanProcessor=void 0;var qD=av(),Wf=class extends qD.BatchSpanProcessorBase{onShutdown(){}};Ma.BatchSpanProcessor=Wf});var cv=d(Br=>{"use strict";var GD=Br&&Br.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$D=Br&&Br.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&GD(t,e,r)};Object.defineProperty(Br,"__esModule",{value:!0});$D(uv(),Br)});var Yf=d(Fr=>{"use strict";var HD=Fr&&Fr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),VD=Fr&&Fr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&HD(t,e,r)};Object.defineProperty(Fr,"__esModule",{value:!0});VD(cv(),Fr)});var dv=d(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.BasicTracerProvider=Ur.ForceFlushState=void 0;var Fn=F(),kn=ee(),lv=Yi(),WD=Da(),YD=Pf(),KD=ov(),XD=$f(),zD=Yf(),QD=Cf(),Un;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(Un=Ur.ForceFlushState||(Ur.ForceFlushState={}));var or=class{constructor(t={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map;let n=(0,kn.merge)({},YD.DEFAULT_CONFIG,(0,QD.reconfigureLimits)(t));this.resource=(r=n.resource)!==null&&r!==void 0?r:lv.Resource.empty(),this.resource=lv.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let i=this._buildExporterFromEnv();if(i!==void 0){let s=new zD.BatchSpanProcessor(i);this.activeSpanProcessor=s}else this.activeSpanProcessor=new XD.NoopSpanProcessor}getTracer(t,r,n){let i=`${t}@${r||""}:${n?.schemaUrl||""}`;return this._tracers.has(i)||this._tracers.set(i,new WD.Tracer({name:t,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)}addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>Fn.diag.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new KD.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(t={}){Fn.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Fn.context.setGlobalContextManager(t.contextManager),t.propagator&&Fn.propagation.setGlobalPropagator(t.propagator)}forceFlush(){let t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(i=>{let s,o=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),s=Un.timeout},t);n.forceFlush().then(()=>{clearTimeout(o),s!==Un.timeout&&(s=Un.resolved,i(s))}).catch(a=>{clearTimeout(o),s=Un.error,i(a)})}));return new Promise((n,i)=>{Promise.all(r).then(s=>{let o=s.filter(a=>a!==Un.resolved);o.length>0?i(o):n()}).catch(s=>i([s]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(t){var r;return(r=or._registeredPropagators.get(t))===null||r===void 0?void 0:r()}_getSpanExporter(t){var r;return(r=or._registeredExporters.get(t))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let t=Array.from(new Set((0,kn.getEnv)().OTEL_PROPAGATORS)),n=t.map(i=>{let s=this._getPropagator(i);return s||Fn.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),s}).reduce((i,s)=>(s&&i.push(s),i),[]);if(n.length!==0)return t.length===1?n[0]:new kn.CompositePropagator({propagators:n})}_buildExporterFromEnv(){let t=(0,kn.getEnv)().OTEL_TRACES_EXPORTER;if(t==="none")return;let r=this._getSpanExporter(t);return r||Fn.diag.error(`Exporter "${t}" requested through environment variable is unavailable.`),r}};Ur.BasicTracerProvider=or;or._registeredPropagators=new Map([["tracecontext",()=>new kn.W3CTraceContextPropagator],["baggage",()=>new kn.W3CBaggagePropagator]]);or._registeredExporters=new Map});var fv=d(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.ConsoleSpanExporter=void 0;var Kf=ee(),Xf=class{export(t,r){return this._sendSpans(t,r)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:(0,Kf.hrTimeToMicroseconds)(t.startTime),duration:(0,Kf.hrTimeToMicroseconds)(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}}_sendSpans(t,r){for(let n of t)console.dir(this._exportInfo(n),{depth:3});if(r)return r({code:Kf.ExportResultCode.SUCCESS})}};Ba.ConsoleSpanExporter=Xf});var hv=d(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.InMemorySpanExporter=void 0;var pv=ee(),zf=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(t,r){if(this._stopped)return r({code:pv.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...t),setTimeout(()=>r({code:pv.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};Fa.InMemorySpanExporter=zf});var gv=d(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0})});var mv=d(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.SimpleSpanProcessor=void 0;var Qf=F(),Ua=ee(),Zf=class{constructor(t){this._exporter=t,this._shutdownOnce=new Ua.BindOnceFuture(this._shutdown,this)}forceFlush(){return Promise.resolve()}onStart(t,r){}onEnd(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&Qf.TraceFlags.SAMPLED)!==0&&Qf.context.with((0,Ua.suppressTracing)(Qf.context.active()),()=>{this._exporter.export([t],r=>{var n;r.code!==Ua.ExportResultCode.SUCCESS&&(0,Ua.globalErrorHandler)((n=r.error)!==null&&n!==void 0?n:new Error(`SimpleSpanProcessor: span export failed (status ${r})`))})})}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}};ka.SimpleSpanProcessor=Zf});var yv=d(Ev=>{"use strict";Object.defineProperty(Ev,"__esModule",{value:!0})});var Av=d(Sv=>{"use strict";Object.defineProperty(Sv,"__esModule",{value:!0})});var bv=d(vv=>{"use strict";Object.defineProperty(vv,"__esModule",{value:!0})});var Rv=d(Tv=>{"use strict";Object.defineProperty(Tv,"__esModule",{value:!0})});var Da=d(me=>{"use strict";var ZD=me&&me.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ve=me&&me.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ZD(t,e,r)};Object.defineProperty(me,"__esModule",{value:!0});Ve(qA(),me);Ve(dv(),me);Ve(Yf(),me);Ve(fv(),me);Ve(hv(),me);Ve(gv(),me);Ve(mv(),me);Ve(yv(),me);Ve($f(),me);Ve(Of(),me);Ve(Av(),me);Ve(bv(),me);Ve(Rv(),me)});var Xi=d(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.invalidTimeout=Qe.configureExporterTimeout=Qe.appendRootPathToUrlIfNeeded=Qe.appendResourcePathToUrl=Qe.parseHeaders=void 0;var Pv=F(),Ov=ee(),Cv=1e4;function JD(e={}){let t={};return Object.entries(e).forEach(([r,n])=>{typeof n<"u"?t[r]=String(n):Pv.diag.warn(`Header "${r}" has wrong value and will be ignored`)}),t}Qe.parseHeaders=JD;function eB(e,t){return e.endsWith("/")||(e=e+"/"),e+t}Qe.appendResourcePathToUrl=eB;function tB(e,t){return!e.includes(t)&&!e.endsWith("/")&&(e=e+"/"),e}Qe.appendRootPathToUrlIfNeeded=tB;function rB(e){return typeof e=="number"?e<=0?Jf(e,Cv):e:nB()}Qe.configureExporterTimeout=rB;function nB(){var e;let t=Number((e=(0,Ov.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:(0,Ov.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?Jf(t,Cv):t}function Jf(e,t){return Pv.diag.warn("Timeout must be greater than 0",e),t}Qe.invalidTimeout=Jf});var qa=d(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.OTLPExporterBase=void 0;var Iv=F(),zi=ee(),iB=Xi(),ep=class{constructor(t={}){this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new zi.BindOnceFuture(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:1/0,this.timeoutMillis=(0,iB.configureExporterTimeout)(t.timeoutMillis),this.onInit(t)}export(t,r){if(this._shutdownOnce.isCalled){r({code:zi.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:zi.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(()=>{r({code:zi.ExportResultCode.SUCCESS})}).catch(n=>{r({code:zi.ExportResultCode.FAILED,error:n})})}_export(t){return new Promise((r,n)=>{try{Iv.diag.debug("items to be sent",t),this.send(t,r,n)}catch(i){n(i)}})}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Iv.diag.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(()=>{})}};ja.OTLPExporterBase=ep});var tp=d(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.CompressionAlgorithm=void 0;var sB;(function(e){e.NONE="none",e.GZIP="gzip"})(sB=Qi.CompressionAlgorithm||(Qi.CompressionAlgorithm={}))});var $a=d(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.OTLPExporterError=void 0;var rp=class extends Error{constructor(t,r,n){super(t),this.name="OTLPExporterError",this.data=n,this.code=r}};Ga.OTLPExporterError=rp});var op=d(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.configureCompression=ar.createHttpAgent=ar.sendWithHttp=void 0;var Nv=R("url"),Lv=R("http"),xv=R("https"),oB=R("zlib"),aB=R("stream"),sp=F(),Ha=tp(),wv=ee(),np=$a(),ip;function uB(e,t,r,n,i){let s=e.timeoutMillis,o=new Nv.URL(e.url),a,u=Number(process.versions.node.split(".")[0]),c=setTimeout(()=>{a=!0,u>=14?p.destroy():p.abort()},s),l={hostname:o.hostname,port:o.port,path:o.pathname,method:"POST",headers:Object.assign({"Content-Type":r},e.headers),agent:e.agent},p=(o.protocol==="http:"?Lv.request:xv.request)(l,h=>{let g="";h.on("data",_=>g+=_),h.on("aborted",()=>{if(a){let _=new np.OTLPExporterError("Request Timeout");i(_)}}),h.on("end",()=>{if(!a){if(h.statusCode&&h.statusCode<299)sp.diag.debug(`statusCode: ${h.statusCode}`,g),n();else{let _=new np.OTLPExporterError(h.statusMessage,h.statusCode,g);i(_)}clearTimeout(c)}})});switch(p.on("error",h=>{if(a){let g=new np.OTLPExporterError("Request Timeout",h.code);i(g)}else clearTimeout(c),i(h)}),e.compression){case Ha.CompressionAlgorithm.GZIP:{ip||(ip=oB.createGzip()),p.setHeader("Content-Encoding","gzip"),cB(t).on("error",i).pipe(ip).on("error",i).pipe(p);break}default:p.end(t);break}}ar.sendWithHttp=uB;function cB(e){let t=new aB.Readable;return t.push(e),t.push(null),t}function lB(e){if(e.httpAgentOptions&&e.keepAlive===!1){sp.diag.warn("httpAgentOptions is used only when keepAlive is true");return}if(!(e.keepAlive===!1||!e.url))try{let r=new Nv.URL(e.url).protocol==="http:"?Lv.Agent:xv.Agent;return new r(Object.assign({keepAlive:!0},e.httpAgentOptions))}catch(t){sp.diag.error(`collector exporter failed to create http agent. err: ${t.message}`);return}}ar.createHttpAgent=lB;function dB(e){return e||(((0,wv.getEnv)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,wv.getEnv)().OTEL_EXPORTER_OTLP_COMPRESSION)===Ha.CompressionAlgorithm.GZIP?Ha.CompressionAlgorithm.GZIP:Ha.CompressionAlgorithm.NONE)}ar.configureCompression=dB});var Bv=d(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.OTLPExporterNodeBase=void 0;var fB=qa(),pB=Xi(),ap=op(),Mv=F(),Dv=ee(),up=class extends fB.OTLPExporterBase{constructor(t={}){super(t),this.DEFAULT_HEADERS={},t.metadata&&Mv.diag.warn("Metadata cannot be set when using http"),this.headers=Object.assign(this.DEFAULT_HEADERS,(0,pB.parseHeaders)(t.headers),Dv.baggageUtils.parseKeyPairsIntoRecord((0,Dv.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)),this.agent=(0,ap.createHttpAgent)(t),this.compression=(0,ap.configureCompression)(t.compression)}onInit(t){}send(t,r,n){if(this._shutdownOnce.isCalled){Mv.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=new Promise((a,u)=>{(0,ap.sendWithHttp)(this,JSON.stringify(i),"application/json",a,u)}).then(r,n);this._sendingPromises.push(s);let o=()=>{let a=this._sendingPromises.indexOf(s);this._sendingPromises.splice(a,1)};s.then(o,o)}onShutdown(){}};Va.OTLPExporterNodeBase=up});var Fv=d(jt=>{"use strict";var hB=jt&&jt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),cp=jt&&jt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&hB(t,e,r)};Object.defineProperty(jt,"__esModule",{value:!0});cp(Bv(),jt);cp(op(),jt);cp(tp(),jt)});var kv=d(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.sendWithXhr=jn.sendWithBeacon=void 0;var Uv=F(),lp=$a();function _B(e,t,r,n,i){if(navigator.sendBeacon(t,new Blob([e],r)))Uv.diag.debug("sendBeacon - can send",e),n();else{let s=new lp.OTLPExporterError(`sendBeacon - cannot send ${e}`);i(s)}}jn.sendWithBeacon=_B;function gB(e,t,r,n,i,s){let o,a=setTimeout(()=>{o=!0,u.abort()},n),u=new XMLHttpRequest;u.open("POST",t),Object.entries(Object.assign(Object.assign({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach(([l,f])=>{u.setRequestHeader(l,f)}),u.send(e),u.onreadystatechange=()=>{if(u.readyState===XMLHttpRequest.DONE)if(u.status>=200&&u.status<=299)clearTimeout(a),Uv.diag.debug("xhr success",e),i();else if(o){let l=new lp.OTLPExporterError("Request Timeout",u.status);s(l)}else{let l=new lp.OTLPExporterError(`Failed to export with XHR (status: ${u.status})`,u.status);clearTimeout(a),s(l)}}}jn.sendWithXhr=gB});var Gv=d(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.OTLPExporterBrowserBase=void 0;var mB=qa(),EB=Xi(),jv=kv(),yB=F(),qv=ee(),dp=class extends mB.OTLPExporterBase{constructor(t={}){super(t),this._useXHR=!1,this._useXHR=!!t.headers||typeof navigator.sendBeacon!="function",this._useXHR?this._headers=Object.assign({},(0,EB.parseHeaders)(t.headers),qv.baggageUtils.parseKeyPairsIntoRecord((0,qv.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)):this._headers={}}onInit(){window.addEventListener("unload",this.shutdown)}onShutdown(){window.removeEventListener("unload",this.shutdown)}send(t,r,n){if(this._shutdownOnce.isCalled){yB.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=JSON.stringify(i),o=new Promise((u,c)=>{this._useXHR?(0,jv.sendWithXhr)(s,this.url,this._headers,this.timeoutMillis,u,c):(0,jv.sendWithBeacon)(s,this.url,{type:"application/json"},u,c)}).then(r,n);this._sendingPromises.push(o);let a=()=>{let u=this._sendingPromises.indexOf(o);this._sendingPromises.splice(u,1)};o.then(a,a)}};Wa.OTLPExporterBrowserBase=dp});var $v=d(kr=>{"use strict";var SB=kr&&kr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),AB=kr&&kr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&SB(t,e,r)};Object.defineProperty(kr,"__esModule",{value:!0});AB(Gv(),kr)});var Hv=d(qt=>{"use strict";var vB=qt&&qt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),bB=qt&&qt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&vB(t,e,r)};Object.defineProperty(qt,"__esModule",{value:!0});qt.OTLPExporterBrowserBase=void 0;bB(Fv(),qt);var TB=$v();Object.defineProperty(qt,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return TB.OTLPExporterBrowserBase}})});var fp=d(Tt=>{"use strict";var RB=Tt&&Tt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ya=Tt&&Tt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&RB(t,e,r)};Object.defineProperty(Tt,"__esModule",{value:!0});Ya(qa(),Tt);Ya(Hv(),Tt);Ya($a(),Tt);Ya(Xi(),Tt)});var Wv=d(Vv=>{"use strict";Object.defineProperty(Vv,"__esModule",{value:!0})});var Kv=d(Yv=>{"use strict";Object.defineProperty(Yv,"__esModule",{value:!0})});var zv=d(Xv=>{"use strict";Object.defineProperty(Xv,"__esModule",{value:!0})});var Qv=d(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.ESpanKind=void 0;var OB;(function(e){e[e.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",e[e.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",e[e.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",e[e.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",e[e.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",e[e.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"})(OB=Zi.ESpanKind||(Zi.ESpanKind={}))});var Ka=d(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.bufToHex=Ze.hexToBuf=Ze.toAnyValue=Ze.toKeyValue=Ze.toAttributes=void 0;function PB(e){return Object.keys(e).map(t=>pp(t,e[t]))}Ze.toAttributes=PB;function pp(e,t){return{key:e,value:hp(t)}}Ze.toKeyValue=pp;function hp(e){let t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(hp)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(([r,n])=>pp(r,n))}}:{}}Ze.toAnyValue=hp;function CB(e){var t;let r=(t=e.match(/[\da-f]{2}/gi))===null||t===void 0?void 0:t.map(n=>parseInt(n,16));return r&&new Uint8Array(r)}Ze.hexToBuf=CB;function IB(e){return("0"+e.toString(16)).slice(-2)}function wB(e){if(!(e==null||e.length===0))return Array.from(e).map(IB).join("")}Ze.bufToHex=wB});var eb=d(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.toOtlpSpanEvent=ur.toOtlpLink=ur.sdkSpanToOtlpSpan=void 0;var _p=ee(),gp=Ka(),Ji=ee();function NB(e,t){let r=e.spanContext(),n=e.status,i=t?e.parentSpanId:e.parentSpanId!=null?Ji.hexToBase64(e.parentSpanId):void 0;return{traceId:t?r.traceId:Ji.hexToBase64(r.traceId),spanId:t?r.spanId:Ji.hexToBase64(r.spanId),parentSpanId:i,name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:(0,_p.hrTimeToNanoseconds)(e.startTime),endTimeUnixNano:(0,_p.hrTimeToNanoseconds)(e.endTime),attributes:(0,gp.toAttributes)(e.attributes),droppedAttributesCount:0,events:e.events.map(Jv),droppedEventsCount:0,status:{code:n.code,message:n.message},links:e.links.map(s=>Zv(s,t)),droppedLinksCount:0}}ur.sdkSpanToOtlpSpan=NB;function Zv(e,t){return{attributes:e.attributes?(0,gp.toAttributes)(e.attributes):[],spanId:t?e.context.spanId:Ji.hexToBase64(e.context.spanId),traceId:t?e.context.traceId:Ji.hexToBase64(e.context.traceId),droppedAttributesCount:0}}ur.toOtlpLink=Zv;function Jv(e){return{attributes:e.attributes?(0,gp.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:(0,_p.hrTimeToNanoseconds)(e.time),droppedAttributesCount:0}}ur.toOtlpSpanEvent=Jv});var tb=d(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.createExportTraceServiceRequest=void 0;var LB=Ka(),xB=eb();function MB(e,t){return{resourceSpans:BB(e,t)}}Xa.createExportTraceServiceRequest=MB;function DB(e){let t=new Map;for(let r of e){let n=t.get(r.resource);n||(n=new Map,t.set(r.resource,n));let i=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`,s=n.get(i);s||(s=[],n.set(i,s)),s.push(r)}return t}function BB(e,t){let r=DB(e),n=[],i=r.entries(),s=i.next();for(;!s.done;){let[o,a]=s.value,u=[],c=a.values(),l=c.next();for(;!l.done;){let p=l.value;if(p.length>0){let{name:h,version:g,schemaUrl:_}=p[0].instrumentationLibrary,v=p.map(A=>(0,xB.sdkSpanToOtlpSpan)(A,t));u.push({scope:{name:h,version:g},spans:v,schemaUrl:_})}l=c.next()}let f={resource:{attributes:(0,LB.toAttributes)(o.attributes),droppedAttributesCount:0},scopeSpans:u,schemaUrl:void 0};n.push(f),s=i.next()}return n}});var mp=d(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=q.NOOP_OBSERVABLE_GAUGE_METRIC=q.NOOP_OBSERVABLE_COUNTER_METRIC=q.NOOP_UP_DOWN_COUNTER_METRIC=q.NOOP_HISTOGRAM_METRIC=q.NOOP_COUNTER_METRIC=q.NOOP_METER=q.NoopObservableUpDownCounterMetric=q.NoopObservableGaugeMetric=q.NoopObservableCounterMetric=q.NoopObservableMetric=q.NoopHistogramMetric=q.NoopUpDownCounterMetric=q.NoopCounterMetric=q.NoopMetric=q.NoopMeter=void 0;var za=class{constructor(){}createHistogram(t,r){return q.NOOP_HISTOGRAM_METRIC}createCounter(t,r){return q.NOOP_COUNTER_METRIC}createUpDownCounter(t,r){return q.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(t,r){return q.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(t,r){return q.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(t,r){return q.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(t,r){}removeBatchObservableCallback(t){}};q.NoopMeter=za;var qn=class{};q.NoopMetric=qn;var Qa=class extends qn{add(t,r){}};q.NoopCounterMetric=Qa;var Za=class extends qn{add(t,r){}};q.NoopUpDownCounterMetric=Za;var Ja=class extends qn{record(t,r){}};q.NoopHistogramMetric=Ja;var Gn=class{addCallback(t){}removeCallback(t){}};q.NoopObservableMetric=Gn;var eu=class extends Gn{};q.NoopObservableCounterMetric=eu;var tu=class extends Gn{};q.NoopObservableGaugeMetric=tu;var ru=class extends Gn{};q.NoopObservableUpDownCounterMetric=ru;q.NOOP_METER=new za;q.NOOP_COUNTER_METRIC=new Qa;q.NOOP_HISTOGRAM_METRIC=new Ja;q.NOOP_UP_DOWN_COUNTER_METRIC=new Za;q.NOOP_OBSERVABLE_COUNTER_METRIC=new eu;q.NOOP_OBSERVABLE_GAUGE_METRIC=new tu;q.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new ru});var Ep=d($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.NOOP_METER_PROVIDER=$n.NoopMeterProvider=void 0;var FB=mp(),nu=class{getMeter(t,r,n){return FB.NOOP_METER}};$n.NoopMeterProvider=nu;$n.NOOP_METER_PROVIDER=new nu});var nb=d(rb=>{"use strict";Object.defineProperty(rb,"__esModule",{value:!0})});var sb=d(ib=>{"use strict";Object.defineProperty(ib,"__esModule",{value:!0})});var ob=d(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.ValueType=void 0;var UB;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(UB=es.ValueType||(es.ValueType={}))});var ub=d(ab=>{"use strict";Object.defineProperty(ab,"__esModule",{value:!0})});var cb=d(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu._globalThis=void 0;iu._globalThis=typeof globalThis=="object"?globalThis:global});var lb=d(jr=>{"use strict";var kB=jr&&jr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jB=jr&&jr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&kB(t,e,r)};Object.defineProperty(jr,"__esModule",{value:!0});jB(cb(),jr)});var db=d(qr=>{"use strict";var qB=qr&&qr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),GB=qr&&qr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qB(t,e,r)};Object.defineProperty(qr,"__esModule",{value:!0});GB(lb(),qr)});var fb=d(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.API_BACKWARDS_COMPATIBILITY_VERSION=Rt.makeGetter=Rt._global=Rt.GLOBAL_METRICS_API_KEY=void 0;var $B=db();Rt.GLOBAL_METRICS_API_KEY=Symbol.for("io.opentelemetry.js.api.metrics");Rt._global=$B._globalThis;function HB(e,t,r){return n=>n===e?t:r}Rt.makeGetter=HB;Rt.API_BACKWARDS_COMPATIBILITY_VERSION=4});var hb=d(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.MetricsAPI=void 0;var pb=Ep(),Je=fb(),ts=class{constructor(){}static getInstance(){return this._instance||(this._instance=new ts),this._instance}setGlobalMeterProvider(t){return Je._global[Je.GLOBAL_METRICS_API_KEY]?this.getMeterProvider():(Je._global[Je.GLOBAL_METRICS_API_KEY]=(0,Je.makeGetter)(Je.API_BACKWARDS_COMPATIBILITY_VERSION,t,pb.NOOP_METER_PROVIDER),t)}getMeterProvider(){var t,r;return(r=(t=Je._global[Je.GLOBAL_METRICS_API_KEY])===null||t===void 0?void 0:t.call(Je._global,Je.API_BACKWARDS_COMPATIBILITY_VERSION))!==null&&r!==void 0?r:pb.NOOP_METER_PROVIDER}getMeter(t,r,n){return this.getMeterProvider().getMeter(t,r,n)}disable(){delete Je._global[Je.GLOBAL_METRICS_API_KEY]}};su.MetricsAPI=ts});var Vn=d(Fe=>{"use strict";var VB=Fe&&Fe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Hn=Fe&&Fe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&VB(t,e,r)};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.metrics=void 0;Hn(mp(),Fe);Hn(Ep(),Fe);Hn(nb(),Fe);Hn(sb(),Fe);Hn(ob(),Fe);Hn(ub(),Fe);var WB=hb();Fe.metrics=WB.MetricsAPI.getInstance()});var ou=d(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.AggregationTemporality=void 0;var YB;(function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"})(YB=rs.AggregationTemporality||(rs.AggregationTemporality={}))});var is=d(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.DataPointType=void 0;var KB;(function(e){e[e.SINGULAR=0]="SINGULAR",e[e.HISTOGRAM=1]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=2]="EXPONENTIAL_HISTOGRAM"})(KB=ns.DataPointType||(ns.DataPointType={}))});var _b=d(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.ConsoleMetricExporter=void 0;var XB=ou(),zB=ee(),yp=class{constructor(t){this._shutdown=!0,this._aggregationTemporality=t??XB.AggregationTemporality.CUMULATIVE}export(t,r){return r({code:zB.ExportResultCode.FAILED,error:new Error("Method not implemented")})}selectAggregationTemporality(t){return this._aggregationTemporality}async forceFlush(){}async shutdown(){this._shutdown=!0}};au.ConsoleMetricExporter=yp});var mb=d(gb=>{"use strict";Object.defineProperty(gb,"__esModule",{value:!0})});var Gt=d(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.setEquals=fe.FlatMap=fe.isPromiseAllSettledRejectionResult=fe.PromiseAllSettled=fe.callWithTimeout=fe.TimeoutError=fe.instrumentationScopeId=fe.hashAttributes=fe.isNotNullish=void 0;function QB(e){return e!=null}fe.isNotNullish=QB;function ZB(e){let t=Object.keys(e);return t.length===0?"":(t=t.sort(),t.reduce((r,n)=>(r.length>2&&(r+=","),r+=n+":"+e[n]),"|#"))}fe.hashAttributes=ZB;function JB(e){var t,r;return`${e.name}:${(t=e.version)!==null&&t!==void 0?t:""}:${(r=e.schemaUrl)!==null&&r!==void 0?r:""}`}fe.instrumentationScopeId=JB;var Wn=class extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Wn.prototype)}};fe.TimeoutError=Wn;function eF(e,t){let r,n=new Promise(function(s,o){r=setTimeout(function(){o(new Wn("Operation timed out."))},t)});return Promise.race([e,n]).then(i=>(clearTimeout(r),i),i=>{throw clearTimeout(r),i})}fe.callWithTimeout=eF;async function tF(e){return Promise.all(e.map(async t=>{try{return{status:"fulfilled",value:await t}}catch(r){return{status:"rejected",reason:r}}}))}fe.PromiseAllSettled=tF;function rF(e){return e.status==="rejected"}fe.isPromiseAllSettledRejectionResult=rF;function nF(e,t){let r=[];return e.forEach(n=>{r.push(...t(n))}),r}fe.FlatMap=nF;function iF(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}fe.setEquals=iF});var Ap=d(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.MetricReader=void 0;var Eb=F(),yb=Gt(),Sp=class{constructor(){this._shutdown=!1}setMetricProducer(t){if(this._metricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._metricProducer=t,this.onInitialized()}onInitialized(){}async collect(t){if(this._metricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return this._metricProducer.collect({timeoutMillis:t?.timeoutMillis})}async shutdown(t){if(this._shutdown){Eb.diag.error("Cannot call shutdown twice.");return}t?.timeoutMillis==null?await this.onShutdown():await(0,yb.callWithTimeout)(this.onShutdown(),t.timeoutMillis),this._shutdown=!0}async forceFlush(t){if(this._shutdown){Eb.diag.warn("Cannot forceFlush on already shutdown MetricReader.");return}if(t?.timeoutMillis==null){await this.onForceFlush();return}await(0,yb.callWithTimeout)(this.onForceFlush(),t.timeoutMillis)}};uu.MetricReader=Sp});var bb=d(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.PeriodicExportingMetricReader=void 0;var Sb=F(),Ab=ee(),sF=Ap(),vb=Gt(),vp=class extends sF.MetricReader{constructor(t){var r,n;if(super(),t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=(r=t.exportIntervalMillis)!==null&&r!==void 0?r:6e4,this._exportTimeout=(n=t.exportTimeoutMillis)!==null&&n!==void 0?n:3e4,this._exporter=t.exporter}async _runOnce(){let{resourceMetrics:t,errors:r}=await this.collect({});return r.length>0&&Sb.diag.error("PeriodicExportingMetricReader: metrics collection errors",...r),new Promise((n,i)=>{this._exporter.export(t,s=>{var o;s.code!==Ab.ExportResultCode.SUCCESS?i((o=s.error)!==null&&o!==void 0?o:new Error(`PeriodicExportingMetricReader: metrics export failed (error ${s.error})`)):n()})})}onInitialized(){this._interval=setInterval(async()=>{try{await(0,vb.callWithTimeout)(this._runOnce(),this._exportTimeout)}catch(t){if(t instanceof vb.TimeoutError){Sb.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);return}(0,Ab.globalErrorHandler)(t)}},this._exportInterval)}async onForceFlush(){await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this._exporter.shutdown()}selectAggregationTemporality(t){return this._exporter.selectAggregationTemporality(t)}};cu.PeriodicExportingMetricReader=vp});var Gr=d(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.isDescriptorCompatibleWith=st.createInstrumentDescriptorWithView=st.createInstrumentDescriptor=st.InstrumentType=void 0;var oF=Vn(),aF;(function(e){e.COUNTER="COUNTER",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(aF=st.InstrumentType||(st.InstrumentType={}));function uF(e,t,r){var n,i,s;return{name:e,type:t,description:(n=r?.description)!==null&&n!==void 0?n:"",unit:(i=r?.unit)!==null&&i!==void 0?i:"",valueType:(s=r?.valueType)!==null&&s!==void 0?s:oF.ValueType.DOUBLE}}st.createInstrumentDescriptor=uF;function cF(e,t){var r,n;return{name:(r=e.name)!==null&&r!==void 0?r:t.name,description:(n=e.description)!==null&&n!==void 0?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType}}st.createInstrumentDescriptorWithView=cF;function lF(e,t){return e.name===t.name&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}st.isDescriptorCompatibleWith=lF});var du=d(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.isObservableInstrument=pe.ObservableUpDownCounterInstrument=pe.ObservableGaugeInstrument=pe.ObservableCounterInstrument=pe.ObservableInstrument=pe.HistogramInstrument=pe.CounterInstrument=pe.UpDownCounterInstrument=pe.SyncInstrument=void 0;var lu=F(),dF=Vn(),Yn=class{constructor(t,r){this._writableMetricStorage=t,this._descriptor=r}_record(t,r={},n=lu.context.active()){this._descriptor.valueType===dF.ValueType.INT&&!Number.isInteger(t)&&(lu.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t)),this._writableMetricStorage.record(t,r,n)}};pe.SyncInstrument=Yn;var bp=class extends Yn{add(t,r,n){this._record(t,r,n)}};pe.UpDownCounterInstrument=bp;var Tp=class extends Yn{add(t,r,n){if(t<0){lu.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};pe.CounterInstrument=Tp;var Rp=class extends Yn{record(t,r,n){if(t<0){lu.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};pe.HistogramInstrument=Rp;var $r=class{constructor(t,r,n){this._observableRegistry=n,this._descriptor=t,this._metricStorages=r}addCallback(t){this._observableRegistry.addCallback(t,this)}removeCallback(t){this._observableRegistry.removeCallback(t,this)}};pe.ObservableInstrument=$r;var Op=class extends $r{};pe.ObservableCounterInstrument=Op;var Pp=class extends $r{};pe.ObservableGaugeInstrument=Pp;var Cp=class extends $r{};pe.ObservableUpDownCounterInstrument=Cp;function fF(e){return e instanceof $r}pe.isObservableInstrument=fF});var wp=d(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.Meter=void 0;var et=Gr(),Kn=du(),Ip=class{constructor(t){this._meterSharedState=t}createHistogram(t,r){let n=(0,et.createInstrumentDescriptor)(t,et.InstrumentType.HISTOGRAM,r),i=this._meterSharedState.registerMetricStorage(n);return new Kn.HistogramInstrument(i,n)}createCounter(t,r){let n=(0,et.createInstrumentDescriptor)(t,et.InstrumentType.COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new Kn.CounterInstrument(i,n)}createUpDownCounter(t,r){let n=(0,et.createInstrumentDescriptor)(t,et.InstrumentType.UP_DOWN_COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new Kn.UpDownCounterInstrument(i,n)}createObservableGauge(t,r){let n=(0,et.createInstrumentDescriptor)(t,et.InstrumentType.OBSERVABLE_GAUGE,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new Kn.ObservableGaugeInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableCounter(t,r){let n=(0,et.createInstrumentDescriptor)(t,et.InstrumentType.OBSERVABLE_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new Kn.ObservableCounterInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(t,r){let n=(0,et.createInstrumentDescriptor)(t,et.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new Kn.ObservableUpDownCounterInstrument(n,i,this._meterSharedState.observableRegistry)}addBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.addBatchCallback(t,r)}removeBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.removeBatchCallback(t,r)}};fu.Meter=Ip});var pu=d(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.ExactPredicate=Xn.PatternPredicate=void 0;var pF=/[\^$\\.+?()[\]{}|]/g,ss=class{constructor(t){t==="*"?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(ss.escapePattern(t)))}match(t){return this._matchAll?!0:this._regexp.test(t)}static escapePattern(t){return`^${t.replace(pF,"\\$&").replace("*",".*")}$`}static hasWildcard(t){return t.includes("*")}};Xn.PatternPredicate=ss;var Np=class{constructor(t){this._matchAll=t===void 0,this._pattern=t}match(t){return!!(this._matchAll||t===this._pattern)}};Xn.ExactPredicate=Np});var xp=d(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.InstrumentSelector=void 0;var hF=pu(),Lp=class{constructor(t){var r;this._nameFilter=new hF.PatternPredicate((r=t?.name)!==null&&r!==void 0?r:"*"),this._type=t?.type}getType(){return this._type}getNameFilter(){return this._nameFilter}};hu.InstrumentSelector=Lp});var Bp=d(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.MeterSelector=void 0;var Mp=pu(),Dp=class{constructor(t){this._nameFilter=new Mp.ExactPredicate(t?.name),this._versionFilter=new Mp.ExactPredicate(t?.version),this._schemaUrlFilter=new Mp.ExactPredicate(t?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}};_u.MeterSelector=Dp});var as=d(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.AggregatorKind=void 0;var _F;(function(e){e[e.DROP=0]="DROP",e[e.SUM=1]="SUM",e[e.LAST_VALUE=2]="LAST_VALUE",e[e.HISTOGRAM=3]="HISTOGRAM"})(_F=os.AggregatorKind||(os.AggregatorKind={}))});var Tb=d(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.DropAggregator=void 0;var gF=as(),Fp=class{constructor(){this.kind=gF.AggregatorKind.DROP}createAccumulation(){}merge(t,r){}diff(t,r){}toMetricData(t,r,n,i,s){}};gu.DropAggregator=Fp});var Rb=d(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.HistogramAggregator=Qn.HistogramAccumulation=void 0;var mF=as(),EF=is();function yF(e){let t=e.map(()=>0);return t.push(0),{buckets:{boundaries:e,counts:t},sum:0,count:0}}var zn=class{constructor(t,r=yF(t)){this._boundaries=t,this._current=r}record(t){this._current.count+=1,this._current.sum+=t;for(let r=0;r<this._boundaries.length;r++)if(t<this._boundaries[r]){this._current.buckets.counts[r]+=1;return}this._current.buckets.counts[this._boundaries.length]+=1}toPointValue(){return this._current}};Qn.HistogramAccumulation=zn;var Up=class{constructor(t){this._boundaries=t,this.kind=mF.AggregatorKind.HISTOGRAM}createAccumulation(){return new zn(this._boundaries)}merge(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let u=0;u<s.length;u++)a[u]=s[u]+o[u];return new zn(n.buckets.boundaries,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:n.count+i.count,sum:n.sum+i.sum})}diff(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let u=0;u<s.length;u++)a[u]=o[u]-s[u];return new zn(n.buckets.boundaries,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:i.count-n.count,sum:i.sum-n.sum})}toMetricData(t,r,n,i,s){return{descriptor:t,aggregationTemporality:r,dataPointType:EF.DataPointType.HISTOGRAM,dataPoints:n.map(([o,a])=>({attributes:o,startTime:i,endTime:s,value:a.toPointValue()}))}}};Qn.HistogramAggregator=Up});var Ob=d(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.LastValueAggregator=Jn.LastValueAccumulation=void 0;var SF=as(),us=ee(),AF=is(),Zn=class{constructor(t=0,r=[0,0]){this._current=t,this.sampleTime=r}record(t){this._current=t,this.sampleTime=(0,us.hrTime)()}toPointValue(){return this._current}};Jn.LastValueAccumulation=Zn;var kp=class{constructor(){this.kind=SF.AggregatorKind.LAST_VALUE}createAccumulation(){return new Zn}merge(t,r){let n=(0,us.hrTimeToMicroseconds)(r.sampleTime)>=(0,us.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new Zn(n.toPointValue(),n.sampleTime)}diff(t,r){let n=(0,us.hrTimeToMicroseconds)(r.sampleTime)>=(0,us.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new Zn(n.toPointValue(),n.sampleTime)}toMetricData(t,r,n,i,s){return{descriptor:t,aggregationTemporality:r,dataPointType:AF.DataPointType.SINGULAR,dataPoints:n.map(([o,a])=>({attributes:o,startTime:i,endTime:s,value:a.toPointValue()}))}}};Jn.LastValueAggregator=kp});var Pb=d(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.SumAggregator=ti.SumAccumulation=void 0;var vF=as(),bF=is(),ei=class{constructor(t=0){this._current=t}record(t){this._current+=t}toPointValue(){return this._current}};ti.SumAccumulation=ei;var jp=class{constructor(){this.kind=vF.AggregatorKind.SUM}createAccumulation(){return new ei}merge(t,r){return new ei(t.toPointValue()+r.toPointValue())}diff(t,r){return new ei(r.toPointValue()-t.toPointValue())}toMetricData(t,r,n,i,s){return{descriptor:t,aggregationTemporality:r,dataPointType:bF.DataPointType.SINGULAR,dataPoints:n.map(([o,a])=>({attributes:o,startTime:i,endTime:s,value:a.toPointValue()}))}}};ti.SumAggregator=jp});var Cb=d(Ot=>{"use strict";var TF=Ot&&Ot.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mu=Ot&&Ot.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&TF(t,e,r)};Object.defineProperty(Ot,"__esModule",{value:!0});mu(Tb(),Ot);mu(Rb(),Ot);mu(Ob(),Ot);mu(Pb(),Ot)});var Gp=d(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.DefaultAggregation=Pe.ExplicitBucketHistogramAggregation=Pe.HistogramAggregation=Pe.LastValueAggregation=Pe.SumAggregation=Pe.DropAggregation=Pe.Aggregation=void 0;var RF=F(),cs=Cb(),ri=Gr(),$t=class{static Drop(){return Ib}static Sum(){return wb}static LastValue(){return Nb}static Histogram(){return Lb}static Default(){return OF}};Pe.Aggregation=$t;var Hr=class extends $t{createAggregator(t){return Hr.DEFAULT_INSTANCE}};Pe.DropAggregation=Hr;Hr.DEFAULT_INSTANCE=new cs.DropAggregator;var Vr=class extends $t{createAggregator(t){return Vr.DEFAULT_INSTANCE}};Pe.SumAggregation=Vr;Vr.DEFAULT_INSTANCE=new cs.SumAggregator;var Wr=class extends $t{createAggregator(t){return Wr.DEFAULT_INSTANCE}};Pe.LastValueAggregation=Wr;Wr.DEFAULT_INSTANCE=new cs.LastValueAggregator;var Yr=class extends $t{createAggregator(t){return Yr.DEFAULT_INSTANCE}};Pe.HistogramAggregation=Yr;Yr.DEFAULT_INSTANCE=new cs.HistogramAggregator([0,5,10,25,50,75,100,250,500,1e3]);var qp=class extends $t{constructor(t){if(super(),t===void 0||t.length===0)throw new Error("HistogramAggregator should be created with boundaries.");t=t.concat(),t=t.sort((i,s)=>i-s);let r=t.lastIndexOf(-1/0),n=t.indexOf(1/0);n===-1&&(n=void 0),this._boundaries=t.slice(r+1,n)}createAggregator(t){return new cs.HistogramAggregator(this._boundaries)}};Pe.ExplicitBucketHistogramAggregation=qp;var Eu=class extends $t{_resolve(t){switch(t.type){case ri.InstrumentType.COUNTER:case ri.InstrumentType.UP_DOWN_COUNTER:case ri.InstrumentType.OBSERVABLE_COUNTER:case ri.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return wb;case ri.InstrumentType.OBSERVABLE_GAUGE:return Nb;case ri.InstrumentType.HISTOGRAM:return Lb}return RF.diag.warn(`Unable to recognize instrument type: ${t.type}`),Ib}createAggregator(t){return this._resolve(t).createAggregator(t)}};Pe.DefaultAggregation=Eu;var Ib=new Hr,wb=new Vr,Nb=new Wr,Lb=new Yr,OF=new Eu});var Hp=d(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.FilteringAttributesProcessor=cr.NoopAttributesProcessor=cr.AttributesProcessor=void 0;var ls=class{static Noop(){return PF}};cr.AttributesProcessor=ls;var yu=class extends ls{process(t,r){return t}};cr.NoopAttributesProcessor=yu;var $p=class extends ls{constructor(t){super(),this._allowedAttributeNames=t}process(t,r){let n={};return Object.keys(t).filter(i=>this._allowedAttributeNames.includes(i)).forEach(i=>n[i]=t[i]),n}};cr.FilteringAttributesProcessor=$p;var PF=new yu});var Wp=d(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.View=void 0;var CF=Gp(),IF=Hp(),Vp=class{constructor(t){var r,n;this.name=t?.name,this.description=t?.description,this.aggregation=(r=t?.aggregation)!==null&&r!==void 0?r:CF.Aggregation.Default(),this.attributesProcessor=(n=t?.attributesProcessor)!==null&&n!==void 0?n:IF.AttributesProcessor.Noop()}};Su.View=Vp});var xb=d(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.ViewRegistry=void 0;var wF=xp(),NF=Bp(),LF=Wp(),ni=class{constructor(){this._registeredViews=[]}addView(t,r=new wF.InstrumentSelector,n=new NF.MeterSelector){this._registeredViews.push({instrumentSelector:r,meterSelector:n,view:t})}findViews(t,r){let n=this._registeredViews.filter(i=>this._matchInstrument(i.instrumentSelector,t)&&this._matchMeter(i.meterSelector,r)).map(i=>i.view);return n.length===0?[ni.DEFAULT_VIEW]:n}_matchInstrument(t,r){return(t.getType()===void 0||r.type===t.getType())&&t.getNameFilter().match(r.name)}_matchMeter(t,r){return t.getNameFilter().match(r.name)&&(r.version===void 0||t.getVersionFilter().match(r.version))&&(r.schemaUrl===void 0||t.getSchemaUrlFilter().match(r.schemaUrl))}};Au.ViewRegistry=ni;ni.DEFAULT_VIEW=new LF.View});var Kp=d(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.MetricStorage=void 0;var xF=Gr(),Yp=class{constructor(t){this._instrumentDescriptor=t}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(t){this._instrumentDescriptor=(0,xF.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit})}};vu.MetricStorage=Yp});var ds=d(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.AttributeHashMap=ii.HashMap=void 0;var MF=Gt(),bu=class{constructor(t){this._hash=t,this._valueMap=new Map,this._keyMap=new Map}get(t,r){return r??(r=this._hash(t)),this._valueMap.get(r)}getOrDefault(t,r){let n=this._hash(t);if(this._valueMap.has(n))return this._valueMap.get(n);let i=r();return this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,i),i}set(t,r,n){n??(n=this._hash(t)),this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,r)}has(t,r){return r??(r=this._hash(t)),this._valueMap.has(r)}*entries(){let t=this._valueMap.entries(),r=t.next();for(;r.done!==!0;)yield[this._keyMap.get(r.value[0]),r.value[1],r.value[0]],r=t.next()}get size(){return this._valueMap.size}};ii.HashMap=bu;var Xp=class extends bu{constructor(){super(MF.hashAttributes)}};ii.AttributeHashMap=Xp});var Zp=d(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.DeltaMetricProcessor=void 0;var zp=ds(),Qp=class{constructor(t){this._aggregator=t,this._activeCollectionStorage=new zp.AttributeHashMap,this._cumulativeMemoStorage=new zp.AttributeHashMap}bind(t){return this._activeCollectionStorage.getOrDefault(t,()=>this._aggregator.createAccumulation())}record(t,r,n){let i=this.bind(r);i?.record(t)}batchCumulate(t){Array.from(t.entries()).forEach(([r,n,i])=>{let s=this._aggregator.createAccumulation();if(s?.record(n),this._cumulativeMemoStorage.has(r,i)){let o=this._cumulativeMemoStorage.get(r,i);s=this._aggregator.diff(o,s)}this._cumulativeMemoStorage.set(r,s,i),this._activeCollectionStorage.set(r,s,i)})}collect(){let t=this._activeCollectionStorage;return this._activeCollectionStorage=new zp.AttributeHashMap,t}};Tu.DeltaMetricProcessor=Qp});var Jp=d(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.TemporalMetricProcessor=void 0;var Mb=ou(),DF=ds(),si=class{constructor(t){this._aggregator=t,this._unreportedAccumulations=new Map,this._reportHistory=new Map}buildMetrics(t,r,n,i,s,o){let a=s;this._stashAccumulations(r,i);let u=this._getMergedUnreportedAccumulations(t),c=u,l;if(this._reportHistory.has(t)){let f=this._reportHistory.get(t);a=f.collectionTime,l=f.aggregationTemporality,l===Mb.AggregationTemporality.CUMULATIVE&&(c=si.merge(f.accumulations,u,this._aggregator))}else l=t.selectAggregationTemporality(n.type);return this._reportHistory.set(t,{accumulations:c,collectionTime:o,aggregationTemporality:l}),this._aggregator.toMetricData(n,l,BF(c),l===Mb.AggregationTemporality.CUMULATIVE?s:a,o)}_stashAccumulations(t,r){t.forEach(n=>{let i=this._unreportedAccumulations.get(n);i===void 0&&(i=[],this._unreportedAccumulations.set(n,i)),i.push(r)})}_getMergedUnreportedAccumulations(t){let r=new DF.AttributeHashMap,n=this._unreportedAccumulations.get(t);if(this._unreportedAccumulations.set(t,[]),n===void 0)return r;for(let i of n)r=si.merge(r,i,this._aggregator);return r}static merge(t,r,n){var i;let s=t,o=r.entries(),a=o.next();for(;a.done!==!0;){let[u,c,l]=a.value,f=(i=t.get(u,l))!==null&&i!==void 0?i:n.createAccumulation();s.set(u,n.merge(f,c),l),a=o.next()}return s}};Ru.TemporalMetricProcessor=si;function BF(e){return Array.from(e.entries())}});var Db=d(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.AsyncMetricStorage=void 0;var FF=Kp(),UF=Zp(),kF=Jp(),jF=ds(),eh=class extends FF.MetricStorage{constructor(t,r,n){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new UF.DeltaMetricProcessor(r),this._temporalMetricStorage=new kF.TemporalMetricProcessor(r)}record(t){let r=new jF.AttributeHashMap;Array.from(t.entries()).forEach(([n,i])=>{r.set(this._attributesProcessor.process(n),i)}),this._deltaMetricStorage.batchCumulate(r)}collect(t,r,n,i){let s=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,r,this._instrumentDescriptor,s,n,i)}};Ou.AsyncMetricStorage=eh});var jb=d(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.getConflictResolutionRecipe=Ue.getDescriptionResolutionRecipe=Ue.getTypeConflictResolutionRecipe=Ue.getUnitConflictResolutionRecipe=Ue.getValueTypeConflictResolutionRecipe=Ue.getIncompatibilityDetails=void 0;function qF(e,t){let r="";return e.unit!==t.unit&&(r+=`	- Unit '${e.unit}' does not match '${t.unit}'
`),e.type!==t.type&&(r+=`	- Type '${e.type}' does not match '${t.type}'
`),e.valueType!==t.valueType&&(r+=`	- Value Type '${e.valueType}' does not match '${t.valueType}'
`),e.description!==t.description&&(r+=`	- Description '${e.description}' does not match '${t.description}'
`),r}Ue.getIncompatibilityDetails=qF;function Bb(e,t){return`	- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}Ue.getValueTypeConflictResolutionRecipe=Bb;function Fb(e,t){return`	- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}Ue.getUnitConflictResolutionRecipe=Fb;function Ub(e,t){let r={name:t.name,type:t.type},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}Ue.getTypeConflictResolutionRecipe=Ub;function kb(e,t){let r={name:t.name,type:t.type},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'
    	- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}
    	- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}Ue.getDescriptionResolutionRecipe=kb;function GF(e,t){return e.valueType!==t.valueType?Bb(e,t):e.unit!==t.unit?Fb(e,t):e.type!==t.type?Ub(e,t):e.description!==t.description?kb(e,t):""}Ue.getConflictResolutionRecipe=GF});var Gb=d(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.MetricStorageRegistry=void 0;var $F=Gr(),qb=F(),Pu=jb(),fs=class{constructor(){this._metricStorageRegistry=new Map}static create(){return new fs}getStorages(){let t=[];for(let r of this._metricStorageRegistry.values())t=t.concat(r);return t}register(t){let r=t.getInstrumentDescriptor(),n=this._metricStorageRegistry.get(r.name);if(n===void 0)return this._metricStorageRegistry.set(r.name,[t]),t;let i=null;for(let s of n){let o=s.getInstrumentDescriptor();(0,$F.isDescriptorCompatibleWith)(o,r)?(o.description!==r.description&&(r.description.length>o.description.length&&s.updateDescription(r.description),qb.diag.warn("A view or instrument with the name ",r.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,(0,Pu.getIncompatibilityDetails)(o,r),`The longer description will be used.
To resolve the conflict:`,(0,Pu.getConflictResolutionRecipe)(o,r))),i=s):qb.diag.warn("A view or instrument with the name ",r.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,(0,Pu.getIncompatibilityDetails)(o,r),`To resolve the conflict:
`,(0,Pu.getConflictResolutionRecipe)(o,r))}return i??(n.push(t),t)}};Cu.MetricStorageRegistry=fs});var $b=d(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.MultiMetricStorage=void 0;var th=class{constructor(t){this._backingStorages=t}record(t,r,n){this._backingStorages.forEach(i=>{i.record(t,r,n)})}};Iu.MultiMetricStorage=th});var ih=d(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.BatchObservableResultImpl=oi.ObservableResultImpl=void 0;var Hb=F(),Vb=Vn(),Wb=ds(),HF=du(),rh=class{constructor(t){this._descriptor=t,this._buffer=new Wb.AttributeHashMap}observe(t,r={}){this._descriptor.valueType===Vb.ValueType.INT&&!Number.isInteger(t)&&(Hb.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t)),this._buffer.set(r,t)}};oi.ObservableResultImpl=rh;var nh=class{constructor(){this._buffer=new Map}observe(t,r,n={}){if(!(0,HF.isObservableInstrument)(t))return;let i=this._buffer.get(t);i==null&&(i=new Wb.AttributeHashMap,this._buffer.set(t,i)),t._descriptor.valueType===Vb.ValueType.INT&&!Number.isInteger(r)&&(Hb.diag.warn(`INT value type cannot accept a floating-point value for ${t._descriptor.name}, ignoring the fractional digits.`),r=Math.trunc(r)),i.set(n,r)}};oi.BatchObservableResultImpl=nh});var Xb=d(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.ObservableRegistry=void 0;var VF=F(),Yb=du(),Kb=ih(),ps=Gt(),sh=class{constructor(){this._callbacks=[],this._batchCallbacks=[]}addCallback(t,r){this._findCallback(t,r)>=0||this._callbacks.push({callback:t,instrument:r})}removeCallback(t,r){let n=this._findCallback(t,r);n<0||this._callbacks.splice(n,1)}addBatchCallback(t,r){let n=new Set(r.filter(Yb.isObservableInstrument));if(n.size===0){VF.diag.error("BatchObservableCallback is not associated with valid instruments",r);return}this._findBatchCallback(t,n)>=0||this._batchCallbacks.push({callback:t,instruments:n})}removeBatchCallback(t,r){let n=new Set(r.filter(Yb.isObservableInstrument)),i=this._findBatchCallback(t,n);i<0||this._batchCallbacks.splice(i,1)}async observe(t){let r=this._observeCallbacks(t),n=this._observeBatchCallbacks(t);return(await(0,ps.PromiseAllSettled)([...r,...n])).filter(ps.isPromiseAllSettledRejectionResult).map(o=>o.reason)}_observeCallbacks(t){return this._callbacks.map(async({callback:r,instrument:n})=>{let i=new Kb.ObservableResultImpl(n._descriptor),s=Promise.resolve(r(i));t!=null&&(s=(0,ps.callWithTimeout)(s,t)),await s,n._metricStorages.forEach(o=>{o.record(i._buffer)})})}_observeBatchCallbacks(t){return this._batchCallbacks.map(async({callback:r,instruments:n})=>{let i=new Kb.BatchObservableResultImpl,s=Promise.resolve(r(i));t!=null&&(s=(0,ps.callWithTimeout)(s,t)),await s,n.forEach(o=>{let a=i._buffer.get(o);a!=null&&o._metricStorages.forEach(u=>{u.record(a)})})})}_findCallback(t,r){return this._callbacks.findIndex(n=>n.callback===t&&n.instrument===r)}_findBatchCallback(t,r){return this._batchCallbacks.findIndex(n=>n.callback===t&&(0,ps.setEquals)(n.instruments,r))}};wu.ObservableRegistry=sh});var zb=d(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.SyncMetricStorage=void 0;var WF=Kp(),YF=Zp(),KF=Jp(),oh=class extends WF.MetricStorage{constructor(t,r,n){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new YF.DeltaMetricProcessor(r),this._temporalMetricStorage=new KF.TemporalMetricProcessor(r)}record(t,r,n){r=this._attributesProcessor.process(r,n),this._deltaMetricStorage.record(t,r,n)}collect(t,r,n,i){let s=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,r,this._instrumentDescriptor,s,n,i)}};Nu.SyncMetricStorage=oh});var Zb=d(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.MeterSharedState=void 0;var Qb=Gr(),XF=wp(),Lu=Gt(),zF=Db(),QF=Gb(),ZF=$b(),JF=Xb(),eU=zb(),ah=class{constructor(t,r){this._meterProviderSharedState=t,this._instrumentationScope=r,this._metricStorageRegistry=new QF.MetricStorageRegistry,this.observableRegistry=new JF.ObservableRegistry,this.meter=new XF.Meter(this)}registerMetricStorage(t){let n=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(i=>{let s=(0,Qb.createInstrumentDescriptorWithView)(i,t),o=i.aggregation.createAggregator(s),a=new eU.SyncMetricStorage(s,o,i.attributesProcessor);return this._metricStorageRegistry.register(a)}).filter(Lu.isNotNullish);return n.length===1?n[0]:new ZF.MultiMetricStorage(n)}registerAsyncMetricStorage(t){return this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(i=>{let s=(0,Qb.createInstrumentDescriptorWithView)(i,t),o=i.aggregation.createAggregator(s),a=new zF.AsyncMetricStorage(s,o,i.attributesProcessor);return this._metricStorageRegistry.register(a)}).filter(Lu.isNotNullish)}async collect(t,r,n){let i=await this.observableRegistry.observe(n?.timeoutMillis),s=Array.from(this._metricStorageRegistry.getStorages()).map(o=>o.collect(t,this._meterProviderSharedState.metricCollectors,this._meterProviderSharedState.sdkStartTime,r)).filter(Lu.isNotNullish);return{scopeMetrics:{scope:this._instrumentationScope,metrics:s.filter(Lu.isNotNullish)},errors:i}}};xu.MeterSharedState=ah});var Jb=d(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.MeterProviderSharedState=void 0;var tU=ee(),rU=Gt(),nU=xb(),iU=Zb(),uh=class{constructor(t){this.resource=t,this.viewRegistry=new nU.ViewRegistry,this.sdkStartTime=(0,tU.hrTime)(),this.metricCollectors=[],this.meterSharedStates=new Map}getMeterSharedState(t){let r=(0,rU.instrumentationScopeId)(t),n=this.meterSharedStates.get(r);return n==null&&(n=new iU.MeterSharedState(this,t),this.meterSharedStates.set(r,n)),n}};Mu.MeterProviderSharedState=uh});var e0=d(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.MetricCollector=void 0;var sU=ee(),oU=Gt(),ch=class{constructor(t,r){this._sharedState=t,this._metricReader=r}async collect(t){let r=(0,sU.hrTime)(),n=Array.from(this._sharedState.meterSharedStates.values()).map(s=>s.collect(this,r,t)),i=await Promise.all(n);return{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:i.map(s=>s.scopeMetrics)},errors:(0,oU.FlatMap)(i,s=>s.errors)}}async forceFlush(t){await this._metricReader.forceFlush(t)}async shutdown(t){await this._metricReader.shutdown(t)}selectAggregationTemporality(t){return this._metricReader.selectAggregationTemporality(t)}};Du.MetricCollector=ch});var t0=d(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.MeterProvider=void 0;var lh=F(),aU=Vn(),uU=Yi(),cU=Jb(),lU=xp(),dU=Bp(),fU=Wp(),pU=e0(),hU=Hp(),_U=pu();function gU(e){return e.name==null&&e.aggregation==null&&e.attributeKeys==null&&e.description==null}var dh=class{constructor(t){var r;this._shutdown=!1,this._sharedState=new cU.MeterProviderSharedState((r=t?.resource)!==null&&r!==void 0?r:uU.Resource.empty())}getMeter(t,r="",n={}){return this._shutdown?(lh.diag.warn("A shutdown MeterProvider cannot provide a Meter"),aU.NOOP_METER):this._sharedState.getMeterSharedState({name:t,version:r,schemaUrl:n.schemaUrl}).meter}addMetricReader(t){let r=new pU.MetricCollector(this._sharedState,t);t.setMetricProducer(r),this._sharedState.metricCollectors.push(r)}addView(t,r){var n;if(gU(t))throw new Error("Cannot create view with no view arguments supplied");if(t.name!=null&&(((n=r?.instrument)===null||n===void 0?void 0:n.name)==null||_U.PatternPredicate.hasWildcard(r.instrument.name)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");let i;t.attributeKeys!=null&&(i=new hU.FilteringAttributesProcessor(t.attributeKeys));let s=new fU.View({name:t.name,description:t.description,aggregation:t.aggregation,attributesProcessor:i}),o=new lU.InstrumentSelector(r?.instrument),a=new dU.MeterSelector(r?.meter);this._sharedState.viewRegistry.addView(s,o,a)}async shutdown(t){if(this._shutdown){lh.diag.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map(r=>r.shutdown(t)))}async forceFlush(t){if(this._shutdown){lh.diag.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map(r=>r.forceFlush(t)))}};Bu.MeterProvider=dh});var r0=d(he=>{"use strict";var mU=he&&he.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Pt=he&&he.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&mU(t,e,r)};Object.defineProperty(he,"__esModule",{value:!0});he.TimeoutError=he.InstrumentType=void 0;Pt(ou(),he);Pt(is(),he);Pt(_b(),he);Pt(mb(),he);Pt(Ap(),he);Pt(bb(),he);var EU=Gr();Object.defineProperty(he,"InstrumentType",{enumerable:!0,get:function(){return EU.InstrumentType}});Pt(wp(),he);Pt(t0(),he);Pt(ih(),he);var yU=Gt();Object.defineProperty(he,"TimeoutError",{enumerable:!0,get:function(){return yU.TimeoutError}});Pt(Gp(),he)});var o0=d(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.toMetric=lr.toScopeMetrics=lr.toResourceMetrics=void 0;var n0=Vn(),Fu=ee(),Ct=r0(),fh=Ka();function SU(e){return{resource:{attributes:(0,fh.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:i0(e.scopeMetrics)}}lr.toResourceMetrics=SU;function i0(e){return Array.from(e.map(t=>({scope:{name:t.scope.name,version:t.scope.version},metrics:t.metrics.map(n=>s0(n)),schemaUrl:t.scope.schemaUrl})))}lr.toScopeMetrics=i0;function s0(e){let t={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},r=OU(e.aggregationTemporality);if(e.dataPointType===Ct.DataPointType.SINGULAR){let n=vU(e),i=e.descriptor.type===Ct.InstrumentType.COUNTER||e.descriptor.type===Ct.InstrumentType.OBSERVABLE_COUNTER;TU(e)?t.sum={aggregationTemporality:r,isMonotonic:i,dataPoints:n}:t.gauge={dataPoints:n}}else RU(e)&&(t.histogram={aggregationTemporality:r,dataPoints:bU(e)});return t}lr.toMetric=s0;function AU(e,t){let r={attributes:(0,fh.toAttributes)(e.attributes),startTimeUnixNano:(0,Fu.hrTimeToNanoseconds)(e.startTime),timeUnixNano:(0,Fu.hrTimeToNanoseconds)(e.endTime)};return t===n0.ValueType.INT?r.asInt=e.value:t===n0.ValueType.DOUBLE&&(r.asDouble=e.value),r}function vU(e){return e.dataPoints.map(t=>AU(t,e.descriptor.valueType))}function bU(e){return e.dataPoints.map(t=>{let r=t.value;return{attributes:(0,fh.toAttributes)(t.attributes),bucketCounts:r.buckets.counts,explicitBounds:r.buckets.boundaries,count:r.count,sum:r.sum,startTimeUnixNano:(0,Fu.hrTimeToNanoseconds)(t.startTime),timeUnixNano:(0,Fu.hrTimeToNanoseconds)(t.endTime)}})}function TU(e){return e.descriptor.type===Ct.InstrumentType.COUNTER||e.descriptor.type===Ct.InstrumentType.UP_DOWN_COUNTER||e.descriptor.type===Ct.InstrumentType.OBSERVABLE_COUNTER||e.descriptor.type===Ct.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER}function RU(e){return e.dataPointType===Ct.DataPointType.HISTOGRAM}function OU(e){return e===Ct.AggregationTemporality.DELTA?1:e===Ct.AggregationTemporality.CUMULATIVE?2:0}});var a0=d(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.createExportMetricsServiceRequest=void 0;var PU=o0();function CU(e){return{resourceMetrics:e.map(t=>(0,PU.toResourceMetrics)(t))}}Uu.createExportMetricsServiceRequest=CU});var u0=d(ke=>{"use strict";var IU=ke&&ke.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ku=ke&&ke.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&IU(t,e,r)};Object.defineProperty(ke,"__esModule",{value:!0});ke.createExportMetricsServiceRequest=ke.createExportTraceServiceRequest=void 0;ku(Wv(),ke);ku(Kv(),ke);ku(zv(),ke);ku(Qv(),ke);var wU=tb();Object.defineProperty(ke,"createExportTraceServiceRequest",{enumerable:!0,get:function(){return wU.createExportTraceServiceRequest}});var NU=a0();Object.defineProperty(ke,"createExportMetricsServiceRequest",{enumerable:!0,get:function(){return NU.createExportMetricsServiceRequest}})});var l0=d(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.OTLPTraceExporter=void 0;var ai=ee(),LU=fp(),c0=fp(),xU=u0(),ph="v1/traces",MU=`http://localhost:4318/${ph}`,hh=class extends LU.OTLPExporterNodeBase{constructor(t={}){super(t),this.headers=Object.assign(this.headers,ai.baggageUtils.parseKeyPairsIntoRecord((0,ai.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS))}convert(t){return(0,xU.createExportTraceServiceRequest)(t,!0)}getDefaultUrl(t){return typeof t.url=="string"?t.url:(0,ai.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,c0.appendRootPathToUrlIfNeeded)((0,ai.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT,ph):(0,ai.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,c0.appendResourcePathToUrl)((0,ai.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,ph):MU}};ju.OTLPTraceExporter=hh});var d0=d(Kr=>{"use strict";var DU=Kr&&Kr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),BU=Kr&&Kr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&DU(t,e,r)};Object.defineProperty(Kr,"__esModule",{value:!0});BU(l0(),Kr)});var f0=d(Xr=>{"use strict";var FU=Xr&&Xr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),UU=Xr&&Xr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&FU(t,e,r)};Object.defineProperty(Xr,"__esModule",{value:!0});UU(d0(),Xr)});var p0=d(zr=>{"use strict";var kU=zr&&zr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jU=zr&&zr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&kU(t,e,r)};Object.defineProperty(zr,"__esModule",{value:!0});jU(f0(),zr)});var R0=d((t5,GU)=>{GU.exports=[{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"SYSTEM_TEAMFOUNDATIONCOLLECTIONURI",pr:"SYSTEM_PULLREQUEST_PULLREQUESTID"},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY_BUILD_BASE",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}}]});var C0=d(We=>{"use strict";var P0=R0(),It=process.env;Object.defineProperty(We,"_vendors",{value:P0.map(function(e){return e.constant})});We.name=null;We.isPR=null;P0.forEach(function(e){var t=Array.isArray(e.env)?e.env:[e.env],r=t.every(function(n){return O0(n)});if(We[e.constant]=r,r)switch(We.name=e.name,typeof e.pr){case"string":We.isPR=!!It[e.pr];break;case"object":"env"in e.pr?We.isPR=e.pr.env in It&&It[e.pr.env]!==e.pr.ne:"any"in e.pr?We.isPR=e.pr.any.some(function(n){return!!It[n]}):We.isPR=O0(e.pr);break;default:We.isPR=null}});We.isCI=!!(It.CI||It.CONTINUOUS_INTEGRATION||It.BUILD_NUMBER||It.RUN_ID||We.name);function O0(e){return typeof e=="string"?!!It[e]:Object.keys(e).every(function(t){return It[t]===e[t]})}});var w0=d((n5,I0)=>{"use strict";I0.exports=C0().isCI});var L0=d((i5,gh)=>{"use strict";var $U=Object.prototype.hasOwnProperty,Le="~";function _s(){}Object.create&&(_s.prototype=Object.create(null),new _s().__proto__||(Le=!1));function HU(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function N0(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new HU(r,n||e,i),o=Le?Le+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function qu(e,t){--e._eventsCount===0?e._events=new _s:delete e._events[t]}function Ce(){this._events=new _s,this._eventsCount=0}Ce.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)$U.call(r,n)&&t.push(Le?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Ce.prototype.listeners=function(t){var r=Le?Le+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Ce.prototype.listenerCount=function(t){var r=Le?Le+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Ce.prototype.emit=function(t,r,n,i,s,o){var a=Le?Le+t:t;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,l,f;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(f=1,l=new Array(c-1);f<c;f++)l[f-1]=arguments[f];u.fn.apply(u.context,l)}else{var p=u.length,h;for(f=0;f<p;f++)switch(u[f].once&&this.removeListener(t,u[f].fn,void 0,!0),c){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,r);break;case 3:u[f].fn.call(u[f].context,r,n);break;case 4:u[f].fn.call(u[f].context,r,n,i);break;default:if(!l)for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u[f].fn.apply(u[f].context,l)}}return!0};Ce.prototype.on=function(t,r,n){return N0(this,t,r,n,!1)};Ce.prototype.once=function(t,r,n){return N0(this,t,r,n,!0)};Ce.prototype.removeListener=function(t,r,n,i){var s=Le?Le+t:t;if(!this._events[s])return this;if(!r)return qu(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&qu(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:qu(this,s)}return this};Ce.prototype.removeAllListeners=function(t){var r;return t?(r=Le?Le+t:t,this._events[r]&&qu(this,r)):(this._events=new _s,this._eventsCount=0),this};Ce.prototype.off=Ce.prototype.removeListener;Ce.prototype.addListener=Ce.prototype.on;Ce.prefixed=Le;Ce.EventEmitter=Ce;typeof gh<"u"&&(gh.exports=Ce)});var M0=d((s5,x0)=>{"use strict";x0.exports=(e,t)=>(t=t||(()=>{}),e.then(r=>new Promise(n=>{n(t())}).then(()=>r),r=>new Promise(n=>{n(t())}).then(()=>{throw r})))});var B0=d((o5,$u)=>{"use strict";var VU=M0(),Gu=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},D0=(e,t,r)=>new Promise((n,i)=>{if(typeof t!="number"||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0){n(e);return}let s=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){i(u)}return}let o=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,a=r instanceof Error?r:new Gu(o);typeof e.cancel=="function"&&e.cancel(),i(a)},t);VU(e.then(n,i),()=>{clearTimeout(s)})});$u.exports=D0;$u.exports.default=D0;$u.exports.TimeoutError=Gu});var F0=d(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});function WU(e,t,r){let n=0,i=e.length;for(;i>0;){let s=i/2|0,o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}mh.default=WU});var U0=d(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});var YU=F0(),Eh=class{constructor(){this._queue=[]}enqueue(t,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:t};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=YU.default(this._queue,n,(s,o)=>o.priority-s.priority);this._queue.splice(i,0,n)}dequeue(){let t=this._queue.shift();return t?.run}filter(t){return this._queue.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this._queue.length}};yh.default=Eh});var j0=d(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});var KU=L0(),k0=B0(),XU=U0(),Hu=()=>{},zU=new k0.TimeoutError,Sh=class extends KU{constructor(t){var r,n,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Hu,this._resolveIdle=Hu,t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:XU.default},t),!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=t.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||t.interval===0,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=t.throwOnTimeout===!0,this._isPaused=t.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Hu,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Hu,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let t=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-t;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),t&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,r={}){return new Promise((n,i)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&r.timeout===void 0?t():k0.default(Promise.resolve(t()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(zU)});n(await o)}catch(o){i(o)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(t=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),t()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(t=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),t()}})}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}};Ah.default=Sh});var G0=d((l5,vh)=>{"use strict";var q0=(e,...t)=>new Promise(r=>{r(e(...t))});vh.exports=q0;vh.exports.default=q0});var H0=d((d5,bh)=>{"use strict";var QU=G0(),$0=e=>{if(!((Number.isInteger(e)||e===1/0)&&e>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let t=[],r=0,n=()=>{r--,t.length>0&&t.shift()()},i=(a,u,...c)=>{r++;let l=QU(a,...c);u(l),l.then(n,n)},s=(a,u,...c)=>{r<e?i(a,u,...c):t.push(i.bind(null,a,u,...c))},o=(a,...u)=>new Promise(c=>s(a,c,...u));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>t.length},clearQueue:{value:()=>{t.length=0}}}),o};bh.exports=$0;bh.exports.default=$0});var V0=d(Rh=>{"use strict";var Vu=class{constructor(t){this.tasks=[],this.count=t}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let t=this.tasks.shift();if(t===void 0)throw"Unexpected undefined value in tasks list";t()}}acquire(){return new Promise((t,r)=>{var n=()=>{var i=!1;t(()=>{i||(i=!0,this.count++,this.sched())})};this.tasks.push(n),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))})}use(t){return this.acquire().then(r=>t().then(n=>(r(),n)).catch(n=>{throw r(),n}))}};Rh.Semaphore=Vu;var Th=class extends Vu{constructor(){super(1)}};Rh.Mutex=Th});var Y0=d((p5,W0)=>{"use strict";W0.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var Oh=d((h5,K0)=>{"use strict";var ZU=Y0();K0.exports=e=>typeof e=="string"?e.replace(ZU(),""):e});var z0=d((_5,Ph)=>{"use strict";var X0=e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141);Ph.exports=X0;Ph.exports.default=X0});var J0=d((g5,Z0)=>{"use strict";var Q0="[\uD800-\uDBFF][\uDC00-\uDFFF]",JU=e=>e&&e.exact?new RegExp(`^${Q0}$`):new RegExp(Q0,"g");Z0.exports=JU});var tT=d((m5,eT)=>{"use strict";eT.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Ch=d((E5,nT)=>{var gs=tT(),rT={};for(let e of Object.keys(gs))rT[gs[e]]=e;var I={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};nT.exports=I;for(let e of Object.keys(I)){if(!("channels"in I[e]))throw new Error("missing channels property: "+e);if(!("labels"in I[e]))throw new Error("missing channel labels property: "+e);if(I[e].labels.length!==I[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=I[e];delete I[e].channels,delete I[e].labels,Object.defineProperty(I[e],"channels",{value:t}),Object.defineProperty(I[e],"labels",{value:r})}I.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=s-i,a,u;s===i?a=0:t===s?a=(r-n)/o:r===s?a=2+(n-t)/o:n===s&&(a=4+(t-r)/o),a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+s)/2;return s===i?u=0:c<=.5?u=o/(s+i):u=o/(2-s-i),[a,u*100,c*100]};I.rgb.hsv=function(e){let t,r,n,i,s,o=e[0]/255,a=e[1]/255,u=e[2]/255,c=Math.max(o,a,u),l=c-Math.min(o,a,u),f=function(p){return(c-p)/6/l+1/2};return l===0?(i=0,s=0):(s=l/c,t=f(o),r=f(a),n=f(u),o===c?i=n-r:a===c?i=1/3+t-n:u===c&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]};I.rgb.hwb=function(e){let t=e[0],r=e[1],n=e[2],i=I.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,s*100,n*100]};I.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n),s=(1-t-i)/(1-i)||0,o=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function ek(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}I.rgb.keyword=function(e){let t=rT[e];if(t)return t;let r=1/0,n;for(let i of Object.keys(gs)){let s=gs[i],o=ek(e,s);o<r&&(r=o,n=i)}return n};I.keyword.rgb=function(e){return gs[e]};I.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=t*.4124+r*.3576+n*.1805,s=t*.2126+r*.7152+n*.0722,o=t*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};I.rgb.lab=function(e){let t=I.rgb.xyz(e),r=t[0],n=t[1],i=t[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let s=116*n-16,o=500*(r-n),a=200*(n-i);return[s,o,a]};I.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100,i,s,o;if(r===0)return o=n*255,[o,o,o];n<.5?i=n*(1+r):i=n+r-n*r;let a=2*n-i,u=[0,0,0];for(let c=0;c<3;c++)s=t+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(i-a)*6*s:2*s<1?o=i:3*s<2?o=a+(i-a)*(2/3-s)*6:o=a,u[c]=o*255;return u};I.hsl.hsv=function(e){let t=e[0],r=e[1]/100,n=e[2]/100,i=r,s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;let o=(n+r)/2,a=n===0?2*i/(s+i):2*r/(n+r);return[t,a*100,o*100]};I.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-r),a=255*n*(1-r*s),u=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,u,o];case 1:return[a,n,o];case 2:return[o,n,u];case 3:return[o,a,n];case 4:return[u,o,n];case 5:return[n,o,a]}};I.hsv.hsl=function(e){let t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01),s,o;o=(2-r)*n;let a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[t,s*100,o*100]};I.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100,i=r+n,s;i>1&&(r/=i,n/=i);let o=Math.floor(6*t),a=1-n;s=6*t-o,(o&1)!==0&&(s=1-s);let u=r+s*(a-r),c,l,f;switch(o){default:case 6:case 0:c=a,l=u,f=r;break;case 1:c=u,l=a,f=r;break;case 2:c=r,l=a,f=u;break;case 3:c=r,l=u,f=a;break;case 4:c=u,l=r,f=a;break;case 5:c=a,l=r,f=u;break}return[c*255,l*255,f*255]};I.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100,s=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[s*255,o*255,a*255]};I.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,n=e[2]/100,i,s,o;return i=t*3.2406+r*-1.5372+n*-.4986,s=t*-.9689+r*1.8758+n*.0415,o=t*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};I.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*r-16,s=500*(t-r),o=200*(r-n);return[i,s,o]};I.lab.xyz=function(e){let t=e[0],r=e[1],n=e[2],i,s,o;s=(t+16)/116,i=r/500+s,o=s-n/200;let a=s**3,u=i**3,c=o**3;return s=a>.008856?a:(s-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};I.lab.lch=function(e){let t=e[0],r=e[1],n=e[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(r*r+n*n);return[t,o,i]};I.lch.lab=function(e){let t=e[0],r=e[1],i=e[2]/360*2*Math.PI,s=r*Math.cos(i),o=r*Math.sin(i);return[t,s,o]};I.rgb.ansi16=function(e,t=null){let[r,n,i]=e,s=t===null?I.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return s===2&&(o+=60),o};I.hsv.ansi16=function(e){return I.rgb.ansi16(I.hsv.rgb(e),e[2])};I.rgb.ansi256=function(e){let t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};I.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,n=(t&1)*r*255,i=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[n,i,s]};I.ansi256.rgb=function(e){if(e>=232){let s=(e-232)*10+8;return[s,s,s]}e-=16;let t,r=Math.floor(e/36)/5*255,n=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[r,n,i]};I.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};I.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};I.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),s=Math.min(Math.min(t,r),n),o=i-s,a,u;return o<1?a=s/(1-o):a=0,o<=0?u=0:i===t?u=(r-n)/o%6:i===r?u=2+(n-t)/o:u=4+(t-r)/o,u/=6,u%=1,[u*360,o*100,a*100]};I.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],n*100,i*100]};I.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],n*100,i*100]};I.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],s=t%1*6,o=s%1,a=1-o,u=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};I.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,n=t+r*(1-t),i=0;return n>0&&(i=t/n),[e[0],i*100,n*100]};I.hcg.hsl=function(e){let t=e[1]/100,n=e[2]/100*(1-t)+.5*t,i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],i*100,n*100]};I.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};I.hwb.hcg=function(e){let t=e[1]/100,n=1-e[2]/100,i=n-t,s=0;return i<1&&(s=(n-i)/(1-i)),[e[0],i*100,s*100]};I.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};I.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};I.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};I.gray.hsl=function(e){return[0,0,e[0]]};I.gray.hsv=I.gray.hsl;I.gray.hwb=function(e){return[0,100,e[0]]};I.gray.cmyk=function(e){return[0,0,0,e[0]]};I.gray.lab=function(e){return[e[0],0,0]};I.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n};I.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var sT=d((y5,iT)=>{var Wu=Ch();function tk(){let e={},t=Object.keys(Wu);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function rk(e){let t=tk(),r=[e];for(t[e].distance=0;r.length;){let n=r.pop(),i=Object.keys(Wu[n]);for(let s=i.length,o=0;o<s;o++){let a=i[o],u=t[a];u.distance===-1&&(u.distance=t[n].distance+1,u.parent=n,r.unshift(a))}}return t}function nk(e,t){return function(r){return t(e(r))}}function ik(e,t){let r=[t[e].parent,e],n=Wu[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)r.unshift(t[i].parent),n=nk(Wu[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}iT.exports=function(e){let t=rk(e),r={},n=Object.keys(t);for(let i=n.length,s=0;s<i;s++){let o=n[s];t[o].parent!==null&&(r[o]=ik(o,t))}return r}});var aT=d((S5,oT)=>{var Ih=Ch(),sk=sT(),ci={},ok=Object.keys(Ih);function ak(e){let t=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function uk(e){let t=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=e(r);if(typeof i=="object")for(let s=i.length,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}ok.forEach(e=>{ci[e]={},Object.defineProperty(ci[e],"channels",{value:Ih[e].channels}),Object.defineProperty(ci[e],"labels",{value:Ih[e].labels});let t=sk(e);Object.keys(t).forEach(n=>{let i=t[n];ci[e][n]=uk(i),ci[e][n].raw=ak(i)})});oT.exports=ci});var pT=d((A5,fT)=>{"use strict";var uT=(e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,cT=(e,t)=>(...r)=>{let n=e(...r);return`\x1B[${38+t};5;${n}m`},lT=(e,t)=>(...r)=>{let n=e(...r);return`\x1B[${38+t};2;${n[0]};${n[1]};${n[2]}m`},Yu=e=>e,dT=(e,t,r)=>[e,t,r],li=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})},wh,di=(e,t,r,n)=>{wh===void 0&&(wh=aT());let i=n?10:0,s={};for(let[o,a]of Object.entries(wh)){let u=o==="ansi16"?"ansi":o;o===t?s[u]=e(r,i):typeof a=="object"&&(s[u]=e(a[t],i))}return s};function ck(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,n]of Object.entries(t)){for(let[i,s]of Object.entries(n))t[i]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},n[i]=t[i],e.set(s[0],s[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",li(t.color,"ansi",()=>di(uT,"ansi16",Yu,!1)),li(t.color,"ansi256",()=>di(cT,"ansi256",Yu,!1)),li(t.color,"ansi16m",()=>di(lT,"rgb",dT,!1)),li(t.bgColor,"ansi",()=>di(uT,"ansi16",Yu,!0)),li(t.bgColor,"ansi256",()=>di(cT,"ansi256",Yu,!0)),li(t.bgColor,"ansi16m",()=>di(lT,"rgb",dT,!0)),t}Object.defineProperty(fT,"exports",{enumerable:!0,get:ck})});var ET=d((v5,mT)=>{"use strict";var lk=z0(),dk=J0(),hT=pT(),gT=["\x1B","\x9B"],Ku=e=>`${gT[0]}[${e}m`,_T=(e,t,r)=>{let n=[];e=[...e];for(let i of e){let s=i;i.includes(";")&&(i=i.split(";")[0][0]+"0");let o=hT.codes.get(Number.parseInt(i,10));if(o){let a=e.indexOf(o.toString());a===-1?n.push(Ku(t?o:s)):e.splice(a,1)}else if(t){n.push(Ku(0));break}else n.push(Ku(s))}if(t&&(n=n.filter((i,s)=>n.indexOf(i)===s),r!==void 0)){let i=Ku(hT.codes.get(Number.parseInt(r,10)));n=n.reduce((s,o)=>o===i?[o,...s]:[...s,o],[])}return n.join("")};mT.exports=(e,t,r)=>{let n=[...e],i=[],s=typeof r=="number"?r:n.length,o=!1,a,u=0,c="";for(let[l,f]of n.entries()){let p=!1;if(gT.includes(f)){let h=/\d[^m]*/.exec(e.slice(l,l+18));a=h&&h.length>0?h[0]:void 0,u<s&&(o=!0,a!==void 0&&i.push(a))}else o&&f==="m"&&(o=!1,p=!0);if(!o&&!p&&u++,!dk({exact:!0}).test(f)&&lk(f.codePointAt())&&(u++,typeof r!="number"&&s++),u>t&&u<=s)c+=f;else if(u===t&&!o&&a!==void 0)c=_T(i);else if(u>=s){c+=_T(i,!0,a);break}}return c}});var MT=d((tn,xT)=>{"use strict";var Dh=R("crypto");tn=xT.exports=Ss;function Ss(e,t){return t=NT(e,t),Ck(e,t)}tn.sha1=function(e){return Ss(e)};tn.keys=function(e){return Ss(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})};tn.MD5=function(e){return Ss(e,{algorithm:"md5",encoding:"hex"})};tn.keysMD5=function(e){return Ss(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var mi=Dh.getHashes?Dh.getHashes().slice():["sha1","md5"];mi.push("passthrough");var IT=["buffer","hex","binary","base64"];function NT(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=t.ignoreUnknown===!0,r.respectType=t.respectType!==!1,r.respectFunctionNames=t.respectFunctionNames!==!1,r.respectFunctionProperties=t.respectFunctionProperties!==!1,r.unorderedArrays=t.unorderedArrays===!0,r.unorderedSets=t.unorderedSets!==!1,r.unorderedObjects=t.unorderedObjects!==!1,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,typeof e>"u")throw new Error("Object argument required.");for(var n=0;n<mi.length;++n)mi[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=mi[n]);if(mi.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+mi.join(", "));if(IT.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+IT.join(", "));return r}function wT(e){if(typeof e!="function")return!1;var t=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i;return t.exec(Function.prototype.toString.call(e))!=null}function Ck(e,t){var r;t.algorithm!=="passthrough"?r=Dh.createHash(t.algorithm):r=new LT,typeof r.write>"u"&&(r.write=r.update,r.end=r.update);var n=Bh(t,r);if(n.dispatch(e),r.update||r.end(""),r.digest)return r.digest(t.encoding==="buffer"?void 0:t.encoding);var i=r.read();return t.encoding==="buffer"?i:i.toString(t.encoding)}tn.writeToStream=function(e,t,r){return typeof r>"u"&&(r=t,t={}),t=NT(e,t),Bh(t,r).dispatch(e)};function Bh(e,t,r){r=r||[];var n=function(i){return t.update?t.update(i,"utf8"):t.write(i,"utf8")};return{dispatch:function(i){e.replacer&&(i=e.replacer(i));var s=typeof i;return i===null&&(s="null"),this["_"+s](i)},_object:function(i){var s=/\[object (.*)\]/i,o=Object.prototype.toString.call(i),a=s.exec(o);a?a=a[1]:a="unknown:["+o+"]",a=a.toLowerCase();var u=null;if((u=r.indexOf(i))>=0)return this.dispatch("[CIRCULAR:"+u+"]");if(r.push(i),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(i))return n("buffer:"),n(i);if(a!=="object"&&a!=="function"&&a!=="asyncfunction")if(this["_"+a])this["_"+a](i);else{if(e.ignoreUnknown)return n("["+a+"]");throw new Error('Unknown object type "'+a+'"')}else{var c=Object.keys(i);e.unorderedObjects&&(c=c.sort()),e.respectType!==!1&&!wT(i)&&c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter(function(f){return!e.excludeKeys(f)})),n("object:"+c.length+":");var l=this;return c.forEach(function(f){l.dispatch(f),n(":"),e.excludeValues||l.dispatch(i[f]),n(",")})}},_array:function(i,s){s=typeof s<"u"?s:e.unorderedArrays!==!1;var o=this;if(n("array:"+i.length+":"),!s||i.length<=1)return i.forEach(function(c){return o.dispatch(c)});var a=[],u=i.map(function(c){var l=new LT,f=r.slice(),p=Bh(e,l,f);return p.dispatch(c),a=a.concat(f.slice(r.length)),l.read().toString()});return r=r.concat(a),u.sort(),this._array(u,!1)},_date:function(i){return n("date:"+i.toJSON())},_symbol:function(i){return n("symbol:"+i.toString())},_error:function(i){return n("error:"+i.toString())},_boolean:function(i){return n("bool:"+i.toString())},_string:function(i){n("string:"+i.length+":"),n(i.toString())},_function:function(i){n("fn:"),wT(i)?this.dispatch("[native]"):this.dispatch(i.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),e.respectFunctionProperties&&this._object(i)},_number:function(i){return n("number:"+i.toString())},_xml:function(i){return n("xml:"+i.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(i){return n("regex:"+i.toString())},_uint8array:function(i){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return n("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return n("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return n("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return n("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return n("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return n("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return n("url:"+i.toString(),"utf8")},_map:function(i){n("map:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_set:function(i){n("set:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_file:function(i){return n("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return n("domwindow")},_bigint:function(i){return n("bigint:"+i.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function LT(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}});var jk={};hR(jk,{default:()=>kk});var Zr=R("@yarnpkg/cli"),Ne=R("@yarnpkg/core"),b0=R("@yarnpkg/libzip"),Z=R("@yarnpkg/fslib"),at=R("clipanion"),_h=z(R("path"));var $h=R("fs"),Hh=async e=>{try{return(0,$h.readFileSync)(e,"utf-8").split(`
`)}catch{return[]}};var Vh=R("path"),Wh=({ignoreFile:e,cwd:t})=>(0,Vh.join)(t,e);var yE=z(e_());var mE=z(od()),EE=async({cwd:e})=>{try{return await(0,mE.default)("**/*",{dot:!0,cwd:e,absolute:!1})}catch{return[]}};var ad=async({exclude:e,ignoreFile:t,cwd:r})=>{let n=Wh({ignoreFile:t,cwd:r}),i=(0,yE.default)().add([...e,...await Hh(n)]);return(await EE({cwd:r})).filter(a=>i.ignores(a)).map(a=>`${r}/${a}`)};var SE=["package.json","package.yaml","package.yml"];var lo=R("path"),pw={directory:({cwd:e})=>[e],parentDirectories:({cwd:e,rootDir:t})=>{if(!e.startsWith(t))throw new Error("Package directory not in rootDir. This should never happen");let r=e,n=[];for(;;){if(r===t||r.length<t.length)return n;r=(0,lo.dirname)(r),n=[...n,r]}},packageFiles:({cwd:e})=>SE.map(t=>(0,lo.join)(e,t))},hw=({cwd:e,rootDir:t})=>[...new Set(Object.values(pw).map(r=>r({cwd:e,rootDir:t})).flat())],AE=({workspaces:e,rootDir:t})=>Array.from(e).map(({cwd:r})=>hw({cwd:r,rootDir:t})).flat();var Ci=R("@yarnpkg/fslib"),H=z(R("typanion"));function FE(e){return typeof e>"u"||e===null}function _w(e){return typeof e=="object"&&e!==null}function gw(e){return Array.isArray(e)?e:FE(e)?[]:[e]}function mw(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function Ew(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function yw(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Sw=FE,Aw=_w,vw=gw,bw=Ew,Tw=yw,Rw=mw,ge={isNothing:Sw,isObject:Aw,toArray:vw,repeat:bw,isNegativeZero:Tw,extend:Rw};function UE(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Ti(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=UE(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ti.prototype=Object.create(Error.prototype);Ti.prototype.constructor=Ti;Ti.prototype.toString=function(t){return this.name+": "+UE(this,t)};var De=Ti;function ud(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"\u2192")+o,pos:n-t+s.length}}function cd(e,t){return ge.repeat(" ",t-e.length)+e}function Ow(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",u,c,l=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+l+3);for(u=1;u<=t.linesBefore&&!(o-u<0);u++)c=ud(e.buffer,n[o-u],i[o-u],e.position-(n[o]-n[o-u]),f),a=ge.repeat(" ",t.indent)+cd((e.line-u+1).toString(),l)+" | "+c.str+`
`+a;for(c=ud(e.buffer,n[o],i[o],e.position,f),a+=ge.repeat(" ",t.indent)+cd((e.line+1).toString(),l)+" | "+c.str+`
`,a+=ge.repeat("-",t.indent+l+3+c.pos)+`^
`,u=1;u<=t.linesAfter&&!(o+u>=i.length);u++)c=ud(e.buffer,n[o+u],i[o+u],e.position-(n[o]-n[o+u]),f),a+=ge.repeat(" ",t.indent)+cd((e.line+u+1).toString(),l)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var Pw=Ow,Cw=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Iw=["scalar","sequence","mapping"];function ww(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function Nw(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Cw.indexOf(r)===-1)throw new De('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=ww(t.styleAliases||null),Iw.indexOf(this.kind)===-1)throw new De('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var ve=Nw;function vE(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function Lw(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function dd(e){return this.extend(e)}dd.prototype.extend=function(t){var r=[],n=[];if(t instanceof ve)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new De("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof ve))throw new De("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new De("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new De("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof ve))throw new De("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(dd.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=vE(i,"implicit"),i.compiledExplicit=vE(i,"explicit"),i.compiledTypeMap=Lw(i.compiledImplicit,i.compiledExplicit),i};var xw=dd,Mw=new ve("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Dw=new ve("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Bw=new ve("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Fw=new xw({explicit:[Mw,Dw,Bw]});function Uw(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function kw(){return null}function jw(e){return e===null}var qw=new ve("tag:yaml.org,2002:null",{kind:"scalar",resolve:Uw,construct:kw,predicate:jw,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Gw(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function $w(e){return e==="true"||e==="True"||e==="TRUE"}function Hw(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Vw=new ve("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Gw,construct:$w,predicate:Hw,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Ww(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Yw(e){return 48<=e&&e<=55}function Kw(e){return 48<=e&&e<=57}function Xw(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Ww(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Yw(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Kw(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function zw(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Qw(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!ge.isNegativeZero(e)}var Zw=new ve("tag:yaml.org,2002:int",{kind:"scalar",resolve:Xw,construct:zw,predicate:Qw,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Jw=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function eN(e){return!(e===null||!Jw.test(e)||e[e.length-1]==="_")}function tN(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var rN=/^[-+]?[0-9]+e/;function nN(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ge.isNegativeZero(e))return"-0.0";return r=e.toString(10),rN.test(r)?r.replace("e",".e"):r}function iN(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||ge.isNegativeZero(e))}var sN=new ve("tag:yaml.org,2002:float",{kind:"scalar",resolve:eN,construct:tN,predicate:iN,represent:nN,defaultStyle:"lowercase"}),kE=Fw.extend({implicit:[qw,Vw,Zw,sN]}),oN=kE,jE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),qE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function aN(e){return e===null?!1:jE.exec(e)!==null||qE.exec(e)!==null}function uN(e){var t,r,n,i,s,o,a,u=0,c=null,l,f,p;if(t=jE.exec(e),t===null&&(t=qE.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(l=+t[10],f=+(t[11]||0),c=(l*60+f)*6e4,t[9]==="-"&&(c=-c)),p=new Date(Date.UTC(r,n,i,s,o,a,u)),c&&p.setTime(p.getTime()-c),p}function cN(e){return e.toISOString()}var lN=new ve("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:aN,construct:uN,instanceOf:Date,represent:cN});function dN(e){return e==="<<"||e===null}var fN=new ve("tag:yaml.org,2002:merge",{kind:"scalar",resolve:dN}),gd=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function pN(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=gd;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function hN(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=gd,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function _N(e){var t="",r=0,n,i,s=e.length,o=gd;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function gN(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var mN=new ve("tag:yaml.org,2002:binary",{kind:"scalar",resolve:pN,construct:hN,predicate:gN,represent:_N}),EN=Object.prototype.hasOwnProperty,yN=Object.prototype.toString;function SN(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,yN.call(i)!=="[object Object]")return!1;for(s in i)if(EN.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function AN(e){return e!==null?e:[]}var vN=new ve("tag:yaml.org,2002:omap",{kind:"sequence",resolve:SN,construct:AN}),bN=Object.prototype.toString;function TN(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],bN.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function RN(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var ON=new ve("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:TN,construct:RN}),PN=Object.prototype.hasOwnProperty;function CN(e){if(e===null)return!0;var t,r=e;for(t in r)if(PN.call(r,t)&&r[t]!==null)return!1;return!0}function IN(e){return e!==null?e:{}}var wN=new ve("tag:yaml.org,2002:set",{kind:"mapping",resolve:CN,construct:IN}),GE=oN.extend({implicit:[lN,fN],explicit:[mN,vN,ON,wN]}),Zt=Object.prototype.hasOwnProperty,fo=1,$E=2,HE=3,po=4,ld=1,NN=2,bE=3,LN=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,xN=/[\x85\u2028\u2029]/,MN=/[,\[\]\{\}]/,VE=/^(?:!|!!|![a-z\-]+!)$/i,WE=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function TE(e){return Object.prototype.toString.call(e)}function mt(e){return e===10||e===13}function vr(e){return e===9||e===32}function Be(e){return e===9||e===32||e===10||e===13}function En(e){return e===44||e===91||e===93||e===123||e===125}function DN(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function BN(e){return e===120?2:e===117?4:e===85?8:0}function FN(e){return 48<=e&&e<=57?e-48:-1}function RE(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function UN(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var YE=new Array(256),KE=new Array(256);for(Ar=0;Ar<256;Ar++)YE[Ar]=RE(Ar)?1:0,KE[Ar]=RE(Ar);var Ar;function kN(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||GE,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function XE(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Pw(r),new De(t,r)}function M(e,t){throw XE(e,t)}function ho(e,t){e.onWarning&&e.onWarning.call(null,XE(e,t))}var OE={YAML:function(t,r,n){var i,s,o;t.version!==null&&M(t,"duplication of %YAML directive"),n.length!==1&&M(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&M(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&M(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&ho(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&M(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],VE.test(i)||M(t,"ill-formed tag handle (first argument) of the TAG directive"),Zt.call(t.tagMap,i)&&M(t,'there is a previously declared suffix for "'+i+'" tag handle'),WE.test(s)||M(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{M(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function Qt(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||M(e,"expected valid JSON character");else LN.test(a)&&M(e,"the stream contains non-printable characters");e.result+=a}}function PE(e,t,r,n){var i,s,o,a;for(ge.isObject(r)||M(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],Zt.call(t,s)||(t[s]=r[s],n[s]=!0)}function yn(e,t,r,n,i,s,o,a,u){var c,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,l=i.length;c<l;c+=1)Array.isArray(i[c])&&M(e,"nested arrays are not supported inside keys"),typeof i=="object"&&TE(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&TE(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,l=s.length;c<l;c+=1)PE(e,t,s[c],r);else PE(e,t,s,r);else!e.json&&!Zt.call(r,i)&&Zt.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,M(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}function md(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):M(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function le(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;vr(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(mt(i))for(md(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&ho(e,"deficient indentation"),n}function mo(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Be(r)))}function Ed(e,t){t===1?e.result+=" ":t>1&&(e.result+=ge.repeat(`
`,t-1))}function jN(e,t,r){var n,i,s,o,a,u,c,l,f=e.kind,p=e.result,h;if(h=e.input.charCodeAt(e.position),Be(h)||En(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),Be(i)||r&&En(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),Be(i)||r&&En(i))break}else if(h===35){if(n=e.input.charCodeAt(e.position-1),Be(n))break}else{if(e.position===e.lineStart&&mo(e)||r&&En(h))break;if(mt(h))if(u=e.line,c=e.lineStart,l=e.lineIndent,le(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=u,e.lineStart=c,e.lineIndent=l;break}}a&&(Qt(e,s,o,!1),Ed(e,e.line-u),s=o=e.position,a=!1),vr(h)||(o=e.position+1),h=e.input.charCodeAt(++e.position)}return Qt(e,s,o,!1),e.result?!0:(e.kind=f,e.result=p,!1)}function qN(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Qt(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else mt(r)?(Qt(e,n,i,!0),Ed(e,le(e,!1,t)),n=i=e.position):e.position===e.lineStart&&mo(e)?M(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);M(e,"unexpected end of the stream within a single quoted scalar")}function GN(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Qt(e,r,e.position,!0),e.position++,!0;if(a===92){if(Qt(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),mt(a))le(e,!1,t);else if(a<256&&YE[a])e.result+=KE[a],e.position++;else if((o=BN(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=DN(a))>=0?s=(s<<4)+o:M(e,"expected hexadecimal character");e.result+=UN(s),e.position++}else M(e,"unknown escape sequence");r=n=e.position}else mt(a)?(Qt(e,r,n,!0),Ed(e,le(e,!1,t)),r=n=e.position):e.position===e.lineStart&&mo(e)?M(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}M(e,"unexpected end of the stream within a double quoted scalar")}function $N(e,t){var r=!0,n,i,s,o=e.tag,a,u=e.anchor,c,l,f,p,h,g=Object.create(null),_,v,A,S;if(S=e.input.charCodeAt(e.position),S===91)l=93,h=!1,a=[];else if(S===123)l=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),S=e.input.charCodeAt(++e.position);S!==0;){if(le(e,!0,t),S=e.input.charCodeAt(e.position),S===l)return e.position++,e.tag=o,e.anchor=u,e.kind=h?"mapping":"sequence",e.result=a,!0;r?S===44&&M(e,"expected the node content, but found ','"):M(e,"missed comma between flow collection entries"),v=_=A=null,f=p=!1,S===63&&(c=e.input.charCodeAt(e.position+1),Be(c)&&(f=p=!0,e.position++,le(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,Sn(e,t,fo,!1,!0),v=e.tag,_=e.result,le(e,!0,t),S=e.input.charCodeAt(e.position),(p||e.line===n)&&S===58&&(f=!0,S=e.input.charCodeAt(++e.position),le(e,!0,t),Sn(e,t,fo,!1,!0),A=e.result),h?yn(e,a,g,v,_,A,n,i,s):f?a.push(yn(e,null,g,v,_,A,n,i,s)):a.push(_),le(e,!0,t),S=e.input.charCodeAt(e.position),S===44?(r=!0,S=e.input.charCodeAt(++e.position)):r=!1}M(e,"unexpected end of the stream within a flow collection")}function HN(e,t){var r,n,i=ld,s=!1,o=!1,a=t,u=0,c=!1,l,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)ld===i?i=f===43?bE:NN:M(e,"repeat of a chomping mode identifier");else if((l=FN(f))>=0)l===0?M(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?M(e,"repeat of an indentation width identifier"):(a=t+l-1,o=!0);else break;if(vr(f)){do f=e.input.charCodeAt(++e.position);while(vr(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!mt(f)&&f!==0)}for(;f!==0;){for(md(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),mt(f)){u++;continue}if(e.lineIndent<a){i===bE?e.result+=ge.repeat(`
`,s?1+u:u):i===ld&&s&&(e.result+=`
`);break}for(n?vr(f)?(c=!0,e.result+=ge.repeat(`
`,s?1+u:u)):c?(c=!1,e.result+=ge.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=ge.repeat(`
`,u):e.result+=ge.repeat(`
`,s?1+u:u),s=!0,o=!0,u=0,r=e.position;!mt(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Qt(e,r,e.position,!1)}return!0}function CE(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,M(e,"tab characters must not be used in indentation")),!(u!==45||(o=e.input.charCodeAt(e.position+1),!Be(o))));){if(a=!0,e.position++,le(e,!0,-1)&&e.lineIndent<=t){s.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,Sn(e,t,HE,!1,!0),s.push(e.result),le(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&u!==0)M(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function VN(e,t,r){var n,i,s,o,a,u,c=e.tag,l=e.anchor,f={},p=Object.create(null),h=null,g=null,_=null,v=!1,A=!1,S;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),S=e.input.charCodeAt(e.position);S!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,M(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(S===63||S===58)&&Be(n))S===63?(v&&(yn(e,f,p,h,g,null,o,a,u),h=g=_=null),A=!0,v=!0,i=!0):v?(v=!1,i=!0):M(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,S=n;else{if(o=e.line,a=e.lineStart,u=e.position,!Sn(e,r,$E,!1,!0))break;if(e.line===s){for(S=e.input.charCodeAt(e.position);vr(S);)S=e.input.charCodeAt(++e.position);if(S===58)S=e.input.charCodeAt(++e.position),Be(S)||M(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(yn(e,f,p,h,g,null,o,a,u),h=g=_=null),A=!0,v=!1,i=!1,h=e.tag,g=e.result;else if(A)M(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=l,!0}else if(A)M(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=l,!0}if((e.line===s||e.lineIndent>t)&&(v&&(o=e.line,a=e.lineStart,u=e.position),Sn(e,t,po,!0,i)&&(v?g=e.result:_=e.result),v||(yn(e,f,p,h,g,_,o,a,u),h=g=_=null),le(e,!0,-1),S=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&S!==0)M(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&yn(e,f,p,h,g,null,o,a,u),A&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=f),A}function WN(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&M(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):M(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Be(o);)o===33&&(n?M(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),VE.test(i)||M(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),MN.test(s)&&M(e,"tag suffix cannot contain flow indicator characters")}s&&!WE.test(s)&&M(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{M(e,"tag name is malformed: "+s)}return r?e.tag=s:Zt.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:M(e,'undeclared tag handle "'+i+'"'),!0}function YN(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&M(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Be(r)&&!En(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&M(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function KN(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Be(n)&&!En(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&M(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Zt.call(e.anchorMap,r)||M(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],le(e,!0,-1),!0}function Sn(e,t,r,n,i){var s,o,a,u=1,c=!1,l=!1,f,p,h,g,_,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=po===r||HE===r,n&&le(e,!0,-1)&&(c=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;WN(e)||YN(e);)le(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||po===r)&&(fo===r||$E===r?_=t:_=t+1,v=e.position-e.lineStart,u===1?a&&(CE(e,v)||VN(e,v,_))||$N(e,_)?l=!0:(o&&HN(e,_)||qN(e,_)||GN(e,_)?l=!0:KN(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&M(e,"alias node should not have any properties")):jN(e,_,fo===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(l=a&&CE(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&M(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,p=e.implicitTypes.length;f<p;f+=1)if(g=e.implicitTypes[f],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Zt.call(e.typeMap[e.kind||"fallback"],e.tag))g=e.typeMap[e.kind||"fallback"][e.tag];else for(g=null,h=e.typeMap.multi[e.kind||"fallback"],f=0,p=h.length;f<p;f+=1)if(e.tag.slice(0,h[f].tag.length)===h[f].tag){g=h[f];break}g||M(e,"unknown tag !<"+e.tag+">"),e.result!==null&&g.kind!==e.kind&&M(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result,e.tag)?(e.result=g.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):M(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function XN(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(le(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!Be(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&M(e,"directive name must not be less than one character in length");o!==0;){for(;vr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!mt(o));break}if(mt(o))break;for(r=e.position;o!==0&&!Be(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&md(e),Zt.call(OE,n)?OE[n](e,n,i):ho(e,'unknown document directive "'+n+'"')}if(le(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,le(e,!0,-1)):s&&M(e,"directives end mark is expected"),Sn(e,e.lineIndent-1,po,!1,!0),le(e,!0,-1),e.checkLineBreaks&&xN.test(e.input.slice(t,e.position))&&ho(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&mo(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,le(e,!0,-1));return}if(e.position<e.length-1)M(e,"end of the stream or a document separator is expected");else return}function zE(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new kN(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,M(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)XN(r);return r.documents}function zN(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=zE(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function QN(e,t){var r=zE(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new De("expected a single document in the stream, but found more")}}var ZN=zN,JN=QN,QE={loadAll:ZN,load:JN},ZE=Object.prototype.toString,JE=Object.prototype.hasOwnProperty,yd=65279,eL=9,Ri=10,tL=13,rL=32,nL=33,iL=34,fd=35,sL=37,oL=38,aL=39,uL=42,ey=44,cL=45,_o=58,lL=61,dL=62,fL=63,pL=64,ty=91,ry=93,hL=96,ny=123,_L=124,iy=125,be={};be[0]="\\0";be[7]="\\a";be[8]="\\b";be[9]="\\t";be[10]="\\n";be[11]="\\v";be[12]="\\f";be[13]="\\r";be[27]="\\e";be[34]='\\"';be[92]="\\\\";be[133]="\\N";be[160]="\\_";be[8232]="\\L";be[8233]="\\P";var gL=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],mL=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function EL(e,t){var r,n,i,s,o,a,u;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),u=e.compiledTypeMap.fallback[o],u&&JE.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[o]=a;return r}function yL(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new De("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ge.repeat("0",n-t.length)+t}var SL=1,Oi=2;function AL(e){this.schema=e.schema||GE,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=ge.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=EL(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Oi:SL,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function IE(e,t){for(var r=ge.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function pd(e,t){return`
`+ge.repeat(" ",e.indent*t)}function vL(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function go(e){return e===rL||e===eL}function Pi(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==yd||65536<=e&&e<=1114111}function wE(e){return Pi(e)&&e!==yd&&e!==tL&&e!==Ri}function NE(e,t,r){var n=wE(e),i=n&&!go(e);return(r?n:n&&e!==ey&&e!==ty&&e!==ry&&e!==ny&&e!==iy)&&e!==fd&&!(t===_o&&!i)||wE(t)&&!go(t)&&e===fd||t===_o&&i}function bL(e){return Pi(e)&&e!==yd&&!go(e)&&e!==cL&&e!==fL&&e!==_o&&e!==ey&&e!==ty&&e!==ry&&e!==ny&&e!==iy&&e!==fd&&e!==oL&&e!==uL&&e!==nL&&e!==_L&&e!==lL&&e!==dL&&e!==aL&&e!==iL&&e!==sL&&e!==pL&&e!==hL}function TL(e){return!go(e)&&e!==_o}function bi(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function sy(e){var t=/^\n* /;return t.test(e)}var oy=1,hd=2,ay=3,uy=4,mn=5;function RL(e,t,r,n,i,s,o,a){var u,c=0,l=null,f=!1,p=!1,h=n!==-1,g=-1,_=bL(bi(e,0))&&TL(bi(e,e.length-1));if(t||o)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=bi(e,u),!Pi(c))return mn;_=_&&NE(c,l,a),l=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=bi(e,u),c===Ri)f=!0,h&&(p=p||u-g-1>n&&e[g+1]!==" ",g=u);else if(!Pi(c))return mn;_=_&&NE(c,l,a),l=c}p=p||h&&u-g-1>n&&e[g+1]!==" "}return!f&&!p?_&&!o&&!i(e)?oy:s===Oi?mn:hd:r>9&&sy(e)?mn:o?s===Oi?mn:hd:p?uy:ay}function OL(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===Oi?'""':"''";if(!e.noCompatMode&&(gL.indexOf(t)!==-1||mL.test(t)))return e.quotingType===Oi?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function u(c){return vL(e,c)}switch(RL(t,a,e.indent,o,u,e.quotingType,e.forceQuotes&&!n,i)){case oy:return t;case hd:return"'"+t.replace(/'/g,"''")+"'";case ay:return"|"+LE(t,e.indent)+xE(IE(t,s));case uy:return">"+LE(t,e.indent)+xE(IE(PL(t,o),s));case mn:return'"'+CL(t)+'"';default:throw new De("impossible error: invalid scalar style")}}()}function LE(e,t){var r=sy(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function xE(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function PL(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,ME(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],u=o[2];s=u[0]===" ",n+=a+(!i&&!s&&u!==""?`
`:"")+ME(u,t),i=s}return n}function ME(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,u="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,u+=`
`+e.slice(i,s),i=s+1),o=a;return u+=`
`,e.length-i>t&&o>i?u+=e.slice(i,o)+`
`+e.slice(o+1):u+=e.slice(i),u.slice(1)}function CL(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=bi(e,i),n=be[r],!n&&Pi(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||yL(r);return t}function IL(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(Bt(e,t,a,!1,!1)||typeof a>"u"&&Bt(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function DE(e,t,r,n){var i="",s=e.tag,o,a,u;for(o=0,a=r.length;o<a;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(Bt(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&Bt(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=pd(e,t)),e.dump&&Ri===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function wL(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,u,c,l;for(o=0,a=s.length;o<a;o+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),u=s[o],c=r[u],e.replacer&&(c=e.replacer.call(r,u,c)),Bt(e,t,u,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Bt(e,t,c,!1,!1)&&(l+=e.dump,n+=l));e.tag=i,e.dump="{"+n+"}"}function NL(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,u,c,l,f,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new De("sortKeys must be a boolean or a function");for(a=0,u=o.length;a<u;a+=1)p="",(!n||i!=="")&&(p+=pd(e,t)),c=o[a],l=r[c],e.replacer&&(l=e.replacer.call(r,c,l)),Bt(e,t+1,c,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Ri===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,f&&(p+=pd(e,t)),Bt(e,t+1,l,!0,f)&&(e.dump&&Ri===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=s,e.dump=i||"{}"}function BE(e,t,r){var n,i,s,o,a,u;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,ZE.call(a.represent)==="[object Function]")n=a.represent(t,u);else if(JE.call(a.represent,u))n=a.represent[u](t,u);else throw new De("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function Bt(e,t,r,n,i,s,o){e.tag=null,e.dump=r,BE(e,r,!1)||BE(e,r,!0);var a=ZE.call(e.dump),u=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",f,p;if(l&&(f=e.duplicates.indexOf(r),p=f!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(i=!1),p&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(l&&p&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(NL(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(wL(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?DE(e,t-1,e.dump,i):DE(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(IL(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&OL(e,e.dump,t,s,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new De("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function LL(e,t){var r=[],n=[],i,s;for(_d(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function _d(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)_d(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)_d(e[n[i]],t,r)}function xL(e,t){t=t||{};var r=new AL(t);r.noRefs||LL(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Bt(r,0,n,!0,!0)?r.dump+`
`:""}var ML=xL,DL={dump:ML};function Sd(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var cy=kE;var ly=QE.load,Iq=QE.loadAll,wq=DL.dump;var Nq=Sd("safeLoad","load"),Lq=Sd("safeLoadAll","loadAll"),xq=Sd("safeDump","dump");var BL=".yarnbuildrc.yml",vd=".bundleignore",FL=H.isObject({folders:H.isObject({input:H.isOneOf([H.isString(),H.isArray(H.isString())]),output:H.isNullable(H.isOneOf([H.isString(),H.isArray(H.isString())]))}),exclude:H.isArray(H.isString()),bail:H.isBoolean(),hideYarnBuildBadge:H.isBoolean(),ignoreFile:H.isString()}),UL=H.isObject({input:H.isOptional(H.isOneOf([H.isString(),H.isArray(H.isString())])),output:H.isOptional(H.isNullable(H.isOneOf([H.isString(),H.isArray(H.isString())]))),tsconfig:H.isOptional(H.isString())}),Ad={folders:{input:".",output:null},exclude:[],bail:!0,hideYarnBuildBadge:!1,ignoreFile:vd};async function dy(e){let t=BL,r=Ci.ppath.join(e.projectCwd||e.startingCwd,t);if(Ci.xfs.existsSync(r)){let n=await Ci.xfs.readFilePromise(r,"utf8"),i=[];try{let s=ly(n,{schema:cy});if(FL(s,{errors:i}))return s;console.warn(i)}catch{let o="";throw n.match(/^\s+(?!-)[^:]+\s+\S+/m)&&(o=" (config is corrupted, please check it matches the shape in the yarn.build readme."),new Error(`Parse error when loading ${r}; please check it's proper Yaml${o}`)}}return Ad}async function fy(e){return await dy(e)}async function py(e){let t=await dy(e);return{...Ad,...t,folders:{...Ad.folders,...t.folders??{}}}}function hy(e){let t={...e["yarn.build"]};return UL(t)?t:{}}var B={PACKAGE_NAME:"package.name",PACKAGE_SCOPE:"package.scope",PACKAGE_DIRECTORY:"package.directory",PACKAGE_COMMAND:"package.command",GIT_BRANCH:"git.branch",GIT_COMMIT:"git.commit",YARN_BUILD_MESSAGE_CODE:"yarn.build.message.code",YARN_BUILD_CONFIG_FOLDERS_INPUT:"yarn.build.config.folders.input",YARN_BUILD_CONFIG_FOLDERS_OUTPUT:"yarn.build.config.folders.output",YARN_BUILD_CONFIG_EXCLUDE:"yarn.build.config.exclude",YARN_BUILD_CONFIG_BAIL:"yarn.build.config.bail",YARN_BUILD_CONFIG_HIDE_BADGE:"yarn.build.config.hide-badge",YARN_BUILD_CONFIG_MAX_CONCURRENCY:"yarn.build.config.max-concurrency",YARN_BUILD_FLAGS_OUTPUT_JSON:"yarn.build.flags.output.json",YARN_BUILD_FLAGS_ALL:"yarn.build.flags.all",YARN_BUILD_FLAGS_TARGETS:"yarn.build.flags.targets",YARN_BUILD_FLAGS_COMMAND:"yarn.build.flags.command",YARN_BUILD_FLAGS_INTERLACED:"yarn.build.flags.interlaced",YARN_BUILD_FLAGS_VERBOSE:"yarn.build.flags.verbose",YARN_BUILD_FLAGS_DRY_RUN:"yarn.build.flags.dry-run",YARN_BUILD_FLAGS_IGNORE_CACHE:"yarn.build.flags.ignore-cache",YARN_BUILD_FLAGS_MAX_CONCURRENCY:"yarn.build.flags.max-concurrency",YARN_BUILD_FLAGS_CONTINUE_ON_ERROR:"yarn.build.flags.continue-on-error",YARN_BUILD_FLAGS_EXCLUDE:"yarn.build.flags.exclude",YARN_BUILD_FLAGS_EXCLUDE_CURRENT:"yarn.build.flags.exclude.current",YARN_BUILD_FLAGS_CHANGES:"yarn.build.flags.changes",YARN_BUILD_FLAGS_SINCE:"yarn.build.flags.since",YARN_BUILD_FLAGS_SINCE_BRANCH:"yarn.build.flags.since-branch",YARN_BUILD_FLAGS_ONLY_CURRENT:"yarn.build.flags.only-current",YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES:"yarn.build.flags.ignore-dependencies",YARN_BUILD_FLAGS_BUNDLE_QUIET:"yarn.build.flags.bundle.quiet",YARN_BUILD_FLAGS_BUNDLE_TEMPORARY_DIRECTORY:"yarn.build.flags.bundle.temporary-directory",YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY:"yarn.build.flags.bundle.output-directory",YARN_BUILD_FLAGS_BUNDLE_NO_COMPRESS:"yarn.build.flags.bundle.no-compress",YARN_BUILD_FLAGS_BUNDLE_ARCHIVE_NAME:"yarn.build.flags.bundle.archive-name",YARN_BUILD_FLAGS_BUNDLE_EXCLUDE:"yarn.build.flags.bundle.exclude",YARN_BUILD_FLAGS_BUNDLE_IGNORE_FILE:"yarn.build.flags.bundle.ignore-file",YARN_BUILD_PACKAGE_NEEDS_RUN:"yarn.build.package.needs-run",YARN_BUILD_PACKAGE_RUN_COMMAND:"yarn.build.package.run.command",YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT:"yarn.build.package.run.command.exit"};var A0=z(F());var y0=z(F()),S0=z(zd());var h0=z(Da()),_0=z(Yi()),g0=z(At()),m0=z(p0()),E0=z(Da()),ui=z(F());process.env.DEBUG&&ui.diag.setLogger(new ui.DiagConsoleLogger,ui.DiagLogLevel.DEBUG);var hs=class{static getInstance(){return this._instance||(this._instance=new this().start())}static provider(){return this._instance||(this._instance=new this().start())}start(){let t=new m0.OTLPTraceExporter,r=new h0.BasicTracerProvider({resource:new _0.Resource({[g0.SemanticResourceAttributes.SERVICE_NAME]:"yarn.build"})});r.addSpanProcessor(new E0.BatchSpanProcessor(t));async function n(i){try{await r.shutdown(),process.env.DEBUG&&console.info("gracefullty exited trace provider")}finally{process.exit(isNaN(+i)?1:+i)}}return["beforeExit","exit","uncaughtException","unhandledRejection","SIGHUP","SIGINT","SIGQUIT","SIGILL","SIGTRAP","SIGABRT","SIGBUS","SIGFPE","SIGUSR1","SIGSEGV","SIGUSR2","SIGTERM"].forEach(i=>process.on(i,n)),r}};var Qr=z(F()),ot=class{constructor(t){this.name=t,this._tracer=hs.getInstance().getTracer(t)}recordException(t,r){(typeof typeof r=="string"||r instanceof Error)&&(t.recordException(r),t.setStatus({code:y0.SpanStatusCode.ERROR,message:r instanceof Error?r.message:r}))}async startSpan(t,r){let n;if(typeof t.ctx>"u"?n=Qr.context.active():n=t.ctx,!!t.propegateFromEnv||t?.spanOptions?.kind==4){let o=process.env.TRACEPARENT;if(typeof o=="string"){let a=(0,S0.parseTraceParent)(o??"");a&&(n=Qr.trace.setSpanContext(Qr.context.active(),a))}}let i=this._tracer.startSpan(t.name,t.spanOptions,n),s=Qr.trace.setSpan(n,i);try{return r.constructor.name==="AsyncFunction"?await r({span:i,ctx:s}):r({span:i,ctx:s})}catch(o){if((typeof o=="string"||o instanceof Error)&&this.recordException(i,o),!t.supressExceptions)throw o}finally{i.end()}throw new Error("Unknown error")}async wrap(t,r,...n){let i;return typeof t.ctx>"u"?i=Qr.context.active():i=t.ctx,await(async()=>await this.startSpan({name:t.name,ctx:i},async()=>await r(...n)))()}};var T0=z(F());var Jr=class extends Zr.BaseCommand{constructor(){super(...arguments);this.tracer=new ot("yarn.build");this.json=at.Option.Boolean("--json",!1,{description:"flag is set the output will follow a JSON-stream output also known as NDJSON (https://github.com/ndjson/ndjson-spec)"});this.quiet=at.Option.Boolean("-q,--quiet",!1,{description:"suppress progess messages"});this.temporaryDirectory=at.Option.String("--temporary-directory",{description:"superseeds --output-directory and --no-compress, when set the temporary directory used for bundling is written to a file you pass here "});this.outputDirectory=at.Option.String("-o,--output-directory",{description:"sets the output directory, this should be outside your source input directory."});this.noCompress=at.Option.Boolean("--no-compress",!1,{description:"set this with --output-directory to skip zipping your bundle, when this is set your output directory must be outside your project root"});this.archiveName=at.Option.String("-a,--archive-name","bundle.zip",{description:"sets the name of the archive. Any files matching this, will be excluded from subsequent archives. Defaults to ./bundle.zip"});this.exclude=at.Option.Array("--exclude",[],{arity:1,description:"Exclude specific paths from the final bundle."});this.ignoreFile=at.Option.String("--ignore-file",vd,{description:"set the name of ignore file. Files matching this in workspace root and package root will be used to indicate which files will be excluded from bundle."})}progress({code:r,group:n,msg:i,span:s}){this.quiet!==!0&&console.info(`\u27A4 ${r}:${n}${i}`),typeof s<"u"&&s.addEvent(i,{[B.YARN_BUILD_MESSAGE_CODE]:r})}async removeUnusedPackages(r,n,i,s){return await this.tracer.startSpan({name:"remove unused packages",ctx:r},async({span:o})=>{let{project:a,workspace:u}=await Ne.Project.find(s,i);if(!u)throw new Zr.WorkspaceRequiredError(a.cwd,i);let c=await Ne.Project.find(s,n);if(!c.workspace)throw new Zr.WorkspaceRequiredError(c.project.cwd,n);let l=new Set([u,c.workspace]),f=await fy(s);this.exclude=f.exclude?[...this.exclude,...f.exclude]:this.exclude,this.ignoreFile=f?.ignoreFile??this.ignoreFile;for(let p of l)for(let h of Ne.Manifest.allDependencies)for(let g of p.manifest.getForScope(h).values()){let _=a.tryWorkspaceByDescriptor(g);_!==null&&(l.add(_),this.progress({code:"YB1001",group:" \u2502 ",msg:`required:	${_.relativeCwd}`,span:o}))}for(let p of a.workspaces)l.has(p)||p.cwd!==n&&(await Z.xfs.removePromise(p.cwd),this.progress({code:"YB1001",group:" \u2502 ",msg:`unused:	${p.relativeCwd}`,span:o}))})}async removeEmptyDirectories(r,{tmpDir:n,cwd:i}){let s=T0.trace.getSpan(r);if(!Z.xfs.statSync(i).isDirectory())return!1;let a=await Z.xfs.readdirPromise(i);for(let u of a)await this.removeEmptyDirectories(r,{tmpDir:n,cwd:Z.ppath.join(i,u)});return a=await Z.xfs.readdirPromise(i),a.length===0?(await Z.xfs.removePromise(i),this.progress({code:"YB1002",group:" \u2502 ",msg:`empty:	${i.replace(n+"/","")}`,span:s}),!0):!1}async removeExcluded(r,{tmpDir:n,excluded:i,nonRemovableFiles:s,yarnDirectory:o,cacheDirectory:a,shouldRemoveEmptyDirectories:u=!1}){let c=`${n}/.git`;try{await Z.xfs.lstatPromise(c)&&await Z.xfs.removePromise(c)}catch{}await Promise.all(i.map(async l=>{if(!l.startsWith(o)&&!l.startsWith(a)&&!s.includes(l)&&!!l.startsWith(n))try{await Z.xfs.lstatPromise(l)&&await Z.xfs.removePromise(l)}catch{}})),u&&await this.removeEmptyDirectories(r,{tmpDir:n,cwd:n})}async execute(){return await this.tracer.startSpan({name:"yarn bundle",propegateFromEnv:!0},async({span:r,ctx:n})=>{this.progress({code:"YB1000",group:" \u250C ",msg:`Prepare ${this.context.cwd} for bundling`,span:r}),this.progress({code:"YB1000",group:" \u2502 ",msg:"Preparing temporary directory",span:r});let i=async s=>await this.tracer.startSpan({name:"prepare for bundle",ctx:n},async({span:o,ctx:a})=>{let u=`${this.context.cwd}`,c=Z.ppath.join(u,this.archiveName),l={[B.YARN_BUILD_FLAGS_BUNDLE_QUIET]:this.quiet,[B.YARN_BUILD_FLAGS_BUNDLE_TEMPORARY_DIRECTORY]:this.temporaryDirectory,[B.YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY]:s,[B.YARN_BUILD_FLAGS_BUNDLE_NO_COMPRESS]:this.noCompress,[B.YARN_BUILD_FLAGS_BUNDLE_ARCHIVE_NAME]:this.archiveName,[B.YARN_BUILD_FLAGS_BUNDLE_EXCLUDE]:this.exclude,[B.YARN_BUILD_FLAGS_BUNDLE_IGNORE_FILE]:this.ignoreFile};if(o.setAttributes(l),typeof this.outputDirectory=="string"){let C=v0(this.outputDirectory);if(o.setAttribute(B.YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY,C),Z.xfs.existsSync(C)||await Z.xfs.mkdirPromise(C),Z.xfs.readdirSync(C).length!=0)throw new Error(" --output-directory is not empty");c=Z.ppath.join(C,this.archiveName)}let f=await Ne.Configuration.find(this.context.cwd,this.context.plugins);if(f.projectCwd===null)throw new Error("Can't find project directory");let p=u.replace(f.projectCwd,""),h=!1,g;if(this.noCompress===!0){if(typeof this.outputDirectory!="string")throw new Error("ERROR: you set --no-compress, but did not specify --output-directory");if(g=v0(this.outputDirectory),g.startsWith(f.projectCwd))throw new Error(`ERROR: --output-directory is inside project root with --no-compress set.
This is no allowed to prevent you destroying your project`);h=!0}let _=new Z.NodeFS;this.progress({code:"YB1000",group:" \u2502 ",msg:"Copying repo to temporary directory",span:o}),await this.tracer.wrap({name:"copy to tmp dir",ctx:a},async C=>Z.xfs.copyPromise(s,C,{baseFs:_}),f.projectCwd);let v=`${s}${p}`,A=`${v}/${this.archiveName}`,S=this.exclude;try{await Z.xfs.lstatPromise(A)&&S.push(A)}catch{}let b=await Ne.Configuration.find(v,this.context.plugins);b.use("<custom>",{enableNetwork:!1},v);let X=await Ne.Cache.find(b),x=`${s}/.yarn`,D=X.cwd;this.progress({code:"YB1000",group:" \u2502 ",msg:"Removing unused and excluded workspaces, folders and files",span:o}),await this.removeUnusedPackages(a,s,v,b);let{project:P,workspace:w}=await Ne.Project.find(b,v);if(!w)throw new Zr.WorkspaceRequiredError(P.cwd,v);o.setAttributes({[B.PACKAGE_DIRECTORY]:p,[B.PACKAGE_NAME]:w.anchoredLocator.name}),typeof w.anchoredLocator.scope=="string"&&o.setAttribute(B.PACKAGE_SCOPE,`@${w.anchoredLocator.scope}`);let N=await Ne.Project.find(b,s);if(!N.workspace)throw new Zr.WorkspaceRequiredError(N.project.cwd,s);let j=new Set([w,N.workspace]),y=AE({workspaces:j,rootDir:s});S=await ad({cwd:s,ignoreFile:this.ignoreFile,exclude:S});for(let C of j)for(let ce of Ne.Manifest.allDependencies)for(let E of C.manifest.getForScope(ce).values()){let m=P.tryWorkspaceByDescriptor(E);m!==null&&j.add(m)}return await this.tracer.wrap({name:"remove unused workspaces",ctx:a},async()=>{for(let C of j){let ce=await ad({cwd:C.cwd,ignoreFile:this.ignoreFile,exclude:S});await this.removeExcluded(a,{tmpDir:s,excluded:ce,nonRemovableFiles:y,yarnDirectory:x,cacheDirectory:D,shouldRemoveEmptyDirectories:!1})}}),await this.tracer.wrap({name:"remove excluded files",ctx:a},async()=>{await this.removeExcluded(a,{tmpDir:s,excluded:S,nonRemovableFiles:y,yarnDirectory:x,cacheDirectory:D,shouldRemoveEmptyDirectories:!0})}),await this.tracer.wrap({name:"add entrypoint.js",ctx:a},async()=>{for(let C of P.workspaces)C.manifest.devDependencies.clear(),!j.has(C)&&(C.manifest.dependencies.clear(),C.manifest.peerDependencies.clear());if(w?.manifest?.raw?.main){let C=w.relativeCwd+_h.default.posix.sep+w?.manifest?.raw?.main,ce=".pnp.cjs";Z.xfs.writeFilePromise(`${s}${_h.default.posix.sep}entrypoint.js`,qU(C,ce))}this.progress({code:"YB1000",group:" \u2514 ",msg:"Completed",span:o})}),(await this.tracer.startSpan({name:"bundle",ctx:a},async({ctx:C})=>await Ne.StreamReport.start({configuration:b,json:this.json,stdout:this.context.stdout,includeLogs:!0},async ce=>{if(await this.tracer.wrap({name:"yarn install",ctx:C},async({cache:E,report:m})=>await P.install({cache:E,report:m}),{cache:X,report:ce}),!(typeof this.temporaryDirectory<"u"))if(h&&typeof g<"u")ce.reportInfo(null,"Moving build to output directory"),await this.tracer.wrap({name:"copy to output directory",ctx:C},async({outputPath:E,tmpDir:m})=>_.copyPromise(E,m),{outputPath:g,tmpDir:s});else{let E=await(0,b0.getLibzipPromise)();ce.reportInfo(null,"Creating archive");let m=new Z.ZipFS(c,{create:!0,libzip:E});ce.reportInfo(null,"Copying files to archive"),await this.tracer.wrap({name:"copy to zip",ctx:C},async({tmpDir:Ee,baseFs:Y})=>await m.copyPromise("/",Ee,{baseFs:Y}),{tmpDir:s,baseFs:_}),await this.tracer.wrap({name:"save zip",ctx:C},async()=>m.saveAndClose()),ce.reportJson({name:"ArchiveSuccess",message:"Archive created successfuly at ",outputArchive:c})}}))).exitCode()});return typeof this.temporaryDirectory<"u"?await i(this.temporaryDirectory):await Z.xfs.mktempPromise(i)})}};Jr.paths=[["bundle"]],Jr.usage=at.Command.Usage({category:"Bundle commands",description:"bundle a workspace package into a deployable archive",details:`
      This command will bundle up the source of the target package along with
      its dependencies into an archive.

      This is designed to be used for deployment, not for publishing, so
      everything to run except for a runtime (ie node) is bundled into
      the archive.

      Call this after you have run your build step (if any).

      This is designed to work best with zero-install configurations. If you
      don't have that, run \`yarn install\` before this command.

      Why not just compile like we do on the front-end?
      Some dependencies may use require in interesting ways, or be or call
      binaries. It's safest not to transpile them.
    `});var qU=(e,t)=>`
"use strict";

const path = require("path");

const pnp = require(path.normalize(path.resolve( __dirname, "${t}"))).setup();

const index = require(path.normalize(path.resolve( __dirname,"${e}")));

Object.defineProperty(exports, "__esModule", { value: true });

exports.default = index;
`;function v0(e){let t=Z.npath.toPortablePath(e);return Z.ppath.resolve(t)}var ec=R("@yarnpkg/cli"),xe=R("@yarnpkg/core"),ue=R("clipanion"),qh=z(R("path")),As=z(Pc()),YT=R("os");var k=R("@yarnpkg/core"),je=z(w0()),DT=R("os"),W=R("@yarnpkg/fslib");var kh=z(od()),BT=R("events"),FT=z(j0()),UT=z(H0()),Fh=z(V0()),Zu=z(Oh()),Ju=z(ET());var pi=class{constructor(){this.tracer=new ot("yarn.build");this.nodes={};this.size=0;this.runSize=0;this.ran=new Set;this.dryRunCallback=()=>{}}addNode(t){if(this.nodes[t])return this.nodes[t];let r=new en(t);return this.nodes[t]=r,this.size=Object.keys(this.nodes).length,this.checkCyclical(r),r}addRunCallback(t,r){let n=t;this.nodes[t.id]||(n=this.addNode(t.id)),n.runCallback||(n.addRunCallback(r),this.runSize++)}getNode(t){if(this.nodes[t])return this.nodes[t]}resetRuns(){this.ran=new Set}checkCyclical(t){let r=new Set,n=new Set;this.resolveNode(t,r,n)}resolveNode(t,r,n){n.add(t.id),Object.keys(t.dependencies).forEach(i=>{let s=t.dependencies[i];if(!r.has(s.id)){if(n.has(s.id))throw new ms(t.id,s.id);this.resolveNode(s,r,n)}}),r.add(t.id),n.delete(t.id)}async run(t,r,n=!1){return await this.tracer.startSpan({name:"run commands",ctx:t},async({ctx:i})=>{let s=new Set,o=new Set,a={};for(let u of r)this.resolveQueue(u,s,a);return n?(await this.dryRunLoop(s,a,o,0),a):(await new Promise(u=>{this.workLoop(i,s,a,o,u)}),a)})}async dryRunLoop(t,r,n,i=0){if(n.forEach((s,o)=>{this.dryRunCallback(s,i-1),r[s.id]={success:!0,done:!0},n.delete(o)}),t.size!==0&&t.forEach(s=>{s.canStart(r)&&s?.node?.runCallback&&(n.add(s.node),t.delete(s))}),n.size!=0)return await this.dryRunLoop(t,r,n,i+1)}workLoop(t,r,n,i,s){if(r.size!==0&&r.forEach(o=>{o.canStart(n)&&(o?.node?.runCallback?(o?.node?.runCallback(t,n),i.add(o.node)):n[o.node.id]={success:!0,done:!0},r.delete(o))}),i.forEach((o,a)=>{n[o.id].done&&i.delete(a)}),Object.keys(n).map(o=>n[o]?.done??!0).every(o=>o===!0)){s();return}setTimeout(()=>this.workLoop(t,r,n,i,s),30)}resolveQueue(t,r,n){let i=[];if(Object.keys(t.dependencies).forEach(s=>{let o=t.dependencies[s];if(i.push(o.id),!n[o.id]&&o.runCallback){n[o.id]={...pi.RunLogInit};let a=this.resolveQueue(o,r,n),u={node:o,canStart:pi.QueueItemCanStart(a)};r.add(u)}}),!n[t.id]&&t.runCallback){n[t.id]={...pi.RunLogInit};let s={node:t,canStart:pi.QueueItemCanStart(i)};r.add(s)}return i}},fi=pi;fi.RunLogInit={success:!1,done:!1},fi.QueueItemCanStart=t=>r=>t.map(n=>r[n]?.done??!0).every(n=>n===!0);var en=class{constructor(t){this.cancelled=!1;this.skip=!1;this.id=t,this.dependencies={}}addDependency(t){return this.dependencies[t.id]||(this.dependencies[t.id]=t),this}addRunCallback(t){return this.runCallback?this:(this.runCallback=(r,n)=>{if(!this.cancelled)return t(r,en.cancelDependentJobs(this)).then(i=>{n[this.id]={done:!0,success:i}})},this)}static cancelDependentJobs(t){return()=>{typeof t.dependencies>"u"||Object.keys(t.dependencies).forEach(r=>{let n=t.dependencies[r];n.cancelled=!0})}}},ms=class extends Error{constructor(r,n){super("");this.name="CyclicDependencyError",this.code="YN0003",this.node=r,this.dep=n}};var yT=z(Oh()),fk="\x1B",Ye=fk+"[",Nh=class{static pad(t=1){for(let r=0;r<t;r++)process.stdout.write(`
`);Nh.cursorUp(t)}static cursorUp(t=1){process.stdout.write(Ye+`${t}A`)}static cursorSave(){process.stdout.write(Ye+"s")}static cursorRestore(){process.stdout.write(Ye+"u")}static autoWrap(t){t?process.stdout.write(Ye+"?7h"):process.stdout.write(Ye+"?7l")}static clearScreenDown(){process.stdout.write(Ye+"J")}static async cursorPositionReport(){return new Promise(t=>{process.stdin.setRawMode(!0),process.stdin.once("data",r=>{process.stdin.setRawMode(!1),process.stdin.pause();let[n,i]=r.slice(2,r.length-1).toString().split(";").map(Number);t({x:i,y:n})}),process.stdout.write(Ye+"6n")})}static setScrollableRegion(t,r){process.stdout.write(Ye+`${t};${r}r`)}static resetScrollableRegion(){process.stdout.write(Ye+"r")}static moveTo(t){process.stdout.write(Ye+`${t.y};${t.x}H`)}static cursorHome(){process.stdout.write(Ye+"H")}static alternateScreen(){process.stdout.write(Ye+"?1049h")}static mainScreen(){process.stdout.write(Ye+"?1049l")}static linesRequired(t,r){let n=new RegExp(`([^
]{0,${r}})(
)?`,"gm");return((0,yT.default)(t).match(n)??[""]).length-1}},tt=Nh;tt.row=0,tt.column=0;var AT=R("child_process"),vT=R("util");var ST=()=>process.platform==="win32"?"windows":"unix";var pk=(0,vT.promisify)(AT.exec),bT=async e=>{let t=ST(),r=(({platform:i,pid:s})=>{switch(i){case"unix":return`pgrep "-P ${s}"`;case"windows":return`wmic process where (ParentProcessId=${s}) get ProcessId`;default:throw new Error("Unable to find parent process")}})({platform:t,pid:e}),n=[];try{let{stdout:i}=await pk(r);n=i.split(`
`).filter(Boolean).map(s=>parseInt(s,10)).filter(s=>!isNaN(s))}catch{}return n};var hi={hasBeenTerminated:!1,callId:0},Xu=async(e=0)=>{if(e!==hi.callId||hi.hasBeenTerminated)return;let t=process.pid;(await bT(t)).forEach(i=>{try{process.kill(i,"SIGKILL")}catch{}});let n=hi.callId+1;hi.callId=n,setTimeout(async()=>{Xu(n)},50)};var kT=z(F());var se=z(R("path"),1),dr=z(R("fs"),1),CT=z(R("module"),1);function zu(e){let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}function TT(e,t){for(;;){let r=se.default.join(e,t);if(dr.default.existsSync(r))return zu(r);let n=se.default.dirname(e);if(n===e)return;e=n}}function hk(e,t){t===void 0&&(t=!1);var r=e.length,n=0,i="",s=0,o=16,a=0,u=0,c=0,l=0,f=0;function p(b,X){for(var x=0,D=0;x<b||!X;){var P=e.charCodeAt(n);if(P>=48&&P<=57)D=D*16+P-48;else if(P>=65&&P<=70)D=D*16+P-65+10;else if(P>=97&&P<=102)D=D*16+P-97+10;else break;n++,x++}return x<b&&(D=-1),D}function h(b){n=b,i="",s=0,o=16,f=0}function g(){var b=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&_i(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&_i(e.charCodeAt(n)))for(n++;n<e.length&&_i(e.charCodeAt(n));)n++;else return f=3,e.substring(b,n);var X=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&_i(e.charCodeAt(n))){for(n++;n<e.length&&_i(e.charCodeAt(n));)n++;X=n}else f=3;return e.substring(b,X)}function _(){for(var b="",X=n;;){if(n>=r){b+=e.substring(X,n),f=2;break}var x=e.charCodeAt(n);if(x===34){b+=e.substring(X,n),n++;break}if(x===92){if(b+=e.substring(X,n),n++,n>=r){f=2;break}var D=e.charCodeAt(n++);switch(D){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:var P=p(4,!0);P>=0?b+=String.fromCharCode(P):f=4;break;default:f=5}X=n;continue}if(x>=0&&x<=31)if(Es(x)){b+=e.substring(X,n),f=2;break}else f=6;n++}return b}function v(){if(i="",f=0,s=n,u=a,l=c,n>=r)return s=r,o=17;var b=e.charCodeAt(n);if(Lh(b)){do n++,i+=String.fromCharCode(b),b=e.charCodeAt(n);while(Lh(b));return o=15}if(Es(b))return n++,i+=String.fromCharCode(b),b===13&&e.charCodeAt(n)===10&&(n++,i+=`
`),a++,c=n,o=14;switch(b){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,i=_(),o=10;case 47:var X=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<r&&!Es(e.charCodeAt(n));)n++;return i=e.substring(X,n),o=12}if(e.charCodeAt(n+1)===42){n+=2;for(var x=r-1,D=!1;n<x;){var P=e.charCodeAt(n);if(P===42&&e.charCodeAt(n+1)===47){n+=2,D=!0;break}n++,Es(P)&&(P===13&&e.charCodeAt(n)===10&&n++,a++,c=n)}return D||(n++,f=1),i=e.substring(X,n),o=13}return i+=String.fromCharCode(b),n++,o=16;case 45:if(i+=String.fromCharCode(b),n++,n===r||!_i(e.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=g(),o=11;default:for(;n<r&&A(b);)n++,b=e.charCodeAt(n);if(s!==n){switch(i=e.substring(s,n),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(b),n++,o=16}}function A(b){if(Lh(b)||Es(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function S(){var b;do b=v();while(b>=12&&b<=15);return b}return{setPosition:h,getPosition:function(){return n},scan:t?S:v,getToken:function(){return o},getTokenValue:function(){return i},getTokenOffset:function(){return s},getTokenLength:function(){return n-s},getTokenStartLine:function(){return u},getTokenStartCharacter:function(){return s-l},getTokenError:function(){return f}}}function Lh(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Es(e){return e===10||e===13||e===8232||e===8233}function _i(e){return e>=48&&e<=57}var Qu;(function(e){e.DEFAULT={allowTrailingComma:!1}})(Qu||(Qu={}));function _k(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=Qu.DEFAULT);var n=null,i=[],s=[];function o(u){Array.isArray(i)?i.push(u):n!==null&&(i[n]=u)}var a={onObjectBegin:function(){var u={};o(u),s.push(i),i=u,n=null},onObjectProperty:function(u){n=u},onObjectEnd:function(){i=s.pop()},onArrayBegin:function(){var u=[];o(u),s.push(i),i=u,n=null},onArrayEnd:function(){i=s.pop()},onLiteralValue:o,onError:function(u,c,l){t.push({error:u,offset:c,length:l})}};return gk(e,a,r),i[0]}function gk(e,t,r){r===void 0&&(r=Qu.DEFAULT);var n=hk(e,!1);function i(N){return N?function(){return N(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function s(N){return N?function(j){return N(j,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var o=i(t.onObjectBegin),a=s(t.onObjectProperty),u=i(t.onObjectEnd),c=i(t.onArrayBegin),l=i(t.onArrayEnd),f=s(t.onLiteralValue),p=s(t.onSeparator),h=i(t.onComment),g=s(t.onError),_=r&&r.disallowComments,v=r&&r.allowTrailingComma;function A(){for(;;){var N=n.scan();switch(n.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:_||S(11);break;case 2:S(12);break;case 6:S(16);break}switch(N){case 12:case 13:_?S(10):h();break;case 16:S(1);break;case 15:case 14:break;default:return N}}}function S(N,j,y){if(j===void 0&&(j=[]),y===void 0&&(y=[]),g(N),j.length+y.length>0)for(var $=n.getToken();$!==17;){if(j.indexOf($)!==-1){A();break}else if(y.indexOf($)!==-1)break;$=A()}}function b(N){var j=n.getTokenValue();return N?f(j):a(j),A(),!0}function X(){switch(n.getToken()){case 11:var N=n.getTokenValue(),j=Number(N);isNaN(j)&&(S(2),j=0),f(j);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return A(),!0}function x(){return n.getToken()!==10?(S(3,[],[2,5]),!1):(b(!1),n.getToken()===6?(p(":"),A(),w()||S(4,[],[2,5])):S(5,[],[2,5]),!0)}function D(){o(),A();for(var N=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(N||S(4,[],[]),p(","),A(),n.getToken()===2&&v)break}else N&&S(6,[],[]);x()||S(4,[],[2,5]),N=!0}return u(),n.getToken()!==2?S(7,[2],[]):A(),!0}function P(){c(),A();for(var N=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(N||S(4,[],[]),p(","),A(),n.getToken()===4&&v)break}else N&&S(6,[],[]);w()||S(4,[],[4,5]),N=!0}return l(),n.getToken()!==4?S(8,[4],[]):A(),!0}function w(){switch(n.getToken()){case 3:return P();case 1:return D();case 10:return b(!0);default:return X()}}return A(),n.getToken()===17?r.allowEmptyContent?!0:(S(4,[],[]),!1):w()?(n.getToken()!==17&&S(9,[],[]),!0):(S(4,[],[]),!1)}var mk=_k,Ek=/^\.{1,2}(\/.*)?$/,xh=e=>zu(Ek.test(e)?e:`./${e}`),{existsSync:ys}=dr.default,yk=e=>{try{return JSON.parse(e)}catch{}},Sk=()=>{let{findPnpApi:e}=CT.default;return e&&e(process.cwd())};function RT(e){let t=yk(dr.default.readFileSync(e,"utf8"));return se.default.join(e,"..",t&&"tsconfig"in t?t.tsconfig:"tsconfig.json")}function Ak(e,t){let r=e;if(r===".."&&(r+="/tsconfig.json"),r.startsWith(".")){let s=se.default.resolve(t,r);if(ys(s)&&dr.default.statSync(s).isFile()||!s.endsWith(".json")&&(s+=".json",ys(s)))return s;throw new Error(`File '${e}' not found.`)}let n=Sk();if(n){let{resolveRequest:s}=n,[o,a]=e.split("/"),u=o.startsWith("@")?`${o}/${a}`:o;try{if(u===e){let c=s(se.default.join(u,"package.json"),t);if(c){let l=RT(c);if(ys(l))return l}}else try{return s(e,t,{extensions:[".json"]})}catch{return s(se.default.join(e,"tsconfig.json"),t)}}catch{}}let i=TT(t,se.default.join("node_modules",r));if(i){if(dr.default.statSync(i).isDirectory()){let s=se.default.join(i,"package.json");if(ys(s)?i=RT(s):i=se.default.join(i,"tsconfig.json"),ys(i))return i}else if(i.endsWith(".json"))return i}if(!r.endsWith(".json")&&(r+=".json",i=TT(t,se.default.join("node_modules",r)),i))return i;throw new Error(`File '${e}' not found.`)}var vk=Object.defineProperty,bk=Object.defineProperties,Tk=Object.getOwnPropertyDescriptors,OT=Object.getOwnPropertySymbols,Rk=Object.prototype.hasOwnProperty,Ok=Object.prototype.propertyIsEnumerable,PT=(e,t,r)=>t in e?vk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gi=(e,t)=>{for(var r in t||(t={}))Rk.call(t,r)&&PT(e,r,t[r]);if(OT)for(var r of OT(t))Ok.call(t,r)&&PT(e,r,t[r]);return e},Pk=(e,t)=>bk(e,Tk(t));function Mh(e){var t;let r;try{r=dr.default.realpathSync(e)}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}let n=se.default.dirname(r),i=dr.default.readFileSync(r,"utf8").trim(),s={};if(i&&(s=mk(i),!s||typeof s!="object"))throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);if(s.extends){let o=Ak(s.extends,n),a=Mh(o);if(delete a.references,(t=a.compilerOptions)!=null&&t.baseUrl){let{compilerOptions:c}=a;c.baseUrl=se.default.relative(n,se.default.join(se.default.dirname(o),c.baseUrl))||"./"}a.files&&(a.files=a.files.map(c=>se.default.relative(n,se.default.join(se.default.dirname(o),c)))),a.include&&(a.include=a.include.map(c=>se.default.relative(n,se.default.join(se.default.dirname(o),c)))),delete s.extends;let u=Pk(gi(gi({},a),s),{compilerOptions:gi(gi({},a.compilerOptions),s.compilerOptions)});a.watchOptions&&(u.watchOptions=gi(gi({},a.watchOptions),s.watchOptions)),s=u}if(s.compilerOptions){let{compilerOptions:o}=s;o.baseUrl&&(o.baseUrl=xh(o.baseUrl)),o.outDir&&(Array.isArray(s.exclude)||(s.exclude=[]),s.exclude.push(o.outDir),o.outDir=xh(o.outDir))}if(s.files&&(s.files=s.files.map(xh)),s.include&&(s.include=s.include.map(zu)),s.watchOptions){let{watchOptions:o}=s;o.excludeDirectories&&(o.excludeDirectories=o.excludeDirectories.map(a=>zu(se.default.resolve(n,a))))}return s}var jT=z(MT()),Ik="yarn.build.json",qT=80,wk="-".repeat(qT);var Uh=class{constructor({project:t,report:r,runCommand:n,cli:i,configuration:s,pluginConfiguration:o,dryRun:a,ignoreRunCache:u,verbose:c,concurrency:l,continueOnError:f,excludeWorkspacePredicate:p,ignoreDependencies:h,failFast:g}){this.tracer=new ot("yarn.build");this.runGraph=new fi;this.runLength=0;this.runTargets=[];this.runMutexes={};this.dryRun=!1;this.ignoreRunCache=!1;this.verbose=!1;this.continueOnError=!1;this.entrypoints=new Set;this.excluded=new Set;this.runReporter=new BT.EventEmitter;this.ignoreDependencies=!1;this.failFast=!1;this.runReport={mutex:new Fh.Mutex,totalJobs:0,skipCount:0,previousOutput:"",successCount:0,failCount:0,ignoredCount:0,workspaces:{},done:!1};this.header="";this.nextUnitOfWork=[];this.checkIfRunIsRequiredCache={};this.planCache={};this.hasSetup=!1;this.setupRunReporter=()=>{this.runReporter.on("pending",(t,r,n)=>{this.runReport.mutex.acquire().then(i=>{this.runReport.workspaces[t]={name:n,stdout:[],stderr:[],done:!1,fail:!1,locator:r},i()})}),this.runReporter.on("start",(t,r,n,i)=>{this.runReport.mutex.acquire().then(s=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],start:Date.now(),runScript:i,name:n,locator:r},s()})}),this.runReporter.on("info",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stdout.push(r),n()})}),this.runReporter.on("error",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),n()})}),this.runReporter.on("success",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],done:!0},this.runReport.successCount++;let n=this.runReport.workspaces[t];if(je.default){let i=`\u2705 ${t}`.padEnd(60),s=rn(0,n.runtimeSeconds??0).padStart(19);process.stdout.write(`${i}${s}
`)}r()})}),this.runReporter.on("skipped",t=>{this.runReport.mutex.acquire().then(r=>{if(this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].skipped=!0,this.runReport.skipCount++,r(),je.default){let n=`\u23E9 ${t} `.padEnd(60),i="--".padStart(19);process.stdout.write(`${n}${i}
`)}})}),this.runReporter.on("ignored",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].ignored=!0,this.runReport.ignoredCount++,r();let n=this.runReport.workspaces[t],i=this.runLog?.get(`${t}#${this.runCommand}`);if(je.default){let s=`[IGNORE${i?.exitCode?`: ${i?.exitCode}`:""}] ${n.name} `.padEnd(60),o="--".padStart(19);process.stdout.write(`${s}${o}
`)}})}),this.runReporter.on("fail",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].fail=!0,this.runReport.failCount++,n();let i=this.runReport.workspaces[t],s=this.runLog?.get(`${t}#${this.runCommand}`);if(je.default){let o=`\u274C ${t}`.padEnd(50),a=`${s?.exitCode?`(exit code: ${s?.exitCode})`:"\u2192"} ${rn(0,i.runtimeSeconds??0)}`.padStart(29);process.stdout.write(`${o}${a}
`)}})})};this.getDependenciesCount=async t=>{let r=0;for(let n of k.Manifest.hardDependencies)for(let i of t.manifest.getForScope(n).values())this.project.tryWorkspaceByDescriptor(i)!==null&&(r+=1);return r};this.plan=async(t,r)=>{if(!t)throw new Error("Internal error: lost reference to parent workspace. Please open an issue.");if(typeof this.planCache[r.relativeCwd]<"u")return this.planCache[r.relativeCwd];this.runGraph.checkCyclical(t);let n=!1,i=!1;if(this.runMutexes[r.relativeCwd]=new Fh.Mutex,this.ignoreDependencies===!1)for(let o of k.Manifest.hardDependencies)for(let a of r.manifest.getForScope(o).values()){let u=this.project.tryWorkspaceByDescriptor(a);if(u===null||this.excludeWorkspacePredicate(u)||typeof u.manifest.scripts.get(this.runCommand)>"u")continue;let c=this.runGraph.addNode(u.relativeCwd);t.addDependency(c),this.runGraph.checkCyclical(c),await this.plan(c,u)&&(this.runGraph.addRunCallback(c,this.createRunItem(u)),i=!0,this.removeFromExcluded(u))}let s=!1;if(r!==this.project.topLevelWorkspace&&(s=await this.checkIfRunIsRequired(r)),this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator),i||s)n=!0,this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator,`${r.manifest.name?.scope?`@${r.manifest.name?.scope}/`:""}${r.manifest.name?.name}`),this.runGraph.addRunCallback(t,this.createRunItem(r)),this.removeFromExcluded(r),this.entrypoints.add(t),this.runTargets.push(r);else{let o=this.runLog?.get(`${r.relativeCwd}#${this.runCommand}`);o&&this.runLog?.set(`${r.relativeCwd}#${this.runCommand}`,{checksum:o.checksum,status:"succeeded",rerun:!1,command:this.runCommand})}if(n){let o=r.getRecursiveWorkspaceDependents();for(let u of o)this.markWorkspaceForRerun(u);let a=Array.from(r.getRecursiveWorkspaceDependencies()).filter(u=>this.isWorkspaceMarkedForRerun(u));for(let u of a){let c=u.getRecursiveWorkspaceDependents();for(let l of c)this.markWorkspaceForRerun(l)}}return this.planCache[r.relativeCwd]=n,n};this.performDryRun=async t=>await this.tracer.startSpan({name:"performDryRun",ctx:t},async({ctx:r})=>{let n=this.concurrency;this.concurrency=1;let i="",s={1:[]};this.runGraph.dryRunCallback=(u,c)=>{s[c]?s[c].push(u.id):s[c]=[u.id]},await this.runGraph.run(r,Array.from(this.entrypoints),!0);let o=(u,c,l,f)=>{let p=l?"\u2514\u2500":f&&l?"\u2514\u2500\u252C\u2500":"\u251C\u2500";return`${u==0?"":"  ".repeat(u)}${p}[${u}] ${c}`},a=Object.keys(s);return a.forEach((u,c)=>{let l=parseInt(u),f=s[l],p=c==a.length-1;f.forEach((h,g)=>{let _=this.runGraph.getNode(h);i+=o(l,h,g==f.length-1,p),_ instanceof en&&_.skip&&(i+="(skip)"),i+=`
`})}),this.concurrency=n,i});this.run=async t=>await this.tracer.startSpan({name:"command supervisor run",ctx:t},async({ctx:r})=>{let n="";if(this.hasSetup===!1)throw new Error("RunSupervisor is not setup, you need to call await supervisor.setup()");if(this.runReport.runStart=Date.now(),(je.default||this.dryRun)&&(n+=`${this.formatHeader("Run Order")+`
`}`,n+=await this.performDryRun(r),je.default||(n+=`${this.formatHeader(`Dry Run / Command: ${this.runCommand} / Total: ${this.runGraph.runSize}`,0,!0)+`
`}`),process.stdout.write(n),n="",this.dryRun))return!0;je.default||tt.pad(this.concurrency+3),je.default&&process.stdout.write(`
${this.formatHeader(`Run / Command: ${this.runCommand} / Concurrency: ${this.concurrency}`,0,!1)+`
`}`),this.raf(this.waitUntilDone),this.currentRunTarget=this.runTargets.length>1?"All":this.runTargets[0]?.relativeCwd??"Nothing to run",je.default||process.stderr.write(`
`),this.header=this.generateHeaderString(),await this.runGraph.run(r,Array.from(this.entrypoints));let i=await this.runReport.mutex.acquire();this.runReport.done=!0,i();let s=this.generateFinalReport();return typeof s=="string"&&process.stdout.write(`
${s}
`),await this.saveRunLog(),this.runReport.failCount===0});this.raf=t=>{setImmediate(()=>t(Date.now()))};this.waitUntilDone=t=>{if(this.runReport.done)return;let r=90,n="";je.default?this.updateProgressCI(t):(n=this.generateProgressString(t),tt.cursorUp(tt.linesRequired(this.runReport.previousOutput,process.stdout.columns)),tt.clearScreenDown()),typeof n<"u"&&typeof n=="string"&&process.stdout.write(n),this.runReport.previousOutput=n,Lk(r).then(()=>{this.raf(this.waitUntilDone)})};this.grey=t=>k.formatUtils.pretty(this.configuration,t,"grey");this.generateRunCountString=t=>{let r="";if(this.runReport.runStart){let n=k.formatUtils.pretty(this.configuration,`${this.runReport.successCount}`,"green"),i=k.formatUtils.pretty(this.configuration,`${this.runReport.failCount}`,"red"),s=k.formatUtils.pretty(this.configuration,`${this.runGraph.runSize}`,"white");r+=this.formatHeader(`${n}:${i}/${s} ${rn(this.runReport.runStart,t)}`,0,!0)+`
`}return r};this.generateFinalReport=()=>{je.default||(tt.cursorUp(tt.linesRequired(this.runReport.previousOutput,process.stdout.columns)),tt.clearScreenDown());let t=!1,r="";if(this.runReport.failCount!==0&&(t=!0),this.verbose&&(t=!0),je.default&&(t=!0),t){let s=[];r+=`${this.formatHeader(this.header)+`
`}`;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(a.fail&&s.push(o),!(this.runReport.failCount!==0&&a.fail===!1)){if(a.stdout.length!==0||a.stderr.length!==0){let u=this.formatHeader(`Output: ${k.formatUtils.pretty(this.configuration,o,k.FormatType.PATH)}`,2);r+=`
${u+`
`}`}a.stdout.length!==0&&a.stdout.forEach(u=>{u.split(`
`).forEach(l=>{typeof l<"u"&&l.length!==0&&(r+=`${l+`
`}`)})}),a.stderr.length!==0&&(r+=`
${"[stderr]"+`
`}`,a.stderr.forEach(c=>{(c instanceof Error?c.toString():`${c}`).split(`
`).forEach(p=>{typeof p<"u"&&p.length!==0&&(r+=`${p+`
`}`)})}))}}if(s.length>=2){r+=`${this.grey(wk)+`
`}`;let o=this.grey(`ERROR for script ${this.header}
The following packages returned an error.
`);r+=`${o}`,s.forEach(a=>{let u=`- ${k.formatUtils.pretty(this.configuration,a,k.FormatType.PATH)}`;r+=`${u+`
`}`})}}let n=this.formatHeader(`${k.formatUtils.pretty(this.configuration,`${this.runCommand} finished`,this.runReport.failCount===0?"green":"red")}${this.runReport.failCount!=0?k.formatUtils.pretty(this.configuration,` with ${this.runReport.failCount} errors`,"red"):""}`,0,!0)+`
`;if(r+=`
`+this.formatHeader("Summary")+`
`,this.runReport.runStart){let{successCount:s,failCount:o,ignoredCount:a,skipCount:u}=this.runReport,c=this.runGraph.runSize-a,l=c-o-s-u,f=k.formatUtils.pretty(this.configuration,`Success: ${s}`,"green"),p=k.formatUtils.pretty(this.configuration,`Fail: ${o}`,"red"),h=k.formatUtils.pretty(this.configuration,`Skipped: ${u}`,"white"),g=k.formatUtils.pretty(this.configuration,`Excluded: ${this.excluded.size}`,"white"),_=k.formatUtils.pretty(this.configuration,`Up to date: ${l}`,"white"),v=k.formatUtils.pretty(this.configuration,`Total: ${c}`,"white");if(r+=f+`
`,r+=_+`
`,r+=p+`
`,this.verbose&&o>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let S=this.runReport.workspaces[A];S.fail&&(r+=` - ${k.formatUtils.pretty(this.configuration,A,"grey")}${k.formatUtils.pretty(this.configuration,S.locator,"IDENT")}
`)}),r+=h+`
`,this.verbose&&u>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let S=this.runReport.workspaces[A];S.skipped&&(r+=` - ${k.formatUtils.pretty(this.configuration,A,"grey")}${k.formatUtils.pretty(this.configuration,S.locator,"IDENT")}
`)}),r+=g+`
`,this.verbose&&this.excluded.size>0)for(let A of this.excluded)r+=` - ${k.formatUtils.pretty(this.configuration,A.relativeCwd,"grey")}${k.formatUtils.pretty(this.configuration,A.anchoredLocator,"IDENT")}
`;r+=v+`
`+this.grey("---")+`
`}let i=50;for(let s in this.runReport.workspaces){let o=this.runReport.workspaces[s];i+=o.runtimeSeconds??0}if(!!this.runReport.runStart&&this.runGraph.runSize>1){let s=i,a=Date.now()-this.runReport.runStart,u=rn(a,s);r+=`Cumulative: (cpu): ${rn(0,i)}
`,r+=`Saved: ${u}
`}return this.runReport.runStart&&(r+="Runtime (wall): "+rn(Date.now(),this.runReport.runStart)+`
`),r+=n,r+=`
`,r};this.createRunItem=t=>async(r,n)=>await this.limit(async()=>this.tracer.startSpan({name:"command",ctx:r},async({span:i,ctx:s})=>{let o=t.relativeCwd,a={[B.PACKAGE_NAME]:t.anchoredLocator.name,[B.PACKAGE_DIRECTORY]:t.relativeCwd,[B.PACKAGE_COMMAND]:this.runCommand};typeof t.anchoredLocator.scope=="string"&&(a[B.PACKAGE_SCOPE]=`@${t.anchoredLocator.scope}`);let u=t.manifest.scripts.get(this.runCommand);typeof u=="string"&&(a[B.YARN_BUILD_PACKAGE_RUN_COMMAND]=u);let c=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);if(this.runReporter.emit("start",t.relativeCwd,t.anchoredLocator,`${t.manifest.name?.scope?`@${t.manifest.name?.scope}/`:""}${t.manifest.name?.name}`,u),i.addEvent("start"),i.setAttributes(a),!u)return this.verbose&&this.runReporter.emit("info",t.relativeCwd,`[skip] No \`${this.runCommand}\` script in manifest.`),this.runReporter.emit("ignored",t.relativeCwd),i.addEvent("ignored"),!0;try{if(this.runReport.failCount!==0&&!this.continueOnError&&(this.runReporter.emit("skipped",t.relativeCwd),i.addEvent("skipped"),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"skipped",rerun:!1,command:this.runCommand}),i.addEvent("runReport failcount is not 0, exiting early"),this.continueOnError===!1))return!1;let l=await this.cli(s,this.runCommand,t.cwd,this.runReporter,o);if(i.setAttribute(B.YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT,l),l!==0)return this.runReporter.emit("fail",t.relativeCwd),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand,exitCode:`${l}`}),this.failFast===!0&&(je.default&&process.stdout.write(`--fail-fast is set, terminating all processes
`),Xu()),!1;this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"succeeded",rerun:!1,command:this.runCommand}),this.runReporter.emit("success",t.relativeCwd)}catch(l){return this.runReporter.emit("fail",t.relativeCwd,l),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand}),(typeof l=="string"||l instanceof Error)&&i.recordException(l),i.setStatus({code:kT.SpanStatusCode.ERROR,message:"Command failed"}),this.continueOnError===!1&&(n(),Xu()),!1}return!1}));let _=l??(0,DT.cpus)().length;this.configuration=s,this.pluginConfiguration=o,this.project=t,this.report=r,this.runCommand=n,this.cli=i,this.dryRun=a,this.ignoreRunCache=u,this.verbose=c,this.concurrency=_,this.continueOnError=f,this.limit=(0,UT.default)(_),this.queue=new FT.default({concurrency:_,carryoverConcurrencyCount:!0,timeout:5e4,throwOnTimeout:!0,autoStart:!0}),this.excludeWorkspacePredicate=p,this.verbose&&(this.errorLogFile=W.xfs.createWriteStream(this.getRunErrorPath(),{flags:"a"})),this.ignoreDependencies=h,this.failFast=g}async setup(){this.runLog=await this.readRunLog(),this.setupRunReporter(),this.hasSetup=!0}getRunErrorPath(){return W.ppath.resolve(this.project.cwd,"yarn.build-error.log")}getRunLogPath(){return W.ppath.resolve(this.project.cwd,".yarn",Ik)}async readRunLog(){let t=new Map;try{let r=await W.xfs.readJsonPromise(this.getRunLogPath());if(r&&r.packages)for(let n in r.packages)t.set(n,{checksum:r.packages[n].checksum,status:r.packages[n].status,rerun:r.packages[n].rerun,command:this.runCommand})}catch{}return t}async saveRunLog(){if(!this.runLog)return;let t;try{t=await W.xfs.readJsonPromise(this.getRunLogPath())}catch{}let r={comment:"This is an auto-generated file, it keeps track of whats been built. This is a local file, don't store this in version control.",packages:{...t&&t.packages}};for(let[n]of this.runLog)r.packages[n]={...r.packages[n],...this.runLog.get(n)};await W.xfs.writeJsonPromise(this.getRunLogPath(),r)}removeFromExcluded(t){this.excluded.has(t)&&this.excluded.delete(t)}async addRunTarget(t){if(this.excluded.has(t))return;if(this.excludeWorkspacePredicate(t)){this.excluded.add(t);return}if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runGraph.addNode(t.relativeCwd);await this.plan(r,t)}markWorkspaceForRerun(t){if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:r?.checksum??"",status:"succeeded",rerun:!0,command:this.runCommand})}isWorkspaceMarkedForRerun(t){return typeof t.manifest.scripts.get(this.runCommand)>"u"?!1:this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`)?.rerun??!1}async checkIfRunIsRequired(t){if(typeof this.checkIfRunIsRequiredCache[t.relativeCwd]<"u")return this.checkIfRunIsRequiredCache[t.relativeCwd];if(typeof t.manifest.scripts.get(this.runCommand)!="string")return this.checkIfRunIsRequiredCache[t.relativeCwd]=!1,!1;let r=!1;this.ignoreRunCache&&(r=!0);let n=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);n?.rerun&&(r=!0);for(let p of t.getRecursiveWorkspaceDependencies())if(this.checkIfRunIsRequiredCache[p.relativeCwd]===!0){r=!0;break}let i=hy(t.manifest.raw),s=i?.input!=null,o=typeof i?.output<"u",a=i.input??this.pluginConfiguration.folders.input,u=new Set,c=new Set(Array.isArray(a)?a:[a]),l=i.output??[],f=new Set(Array.isArray(l)?l:[l]);if(o||(typeof t?.manifest?.raw?.bin=="string"?f.add(t.manifest.raw.bin):typeof t?.manifest?.raw?.directories?.bin=="string"?f.add(t.manifest.raw.directories.bin):typeof t?.manifest?.raw?.files=="string"?f.add(t.manifest.raw.files):Array.isArray(t?.manifest?.raw?.files)?t.manifest.raw.files.forEach(p=>p&&f.add(p)):typeof t?.manifest?.raw?.main=="string"&&f.add(t.manifest.raw.main)),!s||!o)try{let p=i.tsconfig??"tsconfig.json",h=W.xfs.pathUtils.join(t.cwd,W.npath.toPortablePath(p));if(await W.xfs.existsPromise(h)){let _=Mh(W.npath.fromPortablePath(h)),v=W.ppath.dirname(h);if(!s){if(_.compilerOptions?.incremental){let A=_.compilerOptions.tsBuildInfoFile??`${W.ppath.basename(h,W.ppath.extname(h))}.tsbuildinfo`,S=W.ppath.join(v,W.npath.toPortablePath(A)),b=W.ppath.relative(t.cwd,S);u.add(b)}_.include?.forEach(A=>{let S=W.ppath.join(v,W.npath.toPortablePath(A)),b=W.ppath.relative(t.cwd,S);c.add(b)}),_.exclude?.forEach(A=>{let S=W.ppath.join(v,W.npath.toPortablePath(A)),b=W.ppath.relative(t.cwd,S);u.add(b)})}if(!o&&_.compilerOptions?.outDir!=null){let A=W.ppath.join(v,W.npath.toPortablePath(W.npath.toPortablePath(_.compilerOptions.outDir))),S=W.ppath.relative(t.cwd,A);f.add(S)}}}catch(p){console.warn(t.relativeCwd,`
`,p)}f.size===0&&(Array.isArray(this.pluginConfiguration.folders.output)?this.pluginConfiguration.folders.output.forEach(p=>p&&f.add(p)):typeof this.pluginConfiguration.folders.output=="string"&&f.add(this.pluginConfiguration.folders.output));{let p=[...new Set(["node_modules",...f,...u])].map(_=>W.npath.toPortablePath(_)),h=[...c].map(_=>W.npath.toPortablePath(_)),g=await this.runReport.mutex.acquire();try{let _=await Nk(t.cwd,h,p);if(n?.checksum!==_&&(r=!0),!r){let v=W.npath.fromPortablePath(t.cwd);(await Promise.all([...f].map(async S=>{try{return(await(0,kh.default)(S,{dot:!0,cwd:v})).length===0}catch{return!1}}))).some(S=>S===!0)&&(r=!0)}this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:_,status:r?"succeeded":"pending",rerun:r,command:this.runCommand})}catch(_){this.runReport.workspaces[t.relativeCwd]?.stderr.push(new Error(`${t.relativeCwd}: failed to get lastModified (${_})`))}finally{g()}}return this.checkIfRunIsRequiredCache[t.relativeCwd]=r,r}formatHeader(t,r=0,n=!1){let i="-",s=i.repeat(r),o=this.grey(s),a=this.grey("["),u=this.grey("]"),c=`${o}${a} ${t} ${u}`,l=(0,Zu.default)(c).length,f=n?"[ yarn.build ]":"",p=Math.max(qT-(l+f.length),0),h=i.repeat(p),g=this.grey(h),_=this.grey(f);return`${c}${g}${_}`}generateHeaderString(){return`${k.formatUtils.pretty(this.configuration,`${this.runCommand}`,k.FormatType.CODE)} for ${k.formatUtils.pretty(this.configuration,this.currentRunTarget?this.currentRunTarget:"",k.FormatType.SCOPE)}${this.dryRun?k.formatUtils.pretty(this.configuration," --dry-run",k.FormatType.NAME):""}`}updateRuntime(t){for(let r in this.runReport.workspaces){let n=this.runReport.workspaces[r];!n||!n.start||n.done||this.runReport.runStart&&(this.runReport.workspaces[r].runtimeSeconds=t-n.start)}}updateProgressCI(t){this.updateRuntime(t)}generateProgressString(t){let r="",n=o=>this.grey(`[${o}]`),i=k.formatUtils.pretty(this.configuration,"IDLE","grey");r+=this.formatHeader(this.generateHeaderString())+`
`,this.updateRuntime(t);let s=1;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(!a||!a.start||a.done)continue;let u=k.formatUtils.pretty(this.configuration,o,k.FormatType.PATH),c=k.formatUtils.pretty(this.configuration,`(${a.runScript})`,k.FormatType.REFERENCE),l=a.start?k.formatUtils.pretty(this.configuration,rn(a.start,t),k.FormatType.RANGE):"",f=n(s++),p=" ".repeat(f.length-1),h=k.formatUtils.pretty(this.configuration,a.name,k.FormatType.NAME),g=`${f} ${h}${k.formatUtils.pretty(this.configuration,"@","grey")}${u} ${c} ${l}
`,_="",v="",A="";(0,Zu.default)(g).length>=process.stdout.columns&&(_=`${f} ${u}${h}
`,v=`${p} ${c} ${l}
`,(0,Zu.default)(_).length>=process.stdout.columns&&(_=(0,Ju.default)(`${f} ${u}
`,0,process.stdout.columns),v=(0,Ju.default)(`${p} ${h}
`,0,process.stdout.columns),A=(0,Ju.default)(`${p} ${c} ${l}
`,0,process.stdout.columns)),g=_+v+A),r+=g}for(s;s<this.concurrency+1;)r+=`${n(s++)} ${i}
`;return this.runReport.runStart&&(r+=this.generateRunCountString(t)),r}},Nk=async(e,t,r)=>{let n=await(0,kh.default)(t,{cwd:W.npath.fromPortablePath(e),absolute:!0,expandDirectories:!0,dot:!0,ignore:r});n.sort();let i=await Promise.all(n.map(async s=>{let o=W.npath.toPortablePath(s),a=await W.xfs.statPromise(o);return{path:W.ppath.relative(e,o),size:a.isFile()?a.size:0,lastModified:a.isFile()?a.mtimeMs:0}}));return(0,jT.default)(i)},rn=(e,t)=>{let r=Math.abs(t-e),n="",i=Math.trunc(r/6e4);return i&&(n+=`${i}m`,r-=i*6e4),r&&(i&&(n+=" "),n+=`${(r/1e3).toFixed(2)}s`),n};function Lk(e){return new Promise(t=>setTimeout(t,e))}var GT=Uh;var $T=R("child_process"),HT=R("util"),xk=(0,HT.promisify)($T.exec);function Mk(e){let{commit:t,sinceBranch:r}=e;if(t)return`git diff --name-only ..${t}`;if(r)return`git diff --name-only ${r}...`;throw new Error("Unable to determine how to detect changes.")}async function jh(e){try{let t=Mk(e),{stdout:r}=await xk(t),n=r.split(`
`),s=e.root.project.workspaces.filter(o=>n.some(a=>a.startsWith(o.relativeCwd.replace(/^\.\//,"")))).reduce((o,a)=>{let u=a.getRecursiveWorkspaceDependents();return new Set([...o,...u,a])},new Set);return Array.from(s.values())}catch{return[]}}var nn=R("@yarnpkg/core");var VT=(e,t)=>{let r=[];for(let n of e.workspacesCwds){let i=t.workspacesByCwd.get(n);i&&r.push(i,...VT(i,t))}return r},WT=async({targetWorkspace:e,project:t,supervisor:r})=>{try{if(e.workspacesCwds.size!==0){let n=VT(e,t);for(let i of n)for(let s of nn.Manifest.hardDependencies){for(let o of i.manifest.getForScope(s).values()){let a=t.tryWorkspaceByDescriptor(o);a!==null&&await r.addRunTarget(a)}await r.addRunTarget(i)}await r.addRunTarget(e)}else await r.addRunTarget(e)}catch(n){if(n instanceof ms){let i=`${r.formatHeader("FATAL")}

You have a cyclic dependency.`,s=n.node.length<n.dep.length+4?"\u21B0":"",o=n.node.length>n.dep.length+4?"\u2934":"";i+=`

${nn.formatUtils.pretty(r.configuration,n.node,"white")} ${s}
 \u21B3 ${nn.formatUtils.pretty(r.configuration,n.dep,"red")} ${o}

`,i+=nn.formatUtils.pretty(r.configuration,`
---

To fix this error you must remove the cyclic dependency.

Workspaces cannot directly or indirectly depend on each other. When running
the provided command yarn.build uses a parallelsied topological sort. This
maximises throughput (saving you time) while ensuring dependencies are run in
the order declared.

In a cyclic dependency A depends on B, which depends on A. Or in an indirect cyclic
dependency, A depends on B, which depends on C, and C depends on A.

In both cases A cannot be built, because to we cannot determine which one goes
first.

---
While some tooling may adapt to cyclic dependencies yarn.build cannot. Doing so
is unsound and unpredictable which goes against the stated goals of the tool.

In most cases this issue occurs by accident when you delcare a dependency on the
wrong package.

In some cases yuo may actually want the cyclic dependency. As that's not
possible, find the parts that are shared and move them to their own package
that both packages can depend on.
---

`,"grey"),i+=nn.formatUtils.pretty(r.configuration,"FATAL: You have a cyclic dependency.","red"),console.error(i),process.exit(2)}else console.error("An error occured in yarn.build.",n)}};var vs=z(F());var Ht=class extends ec.BaseCommand{constructor(){super(...arguments);this.json=ue.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});this.all=ue.Option.Boolean("-A,--all",!1,{description:"run for all workspaces of a project"});this.buildCommand=ue.Option.String("-c,--build-command","build",{description:'the command to be run in each package (if available), defaults to "build"'});this.interlaced=ue.Option.Boolean("-i,--interlaced",!0,{description:"If false it will instead buffer the output from each process and print the resulting buffers only after their source processes have exited. Defaults to false."});this.verbose=ue.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});this.dryRun=ue.Option.Boolean("-d,--dry-run",!1,{description:"simulate running a job, but not actually run it"});this.ignoreBuildCache=ue.Option.Boolean("-r,--ignore-cache",!1,{description:"every package will be built, regardless of whether is has changed or not."});this.maxConcurrency=ue.Option.String("-m,--max-concurrency",{description:"is the maximum number of jobs that can run at a time, defaults to the number of logical CPUs on the current machine."});this.continueOnError=ue.Option.Boolean("--continue-on-error",!1,{description:"if a job fails, continue with the rest"});this.failFast=ue.Option.Boolean("--fail-fast",!1,{description:"if a job fails, terminate other running jobs"});this.exclude=ue.Option.Array("--exclude",{description:"exclude specifc packages or glob paths from being built, including their dependencies."});this.excludeCurrent=ue.Option.Boolean("--exclude-current",!1,{description:"run for this workspaces dependencies, but not this workspace. Useful for running as part of a `dev` command."});this.onlyGitChanges=ue.Option.Boolean("--changes",!1,{description:"only run for packages that were changed in the last commit"});this.onlyGitChangesSinceCommit=ue.Option.String("--since",{description:"only run for packages that were changed since the given commit"});this.onlyGitChangesSinceBranch=ue.Option.String("--since-branch",{description:"only run for packages that have changes compared to the give branch. Uses 'git diff --name-only branch...'",arity:1});this.onlyCurrent=ue.Option.Boolean("--only-current",!1,{description:"only run for the current workspace"});this.ignoreDependencies=ue.Option.Boolean("--ignore-dependencies",!1,{description:"when true, don't run for packages this one depends on"});this.buildTargets=ue.Option.Rest({name:"workspaceNames"});this.forceQuit=!1;this.commandType="build"}async execute(){return await new ot("yarn.build").startSpan({name:`yarn ${this.commandType}`,propegateFromEnv:!0},async({span:n,ctx:i})=>{n.setAttributes({[B.YARN_BUILD_FLAGS_OUTPUT_JSON]:this.json,[B.YARN_BUILD_FLAGS_ALL]:this.all,[B.YARN_BUILD_FLAGS_TARGETS]:this.buildTargets,[B.YARN_BUILD_FLAGS_COMMAND]:this.buildCommand,[B.YARN_BUILD_FLAGS_INTERLACED]:this.interlaced,[B.YARN_BUILD_FLAGS_VERBOSE]:this.verbose,[B.YARN_BUILD_FLAGS_DRY_RUN]:this.dryRun,[B.YARN_BUILD_FLAGS_IGNORE_CACHE]:this.ignoreBuildCache,[B.YARN_BUILD_FLAGS_MAX_CONCURRENCY]:this.maxConcurrency,[B.YARN_BUILD_FLAGS_CONTINUE_ON_ERROR]:this.continueOnError,[B.YARN_BUILD_FLAGS_EXCLUDE]:this.exclude,[B.YARN_BUILD_FLAGS_EXCLUDE_CURRENT]:this.excludeCurrent,[B.YARN_BUILD_FLAGS_CHANGES]:this.onlyGitChanges,[B.YARN_BUILD_FLAGS_SINCE]:this.onlyGitChangesSinceCommit,[B.YARN_BUILD_FLAGS_SINCE_BRANCH]:this.onlyGitChangesSinceBranch,[B.YARN_BUILD_FLAGS_ONLY_CURRENT]:this.onlyCurrent});let s=await xe.Configuration.find(this.context.cwd,this.context.plugins),{project:o,workspace:a}=await xe.Project.find(s,this.context.cwd);if(!a)throw new ec.WorkspaceRequiredError(o.cwd,this.context.cwd);let u=this.all?o.topLevelWorkspace:a,c=!1;u==o.topLevelWorkspace&&(c=!0);let l=[u,...this.buildTargets.length>0?u.getRecursiveWorkspaceChildren():[]];typeof this.onlyGitChangesSinceBranch=="string"?l=await jh({root:o.topLevelWorkspace,sinceBranch:this.onlyGitChangesSinceBranch}):(this.onlyGitChanges||this.onlyGitChangesSinceCommit)&&(l=await jh({root:o.topLevelWorkspace,commit:this.onlyGitChangesSinceCommit??"1"})),Array.isArray(this.exclude)||(this.exclude=[]),this.excludeCurrent&&this.exclude.push(xe.structUtils.stringifyIdent(a.anchoredLocator)),!c&&this.onlyCurrent&&(this.maxConcurrency="1");let f=A=>!c&&this.onlyCurrent?A!=a:this.exclude?.some(S=>As.default.isMatch(xe.structUtils.stringifyIdent(A.anchoredLocator),S)||As.default.isMatch(A.cwd,`${s.projectCwd}${qh.default.posix.sep}${S}`))??!1,p=A=>!c&&this.onlyCurrent?A==a:this.buildTargets.some(S=>As.default.isMatch(xe.structUtils.stringifyIdent(A.anchoredLocator),S)||As.default.isMatch(A.cwd,`${s.projectCwd}${qh.default.posix.sep}${S}`)),h=this.buildTargets.length>0?l.filter(p):l,g=await py(s);this.continueOnError=this.continueOnError??!!g.bail;let _=this.maxConcurrency===void 0?(0,YT.cpus)().length:parseInt(this.maxConcurrency);n.setAttributes({[B.YARN_BUILD_CONFIG_FOLDERS_INPUT]:g.folders.input,[B.YARN_BUILD_CONFIG_FOLDERS_OUTPUT]:g.folders.output,[B.YARN_BUILD_CONFIG_EXCLUDE]:g.exclude,[B.YARN_BUILD_CONFIG_BAIL]:g.bail,[B.YARN_BUILD_CONFIG_HIDE_BADGE]:g.hideYarnBuildBadge,[B.YARN_BUILD_CONFIG_MAX_CONCURRENCY]:_,[B.YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES]:this.ignoreDependencies});let v=await xe.StreamReport.start({configuration:s,json:this.json,stdout:this.context.stdout,includeLogs:!0},async A=>{let S=async(x,D,P,w,N)=>{let j=vs.trace.getSpan(x),y=new xe.miscUtils.BufferStream;y.on("data",C=>w?.emit("info",N,C&&C.toString()));let $=new xe.miscUtils.BufferStream;if($.on("data",C=>w?.emit("error",N,C&&C.toString())),this.forceQuit)return y.destroy(),$.destroy(),y.end(),$.end(),2;try{let C=await this.cli.run(["run",D],{cwd:P,stdout:y,stderr:$})||0;return y.end(),$.end(),C}catch(C){j?.setStatus({code:vs.SpanStatusCode.ERROR,message:C.message}),(typeof C=="string"||C instanceof Error)&&j?.recordException(C),y.end(),$.end()}return 2},b=new GT({project:o,configuration:s,pluginConfiguration:g,report:A,runCommand:this.buildCommand,cli:S,dryRun:this.dryRun,ignoreRunCache:this.ignoreBuildCache,verbose:this.verbose,concurrency:_,continueOnError:this.continueOnError,excludeWorkspacePredicate:f,ignoreDependencies:this.ignoreDependencies,failFast:this.failFast});b.runReporter.on("force-quit",()=>{this.forceQuit=!0}),await b.setup();for(let x of h)await WT({targetWorkspace:x,project:o,supervisor:b});await b.run(i)===!1&&(A.reportError(xe.MessageName.BUILD_FAILED,"Build failed"),n.setStatus({code:vs.SpanStatusCode.ERROR,message:"Build failed"}))});return hi.hasBeenTerminated=!0,v.exitCode()})}};Ht.paths=[["build"]],Ht.usage=ue.Command.Usage({category:"Build commands",description:"build a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are built in the right order.

    `});var iR=R("@yarnpkg/cli"),sR=R("@yarnpkg/core"),rc=R("@yarnpkg/core"),oR=R("clipanion");var ut=e=>{if(e==null)throw new Error("Invalid name");return e.scope?`@${e.scope}/${e.name}`:e.name};var KT=({workspace:e,project:t})=>{let r=Array.from(e.manifest.dependencies.values()).map(i=>ut(i)),n=Array.from(t.workspaces.values()).map(i=>ut(i.manifest.name));return r.filter(i=>n.includes(i))};var XT=({project:e,workspaceName:t})=>e.workspaces.find(n=>ut(n.manifest.name)===t);var ZT=R("@yarnpkg/core");var Dk={firstCharacters:"\u27A4 ",tabString:"\u2502 "},zT="gray",bs=({format:e,padding:t,step:r=5,characters:n=Dk})=>{let{firstCharacters:i,tabString:s}=n,o=s.split("");for(let a=0;a<t;a++){let u=Array(r).fill(" ").map((c,l)=>l<o.length?o[l]:c).join("");process.stdout.write(e(u,zT))}process.stdout.write(e(i,zT))};var Bk=ZT.FormatType.NAME,QT="red",JT=({format:e,circular:t,dependency:r,parents:n,current:i,project:s,padding:o=0})=>{if(t){bs({format:e,padding:o+1}),process.stdout.write(e(r,Bk)),process.stdout.write(e(" -> circular dependency",QT)),process.stdout.write(`
`);return}let a=XT({project:s,workspaceName:r});if(!a){bs({format:e,padding:o+1}),process.stdout.write(r),process.stdout.write(e("-> incorrect dependency",QT)),process.stdout.write(`
`);return}tc({format:e,project:s,parent:i,parents:[...n,i],padding:o+1,workspace:a})};var eR=({format:e,workspace:t,parent:r,parents:n,project:i,padding:s=0})=>{let o=KT({workspace:t,project:i});for(let a of o)JT({format:e,workspace:t,project:i,padding:s,parent:r,parents:n,current:ut(t.manifest.name),circular:r===a||n.includes(a),dependency:a})};var tR=R("@yarnpkg/core");var Fk=tR.FormatType.NAME,rR=({format:e,workspace:t,padding:r=0})=>{let{name:n}=t.manifest,i=ut(n);bs({format:e,padding:r}),process.stdout.write(e(i,Fk)),process.stdout.write(`
`)};var tc=({format:e,workspace:t,project:r,parents:n,padding:i=0,parent:s})=>{rR({workspace:t,padding:i,format:e}),eR({parents:n,workspace:t,project:r,padding:i,parent:s,format:e})};var Ts=({padding:e})=>{for(let t=0;t<e;t++)process.stdout.write(`
`)};var nR=({workspace:e,format:t})=>{let r=ut(e.manifest.name);process.stdout.write(`Build query for package: ${t(r,"bold")}`),Ts({padding:1})};var sn=class extends iR.BaseCommand{async execute(){let t=await rc.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:n}=await rc.Project.find(t,this.context.cwd);if(!n)return 0;let i=(s,o)=>sR.formatUtils.pretty(t,s,o);return Ts({padding:1}),nR({workspace:n,format:i}),tc({parents:[],workspace:n,project:r,format:i}),Ts({padding:2}),0}};sn.paths=[["build","query"]],sn.usage=oR.Command.Usage({category:"Build commands",description:"prints out dependency graph for current package",details:`
          In a monorepo with internal packages that depend on others, this command
          will traverse the dependency graph and efficiently ensure, the packages
          are built in the right order.

        `});var Rs=R("clipanion");var on=class extends Ht{constructor(){super(...arguments);this.buildCommand=Rs.Option.String("-c,--command","test",{description:'the command to be run in each package (if available), defaults to "test"'});this.onlyCurrent=Rs.Option.Boolean("--only-current",!0,{description:"only test the current workspace"});this.ignoreDependencies=!0;this.commandType="test"}};on.paths=[["test"]],on.usage=Rs.Command.Usage({category:"Test commands",description:"test a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are tested in the right order.
      `});var Uk={commands:[Jr,sn,Ht,on]},kk=Uk;return _R(jk);})();
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
return plugin;
}
};
