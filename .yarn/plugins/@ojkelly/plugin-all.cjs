/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@ojkelly/plugin-all",
factory: function (require) {
"use strict";var plugin=(()=>{var oP=Object.create;var Ys=Object.defineProperty;var aP=Object.getOwnPropertyDescriptor;var uP=Object.getOwnPropertyNames;var cP=Object.getPrototypeOf,lP=Object.prototype.hasOwnProperty;var v=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),dP=(e,t)=>{for(var r in t)Ys(e,r,{get:t[r],enumerable:!0})},Dg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of uP(t))!lP.call(e,i)&&i!==r&&Ys(e,i,{get:()=>t[i],enumerable:!(n=aP(t,i))||n.enumerable});return e};var K=(e,t,r)=>(r=e!=null?oP(cP(e)):{},Dg(t||!e||!e.__esModule?Ys(r,"default",{value:e,enumerable:!0}):r,e)),pP=e=>Dg(Ys({},"__esModule",{value:!0}),e);var dl=d((Yq,Yg)=>{function jg(e){return Array.isArray(e)?e:[e]}var al="",Gg=" ",sl="\\",fP=/^\s+$/,hP=/(?:[^\\]|^)\\$/,_P=/^\\!/,gP=/^\\#/,mP=/\r?\n/g,EP=/^\.*\/|^\.+$/,ol="/",$g="node-ignore";typeof Symbol<"u"&&($g=Symbol.for("node-ignore"));var qg=$g,SP=(e,t,r)=>Object.defineProperty(e,t,{value:r}),AP=/([0-z])-([0-z])/g,Vg=()=>!1,TP=e=>e.replace(AP,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:al),yP=e=>{let{length:t}=e;return e.slice(0,t-t%2)},bP=[[/^\uFEFF/,()=>al],[/\\?\s+$/,e=>e.indexOf("\\")===0?Gg:al],[/\\\s/g,()=>Gg],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>sl],[/\\\\/g,()=>sl],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===sl?`\\[${r}${yP(n)}${i}`:i==="]"&&n.length%2===0?`[${TP(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],Hg=Object.create(null),RP=(e,t)=>{let r=Hg[e];return r||(r=bP.reduce((n,i)=>n.replace(i[0],i[1].bind(e)),e),Hg[e]=r),t?new RegExp(r,"i"):new RegExp(r)},ll=e=>typeof e=="string",vP=e=>e&&ll(e)&&!fP.test(e)&&!hP.test(e)&&e.indexOf("#")!==0,OP=e=>e.split(mP),ul=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},PP=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(_P,"!").replace(gP,"#");let i=RP(e,t);return new ul(r,e,n,i)},CP=(e,t)=>{throw new t(e)},Mt=(e,t,r)=>ll(e)?e?Mt.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),Wg=e=>EP.test(e);Mt.isNotRelative=Wg;Mt.convert=e=>e;var cl=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){SP(this,qg,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[qg]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(vP(t)){let r=PP(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,jg(ll(t)?OP(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(s=>{let{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let s=t&&Mt.convert(t);return Mt(s,t,this._allowRelativePaths?Vg:CP),this._t(s,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(ol)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let s=this._t(i.join(ol)+ol,r,n,i);return r[t]=s.ignored?s:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return jg(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Ks=e=>new cl(e),IP=e=>Mt(e&&Mt.convert(e),e,Vg);Ks.isPathValid=IP;Ks.default=Ks;Yg.exports=Ks;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");Mt.convert=e;let t=/^[a-z]:\//i;Mt.isNotRelative=r=>t.test(r)||Wg(r)}});var Jg=d(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.splitWhen=en.flatten=void 0;function BP(e){return e.reduce((t,r)=>[].concat(t,r),[])}en.flatten=BP;function UP(e,t){let r=[[]],n=0;for(let i of e)t(i)?(n++,r[n]=[]):r[n].push(i);return r}en.splitWhen=UP});var em=d(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.isEnoentCodeError=void 0;function kP(e){return e.code==="ENOENT"}Qs.isEnoentCodeError=kP});var tm=d(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.createDirentFromStats=void 0;var _l=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function jP(e,t){return new _l(e,t)}Zs.createDirentFromStats=jP});var sm=d(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.convertPosixPathToPattern=_e.convertWindowsPathToPattern=_e.convertPathToPattern=_e.escapePosixPath=_e.escapeWindowsPath=_e.escape=_e.removeLeadingDotSegment=_e.makeAbsolute=_e.unixify=void 0;var GP=v("os"),qP=v("path"),rm=GP.platform()==="win32",HP=2,$P=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\()|\\(?![!()*+?@[\]{|}]))/g,VP=/(\\?)([()[\]{}]|^!|[!+@](?=\())/g,WP=/^\\\\([.?])/,YP=/\\(?![!()+@[\]{}])/g;function KP(e){return e.replace(/\\/g,"/")}_e.unixify=KP;function XP(e,t){return qP.resolve(e,t)}_e.makeAbsolute=XP;function zP(e){if(e.charAt(0)==="."){let t=e.charAt(1);if(t==="/"||t==="\\")return e.slice(HP)}return e}_e.removeLeadingDotSegment=zP;_e.escape=rm?gl:ml;function gl(e){return e.replace(VP,"\\$2")}_e.escapeWindowsPath=gl;function ml(e){return e.replace($P,"\\$2")}_e.escapePosixPath=ml;_e.convertPathToPattern=rm?nm:im;function nm(e){return gl(e).replace(WP,"//$1").replace(YP,"/")}_e.convertWindowsPathToPattern=nm;function im(e){return ml(e)}_e.convertPosixPathToPattern=im});var am=d((Jq,om)=>{om.exports=function(t){if(typeof t!="string"||t==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1}});var lm=d((e2,cm)=>{var QP=am(),um={"{":"}","(":")","[":"]"},ZP=function(e){if(e[0]==="!")return!0;for(var t=0,r=-2,n=-2,i=-2,s=-2,o=-2;t<e.length;){if(e[t]==="*"||e[t+1]==="?"&&/[\].+)]/.test(e[t])||n!==-1&&e[t]==="["&&e[t+1]!=="]"&&(n<t&&(n=e.indexOf("]",t)),n>t&&(o===-1||o>n||(o=e.indexOf("\\",t),o===-1||o>n)))||i!==-1&&e[t]==="{"&&e[t+1]!=="}"&&(i=e.indexOf("}",t),i>t&&(o=e.indexOf("\\",t),o===-1||o>i))||s!==-1&&e[t]==="("&&e[t+1]==="?"&&/[:!=]/.test(e[t+2])&&e[t+3]!==")"&&(s=e.indexOf(")",t),s>t&&(o=e.indexOf("\\",t),o===-1||o>s))||r!==-1&&e[t]==="("&&e[t+1]!=="|"&&(r<t&&(r=e.indexOf("|",t)),r!==-1&&e[r+1]!==")"&&(s=e.indexOf(")",r),s>r&&(o=e.indexOf("\\",r),o===-1||o>s))))return!0;if(e[t]==="\\"){var a=e[t+1];t+=2;var u=um[a];if(u){var c=e.indexOf(u,t);c!==-1&&(t=c+1)}if(e[t]==="!")return!0}else t++}return!1},JP=function(e){if(e[0]==="!")return!0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return!0;if(e[t]==="\\"){var r=e[t+1];t+=2;var n=um[r];if(n){var i=e.indexOf(n,t);i!==-1&&(t=i+1)}if(e[t]==="!")return!0}else t++}return!1};cm.exports=function(t,r){if(typeof t!="string"||t==="")return!1;if(QP(t))return!0;var n=ZP;return r&&r.strict===!1&&(n=JP),n(t)}});var pm=d((t2,dm)=>{"use strict";var eC=lm(),tC=v("path").posix.dirname,rC=v("os").platform()==="win32",El="/",nC=/\\/g,iC=/[\{\[].*[\}\]]$/,sC=/(^|[^\\])([\{\[]|\([^\)]+$)/,oC=/\\([\!\*\?\|\[\]\(\)\{\}])/g;dm.exports=function(t,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&rC&&t.indexOf(El)<0&&(t=t.replace(nC,El)),iC.test(t)&&(t+=El),t+="a";do t=tC(t);while(eC(t)||sC.test(t));return t.replace(oC,"$1")}});var Js=d(nt=>{"use strict";nt.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;nt.find=(e,t)=>e.nodes.find(r=>r.type===t);nt.exceedsLimit=(e,t,r=1,n)=>n===!1||!nt.isInteger(e)||!nt.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=n;nt.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};nt.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0);nt.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;nt.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;nt.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);nt.flatten=(...e)=>{let t=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];Array.isArray(s)?r(s,t):s!==void 0&&t.push(s)}return t};return r(e),t}});var eo=d((n2,hm)=>{"use strict";var fm=Js();hm.exports=(e,t={})=>{let r=(n,i={})=>{let s=t.escapeInvalid&&fm.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a="";if(n.value)return(s||o)&&fm.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(e)}});var gm=d((i2,_m)=>{"use strict";_m.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}});var vm=d((s2,Rm)=>{"use strict";var mm=gm(),pr=(e,t,r)=>{if(mm(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(mm(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),s=String(n.shorthand),o=String(n.capture),a=String(n.wrap),u=e+":"+t+"="+i+s+o+a;if(pr.cache.hasOwnProperty(u))return pr.cache[u].result;let c=Math.min(e,t),l=Math.max(e,t);if(Math.abs(c-l)===1){let g=e+"|"+t;return n.capture?`(${g})`:n.wrap===!1?g:`(?:${g})`}let p=bm(e)||bm(t),f={min:e,max:t,a:c,b:l},_=[],h=[];if(p&&(f.isPadded=p,f.maxLen=String(f.max).length),c<0){let g=l<0?Math.abs(l):1;h=Em(g,Math.abs(c),f,n),c=f.a=0}return l>=0&&(_=Em(c,l,f,n)),f.negatives=h,f.positives=_,f.result=aC(h,_,n),n.capture===!0?f.result=`(${f.result})`:n.wrap!==!1&&_.length+h.length>1&&(f.result=`(?:${f.result})`),pr.cache[u]=f,f.result};function aC(e,t,r){let n=Sl(e,t,"-",!1,r)||[],i=Sl(t,e,"",!1,r)||[],s=Sl(e,t,"-?",!0,r)||[];return n.concat(s).concat(i).join("|")}function uC(e,t){let r=1,n=1,i=Am(e,r),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),r+=1,i=Am(e,r);for(i=Tm(t+1,n)-1;e<i&&i<=t;)s.add(i),n+=1,i=Tm(t+1,n)-1;return s=[...s],s.sort(dC),s}function cC(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=lC(e,t),i=n.length,s="",o=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?s+=u:u!=="0"||c!=="9"?s+=pC(u,c,r):o++}return o&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[o],digits:i}}function Em(e,t,r,n){let i=uC(e,t),s=[],o=e,a;for(let u=0;u<i.length;u++){let c=i[u],l=cC(String(o),String(c),n),p="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+ym(a.count),o=c+1;continue}r.isPadded&&(p=fC(c,r,n)),l.string=p+l.pattern+ym(l.count),s.push(l),o=c+1,a=l}return s}function Sl(e,t,r,n,i){let s=[];for(let o of e){let{string:a}=o;!n&&!Sm(t,"string",a)&&s.push(r+a),n&&Sm(t,"string",a)&&s.push(r+a)}return s}function lC(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}function dC(e,t){return e>t?1:t>e?-1:0}function Sm(e,t,r){return e.some(n=>n[t]===r)}function Am(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function Tm(e,t){return e-e%Math.pow(10,t)}function ym(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function pC(e,t,r){return`[${e}${t-e===1?"":"-"}${t}]`}function bm(e){return/^-?(0+)\d/.test(e)}function fC(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}pr.cache={};pr.clearCache=()=>pr.cache={};Rm.exports=pr});var yl=d((o2,Lm)=>{"use strict";var hC=v("util"),Cm=vm(),Om=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),_C=e=>t=>e===!0?Number(t):String(t),Al=e=>typeof e=="number"||typeof e=="string"&&e!=="",Ti=e=>Number.isInteger(+e),Tl=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return!1;for(;t[++r]==="0";);return r>0},gC=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,mC=(e,t,r)=>{if(t>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return r===!1?String(e):e},Pm=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},EC=(e,t)=>{e.negatives.sort((o,a)=>o<a?-1:o>a?1:0),e.positives.sort((o,a)=>o<a?-1:o>a?1:0);let r=t.capture?"":"?:",n="",i="",s;return e.positives.length&&(n=e.positives.join("|")),e.negatives.length&&(i=`-(${r}${e.negatives.join("|")})`),n&&i?s=`${n}|${i}`:s=n||i,t.wrap?`(${r}${s})`:s},Im=(e,t,r,n)=>{if(r)return Cm(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);if(e===t)return i;let s=String.fromCharCode(t);return`[${i}-${s}]`},wm=(e,t,r)=>{if(Array.isArray(e)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${e.join("|")})`:e.join("|")}return Cm(e,t,r)},Nm=(...e)=>new RangeError("Invalid range arguments: "+hC.inspect(...e)),xm=(e,t,r)=>{if(r.strictRanges===!0)throw Nm([e,t]);return[]},SC=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},AC=(e,t,r=1,n={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw Nm([e,t]);return[]}i===0&&(i=0),s===0&&(s=0);let o=i>s,a=String(e),u=String(t),c=String(r);r=Math.max(Math.abs(r),1);let l=Tl(a)||Tl(u)||Tl(c),p=l?Math.max(a.length,u.length,c.length):0,f=l===!1&&gC(e,t,n)===!1,_=n.transform||_C(f);if(n.toRegex&&r===1)return Im(Pm(e,p),Pm(t,p),!0,n);let h={negatives:[],positives:[]},g=y=>h[y<0?"negatives":"positives"].push(Math.abs(y)),T=[],A=0;for(;o?i>=s:i<=s;)n.toRegex===!0&&r>1?g(i):T.push(mC(_(i,A),p,f)),i=o?i-r:i+r,A++;return n.toRegex===!0?r>1?EC(h,n):wm(T,null,{wrap:!1,...n}):T},TC=(e,t,r=1,n={})=>{if(!Ti(e)&&e.length>1||!Ti(t)&&t.length>1)return xm(e,t,n);let i=n.transform||(f=>String.fromCharCode(f)),s=`${e}`.charCodeAt(0),o=`${t}`.charCodeAt(0),a=s>o,u=Math.min(s,o),c=Math.max(s,o);if(n.toRegex&&r===1)return Im(u,c,!1,n);let l=[],p=0;for(;a?s>=o:s<=o;)l.push(i(s,p)),s=a?s-r:s+r,p++;return n.toRegex===!0?wm(l,null,{wrap:!1,options:n}):l},to=(e,t,r,n={})=>{if(t==null&&Al(e))return[e];if(!Al(e)||!Al(t))return xm(e,t,n);if(typeof r=="function")return to(e,t,1,{transform:r});if(Om(r))return to(e,t,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,Ti(r)?Ti(e)&&Ti(t)?AC(e,t,r,i):TC(e,t,Math.max(Math.abs(r),1),i):r!=null&&!Om(r)?SC(r,i):to(e,t,1,r)};Lm.exports=to});var Fm=d((a2,Dm)=>{"use strict";var yC=yl(),Mm=Js(),bC=(e,t={})=>{let r=(n,i={})=>{let s=Mm.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a=s===!0||o===!0,u=t.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=Mm.reduce(n.nodes),p=yC(...l,{...t,wrap:!1,toRegex:!0});if(p.length!==0)return l.length>1&&p.length>1?`(${p})`:p}if(n.nodes)for(let l of n.nodes)c+=r(l,n);return c};return r(e)};Dm.exports=bC});var km=d((u2,Um)=>{"use strict";var RC=yl(),Bm=eo(),tn=Js(),fr=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?tn.flatten(t).map(i=>`{${i}}`):t;for(let i of e)if(Array.isArray(i))for(let s of i)n.push(fr(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?fr(i,s,r):i+s);return tn.flatten(n)},vC=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,n=(i,s={})=>{i.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(i.invalid||i.dollar){a.push(fr(a.pop(),Bm(i,t)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(fr(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let p=tn.reduce(i.nodes);if(tn.exceedsLimit(...p,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=RC(...p,t);f.length===0&&(f=Bm(i,t)),a.push(fr(a.pop(),f)),i.nodes=[];return}let u=tn.encloseBrace(i),c=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let p=0;p<i.nodes.length;p++){let f=i.nodes[p];if(f.type==="comma"&&i.type==="brace"){p===1&&c.push(""),c.push("");continue}if(f.type==="close"){a.push(fr(a.pop(),c,u));continue}if(f.value&&f.type!=="open"){c.push(fr(c.pop(),f.value));continue}f.nodes&&n(f,i)}return c};return tn.flatten(n(e))};Um.exports=vC});var Gm=d((c2,jm)=>{"use strict";jm.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Wm=d((l2,Vm)=>{"use strict";var OC=eo(),{MAX_LENGTH:qm,CHAR_BACKSLASH:bl,CHAR_BACKTICK:PC,CHAR_COMMA:CC,CHAR_DOT:IC,CHAR_LEFT_PARENTHESES:wC,CHAR_RIGHT_PARENTHESES:NC,CHAR_LEFT_CURLY_BRACE:xC,CHAR_RIGHT_CURLY_BRACE:LC,CHAR_LEFT_SQUARE_BRACKET:Hm,CHAR_RIGHT_SQUARE_BRACKET:$m,CHAR_DOUBLE_QUOTE:MC,CHAR_SINGLE_QUOTE:DC,CHAR_NO_BREAK_SPACE:FC,CHAR_ZERO_WIDTH_NOBREAK_SPACE:BC}=Gm(),UC=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},n=typeof r.maxLength=="number"?Math.min(qm,r.maxLength):qm;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let i={type:"root",input:e,nodes:[]},s=[i],o=i,a=i,u=0,c=e.length,l=0,p=0,f,_={},h=()=>e[l++],g=T=>{if(T.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&T.type==="text"){a.value+=T.value;return}return o.nodes.push(T),T.parent=o,T.prev=a,a=T,T};for(g({type:"bos"});l<c;)if(o=s[s.length-1],f=h(),!(f===BC||f===FC)){if(f===bl){g({type:"text",value:(t.keepEscaping?f:"")+h()});continue}if(f===$m){g({type:"text",value:"\\"+f});continue}if(f===Hm){u++;let T=!0,A;for(;l<c&&(A=h());){if(f+=A,A===Hm){u++;continue}if(A===bl){f+=h();continue}if(A===$m&&(u--,u===0))break}g({type:"text",value:f});continue}if(f===wC){o=g({type:"paren",nodes:[]}),s.push(o),g({type:"text",value:f});continue}if(f===NC){if(o.type!=="paren"){g({type:"text",value:f});continue}o=s.pop(),g({type:"text",value:f}),o=s[s.length-1];continue}if(f===MC||f===DC||f===PC){let T=f,A;for(t.keepQuotes!==!0&&(f="");l<c&&(A=h());){if(A===bl){f+=A+h();continue}if(A===T){t.keepQuotes===!0&&(f+=A);break}f+=A}g({type:"text",value:f});continue}if(f===xC){p++;let A={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:p,commas:0,ranges:0,nodes:[]};o=g(A),s.push(o),g({type:"open",value:f});continue}if(f===LC){if(o.type!=="brace"){g({type:"text",value:f});continue}let T="close";o=s.pop(),o.close=!0,g({type:T,value:f}),p--,o=s[s.length-1];continue}if(f===CC&&p>0){if(o.ranges>0){o.ranges=0;let T=o.nodes.shift();o.nodes=[T,{type:"text",value:OC(o)}]}g({type:"comma",value:f}),o.commas++;continue}if(f===IC&&p>0&&o.commas===0){let T=o.nodes;if(p===0||T.length===0){g({type:"text",value:f});continue}if(a.type==="dot"){if(o.range=[],a.value+=f,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){T.pop();let A=T[T.length-1];A.value+=a.value+f,a=A,o.ranges--;continue}g({type:"dot",value:f});continue}g({type:"text",value:f})}do if(o=s.pop(),o.type!=="root"){o.nodes.forEach(y=>{y.nodes||(y.type==="open"&&(y.isOpen=!0),y.type==="close"&&(y.isClose=!0),y.nodes||(y.type="text"),y.invalid=!0)});let T=s[s.length-1],A=T.nodes.indexOf(o);T.nodes.splice(A,1,...o.nodes)}while(s.length>0);return g({type:"eos"}),i};Vm.exports=UC});var Xm=d((d2,Km)=>{"use strict";var Ym=eo(),kC=Fm(),jC=km(),GC=Wm(),Xe=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let i=Xe.create(n,t);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(Xe.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};Xe.parse=(e,t={})=>GC(e,t);Xe.stringify=(e,t={})=>Ym(typeof e=="string"?Xe.parse(e,t):e,t);Xe.compile=(e,t={})=>(typeof e=="string"&&(e=Xe.parse(e,t)),kC(e,t));Xe.expand=(e,t={})=>{typeof e=="string"&&(e=Xe.parse(e,t));let r=jC(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};Xe.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?Xe.compile(e,t):Xe.expand(e,t);Km.exports=Xe});var yi=d((p2,eE)=>{"use strict";var qC=v("path"),At="\\\\/",zm=`[^${At}]`,Dt="\\.",HC="\\+",$C="\\?",ro="\\/",VC="(?=.)",Qm="[^/]",Rl=`(?:${ro}|$)`,Zm=`(?:^|${ro})`,vl=`${Dt}{1,2}${Rl}`,WC=`(?!${Dt})`,YC=`(?!${Zm}${vl})`,KC=`(?!${Dt}{0,1}${Rl})`,XC=`(?!${vl})`,zC=`[^.${ro}]`,QC=`${Qm}*?`,Jm={DOT_LITERAL:Dt,PLUS_LITERAL:HC,QMARK_LITERAL:$C,SLASH_LITERAL:ro,ONE_CHAR:VC,QMARK:Qm,END_ANCHOR:Rl,DOTS_SLASH:vl,NO_DOT:WC,NO_DOTS:YC,NO_DOT_SLASH:KC,NO_DOTS_SLASH:XC,QMARK_NO_DOT:zC,STAR:QC,START_ANCHOR:Zm},ZC={...Jm,SLASH_LITERAL:`[${At}]`,QMARK:zm,STAR:`${zm}*?`,DOTS_SLASH:`${Dt}{1,2}(?:[${At}]|$)`,NO_DOT:`(?!${Dt})`,NO_DOTS:`(?!(?:^|[${At}])${Dt}{1,2}(?:[${At}]|$))`,NO_DOT_SLASH:`(?!${Dt}{0,1}(?:[${At}]|$))`,NO_DOTS_SLASH:`(?!${Dt}{1,2}(?:[${At}]|$))`,QMARK_NO_DOT:`[^.${At}]`,START_ANCHOR:`(?:^|[${At}])`,END_ANCHOR:`(?:[${At}]|$)`},JC={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};eE.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:JC,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:qC.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?ZC:Jm}}});var bi=d(Ge=>{"use strict";var eI=v("path"),tI=process.platform==="win32",{REGEX_BACKSLASH:rI,REGEX_REMOVE_BACKSLASH:nI,REGEX_SPECIAL_CHARS:iI,REGEX_SPECIAL_CHARS_GLOBAL:sI}=yi();Ge.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Ge.hasRegexChars=e=>iI.test(e);Ge.isRegexChar=e=>e.length===1&&Ge.hasRegexChars(e);Ge.escapeRegex=e=>e.replace(sI,"\\$1");Ge.toPosixSlashes=e=>e.replace(rI,"/");Ge.removeBackslashes=e=>e.replace(nI,t=>t==="\\"?"":t);Ge.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Ge.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:tI===!0||eI.sep==="\\";Ge.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Ge.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Ge.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Ge.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",s=`${n}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var uE=d((h2,aE)=>{"use strict";var tE=bi(),{CHAR_ASTERISK:Ol,CHAR_AT:oI,CHAR_BACKWARD_SLASH:Ri,CHAR_COMMA:aI,CHAR_DOT:Pl,CHAR_EXCLAMATION_MARK:Cl,CHAR_FORWARD_SLASH:oE,CHAR_LEFT_CURLY_BRACE:Il,CHAR_LEFT_PARENTHESES:wl,CHAR_LEFT_SQUARE_BRACKET:uI,CHAR_PLUS:cI,CHAR_QUESTION_MARK:rE,CHAR_RIGHT_CURLY_BRACE:lI,CHAR_RIGHT_PARENTHESES:nE,CHAR_RIGHT_SQUARE_BRACKET:dI}=yi(),iE=e=>e===oE||e===Ri,sE=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},pI=(e,t)=>{let r=t||{},n=e.length-1,i=r.parts===!0||r.scanToEnd===!0,s=[],o=[],a=[],u=e,c=-1,l=0,p=0,f=!1,_=!1,h=!1,g=!1,T=!1,A=!1,y=!1,b=!1,F=!1,O=!1,D=0,I,M,G={value:"",depth:0,isGlob:!1},Q=()=>c>=n,E=()=>u.charCodeAt(c+1),R=()=>(I=M,u.charCodeAt(++c));for(;c<n;){M=R();let Fe;if(M===Ri){y=G.backslashes=!0,M=R(),M===Il&&(A=!0);continue}if(A===!0||M===Il){for(D++;Q()!==!0&&(M=R());){if(M===Ri){y=G.backslashes=!0,R();continue}if(M===Il){D++;continue}if(A!==!0&&M===Pl&&(M=R())===Pl){if(f=G.isBrace=!0,h=G.isGlob=!0,O=!0,i===!0)continue;break}if(A!==!0&&M===aI){if(f=G.isBrace=!0,h=G.isGlob=!0,O=!0,i===!0)continue;break}if(M===lI&&(D--,D===0)){A=!1,f=G.isBrace=!0,O=!0;break}}if(i===!0)continue;break}if(M===oE){if(s.push(c),o.push(G),G={value:"",depth:0,isGlob:!1},O===!0)continue;if(I===Pl&&c===l+1){l+=2;continue}p=c+1;continue}if(r.noext!==!0&&(M===cI||M===oI||M===Ol||M===rE||M===Cl)===!0&&E()===wl){if(h=G.isGlob=!0,g=G.isExtglob=!0,O=!0,M===Cl&&c===l&&(F=!0),i===!0){for(;Q()!==!0&&(M=R());){if(M===Ri){y=G.backslashes=!0,M=R();continue}if(M===nE){h=G.isGlob=!0,O=!0;break}}continue}break}if(M===Ol){if(I===Ol&&(T=G.isGlobstar=!0),h=G.isGlob=!0,O=!0,i===!0)continue;break}if(M===rE){if(h=G.isGlob=!0,O=!0,i===!0)continue;break}if(M===uI){for(;Q()!==!0&&(Fe=R());){if(Fe===Ri){y=G.backslashes=!0,R();continue}if(Fe===dI){_=G.isBracket=!0,h=G.isGlob=!0,O=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&M===Cl&&c===l){b=G.negated=!0,l++;continue}if(r.noparen!==!0&&M===wl){if(h=G.isGlob=!0,i===!0){for(;Q()!==!0&&(M=R());){if(M===wl){y=G.backslashes=!0,M=R();continue}if(M===nE){O=!0;break}}continue}break}if(h===!0){if(O=!0,i===!0)continue;break}}r.noext===!0&&(g=!1,h=!1);let L=u,he="",m="";l>0&&(he=u.slice(0,l),u=u.slice(l),p-=l),L&&h===!0&&p>0?(L=u.slice(0,p),m=u.slice(p)):h===!0?(L="",m=u):L=u,L&&L!==""&&L!=="/"&&L!==u&&iE(L.charCodeAt(L.length-1))&&(L=L.slice(0,-1)),r.unescape===!0&&(m&&(m=tE.removeBackslashes(m)),L&&y===!0&&(L=tE.removeBackslashes(L)));let S={prefix:he,input:e,start:l,base:L,glob:m,isBrace:f,isBracket:_,isGlob:h,isExtglob:g,isGlobstar:T,negated:b,negatedExtglob:F};if(r.tokens===!0&&(S.maxDepth=0,iE(M)||o.push(G),S.tokens=o),r.parts===!0||r.tokens===!0){let Fe;for(let X=0;X<s.length;X++){let Et=Fe?Fe+1:l,St=s[X],Ke=e.slice(Et,St);r.tokens&&(X===0&&l!==0?(o[X].isPrefix=!0,o[X].value=he):o[X].value=Ke,sE(o[X]),S.maxDepth+=o[X].depth),(X!==0||Ke!=="")&&a.push(Ke),Fe=St}if(Fe&&Fe+1<e.length){let X=e.slice(Fe+1);a.push(X),r.tokens&&(o[o.length-1].value=X,sE(o[o.length-1]),S.maxDepth+=o[o.length-1].depth)}S.slashes=s,S.parts=a}return S};aE.exports=pI});var dE=d((_2,lE)=>{"use strict";var no=yi(),ze=bi(),{MAX_LENGTH:io,POSIX_REGEX_SOURCE:fI,REGEX_NON_SPECIAL_CHARS:hI,REGEX_SPECIAL_CHARS_BACKREF:_I,REPLACEMENTS:cE}=no,gI=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(i=>ze.escapeRegex(i)).join("..")}return r},rn=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,Nl=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=cE[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(io,r.maxLength):io,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let s={type:"bos",value:"",output:r.prepend||""},o=[s],a=r.capture?"":"?:",u=ze.isWindows(t),c=no.globChars(u),l=no.extglobChars(c),{DOT_LITERAL:p,PLUS_LITERAL:f,SLASH_LITERAL:_,ONE_CHAR:h,DOTS_SLASH:g,NO_DOT:T,NO_DOT_SLASH:A,NO_DOTS_SLASH:y,QMARK:b,QMARK_NO_DOT:F,STAR:O,START_ANCHOR:D}=c,I=C=>`(${a}(?:(?!${D}${C.dot?g:p}).)*?)`,M=r.dot?"":T,G=r.dot?b:F,Q=r.bash===!0?I(r):O;r.capture&&(Q=`(${Q})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let E={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};e=ze.removePrefix(e,E),i=e.length;let R=[],L=[],he=[],m=s,S,Fe=()=>E.index===i-1,X=E.peek=(C=1)=>e[E.index+C],Et=E.advance=()=>e[++E.index]||"",St=()=>e.slice(E.index+1),Ke=(C="",ne=0)=>{E.consumed+=C,E.index+=ne},Hs=C=>{E.output+=C.output!=null?C.output:C.value,Ke(C.value)},iP=()=>{let C=1;for(;X()==="!"&&(X(2)!=="("||X(3)==="?");)Et(),E.start++,C++;return C%2===0?!1:(E.negated=!0,E.start++,!0)},$s=C=>{E[C]++,he.push(C)},dr=C=>{E[C]--,he.pop()},W=C=>{if(m.type==="globstar"){let ne=E.braces>0&&(C.type==="comma"||C.type==="brace"),P=C.extglob===!0||R.length&&(C.type==="pipe"||C.type==="paren");C.type!=="slash"&&C.type!=="paren"&&!ne&&!P&&(E.output=E.output.slice(0,-m.output.length),m.type="star",m.value="*",m.output=Q,E.output+=m.output)}if(R.length&&C.type!=="paren"&&(R[R.length-1].inner+=C.value),(C.value||C.output)&&Hs(C),m&&m.type==="text"&&C.type==="text"){m.value+=C.value,m.output=(m.output||"")+C.value;return}C.prev=m,o.push(C),m=C},Vs=(C,ne)=>{let P={...l[ne],conditions:1,inner:""};P.prev=m,P.parens=E.parens,P.output=E.output;let q=(r.capture?"(":"")+P.open;$s("parens"),W({type:C,value:ne,output:E.output?"":h}),W({type:"paren",extglob:!0,value:Et(),output:q}),R.push(P)},sP=C=>{let ne=C.close+(r.capture?")":""),P;if(C.type==="negate"){let q=Q;if(C.inner&&C.inner.length>1&&C.inner.includes("/")&&(q=I(r)),(q!==Q||Fe()||/^\)+$/.test(St()))&&(ne=C.close=`)$))${q}`),C.inner.includes("*")&&(P=St())&&/^\.[^\\/.]+$/.test(P)){let le=Nl(P,{...t,fastpaths:!1}).output;ne=C.close=`)${le})${q})`}C.prev.type==="bos"&&(E.negatedExtglob=!0)}W({type:"paren",extglob:!0,value:S,output:ne}),dr("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let C=!1,ne=e.replace(_I,(P,q,le,Be,Ee,il)=>Be==="\\"?(C=!0,P):Be==="?"?q?q+Be+(Ee?b.repeat(Ee.length):""):il===0?G+(Ee?b.repeat(Ee.length):""):b.repeat(le.length):Be==="."?p.repeat(le.length):Be==="*"?q?q+Be+(Ee?Q:""):Q:q?P:`\\${P}`);return C===!0&&(r.unescape===!0?ne=ne.replace(/\\/g,""):ne=ne.replace(/\\+/g,P=>P.length%2===0?"\\\\":P?"\\":"")),ne===e&&r.contains===!0?(E.output=e,E):(E.output=ze.wrapOutput(ne,E,t),E)}for(;!Fe();){if(S=Et(),S==="\0")continue;if(S==="\\"){let P=X();if(P==="/"&&r.bash!==!0||P==="."||P===";")continue;if(!P){S+="\\",W({type:"text",value:S});continue}let q=/^\\+/.exec(St()),le=0;if(q&&q[0].length>2&&(le=q[0].length,E.index+=le,le%2!==0&&(S+="\\")),r.unescape===!0?S=Et():S+=Et(),E.brackets===0){W({type:"text",value:S});continue}}if(E.brackets>0&&(S!=="]"||m.value==="["||m.value==="[^")){if(r.posix!==!1&&S===":"){let P=m.value.slice(1);if(P.includes("[")&&(m.posix=!0,P.includes(":"))){let q=m.value.lastIndexOf("["),le=m.value.slice(0,q),Be=m.value.slice(q+2),Ee=fI[Be];if(Ee){m.value=le+Ee,E.backtrack=!0,Et(),!s.output&&o.indexOf(m)===1&&(s.output=h);continue}}}(S==="["&&X()!==":"||S==="-"&&X()==="]")&&(S=`\\${S}`),S==="]"&&(m.value==="["||m.value==="[^")&&(S=`\\${S}`),r.posix===!0&&S==="!"&&m.value==="["&&(S="^"),m.value+=S,Hs({value:S});continue}if(E.quotes===1&&S!=='"'){S=ze.escapeRegex(S),m.value+=S,Hs({value:S});continue}if(S==='"'){E.quotes=E.quotes===1?0:1,r.keepQuotes===!0&&W({type:"text",value:S});continue}if(S==="("){$s("parens"),W({type:"paren",value:S});continue}if(S===")"){if(E.parens===0&&r.strictBrackets===!0)throw new SyntaxError(rn("opening","("));let P=R[R.length-1];if(P&&E.parens===P.parens+1){sP(R.pop());continue}W({type:"paren",value:S,output:E.parens?")":"\\)"}),dr("parens");continue}if(S==="["){if(r.nobracket===!0||!St().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(rn("closing","]"));S=`\\${S}`}else $s("brackets");W({type:"bracket",value:S});continue}if(S==="]"){if(r.nobracket===!0||m&&m.type==="bracket"&&m.value.length===1){W({type:"text",value:S,output:`\\${S}`});continue}if(E.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(rn("opening","["));W({type:"text",value:S,output:`\\${S}`});continue}dr("brackets");let P=m.value.slice(1);if(m.posix!==!0&&P[0]==="^"&&!P.includes("/")&&(S=`/${S}`),m.value+=S,Hs({value:S}),r.literalBrackets===!1||ze.hasRegexChars(P))continue;let q=ze.escapeRegex(m.value);if(E.output=E.output.slice(0,-m.value.length),r.literalBrackets===!0){E.output+=q,m.value=q;continue}m.value=`(${a}${q}|${m.value})`,E.output+=m.value;continue}if(S==="{"&&r.nobrace!==!0){$s("braces");let P={type:"brace",value:S,output:"(",outputIndex:E.output.length,tokensIndex:E.tokens.length};L.push(P),W(P);continue}if(S==="}"){let P=L[L.length-1];if(r.nobrace===!0||!P){W({type:"text",value:S,output:S});continue}let q=")";if(P.dots===!0){let le=o.slice(),Be=[];for(let Ee=le.length-1;Ee>=0&&(o.pop(),le[Ee].type!=="brace");Ee--)le[Ee].type!=="dots"&&Be.unshift(le[Ee].value);q=gI(Be,r),E.backtrack=!0}if(P.comma!==!0&&P.dots!==!0){let le=E.output.slice(0,P.outputIndex),Be=E.tokens.slice(P.tokensIndex);P.value=P.output="\\{",S=q="\\}",E.output=le;for(let Ee of Be)E.output+=Ee.output||Ee.value}W({type:"brace",value:S,output:q}),dr("braces"),L.pop();continue}if(S==="|"){R.length>0&&R[R.length-1].conditions++,W({type:"text",value:S});continue}if(S===","){let P=S,q=L[L.length-1];q&&he[he.length-1]==="braces"&&(q.comma=!0,P="|"),W({type:"comma",value:S,output:P});continue}if(S==="/"){if(m.type==="dot"&&E.index===E.start+1){E.start=E.index+1,E.consumed="",E.output="",o.pop(),m=s;continue}W({type:"slash",value:S,output:_});continue}if(S==="."){if(E.braces>0&&m.type==="dot"){m.value==="."&&(m.output=p);let P=L[L.length-1];m.type="dots",m.output+=S,m.value+=S,P.dots=!0;continue}if(E.braces+E.parens===0&&m.type!=="bos"&&m.type!=="slash"){W({type:"text",value:S,output:p});continue}W({type:"dot",value:S,output:p});continue}if(S==="?"){if(!(m&&m.value==="(")&&r.noextglob!==!0&&X()==="("&&X(2)!=="?"){Vs("qmark",S);continue}if(m&&m.type==="paren"){let q=X(),le=S;if(q==="<"&&!ze.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(m.value==="("&&!/[!=<:]/.test(q)||q==="<"&&!/<([!=]|\w+>)/.test(St()))&&(le=`\\${S}`),W({type:"text",value:S,output:le});continue}if(r.dot!==!0&&(m.type==="slash"||m.type==="bos")){W({type:"qmark",value:S,output:F});continue}W({type:"qmark",value:S,output:b});continue}if(S==="!"){if(r.noextglob!==!0&&X()==="("&&(X(2)!=="?"||!/[!=<:]/.test(X(3)))){Vs("negate",S);continue}if(r.nonegate!==!0&&E.index===0){iP();continue}}if(S==="+"){if(r.noextglob!==!0&&X()==="("&&X(2)!=="?"){Vs("plus",S);continue}if(m&&m.value==="("||r.regex===!1){W({type:"plus",value:S,output:f});continue}if(m&&(m.type==="bracket"||m.type==="paren"||m.type==="brace")||E.parens>0){W({type:"plus",value:S});continue}W({type:"plus",value:f});continue}if(S==="@"){if(r.noextglob!==!0&&X()==="("&&X(2)!=="?"){W({type:"at",extglob:!0,value:S,output:""});continue}W({type:"text",value:S});continue}if(S!=="*"){(S==="$"||S==="^")&&(S=`\\${S}`);let P=hI.exec(St());P&&(S+=P[0],E.index+=P[0].length),W({type:"text",value:S});continue}if(m&&(m.type==="globstar"||m.star===!0)){m.type="star",m.star=!0,m.value+=S,m.output=Q,E.backtrack=!0,E.globstar=!0,Ke(S);continue}let C=St();if(r.noextglob!==!0&&/^\([^?]/.test(C)){Vs("star",S);continue}if(m.type==="star"){if(r.noglobstar===!0){Ke(S);continue}let P=m.prev,q=P.prev,le=P.type==="slash"||P.type==="bos",Be=q&&(q.type==="star"||q.type==="globstar");if(r.bash===!0&&(!le||C[0]&&C[0]!=="/")){W({type:"star",value:S,output:""});continue}let Ee=E.braces>0&&(P.type==="comma"||P.type==="brace"),il=R.length&&(P.type==="pipe"||P.type==="paren");if(!le&&P.type!=="paren"&&!Ee&&!il){W({type:"star",value:S,output:""});continue}for(;C.slice(0,3)==="/**";){let Ws=e[E.index+4];if(Ws&&Ws!=="/")break;C=C.slice(3),Ke("/**",3)}if(P.type==="bos"&&Fe()){m.type="globstar",m.value+=S,m.output=I(r),E.output=m.output,E.globstar=!0,Ke(S);continue}if(P.type==="slash"&&P.prev.type!=="bos"&&!Be&&Fe()){E.output=E.output.slice(0,-(P.output+m.output).length),P.output=`(?:${P.output}`,m.type="globstar",m.output=I(r)+(r.strictSlashes?")":"|$)"),m.value+=S,E.globstar=!0,E.output+=P.output+m.output,Ke(S);continue}if(P.type==="slash"&&P.prev.type!=="bos"&&C[0]==="/"){let Ws=C[1]!==void 0?"|$":"";E.output=E.output.slice(0,-(P.output+m.output).length),P.output=`(?:${P.output}`,m.type="globstar",m.output=`${I(r)}${_}|${_}${Ws})`,m.value+=S,E.output+=P.output+m.output,E.globstar=!0,Ke(S+Et()),W({type:"slash",value:"/",output:""});continue}if(P.type==="bos"&&C[0]==="/"){m.type="globstar",m.value+=S,m.output=`(?:^|${_}|${I(r)}${_})`,E.output=m.output,E.globstar=!0,Ke(S+Et()),W({type:"slash",value:"/",output:""});continue}E.output=E.output.slice(0,-m.output.length),m.type="globstar",m.output=I(r),m.value+=S,E.output+=m.output,E.globstar=!0,Ke(S);continue}let ne={type:"star",value:S,output:Q};if(r.bash===!0){ne.output=".*?",(m.type==="bos"||m.type==="slash")&&(ne.output=M+ne.output),W(ne);continue}if(m&&(m.type==="bracket"||m.type==="paren")&&r.regex===!0){ne.output=S,W(ne);continue}(E.index===E.start||m.type==="slash"||m.type==="dot")&&(m.type==="dot"?(E.output+=A,m.output+=A):r.dot===!0?(E.output+=y,m.output+=y):(E.output+=M,m.output+=M),X()!=="*"&&(E.output+=h,m.output+=h)),W(ne)}for(;E.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(rn("closing","]"));E.output=ze.escapeLast(E.output,"["),dr("brackets")}for(;E.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(rn("closing",")"));E.output=ze.escapeLast(E.output,"("),dr("parens")}for(;E.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(rn("closing","}"));E.output=ze.escapeLast(E.output,"{"),dr("braces")}if(r.strictSlashes!==!0&&(m.type==="star"||m.type==="bracket")&&W({type:"maybe_slash",value:"",output:`${_}?`}),E.backtrack===!0){E.output="";for(let C of E.tokens)E.output+=C.output!=null?C.output:C.value,C.suffix&&(E.output+=C.suffix)}return E};Nl.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(io,r.maxLength):io,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);e=cE[e]||e;let s=ze.isWindows(t),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:p,NO_DOTS_SLASH:f,STAR:_,START_ANCHOR:h}=no.globChars(s),g=r.dot?p:l,T=r.dot?f:l,A=r.capture?"":"?:",y={negated:!1,prefix:""},b=r.bash===!0?".*?":_;r.capture&&(b=`(${b})`);let F=M=>M.noglobstar===!0?b:`(${A}(?:(?!${h}${M.dot?c:o}).)*?)`,O=M=>{switch(M){case"*":return`${g}${u}${b}`;case".*":return`${o}${u}${b}`;case"*.*":return`${g}${b}${o}${u}${b}`;case"*/*":return`${g}${b}${a}${u}${T}${b}`;case"**":return g+F(r);case"**/*":return`(?:${g}${F(r)}${a})?${T}${u}${b}`;case"**/*.*":return`(?:${g}${F(r)}${a})?${T}${b}${o}${u}${b}`;case"**/.*":return`(?:${g}${F(r)}${a})?${o}${u}${b}`;default:{let G=/^(.*?)\.(\w+)$/.exec(M);if(!G)return;let Q=O(G[1]);return Q?Q+o+G[2]:void 0}}},D=ze.removePrefix(e,y),I=O(D);return I&&r.strictSlashes!==!0&&(I+=`${a}?`),I};lE.exports=Nl});var fE=d((g2,pE)=>{"use strict";var mI=v("path"),EI=uE(),xl=dE(),Ll=bi(),SI=yi(),AI=e=>e&&typeof e=="object"&&!Array.isArray(e),de=(e,t,r=!1)=>{if(Array.isArray(e)){let l=e.map(f=>de(f,t,r));return f=>{for(let _ of l){let h=_(f);if(h)return h}return!1}}let n=AI(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=Ll.isWindows(t),o=n?de.compileRe(e,t):de.makeRe(e,t,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(i.ignore){let l={...t,ignore:null,onMatch:null,onResult:null};u=de(i.ignore,l,r)}let c=(l,p=!1)=>{let{isMatch:f,match:_,output:h}=de.test(l,o,t,{glob:e,posix:s}),g={glob:e,state:a,regex:o,posix:s,input:l,output:h,match:_,isMatch:f};return typeof i.onResult=="function"&&i.onResult(g),f===!1?(g.isMatch=!1,p?g:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(g),g.isMatch=!1,p?g:!1):(typeof i.onMatch=="function"&&i.onMatch(g),p?g:!0)};return r&&(c.state=a),c};de.test=(e,t,r,{glob:n,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=r||{},o=s.format||(i?Ll.toPosixSlashes:null),a=e===n,u=a&&o?o(e):e;return a===!1&&(u=o?o(e):e,a=u===n),(a===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?a=de.matchBase(e,t,r,i):a=t.exec(u)),{isMatch:!!a,match:a,output:u}};de.matchBase=(e,t,r,n=Ll.isWindows(r))=>(t instanceof RegExp?t:de.makeRe(t,r)).test(mI.basename(e));de.isMatch=(e,t,r)=>de(t,r)(e);de.parse=(e,t)=>Array.isArray(e)?e.map(r=>de.parse(r,t)):xl(e,{...t,fastpaths:!1});de.scan=(e,t)=>EI(e,t);de.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let i=t||{},s=i.contains?"":"^",o=i.contains?"":"$",a=`${s}(?:${e.output})${o}`;e&&e.negated===!0&&(a=`^(?!${a}).*$`);let u=de.toRegex(a,t);return n===!0&&(u.state=e),u};de.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=xl.fastpaths(e,t)),i.output||(i=xl(e,t)),de.compileRe(i,t,r,n)};de.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};de.constants=SI;pE.exports=de});var _E=d((m2,hE)=>{"use strict";hE.exports=fE()});var Dl=d((E2,SE)=>{"use strict";var mE=v("util"),EE=Xm(),Tt=_E(),Ml=bi(),gE=e=>e===""||e==="./",oe=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,i=new Set,s=new Set,o=0,a=l=>{s.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<t.length;l++){let p=Tt(String(t[l]),{...r,onResult:a},!0),f=p.state.negated||p.state.negatedExtglob;f&&o++;for(let _ of e){let h=p(_,!0);(f?!h.isMatch:h.isMatch)&&(f?n.add(h.output):(n.delete(h.output),i.add(h.output)))}}let c=(o===t.length?[...s]:[...i]).filter(l=>!n.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?t.map(l=>l.replace(/\\/g,"")):t}return c};oe.match=oe;oe.matcher=(e,t)=>Tt(e,t);oe.isMatch=(e,t,r)=>Tt(t,r)(e);oe.any=oe.isMatch;oe.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,i=[],s=a=>{r.onResult&&r.onResult(a),i.push(a.output)},o=new Set(oe(e,t,{...r,onResult:s}));for(let a of i)o.has(a)||n.add(a);return[...n]};oe.contains=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${mE.inspect(e)}"`);if(Array.isArray(t))return t.some(n=>oe.contains(e,n,r));if(typeof t=="string"){if(gE(e)||gE(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return oe.isMatch(e,t,{...r,contains:!0})};oe.matchKeys=(e,t,r)=>{if(!Ml.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=oe(Object.keys(e),t,r),i={};for(let s of n)i[s]=e[s];return i};oe.some=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=Tt(String(i),r);if(n.some(o=>s(o)))return!0}return!1};oe.every=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=Tt(String(i),r);if(!n.every(o=>s(o)))return!1}return!0};oe.all=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${mE.inspect(e)}"`);return[].concat(t).every(n=>Tt(n,r)(e))};oe.capture=(e,t,r)=>{let n=Ml.isWindows(r),s=Tt.makeRe(String(e),{...r,capture:!0}).exec(n?Ml.toPosixSlashes(t):t);if(s)return s.slice(1).map(o=>o===void 0?"":o)};oe.makeRe=(...e)=>Tt.makeRe(...e);oe.scan=(...e)=>Tt.scan(...e);oe.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let i of EE(String(n),t))r.push(Tt.parse(i,t));return r};oe.braces=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!/\{.*\}/.test(e)?[e]:EE(e,t)};oe.braceExpand=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return oe.braces(e,{...t,expand:!0})};SE.exports=oe});var PE=d(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.removeDuplicateSlashes=B.matchAny=B.convertPatternsToRe=B.makeRe=B.getPatternParts=B.expandBraceExpansion=B.expandPatternsWithBraceExpansion=B.isAffectDepthOfReadingPattern=B.endsWithSlashGlobStar=B.hasGlobStar=B.getBaseDirectory=B.isPatternRelatedToParentDirectory=B.getPatternsOutsideCurrentDirectory=B.getPatternsInsideCurrentDirectory=B.getPositivePatterns=B.getNegativePatterns=B.isPositivePattern=B.isNegativePattern=B.convertToNegativePattern=B.convertToPositivePattern=B.isDynamicPattern=B.isStaticPattern=void 0;var TI=v("path"),yI=pm(),Fl=Dl(),AE="**",bI="\\",RI=/[*?]|^!/,vI=/\[[^[]*]/,OI=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,PI=/[!*+?@]\([^(]*\)/,CI=/,|\.\./,II=/(?!^)\/{2,}/g;function TE(e,t={}){return!yE(e,t)}B.isStaticPattern=TE;function yE(e,t={}){return e===""?!1:!!(t.caseSensitiveMatch===!1||e.includes(bI)||RI.test(e)||vI.test(e)||OI.test(e)||t.extglob!==!1&&PI.test(e)||t.braceExpansion!==!1&&wI(e))}B.isDynamicPattern=yE;function wI(e){let t=e.indexOf("{");if(t===-1)return!1;let r=e.indexOf("}",t+1);if(r===-1)return!1;let n=e.slice(t,r);return CI.test(n)}function NI(e){return so(e)?e.slice(1):e}B.convertToPositivePattern=NI;function xI(e){return"!"+e}B.convertToNegativePattern=xI;function so(e){return e.startsWith("!")&&e[1]!=="("}B.isNegativePattern=so;function bE(e){return!so(e)}B.isPositivePattern=bE;function LI(e){return e.filter(so)}B.getNegativePatterns=LI;function MI(e){return e.filter(bE)}B.getPositivePatterns=MI;function DI(e){return e.filter(t=>!Bl(t))}B.getPatternsInsideCurrentDirectory=DI;function FI(e){return e.filter(Bl)}B.getPatternsOutsideCurrentDirectory=FI;function Bl(e){return e.startsWith("..")||e.startsWith("./..")}B.isPatternRelatedToParentDirectory=Bl;function BI(e){return yI(e,{flipBackslashes:!1})}B.getBaseDirectory=BI;function UI(e){return e.includes(AE)}B.hasGlobStar=UI;function RE(e){return e.endsWith("/"+AE)}B.endsWithSlashGlobStar=RE;function kI(e){let t=TI.basename(e);return RE(e)||TE(t)}B.isAffectDepthOfReadingPattern=kI;function jI(e){return e.reduce((t,r)=>t.concat(vE(r)),[])}B.expandPatternsWithBraceExpansion=jI;function vE(e){let t=Fl.braces(e,{expand:!0,nodupes:!0,keepEscaping:!0});return t.sort((r,n)=>r.length-n.length),t.filter(r=>r!=="")}B.expandBraceExpansion=vE;function GI(e,t){let{parts:r}=Fl.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return r.length===0&&(r=[e]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}B.getPatternParts=GI;function OE(e,t){return Fl.makeRe(e,t)}B.makeRe=OE;function qI(e,t){return e.map(r=>OE(r,t))}B.convertPatternsToRe=qI;function HI(e,t){return t.some(r=>r.test(e))}B.matchAny=HI;function $I(e){return e.replace(II,"/")}B.removeDuplicateSlashes=$I});var NE=d((A2,wE)=>{"use strict";var VI=v("stream"),CE=VI.PassThrough,WI=Array.prototype.slice;wE.exports=YI;function YI(){let e=[],t=WI.call(arguments),r=!1,n=t[t.length-1];n&&!Array.isArray(n)&&n.pipe==null?t.pop():n={};let i=n.end!==!1,s=n.pipeError===!0;n.objectMode==null&&(n.objectMode=!0),n.highWaterMark==null&&(n.highWaterMark=64*1024);let o=CE(n);function a(){for(let l=0,p=arguments.length;l<p;l++)e.push(IE(arguments[l],n));return u(),this}function u(){if(r)return;r=!0;let l=e.shift();if(!l){process.nextTick(c);return}Array.isArray(l)||(l=[l]);let p=l.length+1;function f(){--p>0||(r=!1,u())}function _(h){function g(){h.removeListener("merge2UnpipeEnd",g),h.removeListener("end",g),s&&h.removeListener("error",T),f()}function T(A){o.emit("error",A)}if(h._readableState.endEmitted)return f();h.on("merge2UnpipeEnd",g),h.on("end",g),s&&h.on("error",T),h.pipe(o,{end:!1}),h.resume()}for(let h=0;h<l.length;h++)_(l[h]);f()}function c(){r=!1,o.emit("queueDrain"),i&&o.end()}return o.setMaxListeners(0),o.add=a,o.on("unpipe",function(l){l.emit("merge2UnpipeEnd")}),t.length&&a.apply(null,t),o}function IE(e,t){if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=IE(e[r],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(CE(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}});var LE=d(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.merge=void 0;var KI=NE();function XI(e){let t=KI(e);return e.forEach(r=>{r.once("error",n=>t.emit("error",n))}),t.once("close",()=>xE(e)),t.once("end",()=>xE(e)),t}oo.merge=XI;function xE(e){e.forEach(t=>t.emit("close"))}});var ME=d(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.isEmpty=nn.isString=void 0;function zI(e){return typeof e=="string"}nn.isString=zI;function QI(e){return e===""}nn.isEmpty=QI});var Ft=d(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.string=Oe.stream=Oe.pattern=Oe.path=Oe.fs=Oe.errno=Oe.array=void 0;var ZI=Jg();Oe.array=ZI;var JI=em();Oe.errno=JI;var ew=tm();Oe.fs=ew;var tw=sm();Oe.path=tw;var rw=PE();Oe.pattern=rw;var nw=LE();Oe.stream=nw;var iw=ME();Oe.string=iw});var UE=d(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.convertPatternGroupToTask=Pe.convertPatternGroupsToTasks=Pe.groupPatternsByBaseDirectory=Pe.getNegativePatternsAsPositive=Pe.getPositivePatterns=Pe.convertPatternsToTasks=Pe.generate=void 0;var ct=Ft();function sw(e,t){let r=DE(e,t),n=DE(t.ignore,t),i=FE(r),s=BE(r,n),o=i.filter(l=>ct.pattern.isStaticPattern(l,t)),a=i.filter(l=>ct.pattern.isDynamicPattern(l,t)),u=Ul(o,s,!1),c=Ul(a,s,!0);return u.concat(c)}Pe.generate=sw;function DE(e,t){let r=e;return t.braceExpansion&&(r=ct.pattern.expandPatternsWithBraceExpansion(r)),t.baseNameMatch&&(r=r.map(n=>n.includes("/")?n:`**/${n}`)),r.map(n=>ct.pattern.removeDuplicateSlashes(n))}function Ul(e,t,r){let n=[],i=ct.pattern.getPatternsOutsideCurrentDirectory(e),s=ct.pattern.getPatternsInsideCurrentDirectory(e),o=kl(i),a=kl(s);return n.push(...jl(o,t,r)),"."in a?n.push(Gl(".",s,t,r)):n.push(...jl(a,t,r)),n}Pe.convertPatternsToTasks=Ul;function FE(e){return ct.pattern.getPositivePatterns(e)}Pe.getPositivePatterns=FE;function BE(e,t){return ct.pattern.getNegativePatterns(e).concat(t).map(ct.pattern.convertToPositivePattern)}Pe.getNegativePatternsAsPositive=BE;function kl(e){let t={};return e.reduce((r,n)=>{let i=ct.pattern.getBaseDirectory(n);return i in r?r[i].push(n):r[i]=[n],r},t)}Pe.groupPatternsByBaseDirectory=kl;function jl(e,t,r){return Object.keys(e).map(n=>Gl(n,e[n],t,r))}Pe.convertPatternGroupsToTasks=jl;function Gl(e,t,r,n){return{dynamic:n,positive:t,negative:r,base:e,patterns:[].concat(t,r.map(ct.pattern.convertToNegativePattern))}}Pe.convertPatternGroupToTask=Gl});var jE=d(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.read=void 0;function ow(e,t,r){t.fs.lstat(e,(n,i)=>{if(n!==null){kE(r,n);return}if(!i.isSymbolicLink()||!t.followSymbolicLink){ql(r,i);return}t.fs.stat(e,(s,o)=>{if(s!==null){if(t.throwErrorOnBrokenSymbolicLink){kE(r,s);return}ql(r,i);return}t.markSymbolicLink&&(o.isSymbolicLink=()=>!0),ql(r,o)})})}ao.read=ow;function kE(e,t){e(t)}function ql(e,t){e(null,t)}});var GE=d(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.read=void 0;function aw(e,t){let r=t.fs.lstatSync(e);if(!r.isSymbolicLink()||!t.followSymbolicLink)return r;try{let n=t.fs.statSync(e);return t.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(n){if(!t.throwErrorOnBrokenSymbolicLink)return r;throw n}}uo.read=aw});var qE=d($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.createFileSystemAdapter=$t.FILE_SYSTEM_ADAPTER=void 0;var co=v("fs");$t.FILE_SYSTEM_ADAPTER={lstat:co.lstat,stat:co.stat,lstatSync:co.lstatSync,statSync:co.statSync};function uw(e){return e===void 0?$t.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},$t.FILE_SYSTEM_ADAPTER),e)}$t.createFileSystemAdapter=uw});var HE=d($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var cw=qE(),Hl=class{constructor(t={}){this._options=t,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=cw.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(t,r){return t??r}};$l.default=Hl});var hr=d(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.statSync=Vt.stat=Vt.Settings=void 0;var $E=jE(),lw=GE(),Vl=HE();Vt.Settings=Vl.default;function dw(e,t,r){if(typeof t=="function"){$E.read(e,Wl(),t);return}$E.read(e,Wl(t),r)}Vt.stat=dw;function pw(e,t){let r=Wl(t);return lw.read(e,r)}Vt.statSync=pw;function Wl(e={}){return e instanceof Vl.default?e:new Vl.default(e)}});var YE=d((w2,WE)=>{var VE;WE.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(VE||(VE=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var XE=d((N2,KE)=>{KE.exports=hw;var fw=YE();function hw(e,t){let r,n,i,s=!0;Array.isArray(e)?(r=[],n=e.length):(i=Object.keys(e),r={},n=i.length);function o(u){function c(){t&&t(u,r),t=null}s?fw(c):c()}function a(u,c,l){r[u]=l,(--n===0||c)&&o(c)}n?i?i.forEach(function(u){e[u](function(c,l){a(u,c,l)})}):e.forEach(function(u,c){u(function(l,p){a(c,l,p)})}):o(null),s=!1}});var Yl=d(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var lo=process.versions.node.split(".");if(lo[0]===void 0||lo[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var zE=Number.parseInt(lo[0],10),_w=Number.parseInt(lo[1],10),QE=10,gw=10,mw=zE>QE,Ew=zE===QE&&_w>=gw;po.IS_SUPPORT_READDIR_WITH_FILE_TYPES=mw||Ew});var ZE=d(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.createDirentFromStats=void 0;var Kl=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function Sw(e,t){return new Kl(e,t)}fo.createDirentFromStats=Sw});var Xl=d(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.fs=void 0;var Aw=ZE();ho.fs=Aw});var zl=d(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.joinPathSegments=void 0;function Tw(e,t,r){return e.endsWith(r)?e+t:e+r+t}_o.joinPathSegments=Tw});var iS=d(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.readdir=Wt.readdirWithFileTypes=Wt.read=void 0;var yw=hr(),JE=XE(),bw=Yl(),eS=Xl(),tS=zl();function Rw(e,t,r){if(!t.stats&&bw.IS_SUPPORT_READDIR_WITH_FILE_TYPES){rS(e,t,r);return}nS(e,t,r)}Wt.read=Rw;function rS(e,t,r){t.fs.readdir(e,{withFileTypes:!0},(n,i)=>{if(n!==null){go(r,n);return}let s=i.map(a=>({dirent:a,name:a.name,path:tS.joinPathSegments(e,a.name,t.pathSegmentSeparator)}));if(!t.followSymbolicLinks){Ql(r,s);return}let o=s.map(a=>vw(a,t));JE(o,(a,u)=>{if(a!==null){go(r,a);return}Ql(r,u)})})}Wt.readdirWithFileTypes=rS;function vw(e,t){return r=>{if(!e.dirent.isSymbolicLink()){r(null,e);return}t.fs.stat(e.path,(n,i)=>{if(n!==null){if(t.throwErrorOnBrokenSymbolicLink){r(n);return}r(null,e);return}e.dirent=eS.fs.createDirentFromStats(e.name,i),r(null,e)})}}function nS(e,t,r){t.fs.readdir(e,(n,i)=>{if(n!==null){go(r,n);return}let s=i.map(o=>{let a=tS.joinPathSegments(e,o,t.pathSegmentSeparator);return u=>{yw.stat(a,t.fsStatSettings,(c,l)=>{if(c!==null){u(c);return}let p={name:o,path:a,dirent:eS.fs.createDirentFromStats(o,l)};t.stats&&(p.stats=l),u(null,p)})}});JE(s,(o,a)=>{if(o!==null){go(r,o);return}Ql(r,a)})})}Wt.readdir=nS;function go(e,t){e(t)}function Ql(e,t){e(null,t)}});var cS=d(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.readdir=Yt.readdirWithFileTypes=Yt.read=void 0;var Ow=hr(),Pw=Yl(),sS=Xl(),oS=zl();function Cw(e,t){return!t.stats&&Pw.IS_SUPPORT_READDIR_WITH_FILE_TYPES?aS(e,t):uS(e,t)}Yt.read=Cw;function aS(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map(n=>{let i={dirent:n,name:n.name,path:oS.joinPathSegments(e,n.name,t.pathSegmentSeparator)};if(i.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{let s=t.fs.statSync(i.path);i.dirent=sS.fs.createDirentFromStats(i.name,s)}catch(s){if(t.throwErrorOnBrokenSymbolicLink)throw s}return i})}Yt.readdirWithFileTypes=aS;function uS(e,t){return t.fs.readdirSync(e).map(n=>{let i=oS.joinPathSegments(e,n,t.pathSegmentSeparator),s=Ow.statSync(i,t.fsStatSettings),o={name:n,path:i,dirent:sS.fs.createDirentFromStats(n,s)};return t.stats&&(o.stats=s),o})}Yt.readdir=uS});var lS=d(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.createFileSystemAdapter=Kt.FILE_SYSTEM_ADAPTER=void 0;var sn=v("fs");Kt.FILE_SYSTEM_ADAPTER={lstat:sn.lstat,stat:sn.stat,lstatSync:sn.lstatSync,statSync:sn.statSync,readdir:sn.readdir,readdirSync:sn.readdirSync};function Iw(e){return e===void 0?Kt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},Kt.FILE_SYSTEM_ADAPTER),e)}Kt.createFileSystemAdapter=Iw});var dS=d(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var ww=v("path"),Nw=hr(),xw=lS(),Zl=class{constructor(t={}){this._options=t,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=xw.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,ww.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new Nw.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};Jl.default=Zl});var mo=d(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.Settings=Xt.scandirSync=Xt.scandir=void 0;var pS=iS(),Lw=cS(),ed=dS();Xt.Settings=ed.default;function Mw(e,t,r){if(typeof t=="function"){pS.read(e,td(),t);return}pS.read(e,td(t),r)}Xt.scandir=Mw;function Dw(e,t){let r=td(t);return Lw.read(e,r)}Xt.scandirSync=Dw;function td(e={}){return e instanceof ed.default?e:new ed.default(e)}});var hS=d((G2,fS)=>{"use strict";function Fw(e){var t=new e,r=t;function n(){var s=t;return s.next?t=s.next:(t=new e,r=t),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}fS.exports=Fw});var gS=d((q2,rd)=>{"use strict";var Bw=hS();function _S(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=Bw(Uw),i=null,s=null,o=0,a=null,u={push:g,drain:it,saturated:it,pause:l,paused:!1,get concurrency(){return r},set concurrency(O){if(!(O>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=O,!u.paused)for(;i&&o<r;)o++,A()},running:c,resume:_,idle:h,length:p,getQueue:f,unshift:T,empty:it,kill:y,killAndDrain:b,error:F};return u;function c(){return o}function l(){u.paused=!0}function p(){for(var O=i,D=0;O;)O=O.next,D++;return D}function f(){for(var O=i,D=[];O;)D.push(O.value),O=O.next;return D}function _(){if(u.paused){if(u.paused=!1,i===null){o++,A();return}for(;i&&o<r;)o++,A()}}function h(){return o===0&&u.length()===0}function g(O,D){var I=n.get();I.context=e,I.release=A,I.value=O,I.callback=D||it,I.errorHandler=a,o>=r||u.paused?s?(s.next=I,s=I):(i=I,s=I,u.saturated()):(o++,t.call(e,I.value,I.worked))}function T(O,D){var I=n.get();I.context=e,I.release=A,I.value=O,I.callback=D||it,I.errorHandler=a,o>=r||u.paused?i?(I.next=i,i=I):(i=I,s=I,u.saturated()):(o++,t.call(e,I.value,I.worked))}function A(O){O&&n.release(O);var D=i;D&&o<=r?u.paused?o--:(s===i&&(s=null),i=D.next,D.next=null,t.call(e,D.value,D.worked),s===null&&u.empty()):--o===0&&u.drain()}function y(){i=null,s=null,u.drain=it}function b(){i=null,s=null,u.drain(),u.drain=it}function F(O){a=O}}function it(){}function Uw(){this.value=null,this.callback=it,this.next=null,this.release=it,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var i=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=it,e.errorHandler&&s(r,o),i.call(e.context,r,n),e.release(e)}}function kw(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(l,p){t.call(this,l).then(function(f){p(null,f)},p)}var i=_S(e,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=u,i.drained=c,i;function a(l){var p=new Promise(function(f,_){s(l,function(h,g){if(h){_(h);return}f(g)})});return p.catch(it),p}function u(l){var p=new Promise(function(f,_){o(l,function(h,g){if(h){_(h);return}f(g)})});return p.catch(it),p}function c(){if(i.idle())return new Promise(function(f){f()});var l=i.drain,p=new Promise(function(f){i.drain=function(){l(),f()}});return p}}rd.exports=_S;rd.exports.promise=kw});var Eo=d(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.joinPathSegments=yt.replacePathSegmentSeparator=yt.isAppliedFilter=yt.isFatalError=void 0;function jw(e,t){return e.errorFilter===null?!0:!e.errorFilter(t)}yt.isFatalError=jw;function Gw(e,t){return e===null||e(t)}yt.isAppliedFilter=Gw;function qw(e,t){return e.split(/[/\\]/).join(t)}yt.replacePathSegmentSeparator=qw;function Hw(e,t,r){return e===""?t:e.endsWith(r)?e+t:e+r+t}yt.joinPathSegments=Hw});var sd=d(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});var $w=Eo(),nd=class{constructor(t,r){this._root=t,this._settings=r,this._root=$w.replacePathSegmentSeparator(t,r.pathSegmentSeparator)}};id.default=nd});var ud=d(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var Vw=v("events"),Ww=mo(),Yw=gS(),So=Eo(),Kw=sd(),od=class extends Kw.default{constructor(t,r){super(t,r),this._settings=r,this._scandir=Ww.scandir,this._emitter=new Vw.EventEmitter,this._queue=Yw(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(t){this._emitter.on("entry",t)}onError(t){this._emitter.once("error",t)}onEnd(t){this._emitter.once("end",t)}_pushToQueue(t,r){let n={directory:t,base:r};this._queue.push(n,i=>{i!==null&&this._handleError(i)})}_worker(t,r){this._scandir(t.directory,this._settings.fsScandirSettings,(n,i)=>{if(n!==null){r(n,void 0);return}for(let s of i)this._handleEntry(s,t.base);r(null,void 0)})}_handleError(t){this._isDestroyed||!So.isFatalError(this._settings,t)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",t))}_handleEntry(t,r){if(this._isDestroyed||this._isFatalError)return;let n=t.path;r!==void 0&&(t.path=So.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),So.isAppliedFilter(this._settings.entryFilter,t)&&this._emitEntry(t),t.dirent.isDirectory()&&So.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_emitEntry(t){this._emitter.emit("entry",t)}};ad.default=od});var mS=d(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var Xw=ud(),cd=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new Xw.default(this._root,this._settings),this._storage=[]}read(t){this._reader.onError(r=>{zw(t,r)}),this._reader.onEntry(r=>{this._storage.push(r)}),this._reader.onEnd(()=>{Qw(t,this._storage)}),this._reader.read()}};ld.default=cd;function zw(e,t){e(t)}function Qw(e,t){e(null,t)}});var ES=d(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});var Zw=v("stream"),Jw=ud(),dd=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new Jw.default(this._root,this._settings),this._stream=new Zw.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(t=>{this._stream.emit("error",t)}),this._reader.onEntry(t=>{this._stream.push(t)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}};pd.default=dd});var SS=d(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});var eN=mo(),Ao=Eo(),tN=sd(),fd=class extends tN.default{constructor(){super(...arguments),this._scandir=eN.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(t,r){this._queue.add({directory:t,base:r})}_handleQueue(){for(let t of this._queue.values())this._handleDirectory(t.directory,t.base)}_handleDirectory(t,r){try{let n=this._scandir(t,this._settings.fsScandirSettings);for(let i of n)this._handleEntry(i,r)}catch(n){this._handleError(n)}}_handleError(t){if(Ao.isFatalError(this._settings,t))throw t}_handleEntry(t,r){let n=t.path;r!==void 0&&(t.path=Ao.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),Ao.isAppliedFilter(this._settings.entryFilter,t)&&this._pushToStorage(t),t.dirent.isDirectory()&&Ao.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_pushToStorage(t){this._storage.push(t)}};hd.default=fd});var AS=d(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});var rN=SS(),_d=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new rN.default(this._root,this._settings)}read(){return this._reader.read()}};gd.default=_d});var TS=d(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});var nN=v("path"),iN=mo(),md=class{constructor(t={}){this._options=t,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,nN.sep),this.fsScandirSettings=new iN.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};Ed.default=md});var yo=d(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.Settings=bt.walkStream=bt.walkSync=bt.walk=void 0;var yS=mS(),sN=ES(),oN=AS(),Sd=TS();bt.Settings=Sd.default;function aN(e,t,r){if(typeof t=="function"){new yS.default(e,To()).read(t);return}new yS.default(e,To(t)).read(r)}bt.walk=aN;function uN(e,t){let r=To(t);return new oN.default(e,r).read()}bt.walkSync=uN;function cN(e,t){let r=To(t);return new sN.default(e,r).read()}bt.walkStream=cN;function To(e={}){return e instanceof Sd.default?e:new Sd.default(e)}});var bo=d(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});var lN=v("path"),dN=hr(),bS=Ft(),Ad=class{constructor(t){this._settings=t,this._fsStatSettings=new dN.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(t){return lN.resolve(this._settings.cwd,t)}_makeEntry(t,r){let n={name:r,path:r,dirent:bS.fs.createDirentFromStats(r,t)};return this._settings.stats&&(n.stats=t),n}_isFatalError(t){return!bS.errno.isEnoentCodeError(t)&&!this._settings.suppressErrors}};Td.default=Ad});var Rd=d(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var pN=v("stream"),fN=hr(),hN=yo(),_N=bo(),yd=class extends _N.default{constructor(){super(...arguments),this._walkStream=hN.walkStream,this._stat=fN.stat}dynamic(t,r){return this._walkStream(t,r)}static(t,r){let n=t.map(this._getFullEntryPath,this),i=new pN.PassThrough({objectMode:!0});i._write=(s,o,a)=>this._getEntry(n[s],t[s],r).then(u=>{u!==null&&r.entryFilter(u)&&i.push(u),s===n.length-1&&i.end(),a()}).catch(a);for(let s=0;s<n.length;s++)i.write(s);return i}_getEntry(t,r,n){return this._getStat(t).then(i=>this._makeEntry(i,r)).catch(i=>{if(n.errorFilter(i))return null;throw i})}_getStat(t){return new Promise((r,n)=>{this._stat(t,this._fsStatSettings,(i,s)=>i===null?r(s):n(i))})}};bd.default=yd});var RS=d(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});var gN=yo(),mN=bo(),EN=Rd(),vd=class extends mN.default{constructor(){super(...arguments),this._walkAsync=gN.walk,this._readerStream=new EN.default(this._settings)}dynamic(t,r){return new Promise((n,i)=>{this._walkAsync(t,r,(s,o)=>{s===null?n(o):i(s)})})}async static(t,r){let n=[],i=this._readerStream.static(t,r);return new Promise((s,o)=>{i.once("error",o),i.on("data",a=>n.push(a)),i.once("end",()=>s(n))})}};Od.default=vd});var vS=d(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var vi=Ft(),Pd=class{constructor(t,r,n){this._patterns=t,this._settings=r,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){for(let t of this._patterns){let r=this._getPatternSegments(t),n=this._splitSegmentsIntoSections(r);this._storage.push({complete:n.length<=1,pattern:t,segments:r,sections:n})}}_getPatternSegments(t){return vi.pattern.getPatternParts(t,this._micromatchOptions).map(n=>vi.pattern.isDynamicPattern(n,this._settings)?{dynamic:!0,pattern:n,patternRe:vi.pattern.makeRe(n,this._micromatchOptions)}:{dynamic:!1,pattern:n})}_splitSegmentsIntoSections(t){return vi.array.splitWhen(t,r=>r.dynamic&&vi.pattern.hasGlobStar(r.pattern))}};Cd.default=Pd});var OS=d(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});var SN=vS(),Id=class extends SN.default{match(t){let r=t.split("/"),n=r.length,i=this._storage.filter(s=>!s.complete||s.segments.length>n);for(let s of i){let o=s.sections[0];if(!s.complete&&n>o.length||r.every((u,c)=>{let l=s.segments[c];return!!(l.dynamic&&l.patternRe.test(u)||!l.dynamic&&l.pattern===u)}))return!0}return!1}};wd.default=Id});var PS=d(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});var Ro=Ft(),AN=OS(),Nd=class{constructor(t,r){this._settings=t,this._micromatchOptions=r}getFilter(t,r,n){let i=this._getMatcher(r),s=this._getNegativePatternsRe(n);return o=>this._filter(t,o,i,s)}_getMatcher(t){return new AN.default(t,this._settings,this._micromatchOptions)}_getNegativePatternsRe(t){let r=t.filter(Ro.pattern.isAffectDepthOfReadingPattern);return Ro.pattern.convertPatternsToRe(r,this._micromatchOptions)}_filter(t,r,n,i){if(this._isSkippedByDeep(t,r.path)||this._isSkippedSymbolicLink(r))return!1;let s=Ro.path.removeLeadingDotSegment(r.path);return this._isSkippedByPositivePatterns(s,n)?!1:this._isSkippedByNegativePatterns(s,i)}_isSkippedByDeep(t,r){return this._settings.deep===1/0?!1:this._getEntryLevel(t,r)>=this._settings.deep}_getEntryLevel(t,r){let n=r.split("/").length;if(t==="")return n;let i=t.split("/").length;return n-i}_isSkippedSymbolicLink(t){return!this._settings.followSymbolicLinks&&t.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(t,r){return!this._settings.baseNameMatch&&!r.match(t)}_isSkippedByNegativePatterns(t,r){return!Ro.pattern.matchAny(t,r)}};xd.default=Nd});var CS=d(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var _r=Ft(),Ld=class{constructor(t,r){this._settings=t,this._micromatchOptions=r,this.index=new Map}getFilter(t,r){let n=_r.pattern.convertPatternsToRe(t,this._micromatchOptions),i=_r.pattern.convertPatternsToRe(r,Object.assign(Object.assign({},this._micromatchOptions),{dot:!0}));return s=>this._filter(s,n,i)}_filter(t,r,n){let i=_r.path.removeLeadingDotSegment(t.path);if(this._settings.unique&&this._isDuplicateEntry(i)||this._onlyFileFilter(t)||this._onlyDirectoryFilter(t)||this._isSkippedByAbsoluteNegativePatterns(i,n))return!1;let s=t.dirent.isDirectory(),o=this._isMatchToPatterns(i,r,s)&&!this._isMatchToPatterns(i,n,s);return this._settings.unique&&o&&this._createIndexRecord(i),o}_isDuplicateEntry(t){return this.index.has(t)}_createIndexRecord(t){this.index.set(t,void 0)}_onlyFileFilter(t){return this._settings.onlyFiles&&!t.dirent.isFile()}_onlyDirectoryFilter(t){return this._settings.onlyDirectories&&!t.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(t,r){if(!this._settings.absolute)return!1;let n=_r.path.makeAbsolute(this._settings.cwd,t);return _r.pattern.matchAny(n,r)}_isMatchToPatterns(t,r,n){let i=_r.pattern.matchAny(t,r);return!i&&n?_r.pattern.matchAny(t+"/",r):i}};Md.default=Ld});var IS=d(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});var TN=Ft(),Dd=class{constructor(t){this._settings=t}getFilter(){return t=>this._isNonFatalError(t)}_isNonFatalError(t){return TN.errno.isEnoentCodeError(t)||this._settings.suppressErrors}};Fd.default=Dd});var NS=d(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});var wS=Ft(),Bd=class{constructor(t){this._settings=t}getTransformer(){return t=>this._transform(t)}_transform(t){let r=t.path;return this._settings.absolute&&(r=wS.path.makeAbsolute(this._settings.cwd,r),r=wS.path.unixify(r)),this._settings.markDirectories&&t.dirent.isDirectory()&&(r+="/"),this._settings.objectMode?Object.assign(Object.assign({},t),{path:r}):r}};Ud.default=Bd});var vo=d(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});var yN=v("path"),bN=PS(),RN=CS(),vN=IS(),ON=NS(),kd=class{constructor(t){this._settings=t,this.errorFilter=new vN.default(this._settings),this.entryFilter=new RN.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new bN.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new ON.default(this._settings)}_getRootDirectory(t){return yN.resolve(this._settings.cwd,t.base)}_getReaderOptions(t){let r=t.base==="."?"":t.base;return{basePath:r,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(r,t.positive,t.negative),entryFilter:this.entryFilter.getFilter(t.positive,t.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}};jd.default=kd});var xS=d(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});var PN=RS(),CN=vo(),Gd=class extends CN.default{constructor(){super(...arguments),this._reader=new PN.default(this._settings)}async read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return(await this.api(r,t,n)).map(s=>n.transform(s))}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};qd.default=Gd});var LS=d($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});var IN=v("stream"),wN=Rd(),NN=vo(),Hd=class extends NN.default{constructor(){super(...arguments),this._reader=new wN.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t),i=this.api(r,t,n),s=new IN.Readable({objectMode:!0,read:()=>{}});return i.once("error",o=>s.emit("error",o)).on("data",o=>s.emit("data",n.transform(o))).once("end",()=>s.emit("end")),s.once("close",()=>i.destroy()),s}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};$d.default=Hd});var MS=d(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});var xN=hr(),LN=yo(),MN=bo(),Vd=class extends MN.default{constructor(){super(...arguments),this._walkSync=LN.walkSync,this._statSync=xN.statSync}dynamic(t,r){return this._walkSync(t,r)}static(t,r){let n=[];for(let i of t){let s=this._getFullEntryPath(i),o=this._getEntry(s,i,r);o===null||!r.entryFilter(o)||n.push(o)}return n}_getEntry(t,r,n){try{let i=this._getStat(t);return this._makeEntry(i,r)}catch(i){if(n.errorFilter(i))return null;throw i}}_getStat(t){return this._statSync(t,this._fsStatSettings)}};Wd.default=Vd});var DS=d(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});var DN=MS(),FN=vo(),Yd=class extends FN.default{constructor(){super(...arguments),this._reader=new DN.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return this.api(r,t,n).map(n.transform)}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Kd.default=Yd});var FS=d(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var on=v("fs"),BN=v("os"),UN=Math.max(BN.cpus().length,1);an.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:on.lstat,lstatSync:on.lstatSync,stat:on.stat,statSync:on.statSync,readdir:on.readdir,readdirSync:on.readdirSync};var Xd=class{constructor(t={}){this._options=t,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,UN),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0),this.ignore=[].concat(this.ignore)}_getValue(t,r){return t===void 0?r:t}_getFileSystemMethods(t={}){return Object.assign(Object.assign({},an.DEFAULT_FILE_SYSTEM_ADAPTER),t)}};an.default=Xd});var Jd=d((fH,US)=>{"use strict";var BS=UE(),kN=xS(),jN=LS(),GN=DS(),zd=FS(),st=Ft();async function Qd(e,t){lt(e);let r=Zd(e,kN.default,t),n=await Promise.all(r);return st.array.flatten(n)}(function(e){e.glob=e,e.globSync=t,e.globStream=r,e.async=e;function t(c,l){lt(c);let p=Zd(c,GN.default,l);return st.array.flatten(p)}e.sync=t;function r(c,l){lt(c);let p=Zd(c,jN.default,l);return st.stream.merge(p)}e.stream=r;function n(c,l){lt(c);let p=[].concat(c),f=new zd.default(l);return BS.generate(p,f)}e.generateTasks=n;function i(c,l){lt(c);let p=new zd.default(l);return st.pattern.isDynamicPattern(c,p)}e.isDynamicPattern=i;function s(c){return lt(c),st.path.escape(c)}e.escapePath=s;function o(c){return lt(c),st.path.convertPathToPattern(c)}e.convertPathToPattern=o;let a;(function(c){function l(f){return lt(f),st.path.escapePosixPath(f)}c.escapePath=l;function p(f){return lt(f),st.path.convertPosixPathToPattern(f)}c.convertPathToPattern=p})(a=e.posix||(e.posix={}));let u;(function(c){function l(f){return lt(f),st.path.escapeWindowsPath(f)}c.escapePath=l;function p(f){return lt(f),st.path.convertWindowsPathToPattern(f)}c.convertPathToPattern=p})(u=e.win32||(e.win32={}))})(Qd||(Qd={}));function Zd(e,t,r){let n=[].concat(e),i=new zd.default(r),s=BS.generate(n,i),o=new t(i);return s.map(o.read,o)}function lt(e){if(![].concat(e).every(n=>st.string.isString(n)&&!st.string.isEmpty(n)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}US.exports=Qd});var cT=d(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do._globalThis=void 0;Do._globalThis=typeof globalThis=="object"?globalThis:global});var lT=d(Ar=>{"use strict";var TM=Ar&&Ar.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yM=Ar&&Ar.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&TM(t,e,r)};Object.defineProperty(Ar,"__esModule",{value:!0});yM(cT(),Ar)});var dT=d(Tr=>{"use strict";var bM=Tr&&Tr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),RM=Tr&&Tr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&bM(t,e,r)};Object.defineProperty(Tr,"__esModule",{value:!0});RM(lT(),Tr)});var yp=d(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.VERSION=void 0;Fo.VERSION="1.7.0"});var hT=d(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.isCompatible=hn._makeCompatibilityCheck=void 0;var vM=yp(),pT=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function fT(e){let t=new Set([e]),r=new Set,n=e.match(pT);if(!n)return()=>!1;let i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(u){return u===e};function s(a){return r.add(a),!1}function o(a){return t.add(a),!0}return function(u){if(t.has(u))return!0;if(r.has(u))return!1;let c=u.match(pT);if(!c)return s(u);let l={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return l.prerelease!=null||i.major!==l.major?s(u):i.major===0?i.minor===l.minor&&i.patch<=l.patch?o(u):s(u):i.minor<=l.minor?o(u):s(u)}}hn._makeCompatibilityCheck=fT;hn.isCompatible=fT(vM.VERSION)});var yr=d(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.unregisterGlobal=Zt.getGlobal=Zt.registerGlobal=void 0;var OM=dT(),_n=yp(),PM=hT(),CM=_n.VERSION.split(".")[0],Di=Symbol.for(`opentelemetry.js.api.${CM}`),Fi=OM._globalThis;function IM(e,t,r,n=!1){var i;let s=Fi[Di]=(i=Fi[Di])!==null&&i!==void 0?i:{version:_n.VERSION};if(!n&&s[e]){let o=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(o.stack||o.message),!1}if(s.version!==_n.VERSION){let o=new Error(`@opentelemetry/api: Registration of version v${s.version} for ${e} does not match previously registered API v${_n.VERSION}`);return r.error(o.stack||o.message),!1}return s[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${_n.VERSION}.`),!0}Zt.registerGlobal=IM;function wM(e){var t,r;let n=(t=Fi[Di])===null||t===void 0?void 0:t.version;if(!(!n||!(0,PM.isCompatible)(n)))return(r=Fi[Di])===null||r===void 0?void 0:r[e]}Zt.getGlobal=wM;function NM(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${_n.VERSION}.`);let r=Fi[Di];r&&delete r[e]}Zt.unregisterGlobal=NM});var _T=d(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.DiagComponentLogger=void 0;var xM=yr(),bp=class{constructor(t){this._namespace=t.namespace||"DiagComponentLogger"}debug(...t){return Bi("debug",this._namespace,t)}error(...t){return Bi("error",this._namespace,t)}info(...t){return Bi("info",this._namespace,t)}warn(...t){return Bi("warn",this._namespace,t)}verbose(...t){return Bi("verbose",this._namespace,t)}};Bo.DiagComponentLogger=bp;function Bi(e,t,r){let n=(0,xM.getGlobal)("diag");if(n)return r.unshift(t),n[e](...r)}});var Uo=d(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.DiagLogLevel=void 0;var LM;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(LM=Ui.DiagLogLevel||(Ui.DiagLogLevel={}))});var gT=d(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.createLogLevelDiagLogger=void 0;var Ut=Uo();function MM(e,t){e<Ut.DiagLogLevel.NONE?e=Ut.DiagLogLevel.NONE:e>Ut.DiagLogLevel.ALL&&(e=Ut.DiagLogLevel.ALL),t=t||{};function r(n,i){let s=t[n];return typeof s=="function"&&e>=i?s.bind(t):function(){}}return{error:r("error",Ut.DiagLogLevel.ERROR),warn:r("warn",Ut.DiagLogLevel.WARN),info:r("info",Ut.DiagLogLevel.INFO),debug:r("debug",Ut.DiagLogLevel.DEBUG),verbose:r("verbose",Ut.DiagLogLevel.VERBOSE)}}ko.createLogLevelDiagLogger=MM});var br=d(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.DiagAPI=void 0;var DM=_T(),FM=gT(),mT=Uo(),jo=yr(),BM="diag",Rp=class e{constructor(){function t(i){return function(...s){let o=(0,jo.getGlobal)("diag");if(o)return o[i](...s)}}let r=this,n=(i,s={logLevel:mT.DiagLogLevel.INFO})=>{var o,a,u;if(i===r){let p=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=p.stack)!==null&&o!==void 0?o:p.message),!1}typeof s=="number"&&(s={logLevel:s});let c=(0,jo.getGlobal)("diag"),l=(0,FM.createLogLevelDiagLogger)((a=s.logLevel)!==null&&a!==void 0?a:mT.DiagLogLevel.INFO,i);if(c&&!s.suppressOverrideMessage){let p=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${p}`),l.warn(`Current logger will overwrite one already registered from ${p}`)}return(0,jo.registerGlobal)("diag",l,r,!0)};r.setLogger=n,r.disable=()=>{(0,jo.unregisterGlobal)(BM,r)},r.createComponentLogger=i=>new DM.DiagComponentLogger(i),r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}static instance(){return this._instance||(this._instance=new e),this._instance}};Go.DiagAPI=Rp});var ET=d(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.BaggageImpl=void 0;var vp=class e{constructor(t){this._entries=t?new Map(t):new Map}getEntry(t){let r=this._entries.get(t);if(r)return Object.assign({},r)}getAllEntries(){return Array.from(this._entries.entries()).map(([t,r])=>[t,r])}setEntry(t,r){let n=new e(this._entries);return n._entries.set(t,r),n}removeEntry(t){let r=new e(this._entries);return r._entries.delete(t),r}removeEntries(...t){let r=new e(this._entries);for(let n of t)r._entries.delete(n);return r}clear(){return new e}};qo.BaggageImpl=vp});var ST=d(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.baggageEntryMetadataSymbol=void 0;Ho.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var Op=d(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.baggageEntryMetadataFromString=gn.createBaggage=void 0;var UM=br(),kM=ET(),jM=ST(),GM=UM.DiagAPI.instance();function qM(e={}){return new kM.BaggageImpl(new Map(Object.entries(e)))}gn.createBaggage=qM;function HM(e){return typeof e!="string"&&(GM.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:jM.baggageEntryMetadataSymbol,toString(){return e}}}gn.baggageEntryMetadataFromString=HM});var ki=d(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.ROOT_CONTEXT=mn.createContextKey=void 0;function $M(e){return Symbol.for(e)}mn.createContextKey=$M;var Pp=class e{constructor(t){let r=this;r._currentContext=t?new Map(t):new Map,r.getValue=n=>r._currentContext.get(n),r.setValue=(n,i)=>{let s=new e(r._currentContext);return s._currentContext.set(n,i),s},r.deleteValue=n=>{let i=new e(r._currentContext);return i._currentContext.delete(n),i}}};mn.ROOT_CONTEXT=new Pp});var AT=d($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.DiagConsoleLogger=void 0;var Cp=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Ip=class{constructor(){function t(r){return function(...n){if(console){let i=console[r];if(typeof i!="function"&&(i=console.log),typeof i=="function")return i.apply(console,n)}}}for(let r=0;r<Cp.length;r++)this[Cp[r].n]=t(Cp[r].c)}};$o.DiagConsoleLogger=Ip});var wp=d(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.createNoopMeter=k.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=k.NOOP_OBSERVABLE_GAUGE_METRIC=k.NOOP_OBSERVABLE_COUNTER_METRIC=k.NOOP_UP_DOWN_COUNTER_METRIC=k.NOOP_HISTOGRAM_METRIC=k.NOOP_COUNTER_METRIC=k.NOOP_METER=k.NoopObservableUpDownCounterMetric=k.NoopObservableGaugeMetric=k.NoopObservableCounterMetric=k.NoopObservableMetric=k.NoopHistogramMetric=k.NoopUpDownCounterMetric=k.NoopCounterMetric=k.NoopMetric=k.NoopMeter=void 0;var Vo=class{constructor(){}createHistogram(t,r){return k.NOOP_HISTOGRAM_METRIC}createCounter(t,r){return k.NOOP_COUNTER_METRIC}createUpDownCounter(t,r){return k.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(t,r){return k.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(t,r){return k.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(t,r){return k.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(t,r){}removeBatchObservableCallback(t){}};k.NoopMeter=Vo;var En=class{};k.NoopMetric=En;var Wo=class extends En{add(t,r){}};k.NoopCounterMetric=Wo;var Yo=class extends En{add(t,r){}};k.NoopUpDownCounterMetric=Yo;var Ko=class extends En{record(t,r){}};k.NoopHistogramMetric=Ko;var Sn=class{addCallback(t){}removeCallback(t){}};k.NoopObservableMetric=Sn;var Xo=class extends Sn{};k.NoopObservableCounterMetric=Xo;var zo=class extends Sn{};k.NoopObservableGaugeMetric=zo;var Qo=class extends Sn{};k.NoopObservableUpDownCounterMetric=Qo;k.NOOP_METER=new Vo;k.NOOP_COUNTER_METRIC=new Wo;k.NOOP_HISTOGRAM_METRIC=new Ko;k.NOOP_UP_DOWN_COUNTER_METRIC=new Yo;k.NOOP_OBSERVABLE_COUNTER_METRIC=new Xo;k.NOOP_OBSERVABLE_GAUGE_METRIC=new zo;k.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new Qo;function VM(){return k.NOOP_METER}k.createNoopMeter=VM});var TT=d(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.ValueType=void 0;var WM;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(WM=ji.ValueType||(ji.ValueType={}))});var Np=d(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.defaultTextMapSetter=An.defaultTextMapGetter=void 0;An.defaultTextMapGetter={get(e,t){if(e!=null)return e[t]},keys(e){return e==null?[]:Object.keys(e)}};An.defaultTextMapSetter={set(e,t,r){e!=null&&(e[t]=r)}}});var yT=d(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.NoopContextManager=void 0;var YM=ki(),xp=class{active(){return YM.ROOT_CONTEXT}with(t,r,n,...i){return r.call(n,...i)}bind(t,r){return r}enable(){return this}disable(){return this}};Zo.NoopContextManager=xp});var Gi=d(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.ContextAPI=void 0;var KM=yT(),Lp=yr(),bT=br(),Mp="context",XM=new KM.NoopContextManager,Dp=class e{constructor(){}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalContextManager(t){return(0,Lp.registerGlobal)(Mp,t,bT.DiagAPI.instance())}active(){return this._getContextManager().active()}with(t,r,n,...i){return this._getContextManager().with(t,r,n,...i)}bind(t,r){return this._getContextManager().bind(t,r)}_getContextManager(){return(0,Lp.getGlobal)(Mp)||XM}disable(){this._getContextManager().disable(),(0,Lp.unregisterGlobal)(Mp,bT.DiagAPI.instance())}};Jo.ContextAPI=Dp});var Fp=d(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.TraceFlags=void 0;var zM;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(zM=qi.TraceFlags||(qi.TraceFlags={}))});var ea=d(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.INVALID_SPAN_CONTEXT=vt.INVALID_TRACEID=vt.INVALID_SPANID=void 0;var QM=Fp();vt.INVALID_SPANID="0000000000000000";vt.INVALID_TRACEID="00000000000000000000000000000000";vt.INVALID_SPAN_CONTEXT={traceId:vt.INVALID_TRACEID,spanId:vt.INVALID_SPANID,traceFlags:QM.TraceFlags.NONE}});var ra=d(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.NonRecordingSpan=void 0;var ZM=ea(),Bp=class{constructor(t=ZM.INVALID_SPAN_CONTEXT){this._spanContext=t}spanContext(){return this._spanContext}setAttribute(t,r){return this}setAttributes(t){return this}addEvent(t,r){return this}setStatus(t){return this}updateName(t){return this}end(t){}isRecording(){return!1}recordException(t,r){}};ta.NonRecordingSpan=Bp});var jp=d($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.getSpanContext=$e.setSpanContext=$e.deleteSpan=$e.setSpan=$e.getActiveSpan=$e.getSpan=void 0;var JM=ki(),eD=ra(),tD=Gi(),Up=(0,JM.createContextKey)("OpenTelemetry Context Key SPAN");function kp(e){return e.getValue(Up)||void 0}$e.getSpan=kp;function rD(){return kp(tD.ContextAPI.getInstance().active())}$e.getActiveSpan=rD;function RT(e,t){return e.setValue(Up,t)}$e.setSpan=RT;function nD(e){return e.deleteValue(Up)}$e.deleteSpan=nD;function iD(e,t){return RT(e,new eD.NonRecordingSpan(t))}$e.setSpanContext=iD;function sD(e){var t;return(t=kp(e))===null||t===void 0?void 0:t.spanContext()}$e.getSpanContext=sD});var na=d(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.wrapSpanContext=Ot.isSpanContextValid=Ot.isValidSpanId=Ot.isValidTraceId=void 0;var vT=ea(),oD=ra(),aD=/^([0-9a-f]{32})$/i,uD=/^[0-9a-f]{16}$/i;function OT(e){return aD.test(e)&&e!==vT.INVALID_TRACEID}Ot.isValidTraceId=OT;function PT(e){return uD.test(e)&&e!==vT.INVALID_SPANID}Ot.isValidSpanId=PT;function cD(e){return OT(e.traceId)&&PT(e.spanId)}Ot.isSpanContextValid=cD;function lD(e){return new oD.NonRecordingSpan(e)}Ot.wrapSpanContext=lD});var $p=d(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.NoopTracer=void 0;var dD=Gi(),CT=jp(),Gp=ra(),pD=na(),qp=dD.ContextAPI.getInstance(),Hp=class{startSpan(t,r,n=qp.active()){if(!!r?.root)return new Gp.NonRecordingSpan;let s=n&&(0,CT.getSpanContext)(n);return fD(s)&&(0,pD.isSpanContextValid)(s)?new Gp.NonRecordingSpan(s):new Gp.NonRecordingSpan}startActiveSpan(t,r,n,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);let u=o??qp.active(),c=this.startSpan(t,s,u),l=(0,CT.setSpan)(u,c);return qp.with(l,a,void 0,c)}};ia.NoopTracer=Hp;function fD(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}});var Wp=d(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.ProxyTracer=void 0;var hD=$p(),_D=new hD.NoopTracer,Vp=class{constructor(t,r,n,i){this._provider=t,this.name=r,this.version=n,this.options=i}startSpan(t,r,n){return this._getTracer().startSpan(t,r,n)}startActiveSpan(t,r,n,i){let s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)}_getTracer(){if(this._delegate)return this._delegate;let t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):_D}};sa.ProxyTracer=Vp});var IT=d(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.NoopTracerProvider=void 0;var gD=$p(),Yp=class{getTracer(t,r,n){return new gD.NoopTracer}};oa.NoopTracerProvider=Yp});var Xp=d(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.ProxyTracerProvider=void 0;var mD=Wp(),ED=IT(),SD=new ED.NoopTracerProvider,Kp=class{getTracer(t,r,n){var i;return(i=this.getDelegateTracer(t,r,n))!==null&&i!==void 0?i:new mD.ProxyTracer(this,t,r,n)}getDelegate(){var t;return(t=this._delegate)!==null&&t!==void 0?t:SD}setDelegate(t){this._delegate=t}getDelegateTracer(t,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,r,n)}};aa.ProxyTracerProvider=Kp});var wT=d(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.SamplingDecision=void 0;var AD;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(AD=Hi.SamplingDecision||(Hi.SamplingDecision={}))});var NT=d($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.SpanKind=void 0;var TD;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(TD=$i.SpanKind||($i.SpanKind={}))});var xT=d(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.SpanStatusCode=void 0;var yD;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(yD=Vi.SpanStatusCode||(Vi.SpanStatusCode={}))});var LT=d(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateValue=Tn.validateKey=void 0;var zp="[_0-9a-z-*/]",bD=`[a-z]${zp}{0,255}`,RD=`[a-z0-9]${zp}{0,240}@[a-z]${zp}{0,13}`,vD=new RegExp(`^(?:${bD}|${RD})$`),OD=/^[ -~]{0,255}[!-~]$/,PD=/,|=/;function CD(e){return vD.test(e)}Tn.validateKey=CD;function ID(e){return OD.test(e)&&!PD.test(e)}Tn.validateValue=ID});var UT=d(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.TraceStateImpl=void 0;var MT=LT(),DT=32,wD=512,FT=",",BT="=",Qp=class e{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+BT+this.get(r)),t),[]).join(FT)}_parse(t){t.length>wD||(this._internalState=t.split(FT).reverse().reduce((r,n)=>{let i=n.trim(),s=i.indexOf(BT);if(s!==-1){let o=i.slice(0,s),a=i.slice(s+1,n.length);(0,MT.validateKey)(o)&&(0,MT.validateValue)(a)&&r.set(o,a)}return r},new Map),this._internalState.size>DT&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,DT))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new e;return t._internalState=new Map(this._internalState),t}};ua.TraceStateImpl=Qp});var kT=d(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.createTraceState=void 0;var ND=UT();function xD(e){return new ND.TraceStateImpl(e)}ca.createTraceState=xD});var jT=d(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.context=void 0;var LD=Gi();la.context=LD.ContextAPI.getInstance()});var GT=d(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.diag=void 0;var MD=br();da.diag=MD.DiagAPI.instance()});var qT=d(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.NOOP_METER_PROVIDER=yn.NoopMeterProvider=void 0;var DD=wp(),pa=class{getMeter(t,r,n){return DD.NOOP_METER}};yn.NoopMeterProvider=pa;yn.NOOP_METER_PROVIDER=new pa});var $T=d(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.MetricsAPI=void 0;var FD=qT(),Zp=yr(),HT=br(),Jp="metrics",ef=class e{constructor(){}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalMeterProvider(t){return(0,Zp.registerGlobal)(Jp,t,HT.DiagAPI.instance())}getMeterProvider(){return(0,Zp.getGlobal)(Jp)||FD.NOOP_METER_PROVIDER}getMeter(t,r,n){return this.getMeterProvider().getMeter(t,r,n)}disable(){(0,Zp.unregisterGlobal)(Jp,HT.DiagAPI.instance())}};fa.MetricsAPI=ef});var VT=d(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.metrics=void 0;var BD=$T();ha.metrics=BD.MetricsAPI.getInstance()});var WT=d(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.NoopTextMapPropagator=void 0;var tf=class{inject(t,r){}extract(t,r){return t}fields(){return[]}};_a.NoopTextMapPropagator=tf});var KT=d(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.deleteBaggage=Pt.setBaggage=Pt.getActiveBaggage=Pt.getBaggage=void 0;var UD=Gi(),kD=ki(),rf=(0,kD.createContextKey)("OpenTelemetry Baggage Key");function YT(e){return e.getValue(rf)||void 0}Pt.getBaggage=YT;function jD(){return YT(UD.ContextAPI.getInstance().active())}Pt.getActiveBaggage=jD;function GD(e,t){return e.setValue(rf,t)}Pt.setBaggage=GD;function qD(e){return e.deleteValue(rf)}Pt.deleteBaggage=qD});var QT=d(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.PropagationAPI=void 0;var nf=yr(),HD=WT(),XT=Np(),ga=KT(),$D=Op(),zT=br(),sf="propagation",VD=new HD.NoopTextMapPropagator,of=class e{constructor(){this.createBaggage=$D.createBaggage,this.getBaggage=ga.getBaggage,this.getActiveBaggage=ga.getActiveBaggage,this.setBaggage=ga.setBaggage,this.deleteBaggage=ga.deleteBaggage}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalPropagator(t){return(0,nf.registerGlobal)(sf,t,zT.DiagAPI.instance())}inject(t,r,n=XT.defaultTextMapSetter){return this._getGlobalPropagator().inject(t,r,n)}extract(t,r,n=XT.defaultTextMapGetter){return this._getGlobalPropagator().extract(t,r,n)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,nf.unregisterGlobal)(sf,zT.DiagAPI.instance())}_getGlobalPropagator(){return(0,nf.getGlobal)(sf)||VD}};ma.PropagationAPI=of});var ZT=d(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.propagation=void 0;var WD=QT();Ea.propagation=WD.PropagationAPI.getInstance()});var ry=d(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.TraceAPI=void 0;var af=yr(),JT=Xp(),ey=na(),bn=jp(),ty=br(),uf="trace",cf=class e{constructor(){this._proxyTracerProvider=new JT.ProxyTracerProvider,this.wrapSpanContext=ey.wrapSpanContext,this.isSpanContextValid=ey.isSpanContextValid,this.deleteSpan=bn.deleteSpan,this.getSpan=bn.getSpan,this.getActiveSpan=bn.getActiveSpan,this.getSpanContext=bn.getSpanContext,this.setSpan=bn.setSpan,this.setSpanContext=bn.setSpanContext}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalTracerProvider(t){let r=(0,af.registerGlobal)(uf,this._proxyTracerProvider,ty.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(t),r}getTracerProvider(){return(0,af.getGlobal)(uf)||this._proxyTracerProvider}getTracer(t,r){return this.getTracerProvider().getTracer(t,r)}disable(){(0,af.unregisterGlobal)(uf,ty.DiagAPI.instance()),this._proxyTracerProvider=new JT.ProxyTracerProvider}};Sa.TraceAPI=cf});var ny=d(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.trace=void 0;var YD=ry();Aa.trace=YD.TraceAPI.getInstance()});var N=d(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.trace=w.propagation=w.metrics=w.diag=w.context=w.INVALID_SPAN_CONTEXT=w.INVALID_TRACEID=w.INVALID_SPANID=w.isValidSpanId=w.isValidTraceId=w.isSpanContextValid=w.createTraceState=w.TraceFlags=w.SpanStatusCode=w.SpanKind=w.SamplingDecision=w.ProxyTracerProvider=w.ProxyTracer=w.defaultTextMapSetter=w.defaultTextMapGetter=w.ValueType=w.createNoopMeter=w.DiagLogLevel=w.DiagConsoleLogger=w.ROOT_CONTEXT=w.createContextKey=w.baggageEntryMetadataFromString=void 0;var KD=Op();Object.defineProperty(w,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return KD.baggageEntryMetadataFromString}});var iy=ki();Object.defineProperty(w,"createContextKey",{enumerable:!0,get:function(){return iy.createContextKey}});Object.defineProperty(w,"ROOT_CONTEXT",{enumerable:!0,get:function(){return iy.ROOT_CONTEXT}});var XD=AT();Object.defineProperty(w,"DiagConsoleLogger",{enumerable:!0,get:function(){return XD.DiagConsoleLogger}});var zD=Uo();Object.defineProperty(w,"DiagLogLevel",{enumerable:!0,get:function(){return zD.DiagLogLevel}});var QD=wp();Object.defineProperty(w,"createNoopMeter",{enumerable:!0,get:function(){return QD.createNoopMeter}});var ZD=TT();Object.defineProperty(w,"ValueType",{enumerable:!0,get:function(){return ZD.ValueType}});var sy=Np();Object.defineProperty(w,"defaultTextMapGetter",{enumerable:!0,get:function(){return sy.defaultTextMapGetter}});Object.defineProperty(w,"defaultTextMapSetter",{enumerable:!0,get:function(){return sy.defaultTextMapSetter}});var JD=Wp();Object.defineProperty(w,"ProxyTracer",{enumerable:!0,get:function(){return JD.ProxyTracer}});var e1=Xp();Object.defineProperty(w,"ProxyTracerProvider",{enumerable:!0,get:function(){return e1.ProxyTracerProvider}});var t1=wT();Object.defineProperty(w,"SamplingDecision",{enumerable:!0,get:function(){return t1.SamplingDecision}});var r1=NT();Object.defineProperty(w,"SpanKind",{enumerable:!0,get:function(){return r1.SpanKind}});var n1=xT();Object.defineProperty(w,"SpanStatusCode",{enumerable:!0,get:function(){return n1.SpanStatusCode}});var i1=Fp();Object.defineProperty(w,"TraceFlags",{enumerable:!0,get:function(){return i1.TraceFlags}});var s1=kT();Object.defineProperty(w,"createTraceState",{enumerable:!0,get:function(){return s1.createTraceState}});var lf=na();Object.defineProperty(w,"isSpanContextValid",{enumerable:!0,get:function(){return lf.isSpanContextValid}});Object.defineProperty(w,"isValidTraceId",{enumerable:!0,get:function(){return lf.isValidTraceId}});Object.defineProperty(w,"isValidSpanId",{enumerable:!0,get:function(){return lf.isValidSpanId}});var df=ea();Object.defineProperty(w,"INVALID_SPANID",{enumerable:!0,get:function(){return df.INVALID_SPANID}});Object.defineProperty(w,"INVALID_TRACEID",{enumerable:!0,get:function(){return df.INVALID_TRACEID}});Object.defineProperty(w,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return df.INVALID_SPAN_CONTEXT}});var oy=jT();Object.defineProperty(w,"context",{enumerable:!0,get:function(){return oy.context}});var ay=GT();Object.defineProperty(w,"diag",{enumerable:!0,get:function(){return ay.diag}});var uy=VT();Object.defineProperty(w,"metrics",{enumerable:!0,get:function(){return uy.metrics}});var cy=ZT();Object.defineProperty(w,"propagation",{enumerable:!0,get:function(){return cy.propagation}});var ly=ny();Object.defineProperty(w,"trace",{enumerable:!0,get:function(){return ly.trace}});w.default={context:oy.context,diag:ay.diag,metrics:uy.metrics,propagation:cy.propagation,trace:ly.trace}});var Wi=d(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.isTracingSuppressed=Jt.unsuppressTracing=Jt.suppressTracing=void 0;var o1=N(),pf=(0,o1.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function a1(e){return e.setValue(pf,!0)}Jt.suppressTracing=a1;function u1(e){return e.deleteValue(pf)}Jt.unsuppressTracing=u1;function c1(e){return e.getValue(pf)===!0}Jt.isTracingSuppressed=c1});var dy=d(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.validateValue=Rn.validateKey=void 0;var ff="[_0-9a-z-*/]",l1=`[a-z]${ff}{0,255}`,d1=`[a-z0-9]${ff}{0,240}@[a-z]${ff}{0,13}`,p1=new RegExp(`^(?:${l1}|${d1})$`),f1=/^[ -~]{0,255}[!-~]$/,h1=/,|=/;function _1(e){return p1.test(e)}Rn.validateKey=_1;function g1(e){return f1.test(e)&&!h1.test(e)}Rn.validateValue=g1});var _f=d(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.TraceState=void 0;var py=dy(),fy=32,m1=512,hy=",",_y="=",hf=class e{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+_y+this.get(r)),t),[]).join(hy)}_parse(t){t.length>m1||(this._internalState=t.split(hy).reverse().reduce((r,n)=>{let i=n.trim(),s=i.indexOf(_y);if(s!==-1){let o=i.slice(0,s),a=i.slice(s+1,n.length);(0,py.validateKey)(o)&&(0,py.validateValue)(a)&&r.set(o,a)}return r},new Map),this._internalState.size>fy&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,fy))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new e;return t._internalState=new Map(this._internalState),t}};Ta.TraceState=hf});var mf=d(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.W3CTraceContextPropagator=we.parseTraceParent=we.TRACE_STATE_HEADER=we.TRACE_PARENT_HEADER=void 0;var ya=N(),E1=Wi(),S1=_f();we.TRACE_PARENT_HEADER="traceparent";we.TRACE_STATE_HEADER="tracestate";var A1="00",T1="(?!ff)[\\da-f]{2}",y1="(?![0]{32})[\\da-f]{32}",b1="(?![0]{16})[\\da-f]{16}",R1="[\\da-f]{2}",v1=new RegExp(`^\\s?(${T1})-(${y1})-(${b1})-(${R1})(-.*)?\\s?$`);function gy(e){let t=v1.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}we.parseTraceParent=gy;var gf=class{inject(t,r,n){let i=ya.trace.getSpanContext(t);if(!i||(0,E1.isTracingSuppressed)(t)||!(0,ya.isSpanContextValid)(i))return;let s=`${A1}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||ya.TraceFlags.NONE).toString(16)}`;n.set(r,we.TRACE_PARENT_HEADER,s),i.traceState&&n.set(r,we.TRACE_STATE_HEADER,i.traceState.serialize())}extract(t,r,n){let i=n.get(r,we.TRACE_PARENT_HEADER);if(!i)return t;let s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return t;let o=gy(s);if(!o)return t;o.isRemote=!0;let a=n.get(r,we.TRACE_STATE_HEADER);if(a){let u=Array.isArray(a)?a.join(","):a;o.traceState=new S1.TraceState(typeof u=="string"?u:void 0)}return ya.trace.setSpanContext(t,o)}fields(){return[we.TRACE_PARENT_HEADER,we.TRACE_STATE_HEADER]}};we.W3CTraceContextPropagator=gf});var Ef=d(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.BAGGAGE_MAX_TOTAL_LENGTH=Ne.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=Ne.BAGGAGE_MAX_NAME_VALUE_PAIRS=Ne.BAGGAGE_HEADER=Ne.BAGGAGE_ITEMS_SEPARATOR=Ne.BAGGAGE_PROPERTIES_SEPARATOR=Ne.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;Ne.BAGGAGE_KEY_PAIR_SEPARATOR="=";Ne.BAGGAGE_PROPERTIES_SEPARATOR=";";Ne.BAGGAGE_ITEMS_SEPARATOR=",";Ne.BAGGAGE_HEADER="baggage";Ne.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;Ne.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;Ne.BAGGAGE_MAX_TOTAL_LENGTH=8192});var Sf=d(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.parseKeyPairsIntoRecord=Ct.parsePairKeyValue=Ct.getKeyPairs=Ct.serializeKeyPairs=void 0;var O1=N(),Rr=Ef();function P1(e){return e.reduce((t,r)=>{let n=`${t}${t!==""?Rr.BAGGAGE_ITEMS_SEPARATOR:""}${r}`;return n.length>Rr.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"")}Ct.serializeKeyPairs=P1;function C1(e){return e.getAllEntries().map(([t,r])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=Rr.BAGGAGE_PROPERTIES_SEPARATOR+r.metadata.toString()),n})}Ct.getKeyPairs=C1;function my(e){let t=e.split(Rr.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;let r=t.shift();if(!r)return;let n=r.indexOf(Rr.BAGGAGE_KEY_PAIR_SEPARATOR);if(n<=0)return;let i=decodeURIComponent(r.substring(0,n).trim()),s=decodeURIComponent(r.substring(n+1).trim()),o;return t.length>0&&(o=(0,O1.baggageEntryMetadataFromString)(t.join(Rr.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:s,metadata:o}}Ct.parsePairKeyValue=my;function I1(e){return typeof e!="string"||e.length===0?{}:e.split(Rr.BAGGAGE_ITEMS_SEPARATOR).map(t=>my(t)).filter(t=>t!==void 0&&t.value.length>0).reduce((t,r)=>(t[r.key]=r.value,t),{})}Ct.parseKeyPairsIntoRecord=I1});var Ey=d(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.W3CBaggagePropagator=void 0;var Af=N(),w1=Wi(),vr=Ef(),Tf=Sf(),yf=class{inject(t,r,n){let i=Af.propagation.getBaggage(t);if(!i||(0,w1.isTracingSuppressed)(t))return;let s=(0,Tf.getKeyPairs)(i).filter(a=>a.length<=vr.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,vr.BAGGAGE_MAX_NAME_VALUE_PAIRS),o=(0,Tf.serializeKeyPairs)(s);o.length>0&&n.set(r,vr.BAGGAGE_HEADER,o)}extract(t,r,n){let i=n.get(r,vr.BAGGAGE_HEADER),s=Array.isArray(i)?i.join(vr.BAGGAGE_ITEMS_SEPARATOR):i;if(!s)return t;let o={};return s.length===0||(s.split(vr.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let c=(0,Tf.parsePairKeyValue)(u);if(c){let l={value:c.value};c.metadata&&(l.metadata=c.metadata),o[c.key]=l}}),Object.entries(o).length===0)?t:Af.propagation.setBaggage(t,Af.propagation.createBaggage(o))}fields(){return[vr.BAGGAGE_HEADER]}};ba.W3CBaggagePropagator=yf});var Sy=d(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.AnchoredClock=void 0;var bf=class{constructor(t,r){this._monotonicClock=r,this._epochMillis=t.now(),this._performanceMillis=r.now()}now(){let t=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+t}};Ra.AnchoredClock=bf});var Ry=d(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.isAttributeValue=er.isAttributeKey=er.sanitizeAttributes=void 0;var Ay=N();function N1(e){let t={};if(typeof e!="object"||e==null)return t;for(let[r,n]of Object.entries(e)){if(!Ty(r)){Ay.diag.warn(`Invalid attribute key: ${r}`);continue}if(!yy(n)){Ay.diag.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?t[r]=n.slice():t[r]=n}return t}er.sanitizeAttributes=N1;function Ty(e){return typeof e=="string"&&e.length>0}er.isAttributeKey=Ty;function yy(e){return e==null?!0:Array.isArray(e)?x1(e):by(e)}er.isAttributeValue=yy;function x1(e){let t;for(let r of e)if(r!=null){if(!t){if(by(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}function by(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}});var Rf=d(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.loggingErrorHandler=void 0;var L1=N();function M1(){return e=>{L1.diag.error(D1(e))}}va.loggingErrorHandler=M1;function D1(e){return typeof e=="string"?e:JSON.stringify(F1(e))}function F1(e){let t={},r=e;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(t[n])return;let i=r[n];i&&(t[n]=String(i))}),r=Object.getPrototypeOf(r);return t}});var vf=d(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.globalErrorHandler=vn.setGlobalErrorHandler=void 0;var B1=Rf(),vy=(0,B1.loggingErrorHandler)();function U1(e){vy=e}vn.setGlobalErrorHandler=U1;function k1(e){try{vy(e)}catch{}}vn.globalErrorHandler=k1});var Of=d(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.TracesSamplerValues=void 0;var j1;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(j1=Yi.TracesSamplerValues||(Yi.TracesSamplerValues={}))});var Oy=d(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa._globalThis=void 0;Oa._globalThis=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});var Cf=d(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.getEnvWithoutDefaults=ie.parseEnvironment=ie.DEFAULT_ENVIRONMENT=ie.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=ie.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT=ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;var tr=N(),G1=Of(),q1=Oy(),H1=",",$1=["OTEL_SDK_DISABLED"];function V1(e){return $1.indexOf(e)>-1}var W1=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Y1(e){return W1.indexOf(e)>-1}var K1=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function X1(e){return K1.indexOf(e)>-1}ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0;ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;ie.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=128;ie.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=128;ie.DEFAULT_ENVIRONMENT={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:tr.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:ie.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:ie.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:G1.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function z1(e,t,r){if(typeof r[e]>"u")return;let n=String(r[e]);t[e]=n.toLowerCase()==="true"}function Q1(e,t,r,n=-1/0,i=1/0){if(typeof r[e]<"u"){let s=Number(r[e]);isNaN(s)||(s<n?t[e]=n:s>i?t[e]=i:t[e]=s)}}function Z1(e,t,r,n=H1){let i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(s=>s.trim()))}var J1={ALL:tr.DiagLogLevel.ALL,VERBOSE:tr.DiagLogLevel.VERBOSE,DEBUG:tr.DiagLogLevel.DEBUG,INFO:tr.DiagLogLevel.INFO,WARN:tr.DiagLogLevel.WARN,ERROR:tr.DiagLogLevel.ERROR,NONE:tr.DiagLogLevel.NONE};function eF(e,t,r){let n=r[e];if(typeof n=="string"){let i=J1[n.toUpperCase()];i!=null&&(t[e]=i)}}function Pf(e){let t={};for(let r in ie.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":eF(n,t,e);break;default:if(V1(n))z1(n,t,e);else if(Y1(n))Q1(n,t,e);else if(X1(n))Z1(n,t,e);else{let i=e[n];typeof i<"u"&&i!==null&&(t[n]=String(i))}}}return t}ie.parseEnvironment=Pf;function tF(){return typeof process<"u"&&process&&process.env?Pf(process.env):Pf(q1._globalThis)}ie.getEnvWithoutDefaults=tF});var Cy=d(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.getEnv=void 0;var Py=Cf();function rF(){let e=(0,Py.parseEnvironment)(process.env);return Object.assign({},Py.DEFAULT_ENVIRONMENT,e)}Pa.getEnv=rF});var Iy=d(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca._globalThis=void 0;Ca._globalThis=typeof globalThis=="object"?globalThis:global});var If=d(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.hexToBinary=void 0;function wy(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function nF(e){let t=new Uint8Array(e.length/2),r=0;for(let n=0;n<e.length;n+=2){let i=wy(e.charCodeAt(n)),s=wy(e.charCodeAt(n+1));t[r++]=i<<4|s}return t}Ia.hexToBinary=nF});var Ny=d(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.hexToBase64=void 0;var iF=If();function sF(e){return Buffer.from((0,iF.hexToBinary)(e)).toString("base64")}wa.hexToBase64=sF});var My=d(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.RandomIdGenerator=void 0;var oF=8,Ly=16,wf=class{constructor(){this.generateTraceId=xy(Ly),this.generateSpanId=xy(oF)}};xa.RandomIdGenerator=wf;var Na=Buffer.allocUnsafe(Ly);function xy(e){return function(){for(let r=0;r<e/4;r++)Na.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(Na[r]>0);r++)r===e-1&&(Na[e-1]=1);return Na.toString("hex",0,e)}}});var Dy=d(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.otperformance=void 0;var aF=v("perf_hooks");La.otperformance=aF.performance});var Nf=d(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.VERSION=void 0;Ma.VERSION="1.21.0"});var Fy=d(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.MessageTypeValues=z.RpcGrpcStatusCodeValues=z.MessagingOperationValues=z.MessagingDestinationKindValues=z.HttpFlavorValues=z.NetHostConnectionSubtypeValues=z.NetHostConnectionTypeValues=z.NetTransportValues=z.FaasInvokedProviderValues=z.FaasDocumentOperationValues=z.FaasTriggerValues=z.DbCassandraConsistencyLevelValues=z.DbSystemValues=z.SemanticAttributes=void 0;z.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"};z.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"};z.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"};z.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"};z.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"};z.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};z.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"};z.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"};z.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"};z.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"};z.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"};z.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"};z.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16};z.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}});var By=d(Or=>{"use strict";var uF=Or&&Or.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),cF=Or&&Or.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&uF(t,e,r)};Object.defineProperty(Or,"__esModule",{value:!0});cF(Fy(),Or)});var Uy=d(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.TelemetrySdkLanguageValues=xe.OsTypeValues=xe.HostArchValues=xe.AwsEcsLaunchtypeValues=xe.CloudPlatformValues=xe.CloudProviderValues=xe.SemanticResourceAttributes=void 0;xe.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};xe.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};xe.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"};xe.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"};xe.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"};xe.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"};xe.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var ky=d(Pr=>{"use strict";var lF=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dF=Pr&&Pr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lF(t,e,r)};Object.defineProperty(Pr,"__esModule",{value:!0});dF(Uy(),Pr)});var It=d(rr=>{"use strict";var pF=rr&&rr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jy=rr&&rr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&pF(t,e,r)};Object.defineProperty(rr,"__esModule",{value:!0});jy(By(),rr);jy(ky(),rr)});var Gy=d(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.SDK_INFO=void 0;var fF=Nf(),Ki=It();Da.SDK_INFO={[Ki.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[Ki.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[Ki.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Ki.TelemetrySdkLanguageValues.NODEJS,[Ki.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:fF.VERSION}});var qy=d(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.unrefTimer=void 0;function hF(e){e.unref()}Fa.unrefTimer=hF});var Hy=d(Qe=>{"use strict";var _F=Qe&&Qe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Cr=Qe&&Qe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&_F(t,e,r)};Object.defineProperty(Qe,"__esModule",{value:!0});Cr(Cy(),Qe);Cr(Iy(),Qe);Cr(Ny(),Qe);Cr(My(),Qe);Cr(Dy(),Qe);Cr(Gy(),Qe);Cr(qy(),Qe)});var xf=d(Ir=>{"use strict";var gF=Ir&&Ir.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mF=Ir&&Ir.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gF(t,e,r)};Object.defineProperty(Ir,"__esModule",{value:!0});mF(Hy(),Ir)});var Yy=d(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.addHrTimes=te.isTimeInput=te.isTimeInputHrTime=te.hrTimeToMicroseconds=te.hrTimeToMilliseconds=te.hrTimeToNanoseconds=te.hrTimeToTimeStamp=te.hrTimeDuration=te.timeInputToHrTime=te.hrTime=te.getTimeOrigin=te.millisToHrTime=void 0;var Lf=xf(),$y=9,EF=6,SF=Math.pow(10,EF),Ba=Math.pow(10,$y);function Xi(e){let t=e/1e3,r=Math.trunc(t),n=Math.round(e%1e3*SF);return[r,n]}te.millisToHrTime=Xi;function Mf(){let e=Lf.otperformance.timeOrigin;if(typeof e!="number"){let t=Lf.otperformance;e=t.timing&&t.timing.fetchStart}return e}te.getTimeOrigin=Mf;function Vy(e){let t=Xi(Mf()),r=Xi(typeof e=="number"?e:Lf.otperformance.now());return Wy(t,r)}te.hrTime=Vy;function AF(e){if(Df(e))return e;if(typeof e=="number")return e<Mf()?Vy(e):Xi(e);if(e instanceof Date)return Xi(e.getTime());throw TypeError("Invalid input type")}te.timeInputToHrTime=AF;function TF(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Ba),[r,n]}te.hrTimeDuration=TF;function yF(e){let t=$y,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n)}te.hrTimeToTimeStamp=yF;function bF(e){return e[0]*Ba+e[1]}te.hrTimeToNanoseconds=bF;function RF(e){return e[0]*1e3+e[1]/1e6}te.hrTimeToMilliseconds=RF;function vF(e){return e[0]*1e6+e[1]/1e3}te.hrTimeToMicroseconds=vF;function Df(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}te.isTimeInputHrTime=Df;function OF(e){return Df(e)||typeof e=="number"||e instanceof Date}te.isTimeInput=OF;function Wy(e,t){let r=[e[0]+t[0],e[1]+t[1]];return r[1]>=Ba&&(r[1]-=Ba,r[0]+=1),r}te.addHrTimes=Wy});var Xy=d(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0})});var zy=d(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.ExportResultCode=void 0;var PF;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(PF=zi.ExportResultCode||(zi.ExportResultCode={}))});var Zy=d(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.CompositePropagator=void 0;var Qy=N(),Ff=class{constructor(t={}){var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(t,r,n){for(let i of this._propagators)try{i.inject(t,r,n)}catch(s){Qy.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${s.message}`)}}extract(t,r,n){return this._propagators.reduce((i,s)=>{try{return s.extract(i,r,n)}catch(o){Qy.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${o.message}`)}return i},t)}fields(){return this._fields.slice()}};Ua.CompositePropagator=Ff});var e0=d(Jy=>{"use strict";Object.defineProperty(Jy,"__esModule",{value:!0})});var t0=d(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.getRPCMetadata=dt.deleteRPCMetadata=dt.setRPCMetadata=dt.RPCType=void 0;var CF=N(),Bf=(0,CF.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA"),IF;(function(e){e.HTTP="http"})(IF=dt.RPCType||(dt.RPCType={}));function wF(e,t){return e.setValue(Bf,t)}dt.setRPCMetadata=wF;function NF(e){return e.deleteValue(Bf)}dt.deleteRPCMetadata=NF;function xF(e){return e.getValue(Bf)}dt.getRPCMetadata=xF});var kf=d(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.AlwaysOffSampler=void 0;var LF=N(),Uf=class{shouldSample(){return{decision:LF.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};ka.AlwaysOffSampler=Uf});var Gf=d(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.AlwaysOnSampler=void 0;var MF=N(),jf=class{shouldSample(){return{decision:MF.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};ja.AlwaysOnSampler=jf});var n0=d(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.ParentBasedSampler=void 0;var Ga=N(),DF=vf(),r0=kf(),qf=Gf(),Hf=class{constructor(t){var r,n,i,s;this._root=t.root,this._root||((0,DF.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new qf.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new qf.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new r0.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new qf.AlwaysOnSampler,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new r0.AlwaysOffSampler}shouldSample(t,r,n,i,s,o){let a=Ga.trace.getSpanContext(t);return!a||!(0,Ga.isSpanContextValid)(a)?this._root.shouldSample(t,r,n,i,s,o):a.isRemote?a.traceFlags&Ga.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,s,o):this._remoteParentNotSampled.shouldSample(t,r,n,i,s,o):a.traceFlags&Ga.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,s,o):this._localParentNotSampled.shouldSample(t,r,n,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};qa.ParentBasedSampler=Hf});var i0=d(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.TraceIdRatioBasedSampler=void 0;var $f=N(),Vf=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:(0,$f.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?$f.SamplingDecision.RECORD_AND_SAMPLED:$f.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,s=parseInt(t.slice(i,i+8),16);r=(r^s)>>>0}return r}};Ha.TraceIdRatioBasedSampler=Vf});var c0=d($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.isPlainObject=void 0;var FF="[object Object]",BF="[object Null]",UF="[object Undefined]",kF=Function.prototype,s0=kF.toString,jF=s0.call(Object),GF=qF(Object.getPrototypeOf,Object),o0=Object.prototype,a0=o0.hasOwnProperty,wr=Symbol?Symbol.toStringTag:void 0,u0=o0.toString;function qF(e,t){return function(r){return e(t(r))}}function HF(e){if(!$F(e)||VF(e)!==FF)return!1;let t=GF(e);if(t===null)return!0;let r=a0.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&s0.call(r)===jF}$a.isPlainObject=HF;function $F(e){return e!=null&&typeof e=="object"}function VF(e){return e==null?e===void 0?UF:BF:wr&&wr in Object(e)?WF(e):YF(e)}function WF(e){let t=a0.call(e,wr),r=e[wr],n=!1;try{e[wr]=void 0,n=!0}catch{}let i=u0.call(e);return n&&(t?e[wr]=r:delete e[wr]),i}function YF(e){return u0.call(e)}});var h0=d(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.merge=void 0;var l0=c0(),KF=20;function XF(...e){let t=e.shift(),r=new WeakMap;for(;e.length>0;)t=p0(t,e.shift(),0,r);return t}Ya.merge=XF;function Wf(e){return Wa(e)?e.slice():e}function p0(e,t,r=0,n){let i;if(!(r>KF)){if(r++,Va(e)||Va(t)||f0(t))i=Wf(t);else if(Wa(e)){if(i=e.slice(),Wa(t))for(let s=0,o=t.length;s<o;s++)i.push(Wf(t[s]));else if(Qi(t)){let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o];i[u]=Wf(t[u])}}}else if(Qi(e))if(Qi(t)){if(!zF(e,t))return t;i=Object.assign({},e);let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o],c=t[u];if(Va(c))typeof c>"u"?delete i[u]:i[u]=c;else{let l=i[u],p=c;if(d0(e,u,n)||d0(t,u,n))delete i[u];else{if(Qi(l)&&Qi(p)){let f=n.get(l)||[],_=n.get(p)||[];f.push({obj:e,key:u}),_.push({obj:t,key:u}),n.set(l,f),n.set(p,_)}i[u]=p0(i[u],c,r,n)}}}}else i=t;return i}}function d0(e,t,r){let n=r.get(e[t])||[];for(let i=0,s=n.length;i<s;i++){let o=n[i];if(o.key===t&&o.obj===e)return!0}return!1}function Wa(e){return Array.isArray(e)}function f0(e){return typeof e=="function"}function Qi(e){return!Va(e)&&!Wa(e)&&!f0(e)&&typeof e=="object"}function Va(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function zF(e,t){return!(!(0,l0.isPlainObject)(e)||!(0,l0.isPlainObject)(t))}});var _0=d(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.callWithTimeout=On.TimeoutError=void 0;var Ka=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};On.TimeoutError=Ka;function QF(e,t){let r,n=new Promise(function(s,o){r=setTimeout(function(){o(new Ka("Operation timed out."))},t)});return Promise.race([e,n]).then(i=>(clearTimeout(r),i),i=>{throw clearTimeout(r),i})}On.callWithTimeout=QF});var m0=d(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.isUrlIgnored=Pn.urlMatches=void 0;function g0(e,t){return typeof t=="string"?e===t:!!e.match(t)}Pn.urlMatches=g0;function ZF(e,t){if(!t)return!1;for(let r of t)if(g0(e,r))return!0;return!1}Pn.isUrlIgnored=ZF});var E0=d(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.isWrapped=void 0;function JF(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}Xa.isWrapped=JF});var S0=d(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.Deferred=void 0;var Yf=class{constructor(){this._promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}};za.Deferred=Yf});var A0=d(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.BindOnceFuture=void 0;var eB=S0(),Kf=class{constructor(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new eB.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}};Qa.BindOnceFuture=Kf});var y0=d(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za._export=void 0;var T0=N(),tB=Wi();function rB(e,t){return new Promise(r=>{T0.context.with((0,tB.suppressTracing)(T0.context.active()),()=>{e.export(t,n=>{r(n)})})})}Za._export=rB});var ee=d(H=>{"use strict";var nB=H&&H.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Z=H&&H.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&nB(t,e,r)};Object.defineProperty(H,"__esModule",{value:!0});H.internal=H.baggageUtils=void 0;Z(Ey(),H);Z(Sy(),H);Z(Ry(),H);Z(vf(),H);Z(Rf(),H);Z(Yy(),H);Z(Xy(),H);Z(If(),H);Z(zy(),H);H.baggageUtils=Sf();Z(xf(),H);Z(Zy(),H);Z(mf(),H);Z(e0(),H);Z(t0(),H);Z(kf(),H);Z(Gf(),H);Z(n0(),H);Z(i0(),H);Z(Wi(),H);Z(_f(),H);Z(Cf(),H);Z(h0(),H);Z(Of(),H);Z(_0(),H);Z(m0(),H);Z(E0(),H);Z(A0(),H);Z(Nf(),H);var iB=y0();H.internal={_export:iB._export}});var b0=d(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.ExceptionEventName=void 0;Ja.ExceptionEventName="exception"});var zf=d(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.Span=void 0;var pt=N(),Le=ee(),Nr=It(),sB=b0(),Xf=class{constructor(t,r,n,i,s,o,a=[],u,c,l){this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:pt.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=s,this.links=a;let p=Date.now();this._performanceStartTime=Le.otperformance.now(),this._performanceOffset=p-(this._performanceStartTime+(0,Le.getTimeOrigin)()),this._startTimeProvided=u!=null,this.startTime=this._getTime(u??p),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,l!=null&&this.setAttributes(l),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(pt.diag.warn(`Invalid attribute key: ${t}`),this):(0,Le.isAttributeValue)(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(r),this):(pt.diag.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(let[r,n]of Object.entries(t))this.setAttribute(r,n);return this}addEvent(t,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return pt.diag.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&pt.diag.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,Le.isTimeInput)(r)&&((0,Le.isTimeInput)(n)||(n=r),r=void 0);let i=(0,Le.sanitizeAttributes)(r);return this.events.push({name:t,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}setStatus(t){return this._isSpanEnded()?this:(this.status=t,this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t){if(this._isSpanEnded()){pt.diag.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=!0,this.endTime=this._getTime(t),this._duration=(0,Le.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&(pt.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&pt.diag.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(t){if(typeof t=="number"&&t<Le.otperformance.now())return(0,Le.hrTime)(t+this._performanceOffset);if(typeof t=="number")return(0,Le.millisToHrTime)(t);if(t instanceof Date)return(0,Le.millisToHrTime)(t.getTime());if((0,Le.isTimeInputHrTime)(t))return t;if(this._startTimeProvided)return(0,Le.millisToHrTime)(Date.now());let r=Le.otperformance.now()-this._performanceStartTime;return(0,Le.addHrTimes)(this.startTime,(0,Le.millisToHrTime)(r))}isRecording(){return this._ended===!1}recordException(t,r){let n={};typeof t=="string"?n[Nr.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[Nr.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[Nr.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[Nr.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[Nr.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[Nr.SemanticAttributes.EXCEPTION_TYPE]||n[Nr.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(sB.ExceptionEventName,n,r):pt.diag.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){return this._ended&&pt.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),this._ended}_truncateToLimitUtil(t,r){return t.length<=r?t:t.substr(0,r)}_truncateToSize(t){let r=this._attributeValueLengthLimit;return r<=0?(pt.diag.warn(`Attribute value limit must be positive, got ${r}`),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):t}};eu.Span=Xf});var Ji=d(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.SamplingDecision=void 0;var oB;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(oB=Zi.SamplingDecision||(Zi.SamplingDecision={}))});var ru=d(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.AlwaysOffSampler=void 0;var aB=Ji(),Qf=class{shouldSample(){return{decision:aB.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};tu.AlwaysOffSampler=Qf});var iu=d(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.AlwaysOnSampler=void 0;var uB=Ji(),Zf=class{shouldSample(){return{decision:uB.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};nu.AlwaysOnSampler=Zf});var th=d(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.ParentBasedSampler=void 0;var su=N(),cB=ee(),R0=ru(),Jf=iu(),eh=class{constructor(t){var r,n,i,s;this._root=t.root,this._root||((0,cB.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Jf.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Jf.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new R0.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Jf.AlwaysOnSampler,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new R0.AlwaysOffSampler}shouldSample(t,r,n,i,s,o){let a=su.trace.getSpanContext(t);return!a||!(0,su.isSpanContextValid)(a)?this._root.shouldSample(t,r,n,i,s,o):a.isRemote?a.traceFlags&su.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,s,o):this._remoteParentNotSampled.shouldSample(t,r,n,i,s,o):a.traceFlags&su.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,s,o):this._localParentNotSampled.shouldSample(t,r,n,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};ou.ParentBasedSampler=eh});var nh=d(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.TraceIdRatioBasedSampler=void 0;var lB=N(),v0=Ji(),rh=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:(0,lB.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?v0.SamplingDecision.RECORD_AND_SAMPLED:v0.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,s=parseInt(t.slice(i,i+8),16);r=(r^s)>>>0}return r}};au.TraceIdRatioBasedSampler=rh});var oh=d(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.buildSamplerFromEnv=In.loadDefaultConfig=void 0;var uu=N(),Re=ee(),O0=ru(),ih=iu(),sh=th(),P0=nh(),dB=(0,Re.getEnv)(),pB=Re.TracesSamplerValues.AlwaysOn,Cn=1;function fB(){return{sampler:I0(dB),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,Re.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,Re.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,Re.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,Re.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,Re.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,Re.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,Re.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,Re.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}In.loadDefaultConfig=fB;function I0(e=(0,Re.getEnv)()){switch(e.OTEL_TRACES_SAMPLER){case Re.TracesSamplerValues.AlwaysOn:return new ih.AlwaysOnSampler;case Re.TracesSamplerValues.AlwaysOff:return new O0.AlwaysOffSampler;case Re.TracesSamplerValues.ParentBasedAlwaysOn:return new sh.ParentBasedSampler({root:new ih.AlwaysOnSampler});case Re.TracesSamplerValues.ParentBasedAlwaysOff:return new sh.ParentBasedSampler({root:new O0.AlwaysOffSampler});case Re.TracesSamplerValues.TraceIdRatio:return new P0.TraceIdRatioBasedSampler(C0(e));case Re.TracesSamplerValues.ParentBasedTraceIdRatio:return new sh.ParentBasedSampler({root:new P0.TraceIdRatioBasedSampler(C0(e))});default:return uu.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${pB}".`),new ih.AlwaysOnSampler}}In.buildSamplerFromEnv=I0;function C0(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return uu.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${Cn}.`),Cn;let t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(uu.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${Cn}.`),Cn):t<0||t>1?(uu.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${Cn}.`),Cn):t}});var uh=d(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.reconfigureLimits=wn.mergeConfig=void 0;var w0=oh(),ah=ee();function hB(e){let t={sampler:(0,w0.buildSamplerFromEnv)()},r=(0,w0.loadDefaultConfig)(),n=Object.assign({},r,t,e);return n.generalLimits=Object.assign({},r.generalLimits,e.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,e.spanLimits||{}),n}wn.mergeConfig=hB;function _B(e){var t,r,n,i,s,o,a,u,c,l,p,f;let _=Object.assign({},e.spanLimits),h=(0,ah.getEnvWithoutDefaults)();return _.attributeCountLimit=(o=(s=(i=(r=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&r!==void 0?r:(n=e.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:h.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:ah.DEFAULT_ATTRIBUTE_COUNT_LIMIT,_.attributeValueLengthLimit=(f=(p=(l=(u=(a=e.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&u!==void 0?u:(c=e.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&l!==void 0?l:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:ah.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,Object.assign({},e,{spanLimits:_})}wn.reconfigureLimits=_B});var N0=d(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.BatchSpanProcessorBase=void 0;var Nn=N(),xr=ee(),ch=class{constructor(t,r){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;let n=(0,xr.getEnv)();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new xr.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Nn.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,r){}onEnd(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&Nn.TraceFlags.SAMPLED&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Nn.diag.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Nn.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise((t,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,o=i;s<o;s++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);Nn.context.with((0,xr.suppressTracing)(Nn.context.active()),()=>{let i=this._finishedSpans.splice(0,this._maxExportBatchSize),s=()=>this._exporter.export(i,a=>{var u;clearTimeout(n),a.code===xr.ExportResultCode.SUCCESS?t():r((u=a.error)!==null&&u!==void 0?u:new Error("BatchSpanProcessor: span export failed"))}),o=i.map(a=>a.resource).filter(a=>a.asyncAttributesPending);o.length===0?s():Promise.all(o.map(a=>{var u;return(u=a.waitForAsyncAttributes)===null||u===void 0?void 0:u.call(a)})).then(s,a=>{(0,xr.globalErrorHandler)(a),r(a)})})})}_maybeStartTimer(){if(this._isExporting)return;let t=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(r=>{this._isExporting=!1,(0,xr.globalErrorHandler)(r)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(()=>t(),this._scheduledDelayMillis),(0,xr.unrefTimer)(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};cu.BatchSpanProcessorBase=ch});var x0=d(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.BatchSpanProcessor=void 0;var gB=N0(),lh=class extends gB.BatchSpanProcessorBase{onShutdown(){}};lu.BatchSpanProcessor=lh});var D0=d(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.RandomIdGenerator=void 0;var mB=8,M0=16,dh=class{constructor(){this.generateTraceId=L0(M0),this.generateSpanId=L0(mB)}};pu.RandomIdGenerator=dh;var du=Buffer.allocUnsafe(M0);function L0(e){return function(){for(let r=0;r<e/4;r++)du.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(du[r]>0);r++)r===e-1&&(du[e-1]=1);return du.toString("hex",0,e)}}});var B0=d(nr=>{"use strict";var EB=nr&&nr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),F0=nr&&nr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&EB(t,e,r)};Object.defineProperty(nr,"__esModule",{value:!0});F0(x0(),nr);F0(D0(),nr)});var fu=d(Lr=>{"use strict";var SB=Lr&&Lr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),AB=Lr&&Lr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&SB(t,e,r)};Object.defineProperty(Lr,"__esModule",{value:!0});AB(B0(),Lr)});var U0=d(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.Tracer=void 0;var ve=N(),hu=ee(),TB=zf(),yB=uh(),bB=fu(),ph=class{constructor(t,r,n){this._tracerProvider=n;let i=(0,yB.mergeConfig)(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new bB.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=t}startSpan(t,r={},n=ve.context.active()){var i,s,o;r.root&&(n=ve.trace.deleteSpan(n));let a=ve.trace.getSpan(n);if((0,hu.isTracingSuppressed)(n))return ve.diag.debug("Instrumentation suppressed, returning Noop Span"),ve.trace.wrapSpanContext(ve.INVALID_SPAN_CONTEXT);let u=a?.spanContext(),c=this._idGenerator.generateSpanId(),l,p,f;!u||!ve.trace.isSpanContextValid(u)?l=this._idGenerator.generateTraceId():(l=u.traceId,p=u.traceState,f=u.spanId);let _=(i=r.kind)!==null&&i!==void 0?i:ve.SpanKind.INTERNAL,h=((s=r.links)!==null&&s!==void 0?s:[]).map(O=>({context:O.context,attributes:(0,hu.sanitizeAttributes)(O.attributes)})),g=(0,hu.sanitizeAttributes)(r.attributes),T=this._sampler.shouldSample(n,l,t,_,g,h);p=(o=T.traceState)!==null&&o!==void 0?o:p;let A=T.decision===ve.SamplingDecision.RECORD_AND_SAMPLED?ve.TraceFlags.SAMPLED:ve.TraceFlags.NONE,y={traceId:l,spanId:c,traceFlags:A,traceState:p};if(T.decision===ve.SamplingDecision.NOT_RECORD)return ve.diag.debug("Recording is off, propagating context in a non-recording span"),ve.trace.wrapSpanContext(y);let b=(0,hu.sanitizeAttributes)(Object.assign(g,T.attributes));return new TB.Span(this,n,t,y,_,f,h,r.startTime,void 0,b)}startActiveSpan(t,r,n,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);let u=o??ve.context.active(),c=this.startSpan(t,s,u),l=ve.trace.setSpan(u,c);return ve.context.with(l,a,void 0,c)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};_u.Tracer=ph});var k0=d(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.defaultServiceName=void 0;function RB(){return`unknown_service:${process.argv0}`}gu.defaultServiceName=RB});var fh=d(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.normalizeType=xn.normalizeArch=void 0;var vB=e=>{switch(e){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return e}};xn.normalizeArch=vB;var OB=e=>{switch(e){case"sunos":return"solaris";case"win32":return"windows";default:return e}};xn.normalizeType=OB});var Eu=d(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.execAsync=void 0;var PB=v("child_process"),CB=v("util");mu.execAsync=CB.promisify(PB.exec)});var j0=d(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.getMachineId=void 0;var IB=Eu(),wB=N();async function NB(){try{let t=(await(0,IB.execAsync)('ioreg -rd1 -c "IOPlatformExpertDevice"')).stdout.split(`
`).find(n=>n.includes("IOPlatformUUID"));if(!t)return"";let r=t.split('" = "');if(r.length===2)return r[1].slice(0,-1)}catch(e){wB.diag.debug(`error reading machine id: ${e}`)}return""}Su.getMachineId=NB});var G0=d(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.getMachineId=void 0;var xB=v("fs"),LB=N();async function MB(){let e=["/etc/machine-id","/var/lib/dbus/machine-id"];for(let t of e)try{return(await xB.promises.readFile(t,{encoding:"utf8"})).trim()}catch(r){LB.diag.debug(`error reading machine id: ${r}`)}return""}Au.getMachineId=MB});var H0=d(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.getMachineId=void 0;var DB=v("fs"),FB=Eu(),q0=N();async function BB(){try{return(await DB.promises.readFile("/etc/hostid",{encoding:"utf8"})).trim()}catch(e){q0.diag.debug(`error reading machine id: ${e}`)}try{return(await(0,FB.execAsync)("kenv -q smbios.system.uuid")).stdout.trim()}catch(e){q0.diag.debug(`error reading machine id: ${e}`)}return""}Tu.getMachineId=BB});var V0=d(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.getMachineId=void 0;var $0=v("process"),UB=Eu(),kB=N();async function jB(){let e="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",t="%windir%\\System32\\REG.exe";$0.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in $0.env&&(t="%windir%\\sysnative\\cmd.exe /c "+t);try{let n=(await(0,UB.execAsync)(`${t} ${e}`)).stdout.split("REG_SZ");if(n.length===2)return n[1].trim()}catch(r){kB.diag.debug(`error reading machine id: ${r}`)}return""}yu.getMachineId=jB});var W0=d(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.getMachineId=void 0;var GB=N();async function qB(){return GB.diag.debug("could not read machine-id: unsupported platform"),""}bu.getMachineId=qB});var Y0=d(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.getMachineId=void 0;var HB=v("process"),Ln;kt.getMachineId=Ln;switch(HB.platform){case"darwin":kt.getMachineId=Ln=j0().getMachineId;break;case"linux":kt.getMachineId=Ln=G0().getMachineId;break;case"freebsd":kt.getMachineId=Ln=H0().getMachineId;break;case"win32":kt.getMachineId=Ln=V0().getMachineId;break;default:kt.getMachineId=Ln=W0().getMachineId}});var gh=d(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.hostDetectorSync=void 0;var hh=It(),$B=Mr(),K0=v("os"),VB=fh(),WB=Y0(),_h=class{detect(t){let r={[hh.SemanticResourceAttributes.HOST_NAME]:(0,K0.hostname)(),[hh.SemanticResourceAttributes.HOST_ARCH]:(0,VB.normalizeArch)((0,K0.arch)())};return new $B.Resource(r,this._getAsyncAttributes())}_getAsyncAttributes(){return(0,WB.getMachineId)().then(t=>{let r={};return t&&(r[hh.SemanticResourceAttributes.HOST_ID]=t),r})}};Ru.hostDetectorSync=new _h});var X0=d(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.hostDetector=void 0;var YB=gh(),mh=class{detect(t){return Promise.resolve(YB.hostDetectorSync.detect(t))}};vu.hostDetector=new mh});var Sh=d(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.osDetectorSync=void 0;var z0=It(),KB=Mr(),Q0=v("os"),XB=fh(),Eh=class{detect(t){let r={[z0.SemanticResourceAttributes.OS_TYPE]:(0,XB.normalizeType)((0,Q0.platform)()),[z0.SemanticResourceAttributes.OS_VERSION]:(0,Q0.release)()};return new KB.Resource(r)}};Ou.osDetectorSync=new Eh});var Z0=d(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.osDetector=void 0;var zB=Sh(),Ah=class{detect(t){return Promise.resolve(zB.osDetectorSync.detect(t))}};Pu.osDetector=new Ah});var yh=d(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.processDetectorSync=void 0;var QB=N(),jt=It(),ZB=Mr(),JB=v("os"),Th=class{detect(t){let r={[jt.SemanticResourceAttributes.PROCESS_PID]:process.pid,[jt.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title,[jt.SemanticResourceAttributes.PROCESS_EXECUTABLE_PATH]:process.execPath,[jt.SemanticResourceAttributes.PROCESS_COMMAND_ARGS]:[process.argv[0],...process.execArgv,...process.argv.slice(1)],[jt.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:process.versions.node,[jt.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"nodejs",[jt.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Node.js"};process.argv.length>1&&(r[jt.SemanticResourceAttributes.PROCESS_COMMAND]=process.argv[1]);try{let n=JB.userInfo();r[jt.SemanticResourceAttributes.PROCESS_OWNER]=n.username}catch(n){QB.diag.debug(`error obtaining process owner: ${n}`)}return new ZB.Resource(r)}};Cu.processDetectorSync=new Th});var J0=d(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.processDetector=void 0;var eU=yh(),bh=class{detect(t){return Promise.resolve(eU.processDetectorSync.detect(t))}};Iu.processDetector=new bh});var eb=d(Ze=>{"use strict";var tU=Ze&&Ze.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Dr=Ze&&Ze.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tU(t,e,r)};Object.defineProperty(Ze,"__esModule",{value:!0});Dr(k0(),Ze);Dr(X0(),Ze);Dr(Z0(),Ze);Dr(gh(),Ze);Dr(Sh(),Ze);Dr(J0(),Ze);Dr(yh(),Ze)});var Rh=d(Fr=>{"use strict";var rU=Fr&&Fr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),nU=Fr&&Fr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&rU(t,e,r)};Object.defineProperty(Fr,"__esModule",{value:!0});nU(eb(),Fr)});var Mr=d(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.Resource=void 0;var tb=N(),Br=It(),vh=ee(),iU=Rh(),es=class e{constructor(t,r){var n;this._attributes=t,this.asyncAttributesPending=r!=null,this._syncAttributes=(n=this._attributes)!==null&&n!==void 0?n:{},this._asyncAttributesPromise=r?.then(i=>(this._attributes=Object.assign({},this._attributes,i),this.asyncAttributesPending=!1,i),i=>(tb.diag.debug("a resource's async attributes promise rejected: %s",i),this.asyncAttributesPending=!1,{}))}static empty(){return e.EMPTY}static default(){return new e({[Br.SemanticResourceAttributes.SERVICE_NAME]:(0,iU.defaultServiceName)(),[Br.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:vh.SDK_INFO[Br.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],[Br.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:vh.SDK_INFO[Br.SemanticResourceAttributes.TELEMETRY_SDK_NAME],[Br.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:vh.SDK_INFO[Br.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]})}get attributes(){var t;return this.asyncAttributesPending&&tb.diag.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}}async waitForAsyncAttributes(){this.asyncAttributesPending&&await this._asyncAttributesPromise}merge(t){var r;if(!t)return this;let n=Object.assign(Object.assign({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);let i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(([s,o])=>{var a;return Object.assign(Object.assign(Object.assign(Object.assign({},this._syncAttributes),s),(a=t._syncAttributes)!==null&&a!==void 0?a:t.attributes),o)});return new e(n,i)}};wu.Resource=es;es.EMPTY=new es({})});var nb=d(rb=>{"use strict";Object.defineProperty(rb,"__esModule",{value:!0})});var sb=d(ib=>{"use strict";Object.defineProperty(ib,"__esModule",{value:!0})});var ab=d(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0})});var ub=d(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.browserDetector=void 0;var sU=Mn(),Oh=class{detect(t){return Promise.resolve(sU.browserDetectorSync.detect(t))}};Nu.browserDetector=new Oh});var Ch=d(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.envDetectorSync=void 0;var oU=N(),aU=ee(),uU=It(),cU=Mr(),Ph=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}detect(t){let r={},n=(0,aU.getEnv)(),i=n.OTEL_RESOURCE_ATTRIBUTES,s=n.OTEL_SERVICE_NAME;if(i)try{let o=this._parseResourceAttributes(i);Object.assign(r,o)}catch(o){oU.diag.debug(`EnvDetector failed: ${o.message}`)}return s&&(r[uU.SemanticResourceAttributes.SERVICE_NAME]=s),new cU.Resource(r)}_parseResourceAttributes(t){if(!t)return{};let r={},n=t.split(this._COMMA_SEPARATOR,-1);for(let i of n){let s=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(s.length!==2)continue;let[o,a]=s;if(o=o.trim(),a=a.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(o))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(a))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[o]=decodeURIComponent(a)}return r}_isValid(t){return t.length<=this._MAX_LENGTH&&this._isBaggageOctetString(t)}_isBaggageOctetString(t){for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0}_isValidAndNotEmpty(t){return t.length>0&&this._isValid(t)}};xu.envDetectorSync=new Ph});var cb=d(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.envDetector=void 0;var lU=Ch(),Ih=class{detect(t){return Promise.resolve(lU.envDetectorSync.detect(t))}};Lu.envDetector=new Ih});var lb=d(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.browserDetectorSync=void 0;var Mu=It(),wh=Mn(),dU=N(),Nh=class{detect(t){if(!(typeof navigator<"u"))return wh.Resource.empty();let n={[Mu.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[Mu.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Web Browser",[Mu.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:navigator.userAgent};return this._getResourceAttributes(n,t)}_getResourceAttributes(t,r){return t[Mu.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]===""?(dU.diag.debug("BrowserDetector failed: Unable to find required browser resources. "),wh.Resource.empty()):new wh.Resource(Object.assign({},t))}};Du.browserDetectorSync=new Nh});var db=d(wt=>{"use strict";var pU=wt&&wt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Fu=wt&&wt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&pU(t,e,r)};Object.defineProperty(wt,"__esModule",{value:!0});Fu(ub(),wt);Fu(cb(),wt);Fu(lb(),wt);Fu(Ch(),wt)});var pb=d(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.isPromiseLike=void 0;var fU=e=>e!==null&&typeof e=="object"&&typeof e.then=="function";Bu.isPromiseLike=fU});var hb=d(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.detectResourcesSync=Fn.detectResources=void 0;var ts=Mr(),Dn=N(),hU=pb(),_U=async(e={})=>{let t=await Promise.all((e.detectors||[]).map(async r=>{try{let n=await r.detect(e);return Dn.diag.debug(`${r.constructor.name} found resource.`,n),n}catch(n){return Dn.diag.debug(`${r.constructor.name} failed: ${n.message}`),ts.Resource.empty()}}));return fb(t),t.reduce((r,n)=>r.merge(n),ts.Resource.empty())};Fn.detectResources=_U;var gU=(e={})=>{var t;let r=((t=e.detectors)!==null&&t!==void 0?t:[]).map(i=>{try{let s=i.detect(e),o;if((0,hU.isPromiseLike)(s)){let a=async()=>(await s).attributes;o=new ts.Resource({},a())}else o=s;return o.waitForAsyncAttributes?o.waitForAsyncAttributes().then(()=>Dn.diag.debug(`${i.constructor.name} found resource.`,o)):Dn.diag.debug(`${i.constructor.name} found resource.`,o),o}catch(s){return Dn.diag.error(`${i.constructor.name} failed: ${s.message}`),ts.Resource.empty()}}),n=r.reduce((i,s)=>i.merge(s),ts.Resource.empty());return n.waitForAsyncAttributes&&n.waitForAsyncAttributes().then(()=>{fb(r)}),n};Fn.detectResourcesSync=gU;var fb=e=>{e.forEach(t=>{if(Object.keys(t.attributes).length>0){let r=JSON.stringify(t.attributes,null,4);Dn.diag.verbose(r)}})}});var Mn=d(Je=>{"use strict";var mU=Je&&Je.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ur=Je&&Je.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&mU(t,e,r)};Object.defineProperty(Je,"__esModule",{value:!0});Ur(Mr(),Je);Ur(nb(),Je);Ur(Rh(),Je);Ur(sb(),Je);Ur(ab(),Je);Ur(db(),Je);Ur(hb(),Je)});var _b=d(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.MultiSpanProcessor=void 0;var EU=ee(),xh=class{constructor(t){this._spanProcessors=t}forceFlush(){let t=[];for(let r of this._spanProcessors)t.push(r.forceFlush());return new Promise(r=>{Promise.all(t).then(()=>{r()}).catch(n=>{(0,EU.globalErrorHandler)(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(t,r){for(let n of this._spanProcessors)n.onStart(t,r)}onEnd(t){for(let r of this._spanProcessors)r.onEnd(t)}shutdown(){let t=[];for(let r of this._spanProcessors)t.push(r.shutdown());return new Promise((r,n)=>{Promise.all(t).then(()=>{r()},n)})}};Uu.MultiSpanProcessor=xh});var Mh=d(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.NoopSpanProcessor=void 0;var Lh=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};ku.NoopSpanProcessor=Lh});var mb=d(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.BasicTracerProvider=kr.ForceFlushState=void 0;var Bn=N(),kn=ee(),gb=Mn(),SU=ju(),AU=oh(),TU=_b(),yU=Mh(),bU=fu(),RU=uh(),Un;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(Un=kr.ForceFlushState||(kr.ForceFlushState={}));var rs=class{constructor(t={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map;let n=(0,kn.merge)({},(0,AU.loadDefaultConfig)(),(0,RU.reconfigureLimits)(t));this.resource=(r=n.resource)!==null&&r!==void 0?r:gb.Resource.empty(),this.resource=gb.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let i=this._buildExporterFromEnv();if(i!==void 0){let s=new bU.BatchSpanProcessor(i);this.activeSpanProcessor=s}else this.activeSpanProcessor=new yU.NoopSpanProcessor}getTracer(t,r,n){let i=`${t}@${r||""}:${n?.schemaUrl||""}`;return this._tracers.has(i)||this._tracers.set(i,new SU.Tracer({name:t,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)}addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>Bn.diag.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new TU.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(t={}){Bn.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Bn.context.setGlobalContextManager(t.contextManager),t.propagator&&Bn.propagation.setGlobalPropagator(t.propagator)}forceFlush(){let t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(i=>{let s,o=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),s=Un.timeout},t);n.forceFlush().then(()=>{clearTimeout(o),s!==Un.timeout&&(s=Un.resolved,i(s))}).catch(a=>{clearTimeout(o),s=Un.error,i(a)})}));return new Promise((n,i)=>{Promise.all(r).then(s=>{let o=s.filter(a=>a!==Un.resolved);o.length>0?i(o):n()}).catch(s=>i([s]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(t){var r;return(r=this.constructor._registeredPropagators.get(t))===null||r===void 0?void 0:r()}_getSpanExporter(t){var r;return(r=this.constructor._registeredExporters.get(t))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let t=Array.from(new Set((0,kn.getEnv)().OTEL_PROPAGATORS)),n=t.map(i=>{let s=this._getPropagator(i);return s||Bn.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),s}).reduce((i,s)=>(s&&i.push(s),i),[]);if(n.length!==0)return t.length===1?n[0]:new kn.CompositePropagator({propagators:n})}_buildExporterFromEnv(){let t=(0,kn.getEnv)().OTEL_TRACES_EXPORTER;if(t==="none"||t==="")return;let r=this._getSpanExporter(t);return r||Bn.diag.error(`Exporter "${t}" requested through environment variable is unavailable.`),r}};kr.BasicTracerProvider=rs;rs._registeredPropagators=new Map([["tracecontext",()=>new kn.W3CTraceContextPropagator],["baggage",()=>new kn.W3CBaggagePropagator]]);rs._registeredExporters=new Map});var Eb=d(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.ConsoleSpanExporter=void 0;var Dh=ee(),Fh=class{export(t,r){return this._sendSpans(t,r)}shutdown(){return this._sendSpans([]),this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(t){var r;return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,traceState:(r=t.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:(0,Dh.hrTimeToMicroseconds)(t.startTime),duration:(0,Dh.hrTimeToMicroseconds)(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}}_sendSpans(t,r){for(let n of t)console.dir(this._exportInfo(n),{depth:3});if(r)return r({code:Dh.ExportResultCode.SUCCESS})}};Gu.ConsoleSpanExporter=Fh});var Ab=d(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.InMemorySpanExporter=void 0;var Sb=ee(),Bh=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(t,r){if(this._stopped)return r({code:Sb.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...t),setTimeout(()=>r({code:Sb.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};qu.InMemorySpanExporter=Bh});var yb=d(Tb=>{"use strict";Object.defineProperty(Tb,"__esModule",{value:!0})});var bb=d(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.SimpleSpanProcessor=void 0;var vU=N(),jn=ee(),Uh=class{constructor(t){this._exporter=t,this._shutdownOnce=new jn.BindOnceFuture(this._shutdown,this),this._unresolvedExports=new Set}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(t,r){}onEnd(t){var r,n;if(this._shutdownOnce.isCalled||!(t.spanContext().traceFlags&vU.TraceFlags.SAMPLED))return;let i=()=>jn.internal._export(this._exporter,[t]).then(s=>{var o;s.code!==jn.ExportResultCode.SUCCESS&&(0,jn.globalErrorHandler)((o=s.error)!==null&&o!==void 0?o:new Error(`SimpleSpanProcessor: span export failed (status ${s})`))}).catch(s=>{(0,jn.globalErrorHandler)(s)});if(t.resource.asyncAttributesPending){let s=(n=(r=t.resource).waitForAsyncAttributes)===null||n===void 0?void 0:n.call(r).then(()=>(s!=null&&this._unresolvedExports.delete(s),i()),o=>(0,jn.globalErrorHandler)(o));s!=null&&this._unresolvedExports.add(s)}else i()}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}};Hu.SimpleSpanProcessor=Uh});var vb=d(Rb=>{"use strict";Object.defineProperty(Rb,"__esModule",{value:!0})});var Pb=d(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0})});var Ib=d(Cb=>{"use strict";Object.defineProperty(Cb,"__esModule",{value:!0})});var Nb=d(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0})});var Lb=d(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0})});var ju=d(se=>{"use strict";var OU=se&&se.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ae=se&&se.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&OU(t,e,r)};Object.defineProperty(se,"__esModule",{value:!0});Ae(U0(),se);Ae(mb(),se);Ae(fu(),se);Ae(Eb(),se);Ae(Ab(),se);Ae(yb(),se);Ae(bb(),se);Ae(vb(),se);Ae(Mh(),se);Ae(ru(),se);Ae(iu(),se);Ae(th(),se);Ae(nh(),se);Ae(Ji(),se);Ae(zf(),se);Ae(Pb(),se);Ae(Ib(),se);Ae(Nb(),se);Ae(Lb(),se)});var jr=d(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.parseRetryAfterToMills=ae.isExportRetryable=ae.invalidTimeout=ae.configureExporterTimeout=ae.appendRootPathToUrlIfNeeded=ae.appendResourcePathToUrl=ae.parseHeaders=ae.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=ae.DEFAULT_EXPORT_MAX_BACKOFF=ae.DEFAULT_EXPORT_INITIAL_BACKOFF=ae.DEFAULT_EXPORT_MAX_ATTEMPTS=void 0;var kh=N(),Mb=ee(),Db=1e4;ae.DEFAULT_EXPORT_MAX_ATTEMPTS=5;ae.DEFAULT_EXPORT_INITIAL_BACKOFF=1e3;ae.DEFAULT_EXPORT_MAX_BACKOFF=5e3;ae.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=1.5;function PU(e={}){let t={};return Object.entries(e).forEach(([r,n])=>{typeof n<"u"?t[r]=String(n):kh.diag.warn(`Header "${r}" has wrong value and will be ignored`)}),t}ae.parseHeaders=PU;function CU(e,t){return e.endsWith("/")||(e=e+"/"),e+t}ae.appendResourcePathToUrl=CU;function IU(e){try{let t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch{return kh.diag.warn(`Could not parse export URL: '${e}'`),e}}ae.appendRootPathToUrlIfNeeded=IU;function wU(e){return typeof e=="number"?e<=0?jh(e,Db):e:NU()}ae.configureExporterTimeout=wU;function NU(){var e;let t=Number((e=(0,Mb.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:(0,Mb.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?jh(t,Db):t}function jh(e,t){return kh.diag.warn("Timeout must be greater than 0",e),t}ae.invalidTimeout=jh;function xU(e){return[429,502,503,504].includes(e)}ae.isExportRetryable=xU;function LU(e){if(e==null)return-1;let t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?t*1e3:-1;let r=new Date(e).getTime()-Date.now();return r>=0?r:0}ae.parseRetryAfterToMills=LU});var Vu=d($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.OTLPExporterBase=void 0;var Fb=N(),ns=ee(),MU=jr(),Gh=class{constructor(t={}){this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new ns.BindOnceFuture(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:30,this.timeoutMillis=(0,MU.configureExporterTimeout)(t.timeoutMillis),this.onInit(t)}export(t,r){if(this._shutdownOnce.isCalled){r({code:ns.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:ns.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(()=>{r({code:ns.ExportResultCode.SUCCESS})}).catch(n=>{r({code:ns.ExportResultCode.FAILED,error:n})})}_export(t){return new Promise((r,n)=>{try{Fb.diag.debug("items to be sent",t),this.send(t,r,n)}catch(i){n(i)}})}shutdown(){return this._shutdownOnce.call()}forceFlush(){return Promise.all(this._sendingPromises).then(()=>{})}_shutdown(){return Fb.diag.debug("shutdown started"),this.onShutdown(),this.forceFlush()}};$u.OTLPExporterBase=Gh});var qh=d(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.CompressionAlgorithm=void 0;var DU;(function(e){e.NONE="none",e.GZIP="gzip"})(DU=is.CompressionAlgorithm||(is.CompressionAlgorithm={}))});var Yu=d(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.OTLPExporterError=void 0;var Hh=class extends Error{constructor(t,r,n){super(t),this.name="OTLPExporterError",this.data=n,this.code=r}};Wu.OTLPExporterError=Hh});var Vh=d(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.configureCompression=ir.createHttpAgent=ir.sendWithHttp=void 0;var Ub=v("url"),kb=v("http"),jb=v("https"),FU=v("zlib"),BU=v("stream"),$h=N(),Ku=qh(),Bb=ee(),ss=Yu(),Gn=jr();function UU(e,t,r,n,i){let s=e.timeoutMillis,o=new Ub.URL(e.url),a=Number(process.versions.node.split(".")[0]),u,c,l=!1,p=setTimeout(()=>{if(clearTimeout(u),l=!0,c.destroyed){let g=new ss.OTLPExporterError("Request Timeout");i(g)}else a>=14?c.destroy():c.abort()},s),f={hostname:o.hostname,port:o.port,path:o.pathname,method:"POST",headers:Object.assign({"Content-Type":r},e.headers),agent:e.agent},_=o.protocol==="http:"?kb.request:jb.request,h=(g=Gn.DEFAULT_EXPORT_MAX_ATTEMPTS,T=Gn.DEFAULT_EXPORT_INITIAL_BACKOFF)=>{switch(c=_(f,A=>{let y="";A.on("data",b=>y+=b),A.on("aborted",()=>{if(l){let b=new ss.OTLPExporterError("Request Timeout");i(b)}}),A.on("end",()=>{if(l===!1)if(A.statusCode&&A.statusCode<299)$h.diag.debug(`statusCode: ${A.statusCode}`,y),n(),clearTimeout(p),clearTimeout(u);else if(A.statusCode&&(0,Gn.isExportRetryable)(A.statusCode)&&g>0){let b;T=Gn.DEFAULT_EXPORT_BACKOFF_MULTIPLIER*T,A.headers["retry-after"]?b=(0,Gn.parseRetryAfterToMills)(A.headers["retry-after"]):b=Math.round(Math.random()*(Gn.DEFAULT_EXPORT_MAX_BACKOFF-T)+T),u=setTimeout(()=>{h(g-1,T)},b)}else{let b=new ss.OTLPExporterError(A.statusMessage,A.statusCode,y);i(b),clearTimeout(p),clearTimeout(u)}})}),c.on("error",A=>{if(l){let y=new ss.OTLPExporterError("Request Timeout",A.code);i(y)}else i(A);clearTimeout(p),clearTimeout(u)}),c.on("abort",()=>{if(l){let A=new ss.OTLPExporterError("Request Timeout");i(A)}clearTimeout(p),clearTimeout(u)}),e.compression){case Ku.CompressionAlgorithm.GZIP:{c.setHeader("Content-Encoding","gzip"),kU(t).on("error",i).pipe(FU.createGzip()).on("error",i).pipe(c);break}default:c.end(t);break}};h()}ir.sendWithHttp=UU;function kU(e){let t=new BU.Readable;return t.push(e),t.push(null),t}function jU(e){if(e.httpAgentOptions&&e.keepAlive===!1){$h.diag.warn("httpAgentOptions is used only when keepAlive is true");return}if(!(e.keepAlive===!1||!e.url))try{let r=new Ub.URL(e.url).protocol==="http:"?kb.Agent:jb.Agent;return new r(Object.assign({keepAlive:!0},e.httpAgentOptions))}catch(t){$h.diag.error(`collector exporter failed to create http agent. err: ${t.message}`);return}}ir.createHttpAgent=jU;function GU(e){return e||(((0,Bb.getEnv)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,Bb.getEnv)().OTEL_EXPORTER_OTLP_COMPRESSION)===Ku.CompressionAlgorithm.GZIP?Ku.CompressionAlgorithm.GZIP:Ku.CompressionAlgorithm.NONE)}ir.configureCompression=GU});var Hb=d(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.OTLPExporterNodeBase=void 0;var qU=Vu(),HU=jr(),Wh=Vh(),Gb=N(),qb=ee(),Yh=class extends qU.OTLPExporterBase{constructor(t={}){super(t),this.DEFAULT_HEADERS={},t.metadata&&Gb.diag.warn("Metadata cannot be set when using http"),this.headers=Object.assign(this.DEFAULT_HEADERS,(0,HU.parseHeaders)(t.headers),qb.baggageUtils.parseKeyPairsIntoRecord((0,qb.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)),this.agent=(0,Wh.createHttpAgent)(t),this.compression=(0,Wh.configureCompression)(t.compression)}onInit(t){}send(t,r,n){if(this._shutdownOnce.isCalled){Gb.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=new Promise((a,u)=>{(0,Wh.sendWithHttp)(this,JSON.stringify(i),"application/json",a,u)}).then(r,n);this._sendingPromises.push(s);let o=()=>{let a=this._sendingPromises.indexOf(s);this._sendingPromises.splice(a,1)};s.then(o,o)}onShutdown(){}};Xu.OTLPExporterNodeBase=Yh});var $b=d(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.CompressionAlgorithm=ot.configureCompression=ot.createHttpAgent=ot.sendWithHttp=ot.OTLPExporterNodeBase=void 0;var $U=Hb();Object.defineProperty(ot,"OTLPExporterNodeBase",{enumerable:!0,get:function(){return $U.OTLPExporterNodeBase}});var Kh=Vh();Object.defineProperty(ot,"sendWithHttp",{enumerable:!0,get:function(){return Kh.sendWithHttp}});Object.defineProperty(ot,"createHttpAgent",{enumerable:!0,get:function(){return Kh.createHttpAgent}});Object.defineProperty(ot,"configureCompression",{enumerable:!0,get:function(){return Kh.configureCompression}});var VU=qh();Object.defineProperty(ot,"CompressionAlgorithm",{enumerable:!0,get:function(){return VU.CompressionAlgorithm}})});var Xh=d(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.sendWithXhr=Hn.sendWithBeacon=void 0;var Vb=N(),os=Yu(),qn=jr();function WU(e,t,r,n,i){if(navigator.sendBeacon(t,new Blob([e],r)))Vb.diag.debug("sendBeacon - can send",e),n();else{let s=new os.OTLPExporterError(`sendBeacon - cannot send ${e}`);i(s)}}Hn.sendWithBeacon=WU;function YU(e,t,r,n,i,s){let o,a,u=!1,c=setTimeout(()=>{if(clearTimeout(o),u=!0,a.readyState===XMLHttpRequest.DONE){let p=new os.OTLPExporterError("Request Timeout");s(p)}else a.abort()},n),l=(p=qn.DEFAULT_EXPORT_MAX_ATTEMPTS,f=qn.DEFAULT_EXPORT_INITIAL_BACKOFF)=>{a=new XMLHttpRequest,a.open("POST",t),Object.entries(Object.assign(Object.assign({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach(([h,g])=>{a.setRequestHeader(h,g)}),a.send(e),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE&&u===!1)if(a.status>=200&&a.status<=299)Vb.diag.debug("xhr success",e),i(),clearTimeout(c),clearTimeout(o);else if(a.status&&(0,qn.isExportRetryable)(a.status)&&p>0){let h;f=qn.DEFAULT_EXPORT_BACKOFF_MULTIPLIER*f,a.getResponseHeader("Retry-After")?h=(0,qn.parseRetryAfterToMills)(a.getResponseHeader("Retry-After")):h=Math.round(Math.random()*(qn.DEFAULT_EXPORT_MAX_BACKOFF-f)+f),o=setTimeout(()=>{l(p-1,f)},h)}else{let h=new os.OTLPExporterError(`Failed to export with XHR (status: ${a.status})`,a.status);s(h),clearTimeout(c),clearTimeout(o)}},a.onabort=()=>{if(u){let h=new os.OTLPExporterError("Request Timeout");s(h)}clearTimeout(c),clearTimeout(o)},a.onerror=()=>{if(u){let h=new os.OTLPExporterError("Request Timeout");s(h)}clearTimeout(c),clearTimeout(o)}};l()}Hn.sendWithXhr=YU});var Yb=d(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.OTLPExporterBrowserBase=void 0;var KU=Vu(),XU=jr(),Wb=Xh(),zU=N(),zu=ee(),zh=class extends KU.OTLPExporterBase{constructor(t={}){super(t),this._useXHR=!1,this._useXHR=!!t.headers||typeof navigator.sendBeacon!="function",this._useXHR?this._headers=Object.assign({},(0,XU.parseHeaders)(t.headers),zu.baggageUtils.parseKeyPairsIntoRecord((0,zu.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)):this._headers={}}onInit(){zu._globalThis.addEventListener("unload",this.shutdown)}onShutdown(){zu._globalThis.removeEventListener("unload",this.shutdown)}send(t,r,n){if(this._shutdownOnce.isCalled){zU.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=JSON.stringify(i),o=new Promise((u,c)=>{this._useXHR?(0,Wb.sendWithXhr)(s,this.url,this._headers,this.timeoutMillis,u,c):(0,Wb.sendWithBeacon)(s,this.url,{type:"application/json"},u,c)}).then(r,n);this._sendingPromises.push(o);let a=()=>{let u=this._sendingPromises.indexOf(o);this._sendingPromises.splice(u,1)};o.then(a,a)}};Qu.OTLPExporterBrowserBase=zh});var Kb=d($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.sendWithXhr=$n.OTLPExporterBrowserBase=void 0;var QU=Yb();Object.defineProperty($n,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return QU.OTLPExporterBrowserBase}});var ZU=Xh();Object.defineProperty($n,"sendWithXhr",{enumerable:!0,get:function(){return ZU.sendWithXhr}})});var zb=d(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.sendWithXhr=Me.OTLPExporterBrowserBase=Me.CompressionAlgorithm=Me.configureCompression=Me.createHttpAgent=Me.sendWithHttp=Me.OTLPExporterNodeBase=void 0;var as=$b();Object.defineProperty(Me,"OTLPExporterNodeBase",{enumerable:!0,get:function(){return as.OTLPExporterNodeBase}});Object.defineProperty(Me,"sendWithHttp",{enumerable:!0,get:function(){return as.sendWithHttp}});Object.defineProperty(Me,"createHttpAgent",{enumerable:!0,get:function(){return as.createHttpAgent}});Object.defineProperty(Me,"configureCompression",{enumerable:!0,get:function(){return as.configureCompression}});Object.defineProperty(Me,"CompressionAlgorithm",{enumerable:!0,get:function(){return as.CompressionAlgorithm}});var Xb=Kb();Object.defineProperty(Me,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return Xb.OTLPExporterBrowserBase}});Object.defineProperty(Me,"sendWithXhr",{enumerable:!0,get:function(){return Xb.sendWithXhr}})});var Qh=d(pe=>{"use strict";var JU=pe&&pe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ek=pe&&pe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&JU(t,e,r)};Object.defineProperty(pe,"__esModule",{value:!0});pe.invalidTimeout=pe.configureExporterTimeout=pe.appendRootPathToUrlIfNeeded=pe.appendResourcePathToUrl=pe.parseHeaders=pe.OTLPExporterError=pe.OTLPExporterBase=void 0;ek(zb(),pe);var tk=Vu();Object.defineProperty(pe,"OTLPExporterBase",{enumerable:!0,get:function(){return tk.OTLPExporterBase}});var rk=Yu();Object.defineProperty(pe,"OTLPExporterError",{enumerable:!0,get:function(){return rk.OTLPExporterError}});var us=jr();Object.defineProperty(pe,"parseHeaders",{enumerable:!0,get:function(){return us.parseHeaders}});Object.defineProperty(pe,"appendResourcePathToUrl",{enumerable:!0,get:function(){return us.appendResourcePathToUrl}});Object.defineProperty(pe,"appendRootPathToUrlIfNeeded",{enumerable:!0,get:function(){return us.appendRootPathToUrlIfNeeded}});Object.defineProperty(pe,"configureExporterTimeout",{enumerable:!0,get:function(){return us.configureExporterTimeout}});Object.defineProperty(pe,"invalidTimeout",{enumerable:!0,get:function(){return us.invalidTimeout}})});var Zb=d(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0})});var cs=d(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.getOtlpEncoder=at.encodeAsString=at.encodeAsLongBits=at.toLongBits=at.hrTimeToNanos=void 0;var Zu=ee(),nk=BigInt(1e9);function Zh(e){return BigInt(e[0])*nk+BigInt(e[1])}at.hrTimeToNanos=Zh;function eR(e){let t=Number(BigInt.asUintN(32,e)),r=Number(BigInt.asUintN(32,e>>BigInt(32)));return{low:t,high:r}}at.toLongBits=eR;function Jh(e){let t=Zh(e);return eR(t)}at.encodeAsLongBits=Jh;function tR(e){return Zh(e).toString()}at.encodeAsString=tR;var ik=typeof BigInt<"u"?tR:Zu.hrTimeToNanoseconds;function Jb(e){return e}function rR(e){if(e!==void 0)return(0,Zu.hexToBinary)(e)}var sk={encodeHrTime:Jh,encodeSpanContext:Zu.hexToBinary,encodeOptionalSpanContext:rR};function ok(e){var t,r;if(e===void 0)return sk;let n=(t=e.useLongBits)!==null&&t!==void 0?t:!0,i=(r=e.useHex)!==null&&r!==void 0?r:!1;return{encodeHrTime:n?Jh:ik,encodeSpanContext:i?Jb:Zu.hexToBinary,encodeOptionalSpanContext:i?Jb:rR}}at.getOtlpEncoder=ok});var iR=d(nR=>{"use strict";Object.defineProperty(nR,"__esModule",{value:!0})});var oR=d(sR=>{"use strict";Object.defineProperty(sR,"__esModule",{value:!0})});var aR=d(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.ESpanKind=void 0;var ak;(function(e){e[e.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",e[e.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",e[e.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",e[e.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",e[e.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",e[e.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"})(ak=ls.ESpanKind||(ls.ESpanKind={}))});var cR=d(uR=>{"use strict";Object.defineProperty(uR,"__esModule",{value:!0})});var ds=d(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.toAnyValue=sr.toKeyValue=sr.toAttributes=void 0;function uk(e){return Object.keys(e).map(t=>e_(t,e[t]))}sr.toAttributes=uk;function e_(e,t){return{key:e,value:t_(t)}}sr.toKeyValue=e_;function t_(e){let t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(t_)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(([r,n])=>e_(r,n))}}:{}}sr.toAnyValue=t_});var pR=d(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.toOtlpSpanEvent=or.toOtlpLink=or.sdkSpanToOtlpSpan=void 0;var r_=ds();function ck(e,t){var r;let n=e.spanContext(),i=e.status;return{traceId:t.encodeSpanContext(n.traceId),spanId:t.encodeSpanContext(n.spanId),parentSpanId:t.encodeOptionalSpanContext(e.parentSpanId),traceState:(r=n.traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:(0,r_.toAttributes)(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(s=>dR(s,t)),droppedEventsCount:e.droppedEventsCount,status:{code:i.code,message:i.message},links:e.links.map(s=>lR(s,t)),droppedLinksCount:e.droppedLinksCount}}or.sdkSpanToOtlpSpan=ck;function lR(e,t){var r;return{attributes:e.attributes?(0,r_.toAttributes)(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:(r=e.context.traceState)===null||r===void 0?void 0:r.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}or.toOtlpLink=lR;function dR(e,t){return{attributes:e.attributes?(0,r_.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}or.toOtlpSpanEvent=dR});var fR=d(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.createExportTraceServiceRequest=void 0;var lk=ds(),dk=pR(),pk=cs();function fk(e,t){let r=(0,pk.getOtlpEncoder)(t);return{resourceSpans:_k(e,r)}}Ju.createExportTraceServiceRequest=fk;function hk(e){let t=new Map;for(let r of e){let n=t.get(r.resource);n||(n=new Map,t.set(r.resource,n));let i=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`,s=n.get(i);s||(s=[],n.set(i,s)),s.push(r)}return t}function _k(e,t){let r=hk(e),n=[],i=r.entries(),s=i.next();for(;!s.done;){let[o,a]=s.value,u=[],c=a.values(),l=c.next();for(;!l.done;){let f=l.value;if(f.length>0){let{name:_,version:h,schemaUrl:g}=f[0].instrumentationLibrary,T=f.map(A=>(0,dk.sdkSpanToOtlpSpan)(A,t));u.push({scope:{name:_,version:h},spans:T,schemaUrl:g})}l=c.next()}let p={resource:{attributes:(0,lk.toAttributes)(o.attributes),droppedAttributesCount:0},scopeSpans:u,schemaUrl:void 0};n.push(p),s=i.next()}return n}});var ec=d(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.AggregationTemporality=void 0;var gk;(function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"})(gk=ps.AggregationTemporality||(ps.AggregationTemporality={}))});var Vn=d(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.DataPointType=void 0;var mk;(function(e){e[e.HISTOGRAM=0]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",e[e.GAUGE=2]="GAUGE",e[e.SUM=3]="SUM"})(mk=fs.DataPointType||(fs.DataPointType={}))});var Nt=d(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.equalsCaseInsensitive=ue.binarySearchLB=ue.setEquals=ue.FlatMap=ue.isPromiseAllSettledRejectionResult=ue.PromiseAllSettled=ue.callWithTimeout=ue.TimeoutError=ue.instrumentationScopeId=ue.hashAttributes=ue.isNotNullish=void 0;function Ek(e){return e!=null}ue.isNotNullish=Ek;function Sk(e){let t=Object.keys(e);return t.length===0?"":(t=t.sort(),JSON.stringify(t.map(r=>[r,e[r]])))}ue.hashAttributes=Sk;function Ak(e){var t,r;return`${e.name}:${(t=e.version)!==null&&t!==void 0?t:""}:${(r=e.schemaUrl)!==null&&r!==void 0?r:""}`}ue.instrumentationScopeId=Ak;var tc=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};ue.TimeoutError=tc;function Tk(e,t){let r,n=new Promise(function(s,o){r=setTimeout(function(){o(new tc("Operation timed out."))},t)});return Promise.race([e,n]).then(i=>(clearTimeout(r),i),i=>{throw clearTimeout(r),i})}ue.callWithTimeout=Tk;async function yk(e){return Promise.all(e.map(async t=>{try{return{status:"fulfilled",value:await t}}catch(r){return{status:"rejected",reason:r}}}))}ue.PromiseAllSettled=yk;function bk(e){return e.status==="rejected"}ue.isPromiseAllSettledRejectionResult=bk;function Rk(e,t){let r=[];return e.forEach(n=>{r.push(...t(n))}),r}ue.FlatMap=Rk;function vk(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}ue.setEquals=vk;function Ok(e,t){let r=0,n=e.length-1;for(;n-r>1;){let i=Math.trunc((n+r)/2);e[i]<=t?r=i:n=i-1}return e[n]<=t?n:e[r]<=t?r:-1}ue.binarySearchLB=Ok;function Pk(e,t){return e.toLowerCase()===t.toLowerCase()}ue.equalsCaseInsensitive=Pk});var Wn=d(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.AggregatorKind=void 0;var Ck;(function(e){e[e.DROP=0]="DROP",e[e.SUM=1]="SUM",e[e.LAST_VALUE=2]="LAST_VALUE",e[e.HISTOGRAM=3]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"})(Ck=hs.AggregatorKind||(hs.AggregatorKind={}))});var hR=d(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.DropAggregator=void 0;var Ik=Wn(),n_=class{constructor(){this.kind=Ik.AggregatorKind.DROP}createAccumulation(){}merge(t,r){}diff(t,r){}toMetricData(t,r,n,i){}};rc.DropAggregator=n_});var Gt=d(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.isValidName=et.isDescriptorCompatibleWith=et.createInstrumentDescriptorWithView=et.createInstrumentDescriptor=et.InstrumentType=void 0;var _R=N(),wk=Nt(),Nk;(function(e){e.COUNTER="COUNTER",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(Nk=et.InstrumentType||(et.InstrumentType={}));function xk(e,t,r){var n,i,s,o;return gR(e)||_R.diag.warn(`Invalid metric name: "${e}". The metric name should be a ASCII string with a length no greater than 255 characters.`),{name:e,type:t,description:(n=r?.description)!==null&&n!==void 0?n:"",unit:(i=r?.unit)!==null&&i!==void 0?i:"",valueType:(s=r?.valueType)!==null&&s!==void 0?s:_R.ValueType.DOUBLE,advice:(o=r?.advice)!==null&&o!==void 0?o:{}}}et.createInstrumentDescriptor=xk;function Lk(e,t){var r,n;return{name:(r=e.name)!==null&&r!==void 0?r:t.name,description:(n=e.description)!==null&&n!==void 0?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType,advice:t.advice}}et.createInstrumentDescriptorWithView=Lk;function Mk(e,t){return(0,wk.equalsCaseInsensitive)(e.name,t.name)&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}et.isDescriptorCompatibleWith=Mk;var Dk=/^[a-z][a-z0-9_.\-/]{0,254}$/i;function gR(e){return e.match(Dk)!=null}et.isValidName=gR});var mR=d(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.HistogramAggregator=Kn.HistogramAccumulation=void 0;var Fk=Wn(),Bk=Vn(),i_=Gt(),Uk=Nt();function kk(e){let t=e.map(()=>0);return t.push(0),{buckets:{boundaries:e,counts:t},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}var Yn=class{constructor(t,r,n=!0,i=kk(r)){this.startTime=t,this._boundaries=r,this._recordMinMax=n,this._current=i}record(t){this._current.count+=1,this._current.sum+=t,this._recordMinMax&&(this._current.min=Math.min(t,this._current.min),this._current.max=Math.max(t,this._current.max),this._current.hasMinMax=!0);let r=(0,Uk.binarySearchLB)(this._boundaries,t);this._current.buckets.counts[r+1]+=1}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};Kn.HistogramAccumulation=Yn;var s_=class{constructor(t,r){this._boundaries=t,this._recordMinMax=r,this.kind=Fk.AggregatorKind.HISTOGRAM}createAccumulation(t){return new Yn(t,this._boundaries,this._recordMinMax)}merge(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let l=0;l<s.length;l++)a[l]=s[l]+o[l];let u=1/0,c=-1/0;return this._recordMinMax&&(n.hasMinMax&&i.hasMinMax?(u=Math.min(n.min,i.min),c=Math.max(n.max,i.max)):n.hasMinMax?(u=n.min,c=n.max):i.hasMinMax&&(u=i.min,c=i.max)),new Yn(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:n.count+i.count,sum:n.sum+i.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||i.hasMinMax),min:u,max:c})}diff(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let u=0;u<s.length;u++)a[u]=o[u]-s[u];return new Yn(r.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:i.count-n.count,sum:i.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:Bk.DataPointType.HISTOGRAM,dataPoints:n.map(([s,o])=>{let a=o.toPointValue(),u=t.type===i_.InstrumentType.UP_DOWN_COUNTER||t.type===i_.InstrumentType.OBSERVABLE_GAUGE||t.type===i_.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:s,startTime:o.startTime,endTime:i,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:u?void 0:a.sum,buckets:a.buckets,count:a.count}}})}}};Kn.HistogramAggregator=s_});var ER=d(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.Buckets=void 0;var o_=class e{constructor(t=new a_,r=0,n=0,i=0){this.backing=t,this.indexBase=r,this.indexStart=n,this.indexEnd=i}get offset(){return this.indexStart}get length(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1}counts(){return Array.from({length:this.length},(t,r)=>this.at(r))}at(t){let r=this.indexBase-this.indexStart;return t<r&&(t+=this.backing.length),t-=r,this.backing.countAt(t)}incrementBucket(t,r){this.backing.increment(t,r)}decrementBucket(t,r){this.backing.decrement(t,r)}trim(){for(let t=0;t<this.length;t++)if(this.at(t)!==0){this.indexStart+=t;break}else if(t===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(let t=this.length-1;t>=0;t--)if(this.at(t)!==0){this.indexEnd-=this.length-t-1;break}this._rotate()}downscale(t){this._rotate();let r=1+this.indexEnd-this.indexStart,n=1<<t,i=0,s=0;for(let o=this.indexStart;o<=this.indexEnd;){let a=o%n;a<0&&(a+=n);for(let u=a;u<n&&i<r;u++)this._relocateBucket(s,i),i++,o++;s++}this.indexStart>>=t,this.indexEnd>>=t,this.indexBase=this.indexStart}clone(){return new e(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)}_rotate(){let t=this.indexBase-this.indexStart;t!==0&&(t>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,t),this.backing.reverse(t,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+t)),this.indexBase=this.indexStart)}_relocateBucket(t,r){t!==r&&this.incrementBucket(t,this.backing.emptyBucket(r))}};nc.Buckets=o_;var a_=class e{constructor(t=[0]){this._counts=t}get length(){return this._counts.length}countAt(t){return this._counts[t]}growTo(t,r,n){let i=new Array(t).fill(0);i.splice(n,this._counts.length-r,...this._counts.slice(r)),i.splice(0,r,...this._counts.slice(0,r)),this._counts=i}reverse(t,r){let n=Math.floor((t+r)/2)-t;for(let i=0;i<n;i++){let s=this._counts[t+i];this._counts[t+i]=this._counts[r-i-1],this._counts[r-i-1]=s}}emptyBucket(t){let r=this._counts[t];return this._counts[t]=0,r}increment(t,r){this._counts[t]+=r}decrement(t,r){this._counts[t]>=r?this._counts[t]-=r:this._counts[t]=0}clone(){return new e([...this._counts])}}});var c_=d(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.getSignificand=Ve.getNormalBase2=Ve.MIN_VALUE=Ve.MAX_NORMAL_EXPONENT=Ve.MIN_NORMAL_EXPONENT=Ve.SIGNIFICAND_WIDTH=void 0;Ve.SIGNIFICAND_WIDTH=52;var jk=2146435072,Gk=1048575,u_=1023;Ve.MIN_NORMAL_EXPONENT=-u_+1;Ve.MAX_NORMAL_EXPONENT=u_;Ve.MIN_VALUE=Math.pow(2,-1022);function qk(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e),((t.getUint32(0)&jk)>>20)-u_}Ve.getNormalBase2=qk;function Hk(e){let t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);let r=t.getUint32(0),n=t.getUint32(4);return(r&Gk)*Math.pow(2,32)+n}Ve.getSignificand=Hk});var ic=d(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.nextGreaterSquare=Xn.ldexp=void 0;function $k(e,t){return e===0||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||Number.isNaN(e)?e:e*Math.pow(2,t)}Xn.ldexp=$k;function Vk(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}Xn.nextGreaterSquare=Vk});var oc=d(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.MappingError=void 0;var l_=class extends Error{};sc.MappingError=l_});var AR=d(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.ExponentMapping=void 0;var zn=c_(),Wk=ic(),SR=oc(),d_=class{constructor(t){this._shift=-t}mapToIndex(t){if(t<zn.MIN_VALUE)return this._minNormalLowerBoundaryIndex();let r=zn.getNormalBase2(t),n=this._rightShift(zn.getSignificand(t)-1,zn.SIGNIFICAND_WIDTH);return r+n>>this._shift}lowerBoundary(t){let r=this._minNormalLowerBoundaryIndex();if(t<r)throw new SR.MappingError(`underflow: ${t} is < minimum lower boundary: ${r}`);let n=this._maxNormalLowerBoundaryIndex();if(t>n)throw new SR.MappingError(`overflow: ${t} is > maximum lower boundary: ${n}`);return Wk.ldexp(1,t<<this._shift)}get scale(){return this._shift===0?0:-this._shift}_minNormalLowerBoundaryIndex(){let t=zn.MIN_NORMAL_EXPONENT>>this._shift;return this._shift<2&&t--,t}_maxNormalLowerBoundaryIndex(){return zn.MAX_NORMAL_EXPONENT>>this._shift}_rightShift(t,r){return Math.floor(t*Math.pow(2,-r))}};ac.ExponentMapping=d_});var bR=d(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.LogarithmMapping=void 0;var Qn=c_(),TR=ic(),yR=oc(),p_=class{constructor(t){this._scale=t,this._scaleFactor=TR.ldexp(Math.LOG2E,t),this._inverseFactor=TR.ldexp(Math.LN2,-t)}mapToIndex(t){if(t<=Qn.MIN_VALUE)return this._minNormalLowerBoundaryIndex()-1;if(Qn.getSignificand(t)===0)return(Qn.getNormalBase2(t)<<this._scale)-1;let r=Math.floor(Math.log(t)*this._scaleFactor),n=this._maxNormalLowerBoundaryIndex();return r>=n?n:r}lowerBoundary(t){let r=this._maxNormalLowerBoundaryIndex();if(t>=r){if(t===r)return 2*Math.exp((t-(1<<this._scale))/this._scaleFactor);throw new yR.MappingError(`overflow: ${t} is > maximum lower boundary: ${r}`)}let n=this._minNormalLowerBoundaryIndex();if(t<=n){if(t===n)return Qn.MIN_VALUE;if(t===n-1)return Math.exp((t+(1<<this._scale))/this._scaleFactor)/2;throw new yR.MappingError(`overflow: ${t} is < minimum lower boundary: ${n}`)}return Math.exp(t*this._inverseFactor)}get scale(){return this._scale}_minNormalLowerBoundaryIndex(){return Qn.MIN_NORMAL_EXPONENT<<this._scale}_maxNormalLowerBoundaryIndex(){return(Qn.MAX_NORMAL_EXPONENT+1<<this._scale)-1}};uc.LogarithmMapping=p_});var OR=d(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.getMapping=void 0;var Yk=AR(),Kk=bR(),Xk=oc(),RR=-10,vR=20,zk=Array.from({length:31},(e,t)=>t>10?new Kk.LogarithmMapping(t-10):new Yk.ExponentMapping(t-10));function Qk(e){if(e>vR||e<RR)throw new Xk.MappingError(`expected scale >= ${RR} && <= ${vR}, got: ${e}`);return zk[e+10]}cc.getMapping=Qk});var IR=d(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.ExponentialHistogramAggregator=Jn.ExponentialHistogramAccumulation=void 0;var Zk=Wn(),Jk=Vn(),ej=N(),f_=Gt(),PR=ER(),CR=OR(),tj=ic(),Zn=class e{constructor(t,r){this.low=t,this.high=r}static combine(t,r){return new e(Math.min(t.low,r.low),Math.max(t.high,r.high))}},rj=20,nj=160,h_=2,lc=class e{constructor(t=t,r=nj,n=!0,i=0,s=0,o=0,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=new PR.Buckets,l=new PR.Buckets,p=(0,CR.getMapping)(rj)){this.startTime=t,this._maxSize=r,this._recordMinMax=n,this._sum=i,this._count=s,this._zeroCount=o,this._min=a,this._max=u,this._positive=c,this._negative=l,this._mapping=p,this._maxSize<h_&&(ej.diag.warn(`Exponential Histogram Max Size set to ${this._maxSize},                 changing to the minimum size of: ${h_}`),this._maxSize=h_)}record(t){this.updateByIncrement(t,1)}setStartTime(t){this.startTime=t}toPointValue(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}}get sum(){return this._sum}get min(){return this._min}get max(){return this._max}get count(){return this._count}get zeroCount(){return this._zeroCount}get scale(){return this._count===this._zeroCount?0:this._mapping.scale}get positive(){return this._positive}get negative(){return this._negative}updateByIncrement(t,r){if(t>this._max&&(this._max=t),t<this._min&&(this._min=t),this._count+=r,t===0){this._zeroCount+=r;return}this._sum+=t*r,t>0?this._updateBuckets(this._positive,t,r):this._updateBuckets(this._negative,-t,r)}merge(t){this._count===0?(this._min=t.min,this._max=t.max):t.count!==0&&(t.min<this.min&&(this._min=t.min),t.max>this.max&&(this._max=t.max)),this.startTime=t.startTime,this._sum+=t.sum,this._count+=t.count,this._zeroCount+=t.zeroCount;let r=this._minScale(t);this._downscale(this.scale-r),this._mergeBuckets(this.positive,t,t.positive,r),this._mergeBuckets(this.negative,t,t.negative,r)}diff(t){this._min=1/0,this._max=-1/0,this._sum-=t.sum,this._count-=t.count,this._zeroCount-=t.zeroCount;let r=this._minScale(t);this._downscale(this.scale-r),this._diffBuckets(this.positive,t,t.positive,r),this._diffBuckets(this.negative,t,t.negative,r)}clone(){return new e(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)}_updateBuckets(t,r,n){let i=this._mapping.mapToIndex(r),s=!1,o=0,a=0;if(t.length===0?(t.indexStart=i,t.indexEnd=t.indexStart,t.indexBase=t.indexStart):i<t.indexStart&&t.indexEnd-i>=this._maxSize?(s=!0,a=i,o=t.indexEnd):i>t.indexEnd&&i-t.indexStart>=this._maxSize&&(s=!0,a=t.indexStart,o=i),s){let u=this._changeScale(o,a);this._downscale(u),i=this._mapping.mapToIndex(r)}this._incrementIndexBy(t,i,n)}_incrementIndexBy(t,r,n){if(n===0)return;if(r<t.indexStart){let s=t.indexEnd-r;s>=t.backing.length&&this._grow(t,s+1),t.indexStart=r}else if(r>t.indexEnd){let s=r-t.indexStart;s>=t.backing.length&&this._grow(t,s+1),t.indexEnd=r}let i=r-t.indexBase;i<0&&(i+=t.backing.length),t.incrementBucket(i,n)}_grow(t,r){let n=t.backing.length,i=t.indexBase-t.indexStart,s=n-i,o=(0,tj.nextGreaterSquare)(r);o>this._maxSize&&(o=this._maxSize);let a=o-i;t.backing.growTo(o,s,a)}_changeScale(t,r){let n=0;for(;t-r>=this._maxSize;)t>>=1,r>>=1,n++;return n}_downscale(t){if(t===0)return;if(t<0)throw new Error(`impossible change of scale: ${this.scale}`);let r=this._mapping.scale-t;this._positive.downscale(t),this._negative.downscale(t),this._mapping=(0,CR.getMapping)(r)}_minScale(t){let r=Math.min(this.scale,t.scale),n=Zn.combine(this._highLowAtScale(this.positive,this.scale,r),this._highLowAtScale(t.positive,t.scale,r)),i=Zn.combine(this._highLowAtScale(this.negative,this.scale,r),this._highLowAtScale(t.negative,t.scale,r));return Math.min(r-this._changeScale(n.high,n.low),r-this._changeScale(i.high,i.low))}_highLowAtScale(t,r,n){if(t.length===0)return new Zn(0,-1);let i=r-n;return new Zn(t.indexStart>>i,t.indexEnd>>i)}_mergeBuckets(t,r,n,i){let s=n.offset,o=r.scale-i;for(let a=0;a<n.length;a++)this._incrementIndexBy(t,s+a>>o,n.at(a))}_diffBuckets(t,r,n,i){let s=n.offset,o=r.scale-i;for(let a=0;a<n.length;a++){let c=(s+a>>o)-t.indexBase;c<0&&(c+=t.backing.length),t.decrementBucket(c,n.at(a))}t.trim()}};Jn.ExponentialHistogramAccumulation=lc;var __=class{constructor(t,r){this._maxSize=t,this._recordMinMax=r,this.kind=Zk.AggregatorKind.EXPONENTIAL_HISTOGRAM}createAccumulation(t){return new lc(t,this._maxSize,this._recordMinMax)}merge(t,r){let n=r.clone();return n.merge(t),n}diff(t,r){let n=r.clone();return n.diff(t),n}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:Jk.DataPointType.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(([s,o])=>{let a=o.toPointValue(),u=t.type===f_.InstrumentType.UP_DOWN_COUNTER||t.type===f_.InstrumentType.OBSERVABLE_GAUGE||t.type===f_.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:s,startTime:o.startTime,endTime:i,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:u?void 0:a.sum,positive:{offset:a.positive.offset,bucketCounts:a.positive.bucketCounts},negative:{offset:a.negative.offset,bucketCounts:a.negative.bucketCounts},count:a.count,scale:a.scale,zeroCount:a.zeroCount}}})}}};Jn.ExponentialHistogramAggregator=__});var wR=d(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.LastValueAggregator=ti.LastValueAccumulation=void 0;var ij=Wn(),_s=ee(),sj=Vn(),ei=class{constructor(t,r=0,n=[0,0]){this.startTime=t,this._current=r,this.sampleTime=n}record(t){this._current=t,this.sampleTime=(0,_s.millisToHrTime)(Date.now())}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};ti.LastValueAccumulation=ei;var g_=class{constructor(){this.kind=ij.AggregatorKind.LAST_VALUE}createAccumulation(t){return new ei(t)}merge(t,r){let n=(0,_s.hrTimeToMicroseconds)(r.sampleTime)>=(0,_s.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new ei(t.startTime,n.toPointValue(),n.sampleTime)}diff(t,r){let n=(0,_s.hrTimeToMicroseconds)(r.sampleTime)>=(0,_s.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new ei(r.startTime,n.toPointValue(),n.sampleTime)}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:sj.DataPointType.GAUGE,dataPoints:n.map(([s,o])=>({attributes:s,startTime:o.startTime,endTime:i,value:o.toPointValue()}))}}};ti.LastValueAggregator=g_});var NR=d(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.SumAggregator=ri.SumAccumulation=void 0;var oj=Wn(),aj=Vn(),ar=class{constructor(t,r,n=0,i=!1){this.startTime=t,this.monotonic=r,this._current=n,this.reset=i}record(t){this.monotonic&&t<0||(this._current+=t)}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};ri.SumAccumulation=ar;var m_=class{constructor(t){this.monotonic=t,this.kind=oj.AggregatorKind.SUM}createAccumulation(t){return new ar(t,this.monotonic)}merge(t,r){let n=t.toPointValue(),i=r.toPointValue();return r.reset?new ar(r.startTime,this.monotonic,i,r.reset):new ar(t.startTime,this.monotonic,n+i)}diff(t,r){let n=t.toPointValue(),i=r.toPointValue();return this.monotonic&&n>i?new ar(r.startTime,this.monotonic,i,!0):new ar(r.startTime,this.monotonic,i-n)}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:aj.DataPointType.SUM,dataPoints:n.map(([s,o])=>({attributes:s,startTime:o.startTime,endTime:i,value:o.toPointValue()})),isMonotonic:this.monotonic}}};ri.SumAggregator=m_});var xR=d(ft=>{"use strict";var uj=ft&&ft.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),gs=ft&&ft.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&uj(t,e,r)};Object.defineProperty(ft,"__esModule",{value:!0});gs(hR(),ft);gs(mR(),ft);gs(IR(),ft);gs(wR(),ft);gs(NR(),ft)});var hc=d(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.DefaultAggregation=ye.ExponentialHistogramAggregation=ye.ExplicitBucketHistogramAggregation=ye.HistogramAggregation=ye.LastValueAggregation=ye.SumAggregation=ye.DropAggregation=ye.Aggregation=void 0;var cj=N(),Gr=xR(),qt=Gt(),xt=class{static Drop(){return LR}static Sum(){return MR}static LastValue(){return DR}static Histogram(){return FR}static ExponentialHistogram(){return lj}static Default(){return dj}};ye.Aggregation=xt;var ms=class e extends xt{createAggregator(t){return e.DEFAULT_INSTANCE}};ye.DropAggregation=ms;ms.DEFAULT_INSTANCE=new Gr.DropAggregator;var ni=class e extends xt{createAggregator(t){switch(t.type){case qt.InstrumentType.COUNTER:case qt.InstrumentType.OBSERVABLE_COUNTER:case qt.InstrumentType.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}}};ye.SumAggregation=ni;ni.MONOTONIC_INSTANCE=new Gr.SumAggregator(!0);ni.NON_MONOTONIC_INSTANCE=new Gr.SumAggregator(!1);var Es=class e extends xt{createAggregator(t){return e.DEFAULT_INSTANCE}};ye.LastValueAggregation=Es;Es.DEFAULT_INSTANCE=new Gr.LastValueAggregator;var Ss=class e extends xt{createAggregator(t){return e.DEFAULT_INSTANCE}};ye.HistogramAggregation=Ss;Ss.DEFAULT_INSTANCE=new Gr.HistogramAggregator([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0);var dc=class extends xt{constructor(t,r=!0){if(super(),this._recordMinMax=r,t===void 0||t.length===0)throw new Error("HistogramAggregator should be created with boundaries.");t=t.concat(),t=t.sort((s,o)=>s-o);let n=t.lastIndexOf(-1/0),i=t.indexOf(1/0);i===-1&&(i=void 0),this._boundaries=t.slice(n+1,i)}createAggregator(t){return new Gr.HistogramAggregator(this._boundaries,this._recordMinMax)}};ye.ExplicitBucketHistogramAggregation=dc;var pc=class extends xt{constructor(t=160,r=!0){super(),this._maxSize=t,this._recordMinMax=r}createAggregator(t){return new Gr.ExponentialHistogramAggregator(this._maxSize,this._recordMinMax)}};ye.ExponentialHistogramAggregation=pc;var fc=class extends xt{_resolve(t){switch(t.type){case qt.InstrumentType.COUNTER:case qt.InstrumentType.UP_DOWN_COUNTER:case qt.InstrumentType.OBSERVABLE_COUNTER:case qt.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return MR;case qt.InstrumentType.OBSERVABLE_GAUGE:return DR;case qt.InstrumentType.HISTOGRAM:return t.advice.explicitBucketBoundaries?new dc(t.advice.explicitBucketBoundaries):FR}return cj.diag.warn(`Unable to recognize instrument type: ${t.type}`),LR}createAggregator(t){return this._resolve(t).createAggregator(t)}};ye.DefaultAggregation=fc;var LR=new ms,MR=new ni,DR=new Es,FR=new Ss,lj=new pc,dj=new fc});var E_=d(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=ii.DEFAULT_AGGREGATION_SELECTOR=void 0;var pj=hc(),fj=ec(),hj=e=>pj.Aggregation.Default();ii.DEFAULT_AGGREGATION_SELECTOR=hj;var _j=e=>fj.AggregationTemporality.CUMULATIVE;ii.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=_j});var A_=d(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.MetricReader=void 0;var BR=N(),_c=Nt(),UR=E_(),S_=class{constructor(t){var r,n,i;this._shutdown=!1,this._aggregationSelector=(r=t?.aggregationSelector)!==null&&r!==void 0?r:UR.DEFAULT_AGGREGATION_SELECTOR,this._aggregationTemporalitySelector=(n=t?.aggregationTemporalitySelector)!==null&&n!==void 0?n:UR.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR,this._metricProducers=(i=t?.metricProducers)!==null&&i!==void 0?i:[]}setMetricProducer(t){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=t,this.onInitialized()}selectAggregation(t){return this._aggregationSelector(t)}selectAggregationTemporality(t){return this._aggregationTemporalitySelector(t)}onInitialized(){}async collect(t){if(this._sdkMetricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");let[r,...n]=await Promise.all([this._sdkMetricProducer.collect({timeoutMillis:t?.timeoutMillis}),...this._metricProducers.map(a=>a.collect({timeoutMillis:t?.timeoutMillis}))]),i=r.errors.concat((0,_c.FlatMap)(n,a=>a.errors)),s=r.resourceMetrics.resource,o=r.resourceMetrics.scopeMetrics.concat((0,_c.FlatMap)(n,a=>a.resourceMetrics.scopeMetrics));return{resourceMetrics:{resource:s,scopeMetrics:o},errors:i}}async shutdown(t){if(this._shutdown){BR.diag.error("Cannot call shutdown twice.");return}t?.timeoutMillis==null?await this.onShutdown():await(0,_c.callWithTimeout)(this.onShutdown(),t.timeoutMillis),this._shutdown=!0}async forceFlush(t){if(this._shutdown){BR.diag.warn("Cannot forceFlush on already shutdown MetricReader.");return}if(t?.timeoutMillis==null){await this.onForceFlush();return}await(0,_c.callWithTimeout)(this.onForceFlush(),t.timeoutMillis)}};gc.MetricReader=S_});var GR=d(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.PeriodicExportingMetricReader=void 0;var kR=N(),mc=ee(),gj=A_(),jR=Nt(),mj=N(),T_=class extends gj.MetricReader{constructor(t){var r,n,i,s;if(super({aggregationSelector:(r=t.exporter.selectAggregation)===null||r===void 0?void 0:r.bind(t.exporter),aggregationTemporalitySelector:(n=t.exporter.selectAggregationTemporality)===null||n===void 0?void 0:n.bind(t.exporter),metricProducers:t.metricProducers}),t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=(i=t.exportIntervalMillis)!==null&&i!==void 0?i:6e4,this._exportTimeout=(s=t.exportTimeoutMillis)!==null&&s!==void 0?s:3e4,this._exporter=t.exporter}async _runOnce(){try{await(0,jR.callWithTimeout)(this._doRun(),this._exportTimeout)}catch(t){if(t instanceof jR.TimeoutError){kR.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);return}(0,mc.globalErrorHandler)(t)}}async _doRun(){var t,r;let{resourceMetrics:n,errors:i}=await this.collect({timeoutMillis:this._exportTimeout});i.length>0&&kR.diag.error("PeriodicExportingMetricReader: metrics collection errors",...i);let s=async()=>{let o=await mc.internal._export(this._exporter,n);if(o.code!==mc.ExportResultCode.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${o.error})`)};n.resource.asyncAttributesPending?(r=(t=n.resource).waitForAsyncAttributes)===null||r===void 0||r.call(t).then(s,o=>mj.diag.debug("Error while resolving async portion of resource: ",o)):await s()}onInitialized(){this._interval=setInterval(()=>{this._runOnce()},this._exportInterval),(0,mc.unrefTimer)(this._interval)}async onForceFlush(){await this._runOnce(),await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this._exporter.shutdown()}};Ec.PeriodicExportingMetricReader=T_});var HR=d(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.InMemoryMetricExporter=void 0;var qR=ee(),y_=class{constructor(t){this._shutdown=!1,this._metrics=[],this._aggregationTemporality=t}export(t,r){if(this._shutdown){setTimeout(()=>r({code:qR.ExportResultCode.FAILED}),0);return}this._metrics.push(t),setTimeout(()=>r({code:qR.ExportResultCode.SUCCESS}),0)}getMetrics(){return this._metrics}forceFlush(){return Promise.resolve()}reset(){this._metrics=[]}selectAggregationTemporality(t){return this._aggregationTemporality}shutdown(){return this._shutdown=!0,Promise.resolve()}};Sc.InMemoryMetricExporter=y_});var VR=d(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.ConsoleMetricExporter=void 0;var $R=ee(),Ej=E_(),b_=class e{constructor(t){var r;this._shutdown=!1,this._temporalitySelector=(r=t?.temporalitySelector)!==null&&r!==void 0?r:Ej.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR}export(t,r){if(this._shutdown){setImmediate(r,{code:$R.ExportResultCode.FAILED});return}return e._sendMetrics(t,r)}forceFlush(){return Promise.resolve()}selectAggregationTemporality(t){return this._temporalitySelector(t)}shutdown(){return this._shutdown=!0,Promise.resolve()}static _sendMetrics(t,r){for(let n of t.scopeMetrics)for(let i of n.metrics)console.dir({descriptor:i.descriptor,dataPointType:i.dataPointType,dataPoints:i.dataPoints});r({code:$R.ExportResultCode.SUCCESS})}};Ac.ConsoleMetricExporter=b_});var WR=d(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.ViewRegistry=void 0;var R_=class{constructor(){this._registeredViews=[]}addView(t){this._registeredViews.push(t)}findViews(t,r){return this._registeredViews.filter(i=>this._matchInstrument(i.instrumentSelector,t)&&this._matchMeter(i.meterSelector,r))}_matchInstrument(t,r){return(t.getType()===void 0||r.type===t.getType())&&t.getNameFilter().match(r.name)&&t.getUnitFilter().match(r.unit)}_matchMeter(t,r){return t.getNameFilter().match(r.name)&&(r.version===void 0||t.getVersionFilter().match(r.version))&&(r.schemaUrl===void 0||t.getSchemaUrlFilter().match(r.schemaUrl))}};Tc.ViewRegistry=R_});var yc=d(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.isObservableInstrument=me.ObservableUpDownCounterInstrument=me.ObservableGaugeInstrument=me.ObservableCounterInstrument=me.ObservableInstrument=me.HistogramInstrument=me.CounterInstrument=me.UpDownCounterInstrument=me.SyncInstrument=void 0;var si=N(),Sj=ee(),oi=class{constructor(t,r){this._writableMetricStorage=t,this._descriptor=r}_record(t,r={},n=si.context.active()){if(typeof t!="number"){si.diag.warn(`non-number value provided to metric ${this._descriptor.name}: ${t}`);return}this._descriptor.valueType===si.ValueType.INT&&!Number.isInteger(t)&&(si.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t),!Number.isInteger(t))||this._writableMetricStorage.record(t,r,n,(0,Sj.millisToHrTime)(Date.now()))}};me.SyncInstrument=oi;var v_=class extends oi{add(t,r,n){this._record(t,r,n)}};me.UpDownCounterInstrument=v_;var O_=class extends oi{add(t,r,n){if(t<0){si.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};me.CounterInstrument=O_;var P_=class extends oi{record(t,r,n){if(t<0){si.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};me.HistogramInstrument=P_;var qr=class{constructor(t,r,n){this._observableRegistry=n,this._descriptor=t,this._metricStorages=r}addCallback(t){this._observableRegistry.addCallback(t,this)}removeCallback(t){this._observableRegistry.removeCallback(t,this)}};me.ObservableInstrument=qr;var C_=class extends qr{};me.ObservableCounterInstrument=C_;var I_=class extends qr{};me.ObservableGaugeInstrument=I_;var w_=class extends qr{};me.ObservableUpDownCounterInstrument=w_;function Aj(e){return e instanceof qr}me.isObservableInstrument=Aj});var YR=d(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.Meter=void 0;var ut=Gt(),ai=yc(),N_=class{constructor(t){this._meterSharedState=t}createHistogram(t,r){let n=(0,ut.createInstrumentDescriptor)(t,ut.InstrumentType.HISTOGRAM,r),i=this._meterSharedState.registerMetricStorage(n);return new ai.HistogramInstrument(i,n)}createCounter(t,r){let n=(0,ut.createInstrumentDescriptor)(t,ut.InstrumentType.COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new ai.CounterInstrument(i,n)}createUpDownCounter(t,r){let n=(0,ut.createInstrumentDescriptor)(t,ut.InstrumentType.UP_DOWN_COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new ai.UpDownCounterInstrument(i,n)}createObservableGauge(t,r){let n=(0,ut.createInstrumentDescriptor)(t,ut.InstrumentType.OBSERVABLE_GAUGE,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ai.ObservableGaugeInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableCounter(t,r){let n=(0,ut.createInstrumentDescriptor)(t,ut.InstrumentType.OBSERVABLE_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ai.ObservableCounterInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(t,r){let n=(0,ut.createInstrumentDescriptor)(t,ut.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ai.ObservableUpDownCounterInstrument(n,i,this._meterSharedState.observableRegistry)}addBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.addBatchCallback(t,r)}removeBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.removeBatchCallback(t,r)}};bc.Meter=N_});var L_=d(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.MetricStorage=void 0;var Tj=Gt(),x_=class{constructor(t){this._instrumentDescriptor=t}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(t){this._instrumentDescriptor=(0,Tj.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})}};Rc.MetricStorage=x_});var As=d(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.AttributeHashMap=ui.HashMap=void 0;var yj=Nt(),vc=class{constructor(t){this._hash=t,this._valueMap=new Map,this._keyMap=new Map}get(t,r){return r??(r=this._hash(t)),this._valueMap.get(r)}getOrDefault(t,r){let n=this._hash(t);if(this._valueMap.has(n))return this._valueMap.get(n);let i=r();return this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,i),i}set(t,r,n){n??(n=this._hash(t)),this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,r)}has(t,r){return r??(r=this._hash(t)),this._valueMap.has(r)}*keys(){let t=this._keyMap.entries(),r=t.next();for(;r.done!==!0;)yield[r.value[1],r.value[0]],r=t.next()}*entries(){let t=this._valueMap.entries(),r=t.next();for(;r.done!==!0;)yield[this._keyMap.get(r.value[0]),r.value[1],r.value[0]],r=t.next()}get size(){return this._valueMap.size}};ui.HashMap=vc;var M_=class extends vc{constructor(){super(yj.hashAttributes)}};ui.AttributeHashMap=M_});var B_=d(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.DeltaMetricProcessor=void 0;var D_=As(),F_=class{constructor(t){this._aggregator=t,this._activeCollectionStorage=new D_.AttributeHashMap,this._cumulativeMemoStorage=new D_.AttributeHashMap}record(t,r,n,i){let s=this._activeCollectionStorage.getOrDefault(r,()=>this._aggregator.createAccumulation(i));s?.record(t)}batchCumulate(t,r){Array.from(t.entries()).forEach(([n,i,s])=>{let o=this._aggregator.createAccumulation(r);o?.record(i);let a=o;if(this._cumulativeMemoStorage.has(n,s)){let u=this._cumulativeMemoStorage.get(n,s);a=this._aggregator.diff(u,o)}if(this._activeCollectionStorage.has(n,s)){let u=this._activeCollectionStorage.get(n,s);a=this._aggregator.merge(u,a)}this._cumulativeMemoStorage.set(n,o,s),this._activeCollectionStorage.set(n,a,s)})}collect(){let t=this._activeCollectionStorage;return this._activeCollectionStorage=new D_.AttributeHashMap,t}};Oc.DeltaMetricProcessor=F_});var k_=d(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.TemporalMetricProcessor=void 0;var bj=ec(),Rj=As(),U_=class e{constructor(t,r){this._aggregator=t,this._unreportedAccumulations=new Map,this._reportHistory=new Map,r.forEach(n=>{this._unreportedAccumulations.set(n,[])})}buildMetrics(t,r,n,i){this._stashAccumulations(n);let s=this._getMergedUnreportedAccumulations(t),o=s,a;if(this._reportHistory.has(t)){let c=this._reportHistory.get(t),l=c.collectionTime;a=c.aggregationTemporality,a===bj.AggregationTemporality.CUMULATIVE?o=e.merge(c.accumulations,s,this._aggregator):o=e.calibrateStartTime(c.accumulations,s,l)}else a=t.selectAggregationTemporality(r.type);this._reportHistory.set(t,{accumulations:o,collectionTime:i,aggregationTemporality:a});let u=vj(o);if(u.length!==0)return this._aggregator.toMetricData(r,a,u,i)}_stashAccumulations(t){let r=this._unreportedAccumulations.keys();for(let n of r){let i=this._unreportedAccumulations.get(n);i===void 0&&(i=[],this._unreportedAccumulations.set(n,i)),i.push(t)}}_getMergedUnreportedAccumulations(t){let r=new Rj.AttributeHashMap,n=this._unreportedAccumulations.get(t);if(this._unreportedAccumulations.set(t,[]),n===void 0)return r;for(let i of n)r=e.merge(r,i,this._aggregator);return r}static merge(t,r,n){let i=t,s=r.entries(),o=s.next();for(;o.done!==!0;){let[a,u,c]=o.value;if(t.has(a,c)){let l=t.get(a,c),p=n.merge(l,u);i.set(a,p,c)}else i.set(a,u,c);o=s.next()}return i}static calibrateStartTime(t,r,n){for(let[i,s]of t.keys()){let o=r.get(i,s);o?.setStartTime(n)}return r}};Pc.TemporalMetricProcessor=U_;function vj(e){return Array.from(e.entries())}});var KR=d(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.AsyncMetricStorage=void 0;var Oj=L_(),Pj=B_(),Cj=k_(),Ij=As(),j_=class extends Oj.MetricStorage{constructor(t,r,n,i){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new Pj.DeltaMetricProcessor(r),this._temporalMetricStorage=new Cj.TemporalMetricProcessor(r,i)}record(t,r){let n=new Ij.AttributeHashMap;Array.from(t.entries()).forEach(([i,s])=>{n.set(this._attributesProcessor.process(i),s)}),this._deltaMetricStorage.batchCumulate(n,r)}collect(t,r){let n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,r)}};Cc.AsyncMetricStorage=j_});var JR=d(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.getConflictResolutionRecipe=We.getDescriptionResolutionRecipe=We.getTypeConflictResolutionRecipe=We.getUnitConflictResolutionRecipe=We.getValueTypeConflictResolutionRecipe=We.getIncompatibilityDetails=void 0;function wj(e,t){let r="";return e.unit!==t.unit&&(r+=`	- Unit '${e.unit}' does not match '${t.unit}'
`),e.type!==t.type&&(r+=`	- Type '${e.type}' does not match '${t.type}'
`),e.valueType!==t.valueType&&(r+=`	- Value Type '${e.valueType}' does not match '${t.valueType}'
`),e.description!==t.description&&(r+=`	- Description '${e.description}' does not match '${t.description}'
`),r}We.getIncompatibilityDetails=wj;function XR(e,t){return`	- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}We.getValueTypeConflictResolutionRecipe=XR;function zR(e,t){return`	- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}We.getUnitConflictResolutionRecipe=zR;function QR(e,t){let r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}We.getTypeConflictResolutionRecipe=QR;function ZR(e,t){let r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'
    	- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}
    	- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}We.getDescriptionResolutionRecipe=ZR;function Nj(e,t){return e.valueType!==t.valueType?XR(e,t):e.unit!==t.unit?zR(e,t):e.type!==t.type?QR(e,t):e.description!==t.description?ZR(e,t):""}We.getConflictResolutionRecipe=Nj});var tv=d(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.MetricStorageRegistry=void 0;var xj=Gt(),ev=N(),Ic=JR(),G_=class e{constructor(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}static create(){return new e}getStorages(t){let r=[];for(let i of this._sharedRegistry.values())r=r.concat(i);let n=this._perCollectorRegistry.get(t);if(n!=null)for(let i of n.values())r=r.concat(i);return r}register(t){this._registerStorage(t,this._sharedRegistry)}registerForCollector(t,r){let n=this._perCollectorRegistry.get(t);n==null&&(n=new Map,this._perCollectorRegistry.set(t,n)),this._registerStorage(r,n)}findOrUpdateCompatibleStorage(t){let r=this._sharedRegistry.get(t.name);return r===void 0?null:this._findOrUpdateCompatibleStorage(t,r)}findOrUpdateCompatibleCollectorStorage(t,r){let n=this._perCollectorRegistry.get(t);if(n===void 0)return null;let i=n.get(r.name);return i===void 0?null:this._findOrUpdateCompatibleStorage(r,i)}_registerStorage(t,r){let n=t.getInstrumentDescriptor(),i=r.get(n.name);if(i===void 0){r.set(n.name,[t]);return}i.push(t)}_findOrUpdateCompatibleStorage(t,r){let n=null;for(let i of r){let s=i.getInstrumentDescriptor();(0,xj.isDescriptorCompatibleWith)(s,t)?(s.description!==t.description&&(t.description.length>s.description.length&&i.updateDescription(t.description),ev.diag.warn("A view or instrument with the name ",t.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,(0,Ic.getIncompatibilityDetails)(s,t),`The longer description will be used.
To resolve the conflict:`,(0,Ic.getConflictResolutionRecipe)(s,t))),n=i):ev.diag.warn("A view or instrument with the name ",t.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,(0,Ic.getIncompatibilityDetails)(s,t),`To resolve the conflict:
`,(0,Ic.getConflictResolutionRecipe)(s,t))}return n}};wc.MetricStorageRegistry=G_});var rv=d(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.MultiMetricStorage=void 0;var q_=class{constructor(t){this._backingStorages=t}record(t,r,n,i){this._backingStorages.forEach(s=>{s.record(t,r,n,i)})}};Nc.MultiMetricStorage=q_});var iv=d(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.BatchObservableResultImpl=li.ObservableResultImpl=void 0;var ci=N(),nv=As(),Lj=yc(),H_=class{constructor(t,r){this._instrumentName=t,this._valueType=r,this._buffer=new nv.AttributeHashMap}observe(t,r={}){if(typeof t!="number"){ci.diag.warn(`non-number value provided to metric ${this._instrumentName}: ${t}`);return}this._valueType===ci.ValueType.INT&&!Number.isInteger(t)&&(ci.diag.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`),t=Math.trunc(t),!Number.isInteger(t))||this._buffer.set(r,t)}};li.ObservableResultImpl=H_;var $_=class{constructor(){this._buffer=new Map}observe(t,r,n={}){if(!(0,Lj.isObservableInstrument)(t))return;let i=this._buffer.get(t);if(i==null&&(i=new nv.AttributeHashMap,this._buffer.set(t,i)),typeof r!="number"){ci.diag.warn(`non-number value provided to metric ${t._descriptor.name}: ${r}`);return}t._descriptor.valueType===ci.ValueType.INT&&!Number.isInteger(r)&&(ci.diag.warn(`INT value type cannot accept a floating-point value for ${t._descriptor.name}, ignoring the fractional digits.`),r=Math.trunc(r),!Number.isInteger(r))||i.set(n,r)}};li.BatchObservableResultImpl=$_});var av=d(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.ObservableRegistry=void 0;var Mj=N(),sv=yc(),ov=iv(),Ts=Nt(),V_=class{constructor(){this._callbacks=[],this._batchCallbacks=[]}addCallback(t,r){this._findCallback(t,r)>=0||this._callbacks.push({callback:t,instrument:r})}removeCallback(t,r){let n=this._findCallback(t,r);n<0||this._callbacks.splice(n,1)}addBatchCallback(t,r){let n=new Set(r.filter(sv.isObservableInstrument));if(n.size===0){Mj.diag.error("BatchObservableCallback is not associated with valid instruments",r);return}this._findBatchCallback(t,n)>=0||this._batchCallbacks.push({callback:t,instruments:n})}removeBatchCallback(t,r){let n=new Set(r.filter(sv.isObservableInstrument)),i=this._findBatchCallback(t,n);i<0||this._batchCallbacks.splice(i,1)}async observe(t,r){let n=this._observeCallbacks(t,r),i=this._observeBatchCallbacks(t,r);return(await(0,Ts.PromiseAllSettled)([...n,...i])).filter(Ts.isPromiseAllSettledRejectionResult).map(a=>a.reason)}_observeCallbacks(t,r){return this._callbacks.map(async({callback:n,instrument:i})=>{let s=new ov.ObservableResultImpl(i._descriptor.name,i._descriptor.valueType),o=Promise.resolve(n(s));r!=null&&(o=(0,Ts.callWithTimeout)(o,r)),await o,i._metricStorages.forEach(a=>{a.record(s._buffer,t)})})}_observeBatchCallbacks(t,r){return this._batchCallbacks.map(async({callback:n,instruments:i})=>{let s=new ov.BatchObservableResultImpl,o=Promise.resolve(n(s));r!=null&&(o=(0,Ts.callWithTimeout)(o,r)),await o,i.forEach(a=>{let u=s._buffer.get(a);u!=null&&a._metricStorages.forEach(c=>{c.record(u,t)})})})}_findCallback(t,r){return this._callbacks.findIndex(n=>n.callback===t&&n.instrument===r)}_findBatchCallback(t,r){return this._batchCallbacks.findIndex(n=>n.callback===t&&(0,Ts.setEquals)(n.instruments,r))}};xc.ObservableRegistry=V_});var uv=d(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.SyncMetricStorage=void 0;var Dj=L_(),Fj=B_(),Bj=k_(),W_=class extends Dj.MetricStorage{constructor(t,r,n,i){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new Fj.DeltaMetricProcessor(r),this._temporalMetricStorage=new Bj.TemporalMetricProcessor(r,i)}record(t,r,n,i){r=this._attributesProcessor.process(r,n),this._deltaMetricStorage.record(t,r,n,i)}collect(t,r){let n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,r)}};Lc.SyncMetricStorage=W_});var K_=d(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.FilteringAttributesProcessor=ur.NoopAttributesProcessor=ur.AttributesProcessor=void 0;var ys=class{static Noop(){return Uj}};ur.AttributesProcessor=ys;var Mc=class extends ys{process(t,r){return t}};ur.NoopAttributesProcessor=Mc;var Y_=class extends ys{constructor(t){super(),this._allowedAttributeNames=t}process(t,r){let n={};return Object.keys(t).filter(i=>this._allowedAttributeNames.includes(i)).forEach(i=>n[i]=t[i]),n}};ur.FilteringAttributesProcessor=Y_;var Uj=new Mc});var cv=d(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.MeterSharedState=void 0;var kj=Gt(),jj=YR(),Gj=Nt(),qj=KR(),Hj=tv(),$j=rv(),Vj=av(),Wj=uv(),Yj=K_(),X_=class{constructor(t,r){this._meterProviderSharedState=t,this._instrumentationScope=r,this.metricStorageRegistry=new Hj.MetricStorageRegistry,this.observableRegistry=new Vj.ObservableRegistry,this.meter=new jj.Meter(this)}registerMetricStorage(t){let r=this._registerMetricStorage(t,Wj.SyncMetricStorage);return r.length===1?r[0]:new $j.MultiMetricStorage(r)}registerAsyncMetricStorage(t){return this._registerMetricStorage(t,qj.AsyncMetricStorage)}async collect(t,r,n){let i=await this.observableRegistry.observe(r,n?.timeoutMillis),s=this.metricStorageRegistry.getStorages(t);if(s.length===0)return null;let o=s.map(a=>a.collect(t,r)).filter(Gj.isNotNullish);return o.length===0?{errors:i}:{scopeMetrics:{scope:this._instrumentationScope,metrics:o},errors:i}}_registerMetricStorage(t,r){let i=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(s=>{let o=(0,kj.createInstrumentDescriptorWithView)(s,t),a=this.metricStorageRegistry.findOrUpdateCompatibleStorage(o);if(a!=null)return a;let u=s.aggregation.createAggregator(o),c=new r(o,u,s.attributesProcessor,this._meterProviderSharedState.metricCollectors);return this.metricStorageRegistry.register(c),c});if(i.length===0){let o=this._meterProviderSharedState.selectAggregations(t.type).map(([a,u])=>{let c=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(a,t);if(c!=null)return c;let l=u.createAggregator(t),p=new r(t,l,Yj.AttributesProcessor.Noop(),[a]);return this.metricStorageRegistry.registerForCollector(a,p),p});i=i.concat(o)}return i}};Dc.MeterSharedState=X_});var lv=d(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.MeterProviderSharedState=void 0;var Kj=Nt(),Xj=WR(),zj=cv(),z_=class{constructor(t){this.resource=t,this.viewRegistry=new Xj.ViewRegistry,this.metricCollectors=[],this.meterSharedStates=new Map}getMeterSharedState(t){let r=(0,Kj.instrumentationScopeId)(t),n=this.meterSharedStates.get(r);return n==null&&(n=new zj.MeterSharedState(this,t),this.meterSharedStates.set(r,n)),n}selectAggregations(t){let r=[];for(let n of this.metricCollectors)r.push([n,n.selectAggregation(t)]);return r}};Fc.MeterProviderSharedState=z_});var dv=d(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.MetricCollector=void 0;var Qj=ee(),Q_=class{constructor(t,r){this._sharedState=t,this._metricReader=r}async collect(t){let r=(0,Qj.millisToHrTime)(Date.now()),n=[],i=[],s=Array.from(this._sharedState.meterSharedStates.values()).map(async o=>{let a=await o.collect(this,r,t);a?.scopeMetrics!=null&&n.push(a.scopeMetrics),a?.errors!=null&&i.push(...a.errors)});return await Promise.all(s),{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:i}}async forceFlush(t){await this._metricReader.forceFlush(t)}async shutdown(t){await this._metricReader.shutdown(t)}selectAggregationTemporality(t){return this._metricReader.selectAggregationTemporality(t)}selectAggregation(t){return this._metricReader.selectAggregation(t)}};Bc.MetricCollector=Q_});var fv=d(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.MeterProvider=void 0;var Uc=N(),pv=Mn(),Zj=lv(),Jj=dv(),Z_=class{constructor(t){var r;this._shutdown=!1;let n=pv.Resource.default().merge((r=t?.resource)!==null&&r!==void 0?r:pv.Resource.empty());if(this._sharedState=new Zj.MeterProviderSharedState(n),t?.views!=null&&t.views.length>0)for(let i of t.views)this._sharedState.viewRegistry.addView(i);if(t?.readers!=null&&t.readers.length>0)for(let i of t.readers)this.addMetricReader(i)}getMeter(t,r="",n={}){return this._shutdown?(Uc.diag.warn("A shutdown MeterProvider cannot provide a Meter"),(0,Uc.createNoopMeter)()):this._sharedState.getMeterSharedState({name:t,version:r,schemaUrl:n.schemaUrl}).meter}addMetricReader(t){let r=new Jj.MetricCollector(this._sharedState,t);t.setMetricProducer(r),this._sharedState.metricCollectors.push(r)}async shutdown(t){if(this._shutdown){Uc.diag.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map(r=>r.shutdown(t)))}async forceFlush(t){if(this._shutdown){Uc.diag.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map(r=>r.forceFlush(t)))}};kc.MeterProvider=Z_});var jc=d(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.ExactPredicate=di.PatternPredicate=void 0;var eG=/[\^$\\.+?()[\]{}|]/g,J_=class e{constructor(t){t==="*"?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(e.escapePattern(t)))}match(t){return this._matchAll?!0:this._regexp.test(t)}static escapePattern(t){return`^${t.replace(eG,"\\$&").replace("*",".*")}$`}static hasWildcard(t){return t.includes("*")}};di.PatternPredicate=J_;var eg=class{constructor(t){this._matchAll=t===void 0,this._pattern=t}match(t){return!!(this._matchAll||t===this._pattern)}};di.ExactPredicate=eg});var _v=d(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.InstrumentSelector=void 0;var hv=jc(),tg=class{constructor(t){var r;this._nameFilter=new hv.PatternPredicate((r=t?.name)!==null&&r!==void 0?r:"*"),this._type=t?.type,this._unitFilter=new hv.ExactPredicate(t?.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}};Gc.InstrumentSelector=tg});var gv=d(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.MeterSelector=void 0;var rg=jc(),ng=class{constructor(t){this._nameFilter=new rg.ExactPredicate(t?.name),this._versionFilter=new rg.ExactPredicate(t?.version),this._schemaUrlFilter=new rg.ExactPredicate(t?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}};qc.MeterSelector=ng});var Ev=d(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.View=void 0;var tG=jc(),mv=K_(),rG=_v(),nG=gv(),iG=hc();function sG(e){return e.instrumentName==null&&e.instrumentType==null&&e.instrumentUnit==null&&e.meterName==null&&e.meterVersion==null&&e.meterSchemaUrl==null}var ig=class{constructor(t){var r;if(sG(t))throw new Error("Cannot create view with no selector arguments supplied");if(t.name!=null&&(t?.instrumentName==null||tG.PatternPredicate.hasWildcard(t.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");t.attributeKeys!=null?this.attributesProcessor=new mv.FilteringAttributesProcessor(t.attributeKeys):this.attributesProcessor=mv.AttributesProcessor.Noop(),this.name=t.name,this.description=t.description,this.aggregation=(r=t.aggregation)!==null&&r!==void 0?r:iG.Aggregation.Default(),this.instrumentSelector=new rG.InstrumentSelector({name:t.instrumentName,type:t.instrumentType,unit:t.instrumentUnit}),this.meterSelector=new nG.MeterSelector({name:t.meterName,version:t.meterVersion,schemaUrl:t.meterSchemaUrl})}};Hc.View=ig});var Sv=d($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.TimeoutError=$.View=$.Aggregation=$.SumAggregation=$.LastValueAggregation=$.HistogramAggregation=$.DropAggregation=$.ExponentialHistogramAggregation=$.ExplicitBucketHistogramAggregation=$.DefaultAggregation=$.MeterProvider=$.InstrumentType=$.ConsoleMetricExporter=$.InMemoryMetricExporter=$.PeriodicExportingMetricReader=$.MetricReader=$.DataPointType=$.AggregationTemporality=void 0;var oG=ec();Object.defineProperty($,"AggregationTemporality",{enumerable:!0,get:function(){return oG.AggregationTemporality}});var aG=Vn();Object.defineProperty($,"DataPointType",{enumerable:!0,get:function(){return aG.DataPointType}});var uG=A_();Object.defineProperty($,"MetricReader",{enumerable:!0,get:function(){return uG.MetricReader}});var cG=GR();Object.defineProperty($,"PeriodicExportingMetricReader",{enumerable:!0,get:function(){return cG.PeriodicExportingMetricReader}});var lG=HR();Object.defineProperty($,"InMemoryMetricExporter",{enumerable:!0,get:function(){return lG.InMemoryMetricExporter}});var dG=VR();Object.defineProperty($,"ConsoleMetricExporter",{enumerable:!0,get:function(){return dG.ConsoleMetricExporter}});var pG=Gt();Object.defineProperty($,"InstrumentType",{enumerable:!0,get:function(){return pG.InstrumentType}});var fG=fv();Object.defineProperty($,"MeterProvider",{enumerable:!0,get:function(){return fG.MeterProvider}});var cr=hc();Object.defineProperty($,"DefaultAggregation",{enumerable:!0,get:function(){return cr.DefaultAggregation}});Object.defineProperty($,"ExplicitBucketHistogramAggregation",{enumerable:!0,get:function(){return cr.ExplicitBucketHistogramAggregation}});Object.defineProperty($,"ExponentialHistogramAggregation",{enumerable:!0,get:function(){return cr.ExponentialHistogramAggregation}});Object.defineProperty($,"DropAggregation",{enumerable:!0,get:function(){return cr.DropAggregation}});Object.defineProperty($,"HistogramAggregation",{enumerable:!0,get:function(){return cr.HistogramAggregation}});Object.defineProperty($,"LastValueAggregation",{enumerable:!0,get:function(){return cr.LastValueAggregation}});Object.defineProperty($,"SumAggregation",{enumerable:!0,get:function(){return cr.SumAggregation}});Object.defineProperty($,"Aggregation",{enumerable:!0,get:function(){return cr.Aggregation}});var hG=Ev();Object.defineProperty($,"View",{enumerable:!0,get:function(){return hG.View}});var _G=Nt();Object.defineProperty($,"TimeoutError",{enumerable:!0,get:function(){return _G.TimeoutError}})});var Rv=d(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.toMetric=lr.toScopeMetrics=lr.toResourceMetrics=void 0;var Av=N(),pi=Sv(),$c=ds(),gG=cs();function mG(e,t){let r=(0,gG.getOtlpEncoder)(t);return{resource:{attributes:(0,$c.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:yv(e.scopeMetrics,r)}}lr.toResourceMetrics=mG;function yv(e,t){return Array.from(e.map(r=>({scope:{name:r.scope.name,version:r.scope.version},metrics:r.metrics.map(n=>bv(n,t)),schemaUrl:r.scope.schemaUrl})))}lr.toScopeMetrics=yv;function bv(e,t){let r={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},n=TG(e.aggregationTemporality);switch(e.dataPointType){case pi.DataPointType.SUM:r.sum={aggregationTemporality:n,isMonotonic:e.isMonotonic,dataPoints:Tv(e,t)};break;case pi.DataPointType.GAUGE:r.gauge={dataPoints:Tv(e,t)};break;case pi.DataPointType.HISTOGRAM:r.histogram={aggregationTemporality:n,dataPoints:SG(e,t)};break;case pi.DataPointType.EXPONENTIAL_HISTOGRAM:r.exponentialHistogram={aggregationTemporality:n,dataPoints:AG(e,t)};break}return r}lr.toMetric=bv;function EG(e,t,r){let n={attributes:(0,$c.toAttributes)(e.attributes),startTimeUnixNano:r.encodeHrTime(e.startTime),timeUnixNano:r.encodeHrTime(e.endTime)};switch(t){case Av.ValueType.INT:n.asInt=e.value;break;case Av.ValueType.DOUBLE:n.asDouble=e.value;break}return n}function Tv(e,t){return e.dataPoints.map(r=>EG(r,e.descriptor.valueType,t))}function SG(e,t){return e.dataPoints.map(r=>{let n=r.value;return{attributes:(0,$c.toAttributes)(r.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)}})}function AG(e,t){return e.dataPoints.map(r=>{let n=r.value;return{attributes:(0,$c.toAttributes)(r.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)}})}function TG(e){switch(e){case pi.AggregationTemporality.DELTA:return 1;case pi.AggregationTemporality.CUMULATIVE:return 2}}});var vv=d(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.createExportMetricsServiceRequest=void 0;var yG=Rv();function bG(e,t){return{resourceMetrics:e.map(r=>(0,yG.toResourceMetrics)(r,t))}}Vc.createExportMetricsServiceRequest=bG});var Pv=d(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.toLogAttributes=fi.createExportLogsServiceRequest=void 0;var RG=cs(),sg=ds();function vG(e,t){let r=(0,RG.getOtlpEncoder)(t);return{resourceLogs:PG(e,r)}}fi.createExportLogsServiceRequest=vG;function OG(e){let t=new Map;for(let r of e){let{resource:n,instrumentationScope:{name:i,version:s="",schemaUrl:o=""}}=r,a=t.get(n);a||(a=new Map,t.set(n,a));let u=`${i}@${s}:${o}`,c=a.get(u);c||(c=[],a.set(u,c)),c.push(r)}return t}function PG(e,t){let r=OG(e);return Array.from(r,([n,i])=>({resource:{attributes:(0,sg.toAttributes)(n.attributes),droppedAttributesCount:0},scopeLogs:Array.from(i,([,s])=>{let{instrumentationScope:{name:o,version:a,schemaUrl:u}}=s[0];return{scope:{name:o,version:a},logRecords:s.map(c=>CG(c,t)),schemaUrl:u}}),schemaUrl:void 0}))}function CG(e,t){var r,n,i;return{timeUnixNano:t.encodeHrTime(e.hrTime),observedTimeUnixNano:t.encodeHrTime(e.hrTimeObserved),severityNumber:e.severityNumber,severityText:e.severityText,body:(0,sg.toAnyValue)(e.body),attributes:Ov(e.attributes),droppedAttributesCount:e.droppedAttributesCount,flags:(r=e.spanContext)===null||r===void 0?void 0:r.traceFlags,traceId:t.encodeOptionalSpanContext((n=e.spanContext)===null||n===void 0?void 0:n.traceId),spanId:t.encodeOptionalSpanContext((i=e.spanContext)===null||i===void 0?void 0:i.spanId)}}function Ov(e){return Object.keys(e).map(t=>(0,sg.toKeyValue)(t,e[t]))}fi.toLogAttributes=Ov});var Cv=d(be=>{"use strict";var IG=be&&be.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),hi=be&&be.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&IG(t,e,r)};Object.defineProperty(be,"__esModule",{value:!0});be.createExportLogsServiceRequest=be.createExportMetricsServiceRequest=be.createExportTraceServiceRequest=void 0;hi(Zb(),be);hi(cs(),be);hi(iR(),be);hi(oR(),be);hi(aR(),be);hi(cR(),be);var wG=fR();Object.defineProperty(be,"createExportTraceServiceRequest",{enumerable:!0,get:function(){return wG.createExportTraceServiceRequest}});var NG=vv();Object.defineProperty(be,"createExportMetricsServiceRequest",{enumerable:!0,get:function(){return NG.createExportMetricsServiceRequest}});var xG=Pv();Object.defineProperty(be,"createExportLogsServiceRequest",{enumerable:!0,get:function(){return xG.createExportLogsServiceRequest}})});var Iv=d(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.VERSION=void 0;Wc.VERSION="0.48.0"});var xv=d(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.OTLPTraceExporter=void 0;var _i=ee(),LG=Qh(),wv=Qh(),MG=Cv(),DG=Iv(),Nv="v1/traces",FG=`http://localhost:4318/${Nv}`,BG={"User-Agent":`OTel-OTLP-Exporter-JavaScript/${DG.VERSION}`},og=class extends LG.OTLPExporterNodeBase{constructor(t={}){super(t),this.headers=Object.assign(Object.assign(Object.assign(Object.assign({},this.headers),BG),_i.baggageUtils.parseKeyPairsIntoRecord((0,_i.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),t.headers)}convert(t){return(0,MG.createExportTraceServiceRequest)(t,{useHex:!0,useLongBits:!1})}getDefaultUrl(t){return typeof t.url=="string"?t.url:(0,_i.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,wv.appendRootPathToUrlIfNeeded)((0,_i.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,_i.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,wv.appendResourcePathToUrl)((0,_i.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,Nv):FG}};Yc.OTLPTraceExporter=og});var Lv=d(Hr=>{"use strict";var UG=Hr&&Hr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),kG=Hr&&Hr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&UG(t,e,r)};Object.defineProperty(Hr,"__esModule",{value:!0});kG(xv(),Hr)});var Mv=d($r=>{"use strict";var jG=$r&&$r.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),GG=$r&&$r.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&jG(t,e,r)};Object.defineProperty($r,"__esModule",{value:!0});GG(Lv(),$r)});var Dv=d(Vr=>{"use strict";var qG=Vr&&Vr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),HG=Vr&&Vr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qG(t,e,r)};Object.defineProperty(Vr,"__esModule",{value:!0});HG(Mv(),Vr)});var Wv=d(($Y,VG)=>{VG.exports=[{name:"Appcircle",constant:"APPCIRCLE",env:"AC_APPCIRCLE"},{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"TF_BUILD",pr:{BUILD_REASON:"PullRequest"}},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"Codefresh",constant:"CODEFRESH",env:"CF_BUILD_ID",pr:{any:["CF_PULL_REQUEST_NUMBER","CF_PULL_REQUEST_ID"]}},{name:"Codemagic",constant:"CODEMAGIC",env:"CM_BUILD_ID",pr:"CM_PULL_REQUEST"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"Expo Application Services",constant:"EAS",env:"EAS_BUILD"},{name:"Gerrit",constant:"GERRIT",env:"GERRIT_PROJECT"},{name:"GitHub Actions",constant:"GITHUB_ACTIONS",env:"GITHUB_ACTIONS",pr:{GITHUB_EVENT_NAME:"pull_request"}},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI",pr:"CI_MERGE_REQUEST_ID"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Google Cloud Build",constant:"GOOGLE_CLOUD_BUILD",env:"BUILDER_OUTPUT"},{name:"Harness CI",constant:"HARNESS",env:"HARNESS_BUILD_ID"},{name:"Heroku",constant:"HEROKU",env:{env:"NODE",includes:"/app/.heroku/node/bin/node"}},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"LayerCI",constant:"LAYERCI",env:"LAYERCI",pr:"LAYERCI_PULL_REQUEST"},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Nevercode",constant:"NEVERCODE",env:"NEVERCODE",pr:{env:"NEVERCODE_PULL_REQUEST",ne:"false"}},{name:"ReleaseHub",constant:"RELEASEHUB",env:"RELEASE_BUILD_ID"},{name:"Render",constant:"RENDER",env:"RENDER",pr:{IS_PULL_REQUEST:"true"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Screwdriver",constant:"SCREWDRIVER",env:"SCREWDRIVER",pr:{env:"SD_PULL_REQUEST",ne:"false"}},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Sourcehut",constant:"SOURCEHUT",env:{CI_NAME:"sourcehut"}},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}},{name:"Vercel",constant:"VERCEL",env:{any:["NOW_BUILDER","VERCEL"]},pr:"VERCEL_GIT_PULL_REQUEST_ID"},{name:"Visual Studio App Center",constant:"APPCENTER",env:"APPCENTER_BUILD_ID"},{name:"Woodpecker",constant:"WOODPECKER",env:{CI:"woodpecker"},pr:{CI_BUILD_EVENT:"pull_request"}},{name:"Xcode Cloud",constant:"XCODE_CLOUD",env:"CI_XCODE_PROJECT",pr:"CI_PULL_REQUEST_NUMBER"},{name:"Xcode Server",constant:"XCODE_SERVER",env:"XCS"}]});var Xv=d(tt=>{"use strict";var Kv=Wv(),Te=process.env;Object.defineProperty(tt,"_vendors",{value:Kv.map(function(e){return e.constant})});tt.name=null;tt.isPR=null;Kv.forEach(function(e){let r=(Array.isArray(e.env)?e.env:[e.env]).every(function(n){return Yv(n)});if(tt[e.constant]=r,!!r)switch(tt.name=e.name,typeof e.pr){case"string":tt.isPR=!!Te[e.pr];break;case"object":"env"in e.pr?tt.isPR=e.pr.env in Te&&Te[e.pr.env]!==e.pr.ne:"any"in e.pr?tt.isPR=e.pr.any.some(function(n){return!!Te[n]}):tt.isPR=Yv(e.pr);break;default:tt.isPR=null}});tt.isCI=!!(Te.CI!=="false"&&(Te.BUILD_ID||Te.BUILD_NUMBER||Te.CI||Te.CI_APP_ID||Te.CI_BUILD_ID||Te.CI_BUILD_NUMBER||Te.CI_NAME||Te.CONTINUOUS_INTEGRATION||Te.RUN_ID||tt.name));function Yv(e){return typeof e=="string"?!!Te[e]:"env"in e?Te[e.env]&&Te[e.env].includes(e.includes):"any"in e?e.any.some(function(t){return!!Te[t]}):Object.keys(e).every(function(t){return Te[t]===e[t]})}});var Qv=d((WY,zv)=>{"use strict";zv.exports=Xv().isCI});var Jv=d((YY,ug)=>{"use strict";var WG=Object.prototype.hasOwnProperty,ke="~";function vs(){}Object.create&&(vs.prototype=Object.create(null),new vs().__proto__||(ke=!1));function YG(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Zv(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new YG(r,n||e,i),o=ke?ke+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function Kc(e,t){--e._eventsCount===0?e._events=new vs:delete e._events[t]}function De(){this._events=new vs,this._eventsCount=0}De.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)WG.call(r,n)&&t.push(ke?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};De.prototype.listeners=function(t){var r=ke?ke+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};De.prototype.listenerCount=function(t){var r=ke?ke+t:t,n=this._events[r];return n?n.fn?1:n.length:0};De.prototype.emit=function(t,r,n,i,s,o){var a=ke?ke+t:t;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,l,p;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(p=1,l=new Array(c-1);p<c;p++)l[p-1]=arguments[p];u.fn.apply(u.context,l)}else{var f=u.length,_;for(p=0;p<f;p++)switch(u[p].once&&this.removeListener(t,u[p].fn,void 0,!0),c){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,r);break;case 3:u[p].fn.call(u[p].context,r,n);break;case 4:u[p].fn.call(u[p].context,r,n,i);break;default:if(!l)for(_=1,l=new Array(c-1);_<c;_++)l[_-1]=arguments[_];u[p].fn.apply(u[p].context,l)}}return!0};De.prototype.on=function(t,r,n){return Zv(this,t,r,n,!1)};De.prototype.once=function(t,r,n){return Zv(this,t,r,n,!0)};De.prototype.removeListener=function(t,r,n,i){var s=ke?ke+t:t;if(!this._events[s])return this;if(!r)return Kc(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&Kc(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:Kc(this,s)}return this};De.prototype.removeAllListeners=function(t){var r;return t?(r=ke?ke+t:t,this._events[r]&&Kc(this,r)):(this._events=new vs,this._eventsCount=0),this};De.prototype.off=De.prototype.removeListener;De.prototype.addListener=De.prototype.on;De.prefixed=ke;De.EventEmitter=De;typeof ug<"u"&&(ug.exports=De)});var nO=d(gg=>{"use strict";var Xc=class{constructor(t){this.tasks=[],this.count=t}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let t=this.tasks.shift();if(t===void 0)throw"Unexpected undefined value in tasks list";t()}}acquire(){return new Promise((t,r)=>{var n=()=>{var i=!1;t(()=>{i||(i=!0,this.count++,this.sched())})};this.tasks.push(n),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))})}use(t){return this.acquire().then(r=>t().then(n=>(r(),n)).catch(n=>{throw r(),n}))}};gg.Semaphore=Xc;var _g=class extends Xc{constructor(){super(1)}};gg.Mutex=_g});var LO=d((zr,xO)=>{"use strict";var Ig=v("crypto");zr=xO.exports=Ds;function Ds(e,t){return t=wO(e,t),Nq(e,t)}zr.sha1=function(e){return Ds(e)};zr.keys=function(e){return Ds(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})};zr.MD5=function(e){return Ds(e,{algorithm:"md5",encoding:"hex"})};zr.keysMD5=function(e){return Ds(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var Ai=Ig.getHashes?Ig.getHashes().slice():["sha1","md5"];Ai.push("passthrough");var CO=["buffer","hex","binary","base64"];function wO(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=t.ignoreUnknown===!0,r.respectType=t.respectType!==!1,r.respectFunctionNames=t.respectFunctionNames!==!1,r.respectFunctionProperties=t.respectFunctionProperties!==!1,r.unorderedArrays=t.unorderedArrays===!0,r.unorderedSets=t.unorderedSets!==!1,r.unorderedObjects=t.unorderedObjects!==!1,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,typeof e>"u")throw new Error("Object argument required.");for(var n=0;n<Ai.length;++n)Ai[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=Ai[n]);if(Ai.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+Ai.join(", "));if(CO.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+CO.join(", "));return r}function IO(e){if(typeof e!="function")return!1;var t=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i;return t.exec(Function.prototype.toString.call(e))!=null}function Nq(e,t){var r;t.algorithm!=="passthrough"?r=Ig.createHash(t.algorithm):r=new NO,typeof r.write>"u"&&(r.write=r.update,r.end=r.update);var n=wg(t,r);if(n.dispatch(e),r.update||r.end(""),r.digest)return r.digest(t.encoding==="buffer"?void 0:t.encoding);var i=r.read();return t.encoding==="buffer"?i:i.toString(t.encoding)}zr.writeToStream=function(e,t,r){return typeof r>"u"&&(r=t,t={}),t=wO(e,t),wg(t,r).dispatch(e)};function wg(e,t,r){r=r||[];var n=function(i){return t.update?t.update(i,"utf8"):t.write(i,"utf8")};return{dispatch:function(i){e.replacer&&(i=e.replacer(i));var s=typeof i;return i===null&&(s="null"),this["_"+s](i)},_object:function(i){var s=/\[object (.*)\]/i,o=Object.prototype.toString.call(i),a=s.exec(o);a?a=a[1]:a="unknown:["+o+"]",a=a.toLowerCase();var u=null;if((u=r.indexOf(i))>=0)return this.dispatch("[CIRCULAR:"+u+"]");if(r.push(i),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(i))return n("buffer:"),n(i);if(a!=="object"&&a!=="function"&&a!=="asyncfunction")if(this["_"+a])this["_"+a](i);else{if(e.ignoreUnknown)return n("["+a+"]");throw new Error('Unknown object type "'+a+'"')}else{var c=Object.keys(i);e.unorderedObjects&&(c=c.sort()),e.respectType!==!1&&!IO(i)&&c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter(function(p){return!e.excludeKeys(p)})),n("object:"+c.length+":");var l=this;return c.forEach(function(p){l.dispatch(p),n(":"),e.excludeValues||l.dispatch(i[p]),n(",")})}},_array:function(i,s){s=typeof s<"u"?s:e.unorderedArrays!==!1;var o=this;if(n("array:"+i.length+":"),!s||i.length<=1)return i.forEach(function(c){return o.dispatch(c)});var a=[],u=i.map(function(c){var l=new NO,p=r.slice(),f=wg(e,l,p);return f.dispatch(c),a=a.concat(p.slice(r.length)),l.read().toString()});return r=r.concat(a),u.sort(),this._array(u,!1)},_date:function(i){return n("date:"+i.toJSON())},_symbol:function(i){return n("symbol:"+i.toString())},_error:function(i){return n("error:"+i.toString())},_boolean:function(i){return n("bool:"+i.toString())},_string:function(i){n("string:"+i.length+":"),n(i.toString())},_function:function(i){n("fn:"),IO(i)?this.dispatch("[native]"):this.dispatch(i.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),e.respectFunctionProperties&&this._object(i)},_number:function(i){return n("number:"+i.toString())},_xml:function(i){return n("xml:"+i.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(i){return n("regex:"+i.toString())},_uint8array:function(i){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return n("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return n("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return n("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return n("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return n("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return n("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return n("url:"+i.toString(),"utf8")},_map:function(i){n("map:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_set:function(i){n("set:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_file:function(i){return n("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return n("domwindow")},_bigint:function(i){return n("bigint:"+i.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function NO(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}});var Hq={};dP(Hq,{default:()=>qq});var Yr=v("@yarnpkg/cli"),Ue=v("@yarnpkg/core"),$v=v("@yarnpkg/libzip"),re=v("@yarnpkg/fslib"),_t=v("clipanion"),ag=K(v("path"));var Fg=v("fs"),Bg=async e=>{try{return(0,Fg.readFileSync)(e,"utf-8").split(`
`)}catch{return[]}};var Ug=v("path"),kg=({ignoreFile:e,cwd:t})=>(0,Ug.join)(t,e);var fA=K(dl());var np=K(v("node:process"),1),eA=K(v("node:fs"),1),mr=K(v("node:path"),1);var zs=v("node:events"),Xg=v("node:stream"),fl=v("node:stream/promises");function hl(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got \`${typeof e}\`.`);for(let i of e)zg(i);let t=e.some(({readableObjectMode:i})=>i),r=wP(e,t),n=new pl({objectMode:t,writableHighWaterMark:r,readableHighWaterMark:r});for(let i of e)n.add(i);return e.length===0&&n.end(),n}var wP=(e,t)=>{if(e.length===0)return 16384;let r=e.filter(({readableObjectMode:n})=>n===t).map(({readableHighWaterMark:n})=>n);return Math.max(...r)},pl=class extends Xg.PassThrough{#e=new Set([]);#n=new Set([]);#t;constructor(...t){super(...t),this.#t=NP(this,this.#e)}add(t){if(!this.#e.has(t)){if(zg(t),!this.writable)throw new TypeError("The merged stream has already ended.");this.#e.add(t),MP({passThroughStream:this,stream:t,streams:this.#e,ended:this.#n,onFinished:this.#t}),Xs(this,Zg),t.pipe(this,{end:!1})}}remove(t){if(!this.#e.has(t))throw new TypeError("Stream cannot be removed because it was not piped.");t.unpipe(this)}},NP=async(e,t)=>{Xs(e,Kg);let r=new AbortController;try{await Promise.race([xP(e,r),LP(e,t,r)])}finally{r.abort(),Xs(e,-Kg)}},xP=async(e,{signal:t})=>{try{await(0,fl.finished)(e,{signal:t,cleanup:!0})}catch{}},LP=async(e,t,{signal:r})=>{for await(let[n]of(0,zs.on)(e,"unpipe",{signal:r}))t.has(n)&&n.emit(Qg)},zg=e=>{if(typeof e?.pipe!="function")throw new TypeError(`Expected a readable stream, got: \`${typeof e}\`.`)},MP=async({passThroughStream:e,stream:t,streams:r,ended:n,onFinished:i})=>{try{let s=new AbortController;try{await Promise.race([i,DP({stream:t,streams:r,ended:n,abortController:s}),FP({passThroughStream:e,stream:t,streams:r,ended:n,abortController:s})])}finally{s.abort()}r.size===n.size&&e.writable&&e.end()}catch(s){s?.code==="ERR_STREAM_PREMATURE_CLOSE"?e.destroy():e.destroy(s)}},DP=async({stream:e,streams:t,ended:r,abortController:{signal:n}})=>{await(0,fl.finished)(e,{signal:n,cleanup:!0,readable:!0,writable:!1}),t.has(e)&&r.add(e)},FP=async({passThroughStream:e,stream:t,streams:r,ended:n,abortController:{signal:i}})=>{await(0,zs.once)(t,Qg,{signal:i}),r.delete(t),n.delete(t),Xs(e,-Zg)},Qg=Symbol("unpipe"),Xs=(e,t)=>{e.setMaxListeners(e.getMaxListeners()+t)},Kg=2,Zg=1;var cn=K(Jd(),1);var Oo=K(v("fs"),1);async function ep(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return(await Oo.promises[e](r))[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}function tp(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return Oo.default[e](r)[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}var hH=ep.bind(null,"stat","isFile"),kS=ep.bind(null,"stat","isDirectory"),_H=ep.bind(null,"lstat","isSymbolicLink"),gH=tp.bind(null,"statSync","isFile"),jS=tp.bind(null,"statSync","isDirectory"),mH=tp.bind(null,"lstatSync","isSymbolicLink");var GS=v("node:url");function Oi(e){return e instanceof URL?(0,GS.fileURLToPath)(e):e}var qS=K(v("node:process"),1),HS=K(v("node:fs"),1),$S=K(v("node:fs/promises"),1),gr=K(v("node:path"),1),rp=K(Jd(),1),VS=K(dl(),1);function un(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}var Pi=e=>e[0]==="!";var qN=["**/node_modules","**/flow-typed","**/coverage","**/.git"],WS={absolute:!0,dot:!0},YS="**/.gitignore",HN=(e,t)=>Pi(e)?"!"+gr.default.posix.join(t,e.slice(1)):gr.default.posix.join(t,e),$N=(e,t)=>{let r=un(gr.default.relative(t,gr.default.dirname(e.filePath)));return e.content.split(/\r?\n/).filter(n=>n&&!n.startsWith("#")).map(n=>HN(n,r))},VN=(e,t)=>{if(t=un(t),gr.default.isAbsolute(e)){if(un(e).startsWith(t))return gr.default.relative(t,e);throw new Error(`Path ${e} is not in cwd ${t}`)}return e},KS=(e,t)=>{let r=e.flatMap(i=>$N(i,t)),n=(0,VS.default)().add(r);return i=>(i=Oi(i),i=VN(i,t),i?n.ignores(un(i)):!1)},XS=(e={})=>({cwd:Oi(e.cwd)??qS.default.cwd(),suppressErrors:!!e.suppressErrors,deep:typeof e.deep=="number"?e.deep:Number.POSITIVE_INFINITY,ignore:[...e.ignore??[],...qN]}),zS=async(e,t)=>{let{cwd:r,suppressErrors:n,deep:i,ignore:s}=XS(t),o=await(0,rp.default)(e,{cwd:r,suppressErrors:n,deep:i,ignore:s,...WS}),a=await Promise.all(o.map(async u=>({filePath:u,content:await $S.default.readFile(u,"utf8")})));return KS(a,r)},QS=(e,t)=>{let{cwd:r,suppressErrors:n,deep:i,ignore:s}=XS(t),a=rp.default.sync(e,{cwd:r,suppressErrors:n,deep:i,ignore:s,...WS}).map(u=>({filePath:u,content:HS.default.readFileSync(u,"utf8")}));return KS(a,r)};var WN=e=>{if(e.some(t=>typeof t!="string"))throw new TypeError("Patterns must be a string or an array of strings")},tA=(e,t)=>{let r=Pi(e)?e.slice(1):e;return mr.default.isAbsolute(r)?r:mr.default.join(t,r)},rA=({directoryPath:e,files:t,extensions:r})=>{let n=r?.length>0?`.${r.length>1?`{${r.join(",")}}`:r[0]}`:"";return t?t.map(i=>mr.default.posix.join(e,`**/${mr.default.extname(i)?i:`${i}${n}`}`)):[mr.default.posix.join(e,`**${n?`/*${n}`:""}`)]},ZS=async(e,{cwd:t=np.default.cwd(),files:r,extensions:n}={})=>(await Promise.all(e.map(async s=>await kS(tA(s,t))?rA({directoryPath:s,files:r,extensions:n}):s))).flat(),JS=(e,{cwd:t=np.default.cwd(),files:r,extensions:n}={})=>e.flatMap(i=>jS(tA(i,t))?rA({directoryPath:i,files:r,extensions:n}):i),ip=e=>(e=[...new Set([e].flat())],WN(e),e),YN=e=>{if(!e)return;let t;try{t=eA.default.statSync(e)}catch{return}if(!t.isDirectory())throw new Error("The `cwd` option must be a path to a directory")},nA=(e={})=>(e={...e,ignore:e.ignore??[],expandDirectories:e.expandDirectories??!0,cwd:Oi(e.cwd)},YN(e.cwd),e),iA=e=>async(t,r)=>e(ip(t),nA(r)),Po=e=>(t,r)=>e(ip(t),nA(r)),sA=e=>{let{ignoreFiles:t,gitignore:r}=e,n=t?ip(t):[];return r&&n.push(YS),n},KN=async e=>{let t=sA(e);return aA(t.length>0&&await zS(t,e))},oA=e=>{let t=sA(e);return aA(t.length>0&&QS(t,e))},aA=e=>{let t=new Set;return r=>{let n=mr.default.normalize(r.path??r);return t.has(n)||e&&e(n)?!1:(t.add(n),!0)}},uA=(e,t)=>e.flat().filter(r=>t(r)),cA=(e,t)=>{let r=[];for(;e.length>0;){let n=e.findIndex(s=>Pi(s));if(n===-1){r.push({patterns:e,options:t});break}let i=e[n].slice(1);for(let s of r)s.options.ignore.push(i);n!==0&&r.push({patterns:e.slice(0,n),options:{...t,ignore:[...t.ignore,i]}}),e=e.slice(n+1)}return r},lA=(e,t)=>({...t?{cwd:t}:{},...Array.isArray(e)?{files:e}:e}),dA=async(e,t)=>{let r=cA(e,t),{cwd:n,expandDirectories:i}=t;if(!i)return r;let s=lA(i,n);return Promise.all(r.map(async o=>{let{patterns:a,options:u}=o;return[a,u.ignore]=await Promise.all([ZS(a,s),ZS(u.ignore,{cwd:n})]),{patterns:a,options:u}}))},sp=(e,t)=>{let r=cA(e,t),{cwd:n,expandDirectories:i}=t;if(!i)return r;let s=lA(i,n);return r.map(o=>{let{patterns:a,options:u}=o;return a=JS(a,s),u.ignore=JS(u.ignore,{cwd:n}),{patterns:a,options:u}})},Ci=iA(async(e,t)=>{let[r,n]=await Promise.all([dA(e,t),KN(t)]),i=await Promise.all(r.map(s=>(0,cn.default)(s.patterns,s.options)));return uA(i,n)}),xH=Po((e,t)=>{let r=sp(e,t),n=oA(t),i=r.map(s=>cn.default.sync(s.patterns,s.options));return uA(i,n)}),LH=Po((e,t)=>{let r=sp(e,t),n=oA(t),i=r.map(o=>cn.default.stream(o.patterns,o.options));return hl(i).filter(o=>n(o))}),MH=Po((e,t)=>e.some(r=>cn.default.isDynamicPattern(r,t))),DH=iA(dA),FH=Po(sp),{convertPathToPattern:BH}=cn.default;var pA=async({cwd:e})=>{try{return await Ci("**/*",{dot:!0,cwd:e,absolute:!1})}catch{return[]}};var op=async({exclude:e,ignoreFile:t,cwd:r})=>{let n=kg({ignoreFile:t,cwd:r}),i=(0,fA.default)().add([...e,...await Bg(n)]);return(await pA({cwd:r})).filter(a=>i.ignores(a)).map(a=>`${r}/${a}`)};var hA=["package.json","package.yaml","package.yml"];var Co=v("path"),XN={directory:({cwd:e})=>[e],parentDirectories:({cwd:e,rootDir:t})=>{if(!e.startsWith(t))throw new Error("Package directory not in rootDir. This should never happen");let r=e,n=[];for(;;){if(r===t||r.length<t.length)return n;r=(0,Co.dirname)(r),n=[...n,r]}},packageFiles:({cwd:e})=>hA.map(t=>(0,Co.join)(e,t))},zN=({cwd:e,rootDir:t})=>[...new Set(Object.values(XN).map(r=>r({cwd:e,rootDir:t})).flat())],_A=({workspaces:e,rootDir:t})=>Array.from(e).map(({cwd:r})=>zN({cwd:r,rootDir:t})).flat();var Mi=v("@yarnpkg/fslib"),V=K(v("typanion"));function NA(e){return typeof e>"u"||e===null}function QN(e){return typeof e=="object"&&e!==null}function ZN(e){return Array.isArray(e)?e:NA(e)?[]:[e]}function JN(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function ex(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function tx(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var rx=NA,nx=QN,ix=ZN,sx=ex,ox=tx,ax=JN,Se={isNothing:rx,isObject:nx,toArray:ix,repeat:sx,isNegativeZero:ox,extend:ax};function xA(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function wi(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=xA(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}wi.prototype=Object.create(Error.prototype);wi.prototype.constructor=wi;wi.prototype.toString=function(t){return this.name+": "+xA(this,t)};var qe=wi;function ap(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"\u2192")+o,pos:n-t+s.length}}function up(e,t){return Se.repeat(" ",t-e.length)+e}function ux(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",u,c,l=Math.min(e.line+t.linesAfter,i.length).toString().length,p=t.maxLength-(t.indent+l+3);for(u=1;u<=t.linesBefore&&!(o-u<0);u++)c=ap(e.buffer,n[o-u],i[o-u],e.position-(n[o]-n[o-u]),p),a=Se.repeat(" ",t.indent)+up((e.line-u+1).toString(),l)+" | "+c.str+`
`+a;for(c=ap(e.buffer,n[o],i[o],e.position,p),a+=Se.repeat(" ",t.indent)+up((e.line+1).toString(),l)+" | "+c.str+`
`,a+=Se.repeat("-",t.indent+l+3+c.pos)+`^
`,u=1;u<=t.linesAfter&&!(o+u>=i.length);u++)c=ap(e.buffer,n[o+u],i[o+u],e.position-(n[o]-n[o+u]),p),a+=Se.repeat(" ",t.indent)+up((e.line+u+1).toString(),l)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var cx=ux,lx=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],dx=["scalar","sequence","mapping"];function px(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function fx(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(lx.indexOf(r)===-1)throw new qe('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=px(t.styleAliases||null),dx.indexOf(this.kind)===-1)throw new qe('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Ce=fx;function gA(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function hx(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function lp(e){return this.extend(e)}lp.prototype.extend=function(t){var r=[],n=[];if(t instanceof Ce)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new qe("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof Ce))throw new qe("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new qe("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new qe("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Ce))throw new qe("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(lp.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=gA(i,"implicit"),i.compiledExplicit=gA(i,"explicit"),i.compiledTypeMap=hx(i.compiledImplicit,i.compiledExplicit),i};var _x=lp,gx=new Ce("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),mx=new Ce("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Ex=new Ce("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Sx=new _x({explicit:[gx,mx,Ex]});function Ax(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Tx(){return null}function yx(e){return e===null}var bx=new Ce("tag:yaml.org,2002:null",{kind:"scalar",resolve:Ax,construct:Tx,predicate:yx,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Rx(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function vx(e){return e==="true"||e==="True"||e==="TRUE"}function Ox(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Px=new Ce("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Rx,construct:vx,predicate:Ox,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Cx(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ix(e){return 48<=e&&e<=55}function wx(e){return 48<=e&&e<=57}function Nx(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Cx(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Ix(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!wx(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function xx(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Lx(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Se.isNegativeZero(e)}var Mx=new Ce("tag:yaml.org,2002:int",{kind:"scalar",resolve:Nx,construct:xx,predicate:Lx,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Dx=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Fx(e){return!(e===null||!Dx.test(e)||e[e.length-1]==="_")}function Bx(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var Ux=/^[-+]?[0-9]+e/;function kx(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Se.isNegativeZero(e))return"-0.0";return r=e.toString(10),Ux.test(r)?r.replace("e",".e"):r}function jx(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Se.isNegativeZero(e))}var Gx=new Ce("tag:yaml.org,2002:float",{kind:"scalar",resolve:Fx,construct:Bx,predicate:jx,represent:kx,defaultStyle:"lowercase"}),LA=Sx.extend({implicit:[bx,Px,Mx,Gx]}),qx=LA,MA=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),DA=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Hx(e){return e===null?!1:MA.exec(e)!==null||DA.exec(e)!==null}function $x(e){var t,r,n,i,s,o,a,u=0,c=null,l,p,f;if(t=MA.exec(e),t===null&&(t=DA.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(l=+t[10],p=+(t[11]||0),c=(l*60+p)*6e4,t[9]==="-"&&(c=-c)),f=new Date(Date.UTC(r,n,i,s,o,a,u)),c&&f.setTime(f.getTime()-c),f}function Vx(e){return e.toISOString()}var Wx=new Ce("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Hx,construct:$x,instanceOf:Date,represent:Vx});function Yx(e){return e==="<<"||e===null}var Kx=new Ce("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Yx}),_p=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Xx(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=_p;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function zx(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=_p,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function Qx(e){var t="",r=0,n,i,s=e.length,o=_p;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function Zx(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Jx=new Ce("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Xx,construct:zx,predicate:Zx,represent:Qx}),eL=Object.prototype.hasOwnProperty,tL=Object.prototype.toString;function rL(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,tL.call(i)!=="[object Object]")return!1;for(s in i)if(eL.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function nL(e){return e!==null?e:[]}var iL=new Ce("tag:yaml.org,2002:omap",{kind:"sequence",resolve:rL,construct:nL}),sL=Object.prototype.toString;function oL(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],sL.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function aL(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var uL=new Ce("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:oL,construct:aL}),cL=Object.prototype.hasOwnProperty;function lL(e){if(e===null)return!0;var t,r=e;for(t in r)if(cL.call(r,t)&&r[t]!==null)return!1;return!0}function dL(e){return e!==null?e:{}}var pL=new Ce("tag:yaml.org,2002:set",{kind:"mapping",resolve:lL,construct:dL}),FA=qx.extend({implicit:[Wx,Kx],explicit:[Jx,iL,uL,pL]}),Qt=Object.prototype.hasOwnProperty,Io=1,BA=2,UA=3,wo=4,cp=1,fL=2,mA=3,hL=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_L=/[\x85\u2028\u2029]/,gL=/[,\[\]\{\}]/,kA=/^(?:!|!!|![a-z\-]+!)$/i,jA=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function EA(e){return Object.prototype.toString.call(e)}function Rt(e){return e===10||e===13}function Sr(e){return e===9||e===32}function He(e){return e===9||e===32||e===10||e===13}function dn(e){return e===44||e===91||e===93||e===123||e===125}function mL(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function EL(e){return e===120?2:e===117?4:e===85?8:0}function SL(e){return 48<=e&&e<=57?e-48:-1}function SA(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function AL(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var GA=new Array(256),qA=new Array(256);for(Er=0;Er<256;Er++)GA[Er]=SA(Er)?1:0,qA[Er]=SA(Er);var Er;function TL(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||FA,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function HA(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=cx(r),new qe(t,r)}function x(e,t){throw HA(e,t)}function No(e,t){e.onWarning&&e.onWarning.call(null,HA(e,t))}var AA={YAML:function(t,r,n){var i,s,o;t.version!==null&&x(t,"duplication of %YAML directive"),n.length!==1&&x(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&x(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&x(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&No(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&x(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],kA.test(i)||x(t,"ill-formed tag handle (first argument) of the TAG directive"),Qt.call(t.tagMap,i)&&x(t,'there is a previously declared suffix for "'+i+'" tag handle'),jA.test(s)||x(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{x(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function zt(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||x(e,"expected valid JSON character");else hL.test(a)&&x(e,"the stream contains non-printable characters");e.result+=a}}function TA(e,t,r,n){var i,s,o,a;for(Se.isObject(r)||x(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],Qt.call(t,s)||(t[s]=r[s],n[s]=!0)}function pn(e,t,r,n,i,s,o,a,u){var c,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,l=i.length;c<l;c+=1)Array.isArray(i[c])&&x(e,"nested arrays are not supported inside keys"),typeof i=="object"&&EA(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&EA(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,l=s.length;c<l;c+=1)TA(e,t,s[c],r);else TA(e,t,s,r);else!e.json&&!Qt.call(r,i)&&Qt.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,x(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}function gp(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):x(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ge(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Sr(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Rt(i))for(gp(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&No(e,"deficient indentation"),n}function Mo(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||He(r)))}function mp(e,t){t===1?e.result+=" ":t>1&&(e.result+=Se.repeat(`
`,t-1))}function yL(e,t,r){var n,i,s,o,a,u,c,l,p=e.kind,f=e.result,_;if(_=e.input.charCodeAt(e.position),He(_)||dn(_)||_===35||_===38||_===42||_===33||_===124||_===62||_===39||_===34||_===37||_===64||_===96||(_===63||_===45)&&(i=e.input.charCodeAt(e.position+1),He(i)||r&&dn(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;_!==0;){if(_===58){if(i=e.input.charCodeAt(e.position+1),He(i)||r&&dn(i))break}else if(_===35){if(n=e.input.charCodeAt(e.position-1),He(n))break}else{if(e.position===e.lineStart&&Mo(e)||r&&dn(_))break;if(Rt(_))if(u=e.line,c=e.lineStart,l=e.lineIndent,ge(e,!1,-1),e.lineIndent>=t){a=!0,_=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=u,e.lineStart=c,e.lineIndent=l;break}}a&&(zt(e,s,o,!1),mp(e,e.line-u),s=o=e.position,a=!1),Sr(_)||(o=e.position+1),_=e.input.charCodeAt(++e.position)}return zt(e,s,o,!1),e.result?!0:(e.kind=p,e.result=f,!1)}function bL(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(zt(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Rt(r)?(zt(e,n,i,!0),mp(e,ge(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Mo(e)?x(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);x(e,"unexpected end of the stream within a single quoted scalar")}function RL(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return zt(e,r,e.position,!0),e.position++,!0;if(a===92){if(zt(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Rt(a))ge(e,!1,t);else if(a<256&&GA[a])e.result+=qA[a],e.position++;else if((o=EL(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=mL(a))>=0?s=(s<<4)+o:x(e,"expected hexadecimal character");e.result+=AL(s),e.position++}else x(e,"unknown escape sequence");r=n=e.position}else Rt(a)?(zt(e,r,n,!0),mp(e,ge(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Mo(e)?x(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}x(e,"unexpected end of the stream within a double quoted scalar")}function vL(e,t){var r=!0,n,i,s,o=e.tag,a,u=e.anchor,c,l,p,f,_,h=Object.create(null),g,T,A,y;if(y=e.input.charCodeAt(e.position),y===91)l=93,_=!1,a=[];else if(y===123)l=125,_=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),y=e.input.charCodeAt(++e.position);y!==0;){if(ge(e,!0,t),y=e.input.charCodeAt(e.position),y===l)return e.position++,e.tag=o,e.anchor=u,e.kind=_?"mapping":"sequence",e.result=a,!0;r?y===44&&x(e,"expected the node content, but found ','"):x(e,"missed comma between flow collection entries"),T=g=A=null,p=f=!1,y===63&&(c=e.input.charCodeAt(e.position+1),He(c)&&(p=f=!0,e.position++,ge(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,fn(e,t,Io,!1,!0),T=e.tag,g=e.result,ge(e,!0,t),y=e.input.charCodeAt(e.position),(f||e.line===n)&&y===58&&(p=!0,y=e.input.charCodeAt(++e.position),ge(e,!0,t),fn(e,t,Io,!1,!0),A=e.result),_?pn(e,a,h,T,g,A,n,i,s):p?a.push(pn(e,null,h,T,g,A,n,i,s)):a.push(g),ge(e,!0,t),y=e.input.charCodeAt(e.position),y===44?(r=!0,y=e.input.charCodeAt(++e.position)):r=!1}x(e,"unexpected end of the stream within a flow collection")}function OL(e,t){var r,n,i=cp,s=!1,o=!1,a=t,u=0,c=!1,l,p;if(p=e.input.charCodeAt(e.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)cp===i?i=p===43?mA:fL:x(e,"repeat of a chomping mode identifier");else if((l=SL(p))>=0)l===0?x(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?x(e,"repeat of an indentation width identifier"):(a=t+l-1,o=!0);else break;if(Sr(p)){do p=e.input.charCodeAt(++e.position);while(Sr(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!Rt(p)&&p!==0)}for(;p!==0;){for(gp(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Rt(p)){u++;continue}if(e.lineIndent<a){i===mA?e.result+=Se.repeat(`
`,s?1+u:u):i===cp&&s&&(e.result+=`
`);break}for(n?Sr(p)?(c=!0,e.result+=Se.repeat(`
`,s?1+u:u)):c?(c=!1,e.result+=Se.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=Se.repeat(`
`,u):e.result+=Se.repeat(`
`,s?1+u:u),s=!0,o=!0,u=0,r=e.position;!Rt(p)&&p!==0;)p=e.input.charCodeAt(++e.position);zt(e,r,e.position,!1)}return!0}function yA(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,x(e,"tab characters must not be used in indentation")),!(u!==45||(o=e.input.charCodeAt(e.position+1),!He(o))));){if(a=!0,e.position++,ge(e,!0,-1)&&e.lineIndent<=t){s.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,fn(e,t,UA,!1,!0),s.push(e.result),ge(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&u!==0)x(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function PL(e,t,r){var n,i,s,o,a,u,c=e.tag,l=e.anchor,p={},f=Object.create(null),_=null,h=null,g=null,T=!1,A=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),y=e.input.charCodeAt(e.position);y!==0;){if(!T&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,x(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(y===63||y===58)&&He(n))y===63?(T&&(pn(e,p,f,_,h,null,o,a,u),_=h=g=null),A=!0,T=!0,i=!0):T?(T=!1,i=!0):x(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=n;else{if(o=e.line,a=e.lineStart,u=e.position,!fn(e,r,BA,!1,!0))break;if(e.line===s){for(y=e.input.charCodeAt(e.position);Sr(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),He(y)||x(e,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(pn(e,p,f,_,h,null,o,a,u),_=h=g=null),A=!0,T=!1,i=!1,_=e.tag,h=e.result;else if(A)x(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=l,!0}else if(A)x(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=l,!0}if((e.line===s||e.lineIndent>t)&&(T&&(o=e.line,a=e.lineStart,u=e.position),fn(e,t,wo,!0,i)&&(T?h=e.result:g=e.result),T||(pn(e,p,f,_,h,g,o,a,u),_=h=g=null),ge(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&y!==0)x(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return T&&pn(e,p,f,_,h,null,o,a,u),A&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=p),A}function CL(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&x(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):x(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!He(o);)o===33&&(n?x(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),kA.test(i)||x(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),gL.test(s)&&x(e,"tag suffix cannot contain flow indicator characters")}s&&!jA.test(s)&&x(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{x(e,"tag name is malformed: "+s)}return r?e.tag=s:Qt.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:x(e,'undeclared tag handle "'+i+'"'),!0}function IL(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&x(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!He(r)&&!dn(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&x(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function wL(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!He(n)&&!dn(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&x(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Qt.call(e.anchorMap,r)||x(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],ge(e,!0,-1),!0}function fn(e,t,r,n,i){var s,o,a,u=1,c=!1,l=!1,p,f,_,h,g,T;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=wo===r||UA===r,n&&ge(e,!0,-1)&&(c=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;CL(e)||IL(e);)ge(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||wo===r)&&(Io===r||BA===r?g=t:g=t+1,T=e.position-e.lineStart,u===1?a&&(yA(e,T)||PL(e,T,g))||vL(e,g)?l=!0:(o&&OL(e,g)||bL(e,g)||RL(e,g)?l=!0:wL(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&x(e,"alias node should not have any properties")):yL(e,g,Io===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(l=a&&yA(e,T))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&x(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,f=e.implicitTypes.length;p<f;p+=1)if(h=e.implicitTypes[p],h.resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Qt.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,_=e.typeMap.multi[e.kind||"fallback"],p=0,f=_.length;p<f;p+=1)if(e.tag.slice(0,_[p].tag.length)===_[p].tag){h=_[p];break}h||x(e,"unknown tag !<"+e.tag+">"),e.result!==null&&h.kind!==e.kind&&x(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):x(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function NL(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(ge(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!He(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&x(e,"directive name must not be less than one character in length");o!==0;){for(;Sr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Rt(o));break}if(Rt(o))break;for(r=e.position;o!==0&&!He(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&gp(e),Qt.call(AA,n)?AA[n](e,n,i):No(e,'unknown document directive "'+n+'"')}if(ge(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ge(e,!0,-1)):s&&x(e,"directives end mark is expected"),fn(e,e.lineIndent-1,wo,!1,!0),ge(e,!0,-1),e.checkLineBreaks&&_L.test(e.input.slice(t,e.position))&&No(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Mo(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ge(e,!0,-1));return}if(e.position<e.length-1)x(e,"end of the stream or a document separator is expected");else return}function $A(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new TL(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,x(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)NL(r);return r.documents}function xL(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=$A(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function LL(e,t){var r=$A(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new qe("expected a single document in the stream, but found more")}}var ML=xL,DL=LL,VA={loadAll:ML,load:DL},WA=Object.prototype.toString,YA=Object.prototype.hasOwnProperty,Ep=65279,FL=9,Ni=10,BL=13,UL=32,kL=33,jL=34,dp=35,GL=37,qL=38,HL=39,$L=42,KA=44,VL=45,xo=58,WL=61,YL=62,KL=63,XL=64,XA=91,zA=93,zL=96,QA=123,QL=124,ZA=125,Ie={};Ie[0]="\\0";Ie[7]="\\a";Ie[8]="\\b";Ie[9]="\\t";Ie[10]="\\n";Ie[11]="\\v";Ie[12]="\\f";Ie[13]="\\r";Ie[27]="\\e";Ie[34]='\\"';Ie[92]="\\\\";Ie[133]="\\N";Ie[160]="\\_";Ie[8232]="\\L";Ie[8233]="\\P";var ZL=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],JL=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function eM(e,t){var r,n,i,s,o,a,u;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),u=e.compiledTypeMap.fallback[o],u&&YA.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[o]=a;return r}function tM(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new qe("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Se.repeat("0",n-t.length)+t}var rM=1,xi=2;function nM(e){this.schema=e.schema||FA,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Se.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=eM(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?xi:rM,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function bA(e,t){for(var r=Se.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function pp(e,t){return`
`+Se.repeat(" ",e.indent*t)}function iM(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Lo(e){return e===UL||e===FL}function Li(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Ep||65536<=e&&e<=1114111}function RA(e){return Li(e)&&e!==Ep&&e!==BL&&e!==Ni}function vA(e,t,r){var n=RA(e),i=n&&!Lo(e);return(r?n:n&&e!==KA&&e!==XA&&e!==zA&&e!==QA&&e!==ZA)&&e!==dp&&!(t===xo&&!i)||RA(t)&&!Lo(t)&&e===dp||t===xo&&i}function sM(e){return Li(e)&&e!==Ep&&!Lo(e)&&e!==VL&&e!==KL&&e!==xo&&e!==KA&&e!==XA&&e!==zA&&e!==QA&&e!==ZA&&e!==dp&&e!==qL&&e!==$L&&e!==kL&&e!==QL&&e!==WL&&e!==YL&&e!==HL&&e!==jL&&e!==GL&&e!==XL&&e!==zL}function oM(e){return!Lo(e)&&e!==xo}function Ii(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function JA(e){var t=/^\n* /;return t.test(e)}var eT=1,fp=2,tT=3,rT=4,ln=5;function aM(e,t,r,n,i,s,o,a){var u,c=0,l=null,p=!1,f=!1,_=n!==-1,h=-1,g=sM(Ii(e,0))&&oM(Ii(e,e.length-1));if(t||o)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=Ii(e,u),!Li(c))return ln;g=g&&vA(c,l,a),l=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=Ii(e,u),c===Ni)p=!0,_&&(f=f||u-h-1>n&&e[h+1]!==" ",h=u);else if(!Li(c))return ln;g=g&&vA(c,l,a),l=c}f=f||_&&u-h-1>n&&e[h+1]!==" "}return!p&&!f?g&&!o&&!i(e)?eT:s===xi?ln:fp:r>9&&JA(e)?ln:o?s===xi?ln:fp:f?rT:tT}function uM(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===xi?'""':"''";if(!e.noCompatMode&&(ZL.indexOf(t)!==-1||JL.test(t)))return e.quotingType===xi?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function u(c){return iM(e,c)}switch(aM(t,a,e.indent,o,u,e.quotingType,e.forceQuotes&&!n,i)){case eT:return t;case fp:return"'"+t.replace(/'/g,"''")+"'";case tT:return"|"+OA(t,e.indent)+PA(bA(t,s));case rT:return">"+OA(t,e.indent)+PA(bA(cM(t,o),s));case ln:return'"'+lM(t)+'"';default:throw new qe("impossible error: invalid scalar style")}}()}function OA(e,t){var r=JA(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function PA(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function cM(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,CA(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],u=o[2];s=u[0]===" ",n+=a+(!i&&!s&&u!==""?`
`:"")+CA(u,t),i=s}return n}function CA(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,u="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,u+=`
`+e.slice(i,s),i=s+1),o=a;return u+=`
`,e.length-i>t&&o>i?u+=e.slice(i,o)+`
`+e.slice(o+1):u+=e.slice(i),u.slice(1)}function lM(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=Ii(e,i),n=Ie[r],!n&&Li(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||tM(r);return t}function dM(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(Bt(e,t,a,!1,!1)||typeof a>"u"&&Bt(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function IA(e,t,r,n){var i="",s=e.tag,o,a,u;for(o=0,a=r.length;o<a;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(Bt(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&Bt(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=pp(e,t)),e.dump&&Ni===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function pM(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,u,c,l;for(o=0,a=s.length;o<a;o+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),u=s[o],c=r[u],e.replacer&&(c=e.replacer.call(r,u,c)),Bt(e,t,u,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Bt(e,t,c,!1,!1)&&(l+=e.dump,n+=l));e.tag=i,e.dump="{"+n+"}"}function fM(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,u,c,l,p,f;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new qe("sortKeys must be a boolean or a function");for(a=0,u=o.length;a<u;a+=1)f="",(!n||i!=="")&&(f+=pp(e,t)),c=o[a],l=r[c],e.replacer&&(l=e.replacer.call(r,c,l)),Bt(e,t+1,c,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&Ni===e.dump.charCodeAt(0)?f+="?":f+="? "),f+=e.dump,p&&(f+=pp(e,t)),Bt(e,t+1,l,!0,p)&&(e.dump&&Ni===e.dump.charCodeAt(0)?f+=":":f+=": ",f+=e.dump,i+=f));e.tag=s,e.dump=i||"{}"}function wA(e,t,r){var n,i,s,o,a,u;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,WA.call(a.represent)==="[object Function]")n=a.represent(t,u);else if(YA.call(a.represent,u))n=a.represent[u](t,u);else throw new qe("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function Bt(e,t,r,n,i,s,o){e.tag=null,e.dump=r,wA(e,r,!1)||wA(e,r,!0);var a=WA.call(e.dump),u=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",p,f;if(l&&(p=e.duplicates.indexOf(r),f=p!==-1),(e.tag!==null&&e.tag!=="?"||f||e.indent!==2&&t>0)&&(i=!1),f&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(l&&f&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(fM(e,t,e.dump,i),f&&(e.dump="&ref_"+p+e.dump)):(pM(e,t,e.dump),f&&(e.dump="&ref_"+p+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?IA(e,t-1,e.dump,i):IA(e,t,e.dump,i),f&&(e.dump="&ref_"+p+e.dump)):(dM(e,t,e.dump),f&&(e.dump="&ref_"+p+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&uM(e,e.dump,t,s,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new qe("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function hM(e,t){var r=[],n=[],i,s;for(hp(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function hp(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)hp(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)hp(e[n[i]],t,r)}function _M(e,t){t=t||{};var r=new nM(t);r.noRefs||hM(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Bt(r,0,n,!0,!0)?r.dump+`
`:""}var gM=_M,mM={dump:gM};function Sp(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var nT=LA;var iT=VA.load,QH=VA.loadAll,ZH=mM.dump;var JH=Sp("safeLoad","load"),e$=Sp("safeLoadAll","loadAll"),t$=Sp("safeDump","dump");var EM=".yarnbuildrc.yml",Tp=".bundleignore",SM=V.isObject({folders:V.isObject({input:V.isOneOf([V.isString(),V.isArray(V.isString())]),output:V.isNullable(V.isOneOf([V.isString(),V.isArray(V.isString())]))}),exclude:V.isArray(V.isString()),bail:V.isBoolean(),hideYarnBuildBadge:V.isBoolean(),ignoreFile:V.isString()}),AM=V.isObject({input:V.isOptional(V.isOneOf([V.isString(),V.isArray(V.isString())])),output:V.isOptional(V.isNullable(V.isOneOf([V.isString(),V.isArray(V.isString())]))),tsconfig:V.isOptional(V.isString())}),Ap={folders:{input:".",output:null},exclude:[],bail:!0,hideYarnBuildBadge:!1,ignoreFile:Tp};async function sT(e){let t=EM,r=Mi.ppath.join(e.projectCwd||e.startingCwd,t);if(Mi.xfs.existsSync(r)){let n=await Mi.xfs.readFilePromise(r,"utf8"),i=[];try{let s=iT(n,{schema:nT});if(SM(s,{errors:i}))return s;console.warn(i)}catch{let o="";throw n.match(/^\s+(?!-)[^:]+\s+\S+/m)&&(o=" (config is corrupted, please check it matches the shape in the yarn.build readme."),new Error(`Parse error when loading ${r}; please check it's proper Yaml${o}`)}}return Ap}async function oT(e){return await sT(e)}async function aT(e){let t=await sT(e);return{...Ap,...t,folders:{...Ap.folders,...t.folders??{}}}}function uT(e){let t={...e["yarn.build"]};return AM(t)?t:{}}var U={PACKAGE_NAME:"package.name",PACKAGE_SCOPE:"package.scope",PACKAGE_DIRECTORY:"package.directory",PACKAGE_COMMAND:"package.command",GIT_BRANCH:"git.branch",GIT_COMMIT:"git.commit",YARN_BUILD_MESSAGE_CODE:"yarn.build.message.code",YARN_BUILD_CONFIG_FOLDERS_INPUT:"yarn.build.config.folders.input",YARN_BUILD_CONFIG_FOLDERS_OUTPUT:"yarn.build.config.folders.output",YARN_BUILD_CONFIG_EXCLUDE:"yarn.build.config.exclude",YARN_BUILD_CONFIG_BAIL:"yarn.build.config.bail",YARN_BUILD_CONFIG_HIDE_BADGE:"yarn.build.config.hide-badge",YARN_BUILD_CONFIG_MAX_CONCURRENCY:"yarn.build.config.max-concurrency",YARN_BUILD_FLAGS_OUTPUT_JSON:"yarn.build.flags.output.json",YARN_BUILD_FLAGS_ALL:"yarn.build.flags.all",YARN_BUILD_FLAGS_TARGETS:"yarn.build.flags.targets",YARN_BUILD_FLAGS_COMMAND:"yarn.build.flags.command",YARN_BUILD_FLAGS_INTERLACED:"yarn.build.flags.interlaced",YARN_BUILD_FLAGS_VERBOSE:"yarn.build.flags.verbose",YARN_BUILD_FLAGS_DRY_RUN:"yarn.build.flags.dry-run",YARN_BUILD_FLAGS_IGNORE_CACHE:"yarn.build.flags.ignore-cache",YARN_BUILD_FLAGS_MAX_CONCURRENCY:"yarn.build.flags.max-concurrency",YARN_BUILD_FLAGS_CONTINUE_ON_ERROR:"yarn.build.flags.continue-on-error",YARN_BUILD_FLAGS_EXCLUDE:"yarn.build.flags.exclude",YARN_BUILD_FLAGS_EXCLUDE_CURRENT:"yarn.build.flags.exclude.current",YARN_BUILD_FLAGS_CHANGES:"yarn.build.flags.changes",YARN_BUILD_FLAGS_SINCE:"yarn.build.flags.since",YARN_BUILD_FLAGS_SINCE_BRANCH:"yarn.build.flags.since-branch",YARN_BUILD_FLAGS_ONLY_CURRENT:"yarn.build.flags.only-current",YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES:"yarn.build.flags.ignore-dependencies",YARN_BUILD_FLAGS_BUNDLE_QUIET:"yarn.build.flags.bundle.quiet",YARN_BUILD_FLAGS_BUNDLE_TEMPORARY_DIRECTORY:"yarn.build.flags.bundle.temporary-directory",YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY:"yarn.build.flags.bundle.output-directory",YARN_BUILD_FLAGS_BUNDLE_NO_COMPRESS:"yarn.build.flags.bundle.no-compress",YARN_BUILD_FLAGS_BUNDLE_ARCHIVE_NAME:"yarn.build.flags.bundle.archive-name",YARN_BUILD_FLAGS_BUNDLE_EXCLUDE:"yarn.build.flags.bundle.exclude",YARN_BUILD_FLAGS_BUNDLE_IGNORE_FILE:"yarn.build.flags.bundle.ignore-file",YARN_BUILD_PACKAGE_NEEDS_RUN:"yarn.build.package.needs-run",YARN_BUILD_PACKAGE_RUN_COMMAND:"yarn.build.package.run.command",YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT:"yarn.build.package.run.command.exit"};var Gv=K(N()),qv=K(mf());var Fv=K(ju()),Bv=K(Mn()),Uv=K(It()),kv=K(Dv()),jv=K(ju()),gi=K(N());process.env.DEBUG&&gi.diag.setLogger(new gi.DiagConsoleLogger,gi.DiagLogLevel.DEBUG);var bs=class{static _instance;static getInstance(){return this._instance||(this._instance=new this().start())}static provider(){return this._instance||(this._instance=new this().start())}start(){let t=new kv.OTLPTraceExporter,r=new Fv.BasicTracerProvider({resource:new Bv.Resource({[Uv.SemanticResourceAttributes.SERVICE_NAME]:"yarn.build"})});r.addSpanProcessor(new jv.BatchSpanProcessor(t));async function n(i){try{await r.shutdown(),process.env.DEBUG&&console.info("gracefullty exited trace provider")}finally{process.exit(isNaN(+i)?1:+i)}}return["beforeExit","exit","uncaughtException","unhandledRejection","SIGHUP","SIGINT","SIGQUIT","SIGILL","SIGTRAP","SIGABRT","SIGBUS","SIGFPE","SIGUSR1","SIGSEGV","SIGUSR2","SIGTERM"].forEach(i=>process.on(i,n)),r}};var Wr=K(N()),ht=class{name;_tracer;constructor(t){this.name=t,this._tracer=bs.getInstance().getTracer(t)}recordException(t,r){(typeof typeof r=="string"||r instanceof Error)&&(t.recordException(r),t.setStatus({code:Gv.SpanStatusCode.ERROR,message:r instanceof Error?r.message:r}))}async startSpan(t,r){let n;if(typeof t.ctx>"u"?n=Wr.context.active():n=t.ctx,t.propegateFromEnv||t?.spanOptions?.kind==4){let o=process.env.TRACEPARENT;if(typeof o=="string"){let a=(0,qv.parseTraceParent)(o??"");a&&(n=Wr.trace.setSpanContext(Wr.context.active(),a))}}let i=this._tracer.startSpan(t.name,t.spanOptions,n),s=Wr.trace.setSpan(n,i);try{return r.constructor.name==="AsyncFunction"?await r({span:i,ctx:s}):r({span:i,ctx:s})}catch(o){if((typeof o=="string"||o instanceof Error)&&this.recordException(i,o),!t.supressExceptions)throw o}finally{i.end()}throw new Error("Unknown error")}async wrap(t,r,...n){let i;return typeof t.ctx>"u"?i=Wr.context.active():i=t.ctx,await(async()=>await this.startSpan({name:t.name,ctx:i},async()=>await r(...n)))()}};var Vv=K(N());var Rs=class extends Yr.BaseCommand{static paths=[["bundle"]];tracer=new ht("yarn.build");json=_t.Option.Boolean("--json",!1,{description:"flag is set the output will follow a JSON-stream output also known as NDJSON (https://github.com/ndjson/ndjson-spec)"});quiet=_t.Option.Boolean("-q,--quiet",!1,{description:"suppress progess messages"});temporaryDirectory=_t.Option.String("--temporary-directory",{description:"superseeds --output-directory and --no-compress, when set the temporary directory used for bundling is written to a file you pass here "});outputDirectory=_t.Option.String("-o,--output-directory",{description:"sets the output directory, this should be outside your source input directory."});noCompress=_t.Option.Boolean("--no-compress",!1,{description:"set this with --output-directory to skip zipping your bundle, when this is set your output directory must be outside your project root"});archiveName=_t.Option.String("-a,--archive-name","bundle.zip",{description:"sets the name of the archive. Any files matching this, will be excluded from subsequent archives. Defaults to ./bundle.zip"});exclude=_t.Option.Array("--exclude",[],{arity:1,description:"Exclude specific paths from the final bundle."});ignoreFile=_t.Option.String("--ignore-file",Tp,{description:"set the name of ignore file. Files matching this in workspace root and package root will be used to indicate which files will be excluded from bundle."});static usage=_t.Command.Usage({category:"Bundle commands",description:"bundle a workspace package into a deployable archive",details:`
      This command will bundle up the source of the target package along with
      its dependencies into an archive.

      This is designed to be used for deployment, not for publishing, so
      everything to run except for a runtime (ie node) is bundled into
      the archive.

      Call this after you have run your build step (if any).

      This is designed to work best with zero-install configurations. If you
      don't have that, run \`yarn install\` before this command.

      Why not just compile like we do on the front-end?
      Some dependencies may use require in interesting ways, or be or call
      binaries. It's safest not to transpile them.
    `});progress({code:t,group:r,msg:n,span:i}){this.quiet!==!0&&console.info(`\u27A4 ${t}:${r}${n}`),typeof i<"u"&&i.addEvent(n,{[U.YARN_BUILD_MESSAGE_CODE]:t})}async removeUnusedPackages(t,r,n,i){return await this.tracer.startSpan({name:"remove unused packages",ctx:t},async({span:s})=>{let{project:o,workspace:a}=await Ue.Project.find(i,n);if(!a)throw new Yr.WorkspaceRequiredError(o.cwd,n);let u=await Ue.Project.find(i,r);if(!u.workspace)throw new Yr.WorkspaceRequiredError(u.project.cwd,r);let c=new Set([a,u.workspace]),l=await oT(i);this.exclude=l.exclude?[...this.exclude,...l.exclude]:this.exclude,this.ignoreFile=l?.ignoreFile??this.ignoreFile;for(let p of c)for(let f of Ue.Manifest.allDependencies)for(let _ of p.manifest.getForScope(f).values()){let h=o.tryWorkspaceByDescriptor(_);h!==null&&(c.add(h),this.progress({code:"YB1001",group:" \u2502 ",msg:`required:	${h.relativeCwd}`,span:s}))}for(let p of o.workspaces)c.has(p)||p.cwd!==r&&(await re.xfs.removePromise(p.cwd),this.progress({code:"YB1001",group:" \u2502 ",msg:`unused:	${p.relativeCwd}`,span:s}))})}async removeEmptyDirectories(t,{tmpDir:r,cwd:n}){let i=Vv.trace.getSpan(t);if(!re.xfs.statSync(n).isDirectory())return!1;let o=await re.xfs.readdirPromise(n);for(let a of o)await this.removeEmptyDirectories(t,{tmpDir:r,cwd:re.ppath.join(n,a)});return o=await re.xfs.readdirPromise(n),o.length===0?(await re.xfs.removePromise(n),this.progress({code:"YB1002",group:" \u2502 ",msg:`empty:	${n.replace(r+"/","")}`,span:i}),!0):!1}async removeExcluded(t,{tmpDir:r,excluded:n,nonRemovableFiles:i,yarnDirectory:s,cacheDirectory:o,shouldRemoveEmptyDirectories:a=!1}){let u=`${r}/.git`;try{await re.xfs.lstatPromise(u)&&await re.xfs.removePromise(u)}catch{}await Promise.all(n.map(async c=>{if(!c.startsWith(s)&&!c.startsWith(o)&&!i.includes(c)&&c.startsWith(r))try{await re.xfs.lstatPromise(c)&&await re.xfs.removePromise(c)}catch{}})),a&&await this.removeEmptyDirectories(t,{tmpDir:r,cwd:r})}async execute(){return await this.tracer.startSpan({name:"yarn bundle",propegateFromEnv:!0},async({span:t,ctx:r})=>{this.progress({code:"YB1000",group:" \u250C ",msg:`Prepare ${this.context.cwd} for bundling`,span:t}),this.progress({code:"YB1000",group:" \u2502 ",msg:"Preparing temporary directory",span:t});let n=async i=>await this.tracer.startSpan({name:"prepare for bundle",ctx:r},async({span:s,ctx:o})=>{let a=`${this.context.cwd}`,u=re.ppath.join(a,this.archiveName),c={[U.YARN_BUILD_FLAGS_BUNDLE_QUIET]:this.quiet,[U.YARN_BUILD_FLAGS_BUNDLE_TEMPORARY_DIRECTORY]:this.temporaryDirectory,[U.YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY]:i,[U.YARN_BUILD_FLAGS_BUNDLE_NO_COMPRESS]:this.noCompress,[U.YARN_BUILD_FLAGS_BUNDLE_ARCHIVE_NAME]:this.archiveName,[U.YARN_BUILD_FLAGS_BUNDLE_EXCLUDE]:this.exclude,[U.YARN_BUILD_FLAGS_BUNDLE_IGNORE_FILE]:this.ignoreFile};if(s.setAttributes(c),typeof this.outputDirectory=="string"){let R=Hv(this.outputDirectory);if(s.setAttribute(U.YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY,R),re.xfs.existsSync(R)||await re.xfs.mkdirPromise(R),re.xfs.readdirSync(R).length!=0)throw new Error(" --output-directory is not empty");u=re.ppath.join(R,this.archiveName)}let l=await Ue.Configuration.find(this.context.cwd,this.context.plugins);if(l.projectCwd===null)throw new Error("Can't find project directory");let p=a.replace(l.projectCwd,""),f=!1,_;if(this.noCompress===!0){if(typeof this.outputDirectory!="string")throw new Error("ERROR: you set --no-compress, but did not specify --output-directory");if(_=Hv(this.outputDirectory),_.startsWith(l.projectCwd))throw new Error(`ERROR: --output-directory is inside project root with --no-compress set.
This is no allowed to prevent you destroying your project`);f=!0}let h=new re.NodeFS;this.progress({code:"YB1000",group:" \u2502 ",msg:"Copying repo to temporary directory",span:s}),await this.tracer.wrap({name:"copy to tmp dir",ctx:o},async R=>re.xfs.copyPromise(i,R,{baseFs:h}),l.projectCwd);let g=`${i}${p}`,T=`${g}/${this.archiveName}`,A=this.exclude;try{await re.xfs.lstatPromise(T)&&A.push(T)}catch{}let y=await Ue.Configuration.find(g,this.context.plugins);y.use("<custom>",{enableNetwork:!1},g);let b=await Ue.Cache.find(y),F=`${i}/.yarn`,O=b.cwd;this.progress({code:"YB1000",group:" \u2502 ",msg:"Removing unused and excluded workspaces, folders and files",span:s}),await this.removeUnusedPackages(o,i,g,y);let{project:D,workspace:I}=await Ue.Project.find(y,g);if(!I)throw new Yr.WorkspaceRequiredError(D.cwd,g);s.setAttributes({[U.PACKAGE_DIRECTORY]:p,[U.PACKAGE_NAME]:I.anchoredLocator.name}),typeof I.anchoredLocator.scope=="string"&&s.setAttribute(U.PACKAGE_SCOPE,`@${I.anchoredLocator.scope}`);let M=await Ue.Project.find(y,i);if(!M.workspace)throw new Yr.WorkspaceRequiredError(M.project.cwd,i);let G=new Set([I,M.workspace]),Q=_A({workspaces:G,rootDir:i});A=await op({cwd:i,ignoreFile:this.ignoreFile,exclude:A});for(let R of G)for(let L of Ue.Manifest.allDependencies)for(let he of R.manifest.getForScope(L).values()){let m=D.tryWorkspaceByDescriptor(he);m!==null&&G.add(m)}return await this.tracer.wrap({name:"remove unused workspaces",ctx:o},async()=>{for(let R of G){let L=await op({cwd:R.cwd,ignoreFile:this.ignoreFile,exclude:A});await this.removeExcluded(o,{tmpDir:i,excluded:L,nonRemovableFiles:Q,yarnDirectory:F,cacheDirectory:O,shouldRemoveEmptyDirectories:!1})}}),await this.tracer.wrap({name:"remove excluded files",ctx:o},async()=>{await this.removeExcluded(o,{tmpDir:i,excluded:A,nonRemovableFiles:Q,yarnDirectory:F,cacheDirectory:O,shouldRemoveEmptyDirectories:!0})}),await this.tracer.wrap({name:"add entrypoint.js",ctx:o},async()=>{for(let R of D.workspaces)R.manifest.devDependencies.clear(),!G.has(R)&&(R.manifest.dependencies.clear(),R.manifest.peerDependencies.clear());if(I?.manifest?.raw?.main){let R=I.relativeCwd+ag.default.posix.sep+I?.manifest?.raw?.main;re.xfs.writeFilePromise(`${i}${ag.default.posix.sep}entrypoint.js`,$G(R,".pnp.cjs"))}this.progress({code:"YB1000",group:" \u2514 ",msg:"Completed",span:s})}),(await this.tracer.startSpan({name:"bundle",ctx:o},async({ctx:R})=>await Ue.StreamReport.start({configuration:y,json:this.json,stdout:this.context.stdout,includeLogs:!0},async L=>{if(await this.tracer.wrap({name:"yarn install",ctx:R},async({cache:he,report:m})=>await D.install({cache:he,report:m}),{cache:b,report:L}),!(typeof this.temporaryDirectory<"u"))if(f&&typeof _<"u")L.reportInfo(null,"Moving build to output directory"),await this.tracer.wrap({name:"copy to output directory",ctx:R},async({outputPath:he,tmpDir:m})=>h.copyPromise(he,m),{outputPath:_,tmpDir:i});else{L.reportInfo(null,"Creating archive");let he=new $v.ZipFS(u,{create:!0});L.reportInfo(null,"Copying files to archive"),await this.tracer.wrap({name:"copy to zip",ctx:R},async({tmpDir:m,baseFs:S})=>await he.copyPromise("/",m,{baseFs:S}),{tmpDir:i,baseFs:h}),await this.tracer.wrap({name:"save zip",ctx:R},async()=>he.saveAndClose()),L.reportJson({name:"ArchiveSuccess",message:"Archive created successfuly at ",outputArchive:u})}}))).exitCode()});return typeof this.temporaryDirectory<"u"?await n(this.temporaryDirectory):await re.xfs.mktempPromise(n)})}},$G=(e,t)=>`
"use strict";

const path = require("path");

const pnp = require(path.normalize(path.resolve( __dirname, "${t}"))).setup();

const index = require(path.normalize(path.resolve( __dirname,"${e}")));

Object.defineProperty(exports, "__esModule", { value: true });

exports.default = index;
`;function Hv(e){let t=re.npath.toPortablePath(e);return re.ppath.resolve(t)}var tl=v("@yarnpkg/cli"),je=v("@yarnpkg/core"),fe=v("clipanion"),Mg=K(v("path")),Fs=K(Dl()),$O=v("os");var j=v("@yarnpkg/core"),Ye=K(Qv()),MO=v("os"),Y=v("@yarnpkg/fslib");var DO=v("events");var cg=K(Jv(),1);var Os=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},lg=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},eO=e=>globalThis.DOMException===void 0?new lg(e):new DOMException(e),tO=e=>{let t=e.reason===void 0?eO("This operation was aborted."):e.reason;return t instanceof Error?t:eO(t)};function dg(e,t){let{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout,clearTimeout}}=t,o,u=new Promise((c,l)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:f}=t;f.aborted&&l(tO(f)),f.addEventListener("abort",()=>{l(tO(f))})}if(r===Number.POSITIVE_INFINITY){e.then(c,l);return}let p=new Os;o=s.setTimeout.call(void 0,()=>{if(n){try{c(n())}catch(f){l(f)}return}typeof e.cancel=="function"&&e.cancel(),i===!1?c():i instanceof Error?l(i):(p.message=i??`Promise timed out after ${r} milliseconds`,l(p))},r),(async()=>{try{c(await e)}catch(f){l(f)}})()}).finally(()=>{u.clear()});return u.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},u}function pg(e,t,r){let n=0,i=e.length;for(;i>0;){let s=Math.trunc(i/2),o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}var Ps=class{#e=[];enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&this.#e[this.size-1].priority>=r.priority){this.#e.push(n);return}let i=pg(this.#e,n,(s,o)=>o.priority-s.priority);this.#e.splice(i,0,n)}dequeue(){return this.#e.shift()?.run}filter(t){return this.#e.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this.#e.length}};var Cs=class extends cg.default{#e;#n;#t=0;#f;#a;#h=0;#i;#u;#r;#_;#s=0;#c;#o;#g;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ps,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#e=t.carryoverConcurrencyCount,this.#n=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#f=t.intervalCap,this.#a=t.interval,this.#r=new t.queueClass,this.#_=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#g=t.throwOnTimeout===!0,this.#o=t.autoStart===!1}get#S(){return this.#n||this.#t<this.#f}get#A(){return this.#s<this.#c}#T(){this.#s--,this.#l(),this.emit("next")}#y(){this.#E(),this.#m(),this.#u=void 0}get#b(){let t=Date.now();if(this.#i===void 0){let r=this.#h-t;if(r<0)this.#t=this.#e?this.#s:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#y()},r)),!0}return!1}#l(){if(this.#r.size===0)return this.#i&&clearInterval(this.#i),this.#i=void 0,this.emit("empty"),this.#s===0&&this.emit("idle"),!1;if(!this.#o){let t=!this.#b;if(this.#S&&this.#A){let r=this.#r.dequeue();return r?(this.emit("active"),r(),t&&this.#m(),!0):!1}}return!1}#m(){this.#n||this.#i!==void 0||(this.#i=setInterval(()=>{this.#E()},this.#a),this.#h=Date.now()+this.#a)}#E(){this.#t===0&&this.#s===0&&this.#i&&(clearInterval(this.#i),this.#i=void 0),this.#t=this.#e?this.#s:0,this.#d()}#d(){for(;this.#l(););}get concurrency(){return this.#c}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#c=t,this.#d()}async#R(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:this.#g,...r},new Promise((n,i)=>{this.#r.enqueue(async()=>{this.#s++,this.#t++;try{r.signal?.throwIfAborted();let s=t({signal:r.signal});r.timeout&&(s=dg(Promise.resolve(s),{milliseconds:r.timeout})),r.signal&&(s=Promise.race([s,this.#R(r.signal)]));let o=await s;n(o),this.emit("completed",o)}catch(s){if(s instanceof Os&&!r.throwOnTimeout){n();return}i(s),this.emit("error",s)}finally{this.#T()}},r),this.emit("add"),this.#l()})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this.#o?(this.#o=!1,this.#d(),this):this}pause(){this.#o=!0}clear(){this.#r=new this.#_}async onEmpty(){this.#r.size!==0&&await this.#p("empty")}async onSizeLessThan(t){this.#r.size<t||await this.#p("next",()=>this.#r.size<t)}async onIdle(){this.#s===0&&this.#r.size===0||await this.#p("idle")}async#p(t,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(t,i),n())};this.on(t,i)})}get size(){return this.#r.size}sizeBy(t){return this.#r.filter(t).length}get pending(){return this.#s}get isPaused(){return this.#o}};var fg=class{value;next;constructor(t){this.value=t}},Is=class{#e;#n;#t;constructor(){this.clear()}enqueue(t){let r=new fg(t);this.#e?(this.#n.next=r,this.#n=r):(this.#e=r,this.#n=r),this.#t++}dequeue(){let t=this.#e;if(t)return this.#e=this.#e.next,this.#t--,t.value}clear(){this.#e=void 0,this.#n=void 0,this.#t=0}get size(){return this.#t}*[Symbol.iterator](){let t=this.#e;for(;t;)yield t.value,t=t.next}};var rO=v("async_hooks");function hg(e){if(!((Number.isInteger(e)||e===Number.POSITIVE_INFINITY)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let t=new Is,r=0,n=()=>{r--,t.size>0&&t.dequeue()()},i=async(a,u,c)=>{r++;let l=(async()=>a(...c))();u(l);try{await l}catch{}n()},s=(a,u,c)=>{t.enqueue(rO.AsyncResource.bind(i.bind(void 0,a,u,c))),(async()=>(await Promise.resolve(),r<e&&t.size>0&&t.dequeue()()))()},o=(a,...u)=>new Promise(c=>{s(a,c,u)});return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}}}),o}var Ng=K(nO());function mg({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var KG=mg();function Kr(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(KG,"")}var iO=(e=0)=>t=>`\x1B[${t+e}m`,sO=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,oO=(e=0)=>(t,r,n)=>`\x1B[${38+e};2;${t};${r};${n}m`,ce={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},l6=Object.keys(ce.modifier),XG=Object.keys(ce.color),zG=Object.keys(ce.bgColor),d6=[...XG,...zG];function QG(){let e=new Map;for(let[t,r]of Object.entries(ce)){for(let[n,i]of Object.entries(r))ce[n]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},r[n]=ce[n],e.set(i[0],i[1]);Object.defineProperty(ce,t,{value:r,enumerable:!1})}return Object.defineProperty(ce,"codes",{value:e,enumerable:!1}),ce.color.close="\x1B[39m",ce.bgColor.close="\x1B[49m",ce.color.ansi=iO(),ce.color.ansi256=sO(),ce.color.ansi16m=oO(),ce.bgColor.ansi=iO(10),ce.bgColor.ansi256=sO(10),ce.bgColor.ansi16m=oO(10),Object.defineProperties(ce,{rgbToAnsi256:{value:(t,r,n)=>t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(s=>s+s).join(""));let i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:t=>ce.rgbToAnsi256(...ce.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,n,i;if(t>=232)r=((t-232)*10+8)/255,n=r,i=r;else{t-=16;let a=t%36;r=Math.floor(t/36)/5,n=Math.floor(a/6)/5,i=a%6/5}let s=Math.max(r,n,i)*2;if(s===0)return 30;let o=30+(Math.round(i)<<2|Math.round(n)<<1|Math.round(r));return s===2&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(t,r,n)=>ce.ansi256ToAnsi(ce.rgbToAnsi256(t,r,n)),enumerable:!1},hexToAnsi:{value:t=>ce.ansi256ToAnsi(ce.hexToAnsi256(t)),enumerable:!1}}),ce}var ZG=QG(),Ht=ZG;function aO(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function uO(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function cO(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function JG(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function lO(e,{ambiguousAsWide:t=!1}={}){return JG(e),uO(e)||cO(e)||t&&aO(e)?2:1}function Eg(e){return Number.isInteger(e)?lO(e)===2:!1}var eq=new Set([27,155]),tq="0".codePointAt(0),rq="9".codePointAt(0),Ag=new Set,Sg=new Map;for(let[e,t]of Ht.codes)Ag.add(Ht.color.ansi(t)),Sg.set(Ht.color.ansi(e),Ht.color.ansi(t));function nq(e){if(Ag.has(e))return e;if(Sg.has(e))return Sg.get(e);e=e.slice(2),e.includes(";")&&(e=e[0]+"0");let t=Ht.codes.get(Number.parseInt(e,10));return t?Ht.color.ansi(t):Ht.reset.open}function iq(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(r>=tq&&r<=rq)return t}return-1}function sq(e,t){e=e.slice(t,t+19);let r=iq(e);if(r!==-1){let n=e.indexOf("m",r);return n===-1&&(n=e.length),e.slice(0,n+1)}}function oq(e,t=Number.POSITIVE_INFINITY){let r=[],n=0,i=0;for(;n<e.length;){let s=e.codePointAt(n);if(eq.has(s)){let u=sq(e,n);if(u){r.push({type:"ansi",code:u,endCode:nq(u)}),n+=u.length;continue}}let o=Eg(s),a=String.fromCodePoint(s);if(r.push({type:"character",value:a,isFullWidth:o}),n+=a.length,i+=o?2:a.length,i>=t)break}return r}function dO(e){let t=[];for(let r of e)r.code===Ht.reset.open?t=[]:Ag.has(r.code)?t=t.filter(n=>n.endCode!==r.code):(t=t.filter(n=>n.endCode!==r.endCode),t.push(r));return t}function aq(e){return dO(e).map(({endCode:n})=>n).reverse().join("")}function ws(e,t,r){let n=oq(e,r),i=[],s=0,o="",a=!1;for(let u of n){if(r!==void 0&&s>=r)break;u.type==="ansi"?(i.push(u),a&&(o+=u.code)):(!a&&s>=t&&(a=!0,i=dO(i),o=i.map(({code:c})=>c).join("")),a&&(o+=u.value),s+=u.isFullWidth?2:u.value.length)}return o+=aq(i),o}var zc=class e{tracer=new ht("yarn.build");nodes={};size=0;runSize=0;ran=new Set;dryRunCallback=()=>{};addNode(t){if(this.nodes[t])return this.nodes[t];let r=new Ns(t);return this.nodes[t]=r,this.size=Object.keys(this.nodes).length,this.checkCyclical(r),r}addRunCallback(t,r){let n=t;this.nodes[t.id]||(n=this.addNode(t.id)),n.runCallback||(n.addRunCallback(r),this.runSize++)}getNode(t){if(this.nodes[t])return this.nodes[t]}resetRuns(){this.ran=new Set}checkCyclical(t){let r=new Set,n=new Set;this.resolveNode(t,r,n)}resolveNode(t,r,n){n.add(t.id),Object.keys(t.dependencies).forEach(i=>{let s=t.dependencies[i];if(!r.has(s.id)){if(n.has(s.id))throw new xs(t.id,s.id);this.resolveNode(s,r,n)}}),r.add(t.id),n.delete(t.id)}async run(t,r,n=!1){return await this.tracer.startSpan({name:"run commands",ctx:t},async({ctx:i})=>{let s=new Set,o=new Set,a={};for(let u of r)this.resolveQueue(u,s,a);return n?(await this.dryRunLoop(s,a,o,0),a):(await new Promise(u=>{this.workLoop(i,s,a,o,u)}),a)})}async dryRunLoop(t,r,n,i=0){if(n.forEach((s,o)=>{this.dryRunCallback(s,i-1),r[s.id]={success:!0,done:!0},n.delete(o)}),t.size!==0&&t.forEach(s=>{s.canStart(r)&&s?.node?.runCallback&&(n.add(s.node),t.delete(s))}),n.size!=0)return await this.dryRunLoop(t,r,n,i+1)}workLoop(t,r,n,i,s){if(r.size!==0&&r.forEach(o=>{o.canStart(n)&&(o?.node?.runCallback?(o?.node?.runCallback(t,n),i.add(o.node)):n[o.node.id]={success:!0,done:!0},r.delete(o))}),i.forEach((o,a)=>{n[o.id].done&&i.delete(a)}),Object.keys(n).map(o=>n[o]?.done??!0).every(o=>o===!0)){s();return}setTimeout(()=>this.workLoop(t,r,n,i,s),30)}resolveQueue(t,r,n){let i=[];if(Object.keys(t.dependencies).forEach(s=>{let o=t.dependencies[s];if(i.push(o.id),!n[o.id]&&o.runCallback){n[o.id]={...e.RunLogInit};let a=this.resolveQueue(o,r,n),u={node:o,canStart:e.QueueItemCanStart(a)};r.add(u)}}),!n[t.id]&&t.runCallback){n[t.id]={...e.RunLogInit};let s={node:t,canStart:e.QueueItemCanStart(i)};r.add(s)}return i}static RunLogInit={success:!1,done:!1};static QueueItemCanStart=t=>r=>t.map(n=>r[n]?.done??!0).every(n=>n===!0)},Ns=class e{id;dependencies;cancelled=!1;skip=!1;runCallback;constructor(t){this.id=t,this.dependencies={}}addDependency(t){return this.dependencies[t.id]||(this.dependencies[t.id]=t),this}addRunCallback(t){return this.runCallback?this:(this.runCallback=(r,n)=>{if(!this.cancelled)return t(r,e.cancelDependentJobs(this)).then(i=>{n[this.id]={done:!0,success:i}})},this)}static cancelDependentJobs(t){return()=>{typeof t.dependencies>"u"||Object.keys(t.dependencies).forEach(r=>{let n=t.dependencies[r];n.cancelled=!0})}}},xs=class extends Error{code;node;dep;constructor(t,r){super(""),this.name="CyclicDependencyError",this.code="YN0003",this.node=t,this.dep=r}};var uq="\x1B",rt=uq+"[",Lt=class e{static row=0;static column=0;static pad(t=1){for(let r=0;r<t;r++)process.stdout.write(`
`);e.cursorUp(t)}static cursorUp(t=1){process.stdout.write(rt+`${t}A`)}static cursorSave(){process.stdout.write(rt+"s")}static cursorRestore(){process.stdout.write(rt+"u")}static autoWrap(t){t?process.stdout.write(rt+"?7h"):process.stdout.write(rt+"?7l")}static clearScreenDown(){process.stdout.write(rt+"J")}static async cursorPositionReport(){return new Promise(t=>{process.stdin.setRawMode(!0),process.stdin.once("data",r=>{process.stdin.setRawMode(!1),process.stdin.pause();let[n,i]=r.slice(2,r.length-1).toString().split(";").map(Number);t({x:i,y:n})}),process.stdout.write(rt+"6n")})}static setScrollableRegion(t,r){process.stdout.write(rt+`${t};${r}r`)}static resetScrollableRegion(){process.stdout.write(rt+"r")}static moveTo(t){process.stdout.write(rt+`${t.y};${t.x}H`)}static cursorHome(){process.stdout.write(rt+"H")}static alternateScreen(){process.stdout.write(rt+"?1049h")}static mainScreen(){process.stdout.write(rt+"?1049l")}static linesRequired(t,r){let n=new RegExp(`([^
]{0,${r}})(
)?`,"gm");return(Kr(t).match(n)??[""]).length-1}};var fO=v("child_process"),hO=v("util");var pO=()=>process.platform==="win32"?"windows":"unix";var cq=(0,hO.promisify)(fO.exec),_O=async e=>{let t=pO(),r=(({platform:i,pid:s})=>{switch(i){case"unix":return`pgrep "-P ${s}"`;case"windows":return`wmic process where (ParentProcessId=${s}) get ProcessId`;default:throw new Error("Unable to find parent process")}})({platform:t,pid:e}),n=[];try{let{stdout:i}=await cq(r);n=i.split(`
`).filter(Boolean).map(s=>parseInt(s,10)).filter(s=>!isNaN(s))}catch{}return n};var mi={hasBeenTerminated:!1,callId:0},Qc=async(e=0)=>{if(e!==mi.callId||mi.hasBeenTerminated)return;let t=process.pid;(await _O(t)).forEach(i=>{try{process.kill(i,"SIGKILL")}catch{}});let n=mi.callId+1;mi.callId=n,setTimeout(async()=>{Qc(n)},50)};var FO=K(N());var J=K(v("path"),1),Cg=K(v("fs"),1),RO=K(v("module"),1);var gO=e=>e!==null&&typeof e=="object",Ei=(e,t)=>Object.assign(new Error(`[${e}]: ${t}`),{code:e}),mO="ERR_INVALID_PACKAGE_CONFIG",Tg="ERR_INVALID_PACKAGE_TARGET",lq="ERR_PACKAGE_PATH_NOT_EXPORTED";var dq=/^\d+$/,pq=/^(\.{1,2}|node_modules)$/i,fq=/\/|\\/,EO=(e=>(e.Export="exports",e.Import="imports",e))(EO||{}),yg=(e,t,r,n,i)=>{if(t==null)return[];if(typeof t=="string"){let[s,...o]=t.split(fq);if(s===".."||o.some(a=>pq.test(a)))throw Ei(Tg,`Invalid "${e}" target "${t}" defined in the package config`);return[i?t.replace(/\*/g,i):t]}if(Array.isArray(t))return t.flatMap(s=>yg(e,s,r,n,i));if(gO(t)){for(let s of Object.keys(t)){if(dq.test(s))throw Ei(mO,"Cannot contain numeric property keys");if(s==="default"||n.includes(s))return yg(e,t[s],r,n,i)}return[]}throw Ei(Tg,`Invalid "${e}" target "${t}"`)},Ls="*",hq=(e,t)=>{let r=e.indexOf(Ls),n=t.indexOf(Ls);return r===n?t.length>e.length:n>r};function _q(e,t){if(!t.includes(Ls)&&e.hasOwnProperty(t))return[t];let r,n;for(let i of Object.keys(e))if(i.includes(Ls)){let[s,o,a]=i.split(Ls);if(a===void 0&&t.startsWith(s)&&t.endsWith(o)){let u=t.slice(s.length,-o.length||void 0);u&&(!r||hq(r,i))&&(r=i,n=u)}}return[r,n]}var gq=e=>Object.keys(e).reduce((t,r)=>{let n=r===""||r[0]!==".";if(t===void 0||t===n)return n;throw Ei(mO,'"exports" cannot contain some keys starting with "." and some not')},void 0),mq=/^\w+:/,SO=(e,t,r)=>{if(!e)throw new Error('"exports" is required');t=t===""?".":`./${t}`,(typeof e=="string"||Array.isArray(e)||gO(e)&&gq(e))&&(e={".":e});let[n,i]=_q(e,t),s=yg(EO.Export,e[n],t,r,i);if(s.length===0)throw Ei(lq,t==="."?'No "exports" main defined':`Package subpath '${t}' is not defined by "exports"`);for(let o of s)if(!o.startsWith("./")&&!mq.test(o))throw Ei(Tg,`Invalid "exports" target "${o}" defined in the package config`);return s};function Xr(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}var el=e=>{let t=Cg.default[e];return function(r,...n){let i=`${e}:${n.join(":")}`,s=r?.get(i);return s===void 0&&(s=Reflect.apply(t,Cg.default,n),r?.set(i,s)),s}},gt=el("existsSync"),Eq=el("realpathSync"),Sq=el("readFileSync"),Zc=el("statSync"),Aq=(e,t,r)=>{for(;;){let n=J.default.posix.join(e,t);if(gt(r,n))return n;let i=J.default.dirname(e);if(i===e)return;e=i}},Tq=/^\.{1,2}(\/.*)?$/,bg=e=>{let t=Xr(e);return Tq.test(t)?t:`./${t}`};function yq(e,t=!1){let r=e.length,n=0,i="",s=0,o=16,a=0,u=0,c=0,l=0,p=0;function f(b,F){let O=0,D=0;for(;O<b||!F;){let I=e.charCodeAt(n);if(I>=48&&I<=57)D=D*16+I-48;else if(I>=65&&I<=70)D=D*16+I-65+10;else if(I>=97&&I<=102)D=D*16+I-97+10;else break;n++,O++}return O<b&&(D=-1),D}function _(b){n=b,i="",s=0,o=16,p=0}function h(){let b=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&Si(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&Si(e.charCodeAt(n)))for(n++;n<e.length&&Si(e.charCodeAt(n));)n++;else return p=3,e.substring(b,n);let F=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&Si(e.charCodeAt(n))){for(n++;n<e.length&&Si(e.charCodeAt(n));)n++;F=n}else p=3;return e.substring(b,F)}function g(){let b="",F=n;for(;;){if(n>=r){b+=e.substring(F,n),p=2;break}let O=e.charCodeAt(n);if(O===34){b+=e.substring(F,n),n++;break}if(O===92){if(b+=e.substring(F,n),n++,n>=r){p=2;break}switch(e.charCodeAt(n++)){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:let D=f(4,!0);D>=0?b+=String.fromCharCode(D):p=4;break;default:p=5}F=n;continue}if(O>=0&&O<=31)if(Ms(O)){b+=e.substring(F,n),p=2;break}else p=6;n++}return b}function T(){if(i="",p=0,s=n,u=a,l=c,n>=r)return s=r,o=17;let b=e.charCodeAt(n);if(Rg(b)){do n++,i+=String.fromCharCode(b),b=e.charCodeAt(n);while(Rg(b));return o=15}if(Ms(b))return n++,i+=String.fromCharCode(b),b===13&&e.charCodeAt(n)===10&&(n++,i+=`
`),a++,c=n,o=14;switch(b){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,i=g(),o=10;case 47:let F=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<r&&!Ms(e.charCodeAt(n));)n++;return i=e.substring(F,n),o=12}if(e.charCodeAt(n+1)===42){n+=2;let O=r-1,D=!1;for(;n<O;){let I=e.charCodeAt(n);if(I===42&&e.charCodeAt(n+1)===47){n+=2,D=!0;break}n++,Ms(I)&&(I===13&&e.charCodeAt(n)===10&&n++,a++,c=n)}return D||(n++,p=1),i=e.substring(F,n),o=13}return i+=String.fromCharCode(b),n++,o=16;case 45:if(i+=String.fromCharCode(b),n++,n===r||!Si(e.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=h(),o=11;default:for(;n<r&&A(b);)n++,b=e.charCodeAt(n);if(s!==n){switch(i=e.substring(s,n),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(b),n++,o=16}}function A(b){if(Rg(b)||Ms(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){let b;do b=T();while(b>=12&&b<=15);return b}return{setPosition:_,getPosition:()=>n,scan:t?y:T,getToken:()=>o,getTokenValue:()=>i,getTokenOffset:()=>s,getTokenLength:()=>n-s,getTokenStartLine:()=>u,getTokenStartCharacter:()=>s-l,getTokenError:()=>p}}function Rg(e){return e===32||e===9}function Ms(e){return e===10||e===13}function Si(e){return e>=48&&e<=57}var AO;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(AO||(AO={}));var Jc;(function(e){e.DEFAULT={allowTrailingComma:!1}})(Jc||(Jc={}));function bq(e,t=[],r=Jc.DEFAULT){let n=null,i=[],s=[];function o(a){Array.isArray(i)?i.push(a):n!==null&&(i[n]=a)}return Rq(e,{onObjectBegin:()=>{let a={};o(a),s.push(i),i=a,n=null},onObjectProperty:a=>{n=a},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{let a=[];o(a),s.push(i),i=a,n=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(a,u,c)=>{t.push({error:a,offset:u,length:c})}},r),i[0]}function Rq(e,t,r=Jc.DEFAULT){let n=yq(e,!1),i=[];function s(R){return R?()=>R(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function o(R){return R?()=>R(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(R){return R?L=>R(L,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function u(R){return R?L=>R(L,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let c=o(t.onObjectBegin),l=u(t.onObjectProperty),p=s(t.onObjectEnd),f=o(t.onArrayBegin),_=s(t.onArrayEnd),h=u(t.onLiteralValue),g=a(t.onSeparator),T=s(t.onComment),A=a(t.onError),y=r&&r.disallowComments,b=r&&r.allowTrailingComma;function F(){for(;;){let R=n.scan();switch(n.getTokenError()){case 4:O(14);break;case 5:O(15);break;case 3:O(13);break;case 1:y||O(11);break;case 2:O(12);break;case 6:O(16);break}switch(R){case 12:case 13:y?O(10):T();break;case 16:O(1);break;case 15:case 14:break;default:return R}}}function O(R,L=[],he=[]){if(A(R),L.length+he.length>0){let m=n.getToken();for(;m!==17;){if(L.indexOf(m)!==-1){F();break}else if(he.indexOf(m)!==-1)break;m=F()}}}function D(R){let L=n.getTokenValue();return R?h(L):(l(L),i.push(L)),F(),!0}function I(){switch(n.getToken()){case 11:let R=n.getTokenValue(),L=Number(R);isNaN(L)&&(O(2),L=0),h(L);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return F(),!0}function M(){return n.getToken()!==10?(O(3,[],[2,5]),!1):(D(!1),n.getToken()===6?(g(":"),F(),E()||O(4,[],[2,5])):O(5,[],[2,5]),i.pop(),!0)}function G(){c(),F();let R=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(R||O(4,[],[]),g(","),F(),n.getToken()===2&&b)break}else R&&O(6,[],[]);M()||O(4,[],[2,5]),R=!0}return p(),n.getToken()!==2?O(7,[2],[]):F(),!0}function Q(){f(),F();let R=!0,L=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(L||O(4,[],[]),g(","),F(),n.getToken()===4&&b)break}else L&&O(6,[],[]);R?(i.push(0),R=!1):i[i.length-1]++,E()||O(4,[],[4,5]),L=!0}return _(),R||i.pop(),n.getToken()!==4?O(8,[4],[]):F(),!0}function E(){switch(n.getToken()){case 3:return Q();case 1:return G();case 10:return D(!0);default:return I()}}return F(),n.getToken()===17?r.allowEmptyContent?!0:(O(4,[],[]),!1):E()?(n.getToken()!==17&&O(9,[],[]),!0):(O(4,[],[]),!1)}var TO;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(TO||(TO={}));var yO;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(yO||(yO={}));var vq=bq,bO;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(bO||(bO={}));var vO=(e,t)=>vq(Sq(t,e,"utf8")),Oq=Symbol("implicitBaseUrl"),Pq=()=>{let{findPnpApi:e}=RO.default;return e&&e(process.cwd())},vg=(e,t,r,n)=>{let i=`resolveFromPackageJsonPath:${e}:${t}:${r}`;if(n!=null&&n.has(i))return n.get(i);let s=vO(e,n);if(!s)return;let o=t||"tsconfig.json";if(!r&&s.exports)try{let[a]=SO(s.exports,t,["require","types"]);o=a}catch{return!1}else!t&&s.tsconfig&&(o=s.tsconfig);return o=J.default.join(e,"..",o),n?.set(i,o),o},Og="package.json",Pg="tsconfig.json",Cq=(e,t,r)=>{let n=e;if(e===".."&&(n=J.default.join(n,Pg)),e[0]==="."&&(n=J.default.resolve(t,n)),J.default.isAbsolute(n)){if(gt(r,n)){if(Zc(r,n).isFile())return n}else if(!n.endsWith(".json")){let _=`${n}.json`;if(gt(r,_))return _}return}let[i,...s]=e.split("/"),o=i[0]==="@"?`${i}/${s.shift()}`:i,a=s.join("/"),u=Pq();if(u){let{resolveRequest:_}=u;try{if(o===e){let h=_(J.default.join(o,Og),t);if(h){let g=vg(h,a,!1,r);if(g&&gt(r,g))return g}}else{let h;try{h=_(e,t,{extensions:[".json"]})}catch{h=_(J.default.join(e,Pg),t)}if(h)return h}}catch{}}let c=Aq(t,J.default.join("node_modules",o),r);if(!c||!Zc(r,c).isDirectory())return;let l=J.default.join(c,Og);if(gt(r,l)){let _=vg(l,a,!1,r);if(_===!1)return;if(_&&gt(r,_)&&Zc(r,_).isFile())return _}let p=J.default.join(c,a),f=p.endsWith(".json");if(!f){let _=`${p}.json`;if(gt(r,_))return _}if(gt(r,p)){if(Zc(r,p).isDirectory()){let _=J.default.join(p,Og);if(gt(r,_)){let g=vg(_,"",!0,r);if(g&&gt(r,g))return g}let h=J.default.join(p,Pg);if(gt(r,h))return h}else if(f)return p}},Iq=(e,t,r,n)=>{let i=Cq(e,t,n);if(!i)throw new Error(`File '${e}' not found.`);if(r.has(i))throw new Error(`Circularity detected while resolving configuration: ${i}`);r.add(i);let s=J.default.dirname(i),o=OO(i,n,r);delete o.references;let{compilerOptions:a}=o;if(a){let u=["baseUrl","outDir"];for(let c of u){let l=a[c];l&&(a[c]=Xr(J.default.relative(t,J.default.join(s,l)))||"./")}}return o.files&&(o.files=o.files.map(u=>Xr(J.default.relative(t,J.default.join(s,u))))),o.include&&(o.include=o.include.map(u=>Xr(J.default.relative(t,J.default.join(s,u))))),o.exclude&&(o.exclude=o.exclude.map(u=>Xr(J.default.relative(t,J.default.join(s,u))))),o},OO=(e,t,r=new Set)=>{let n;try{n=Eq(t,e)}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}let i=vO(n,t)||{};if(typeof i!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);let s=J.default.dirname(n);if(i.compilerOptions){let{compilerOptions:o}=i;o.paths&&!o.baseUrl&&(o[Oq]=s)}if(i.extends){let o=Array.isArray(i.extends)?i.extends:[i.extends];delete i.extends;for(let a of o.reverse()){let u=Iq(a,s,r,t),c={...u,...i,compilerOptions:{...u.compilerOptions,...i.compilerOptions}};u.watchOptions&&(c.watchOptions={...u.watchOptions,...i.watchOptions}),i=c}}if(i.compilerOptions){let{compilerOptions:o}=i,a=["baseUrl","rootDir"];for(let c of a){let l=o[c];if(l){let p=J.default.resolve(s,l),f=bg(J.default.relative(s,p));o[c]=f}}let{outDir:u}=o;u&&(Array.isArray(i.exclude)||(i.exclude=[]),i.exclude.includes(u)||i.exclude.push(u),o.outDir=bg(u))}else i.compilerOptions={};if(i.files&&(i.files=i.files.map(bg)),i.include&&(i.include=i.include.map(Xr)),i.watchOptions){let{watchOptions:o}=i;o.excludeDirectories&&(o.excludeDirectories=o.excludeDirectories.map(a=>Xr(J.default.resolve(s,a))))}return i},PO=(e,t=new Map)=>OO(e,t);var{join:F6}=J.default.posix;var wq=["node_modules","bower_components","jspm_packages"],B6=`(?!(${wq.join("|")})(/|$))`;var U6=process.platform==="win32";var BO=K(LO()),xq="yarn.build.json",UO=80,Lq="-".repeat(UO);var xg=class{tracer=new ht("yarn.build");project;configuration;pluginConfiguration;report;runCommand;cli;runLog;runGraph=new zc;runLength=0;runTargets=[];runMutexes={};currentRunTarget;dryRun=!1;ignoreRunCache=!1;verbose=!1;continueOnError=!1;concurrency;limit;queue;entrypoints=new Set;excluded=new Set;runReporter=new DO.EventEmitter;ignoreDependencies=!1;failFast=!1;runReport={mutex:new Ng.Mutex,totalJobs:0,skipCount:0,previousOutput:"",successCount:0,failCount:0,ignoredCount:0,workspaces:{},done:!1};header="";nextUnitOfWork=[];errorLogFile;excludeWorkspacePredicate;checkIfRunIsRequiredCache={};planCache={};hasSetup=!1;constructor({project:t,report:r,runCommand:n,cli:i,configuration:s,pluginConfiguration:o,dryRun:a,ignoreRunCache:u,verbose:c,concurrency:l,continueOnError:p,excludeWorkspacePredicate:f,ignoreDependencies:_,failFast:h}){let g=l??(0,MO.cpus)().length;this.configuration=s,this.pluginConfiguration=o,this.project=t,this.report=r,this.runCommand=n,this.cli=i,this.dryRun=a,this.ignoreRunCache=u,this.verbose=c,this.concurrency=g,this.continueOnError=p,this.limit=hg(g),this.queue=new Cs({concurrency:g,carryoverConcurrencyCount:!0,timeout:5e4,throwOnTimeout:!0,autoStart:!0}),this.excludeWorkspacePredicate=f,this.verbose&&(this.errorLogFile=Y.xfs.createWriteStream(this.getRunErrorPath(),{flags:"a"})),this.ignoreDependencies=_,this.failFast=h}async setup(){this.runLog=await this.readRunLog(),this.setupRunReporter(),this.hasSetup=!0}getRunErrorPath(){return Y.ppath.resolve(this.project.cwd,"yarn.build-error.log")}getRunLogPath(){return Y.ppath.resolve(this.project.cwd,".yarn",xq)}async readRunLog(){let t=new Map;try{let r=await Y.xfs.readJsonPromise(this.getRunLogPath());if(r&&r.packages)for(let n in r.packages)t.set(n,{checksum:r.packages[n].checksum,status:r.packages[n].status,rerun:r.packages[n].rerun,command:this.runCommand})}catch{}return t}async saveRunLog(){if(!this.runLog)return;let t;try{t=await Y.xfs.readJsonPromise(this.getRunLogPath())}catch{}let r={comment:"This is an auto-generated file, it keeps track of whats been built. This is a local file, don't store this in version control.",packages:{...t&&t.packages}};for(let[n]of this.runLog)r.packages[n]={...r.packages[n],...this.runLog.get(n)};await Y.xfs.writeJsonPromise(this.getRunLogPath(),r)}setupRunReporter=()=>{this.runReporter.on("pending",(t,r,n)=>{this.runReport.mutex.acquire().then(i=>{this.runReport.workspaces[t]={name:n,stdout:[],stderr:[],done:!1,fail:!1,locator:r},i()})}),this.runReporter.on("start",(t,r,n,i)=>{this.runReport.mutex.acquire().then(s=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],start:Date.now(),runScript:i,name:n,locator:r},s()})}),this.runReporter.on("info",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stdout.push(r),n()})}),this.runReporter.on("error",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),n()})}),this.runReporter.on("success",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],done:!0},this.runReport.successCount++;let n=this.runReport.workspaces[t];if(Ye.default){let i=`\u2705 ${t}`.padEnd(60),s=Qr(0,n.runtimeSeconds??0).padStart(19);process.stdout.write(`${i}${s}
`)}r()})}),this.runReporter.on("skipped",t=>{this.runReport.mutex.acquire().then(r=>{if(this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].skipped=!0,this.runReport.skipCount++,r(),Ye.default){let n=`\u23E9 ${t} `.padEnd(60),i="--".padStart(19);process.stdout.write(`${n}${i}
`)}})}),this.runReporter.on("ignored",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].ignored=!0,this.runReport.ignoredCount++,r();let n=this.runReport.workspaces[t],i=this.runLog?.get(`${t}#${this.runCommand}`);if(Ye.default){let s=`[IGNORE${i?.exitCode?`: ${i?.exitCode}`:""}] ${n.name} `.padEnd(60),o="--".padStart(19);process.stdout.write(`${s}${o}
`)}})}),this.runReporter.on("fail",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].fail=!0,this.runReport.failCount++,n();let i=this.runReport.workspaces[t],s=this.runLog?.get(`${t}#${this.runCommand}`);if(Ye.default){let o=`\u274C ${t}`.padEnd(50),a=`${s?.exitCode?`(exit code: ${s?.exitCode})`:"\u2192"} ${Qr(0,i.runtimeSeconds??0)}`.padStart(29);process.stdout.write(`${o}${a}
`)}})})};getDependenciesCount=async t=>{let r=0;for(let n of j.Manifest.hardDependencies)for(let i of t.manifest.getForScope(n).values())this.project.tryWorkspaceByDescriptor(i)!==null&&(r+=1);return r};removeFromExcluded(t){this.excluded.has(t)&&this.excluded.delete(t)}async addRunTarget(t){if(this.excluded.has(t))return;if(this.excludeWorkspacePredicate(t)){this.excluded.add(t);return}if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runGraph.addNode(t.relativeCwd);await this.plan(r,t)}plan=async(t,r)=>{if(!t)throw new Error("Internal error: lost reference to parent workspace. Please open an issue.");if(typeof this.planCache[r.relativeCwd]<"u")return this.planCache[r.relativeCwd];this.runGraph.checkCyclical(t);let n=!1,i=!1;if(this.runMutexes[r.relativeCwd]=new Ng.Mutex,this.ignoreDependencies===!1)for(let o of j.Manifest.hardDependencies)for(let a of r.manifest.getForScope(o).values()){let u=this.project.tryWorkspaceByDescriptor(a);if(u===null||this.excludeWorkspacePredicate(u)||typeof u.manifest.scripts.get(this.runCommand)>"u")continue;let c=this.runGraph.addNode(u.relativeCwd);t.addDependency(c),this.runGraph.checkCyclical(c),await this.plan(c,u)&&(this.runGraph.addRunCallback(c,this.createRunItem(u)),i=!0,this.removeFromExcluded(u))}let s=!1;if(r!==this.project.topLevelWorkspace&&(s=await this.checkIfRunIsRequired(r)),this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator),i||s)n=!0,this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator,`${r.manifest.name?.scope?`@${r.manifest.name?.scope}/`:""}${r.manifest.name?.name}`),this.runGraph.addRunCallback(t,this.createRunItem(r)),this.removeFromExcluded(r),this.entrypoints.add(t),this.runTargets.push(r);else{let o=this.runLog?.get(`${r.relativeCwd}#${this.runCommand}`);o&&this.runLog?.set(`${r.relativeCwd}#${this.runCommand}`,{checksum:o.checksum,status:"succeeded",rerun:!1,command:this.runCommand})}if(n){let o=r.getRecursiveWorkspaceDependents();for(let u of o)this.markWorkspaceForRerun(u);let a=Array.from(r.getRecursiveWorkspaceDependencies()).filter(u=>this.isWorkspaceMarkedForRerun(u));for(let u of a){let c=u.getRecursiveWorkspaceDependents();for(let l of c)this.markWorkspaceForRerun(l)}}return this.planCache[r.relativeCwd]=n,n};markWorkspaceForRerun(t){if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:r?.checksum??"",status:"succeeded",rerun:!0,command:this.runCommand})}isWorkspaceMarkedForRerun(t){return typeof t.manifest.scripts.get(this.runCommand)>"u"?!1:this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`)?.rerun??!1}async checkIfRunIsRequired(t){if(typeof this.checkIfRunIsRequiredCache[t.relativeCwd]<"u")return this.checkIfRunIsRequiredCache[t.relativeCwd];if(typeof t.manifest.scripts.get(this.runCommand)!="string")return this.checkIfRunIsRequiredCache[t.relativeCwd]=!1,!1;let r=!1;this.ignoreRunCache&&(r=!0);let n=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);n?.rerun&&(r=!0);for(let f of t.getRecursiveWorkspaceDependencies())if(this.checkIfRunIsRequiredCache[f.relativeCwd]===!0){r=!0;break}let i=uT(t.manifest.raw),s=i?.input!=null,o=typeof i?.output<"u",a=i.input??this.pluginConfiguration.folders.input,u=new Set,c=new Set(Array.isArray(a)?a:[a]),l=i.output??[],p=new Set(Array.isArray(l)?l:[l]);if(o||(typeof t?.manifest?.raw?.bin=="string"?p.add(t.manifest.raw.bin):typeof t?.manifest?.raw?.directories?.bin=="string"?p.add(t.manifest.raw.directories.bin):typeof t?.manifest?.raw?.files=="string"?p.add(t.manifest.raw.files):Array.isArray(t?.manifest?.raw?.files)?t.manifest.raw.files.forEach(f=>f&&p.add(f)):typeof t?.manifest?.raw?.main=="string"&&p.add(t.manifest.raw.main)),!s||!o)try{let f=i.tsconfig??"tsconfig.json",_=Y.xfs.pathUtils.join(t.cwd,Y.npath.toPortablePath(f));if(await Y.xfs.existsPromise(_)){let g=PO(Y.npath.fromPortablePath(_)),T=Y.ppath.dirname(_);if(!s){if(g.compilerOptions?.incremental){let A=g.compilerOptions.tsBuildInfoFile??`${Y.ppath.basename(_,Y.ppath.extname(_))}.tsbuildinfo`,y=Y.ppath.join(T,Y.npath.toPortablePath(A)),b=Y.ppath.relative(t.cwd,y);u.add(b)}g.include?.forEach(A=>{let y=Y.ppath.join(T,Y.npath.toPortablePath(A)),b=Y.ppath.relative(t.cwd,y);c.add(b)}),g.exclude?.forEach(A=>{let y=Y.ppath.join(T,Y.npath.toPortablePath(A)),b=Y.ppath.relative(t.cwd,y);u.add(b)})}if(!o&&g.compilerOptions?.outDir!=null){let A=Y.ppath.join(T,Y.npath.toPortablePath(Y.npath.toPortablePath(g.compilerOptions.outDir))),y=Y.ppath.relative(t.cwd,A);p.add(y)}}}catch(f){console.warn(t.relativeCwd,`
`,f)}p.size===0&&(Array.isArray(this.pluginConfiguration.folders.output)?this.pluginConfiguration.folders.output.forEach(f=>f&&p.add(f)):typeof this.pluginConfiguration.folders.output=="string"&&p.add(this.pluginConfiguration.folders.output));{let f=[...new Set(["node_modules",...p,...u])].map(g=>Y.npath.toPortablePath(g)),_=[...c].map(g=>Y.npath.toPortablePath(g)),h=await this.runReport.mutex.acquire();try{let g=await Mq(t.cwd,_,f);if(n?.checksum!==g&&(r=!0),!r){let T=Y.npath.fromPortablePath(t.cwd);(await Promise.all([...p].map(async y=>{try{return(await Ci(y,{dot:!0,cwd:T})).length===0}catch{return!1}}))).some(y=>y===!0)&&(r=!0)}this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:g,status:r?"succeeded":"pending",rerun:r,command:this.runCommand})}catch(g){this.runReport.workspaces[t.relativeCwd]?.stderr.push(new Error(`${t.relativeCwd}: failed to get lastModified (${g})`))}finally{h()}}return this.checkIfRunIsRequiredCache[t.relativeCwd]=r,r}performDryRun=async t=>await this.tracer.startSpan({name:"performDryRun",ctx:t},async({ctx:r})=>{let n=this.concurrency;this.concurrency=1;let i="",s={1:[]};this.runGraph.dryRunCallback=(u,c)=>{s[c]?s[c].push(u.id):s[c]=[u.id]},await this.runGraph.run(r,Array.from(this.entrypoints),!0);let o=(u,c,l,p)=>{let f=l?"\u2514\u2500":p&&l?"\u2514\u2500\u252C\u2500":"\u251C\u2500";return`${u==0?"":"  ".repeat(u)}${f}[${u}] ${c}`},a=Object.keys(s);return a.forEach((u,c)=>{let l=parseInt(u),p=s[l],f=c==a.length-1;p.forEach((_,h)=>{let g=this.runGraph.getNode(_);i+=o(l,_,h==p.length-1,f),g instanceof Ns&&g.skip&&(i+="(skip)"),i+=`
`})}),this.concurrency=n,i});run=async t=>await this.tracer.startSpan({name:"command supervisor run",ctx:t},async({ctx:r})=>{let n="";if(this.hasSetup===!1)throw new Error("RunSupervisor is not setup, you need to call await supervisor.setup()");if(this.runReport.runStart=Date.now(),(Ye.default||this.dryRun)&&(n+=`${this.formatHeader("Run Order")+`
`}`,n+=await this.performDryRun(r),Ye.default||(n+=`${this.formatHeader(`Dry Run / Command: ${this.runCommand} / Total: ${this.runGraph.runSize}`,0,!0)+`
`}`),process.stdout.write(n),n="",this.dryRun))return!0;Ye.default||Lt.pad(this.concurrency+3),Ye.default&&process.stdout.write(`
${this.formatHeader(`Run / Command: ${this.runCommand} / Concurrency: ${this.concurrency}`,0,!1)+`
`}`),this.raf(this.waitUntilDone),this.currentRunTarget=this.runTargets.length>1?"All":this.runTargets[0]?.relativeCwd??"Nothing to run",Ye.default||process.stderr.write(`
`),this.header=this.generateHeaderString(),await this.runGraph.run(r,Array.from(this.entrypoints));let i=await this.runReport.mutex.acquire();this.runReport.done=!0,i();let s=this.generateFinalReport();return typeof s=="string"&&process.stdout.write(`
${s}
`),await this.saveRunLog(),this.runReport.failCount===0});raf=t=>{setImmediate(()=>t(Date.now()))};waitUntilDone=t=>{if(this.runReport.done)return;let r=90,n="";Ye.default?this.updateProgressCI(t):(n=this.generateProgressString(t),Lt.cursorUp(Lt.linesRequired(this.runReport.previousOutput,process.stdout.columns)),Lt.clearScreenDown()),typeof n<"u"&&typeof n=="string"&&process.stdout.write(n),this.runReport.previousOutput=n,Dq(r).then(()=>{this.raf(this.waitUntilDone)})};grey=t=>j.formatUtils.pretty(this.configuration,t,"grey");formatHeader(t,r=0,n=!1){let i="-",s=i.repeat(r),o=this.grey(s),a=this.grey("["),u=this.grey("]"),c=`${o}${a} ${t} ${u}`,l=Kr(c).length,p=n?"[ yarn.build ]":"",f=Math.max(UO-(l+p.length),0),_=i.repeat(f),h=this.grey(_),g=this.grey(p);return`${c}${h}${g}`}generateHeaderString(){return`${j.formatUtils.pretty(this.configuration,`${this.runCommand}`,j.FormatType.CODE)} for ${j.formatUtils.pretty(this.configuration,this.currentRunTarget?this.currentRunTarget:"",j.FormatType.SCOPE)}${this.dryRun?j.formatUtils.pretty(this.configuration," --dry-run",j.FormatType.NAME):""}`}updateRuntime(t){for(let r in this.runReport.workspaces){let n=this.runReport.workspaces[r];!n||!n.start||n.done||this.runReport.runStart&&(this.runReport.workspaces[r].runtimeSeconds=t-n.start)}}updateProgressCI(t){this.updateRuntime(t)}generateProgressString(t){let r="",n=o=>this.grey(`[${o}]`),i=j.formatUtils.pretty(this.configuration,"IDLE","grey");r+=this.formatHeader(this.generateHeaderString())+`
`,this.updateRuntime(t);let s=1;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(!a||!a.start||a.done)continue;let u=j.formatUtils.pretty(this.configuration,o,j.FormatType.PATH),c=j.formatUtils.pretty(this.configuration,`(${a.runScript})`,j.FormatType.REFERENCE),l=a.start?j.formatUtils.pretty(this.configuration,Qr(a.start,t),j.FormatType.RANGE):"",p=n(s++),f=" ".repeat(p.length-1),_=j.formatUtils.pretty(this.configuration,a.name,j.FormatType.NAME),h=`${p} ${_}${j.formatUtils.pretty(this.configuration,"@","grey")}${u} ${c} ${l}
`,g="",T="",A="";Kr(h).length>=process.stdout.columns&&(g=`${p} ${u}${_}
`,T=`${f} ${c} ${l}
`,Kr(g).length>=process.stdout.columns&&(g=ws(`${p} ${u}
`,0,process.stdout.columns),T=ws(`${f} ${_}
`,0,process.stdout.columns),A=ws(`${f} ${c} ${l}
`,0,process.stdout.columns)),h=g+T+A),r+=h}for(s;s<this.concurrency+1;)r+=`${n(s++)} ${i}
`;return this.runReport.runStart&&(r+=this.generateRunCountString(t)),r}generateRunCountString=t=>{let r="";if(this.runReport.runStart){let n=j.formatUtils.pretty(this.configuration,`${this.runReport.successCount}`,"green"),i=j.formatUtils.pretty(this.configuration,`${this.runReport.failCount}`,"red"),s=j.formatUtils.pretty(this.configuration,`${this.runGraph.runSize}`,"white");r+=this.formatHeader(`${n}:${i}/${s} ${Qr(this.runReport.runStart,t)}`,0,!0)+`
`}return r};generateFinalReport=()=>{Ye.default||(Lt.cursorUp(Lt.linesRequired(this.runReport.previousOutput,process.stdout.columns)),Lt.clearScreenDown());let t=!1,r="";if(this.runReport.failCount!==0&&(t=!0),this.verbose&&(t=!0),Ye.default&&(t=!0),t){let s=[];r+=`${this.formatHeader(this.header)+`
`}`;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(a.fail&&s.push(o),!(this.runReport.failCount!==0&&a.fail===!1)){if(a.stdout.length!==0||a.stderr.length!==0){let u=this.formatHeader(`Output: ${j.formatUtils.pretty(this.configuration,o,j.FormatType.PATH)}`,2);r+=`
${u+`
`}`}a.stdout.length!==0&&a.stdout.forEach(u=>{u.split(`
`).forEach(l=>{typeof l<"u"&&l.length!==0&&(r+=`${l+`
`}`)})}),a.stderr.length!==0&&(r+=`
${"[stderr]"+`
`}`,a.stderr.forEach(c=>{(c instanceof Error?c.toString():`${c}`).split(`
`).forEach(f=>{typeof f<"u"&&f.length!==0&&(r+=`${f+`
`}`)})}))}}if(s.length>=2){r+=`${this.grey(Lq)+`
`}`;let o=this.grey(`ERROR for script ${this.header}
The following packages returned an error.
`);r+=`${o}`,s.forEach(a=>{let u=`- ${j.formatUtils.pretty(this.configuration,a,j.FormatType.PATH)}`;r+=`${u+`
`}`})}}let n=this.formatHeader(`${j.formatUtils.pretty(this.configuration,`${this.runCommand} finished`,this.runReport.failCount===0?"green":"red")}${this.runReport.failCount!=0?j.formatUtils.pretty(this.configuration,` with ${this.runReport.failCount} errors`,"red"):""}`,0,!0)+`
`;if(r+=`
`+this.formatHeader("Summary")+`
`,this.runReport.runStart){let{successCount:s,failCount:o,ignoredCount:a,skipCount:u}=this.runReport,c=this.runGraph.runSize-a,l=c-o-s-u,p=j.formatUtils.pretty(this.configuration,`Success: ${s}`,"green"),f=j.formatUtils.pretty(this.configuration,`Fail: ${o}`,"red"),_=j.formatUtils.pretty(this.configuration,`Skipped: ${u}`,"white"),h=j.formatUtils.pretty(this.configuration,`Excluded: ${this.excluded.size}`,"white"),g=j.formatUtils.pretty(this.configuration,`Up to date: ${l}`,"white"),T=j.formatUtils.pretty(this.configuration,`Total: ${c}`,"white");if(r+=p+`
`,r+=g+`
`,r+=f+`
`,this.verbose&&o>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let y=this.runReport.workspaces[A];y.fail&&(r+=` - ${j.formatUtils.pretty(this.configuration,A,"grey")}${j.formatUtils.pretty(this.configuration,y.locator,"IDENT")}
`)}),r+=_+`
`,this.verbose&&u>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let y=this.runReport.workspaces[A];y.skipped&&(r+=` - ${j.formatUtils.pretty(this.configuration,A,"grey")}${j.formatUtils.pretty(this.configuration,y.locator,"IDENT")}
`)}),r+=h+`
`,this.verbose&&this.excluded.size>0)for(let A of this.excluded)r+=` - ${j.formatUtils.pretty(this.configuration,A.relativeCwd,"grey")}${j.formatUtils.pretty(this.configuration,A.anchoredLocator,"IDENT")}
`;r+=T+`
`+this.grey("---")+`
`}let i=50;for(let s in this.runReport.workspaces){let o=this.runReport.workspaces[s];i+=o.runtimeSeconds??0}if(this.runReport.runStart&&this.runGraph.runSize>1){let s=i,a=Date.now()-this.runReport.runStart,u=Qr(a,s);r+=`Cumulative: (cpu): ${Qr(0,i)}
`,r+=`Saved: ${u}
`}return this.runReport.runStart&&(r+="Runtime (wall): "+Qr(Date.now(),this.runReport.runStart)+`
`),r+=n,r+=`
`,r};createRunItem=t=>async(r,n)=>await this.limit(async()=>this.tracer.startSpan({name:"command",ctx:r},async({span:i,ctx:s})=>{let o=t.relativeCwd,a={[U.PACKAGE_NAME]:t.anchoredLocator.name,[U.PACKAGE_DIRECTORY]:t.relativeCwd,[U.PACKAGE_COMMAND]:this.runCommand};typeof t.anchoredLocator.scope=="string"&&(a[U.PACKAGE_SCOPE]=`@${t.anchoredLocator.scope}`);let u=t.manifest.scripts.get(this.runCommand);typeof u=="string"&&(a[U.YARN_BUILD_PACKAGE_RUN_COMMAND]=u);let c=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);if(this.runReporter.emit("start",t.relativeCwd,t.anchoredLocator,`${t.manifest.name?.scope?`@${t.manifest.name?.scope}/`:""}${t.manifest.name?.name}`,u),i.addEvent("start"),i.setAttributes(a),!u)return this.verbose&&this.runReporter.emit("info",t.relativeCwd,`[skip] No \`${this.runCommand}\` script in manifest.`),this.runReporter.emit("ignored",t.relativeCwd),i.addEvent("ignored"),!0;try{if(this.runReport.failCount!==0&&!this.continueOnError&&(this.runReporter.emit("skipped",t.relativeCwd),i.addEvent("skipped"),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"skipped",rerun:!1,command:this.runCommand}),i.addEvent("runReport failcount is not 0, exiting early"),this.continueOnError===!1))return!1;let l=await this.cli(s,this.runCommand,t.cwd,this.runReporter,o);if(i.setAttribute(U.YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT,l),l!==0)return this.runReporter.emit("fail",t.relativeCwd),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand,exitCode:`${l}`}),this.failFast===!0&&(Ye.default&&process.stdout.write(`--fail-fast is set, terminating all processes
`),Qc()),!1;this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"succeeded",rerun:!1,command:this.runCommand}),this.runReporter.emit("success",t.relativeCwd)}catch(l){return this.runReporter.emit("fail",t.relativeCwd,l),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand}),(typeof l=="string"||l instanceof Error)&&i.recordException(l),i.setStatus({code:FO.SpanStatusCode.ERROR,message:"Command failed"}),this.continueOnError===!1&&(n(),Qc()),!1}return!1}))},Mq=async(e,t,r)=>{let n=await Ci(t,{cwd:Y.npath.fromPortablePath(e),absolute:!0,expandDirectories:!0,dot:!0,ignore:r});n.sort();let i=await Promise.all(n.map(async s=>{let o=Y.npath.toPortablePath(s),a=await Y.xfs.statPromise(o);return{path:Y.ppath.relative(e,o),size:a.isFile()?a.size:0,lastModified:a.isFile()?a.mtimeMs:0}}));return(0,BO.default)(i)},Qr=(e,t)=>{let r=Math.abs(t-e),n="",i=Math.trunc(r/6e4);return i&&(n+=`${i}m`,r-=i*6e4),r&&(i&&(n+=" "),n+=`${(r/1e3).toFixed(2)}s`),n};function Dq(e){return new Promise(t=>setTimeout(t,e))}var kO=xg;var jO=v("child_process"),GO=v("util"),Fq=(0,GO.promisify)(jO.exec);function Bq(e){let{commit:t,sinceBranch:r}=e;if(t)return`git diff --name-only ..${t}`;if(r)return`git diff --name-only ${r}...`;throw new Error("Unable to determine how to detect changes.")}async function Lg(e){try{let t=Bq(e),{stdout:r}=await Fq(t),n=r.split(`
`),s=e.root.project.workspaces.filter(o=>n.some(a=>a.startsWith(o.relativeCwd.replace(/^\.\//,"")))).reduce((o,a)=>{let u=a.getRecursiveWorkspaceDependents();return new Set([...o,...u,a])},new Set);return Array.from(s.values())}catch{return[]}}var Zr=v("@yarnpkg/core");var qO=(e,t)=>{let r=[];for(let n of e.workspacesCwds){let i=t.workspacesByCwd.get(n);i&&r.push(i,...qO(i,t))}return r},HO=async({targetWorkspace:e,project:t,supervisor:r})=>{try{if(e.workspacesCwds.size!==0){let n=qO(e,t);for(let i of n)for(let s of Zr.Manifest.hardDependencies){for(let o of i.manifest.getForScope(s).values()){let a=t.tryWorkspaceByDescriptor(o);a!==null&&await r.addRunTarget(a)}await r.addRunTarget(i)}await r.addRunTarget(e)}else await r.addRunTarget(e)}catch(n){if(n instanceof xs){let i=`${r.formatHeader("FATAL")}

You have a cyclic dependency.`,s=n.node.length<n.dep.length+4?"\u21B0":"",o=n.node.length>n.dep.length+4?"\u2934":"";i+=`

${Zr.formatUtils.pretty(r.configuration,n.node,"white")} ${s}
 \u21B3 ${Zr.formatUtils.pretty(r.configuration,n.dep,"red")} ${o}

`,i+=Zr.formatUtils.pretty(r.configuration,`
---

To fix this error you must remove the cyclic dependency.

Workspaces cannot directly or indirectly depend on each other. When running
the provided command yarn.build uses a parallelsied topological sort. This
maximises throughput (saving you time) while ensuring dependencies are run in
the order declared.

In a cyclic dependency A depends on B, which depends on A. Or in an indirect cyclic
dependency, A depends on B, which depends on C, and C depends on A.

In both cases A cannot be built, because to we cannot determine which one goes
first.

---
While some tooling may adapt to cyclic dependencies yarn.build cannot. Doing so
is unsound and unpredictable which goes against the stated goals of the tool.

In most cases this issue occurs by accident when you delcare a dependency on the
wrong package.

In some cases yuo may actually want the cyclic dependency. As that's not
possible, find the parts that are shared and move them to their own package
that both packages can depend on.
---

`,"grey"),i+=Zr.formatUtils.pretty(r.configuration,"FATAL: You have a cyclic dependency.","red"),console.error(i),process.exit(2)}else console.error("An error occured in yarn.build.",n)}};var Bs=K(N());var Jr=class extends tl.BaseCommand{static paths=[["build"]];json=fe.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});all=fe.Option.Boolean("-A,--all",!1,{description:"run for all workspaces of a project"});buildCommand=fe.Option.String("-c,--build-command","build",{description:'the command to be run in each package (if available), defaults to "build"'});interlaced=fe.Option.Boolean("-i,--interlaced",!0,{description:"If false it will instead buffer the output from each process and print the resulting buffers only after their source processes have exited. Defaults to false."});verbose=fe.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});dryRun=fe.Option.Boolean("-d,--dry-run",!1,{description:"simulate running a job, but not actually run it"});ignoreBuildCache=fe.Option.Boolean("-r,--ignore-cache",!1,{description:"every package will be built, regardless of whether is has changed or not."});maxConcurrency=fe.Option.String("-m,--max-concurrency",{description:"is the maximum number of jobs that can run at a time, defaults to the number of logical CPUs on the current machine."});continueOnError=fe.Option.Boolean("--continue-on-error",!1,{description:"if a job fails, continue with the rest"});failFast=fe.Option.Boolean("--fail-fast",!1,{description:"if a job fails, terminate other running jobs"});exclude=fe.Option.Array("--exclude",{description:"exclude specifc packages or glob paths from being built, including their dependencies."});excludeCurrent=fe.Option.Boolean("--exclude-current",!1,{description:"run for this workspaces dependencies, but not this workspace. Useful for running as part of a `dev` command."});onlyGitChanges=fe.Option.Boolean("--changes",!1,{description:"only run for packages that were changed in the last commit"});onlyGitChangesSinceCommit=fe.Option.String("--since",{description:"only run for packages that were changed since the given commit"});onlyGitChangesSinceBranch=fe.Option.String("--since-branch",{description:"only run for packages that have changes compared to the give branch. Uses 'git diff --name-only branch...'",arity:1});onlyCurrent=fe.Option.Boolean("--only-current",!1,{description:"only run for the current workspace"});ignoreDependencies=fe.Option.Boolean("--ignore-dependencies",!1,{description:"when true, don't run for packages this one depends on"});buildTargets=fe.Option.Rest({name:"workspaceNames"});static usage=fe.Command.Usage({category:"Build commands",description:"build a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are built in the right order.

    `});forceQuit=!1;commandType="build";async execute(){return await new ht("yarn.build").startSpan({name:`yarn ${this.commandType}`,propegateFromEnv:!0},async({span:r,ctx:n})=>{r.setAttributes({[U.YARN_BUILD_FLAGS_OUTPUT_JSON]:this.json,[U.YARN_BUILD_FLAGS_ALL]:this.all,[U.YARN_BUILD_FLAGS_TARGETS]:this.buildTargets,[U.YARN_BUILD_FLAGS_COMMAND]:this.buildCommand,[U.YARN_BUILD_FLAGS_INTERLACED]:this.interlaced,[U.YARN_BUILD_FLAGS_VERBOSE]:this.verbose,[U.YARN_BUILD_FLAGS_DRY_RUN]:this.dryRun,[U.YARN_BUILD_FLAGS_IGNORE_CACHE]:this.ignoreBuildCache,[U.YARN_BUILD_FLAGS_MAX_CONCURRENCY]:this.maxConcurrency,[U.YARN_BUILD_FLAGS_CONTINUE_ON_ERROR]:this.continueOnError,[U.YARN_BUILD_FLAGS_EXCLUDE]:this.exclude,[U.YARN_BUILD_FLAGS_EXCLUDE_CURRENT]:this.excludeCurrent,[U.YARN_BUILD_FLAGS_CHANGES]:this.onlyGitChanges,[U.YARN_BUILD_FLAGS_SINCE]:this.onlyGitChangesSinceCommit,[U.YARN_BUILD_FLAGS_SINCE_BRANCH]:this.onlyGitChangesSinceBranch,[U.YARN_BUILD_FLAGS_ONLY_CURRENT]:this.onlyCurrent});let i=await je.Configuration.find(this.context.cwd,this.context.plugins),{project:s,workspace:o}=await je.Project.find(i,this.context.cwd);if(!o)throw new tl.WorkspaceRequiredError(s.cwd,this.context.cwd);let a=this.all?s.topLevelWorkspace:o,u=!1;a==s.topLevelWorkspace&&(u=!0);let c=[a,...this.buildTargets.length>0?a.getRecursiveWorkspaceChildren():[]];typeof this.onlyGitChangesSinceBranch=="string"?c=await Lg({root:s.topLevelWorkspace,sinceBranch:this.onlyGitChangesSinceBranch}):(this.onlyGitChanges||this.onlyGitChangesSinceCommit)&&(c=await Lg({root:s.topLevelWorkspace,commit:this.onlyGitChangesSinceCommit??"1"})),Array.isArray(this.exclude)||(this.exclude=[]),this.excludeCurrent&&this.exclude.push(je.structUtils.stringifyIdent(o.anchoredLocator)),!u&&this.onlyCurrent&&(this.maxConcurrency="1");let l=T=>!u&&this.onlyCurrent?T!=o:this.exclude?.some(A=>Fs.default.isMatch(je.structUtils.stringifyIdent(T.anchoredLocator),A)||Fs.default.isMatch(T.cwd,`${i.projectCwd}${Mg.default.posix.sep}${A}`))??!1,p=T=>!u&&this.onlyCurrent?T==o:this.buildTargets.some(A=>Fs.default.isMatch(je.structUtils.stringifyIdent(T.anchoredLocator),A)||Fs.default.isMatch(T.cwd,`${i.projectCwd}${Mg.default.posix.sep}${A}`)),f=this.buildTargets.length>0?c.filter(p):c,_=await aT(i);this.continueOnError=this.continueOnError??!!_.bail;let h=this.maxConcurrency===void 0?(0,$O.cpus)().length:parseInt(this.maxConcurrency);r.setAttributes({[U.YARN_BUILD_CONFIG_FOLDERS_INPUT]:_.folders.input,[U.YARN_BUILD_CONFIG_FOLDERS_OUTPUT]:_.folders.output,[U.YARN_BUILD_CONFIG_EXCLUDE]:_.exclude,[U.YARN_BUILD_CONFIG_BAIL]:_.bail,[U.YARN_BUILD_CONFIG_HIDE_BADGE]:_.hideYarnBuildBadge,[U.YARN_BUILD_CONFIG_MAX_CONCURRENCY]:h,[U.YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES]:this.ignoreDependencies});let g=await je.StreamReport.start({configuration:i,json:this.json,stdout:this.context.stdout,includeLogs:!0},async T=>{let A=async(F,O,D,I,M)=>{let G=Bs.trace.getSpan(F),Q=new je.miscUtils.BufferStream;Q.on("data",R=>I?.emit("info",M,R&&R.toString()));let E=new je.miscUtils.BufferStream;if(E.on("data",R=>I?.emit("error",M,R&&R.toString())),this.forceQuit)return Q.destroy(),E.destroy(),Q.end(),E.end(),2;try{let R=await this.cli.run(["run",O],{cwd:D,stdout:Q,stderr:E})||0;return Q.end(),E.end(),R}catch(R){G?.setStatus({code:Bs.SpanStatusCode.ERROR,message:R.message}),(typeof R=="string"||R instanceof Error)&&G?.recordException(R),Q.end(),E.end()}return 2},y=new kO({project:s,configuration:i,pluginConfiguration:_,report:T,runCommand:this.buildCommand,cli:A,dryRun:this.dryRun,ignoreRunCache:this.ignoreBuildCache,verbose:this.verbose,concurrency:h,continueOnError:this.continueOnError,excludeWorkspacePredicate:l,ignoreDependencies:this.ignoreDependencies,failFast:this.failFast});y.runReporter.on("force-quit",()=>{this.forceQuit=!0}),await y.setup();for(let F of f)await HO({targetWorkspace:F,project:s,supervisor:y});await y.run(n)===!1&&(T.reportError(je.MessageName.BUILD_FAILED,"Build failed"),r.setStatus({code:Bs.SpanStatusCode.ERROR,message:"Build failed"}))});return mi.hasBeenTerminated=!0,g.exitCode()})}};var tP=v("@yarnpkg/cli"),rP=v("@yarnpkg/core"),nl=v("@yarnpkg/core"),nP=v("clipanion");var mt=e=>{if(e==null)throw new Error("Invalid name");return e.scope?`@${e.scope}/${e.name}`:e.name};var VO=({workspace:e,project:t})=>{let r=Array.from(e.manifest.dependencies.values()).map(i=>mt(i)),n=Array.from(t.workspaces.values()).map(i=>mt(i.manifest.name));return r.filter(i=>n.includes(i))};var WO=({project:e,workspaceName:t})=>e.workspaces.find(n=>mt(n.manifest.name)===t);var XO=v("@yarnpkg/core");var Uq={firstCharacters:"\u27A4 ",tabString:"\u2502 "},YO="gray",Us=({format:e,padding:t,step:r=5,characters:n=Uq})=>{let{firstCharacters:i,tabString:s}=n,o=s.split("");for(let a=0;a<t;a++){let u=Array(r).fill(" ").map((c,l)=>l<o.length?o[l]:c).join("");process.stdout.write(e(u,YO))}process.stdout.write(e(i,YO))};var kq=XO.FormatType.NAME,KO="red",zO=({format:e,circular:t,dependency:r,parents:n,current:i,project:s,padding:o=0})=>{if(t){Us({format:e,padding:o+1}),process.stdout.write(e(r,kq)),process.stdout.write(e(" -> circular dependency",KO)),process.stdout.write(`
`);return}let a=WO({project:s,workspaceName:r});if(!a){Us({format:e,padding:o+1}),process.stdout.write(r),process.stdout.write(e("-> incorrect dependency",KO)),process.stdout.write(`
`);return}rl({format:e,project:s,parent:i,parents:[...n,i],padding:o+1,workspace:a})};var QO=({format:e,workspace:t,parent:r,parents:n,project:i,padding:s=0})=>{let o=VO({workspace:t,project:i});for(let a of o)zO({format:e,workspace:t,project:i,padding:s,parent:r,parents:n,current:mt(t.manifest.name),circular:r===a||n.includes(a),dependency:a})};var ZO=v("@yarnpkg/core");var jq=ZO.FormatType.NAME,JO=({format:e,workspace:t,padding:r=0})=>{let{name:n}=t.manifest,i=mt(n);Us({format:e,padding:r}),process.stdout.write(e(i,jq)),process.stdout.write(`
`)};var rl=({format:e,workspace:t,project:r,parents:n,padding:i=0,parent:s})=>{JO({workspace:t,padding:i,format:e}),QO({parents:n,workspace:t,project:r,padding:i,parent:s,format:e})};var ks=({padding:e})=>{for(let t=0;t<e;t++)process.stdout.write(`
`)};var eP=({workspace:e,format:t})=>{let r=mt(e.manifest.name);process.stdout.write(`Build query for package: ${t(r,"bold")}`),ks({padding:1})};var js=class extends tP.BaseCommand{static paths=[["build","query"]];static usage=nP.Command.Usage({category:"Build commands",description:"prints out dependency graph for current package",details:`
          In a monorepo with internal packages that depend on others, this command
          will traverse the dependency graph and efficiently ensure, the packages
          are built in the right order.

        `});async execute(){let t=await nl.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:n}=await nl.Project.find(t,this.context.cwd);if(!n)return 0;let i=(s,o)=>rP.formatUtils.pretty(t,s,o);return ks({padding:1}),eP({workspace:n,format:i}),rl({parents:[],workspace:n,project:r,format:i}),ks({padding:2}),0}};var Gs=v("clipanion");var qs=class extends Jr{static paths=[["test"]];static usage=Gs.Command.Usage({category:"Test commands",description:"test a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are tested in the right order.
      `});buildCommand=Gs.Option.String("-c,--command","test",{description:'the command to be run in each package (if available), defaults to "test"'});onlyCurrent=Gs.Option.Boolean("--only-current",!0,{description:"only test the current workspace"});ignoreDependencies=!0;commandType="test"};var Gq={commands:[Rs,js,Jr,qs]},qq=Gq;return pP(Hq);})();
/*! Bundled license information:

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel/index.js:
  (*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
return plugin;
}
};
