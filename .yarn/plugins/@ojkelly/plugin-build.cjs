/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@ojkelly/plugin-build",
factory: function (require) {
"use strict";var plugin=(()=>{var Bv=Object.create;var ks=Object.defineProperty;var Fv=Object.getOwnPropertyDescriptor;var Uv=Object.getOwnPropertyNames;var kv=Object.getPrototypeOf,jv=Object.prototype.hasOwnProperty;var v=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Gv=(e,t)=>{for(var r in t)ks(e,r,{get:t[r],enumerable:!0})},bg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Uv(t))!jv.call(e,i)&&i!==r&&ks(e,i,{get:()=>t[i],enumerable:!(n=Fv(t,i))||n.enumerable});return e};var K=(e,t,r)=>(r=e!=null?Bv(kv(e)):{},bg(t||!e||!e.__esModule?ks(r,"default",{value:e,enumerable:!0}):r,e)),qv=e=>bg(ks({},"__esModule",{value:!0}),e);var js=d(et=>{"use strict";et.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;et.find=(e,t)=>e.nodes.find(r=>r.type===t);et.exceedsLimit=(e,t,r=1,n)=>n===!1||!et.isInteger(e)||!et.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=n;et.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};et.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0);et.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;et.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;et.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);et.flatten=(...e)=>{let t=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];Array.isArray(s)?r(s,t):s!==void 0&&t.push(s)}return t};return r(e),t}});var Gs=d((Tq,Og)=>{"use strict";var Rg=js();Og.exports=(e,t={})=>{let r=(n,i={})=>{let s=t.escapeInvalid&&Rg.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a="";if(n.value)return(s||o)&&Rg.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(e)}});var Pg=d((yq,vg)=>{"use strict";vg.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}});var Bg=d((bq,Dg)=>{"use strict";var Cg=Pg(),cr=(e,t,r)=>{if(Cg(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(Cg(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),s=String(n.shorthand),o=String(n.capture),a=String(n.wrap),u=e+":"+t+"="+i+s+o+a;if(cr.cache.hasOwnProperty(u))return cr.cache[u].result;let c=Math.min(e,t),l=Math.max(e,t);if(Math.abs(c-l)===1){let g=e+"|"+t;return n.capture?`(${g})`:n.wrap===!1?g:`(?:${g})`}let f=Mg(e)||Mg(t),p={min:e,max:t,a:c,b:l},h=[],_=[];if(f&&(p.isPadded=f,p.maxLen=String(p.max).length),c<0){let g=l<0?Math.abs(l):1;_=Ig(g,Math.abs(c),p,n),c=p.a=0}return l>=0&&(h=Ig(c,l,p,n)),p.negatives=_,p.positives=h,p.result=Hv(_,h,n),n.capture===!0?p.result=`(${p.result})`:n.wrap!==!1&&h.length+_.length>1&&(p.result=`(?:${p.result})`),cr.cache[u]=p,p.result};function Hv(e,t,r){let n=zc(e,t,"-",!1,r)||[],i=zc(t,e,"",!1,r)||[],s=zc(e,t,"-?",!0,r)||[];return n.concat(s).concat(i).join("|")}function $v(e,t){let r=1,n=1,i=xg(e,r),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),r+=1,i=xg(e,r);for(i=Lg(t+1,n)-1;e<i&&i<=t;)s.add(i),n+=1,i=Lg(t+1,n)-1;return s=[...s],s.sort(Yv),s}function Vv(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=Wv(e,t),i=n.length,s="",o=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?s+=u:u!=="0"||c!=="9"?s+=Kv(u,c,r):o++}return o&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[o],digits:i}}function Ig(e,t,r,n){let i=$v(e,t),s=[],o=e,a;for(let u=0;u<i.length;u++){let c=i[u],l=Vv(String(o),String(c),n),f="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+wg(a.count),o=c+1;continue}r.isPadded&&(f=Xv(c,r,n)),l.string=f+l.pattern+wg(l.count),s.push(l),o=c+1,a=l}return s}function zc(e,t,r,n,i){let s=[];for(let o of e){let{string:a}=o;!n&&!Ng(t,"string",a)&&s.push(r+a),n&&Ng(t,"string",a)&&s.push(r+a)}return s}function Wv(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}function Yv(e,t){return e>t?1:t>e?-1:0}function Ng(e,t,r){return e.some(n=>n[t]===r)}function xg(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function Lg(e,t){return e-e%Math.pow(10,t)}function wg(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function Kv(e,t,r){return`[${e}${t-e===1?"":"-"}${t}]`}function Mg(e){return/^-?(0+)\d/.test(e)}function Xv(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}cr.cache={};cr.clearCache=()=>cr.cache={};Dg.exports=cr});var Jc=d((Rq,$g)=>{"use strict";var zv=v("util"),kg=Bg(),Fg=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),Qv=e=>t=>e===!0?Number(t):String(t),Qc=e=>typeof e=="number"||typeof e=="string"&&e!=="",gi=e=>Number.isInteger(+e),Zc=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return!1;for(;t[++r]==="0";);return r>0},Zv=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,Jv=(e,t,r)=>{if(t>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return r===!1?String(e):e},Ug=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},eP=(e,t)=>{e.negatives.sort((o,a)=>o<a?-1:o>a?1:0),e.positives.sort((o,a)=>o<a?-1:o>a?1:0);let r=t.capture?"":"?:",n="",i="",s;return e.positives.length&&(n=e.positives.join("|")),e.negatives.length&&(i=`-(${r}${e.negatives.join("|")})`),n&&i?s=`${n}|${i}`:s=n||i,t.wrap?`(${r}${s})`:s},jg=(e,t,r,n)=>{if(r)return kg(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);if(e===t)return i;let s=String.fromCharCode(t);return`[${i}-${s}]`},Gg=(e,t,r)=>{if(Array.isArray(e)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${e.join("|")})`:e.join("|")}return kg(e,t,r)},qg=(...e)=>new RangeError("Invalid range arguments: "+zv.inspect(...e)),Hg=(e,t,r)=>{if(r.strictRanges===!0)throw qg([e,t]);return[]},tP=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},rP=(e,t,r=1,n={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw qg([e,t]);return[]}i===0&&(i=0),s===0&&(s=0);let o=i>s,a=String(e),u=String(t),c=String(r);r=Math.max(Math.abs(r),1);let l=Zc(a)||Zc(u)||Zc(c),f=l?Math.max(a.length,u.length,c.length):0,p=l===!1&&Zv(e,t,n)===!1,h=n.transform||Qv(p);if(n.toRegex&&r===1)return jg(Ug(e,f),Ug(t,f),!0,n);let _={negatives:[],positives:[]},g=y=>_[y<0?"negatives":"positives"].push(Math.abs(y)),T=[],A=0;for(;o?i>=s:i<=s;)n.toRegex===!0&&r>1?g(i):T.push(Jv(h(i,A),f,p)),i=o?i-r:i+r,A++;return n.toRegex===!0?r>1?eP(_,n):Gg(T,null,{wrap:!1,...n}):T},nP=(e,t,r=1,n={})=>{if(!gi(e)&&e.length>1||!gi(t)&&t.length>1)return Hg(e,t,n);let i=n.transform||(p=>String.fromCharCode(p)),s=`${e}`.charCodeAt(0),o=`${t}`.charCodeAt(0),a=s>o,u=Math.min(s,o),c=Math.max(s,o);if(n.toRegex&&r===1)return jg(u,c,!1,n);let l=[],f=0;for(;a?s>=o:s<=o;)l.push(i(s,f)),s=a?s-r:s+r,f++;return n.toRegex===!0?Gg(l,null,{wrap:!1,options:n}):l},qs=(e,t,r,n={})=>{if(t==null&&Qc(e))return[e];if(!Qc(e)||!Qc(t))return Hg(e,t,n);if(typeof r=="function")return qs(e,t,1,{transform:r});if(Fg(r))return qs(e,t,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,gi(r)?gi(e)&&gi(t)?rP(e,t,r,i):nP(e,t,Math.max(Math.abs(r),1),i):r!=null&&!Fg(r)?tP(r,i):qs(e,t,1,r)};$g.exports=qs});var Yg=d((Oq,Wg)=>{"use strict";var iP=Jc(),Vg=js(),sP=(e,t={})=>{let r=(n,i={})=>{let s=Vg.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a=s===!0||o===!0,u=t.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=Vg.reduce(n.nodes),f=iP(...l,{...t,wrap:!1,toRegex:!0});if(f.length!==0)return l.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let l of n.nodes)c+=r(l,n);return c};return r(e)};Wg.exports=sP});var zg=d((vq,Xg)=>{"use strict";var oP=Jc(),Kg=Gs(),Xr=js(),lr=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?Xr.flatten(t).map(i=>`{${i}}`):t;for(let i of e)if(Array.isArray(i))for(let s of i)n.push(lr(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?lr(i,s,r):i+s);return Xr.flatten(n)},aP=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,n=(i,s={})=>{i.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(i.invalid||i.dollar){a.push(lr(a.pop(),Kg(i,t)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(lr(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let f=Xr.reduce(i.nodes);if(Xr.exceedsLimit(...f,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let p=oP(...f,t);p.length===0&&(p=Kg(i,t)),a.push(lr(a.pop(),p)),i.nodes=[];return}let u=Xr.encloseBrace(i),c=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let f=0;f<i.nodes.length;f++){let p=i.nodes[f];if(p.type==="comma"&&i.type==="brace"){f===1&&c.push(""),c.push("");continue}if(p.type==="close"){a.push(lr(a.pop(),c,u));continue}if(p.value&&p.type!=="open"){c.push(lr(c.pop(),p.value));continue}p.nodes&&n(p,i)}return c};return Xr.flatten(n(e))};Xg.exports=aP});var Zg=d((Pq,Qg)=>{"use strict";Qg.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var nm=d((Cq,rm)=>{"use strict";var uP=Gs(),{MAX_LENGTH:Jg,CHAR_BACKSLASH:el,CHAR_BACKTICK:cP,CHAR_COMMA:lP,CHAR_DOT:dP,CHAR_LEFT_PARENTHESES:fP,CHAR_RIGHT_PARENTHESES:pP,CHAR_LEFT_CURLY_BRACE:_P,CHAR_RIGHT_CURLY_BRACE:hP,CHAR_LEFT_SQUARE_BRACKET:em,CHAR_RIGHT_SQUARE_BRACKET:tm,CHAR_DOUBLE_QUOTE:gP,CHAR_SINGLE_QUOTE:mP,CHAR_NO_BREAK_SPACE:EP,CHAR_ZERO_WIDTH_NOBREAK_SPACE:SP}=Zg(),AP=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},n=typeof r.maxLength=="number"?Math.min(Jg,r.maxLength):Jg;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let i={type:"root",input:e,nodes:[]},s=[i],o=i,a=i,u=0,c=e.length,l=0,f=0,p,h={},_=()=>e[l++],g=T=>{if(T.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&T.type==="text"){a.value+=T.value;return}return o.nodes.push(T),T.parent=o,T.prev=a,a=T,T};for(g({type:"bos"});l<c;)if(o=s[s.length-1],p=_(),!(p===SP||p===EP)){if(p===el){g({type:"text",value:(t.keepEscaping?p:"")+_()});continue}if(p===tm){g({type:"text",value:"\\"+p});continue}if(p===em){u++;let T=!0,A;for(;l<c&&(A=_());){if(p+=A,A===em){u++;continue}if(A===el){p+=_();continue}if(A===tm&&(u--,u===0))break}g({type:"text",value:p});continue}if(p===fP){o=g({type:"paren",nodes:[]}),s.push(o),g({type:"text",value:p});continue}if(p===pP){if(o.type!=="paren"){g({type:"text",value:p});continue}o=s.pop(),g({type:"text",value:p}),o=s[s.length-1];continue}if(p===gP||p===mP||p===cP){let T=p,A;for(t.keepQuotes!==!0&&(p="");l<c&&(A=_());){if(A===el){p+=A+_();continue}if(A===T){t.keepQuotes===!0&&(p+=A);break}p+=A}g({type:"text",value:p});continue}if(p===_P){f++;let A={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};o=g(A),s.push(o),g({type:"open",value:p});continue}if(p===hP){if(o.type!=="brace"){g({type:"text",value:p});continue}let T="close";o=s.pop(),o.close=!0,g({type:T,value:p}),f--,o=s[s.length-1];continue}if(p===lP&&f>0){if(o.ranges>0){o.ranges=0;let T=o.nodes.shift();o.nodes=[T,{type:"text",value:uP(o)}]}g({type:"comma",value:p}),o.commas++;continue}if(p===dP&&f>0&&o.commas===0){let T=o.nodes;if(f===0||T.length===0){g({type:"text",value:p});continue}if(a.type==="dot"){if(o.range=[],a.value+=p,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){T.pop();let A=T[T.length-1];A.value+=a.value+p,a=A,o.ranges--;continue}g({type:"dot",value:p});continue}g({type:"text",value:p})}do if(o=s.pop(),o.type!=="root"){o.nodes.forEach(y=>{y.nodes||(y.type==="open"&&(y.isOpen=!0),y.type==="close"&&(y.isClose=!0),y.nodes||(y.type="text"),y.invalid=!0)});let T=s[s.length-1],A=T.nodes.indexOf(o);T.nodes.splice(A,1,...o.nodes)}while(s.length>0);return g({type:"eos"}),i};rm.exports=AP});var om=d((Iq,sm)=>{"use strict";var im=Gs(),TP=Yg(),yP=zg(),bP=nm(),We=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let i=We.create(n,t);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(We.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};We.parse=(e,t={})=>bP(e,t);We.stringify=(e,t={})=>im(typeof e=="string"?We.parse(e,t):e,t);We.compile=(e,t={})=>(typeof e=="string"&&(e=We.parse(e,t)),TP(e,t));We.expand=(e,t={})=>{typeof e=="string"&&(e=We.parse(e,t));let r=yP(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};We.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?We.compile(e,t):We.expand(e,t);sm.exports=We});var mi=d((Nq,dm)=>{"use strict";var RP=v("path"),gt="\\\\/",am=`[^${gt}]`,Nt="\\.",OP="\\+",vP="\\?",Hs="\\/",PP="(?=.)",um="[^/]",tl=`(?:${Hs}|$)`,cm=`(?:^|${Hs})`,rl=`${Nt}{1,2}${tl}`,CP=`(?!${Nt})`,IP=`(?!${cm}${rl})`,NP=`(?!${Nt}{0,1}${tl})`,xP=`(?!${rl})`,LP=`[^.${Hs}]`,wP=`${um}*?`,lm={DOT_LITERAL:Nt,PLUS_LITERAL:OP,QMARK_LITERAL:vP,SLASH_LITERAL:Hs,ONE_CHAR:PP,QMARK:um,END_ANCHOR:tl,DOTS_SLASH:rl,NO_DOT:CP,NO_DOTS:IP,NO_DOT_SLASH:NP,NO_DOTS_SLASH:xP,QMARK_NO_DOT:LP,STAR:wP,START_ANCHOR:cm},MP={...lm,SLASH_LITERAL:`[${gt}]`,QMARK:am,STAR:`${am}*?`,DOTS_SLASH:`${Nt}{1,2}(?:[${gt}]|$)`,NO_DOT:`(?!${Nt})`,NO_DOTS:`(?!(?:^|[${gt}])${Nt}{1,2}(?:[${gt}]|$))`,NO_DOT_SLASH:`(?!${Nt}{0,1}(?:[${gt}]|$))`,NO_DOTS_SLASH:`(?!${Nt}{1,2}(?:[${gt}]|$))`,QMARK_NO_DOT:`[^.${gt}]`,START_ANCHOR:`(?:^|[${gt}])`,END_ANCHOR:`(?:[${gt}]|$)`},DP={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};dm.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:DP,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:RP.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?MP:lm}}});var Ei=d(Ue=>{"use strict";var BP=v("path"),FP=process.platform==="win32",{REGEX_BACKSLASH:UP,REGEX_REMOVE_BACKSLASH:kP,REGEX_SPECIAL_CHARS:jP,REGEX_SPECIAL_CHARS_GLOBAL:GP}=mi();Ue.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Ue.hasRegexChars=e=>jP.test(e);Ue.isRegexChar=e=>e.length===1&&Ue.hasRegexChars(e);Ue.escapeRegex=e=>e.replace(GP,"\\$1");Ue.toPosixSlashes=e=>e.replace(UP,"/");Ue.removeBackslashes=e=>e.replace(kP,t=>t==="\\"?"":t);Ue.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Ue.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:FP===!0||BP.sep==="\\";Ue.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Ue.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Ue.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Ue.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",s=`${n}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var Sm=d((Lq,Em)=>{"use strict";var fm=Ei(),{CHAR_ASTERISK:nl,CHAR_AT:qP,CHAR_BACKWARD_SLASH:Si,CHAR_COMMA:HP,CHAR_DOT:il,CHAR_EXCLAMATION_MARK:sl,CHAR_FORWARD_SLASH:mm,CHAR_LEFT_CURLY_BRACE:ol,CHAR_LEFT_PARENTHESES:al,CHAR_LEFT_SQUARE_BRACKET:$P,CHAR_PLUS:VP,CHAR_QUESTION_MARK:pm,CHAR_RIGHT_CURLY_BRACE:WP,CHAR_RIGHT_PARENTHESES:_m,CHAR_RIGHT_SQUARE_BRACKET:YP}=mi(),hm=e=>e===mm||e===Si,gm=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},KP=(e,t)=>{let r=t||{},n=e.length-1,i=r.parts===!0||r.scanToEnd===!0,s=[],o=[],a=[],u=e,c=-1,l=0,f=0,p=!1,h=!1,_=!1,g=!1,T=!1,A=!1,y=!1,b=!1,D=!1,R=!1,B=0,I,w,W={value:"",depth:0,isGlob:!1},ee=()=>c>=n,E=()=>u.charCodeAt(c+1),C=()=>(I=w,u.charCodeAt(++c));for(;c<n;){w=C();let Me;if(w===Si){y=W.backslashes=!0,w=C(),w===ol&&(A=!0);continue}if(A===!0||w===ol){for(B++;ee()!==!0&&(w=C());){if(w===Si){y=W.backslashes=!0,C();continue}if(w===ol){B++;continue}if(A!==!0&&w===il&&(w=C())===il){if(p=W.isBrace=!0,_=W.isGlob=!0,R=!0,i===!0)continue;break}if(A!==!0&&w===HP){if(p=W.isBrace=!0,_=W.isGlob=!0,R=!0,i===!0)continue;break}if(w===WP&&(B--,B===0)){A=!1,p=W.isBrace=!0,R=!0;break}}if(i===!0)continue;break}if(w===mm){if(s.push(c),o.push(W),W={value:"",depth:0,isGlob:!1},R===!0)continue;if(I===il&&c===l+1){l+=2;continue}f=c+1;continue}if(r.noext!==!0&&(w===VP||w===qP||w===nl||w===pm||w===sl)===!0&&E()===al){if(_=W.isGlob=!0,g=W.isExtglob=!0,R=!0,w===sl&&c===l&&(D=!0),i===!0){for(;ee()!==!0&&(w=C());){if(w===Si){y=W.backslashes=!0,w=C();continue}if(w===_m){_=W.isGlob=!0,R=!0;break}}continue}break}if(w===nl){if(I===nl&&(T=W.isGlobstar=!0),_=W.isGlob=!0,R=!0,i===!0)continue;break}if(w===pm){if(_=W.isGlob=!0,R=!0,i===!0)continue;break}if(w===$P){for(;ee()!==!0&&(Me=C());){if(Me===Si){y=W.backslashes=!0,C();continue}if(Me===YP){h=W.isBracket=!0,_=W.isGlob=!0,R=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&w===sl&&c===l){b=W.negated=!0,l++;continue}if(r.noparen!==!0&&w===al){if(_=W.isGlob=!0,i===!0){for(;ee()!==!0&&(w=C());){if(w===al){y=W.backslashes=!0,w=C();continue}if(w===_m){R=!0;break}}continue}break}if(_===!0){if(R=!0,i===!0)continue;break}}r.noext===!0&&(g=!1,_=!1);let F=u,ot="",m="";l>0&&(ot=u.slice(0,l),u=u.slice(l),f-=l),F&&_===!0&&f>0?(F=u.slice(0,f),m=u.slice(f)):_===!0?(F="",m=u):F=u,F&&F!==""&&F!=="/"&&F!==u&&hm(F.charCodeAt(F.length-1))&&(F=F.slice(0,-1)),r.unescape===!0&&(m&&(m=fm.removeBackslashes(m)),F&&y===!0&&(F=fm.removeBackslashes(F)));let S={prefix:ot,input:e,start:l,base:F,glob:m,isBrace:p,isBracket:h,isGlob:_,isExtglob:g,isGlobstar:T,negated:b,negatedExtglob:D};if(r.tokens===!0&&(S.maxDepth=0,hm(w)||o.push(W),S.tokens=o),r.parts===!0||r.tokens===!0){let Me;for(let Y=0;Y<s.length;Y++){let _t=Me?Me+1:l,ht=s[Y],Ve=e.slice(_t,ht);r.tokens&&(Y===0&&l!==0?(o[Y].isPrefix=!0,o[Y].value=ot):o[Y].value=Ve,gm(o[Y]),S.maxDepth+=o[Y].depth),(Y!==0||Ve!=="")&&a.push(Ve),Me=ht}if(Me&&Me+1<e.length){let Y=e.slice(Me+1);a.push(Y),r.tokens&&(o[o.length-1].value=Y,gm(o[o.length-1]),S.maxDepth+=o[o.length-1].depth)}S.slashes=s,S.parts=a}return S};Em.exports=KP});var ym=d((wq,Tm)=>{"use strict";var $s=mi(),Ye=Ei(),{MAX_LENGTH:Vs,POSIX_REGEX_SOURCE:XP,REGEX_NON_SPECIAL_CHARS:zP,REGEX_SPECIAL_CHARS_BACKREF:QP,REPLACEMENTS:Am}=$s,ZP=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(i=>Ye.escapeRegex(i)).join("..")}return r},zr=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,ul=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=Am[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(Vs,r.maxLength):Vs,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let s={type:"bos",value:"",output:r.prepend||""},o=[s],a=r.capture?"":"?:",u=Ye.isWindows(t),c=$s.globChars(u),l=$s.extglobChars(c),{DOT_LITERAL:f,PLUS_LITERAL:p,SLASH_LITERAL:h,ONE_CHAR:_,DOTS_SLASH:g,NO_DOT:T,NO_DOT_SLASH:A,NO_DOTS_SLASH:y,QMARK:b,QMARK_NO_DOT:D,STAR:R,START_ANCHOR:B}=c,I=P=>`(${a}(?:(?!${B}${P.dot?g:f}).)*?)`,w=r.dot?"":T,W=r.dot?b:D,ee=r.bash===!0?I(r):R;r.capture&&(ee=`(${ee})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let E={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};e=Ye.removePrefix(e,E),i=e.length;let C=[],F=[],ot=[],m=s,S,Me=()=>E.index===i-1,Y=E.peek=(P=1)=>e[E.index+P],_t=E.advance=()=>e[++E.index]||"",ht=()=>e.slice(E.index+1),Ve=(P="",re=0)=>{E.consumed+=P,E.index+=re},Ds=P=>{E.output+=P.output!=null?P.output:P.value,Ve(P.value)},Mv=()=>{let P=1;for(;Y()==="!"&&(Y(2)!=="("||Y(3)==="?");)_t(),E.start++,P++;return P%2===0?!1:(E.negated=!0,E.start++,!0)},Bs=P=>{E[P]++,ot.push(P)},ur=P=>{E[P]--,ot.pop()},$=P=>{if(m.type==="globstar"){let re=E.braces>0&&(P.type==="comma"||P.type==="brace"),O=P.extglob===!0||C.length&&(P.type==="pipe"||P.type==="paren");P.type!=="slash"&&P.type!=="paren"&&!re&&!O&&(E.output=E.output.slice(0,-m.output.length),m.type="star",m.value="*",m.output=ee,E.output+=m.output)}if(C.length&&P.type!=="paren"&&(C[C.length-1].inner+=P.value),(P.value||P.output)&&Ds(P),m&&m.type==="text"&&P.type==="text"){m.value+=P.value,m.output=(m.output||"")+P.value;return}P.prev=m,o.push(P),m=P},Fs=(P,re)=>{let O={...l[re],conditions:1,inner:""};O.prev=m,O.parens=E.parens,O.output=E.output;let j=(r.capture?"(":"")+O.open;Bs("parens"),$({type:P,value:re,output:E.output?"":_}),$({type:"paren",extglob:!0,value:_t(),output:j}),C.push(O)},Dv=P=>{let re=P.close+(r.capture?")":""),O;if(P.type==="negate"){let j=ee;if(P.inner&&P.inner.length>1&&P.inner.includes("/")&&(j=I(r)),(j!==ee||Me()||/^\)+$/.test(ht()))&&(re=P.close=`)$))${j}`),P.inner.includes("*")&&(O=ht())&&/^\.[^\\/.]+$/.test(O)){let ce=ul(O,{...t,fastpaths:!1}).output;re=P.close=`)${ce})${j})`}P.prev.type==="bos"&&(E.negatedExtglob=!0)}$({type:"paren",extglob:!0,value:S,output:re}),ur("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let P=!1,re=e.replace(QP,(O,j,ce,De,ge,Xc)=>De==="\\"?(P=!0,O):De==="?"?j?j+De+(ge?b.repeat(ge.length):""):Xc===0?W+(ge?b.repeat(ge.length):""):b.repeat(ce.length):De==="."?f.repeat(ce.length):De==="*"?j?j+De+(ge?ee:""):ee:j?O:`\\${O}`);return P===!0&&(r.unescape===!0?re=re.replace(/\\/g,""):re=re.replace(/\\+/g,O=>O.length%2===0?"\\\\":O?"\\":"")),re===e&&r.contains===!0?(E.output=e,E):(E.output=Ye.wrapOutput(re,E,t),E)}for(;!Me();){if(S=_t(),S==="\0")continue;if(S==="\\"){let O=Y();if(O==="/"&&r.bash!==!0||O==="."||O===";")continue;if(!O){S+="\\",$({type:"text",value:S});continue}let j=/^\\+/.exec(ht()),ce=0;if(j&&j[0].length>2&&(ce=j[0].length,E.index+=ce,ce%2!==0&&(S+="\\")),r.unescape===!0?S=_t():S+=_t(),E.brackets===0){$({type:"text",value:S});continue}}if(E.brackets>0&&(S!=="]"||m.value==="["||m.value==="[^")){if(r.posix!==!1&&S===":"){let O=m.value.slice(1);if(O.includes("[")&&(m.posix=!0,O.includes(":"))){let j=m.value.lastIndexOf("["),ce=m.value.slice(0,j),De=m.value.slice(j+2),ge=XP[De];if(ge){m.value=ce+ge,E.backtrack=!0,_t(),!s.output&&o.indexOf(m)===1&&(s.output=_);continue}}}(S==="["&&Y()!==":"||S==="-"&&Y()==="]")&&(S=`\\${S}`),S==="]"&&(m.value==="["||m.value==="[^")&&(S=`\\${S}`),r.posix===!0&&S==="!"&&m.value==="["&&(S="^"),m.value+=S,Ds({value:S});continue}if(E.quotes===1&&S!=='"'){S=Ye.escapeRegex(S),m.value+=S,Ds({value:S});continue}if(S==='"'){E.quotes=E.quotes===1?0:1,r.keepQuotes===!0&&$({type:"text",value:S});continue}if(S==="("){Bs("parens"),$({type:"paren",value:S});continue}if(S===")"){if(E.parens===0&&r.strictBrackets===!0)throw new SyntaxError(zr("opening","("));let O=C[C.length-1];if(O&&E.parens===O.parens+1){Dv(C.pop());continue}$({type:"paren",value:S,output:E.parens?")":"\\)"}),ur("parens");continue}if(S==="["){if(r.nobracket===!0||!ht().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(zr("closing","]"));S=`\\${S}`}else Bs("brackets");$({type:"bracket",value:S});continue}if(S==="]"){if(r.nobracket===!0||m&&m.type==="bracket"&&m.value.length===1){$({type:"text",value:S,output:`\\${S}`});continue}if(E.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(zr("opening","["));$({type:"text",value:S,output:`\\${S}`});continue}ur("brackets");let O=m.value.slice(1);if(m.posix!==!0&&O[0]==="^"&&!O.includes("/")&&(S=`/${S}`),m.value+=S,Ds({value:S}),r.literalBrackets===!1||Ye.hasRegexChars(O))continue;let j=Ye.escapeRegex(m.value);if(E.output=E.output.slice(0,-m.value.length),r.literalBrackets===!0){E.output+=j,m.value=j;continue}m.value=`(${a}${j}|${m.value})`,E.output+=m.value;continue}if(S==="{"&&r.nobrace!==!0){Bs("braces");let O={type:"brace",value:S,output:"(",outputIndex:E.output.length,tokensIndex:E.tokens.length};F.push(O),$(O);continue}if(S==="}"){let O=F[F.length-1];if(r.nobrace===!0||!O){$({type:"text",value:S,output:S});continue}let j=")";if(O.dots===!0){let ce=o.slice(),De=[];for(let ge=ce.length-1;ge>=0&&(o.pop(),ce[ge].type!=="brace");ge--)ce[ge].type!=="dots"&&De.unshift(ce[ge].value);j=ZP(De,r),E.backtrack=!0}if(O.comma!==!0&&O.dots!==!0){let ce=E.output.slice(0,O.outputIndex),De=E.tokens.slice(O.tokensIndex);O.value=O.output="\\{",S=j="\\}",E.output=ce;for(let ge of De)E.output+=ge.output||ge.value}$({type:"brace",value:S,output:j}),ur("braces"),F.pop();continue}if(S==="|"){C.length>0&&C[C.length-1].conditions++,$({type:"text",value:S});continue}if(S===","){let O=S,j=F[F.length-1];j&&ot[ot.length-1]==="braces"&&(j.comma=!0,O="|"),$({type:"comma",value:S,output:O});continue}if(S==="/"){if(m.type==="dot"&&E.index===E.start+1){E.start=E.index+1,E.consumed="",E.output="",o.pop(),m=s;continue}$({type:"slash",value:S,output:h});continue}if(S==="."){if(E.braces>0&&m.type==="dot"){m.value==="."&&(m.output=f);let O=F[F.length-1];m.type="dots",m.output+=S,m.value+=S,O.dots=!0;continue}if(E.braces+E.parens===0&&m.type!=="bos"&&m.type!=="slash"){$({type:"text",value:S,output:f});continue}$({type:"dot",value:S,output:f});continue}if(S==="?"){if(!(m&&m.value==="(")&&r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){Fs("qmark",S);continue}if(m&&m.type==="paren"){let j=Y(),ce=S;if(j==="<"&&!Ye.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(m.value==="("&&!/[!=<:]/.test(j)||j==="<"&&!/<([!=]|\w+>)/.test(ht()))&&(ce=`\\${S}`),$({type:"text",value:S,output:ce});continue}if(r.dot!==!0&&(m.type==="slash"||m.type==="bos")){$({type:"qmark",value:S,output:D});continue}$({type:"qmark",value:S,output:b});continue}if(S==="!"){if(r.noextglob!==!0&&Y()==="("&&(Y(2)!=="?"||!/[!=<:]/.test(Y(3)))){Fs("negate",S);continue}if(r.nonegate!==!0&&E.index===0){Mv();continue}}if(S==="+"){if(r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){Fs("plus",S);continue}if(m&&m.value==="("||r.regex===!1){$({type:"plus",value:S,output:p});continue}if(m&&(m.type==="bracket"||m.type==="paren"||m.type==="brace")||E.parens>0){$({type:"plus",value:S});continue}$({type:"plus",value:p});continue}if(S==="@"){if(r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){$({type:"at",extglob:!0,value:S,output:""});continue}$({type:"text",value:S});continue}if(S!=="*"){(S==="$"||S==="^")&&(S=`\\${S}`);let O=zP.exec(ht());O&&(S+=O[0],E.index+=O[0].length),$({type:"text",value:S});continue}if(m&&(m.type==="globstar"||m.star===!0)){m.type="star",m.star=!0,m.value+=S,m.output=ee,E.backtrack=!0,E.globstar=!0,Ve(S);continue}let P=ht();if(r.noextglob!==!0&&/^\([^?]/.test(P)){Fs("star",S);continue}if(m.type==="star"){if(r.noglobstar===!0){Ve(S);continue}let O=m.prev,j=O.prev,ce=O.type==="slash"||O.type==="bos",De=j&&(j.type==="star"||j.type==="globstar");if(r.bash===!0&&(!ce||P[0]&&P[0]!=="/")){$({type:"star",value:S,output:""});continue}let ge=E.braces>0&&(O.type==="comma"||O.type==="brace"),Xc=C.length&&(O.type==="pipe"||O.type==="paren");if(!ce&&O.type!=="paren"&&!ge&&!Xc){$({type:"star",value:S,output:""});continue}for(;P.slice(0,3)==="/**";){let Us=e[E.index+4];if(Us&&Us!=="/")break;P=P.slice(3),Ve("/**",3)}if(O.type==="bos"&&Me()){m.type="globstar",m.value+=S,m.output=I(r),E.output=m.output,E.globstar=!0,Ve(S);continue}if(O.type==="slash"&&O.prev.type!=="bos"&&!De&&Me()){E.output=E.output.slice(0,-(O.output+m.output).length),O.output=`(?:${O.output}`,m.type="globstar",m.output=I(r)+(r.strictSlashes?")":"|$)"),m.value+=S,E.globstar=!0,E.output+=O.output+m.output,Ve(S);continue}if(O.type==="slash"&&O.prev.type!=="bos"&&P[0]==="/"){let Us=P[1]!==void 0?"|$":"";E.output=E.output.slice(0,-(O.output+m.output).length),O.output=`(?:${O.output}`,m.type="globstar",m.output=`${I(r)}${h}|${h}${Us})`,m.value+=S,E.output+=O.output+m.output,E.globstar=!0,Ve(S+_t()),$({type:"slash",value:"/",output:""});continue}if(O.type==="bos"&&P[0]==="/"){m.type="globstar",m.value+=S,m.output=`(?:^|${h}|${I(r)}${h})`,E.output=m.output,E.globstar=!0,Ve(S+_t()),$({type:"slash",value:"/",output:""});continue}E.output=E.output.slice(0,-m.output.length),m.type="globstar",m.output=I(r),m.value+=S,E.output+=m.output,E.globstar=!0,Ve(S);continue}let re={type:"star",value:S,output:ee};if(r.bash===!0){re.output=".*?",(m.type==="bos"||m.type==="slash")&&(re.output=w+re.output),$(re);continue}if(m&&(m.type==="bracket"||m.type==="paren")&&r.regex===!0){re.output=S,$(re);continue}(E.index===E.start||m.type==="slash"||m.type==="dot")&&(m.type==="dot"?(E.output+=A,m.output+=A):r.dot===!0?(E.output+=y,m.output+=y):(E.output+=w,m.output+=w),Y()!=="*"&&(E.output+=_,m.output+=_)),$(re)}for(;E.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(zr("closing","]"));E.output=Ye.escapeLast(E.output,"["),ur("brackets")}for(;E.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(zr("closing",")"));E.output=Ye.escapeLast(E.output,"("),ur("parens")}for(;E.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(zr("closing","}"));E.output=Ye.escapeLast(E.output,"{"),ur("braces")}if(r.strictSlashes!==!0&&(m.type==="star"||m.type==="bracket")&&$({type:"maybe_slash",value:"",output:`${h}?`}),E.backtrack===!0){E.output="";for(let P of E.tokens)E.output+=P.output!=null?P.output:P.value,P.suffix&&(E.output+=P.suffix)}return E};ul.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(Vs,r.maxLength):Vs,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);e=Am[e]||e;let s=Ye.isWindows(t),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:f,NO_DOTS_SLASH:p,STAR:h,START_ANCHOR:_}=$s.globChars(s),g=r.dot?f:l,T=r.dot?p:l,A=r.capture?"":"?:",y={negated:!1,prefix:""},b=r.bash===!0?".*?":h;r.capture&&(b=`(${b})`);let D=w=>w.noglobstar===!0?b:`(${A}(?:(?!${_}${w.dot?c:o}).)*?)`,R=w=>{switch(w){case"*":return`${g}${u}${b}`;case".*":return`${o}${u}${b}`;case"*.*":return`${g}${b}${o}${u}${b}`;case"*/*":return`${g}${b}${a}${u}${T}${b}`;case"**":return g+D(r);case"**/*":return`(?:${g}${D(r)}${a})?${T}${u}${b}`;case"**/*.*":return`(?:${g}${D(r)}${a})?${T}${b}${o}${u}${b}`;case"**/.*":return`(?:${g}${D(r)}${a})?${o}${u}${b}`;default:{let W=/^(.*?)\.(\w+)$/.exec(w);if(!W)return;let ee=R(W[1]);return ee?ee+o+W[2]:void 0}}},B=Ye.removePrefix(e,y),I=R(B);return I&&r.strictSlashes!==!0&&(I+=`${a}?`),I};Tm.exports=ul});var Rm=d((Mq,bm)=>{"use strict";var JP=v("path"),eC=Sm(),cl=ym(),ll=Ei(),tC=mi(),rC=e=>e&&typeof e=="object"&&!Array.isArray(e),le=(e,t,r=!1)=>{if(Array.isArray(e)){let l=e.map(p=>le(p,t,r));return p=>{for(let h of l){let _=h(p);if(_)return _}return!1}}let n=rC(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=ll.isWindows(t),o=n?le.compileRe(e,t):le.makeRe(e,t,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(i.ignore){let l={...t,ignore:null,onMatch:null,onResult:null};u=le(i.ignore,l,r)}let c=(l,f=!1)=>{let{isMatch:p,match:h,output:_}=le.test(l,o,t,{glob:e,posix:s}),g={glob:e,state:a,regex:o,posix:s,input:l,output:_,match:h,isMatch:p};return typeof i.onResult=="function"&&i.onResult(g),p===!1?(g.isMatch=!1,f?g:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(g),g.isMatch=!1,f?g:!1):(typeof i.onMatch=="function"&&i.onMatch(g),f?g:!0)};return r&&(c.state=a),c};le.test=(e,t,r,{glob:n,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=r||{},o=s.format||(i?ll.toPosixSlashes:null),a=e===n,u=a&&o?o(e):e;return a===!1&&(u=o?o(e):e,a=u===n),(a===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?a=le.matchBase(e,t,r,i):a=t.exec(u)),{isMatch:!!a,match:a,output:u}};le.matchBase=(e,t,r,n=ll.isWindows(r))=>(t instanceof RegExp?t:le.makeRe(t,r)).test(JP.basename(e));le.isMatch=(e,t,r)=>le(t,r)(e);le.parse=(e,t)=>Array.isArray(e)?e.map(r=>le.parse(r,t)):cl(e,{...t,fastpaths:!1});le.scan=(e,t)=>eC(e,t);le.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let i=t||{},s=i.contains?"":"^",o=i.contains?"":"$",a=`${s}(?:${e.output})${o}`;e&&e.negated===!0&&(a=`^(?!${a}).*$`);let u=le.toRegex(a,t);return n===!0&&(u.state=e),u};le.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=cl.fastpaths(e,t)),i.output||(i=cl(e,t)),le.compileRe(i,t,r,n)};le.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};le.constants=tC;bm.exports=le});var vm=d((Dq,Om)=>{"use strict";Om.exports=Rm()});var fl=d((Bq,Nm)=>{"use strict";var Cm=v("util"),Im=om(),mt=vm(),dl=Ei(),Pm=e=>e===""||e==="./",se=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,i=new Set,s=new Set,o=0,a=l=>{s.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<t.length;l++){let f=mt(String(t[l]),{...r,onResult:a},!0),p=f.state.negated||f.state.negatedExtglob;p&&o++;for(let h of e){let _=f(h,!0);(p?!_.isMatch:_.isMatch)&&(p?n.add(_.output):(n.delete(_.output),i.add(_.output)))}}let c=(o===t.length?[...s]:[...i]).filter(l=>!n.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?t.map(l=>l.replace(/\\/g,"")):t}return c};se.match=se;se.matcher=(e,t)=>mt(e,t);se.isMatch=(e,t,r)=>mt(t,r)(e);se.any=se.isMatch;se.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,i=[],s=a=>{r.onResult&&r.onResult(a),i.push(a.output)},o=new Set(se(e,t,{...r,onResult:s}));for(let a of i)o.has(a)||n.add(a);return[...n]};se.contains=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Cm.inspect(e)}"`);if(Array.isArray(t))return t.some(n=>se.contains(e,n,r));if(typeof t=="string"){if(Pm(e)||Pm(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return se.isMatch(e,t,{...r,contains:!0})};se.matchKeys=(e,t,r)=>{if(!dl.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=se(Object.keys(e),t,r),i={};for(let s of n)i[s]=e[s];return i};se.some=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=mt(String(i),r);if(n.some(o=>s(o)))return!0}return!1};se.every=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=mt(String(i),r);if(!n.every(o=>s(o)))return!1}return!0};se.all=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Cm.inspect(e)}"`);return[].concat(t).every(n=>mt(n,r)(e))};se.capture=(e,t,r)=>{let n=dl.isWindows(r),s=mt.makeRe(String(e),{...r,capture:!0}).exec(n?dl.toPosixSlashes(t):t);if(s)return s.slice(1).map(o=>o===void 0?"":o)};se.makeRe=(...e)=>mt.makeRe(...e);se.scan=(...e)=>mt.scan(...e);se.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let i of Im(String(n),t))r.push(mt.parse(i,t));return r};se.braces=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!/\{.*\}/.test(e)?[e]:Im(e,t)};se.braceExpand=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return se.braces(e,{...t,expand:!0})};Nm.exports=se});var yE=d((Yq,IN)=>{IN.exports=[{name:"Appcircle",constant:"APPCIRCLE",env:"AC_APPCIRCLE"},{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"TF_BUILD",pr:{BUILD_REASON:"PullRequest"}},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"Codefresh",constant:"CODEFRESH",env:"CF_BUILD_ID",pr:{any:["CF_PULL_REQUEST_NUMBER","CF_PULL_REQUEST_ID"]}},{name:"Codemagic",constant:"CODEMAGIC",env:"CM_BUILD_ID",pr:"CM_PULL_REQUEST"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"Expo Application Services",constant:"EAS",env:"EAS_BUILD"},{name:"Gerrit",constant:"GERRIT",env:"GERRIT_PROJECT"},{name:"GitHub Actions",constant:"GITHUB_ACTIONS",env:"GITHUB_ACTIONS",pr:{GITHUB_EVENT_NAME:"pull_request"}},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI",pr:"CI_MERGE_REQUEST_ID"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Google Cloud Build",constant:"GOOGLE_CLOUD_BUILD",env:"BUILDER_OUTPUT"},{name:"Harness CI",constant:"HARNESS",env:"HARNESS_BUILD_ID"},{name:"Heroku",constant:"HEROKU",env:{env:"NODE",includes:"/app/.heroku/node/bin/node"}},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"LayerCI",constant:"LAYERCI",env:"LAYERCI",pr:"LAYERCI_PULL_REQUEST"},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Nevercode",constant:"NEVERCODE",env:"NEVERCODE",pr:{env:"NEVERCODE_PULL_REQUEST",ne:"false"}},{name:"ReleaseHub",constant:"RELEASEHUB",env:"RELEASE_BUILD_ID"},{name:"Render",constant:"RENDER",env:"RENDER",pr:{IS_PULL_REQUEST:"true"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Screwdriver",constant:"SCREWDRIVER",env:"SCREWDRIVER",pr:{env:"SD_PULL_REQUEST",ne:"false"}},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Sourcehut",constant:"SOURCEHUT",env:{CI_NAME:"sourcehut"}},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}},{name:"Vercel",constant:"VERCEL",env:{any:["NOW_BUILDER","VERCEL"]},pr:"VERCEL_GIT_PULL_REQUEST_ID"},{name:"Visual Studio App Center",constant:"APPCENTER",env:"APPCENTER_BUILD_ID"},{name:"Woodpecker",constant:"WOODPECKER",env:{CI:"woodpecker"},pr:{CI_BUILD_EVENT:"pull_request"}},{name:"Xcode Cloud",constant:"XCODE_CLOUD",env:"CI_XCODE_PROJECT",pr:"CI_PULL_REQUEST_NUMBER"},{name:"Xcode Server",constant:"XCODE_SERVER",env:"XCS"}]});var OE=d(Ke=>{"use strict";var RE=yE(),Ee=process.env;Object.defineProperty(Ke,"_vendors",{value:RE.map(function(e){return e.constant})});Ke.name=null;Ke.isPR=null;RE.forEach(function(e){let r=(Array.isArray(e.env)?e.env:[e.env]).every(function(n){return bE(n)});if(Ke[e.constant]=r,!!r)switch(Ke.name=e.name,typeof e.pr){case"string":Ke.isPR=!!Ee[e.pr];break;case"object":"env"in e.pr?Ke.isPR=e.pr.env in Ee&&Ee[e.pr.env]!==e.pr.ne:"any"in e.pr?Ke.isPR=e.pr.any.some(function(n){return!!Ee[n]}):Ke.isPR=bE(e.pr);break;default:Ke.isPR=null}});Ke.isCI=!!(Ee.CI!=="false"&&(Ee.BUILD_ID||Ee.BUILD_NUMBER||Ee.CI||Ee.CI_APP_ID||Ee.CI_BUILD_ID||Ee.CI_BUILD_NUMBER||Ee.CI_NAME||Ee.CONTINUOUS_INTEGRATION||Ee.RUN_ID||Ke.name));function bE(e){return typeof e=="string"?!!Ee[e]:"env"in e?Ee[e.env]&&Ee[e.env].includes(e.includes):"any"in e?e.any.some(function(t){return!!Ee[t]}):Object.keys(e).every(function(t){return Ee[t]===e[t]})}});var PE=d((Xq,vE)=>{"use strict";vE.exports=OE().isCI});var wE=d(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.splitWhen=tn.flatten=void 0;function FN(e){return e.reduce((t,r)=>[].concat(t,r),[])}tn.flatten=FN;function UN(e,t){let r=[[]],n=0;for(let i of e)t(i)?(n++,r[n]=[]):r[n].push(i);return r}tn.splitWhen=UN});var ME=d(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.isEnoentCodeError=void 0;function kN(e){return e.code==="ENOENT"}eo.isEnoentCodeError=kN});var DE=d(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.createDirentFromStats=void 0;var Nl=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function jN(e,t){return new Nl(e,t)}to.createDirentFromStats=jN});var kE=d(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.convertPosixPathToPattern=_e.convertWindowsPathToPattern=_e.convertPathToPattern=_e.escapePosixPath=_e.escapeWindowsPath=_e.escape=_e.removeLeadingDotSegment=_e.makeAbsolute=_e.unixify=void 0;var GN=v("os"),qN=v("path"),BE=GN.platform()==="win32",HN=2,$N=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\()|\\(?![!()*+?@[\]{|}]))/g,VN=/(\\?)([()[\]{}]|^!|[!+@](?=\())/g,WN=/^\\\\([.?])/,YN=/\\(?![!()+@[\]{}])/g;function KN(e){return e.replace(/\\/g,"/")}_e.unixify=KN;function XN(e,t){return qN.resolve(e,t)}_e.makeAbsolute=XN;function zN(e){if(e.charAt(0)==="."){let t=e.charAt(1);if(t==="/"||t==="\\")return e.slice(HN)}return e}_e.removeLeadingDotSegment=zN;_e.escape=BE?xl:Ll;function xl(e){return e.replace(VN,"\\$2")}_e.escapeWindowsPath=xl;function Ll(e){return e.replace($N,"\\$2")}_e.escapePosixPath=Ll;_e.convertPathToPattern=BE?FE:UE;function FE(e){return xl(e).replace(WN,"//$1").replace(YN,"/")}_e.convertWindowsPathToPattern=FE;function UE(e){return Ll(e)}_e.convertPosixPathToPattern=UE});var GE=d((t2,jE)=>{jE.exports=function(t){if(typeof t!="string"||t==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1}});var $E=d((r2,HE)=>{var QN=GE(),qE={"{":"}","(":")","[":"]"},ZN=function(e){if(e[0]==="!")return!0;for(var t=0,r=-2,n=-2,i=-2,s=-2,o=-2;t<e.length;){if(e[t]==="*"||e[t+1]==="?"&&/[\].+)]/.test(e[t])||n!==-1&&e[t]==="["&&e[t+1]!=="]"&&(n<t&&(n=e.indexOf("]",t)),n>t&&(o===-1||o>n||(o=e.indexOf("\\",t),o===-1||o>n)))||i!==-1&&e[t]==="{"&&e[t+1]!=="}"&&(i=e.indexOf("}",t),i>t&&(o=e.indexOf("\\",t),o===-1||o>i))||s!==-1&&e[t]==="("&&e[t+1]==="?"&&/[:!=]/.test(e[t+2])&&e[t+3]!==")"&&(s=e.indexOf(")",t),s>t&&(o=e.indexOf("\\",t),o===-1||o>s))||r!==-1&&e[t]==="("&&e[t+1]!=="|"&&(r<t&&(r=e.indexOf("|",t)),r!==-1&&e[r+1]!==")"&&(s=e.indexOf(")",r),s>r&&(o=e.indexOf("\\",r),o===-1||o>s))))return!0;if(e[t]==="\\"){var a=e[t+1];t+=2;var u=qE[a];if(u){var c=e.indexOf(u,t);c!==-1&&(t=c+1)}if(e[t]==="!")return!0}else t++}return!1},JN=function(e){if(e[0]==="!")return!0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return!0;if(e[t]==="\\"){var r=e[t+1];t+=2;var n=qE[r];if(n){var i=e.indexOf(n,t);i!==-1&&(t=i+1)}if(e[t]==="!")return!0}else t++}return!1};HE.exports=function(t,r){if(typeof t!="string"||t==="")return!1;if(QN(t))return!0;var n=ZN;return r&&r.strict===!1&&(n=JN),n(t)}});var WE=d((n2,VE)=>{"use strict";var ex=$E(),tx=v("path").posix.dirname,rx=v("os").platform()==="win32",wl="/",nx=/\\/g,ix=/[\{\[].*[\}\]]$/,sx=/(^|[^\\])([\{\[]|\([^\)]+$)/,ox=/\\([\!\*\?\|\[\]\(\)\{\}])/g;VE.exports=function(t,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&rx&&t.indexOf(wl)<0&&(t=t.replace(nx,wl)),ix.test(t)&&(t+=wl),t+="a";do t=tx(t);while(ex(t)||sx.test(t));return t.replace(ox,"$1")}});var eS=d(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.removeDuplicateSlashes=M.matchAny=M.convertPatternsToRe=M.makeRe=M.getPatternParts=M.expandBraceExpansion=M.expandPatternsWithBraceExpansion=M.isAffectDepthOfReadingPattern=M.endsWithSlashGlobStar=M.hasGlobStar=M.getBaseDirectory=M.isPatternRelatedToParentDirectory=M.getPatternsOutsideCurrentDirectory=M.getPatternsInsideCurrentDirectory=M.getPositivePatterns=M.getNegativePatterns=M.isPositivePattern=M.isNegativePattern=M.convertToNegativePattern=M.convertToPositivePattern=M.isDynamicPattern=M.isStaticPattern=void 0;var ax=v("path"),ux=WE(),Ml=fl(),YE="**",cx="\\",lx=/[*?]|^!/,dx=/\[[^[]*]/,fx=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,px=/[!*+?@]\([^(]*\)/,_x=/,|\.\./,hx=/(?!^)\/{2,}/g;function KE(e,t={}){return!XE(e,t)}M.isStaticPattern=KE;function XE(e,t={}){return e===""?!1:!!(t.caseSensitiveMatch===!1||e.includes(cx)||lx.test(e)||dx.test(e)||fx.test(e)||t.extglob!==!1&&px.test(e)||t.braceExpansion!==!1&&gx(e))}M.isDynamicPattern=XE;function gx(e){let t=e.indexOf("{");if(t===-1)return!1;let r=e.indexOf("}",t+1);if(r===-1)return!1;let n=e.slice(t,r);return _x.test(n)}function mx(e){return ro(e)?e.slice(1):e}M.convertToPositivePattern=mx;function Ex(e){return"!"+e}M.convertToNegativePattern=Ex;function ro(e){return e.startsWith("!")&&e[1]!=="("}M.isNegativePattern=ro;function zE(e){return!ro(e)}M.isPositivePattern=zE;function Sx(e){return e.filter(ro)}M.getNegativePatterns=Sx;function Ax(e){return e.filter(zE)}M.getPositivePatterns=Ax;function Tx(e){return e.filter(t=>!Dl(t))}M.getPatternsInsideCurrentDirectory=Tx;function yx(e){return e.filter(Dl)}M.getPatternsOutsideCurrentDirectory=yx;function Dl(e){return e.startsWith("..")||e.startsWith("./..")}M.isPatternRelatedToParentDirectory=Dl;function bx(e){return ux(e,{flipBackslashes:!1})}M.getBaseDirectory=bx;function Rx(e){return e.includes(YE)}M.hasGlobStar=Rx;function QE(e){return e.endsWith("/"+YE)}M.endsWithSlashGlobStar=QE;function Ox(e){let t=ax.basename(e);return QE(e)||KE(t)}M.isAffectDepthOfReadingPattern=Ox;function vx(e){return e.reduce((t,r)=>t.concat(ZE(r)),[])}M.expandPatternsWithBraceExpansion=vx;function ZE(e){let t=Ml.braces(e,{expand:!0,nodupes:!0,keepEscaping:!0});return t.sort((r,n)=>r.length-n.length),t.filter(r=>r!=="")}M.expandBraceExpansion=ZE;function Px(e,t){let{parts:r}=Ml.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return r.length===0&&(r=[e]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}M.getPatternParts=Px;function JE(e,t){return Ml.makeRe(e,t)}M.makeRe=JE;function Cx(e,t){return e.map(r=>JE(r,t))}M.convertPatternsToRe=Cx;function Ix(e,t){return t.some(r=>r.test(e))}M.matchAny=Ix;function Nx(e){return e.replace(hx,"/")}M.removeDuplicateSlashes=Nx});var iS=d((s2,nS)=>{"use strict";var xx=v("stream"),tS=xx.PassThrough,Lx=Array.prototype.slice;nS.exports=wx;function wx(){let e=[],t=Lx.call(arguments),r=!1,n=t[t.length-1];n&&!Array.isArray(n)&&n.pipe==null?t.pop():n={};let i=n.end!==!1,s=n.pipeError===!0;n.objectMode==null&&(n.objectMode=!0),n.highWaterMark==null&&(n.highWaterMark=64*1024);let o=tS(n);function a(){for(let l=0,f=arguments.length;l<f;l++)e.push(rS(arguments[l],n));return u(),this}function u(){if(r)return;r=!0;let l=e.shift();if(!l){process.nextTick(c);return}Array.isArray(l)||(l=[l]);let f=l.length+1;function p(){--f>0||(r=!1,u())}function h(_){function g(){_.removeListener("merge2UnpipeEnd",g),_.removeListener("end",g),s&&_.removeListener("error",T),p()}function T(A){o.emit("error",A)}if(_._readableState.endEmitted)return p();_.on("merge2UnpipeEnd",g),_.on("end",g),s&&_.on("error",T),_.pipe(o,{end:!1}),_.resume()}for(let _=0;_<l.length;_++)h(l[_]);p()}function c(){r=!1,o.emit("queueDrain"),i&&o.end()}return o.setMaxListeners(0),o.add=a,o.on("unpipe",function(l){l.emit("merge2UnpipeEnd")}),t.length&&a.apply(null,t),o}function rS(e,t){if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=rS(e[r],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(tS(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}});var oS=d(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.merge=void 0;var Mx=iS();function Dx(e){let t=Mx(e);return e.forEach(r=>{r.once("error",n=>t.emit("error",n))}),t.once("close",()=>sS(e)),t.once("end",()=>sS(e)),t}no.merge=Dx;function sS(e){e.forEach(t=>t.emit("close"))}});var aS=d(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.isEmpty=rn.isString=void 0;function Bx(e){return typeof e=="string"}rn.isString=Bx;function Fx(e){return e===""}rn.isEmpty=Fx});var Lt=d(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.string=ve.stream=ve.pattern=ve.path=ve.fs=ve.errno=ve.array=void 0;var Ux=wE();ve.array=Ux;var kx=ME();ve.errno=kx;var jx=DE();ve.fs=jx;var Gx=kE();ve.path=Gx;var qx=eS();ve.pattern=qx;var Hx=oS();ve.stream=Hx;var $x=aS();ve.string=$x});var dS=d(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.convertPatternGroupToTask=Pe.convertPatternGroupsToTasks=Pe.groupPatternsByBaseDirectory=Pe.getNegativePatternsAsPositive=Pe.getPositivePatterns=Pe.convertPatternsToTasks=Pe.generate=void 0;var at=Lt();function Vx(e,t){let r=uS(e,t),n=uS(t.ignore,t),i=cS(r),s=lS(r,n),o=i.filter(l=>at.pattern.isStaticPattern(l,t)),a=i.filter(l=>at.pattern.isDynamicPattern(l,t)),u=Bl(o,s,!1),c=Bl(a,s,!0);return u.concat(c)}Pe.generate=Vx;function uS(e,t){let r=e;return t.braceExpansion&&(r=at.pattern.expandPatternsWithBraceExpansion(r)),t.baseNameMatch&&(r=r.map(n=>n.includes("/")?n:`**/${n}`)),r.map(n=>at.pattern.removeDuplicateSlashes(n))}function Bl(e,t,r){let n=[],i=at.pattern.getPatternsOutsideCurrentDirectory(e),s=at.pattern.getPatternsInsideCurrentDirectory(e),o=Fl(i),a=Fl(s);return n.push(...Ul(o,t,r)),"."in a?n.push(kl(".",s,t,r)):n.push(...Ul(a,t,r)),n}Pe.convertPatternsToTasks=Bl;function cS(e){return at.pattern.getPositivePatterns(e)}Pe.getPositivePatterns=cS;function lS(e,t){return at.pattern.getNegativePatterns(e).concat(t).map(at.pattern.convertToPositivePattern)}Pe.getNegativePatternsAsPositive=lS;function Fl(e){let t={};return e.reduce((r,n)=>{let i=at.pattern.getBaseDirectory(n);return i in r?r[i].push(n):r[i]=[n],r},t)}Pe.groupPatternsByBaseDirectory=Fl;function Ul(e,t,r){return Object.keys(e).map(n=>kl(n,e[n],t,r))}Pe.convertPatternGroupsToTasks=Ul;function kl(e,t,r,n){return{dynamic:n,positive:t,negative:r,base:e,patterns:[].concat(t,r.map(at.pattern.convertToNegativePattern))}}Pe.convertPatternGroupToTask=kl});var pS=d(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.read=void 0;function Wx(e,t,r){t.fs.lstat(e,(n,i)=>{if(n!==null){fS(r,n);return}if(!i.isSymbolicLink()||!t.followSymbolicLink){jl(r,i);return}t.fs.stat(e,(s,o)=>{if(s!==null){if(t.throwErrorOnBrokenSymbolicLink){fS(r,s);return}jl(r,i);return}t.markSymbolicLink&&(o.isSymbolicLink=()=>!0),jl(r,o)})})}io.read=Wx;function fS(e,t){e(t)}function jl(e,t){e(null,t)}});var _S=d(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.read=void 0;function Yx(e,t){let r=t.fs.lstatSync(e);if(!r.isSymbolicLink()||!t.followSymbolicLink)return r;try{let n=t.fs.statSync(e);return t.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(n){if(!t.throwErrorOnBrokenSymbolicLink)return r;throw n}}so.read=Yx});var hS=d(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.createFileSystemAdapter=Ht.FILE_SYSTEM_ADAPTER=void 0;var oo=v("fs");Ht.FILE_SYSTEM_ADAPTER={lstat:oo.lstat,stat:oo.stat,lstatSync:oo.lstatSync,statSync:oo.statSync};function Kx(e){return e===void 0?Ht.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},Ht.FILE_SYSTEM_ADAPTER),e)}Ht.createFileSystemAdapter=Kx});var gS=d(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var Xx=hS(),Gl=class{constructor(t={}){this._options=t,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=Xx.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(t,r){return t??r}};ql.default=Gl});var pr=d($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.statSync=$t.stat=$t.Settings=void 0;var mS=pS(),zx=_S(),Hl=gS();$t.Settings=Hl.default;function Qx(e,t,r){if(typeof t=="function"){mS.read(e,$l(),t);return}mS.read(e,$l(t),r)}$t.stat=Qx;function Zx(e,t){let r=$l(t);return zx.read(e,r)}$t.statSync=Zx;function $l(e={}){return e instanceof Hl.default?e:new Hl.default(e)}});var AS=d((h2,SS)=>{var ES;SS.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(ES||(ES=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var yS=d((g2,TS)=>{TS.exports=eL;var Jx=AS();function eL(e,t){let r,n,i,s=!0;Array.isArray(e)?(r=[],n=e.length):(i=Object.keys(e),r={},n=i.length);function o(u){function c(){t&&t(u,r),t=null}s?Jx(c):c()}function a(u,c,l){r[u]=l,(--n===0||c)&&o(c)}n?i?i.forEach(function(u){e[u](function(c,l){a(u,c,l)})}):e.forEach(function(u,c){u(function(l,f){a(c,l,f)})}):o(null),s=!1}});var Vl=d(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var ao=process.versions.node.split(".");if(ao[0]===void 0||ao[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var bS=Number.parseInt(ao[0],10),tL=Number.parseInt(ao[1],10),RS=10,rL=10,nL=bS>RS,iL=bS===RS&&tL>=rL;uo.IS_SUPPORT_READDIR_WITH_FILE_TYPES=nL||iL});var OS=d(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.createDirentFromStats=void 0;var Wl=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function sL(e,t){return new Wl(e,t)}co.createDirentFromStats=sL});var Yl=d(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.fs=void 0;var oL=OS();lo.fs=oL});var Kl=d(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.joinPathSegments=void 0;function aL(e,t,r){return e.endsWith(r)?e+t:e+r+t}fo.joinPathSegments=aL});var xS=d(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.readdir=Vt.readdirWithFileTypes=Vt.read=void 0;var uL=pr(),vS=yS(),cL=Vl(),PS=Yl(),CS=Kl();function lL(e,t,r){if(!t.stats&&cL.IS_SUPPORT_READDIR_WITH_FILE_TYPES){IS(e,t,r);return}NS(e,t,r)}Vt.read=lL;function IS(e,t,r){t.fs.readdir(e,{withFileTypes:!0},(n,i)=>{if(n!==null){po(r,n);return}let s=i.map(a=>({dirent:a,name:a.name,path:CS.joinPathSegments(e,a.name,t.pathSegmentSeparator)}));if(!t.followSymbolicLinks){Xl(r,s);return}let o=s.map(a=>dL(a,t));vS(o,(a,u)=>{if(a!==null){po(r,a);return}Xl(r,u)})})}Vt.readdirWithFileTypes=IS;function dL(e,t){return r=>{if(!e.dirent.isSymbolicLink()){r(null,e);return}t.fs.stat(e.path,(n,i)=>{if(n!==null){if(t.throwErrorOnBrokenSymbolicLink){r(n);return}r(null,e);return}e.dirent=PS.fs.createDirentFromStats(e.name,i),r(null,e)})}}function NS(e,t,r){t.fs.readdir(e,(n,i)=>{if(n!==null){po(r,n);return}let s=i.map(o=>{let a=CS.joinPathSegments(e,o,t.pathSegmentSeparator);return u=>{uL.stat(a,t.fsStatSettings,(c,l)=>{if(c!==null){u(c);return}let f={name:o,path:a,dirent:PS.fs.createDirentFromStats(o,l)};t.stats&&(f.stats=l),u(null,f)})}});vS(s,(o,a)=>{if(o!==null){po(r,o);return}Xl(r,a)})})}Vt.readdir=NS;function po(e,t){e(t)}function Xl(e,t){e(null,t)}});var BS=d(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.readdir=Wt.readdirWithFileTypes=Wt.read=void 0;var fL=pr(),pL=Vl(),LS=Yl(),wS=Kl();function _L(e,t){return!t.stats&&pL.IS_SUPPORT_READDIR_WITH_FILE_TYPES?MS(e,t):DS(e,t)}Wt.read=_L;function MS(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map(n=>{let i={dirent:n,name:n.name,path:wS.joinPathSegments(e,n.name,t.pathSegmentSeparator)};if(i.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{let s=t.fs.statSync(i.path);i.dirent=LS.fs.createDirentFromStats(i.name,s)}catch(s){if(t.throwErrorOnBrokenSymbolicLink)throw s}return i})}Wt.readdirWithFileTypes=MS;function DS(e,t){return t.fs.readdirSync(e).map(n=>{let i=wS.joinPathSegments(e,n,t.pathSegmentSeparator),s=fL.statSync(i,t.fsStatSettings),o={name:n,path:i,dirent:LS.fs.createDirentFromStats(n,s)};return t.stats&&(o.stats=s),o})}Wt.readdir=DS});var FS=d(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.createFileSystemAdapter=Yt.FILE_SYSTEM_ADAPTER=void 0;var nn=v("fs");Yt.FILE_SYSTEM_ADAPTER={lstat:nn.lstat,stat:nn.stat,lstatSync:nn.lstatSync,statSync:nn.statSync,readdir:nn.readdir,readdirSync:nn.readdirSync};function hL(e){return e===void 0?Yt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},Yt.FILE_SYSTEM_ADAPTER),e)}Yt.createFileSystemAdapter=hL});var US=d(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var gL=v("path"),mL=pr(),EL=FS(),zl=class{constructor(t={}){this._options=t,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=EL.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,gL.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new mL.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};Ql.default=zl});var _o=d(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.Settings=Kt.scandirSync=Kt.scandir=void 0;var kS=xS(),SL=BS(),Zl=US();Kt.Settings=Zl.default;function AL(e,t,r){if(typeof t=="function"){kS.read(e,Jl(),t);return}kS.read(e,Jl(t),r)}Kt.scandir=AL;function TL(e,t){let r=Jl(t);return SL.read(e,r)}Kt.scandirSync=TL;function Jl(e={}){return e instanceof Zl.default?e:new Zl.default(e)}});var GS=d((v2,jS)=>{"use strict";function yL(e){var t=new e,r=t;function n(){var s=t;return s.next?t=s.next:(t=new e,r=t),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}jS.exports=yL});var HS=d((P2,ed)=>{"use strict";var bL=GS();function qS(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=bL(RL),i=null,s=null,o=0,a=null,u={push:g,drain:tt,saturated:tt,pause:l,paused:!1,get concurrency(){return r},set concurrency(R){if(!(R>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=R,!u.paused)for(;i&&o<r;)o++,A()},running:c,resume:h,idle:_,length:f,getQueue:p,unshift:T,empty:tt,kill:y,killAndDrain:b,error:D};return u;function c(){return o}function l(){u.paused=!0}function f(){for(var R=i,B=0;R;)R=R.next,B++;return B}function p(){for(var R=i,B=[];R;)B.push(R.value),R=R.next;return B}function h(){if(u.paused){if(u.paused=!1,i===null){o++,A();return}for(;i&&o<r;)o++,A()}}function _(){return o===0&&u.length()===0}function g(R,B){var I=n.get();I.context=e,I.release=A,I.value=R,I.callback=B||tt,I.errorHandler=a,o>=r||u.paused?s?(s.next=I,s=I):(i=I,s=I,u.saturated()):(o++,t.call(e,I.value,I.worked))}function T(R,B){var I=n.get();I.context=e,I.release=A,I.value=R,I.callback=B||tt,I.errorHandler=a,o>=r||u.paused?i?(I.next=i,i=I):(i=I,s=I,u.saturated()):(o++,t.call(e,I.value,I.worked))}function A(R){R&&n.release(R);var B=i;B&&o<=r?u.paused?o--:(s===i&&(s=null),i=B.next,B.next=null,t.call(e,B.value,B.worked),s===null&&u.empty()):--o===0&&u.drain()}function y(){i=null,s=null,u.drain=tt}function b(){i=null,s=null,u.drain(),u.drain=tt}function D(R){a=R}}function tt(){}function RL(){this.value=null,this.callback=tt,this.next=null,this.release=tt,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var i=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=tt,e.errorHandler&&s(r,o),i.call(e.context,r,n),e.release(e)}}function OL(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(l,f){t.call(this,l).then(function(p){f(null,p)},f)}var i=qS(e,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=u,i.drained=c,i;function a(l){var f=new Promise(function(p,h){s(l,function(_,g){if(_){h(_);return}p(g)})});return f.catch(tt),f}function u(l){var f=new Promise(function(p,h){o(l,function(_,g){if(_){h(_);return}p(g)})});return f.catch(tt),f}function c(){if(i.idle())return new Promise(function(p){p()});var l=i.drain,f=new Promise(function(p){i.drain=function(){l(),p()}});return f}}ed.exports=qS;ed.exports.promise=OL});var ho=d(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.joinPathSegments=St.replacePathSegmentSeparator=St.isAppliedFilter=St.isFatalError=void 0;function vL(e,t){return e.errorFilter===null?!0:!e.errorFilter(t)}St.isFatalError=vL;function PL(e,t){return e===null||e(t)}St.isAppliedFilter=PL;function CL(e,t){return e.split(/[/\\]/).join(t)}St.replacePathSegmentSeparator=CL;function IL(e,t,r){return e===""?t:e.endsWith(r)?e+t:e+r+t}St.joinPathSegments=IL});var nd=d(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});var NL=ho(),td=class{constructor(t,r){this._root=t,this._settings=r,this._root=NL.replacePathSegmentSeparator(t,r.pathSegmentSeparator)}};rd.default=td});var od=d(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var xL=v("events"),LL=_o(),wL=HS(),go=ho(),ML=nd(),id=class extends ML.default{constructor(t,r){super(t,r),this._settings=r,this._scandir=LL.scandir,this._emitter=new xL.EventEmitter,this._queue=wL(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(t){this._emitter.on("entry",t)}onError(t){this._emitter.once("error",t)}onEnd(t){this._emitter.once("end",t)}_pushToQueue(t,r){let n={directory:t,base:r};this._queue.push(n,i=>{i!==null&&this._handleError(i)})}_worker(t,r){this._scandir(t.directory,this._settings.fsScandirSettings,(n,i)=>{if(n!==null){r(n,void 0);return}for(let s of i)this._handleEntry(s,t.base);r(null,void 0)})}_handleError(t){this._isDestroyed||!go.isFatalError(this._settings,t)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",t))}_handleEntry(t,r){if(this._isDestroyed||this._isFatalError)return;let n=t.path;r!==void 0&&(t.path=go.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),go.isAppliedFilter(this._settings.entryFilter,t)&&this._emitEntry(t),t.dirent.isDirectory()&&go.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_emitEntry(t){this._emitter.emit("entry",t)}};sd.default=id});var $S=d(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var DL=od(),ad=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new DL.default(this._root,this._settings),this._storage=[]}read(t){this._reader.onError(r=>{BL(t,r)}),this._reader.onEntry(r=>{this._storage.push(r)}),this._reader.onEnd(()=>{FL(t,this._storage)}),this._reader.read()}};ud.default=ad;function BL(e,t){e(t)}function FL(e,t){e(null,t)}});var VS=d(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var UL=v("stream"),kL=od(),cd=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new kL.default(this._root,this._settings),this._stream=new UL.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(t=>{this._stream.emit("error",t)}),this._reader.onEntry(t=>{this._stream.push(t)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}};ld.default=cd});var WS=d(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});var jL=_o(),mo=ho(),GL=nd(),dd=class extends GL.default{constructor(){super(...arguments),this._scandir=jL.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(t,r){this._queue.add({directory:t,base:r})}_handleQueue(){for(let t of this._queue.values())this._handleDirectory(t.directory,t.base)}_handleDirectory(t,r){try{let n=this._scandir(t,this._settings.fsScandirSettings);for(let i of n)this._handleEntry(i,r)}catch(n){this._handleError(n)}}_handleError(t){if(mo.isFatalError(this._settings,t))throw t}_handleEntry(t,r){let n=t.path;r!==void 0&&(t.path=mo.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),mo.isAppliedFilter(this._settings.entryFilter,t)&&this._pushToStorage(t),t.dirent.isDirectory()&&mo.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_pushToStorage(t){this._storage.push(t)}};fd.default=dd});var YS=d(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});var qL=WS(),pd=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new qL.default(this._root,this._settings)}read(){return this._reader.read()}};_d.default=pd});var KS=d(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});var HL=v("path"),$L=_o(),hd=class{constructor(t={}){this._options=t,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,HL.sep),this.fsScandirSettings=new $L.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};gd.default=hd});var So=d(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.Settings=At.walkStream=At.walkSync=At.walk=void 0;var XS=$S(),VL=VS(),WL=YS(),md=KS();At.Settings=md.default;function YL(e,t,r){if(typeof t=="function"){new XS.default(e,Eo()).read(t);return}new XS.default(e,Eo(t)).read(r)}At.walk=YL;function KL(e,t){let r=Eo(t);return new WL.default(e,r).read()}At.walkSync=KL;function XL(e,t){let r=Eo(t);return new VL.default(e,r).read()}At.walkStream=XL;function Eo(e={}){return e instanceof md.default?e:new md.default(e)}});var Ao=d(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});var zL=v("path"),QL=pr(),zS=Lt(),Ed=class{constructor(t){this._settings=t,this._fsStatSettings=new QL.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(t){return zL.resolve(this._settings.cwd,t)}_makeEntry(t,r){let n={name:r,path:r,dirent:zS.fs.createDirentFromStats(r,t)};return this._settings.stats&&(n.stats=t),n}_isFatalError(t){return!zS.errno.isEnoentCodeError(t)&&!this._settings.suppressErrors}};Sd.default=Ed});var yd=d(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});var ZL=v("stream"),JL=pr(),ew=So(),tw=Ao(),Ad=class extends tw.default{constructor(){super(...arguments),this._walkStream=ew.walkStream,this._stat=JL.stat}dynamic(t,r){return this._walkStream(t,r)}static(t,r){let n=t.map(this._getFullEntryPath,this),i=new ZL.PassThrough({objectMode:!0});i._write=(s,o,a)=>this._getEntry(n[s],t[s],r).then(u=>{u!==null&&r.entryFilter(u)&&i.push(u),s===n.length-1&&i.end(),a()}).catch(a);for(let s=0;s<n.length;s++)i.write(s);return i}_getEntry(t,r,n){return this._getStat(t).then(i=>this._makeEntry(i,r)).catch(i=>{if(n.errorFilter(i))return null;throw i})}_getStat(t){return new Promise((r,n)=>{this._stat(t,this._fsStatSettings,(i,s)=>i===null?r(s):n(i))})}};Td.default=Ad});var QS=d(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var rw=So(),nw=Ao(),iw=yd(),bd=class extends nw.default{constructor(){super(...arguments),this._walkAsync=rw.walk,this._readerStream=new iw.default(this._settings)}dynamic(t,r){return new Promise((n,i)=>{this._walkAsync(t,r,(s,o)=>{s===null?n(o):i(s)})})}async static(t,r){let n=[],i=this._readerStream.static(t,r);return new Promise((s,o)=>{i.once("error",o),i.on("data",a=>n.push(a)),i.once("end",()=>s(n))})}};Rd.default=bd});var ZS=d(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});var vi=Lt(),Od=class{constructor(t,r,n){this._patterns=t,this._settings=r,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){for(let t of this._patterns){let r=this._getPatternSegments(t),n=this._splitSegmentsIntoSections(r);this._storage.push({complete:n.length<=1,pattern:t,segments:r,sections:n})}}_getPatternSegments(t){return vi.pattern.getPatternParts(t,this._micromatchOptions).map(n=>vi.pattern.isDynamicPattern(n,this._settings)?{dynamic:!0,pattern:n,patternRe:vi.pattern.makeRe(n,this._micromatchOptions)}:{dynamic:!1,pattern:n})}_splitSegmentsIntoSections(t){return vi.array.splitWhen(t,r=>r.dynamic&&vi.pattern.hasGlobStar(r.pattern))}};vd.default=Od});var JS=d(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var sw=ZS(),Pd=class extends sw.default{match(t){let r=t.split("/"),n=r.length,i=this._storage.filter(s=>!s.complete||s.segments.length>n);for(let s of i){let o=s.sections[0];if(!s.complete&&n>o.length||r.every((u,c)=>{let l=s.segments[c];return!!(l.dynamic&&l.patternRe.test(u)||!l.dynamic&&l.pattern===u)}))return!0}return!1}};Cd.default=Pd});var eA=d(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});var To=Lt(),ow=JS(),Id=class{constructor(t,r){this._settings=t,this._micromatchOptions=r}getFilter(t,r,n){let i=this._getMatcher(r),s=this._getNegativePatternsRe(n);return o=>this._filter(t,o,i,s)}_getMatcher(t){return new ow.default(t,this._settings,this._micromatchOptions)}_getNegativePatternsRe(t){let r=t.filter(To.pattern.isAffectDepthOfReadingPattern);return To.pattern.convertPatternsToRe(r,this._micromatchOptions)}_filter(t,r,n,i){if(this._isSkippedByDeep(t,r.path)||this._isSkippedSymbolicLink(r))return!1;let s=To.path.removeLeadingDotSegment(r.path);return this._isSkippedByPositivePatterns(s,n)?!1:this._isSkippedByNegativePatterns(s,i)}_isSkippedByDeep(t,r){return this._settings.deep===1/0?!1:this._getEntryLevel(t,r)>=this._settings.deep}_getEntryLevel(t,r){let n=r.split("/").length;if(t==="")return n;let i=t.split("/").length;return n-i}_isSkippedSymbolicLink(t){return!this._settings.followSymbolicLinks&&t.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(t,r){return!this._settings.baseNameMatch&&!r.match(t)}_isSkippedByNegativePatterns(t,r){return!To.pattern.matchAny(t,r)}};Nd.default=Id});var tA=d(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});var _r=Lt(),xd=class{constructor(t,r){this._settings=t,this._micromatchOptions=r,this.index=new Map}getFilter(t,r){let n=_r.pattern.convertPatternsToRe(t,this._micromatchOptions),i=_r.pattern.convertPatternsToRe(r,Object.assign(Object.assign({},this._micromatchOptions),{dot:!0}));return s=>this._filter(s,n,i)}_filter(t,r,n){let i=_r.path.removeLeadingDotSegment(t.path);if(this._settings.unique&&this._isDuplicateEntry(i)||this._onlyFileFilter(t)||this._onlyDirectoryFilter(t)||this._isSkippedByAbsoluteNegativePatterns(i,n))return!1;let s=t.dirent.isDirectory(),o=this._isMatchToPatterns(i,r,s)&&!this._isMatchToPatterns(i,n,s);return this._settings.unique&&o&&this._createIndexRecord(i),o}_isDuplicateEntry(t){return this.index.has(t)}_createIndexRecord(t){this.index.set(t,void 0)}_onlyFileFilter(t){return this._settings.onlyFiles&&!t.dirent.isFile()}_onlyDirectoryFilter(t){return this._settings.onlyDirectories&&!t.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(t,r){if(!this._settings.absolute)return!1;let n=_r.path.makeAbsolute(this._settings.cwd,t);return _r.pattern.matchAny(n,r)}_isMatchToPatterns(t,r,n){let i=_r.pattern.matchAny(t,r);return!i&&n?_r.pattern.matchAny(t+"/",r):i}};Ld.default=xd});var rA=d(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var aw=Lt(),wd=class{constructor(t){this._settings=t}getFilter(){return t=>this._isNonFatalError(t)}_isNonFatalError(t){return aw.errno.isEnoentCodeError(t)||this._settings.suppressErrors}};Md.default=wd});var iA=d(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});var nA=Lt(),Dd=class{constructor(t){this._settings=t}getTransformer(){return t=>this._transform(t)}_transform(t){let r=t.path;return this._settings.absolute&&(r=nA.path.makeAbsolute(this._settings.cwd,r),r=nA.path.unixify(r)),this._settings.markDirectories&&t.dirent.isDirectory()&&(r+="/"),this._settings.objectMode?Object.assign(Object.assign({},t),{path:r}):r}};Bd.default=Dd});var yo=d(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});var uw=v("path"),cw=eA(),lw=tA(),dw=rA(),fw=iA(),Fd=class{constructor(t){this._settings=t,this.errorFilter=new dw.default(this._settings),this.entryFilter=new lw.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new cw.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new fw.default(this._settings)}_getRootDirectory(t){return uw.resolve(this._settings.cwd,t.base)}_getReaderOptions(t){let r=t.base==="."?"":t.base;return{basePath:r,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(r,t.positive,t.negative),entryFilter:this.entryFilter.getFilter(t.positive,t.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}};Ud.default=Fd});var sA=d(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});var pw=QS(),_w=yo(),kd=class extends _w.default{constructor(){super(...arguments),this._reader=new pw.default(this._settings)}async read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return(await this.api(r,t,n)).map(s=>n.transform(s))}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};jd.default=kd});var oA=d(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});var hw=v("stream"),gw=yd(),mw=yo(),Gd=class extends mw.default{constructor(){super(...arguments),this._reader=new gw.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t),i=this.api(r,t,n),s=new hw.Readable({objectMode:!0,read:()=>{}});return i.once("error",o=>s.emit("error",o)).on("data",o=>s.emit("data",n.transform(o))).once("end",()=>s.emit("end")),s.once("close",()=>i.destroy()),s}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};qd.default=Gd});var aA=d($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});var Ew=pr(),Sw=So(),Aw=Ao(),Hd=class extends Aw.default{constructor(){super(...arguments),this._walkSync=Sw.walkSync,this._statSync=Ew.statSync}dynamic(t,r){return this._walkSync(t,r)}static(t,r){let n=[];for(let i of t){let s=this._getFullEntryPath(i),o=this._getEntry(s,i,r);o===null||!r.entryFilter(o)||n.push(o)}return n}_getEntry(t,r,n){try{let i=this._getStat(t);return this._makeEntry(i,r)}catch(i){if(n.errorFilter(i))return null;throw i}}_getStat(t){return this._statSync(t,this._fsStatSettings)}};$d.default=Hd});var uA=d(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});var Tw=aA(),yw=yo(),Vd=class extends yw.default{constructor(){super(...arguments),this._reader=new Tw.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return this.api(r,t,n).map(n.transform)}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Wd.default=Vd});var cA=d(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var sn=v("fs"),bw=v("os"),Rw=Math.max(bw.cpus().length,1);on.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:sn.lstat,lstatSync:sn.lstatSync,stat:sn.stat,statSync:sn.statSync,readdir:sn.readdir,readdirSync:sn.readdirSync};var Yd=class{constructor(t={}){this._options=t,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,Rw),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0),this.ignore=[].concat(this.ignore)}_getValue(t,r){return t===void 0?r:t}_getFileSystemMethods(t={}){return Object.assign(Object.assign({},on.DEFAULT_FILE_SYSTEM_ADAPTER),t)}};on.default=Yd});var Qd=d((Z2,dA)=>{"use strict";var lA=dS(),Ow=sA(),vw=oA(),Pw=uA(),Kd=cA(),rt=Lt();async function Xd(e,t){ut(e);let r=zd(e,Ow.default,t),n=await Promise.all(r);return rt.array.flatten(n)}(function(e){e.glob=e,e.globSync=t,e.globStream=r,e.async=e;function t(c,l){ut(c);let f=zd(c,Pw.default,l);return rt.array.flatten(f)}e.sync=t;function r(c,l){ut(c);let f=zd(c,vw.default,l);return rt.stream.merge(f)}e.stream=r;function n(c,l){ut(c);let f=[].concat(c),p=new Kd.default(l);return lA.generate(f,p)}e.generateTasks=n;function i(c,l){ut(c);let f=new Kd.default(l);return rt.pattern.isDynamicPattern(c,f)}e.isDynamicPattern=i;function s(c){return ut(c),rt.path.escape(c)}e.escapePath=s;function o(c){return ut(c),rt.path.convertPathToPattern(c)}e.convertPathToPattern=o;let a;(function(c){function l(p){return ut(p),rt.path.escapePosixPath(p)}c.escapePath=l;function f(p){return ut(p),rt.path.convertPosixPathToPattern(p)}c.convertPathToPattern=f})(a=e.posix||(e.posix={}));let u;(function(c){function l(p){return ut(p),rt.path.escapeWindowsPath(p)}c.escapePath=l;function f(p){return ut(p),rt.path.convertWindowsPathToPattern(p)}c.convertPathToPattern=f})(u=e.win32||(e.win32={}))})(Xd||(Xd={}));function zd(e,t,r){let n=[].concat(e),i=new Kd.default(r),s=lA.generate(n,i),o=new t(i);return s.map(o.read,o)}function ut(e){if(![].concat(e).every(n=>rt.string.isString(n)&&!rt.string.isEmpty(n)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}dA.exports=Xd});var bA=d((oH,yA)=>{function hA(e){return Array.isArray(e)?e:[e]}var rf="",gA=" ",ef="\\",Cw=/^\s+$/,Iw=/(?:[^\\]|^)\\$/,Nw=/^\\!/,xw=/^\\#/,Lw=/\r?\n/g,ww=/^\.*\/|^\.+$/,tf="/",SA="node-ignore";typeof Symbol<"u"&&(SA=Symbol.for("node-ignore"));var mA=SA,Mw=(e,t,r)=>Object.defineProperty(e,t,{value:r}),Dw=/([0-z])-([0-z])/g,AA=()=>!1,Bw=e=>e.replace(Dw,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:rf),Fw=e=>{let{length:t}=e;return e.slice(0,t-t%2)},Uw=[[/^\uFEFF/,()=>rf],[/\\?\s+$/,e=>e.indexOf("\\")===0?gA:rf],[/\\\s/g,()=>gA],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>ef],[/\\\\/g,()=>ef],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===ef?`\\[${r}${Fw(n)}${i}`:i==="]"&&n.length%2===0?`[${Bw(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],EA=Object.create(null),kw=(e,t)=>{let r=EA[e];return r||(r=Uw.reduce((n,i)=>n.replace(i[0],i[1].bind(e)),e),EA[e]=r),t?new RegExp(r,"i"):new RegExp(r)},of=e=>typeof e=="string",jw=e=>e&&of(e)&&!Cw.test(e)&&!Iw.test(e)&&e.indexOf("#")!==0,Gw=e=>e.split(Lw),nf=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},qw=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(Nw,"!").replace(xw,"#");let i=kw(e,t);return new nf(r,e,n,i)},Hw=(e,t)=>{throw new t(e)},wt=(e,t,r)=>of(e)?e?wt.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),TA=e=>ww.test(e);wt.isNotRelative=TA;wt.convert=e=>e;var sf=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){Mw(this,mA,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[mA]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(jw(t)){let r=qw(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,hA(of(t)?Gw(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(s=>{let{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let s=t&&wt.convert(t);return wt(s,t,this._allowRelativePaths?AA:Hw),this._t(s,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(tf)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let s=this._t(i.join(tf)+tf,r,n,i);return r[t]=s.ignored?s:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return hA(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Ro=e=>new sf(e),$w=e=>wt(e&&wt.convert(e),e,AA);Ro.isPathValid=$w;Ro.default=Ro;yA.exports=Ro;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");wt.convert=e;let t=/^[a-z]:\//i;wt.isNotRelative=r=>t.test(r)||TA(r)}});var XA=d((OH,ff)=>{"use strict";var Zw=Object.prototype.hasOwnProperty,Be="~";function Ii(){}Object.create&&(Ii.prototype=Object.create(null),new Ii().__proto__||(Be=!1));function Jw(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function KA(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Jw(r,n||e,i),o=Be?Be+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function vo(e,t){--e._eventsCount===0?e._events=new Ii:delete e._events[t]}function Ce(){this._events=new Ii,this._eventsCount=0}Ce.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)Zw.call(r,n)&&t.push(Be?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Ce.prototype.listeners=function(t){var r=Be?Be+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Ce.prototype.listenerCount=function(t){var r=Be?Be+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Ce.prototype.emit=function(t,r,n,i,s,o){var a=Be?Be+t:t;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,l,f;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(f=1,l=new Array(c-1);f<c;f++)l[f-1]=arguments[f];u.fn.apply(u.context,l)}else{var p=u.length,h;for(f=0;f<p;f++)switch(u[f].once&&this.removeListener(t,u[f].fn,void 0,!0),c){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,r);break;case 3:u[f].fn.call(u[f].context,r,n);break;case 4:u[f].fn.call(u[f].context,r,n,i);break;default:if(!l)for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u[f].fn.apply(u[f].context,l)}}return!0};Ce.prototype.on=function(t,r,n){return KA(this,t,r,n,!1)};Ce.prototype.once=function(t,r,n){return KA(this,t,r,n,!0)};Ce.prototype.removeListener=function(t,r,n,i){var s=Be?Be+t:t;if(!this._events[s])return this;if(!r)return vo(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&vo(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:vo(this,s)}return this};Ce.prototype.removeAllListeners=function(t){var r;return t?(r=Be?Be+t:t,this._events[r]&&vo(this,r)):(this._events=new Ii,this._eventsCount=0),this};Ce.prototype.off=Ce.prototype.removeListener;Ce.prototype.addListener=Ce.prototype.on;Ce.prefixed=Be;Ce.EventEmitter=Ce;typeof ff<"u"&&(ff.exports=Ce)});var JA=d(Af=>{"use strict";var Po=class{constructor(t){this.tasks=[],this.count=t}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let t=this.tasks.shift();if(t===void 0)throw"Unexpected undefined value in tasks list";t()}}acquire(){return new Promise((t,r)=>{var n=()=>{var i=!1;t(()=>{i||(i=!0,this.count++,this.sched())})};this.tasks.push(n),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))})}use(t){return this.acquire().then(r=>t().then(n=>(r(),n)).catch(n=>{throw r(),n}))}};Af.Semaphore=Po;var Sf=class extends Po{constructor(){super(1)}};Af.Mutex=Sf});var uT=d(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co._globalThis=void 0;Co._globalThis=typeof globalThis=="object"?globalThis:global});var cT=d(Er=>{"use strict";var _M=Er&&Er.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),hM=Er&&Er.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&_M(t,e,r)};Object.defineProperty(Er,"__esModule",{value:!0});hM(uT(),Er)});var lT=d(Sr=>{"use strict";var gM=Sr&&Sr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mM=Sr&&Sr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gM(t,e,r)};Object.defineProperty(Sr,"__esModule",{value:!0});mM(cT(),Sr)});var Of=d(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.VERSION=void 0;Io.VERSION="1.7.0"});var pT=d(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.isCompatible=cn._makeCompatibilityCheck=void 0;var EM=Of(),dT=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function fT(e){let t=new Set([e]),r=new Set,n=e.match(dT);if(!n)return()=>!1;let i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(u){return u===e};function s(a){return r.add(a),!1}function o(a){return t.add(a),!0}return function(u){if(t.has(u))return!0;if(r.has(u))return!1;let c=u.match(dT);if(!c)return s(u);let l={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return l.prerelease!=null||i.major!==l.major?s(u):i.major===0?i.minor===l.minor&&i.patch<=l.patch?o(u):s(u):i.minor<=l.minor?o(u):s(u)}}cn._makeCompatibilityCheck=fT;cn.isCompatible=fT(EM.VERSION)});var Ar=d(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.unregisterGlobal=Xt.getGlobal=Xt.registerGlobal=void 0;var SM=lT(),ln=Of(),AM=pT(),TM=ln.VERSION.split(".")[0],Di=Symbol.for(`opentelemetry.js.api.${TM}`),Bi=SM._globalThis;function yM(e,t,r,n=!1){var i;let s=Bi[Di]=(i=Bi[Di])!==null&&i!==void 0?i:{version:ln.VERSION};if(!n&&s[e]){let o=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(o.stack||o.message),!1}if(s.version!==ln.VERSION){let o=new Error(`@opentelemetry/api: Registration of version v${s.version} for ${e} does not match previously registered API v${ln.VERSION}`);return r.error(o.stack||o.message),!1}return s[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${ln.VERSION}.`),!0}Xt.registerGlobal=yM;function bM(e){var t,r;let n=(t=Bi[Di])===null||t===void 0?void 0:t.version;if(!(!n||!(0,AM.isCompatible)(n)))return(r=Bi[Di])===null||r===void 0?void 0:r[e]}Xt.getGlobal=bM;function RM(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${ln.VERSION}.`);let r=Bi[Di];r&&delete r[e]}Xt.unregisterGlobal=RM});var _T=d(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.DiagComponentLogger=void 0;var OM=Ar(),vf=class{constructor(t){this._namespace=t.namespace||"DiagComponentLogger"}debug(...t){return Fi("debug",this._namespace,t)}error(...t){return Fi("error",this._namespace,t)}info(...t){return Fi("info",this._namespace,t)}warn(...t){return Fi("warn",this._namespace,t)}verbose(...t){return Fi("verbose",this._namespace,t)}};No.DiagComponentLogger=vf;function Fi(e,t,r){let n=(0,OM.getGlobal)("diag");if(n)return r.unshift(t),n[e](...r)}});var xo=d(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.DiagLogLevel=void 0;var vM;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(vM=Ui.DiagLogLevel||(Ui.DiagLogLevel={}))});var hT=d(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.createLogLevelDiagLogger=void 0;var Dt=xo();function PM(e,t){e<Dt.DiagLogLevel.NONE?e=Dt.DiagLogLevel.NONE:e>Dt.DiagLogLevel.ALL&&(e=Dt.DiagLogLevel.ALL),t=t||{};function r(n,i){let s=t[n];return typeof s=="function"&&e>=i?s.bind(t):function(){}}return{error:r("error",Dt.DiagLogLevel.ERROR),warn:r("warn",Dt.DiagLogLevel.WARN),info:r("info",Dt.DiagLogLevel.INFO),debug:r("debug",Dt.DiagLogLevel.DEBUG),verbose:r("verbose",Dt.DiagLogLevel.VERBOSE)}}Lo.createLogLevelDiagLogger=PM});var Tr=d(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.DiagAPI=void 0;var CM=_T(),IM=hT(),gT=xo(),wo=Ar(),NM="diag",Pf=class e{constructor(){function t(i){return function(...s){let o=(0,wo.getGlobal)("diag");if(o)return o[i](...s)}}let r=this,n=(i,s={logLevel:gT.DiagLogLevel.INFO})=>{var o,a,u;if(i===r){let f=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=f.stack)!==null&&o!==void 0?o:f.message),!1}typeof s=="number"&&(s={logLevel:s});let c=(0,wo.getGlobal)("diag"),l=(0,IM.createLogLevelDiagLogger)((a=s.logLevel)!==null&&a!==void 0?a:gT.DiagLogLevel.INFO,i);if(c&&!s.suppressOverrideMessage){let f=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${f}`),l.warn(`Current logger will overwrite one already registered from ${f}`)}return(0,wo.registerGlobal)("diag",l,r,!0)};r.setLogger=n,r.disable=()=>{(0,wo.unregisterGlobal)(NM,r)},r.createComponentLogger=i=>new CM.DiagComponentLogger(i),r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}static instance(){return this._instance||(this._instance=new e),this._instance}};Mo.DiagAPI=Pf});var mT=d(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.BaggageImpl=void 0;var Cf=class e{constructor(t){this._entries=t?new Map(t):new Map}getEntry(t){let r=this._entries.get(t);if(r)return Object.assign({},r)}getAllEntries(){return Array.from(this._entries.entries()).map(([t,r])=>[t,r])}setEntry(t,r){let n=new e(this._entries);return n._entries.set(t,r),n}removeEntry(t){let r=new e(this._entries);return r._entries.delete(t),r}removeEntries(...t){let r=new e(this._entries);for(let n of t)r._entries.delete(n);return r}clear(){return new e}};Do.BaggageImpl=Cf});var ET=d(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.baggageEntryMetadataSymbol=void 0;Bo.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var If=d(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.baggageEntryMetadataFromString=dn.createBaggage=void 0;var xM=Tr(),LM=mT(),wM=ET(),MM=xM.DiagAPI.instance();function DM(e={}){return new LM.BaggageImpl(new Map(Object.entries(e)))}dn.createBaggage=DM;function BM(e){return typeof e!="string"&&(MM.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:wM.baggageEntryMetadataSymbol,toString(){return e}}}dn.baggageEntryMetadataFromString=BM});var ki=d(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.ROOT_CONTEXT=fn.createContextKey=void 0;function FM(e){return Symbol.for(e)}fn.createContextKey=FM;var Nf=class e{constructor(t){let r=this;r._currentContext=t?new Map(t):new Map,r.getValue=n=>r._currentContext.get(n),r.setValue=(n,i)=>{let s=new e(r._currentContext);return s._currentContext.set(n,i),s},r.deleteValue=n=>{let i=new e(r._currentContext);return i._currentContext.delete(n),i}}};fn.ROOT_CONTEXT=new Nf});var ST=d(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.DiagConsoleLogger=void 0;var xf=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Lf=class{constructor(){function t(r){return function(...n){if(console){let i=console[r];if(typeof i!="function"&&(i=console.log),typeof i=="function")return i.apply(console,n)}}}for(let r=0;r<xf.length;r++)this[xf[r].n]=t(xf[r].c)}};Fo.DiagConsoleLogger=Lf});var wf=d(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.createNoopMeter=U.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=U.NOOP_OBSERVABLE_GAUGE_METRIC=U.NOOP_OBSERVABLE_COUNTER_METRIC=U.NOOP_UP_DOWN_COUNTER_METRIC=U.NOOP_HISTOGRAM_METRIC=U.NOOP_COUNTER_METRIC=U.NOOP_METER=U.NoopObservableUpDownCounterMetric=U.NoopObservableGaugeMetric=U.NoopObservableCounterMetric=U.NoopObservableMetric=U.NoopHistogramMetric=U.NoopUpDownCounterMetric=U.NoopCounterMetric=U.NoopMetric=U.NoopMeter=void 0;var Uo=class{constructor(){}createHistogram(t,r){return U.NOOP_HISTOGRAM_METRIC}createCounter(t,r){return U.NOOP_COUNTER_METRIC}createUpDownCounter(t,r){return U.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(t,r){return U.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(t,r){return U.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(t,r){return U.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(t,r){}removeBatchObservableCallback(t){}};U.NoopMeter=Uo;var pn=class{};U.NoopMetric=pn;var ko=class extends pn{add(t,r){}};U.NoopCounterMetric=ko;var jo=class extends pn{add(t,r){}};U.NoopUpDownCounterMetric=jo;var Go=class extends pn{record(t,r){}};U.NoopHistogramMetric=Go;var _n=class{addCallback(t){}removeCallback(t){}};U.NoopObservableMetric=_n;var qo=class extends _n{};U.NoopObservableCounterMetric=qo;var Ho=class extends _n{};U.NoopObservableGaugeMetric=Ho;var $o=class extends _n{};U.NoopObservableUpDownCounterMetric=$o;U.NOOP_METER=new Uo;U.NOOP_COUNTER_METRIC=new ko;U.NOOP_HISTOGRAM_METRIC=new Go;U.NOOP_UP_DOWN_COUNTER_METRIC=new jo;U.NOOP_OBSERVABLE_COUNTER_METRIC=new qo;U.NOOP_OBSERVABLE_GAUGE_METRIC=new Ho;U.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new $o;function UM(){return U.NOOP_METER}U.createNoopMeter=UM});var AT=d(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.ValueType=void 0;var kM;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(kM=ji.ValueType||(ji.ValueType={}))});var Mf=d(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.defaultTextMapSetter=hn.defaultTextMapGetter=void 0;hn.defaultTextMapGetter={get(e,t){if(e!=null)return e[t]},keys(e){return e==null?[]:Object.keys(e)}};hn.defaultTextMapSetter={set(e,t,r){e!=null&&(e[t]=r)}}});var TT=d(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.NoopContextManager=void 0;var jM=ki(),Df=class{active(){return jM.ROOT_CONTEXT}with(t,r,n,...i){return r.call(n,...i)}bind(t,r){return r}enable(){return this}disable(){return this}};Vo.NoopContextManager=Df});var Gi=d(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.ContextAPI=void 0;var GM=TT(),Bf=Ar(),yT=Tr(),Ff="context",qM=new GM.NoopContextManager,Uf=class e{constructor(){}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalContextManager(t){return(0,Bf.registerGlobal)(Ff,t,yT.DiagAPI.instance())}active(){return this._getContextManager().active()}with(t,r,n,...i){return this._getContextManager().with(t,r,n,...i)}bind(t,r){return this._getContextManager().bind(t,r)}_getContextManager(){return(0,Bf.getGlobal)(Ff)||qM}disable(){this._getContextManager().disable(),(0,Bf.unregisterGlobal)(Ff,yT.DiagAPI.instance())}};Wo.ContextAPI=Uf});var kf=d(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.TraceFlags=void 0;var HM;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(HM=qi.TraceFlags||(qi.TraceFlags={}))});var Yo=d(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.INVALID_SPAN_CONTEXT=Tt.INVALID_TRACEID=Tt.INVALID_SPANID=void 0;var $M=kf();Tt.INVALID_SPANID="0000000000000000";Tt.INVALID_TRACEID="00000000000000000000000000000000";Tt.INVALID_SPAN_CONTEXT={traceId:Tt.INVALID_TRACEID,spanId:Tt.INVALID_SPANID,traceFlags:$M.TraceFlags.NONE}});var Xo=d(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.NonRecordingSpan=void 0;var VM=Yo(),jf=class{constructor(t=VM.INVALID_SPAN_CONTEXT){this._spanContext=t}spanContext(){return this._spanContext}setAttribute(t,r){return this}setAttributes(t){return this}addEvent(t,r){return this}setStatus(t){return this}updateName(t){return this}end(t){}isRecording(){return!1}recordException(t,r){}};Ko.NonRecordingSpan=jf});var Hf=d(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.getSpanContext=Ge.setSpanContext=Ge.deleteSpan=Ge.setSpan=Ge.getActiveSpan=Ge.getSpan=void 0;var WM=ki(),YM=Xo(),KM=Gi(),Gf=(0,WM.createContextKey)("OpenTelemetry Context Key SPAN");function qf(e){return e.getValue(Gf)||void 0}Ge.getSpan=qf;function XM(){return qf(KM.ContextAPI.getInstance().active())}Ge.getActiveSpan=XM;function bT(e,t){return e.setValue(Gf,t)}Ge.setSpan=bT;function zM(e){return e.deleteValue(Gf)}Ge.deleteSpan=zM;function QM(e,t){return bT(e,new YM.NonRecordingSpan(t))}Ge.setSpanContext=QM;function ZM(e){var t;return(t=qf(e))===null||t===void 0?void 0:t.spanContext()}Ge.getSpanContext=ZM});var zo=d(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.wrapSpanContext=yt.isSpanContextValid=yt.isValidSpanId=yt.isValidTraceId=void 0;var RT=Yo(),JM=Xo(),e1=/^([0-9a-f]{32})$/i,t1=/^[0-9a-f]{16}$/i;function OT(e){return e1.test(e)&&e!==RT.INVALID_TRACEID}yt.isValidTraceId=OT;function vT(e){return t1.test(e)&&e!==RT.INVALID_SPANID}yt.isValidSpanId=vT;function r1(e){return OT(e.traceId)&&vT(e.spanId)}yt.isSpanContextValid=r1;function n1(e){return new JM.NonRecordingSpan(e)}yt.wrapSpanContext=n1});var Yf=d(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.NoopTracer=void 0;var i1=Gi(),PT=Hf(),$f=Xo(),s1=zo(),Vf=i1.ContextAPI.getInstance(),Wf=class{startSpan(t,r,n=Vf.active()){if(!!r?.root)return new $f.NonRecordingSpan;let s=n&&(0,PT.getSpanContext)(n);return o1(s)&&(0,s1.isSpanContextValid)(s)?new $f.NonRecordingSpan(s):new $f.NonRecordingSpan}startActiveSpan(t,r,n,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);let u=o??Vf.active(),c=this.startSpan(t,s,u),l=(0,PT.setSpan)(u,c);return Vf.with(l,a,void 0,c)}};Qo.NoopTracer=Wf;function o1(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}});var Xf=d(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.ProxyTracer=void 0;var a1=Yf(),u1=new a1.NoopTracer,Kf=class{constructor(t,r,n,i){this._provider=t,this.name=r,this.version=n,this.options=i}startSpan(t,r,n){return this._getTracer().startSpan(t,r,n)}startActiveSpan(t,r,n,i){let s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)}_getTracer(){if(this._delegate)return this._delegate;let t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):u1}};Zo.ProxyTracer=Kf});var CT=d(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.NoopTracerProvider=void 0;var c1=Yf(),zf=class{getTracer(t,r,n){return new c1.NoopTracer}};Jo.NoopTracerProvider=zf});var Zf=d(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.ProxyTracerProvider=void 0;var l1=Xf(),d1=CT(),f1=new d1.NoopTracerProvider,Qf=class{getTracer(t,r,n){var i;return(i=this.getDelegateTracer(t,r,n))!==null&&i!==void 0?i:new l1.ProxyTracer(this,t,r,n)}getDelegate(){var t;return(t=this._delegate)!==null&&t!==void 0?t:f1}setDelegate(t){this._delegate=t}getDelegateTracer(t,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,r,n)}};ea.ProxyTracerProvider=Qf});var IT=d(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.SamplingDecision=void 0;var p1;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(p1=Hi.SamplingDecision||(Hi.SamplingDecision={}))});var NT=d($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.SpanKind=void 0;var _1;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(_1=$i.SpanKind||($i.SpanKind={}))});var xT=d(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.SpanStatusCode=void 0;var h1;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(h1=Vi.SpanStatusCode||(Vi.SpanStatusCode={}))});var LT=d(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.validateValue=gn.validateKey=void 0;var Jf="[_0-9a-z-*/]",g1=`[a-z]${Jf}{0,255}`,m1=`[a-z0-9]${Jf}{0,240}@[a-z]${Jf}{0,13}`,E1=new RegExp(`^(?:${g1}|${m1})$`),S1=/^[ -~]{0,255}[!-~]$/,A1=/,|=/;function T1(e){return E1.test(e)}gn.validateKey=T1;function y1(e){return S1.test(e)&&!A1.test(e)}gn.validateValue=y1});var FT=d(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.TraceStateImpl=void 0;var wT=LT(),MT=32,b1=512,DT=",",BT="=",ep=class e{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+BT+this.get(r)),t),[]).join(DT)}_parse(t){t.length>b1||(this._internalState=t.split(DT).reverse().reduce((r,n)=>{let i=n.trim(),s=i.indexOf(BT);if(s!==-1){let o=i.slice(0,s),a=i.slice(s+1,n.length);(0,wT.validateKey)(o)&&(0,wT.validateValue)(a)&&r.set(o,a)}return r},new Map),this._internalState.size>MT&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,MT))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new e;return t._internalState=new Map(this._internalState),t}};ta.TraceStateImpl=ep});var UT=d(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.createTraceState=void 0;var R1=FT();function O1(e){return new R1.TraceStateImpl(e)}ra.createTraceState=O1});var kT=d(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.context=void 0;var v1=Gi();na.context=v1.ContextAPI.getInstance()});var jT=d(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.diag=void 0;var P1=Tr();ia.diag=P1.DiagAPI.instance()});var GT=d(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.NOOP_METER_PROVIDER=mn.NoopMeterProvider=void 0;var C1=wf(),sa=class{getMeter(t,r,n){return C1.NOOP_METER}};mn.NoopMeterProvider=sa;mn.NOOP_METER_PROVIDER=new sa});var HT=d(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.MetricsAPI=void 0;var I1=GT(),tp=Ar(),qT=Tr(),rp="metrics",np=class e{constructor(){}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalMeterProvider(t){return(0,tp.registerGlobal)(rp,t,qT.DiagAPI.instance())}getMeterProvider(){return(0,tp.getGlobal)(rp)||I1.NOOP_METER_PROVIDER}getMeter(t,r,n){return this.getMeterProvider().getMeter(t,r,n)}disable(){(0,tp.unregisterGlobal)(rp,qT.DiagAPI.instance())}};oa.MetricsAPI=np});var $T=d(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.metrics=void 0;var N1=HT();aa.metrics=N1.MetricsAPI.getInstance()});var VT=d(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.NoopTextMapPropagator=void 0;var ip=class{inject(t,r){}extract(t,r){return t}fields(){return[]}};ua.NoopTextMapPropagator=ip});var YT=d(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.deleteBaggage=bt.setBaggage=bt.getActiveBaggage=bt.getBaggage=void 0;var x1=Gi(),L1=ki(),sp=(0,L1.createContextKey)("OpenTelemetry Baggage Key");function WT(e){return e.getValue(sp)||void 0}bt.getBaggage=WT;function w1(){return WT(x1.ContextAPI.getInstance().active())}bt.getActiveBaggage=w1;function M1(e,t){return e.setValue(sp,t)}bt.setBaggage=M1;function D1(e){return e.deleteValue(sp)}bt.deleteBaggage=D1});var zT=d(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.PropagationAPI=void 0;var op=Ar(),B1=VT(),KT=Mf(),ca=YT(),F1=If(),XT=Tr(),ap="propagation",U1=new B1.NoopTextMapPropagator,up=class e{constructor(){this.createBaggage=F1.createBaggage,this.getBaggage=ca.getBaggage,this.getActiveBaggage=ca.getActiveBaggage,this.setBaggage=ca.setBaggage,this.deleteBaggage=ca.deleteBaggage}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalPropagator(t){return(0,op.registerGlobal)(ap,t,XT.DiagAPI.instance())}inject(t,r,n=KT.defaultTextMapSetter){return this._getGlobalPropagator().inject(t,r,n)}extract(t,r,n=KT.defaultTextMapGetter){return this._getGlobalPropagator().extract(t,r,n)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,op.unregisterGlobal)(ap,XT.DiagAPI.instance())}_getGlobalPropagator(){return(0,op.getGlobal)(ap)||U1}};la.PropagationAPI=up});var QT=d(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.propagation=void 0;var k1=zT();da.propagation=k1.PropagationAPI.getInstance()});var ty=d(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.TraceAPI=void 0;var cp=Ar(),ZT=Zf(),JT=zo(),En=Hf(),ey=Tr(),lp="trace",dp=class e{constructor(){this._proxyTracerProvider=new ZT.ProxyTracerProvider,this.wrapSpanContext=JT.wrapSpanContext,this.isSpanContextValid=JT.isSpanContextValid,this.deleteSpan=En.deleteSpan,this.getSpan=En.getSpan,this.getActiveSpan=En.getActiveSpan,this.getSpanContext=En.getSpanContext,this.setSpan=En.setSpan,this.setSpanContext=En.setSpanContext}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalTracerProvider(t){let r=(0,cp.registerGlobal)(lp,this._proxyTracerProvider,ey.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(t),r}getTracerProvider(){return(0,cp.getGlobal)(lp)||this._proxyTracerProvider}getTracer(t,r){return this.getTracerProvider().getTracer(t,r)}disable(){(0,cp.unregisterGlobal)(lp,ey.DiagAPI.instance()),this._proxyTracerProvider=new ZT.ProxyTracerProvider}};fa.TraceAPI=dp});var ry=d(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.trace=void 0;var j1=ty();pa.trace=j1.TraceAPI.getInstance()});var L=d(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.trace=N.propagation=N.metrics=N.diag=N.context=N.INVALID_SPAN_CONTEXT=N.INVALID_TRACEID=N.INVALID_SPANID=N.isValidSpanId=N.isValidTraceId=N.isSpanContextValid=N.createTraceState=N.TraceFlags=N.SpanStatusCode=N.SpanKind=N.SamplingDecision=N.ProxyTracerProvider=N.ProxyTracer=N.defaultTextMapSetter=N.defaultTextMapGetter=N.ValueType=N.createNoopMeter=N.DiagLogLevel=N.DiagConsoleLogger=N.ROOT_CONTEXT=N.createContextKey=N.baggageEntryMetadataFromString=void 0;var G1=If();Object.defineProperty(N,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return G1.baggageEntryMetadataFromString}});var ny=ki();Object.defineProperty(N,"createContextKey",{enumerable:!0,get:function(){return ny.createContextKey}});Object.defineProperty(N,"ROOT_CONTEXT",{enumerable:!0,get:function(){return ny.ROOT_CONTEXT}});var q1=ST();Object.defineProperty(N,"DiagConsoleLogger",{enumerable:!0,get:function(){return q1.DiagConsoleLogger}});var H1=xo();Object.defineProperty(N,"DiagLogLevel",{enumerable:!0,get:function(){return H1.DiagLogLevel}});var $1=wf();Object.defineProperty(N,"createNoopMeter",{enumerable:!0,get:function(){return $1.createNoopMeter}});var V1=AT();Object.defineProperty(N,"ValueType",{enumerable:!0,get:function(){return V1.ValueType}});var iy=Mf();Object.defineProperty(N,"defaultTextMapGetter",{enumerable:!0,get:function(){return iy.defaultTextMapGetter}});Object.defineProperty(N,"defaultTextMapSetter",{enumerable:!0,get:function(){return iy.defaultTextMapSetter}});var W1=Xf();Object.defineProperty(N,"ProxyTracer",{enumerable:!0,get:function(){return W1.ProxyTracer}});var Y1=Zf();Object.defineProperty(N,"ProxyTracerProvider",{enumerable:!0,get:function(){return Y1.ProxyTracerProvider}});var K1=IT();Object.defineProperty(N,"SamplingDecision",{enumerable:!0,get:function(){return K1.SamplingDecision}});var X1=NT();Object.defineProperty(N,"SpanKind",{enumerable:!0,get:function(){return X1.SpanKind}});var z1=xT();Object.defineProperty(N,"SpanStatusCode",{enumerable:!0,get:function(){return z1.SpanStatusCode}});var Q1=kf();Object.defineProperty(N,"TraceFlags",{enumerable:!0,get:function(){return Q1.TraceFlags}});var Z1=UT();Object.defineProperty(N,"createTraceState",{enumerable:!0,get:function(){return Z1.createTraceState}});var fp=zo();Object.defineProperty(N,"isSpanContextValid",{enumerable:!0,get:function(){return fp.isSpanContextValid}});Object.defineProperty(N,"isValidTraceId",{enumerable:!0,get:function(){return fp.isValidTraceId}});Object.defineProperty(N,"isValidSpanId",{enumerable:!0,get:function(){return fp.isValidSpanId}});var pp=Yo();Object.defineProperty(N,"INVALID_SPANID",{enumerable:!0,get:function(){return pp.INVALID_SPANID}});Object.defineProperty(N,"INVALID_TRACEID",{enumerable:!0,get:function(){return pp.INVALID_TRACEID}});Object.defineProperty(N,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return pp.INVALID_SPAN_CONTEXT}});var sy=kT();Object.defineProperty(N,"context",{enumerable:!0,get:function(){return sy.context}});var oy=jT();Object.defineProperty(N,"diag",{enumerable:!0,get:function(){return oy.diag}});var ay=$T();Object.defineProperty(N,"metrics",{enumerable:!0,get:function(){return ay.metrics}});var uy=QT();Object.defineProperty(N,"propagation",{enumerable:!0,get:function(){return uy.propagation}});var cy=ry();Object.defineProperty(N,"trace",{enumerable:!0,get:function(){return cy.trace}});N.default={context:sy.context,diag:oy.diag,metrics:ay.metrics,propagation:uy.propagation,trace:cy.trace}});var Wi=d(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.isTracingSuppressed=zt.unsuppressTracing=zt.suppressTracing=void 0;var J1=L(),_p=(0,J1.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function eD(e){return e.setValue(_p,!0)}zt.suppressTracing=eD;function tD(e){return e.deleteValue(_p)}zt.unsuppressTracing=tD;function rD(e){return e.getValue(_p)===!0}zt.isTracingSuppressed=rD});var ly=d(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.validateValue=Sn.validateKey=void 0;var hp="[_0-9a-z-*/]",nD=`[a-z]${hp}{0,255}`,iD=`[a-z0-9]${hp}{0,240}@[a-z]${hp}{0,13}`,sD=new RegExp(`^(?:${nD}|${iD})$`),oD=/^[ -~]{0,255}[!-~]$/,aD=/,|=/;function uD(e){return sD.test(e)}Sn.validateKey=uD;function cD(e){return oD.test(e)&&!aD.test(e)}Sn.validateValue=cD});var mp=d(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.TraceState=void 0;var dy=ly(),fy=32,lD=512,py=",",_y="=",gp=class e{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+_y+this.get(r)),t),[]).join(py)}_parse(t){t.length>lD||(this._internalState=t.split(py).reverse().reduce((r,n)=>{let i=n.trim(),s=i.indexOf(_y);if(s!==-1){let o=i.slice(0,s),a=i.slice(s+1,n.length);(0,dy.validateKey)(o)&&(0,dy.validateValue)(a)&&r.set(o,a)}return r},new Map),this._internalState.size>fy&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,fy))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new e;return t._internalState=new Map(this._internalState),t}};_a.TraceState=gp});var Sp=d(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.W3CTraceContextPropagator=Ie.parseTraceParent=Ie.TRACE_STATE_HEADER=Ie.TRACE_PARENT_HEADER=void 0;var ha=L(),dD=Wi(),fD=mp();Ie.TRACE_PARENT_HEADER="traceparent";Ie.TRACE_STATE_HEADER="tracestate";var pD="00",_D="(?!ff)[\\da-f]{2}",hD="(?![0]{32})[\\da-f]{32}",gD="(?![0]{16})[\\da-f]{16}",mD="[\\da-f]{2}",ED=new RegExp(`^\\s?(${_D})-(${hD})-(${gD})-(${mD})(-.*)?\\s?$`);function hy(e){let t=ED.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}Ie.parseTraceParent=hy;var Ep=class{inject(t,r,n){let i=ha.trace.getSpanContext(t);if(!i||(0,dD.isTracingSuppressed)(t)||!(0,ha.isSpanContextValid)(i))return;let s=`${pD}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||ha.TraceFlags.NONE).toString(16)}`;n.set(r,Ie.TRACE_PARENT_HEADER,s),i.traceState&&n.set(r,Ie.TRACE_STATE_HEADER,i.traceState.serialize())}extract(t,r,n){let i=n.get(r,Ie.TRACE_PARENT_HEADER);if(!i)return t;let s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return t;let o=hy(s);if(!o)return t;o.isRemote=!0;let a=n.get(r,Ie.TRACE_STATE_HEADER);if(a){let u=Array.isArray(a)?a.join(","):a;o.traceState=new fD.TraceState(typeof u=="string"?u:void 0)}return ha.trace.setSpanContext(t,o)}fields(){return[Ie.TRACE_PARENT_HEADER,Ie.TRACE_STATE_HEADER]}};Ie.W3CTraceContextPropagator=Ep});var Ap=d(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.BAGGAGE_MAX_TOTAL_LENGTH=Ne.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=Ne.BAGGAGE_MAX_NAME_VALUE_PAIRS=Ne.BAGGAGE_HEADER=Ne.BAGGAGE_ITEMS_SEPARATOR=Ne.BAGGAGE_PROPERTIES_SEPARATOR=Ne.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;Ne.BAGGAGE_KEY_PAIR_SEPARATOR="=";Ne.BAGGAGE_PROPERTIES_SEPARATOR=";";Ne.BAGGAGE_ITEMS_SEPARATOR=",";Ne.BAGGAGE_HEADER="baggage";Ne.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;Ne.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;Ne.BAGGAGE_MAX_TOTAL_LENGTH=8192});var Tp=d(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.parseKeyPairsIntoRecord=Rt.parsePairKeyValue=Rt.getKeyPairs=Rt.serializeKeyPairs=void 0;var SD=L(),yr=Ap();function AD(e){return e.reduce((t,r)=>{let n=`${t}${t!==""?yr.BAGGAGE_ITEMS_SEPARATOR:""}${r}`;return n.length>yr.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"")}Rt.serializeKeyPairs=AD;function TD(e){return e.getAllEntries().map(([t,r])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=yr.BAGGAGE_PROPERTIES_SEPARATOR+r.metadata.toString()),n})}Rt.getKeyPairs=TD;function gy(e){let t=e.split(yr.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;let r=t.shift();if(!r)return;let n=r.indexOf(yr.BAGGAGE_KEY_PAIR_SEPARATOR);if(n<=0)return;let i=decodeURIComponent(r.substring(0,n).trim()),s=decodeURIComponent(r.substring(n+1).trim()),o;return t.length>0&&(o=(0,SD.baggageEntryMetadataFromString)(t.join(yr.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:s,metadata:o}}Rt.parsePairKeyValue=gy;function yD(e){return typeof e!="string"||e.length===0?{}:e.split(yr.BAGGAGE_ITEMS_SEPARATOR).map(t=>gy(t)).filter(t=>t!==void 0&&t.value.length>0).reduce((t,r)=>(t[r.key]=r.value,t),{})}Rt.parseKeyPairsIntoRecord=yD});var my=d(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.W3CBaggagePropagator=void 0;var yp=L(),bD=Wi(),br=Ap(),bp=Tp(),Rp=class{inject(t,r,n){let i=yp.propagation.getBaggage(t);if(!i||(0,bD.isTracingSuppressed)(t))return;let s=(0,bp.getKeyPairs)(i).filter(a=>a.length<=br.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,br.BAGGAGE_MAX_NAME_VALUE_PAIRS),o=(0,bp.serializeKeyPairs)(s);o.length>0&&n.set(r,br.BAGGAGE_HEADER,o)}extract(t,r,n){let i=n.get(r,br.BAGGAGE_HEADER),s=Array.isArray(i)?i.join(br.BAGGAGE_ITEMS_SEPARATOR):i;if(!s)return t;let o={};return s.length===0||(s.split(br.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let c=(0,bp.parsePairKeyValue)(u);if(c){let l={value:c.value};c.metadata&&(l.metadata=c.metadata),o[c.key]=l}}),Object.entries(o).length===0)?t:yp.propagation.setBaggage(t,yp.propagation.createBaggage(o))}fields(){return[br.BAGGAGE_HEADER]}};ga.W3CBaggagePropagator=Rp});var Ey=d(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.AnchoredClock=void 0;var Op=class{constructor(t,r){this._monotonicClock=r,this._epochMillis=t.now(),this._performanceMillis=r.now()}now(){let t=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+t}};ma.AnchoredClock=Op});var by=d(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAttributeValue=Qt.isAttributeKey=Qt.sanitizeAttributes=void 0;var Sy=L();function RD(e){let t={};if(typeof e!="object"||e==null)return t;for(let[r,n]of Object.entries(e)){if(!Ay(r)){Sy.diag.warn(`Invalid attribute key: ${r}`);continue}if(!Ty(n)){Sy.diag.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?t[r]=n.slice():t[r]=n}return t}Qt.sanitizeAttributes=RD;function Ay(e){return typeof e=="string"&&e.length>0}Qt.isAttributeKey=Ay;function Ty(e){return e==null?!0:Array.isArray(e)?OD(e):yy(e)}Qt.isAttributeValue=Ty;function OD(e){let t;for(let r of e)if(r!=null){if(!t){if(yy(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}function yy(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}});var vp=d(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.loggingErrorHandler=void 0;var vD=L();function PD(){return e=>{vD.diag.error(CD(e))}}Ea.loggingErrorHandler=PD;function CD(e){return typeof e=="string"?e:JSON.stringify(ID(e))}function ID(e){let t={},r=e;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(t[n])return;let i=r[n];i&&(t[n]=String(i))}),r=Object.getPrototypeOf(r);return t}});var Pp=d(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.globalErrorHandler=An.setGlobalErrorHandler=void 0;var ND=vp(),Ry=(0,ND.loggingErrorHandler)();function xD(e){Ry=e}An.setGlobalErrorHandler=xD;function LD(e){try{Ry(e)}catch{}}An.globalErrorHandler=LD});var Cp=d(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.TracesSamplerValues=void 0;var wD;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(wD=Yi.TracesSamplerValues||(Yi.TracesSamplerValues={}))});var Oy=d(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa._globalThis=void 0;Sa._globalThis=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});var Np=d(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.getEnvWithoutDefaults=ne.parseEnvironment=ne.DEFAULT_ENVIRONMENT=ne.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=ne.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT=ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;var Zt=L(),MD=Cp(),DD=Oy(),BD=",",FD=["OTEL_SDK_DISABLED"];function UD(e){return FD.indexOf(e)>-1}var kD=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function jD(e){return kD.indexOf(e)>-1}var GD=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function qD(e){return GD.indexOf(e)>-1}ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0;ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;ne.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=128;ne.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=128;ne.DEFAULT_ENVIRONMENT={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Zt.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:ne.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:ne.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:MD.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function HD(e,t,r){if(typeof r[e]>"u")return;let n=String(r[e]);t[e]=n.toLowerCase()==="true"}function $D(e,t,r,n=-1/0,i=1/0){if(typeof r[e]<"u"){let s=Number(r[e]);isNaN(s)||(s<n?t[e]=n:s>i?t[e]=i:t[e]=s)}}function VD(e,t,r,n=BD){let i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(s=>s.trim()))}var WD={ALL:Zt.DiagLogLevel.ALL,VERBOSE:Zt.DiagLogLevel.VERBOSE,DEBUG:Zt.DiagLogLevel.DEBUG,INFO:Zt.DiagLogLevel.INFO,WARN:Zt.DiagLogLevel.WARN,ERROR:Zt.DiagLogLevel.ERROR,NONE:Zt.DiagLogLevel.NONE};function YD(e,t,r){let n=r[e];if(typeof n=="string"){let i=WD[n.toUpperCase()];i!=null&&(t[e]=i)}}function Ip(e){let t={};for(let r in ne.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":YD(n,t,e);break;default:if(UD(n))HD(n,t,e);else if(jD(n))$D(n,t,e);else if(qD(n))VD(n,t,e);else{let i=e[n];typeof i<"u"&&i!==null&&(t[n]=String(i))}}}return t}ne.parseEnvironment=Ip;function KD(){return typeof process<"u"&&process&&process.env?Ip(process.env):Ip(DD._globalThis)}ne.getEnvWithoutDefaults=KD});var Py=d(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.getEnv=void 0;var vy=Np();function XD(){let e=(0,vy.parseEnvironment)(process.env);return Object.assign({},vy.DEFAULT_ENVIRONMENT,e)}Aa.getEnv=XD});var Cy=d(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta._globalThis=void 0;Ta._globalThis=typeof globalThis=="object"?globalThis:global});var xp=d(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.hexToBinary=void 0;function Iy(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function zD(e){let t=new Uint8Array(e.length/2),r=0;for(let n=0;n<e.length;n+=2){let i=Iy(e.charCodeAt(n)),s=Iy(e.charCodeAt(n+1));t[r++]=i<<4|s}return t}ya.hexToBinary=zD});var Ny=d(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.hexToBase64=void 0;var QD=xp();function ZD(e){return Buffer.from((0,QD.hexToBinary)(e)).toString("base64")}ba.hexToBase64=ZD});var wy=d(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.RandomIdGenerator=void 0;var JD=8,Ly=16,Lp=class{constructor(){this.generateTraceId=xy(Ly),this.generateSpanId=xy(JD)}};Oa.RandomIdGenerator=Lp;var Ra=Buffer.allocUnsafe(Ly);function xy(e){return function(){for(let r=0;r<e/4;r++)Ra.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(Ra[r]>0);r++)r===e-1&&(Ra[e-1]=1);return Ra.toString("hex",0,e)}}});var My=d(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.otperformance=void 0;var eB=v("perf_hooks");va.otperformance=eB.performance});var wp=d(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.VERSION=void 0;Pa.VERSION="1.21.0"});var Dy=d(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.MessageTypeValues=z.RpcGrpcStatusCodeValues=z.MessagingOperationValues=z.MessagingDestinationKindValues=z.HttpFlavorValues=z.NetHostConnectionSubtypeValues=z.NetHostConnectionTypeValues=z.NetTransportValues=z.FaasInvokedProviderValues=z.FaasDocumentOperationValues=z.FaasTriggerValues=z.DbCassandraConsistencyLevelValues=z.DbSystemValues=z.SemanticAttributes=void 0;z.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"};z.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"};z.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"};z.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"};z.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"};z.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};z.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"};z.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"};z.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"};z.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"};z.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"};z.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"};z.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16};z.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}});var By=d(Rr=>{"use strict";var tB=Rr&&Rr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),rB=Rr&&Rr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tB(t,e,r)};Object.defineProperty(Rr,"__esModule",{value:!0});rB(Dy(),Rr)});var Fy=d(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.TelemetrySdkLanguageValues=xe.OsTypeValues=xe.HostArchValues=xe.AwsEcsLaunchtypeValues=xe.CloudPlatformValues=xe.CloudProviderValues=xe.SemanticResourceAttributes=void 0;xe.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};xe.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};xe.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"};xe.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"};xe.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"};xe.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"};xe.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var Uy=d(Or=>{"use strict";var nB=Or&&Or.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),iB=Or&&Or.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&nB(t,e,r)};Object.defineProperty(Or,"__esModule",{value:!0});iB(Fy(),Or)});var Ot=d(Jt=>{"use strict";var sB=Jt&&Jt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ky=Jt&&Jt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sB(t,e,r)};Object.defineProperty(Jt,"__esModule",{value:!0});ky(By(),Jt);ky(Uy(),Jt)});var jy=d(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.SDK_INFO=void 0;var oB=wp(),Ki=Ot();Ca.SDK_INFO={[Ki.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[Ki.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[Ki.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Ki.TelemetrySdkLanguageValues.NODEJS,[Ki.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:oB.VERSION}});var Gy=d(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.unrefTimer=void 0;function aB(e){e.unref()}Ia.unrefTimer=aB});var qy=d(Xe=>{"use strict";var uB=Xe&&Xe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),vr=Xe&&Xe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&uB(t,e,r)};Object.defineProperty(Xe,"__esModule",{value:!0});vr(Py(),Xe);vr(Cy(),Xe);vr(Ny(),Xe);vr(wy(),Xe);vr(My(),Xe);vr(jy(),Xe);vr(Gy(),Xe)});var Mp=d(Pr=>{"use strict";var cB=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),lB=Pr&&Pr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&cB(t,e,r)};Object.defineProperty(Pr,"__esModule",{value:!0});lB(qy(),Pr)});var Wy=d(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.addHrTimes=te.isTimeInput=te.isTimeInputHrTime=te.hrTimeToMicroseconds=te.hrTimeToMilliseconds=te.hrTimeToNanoseconds=te.hrTimeToTimeStamp=te.hrTimeDuration=te.timeInputToHrTime=te.hrTime=te.getTimeOrigin=te.millisToHrTime=void 0;var Dp=Mp(),Hy=9,dB=6,fB=Math.pow(10,dB),Na=Math.pow(10,Hy);function Xi(e){let t=e/1e3,r=Math.trunc(t),n=Math.round(e%1e3*fB);return[r,n]}te.millisToHrTime=Xi;function Bp(){let e=Dp.otperformance.timeOrigin;if(typeof e!="number"){let t=Dp.otperformance;e=t.timing&&t.timing.fetchStart}return e}te.getTimeOrigin=Bp;function $y(e){let t=Xi(Bp()),r=Xi(typeof e=="number"?e:Dp.otperformance.now());return Vy(t,r)}te.hrTime=$y;function pB(e){if(Fp(e))return e;if(typeof e=="number")return e<Bp()?$y(e):Xi(e);if(e instanceof Date)return Xi(e.getTime());throw TypeError("Invalid input type")}te.timeInputToHrTime=pB;function _B(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Na),[r,n]}te.hrTimeDuration=_B;function hB(e){let t=Hy,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n)}te.hrTimeToTimeStamp=hB;function gB(e){return e[0]*Na+e[1]}te.hrTimeToNanoseconds=gB;function mB(e){return e[0]*1e3+e[1]/1e6}te.hrTimeToMilliseconds=mB;function EB(e){return e[0]*1e6+e[1]/1e3}te.hrTimeToMicroseconds=EB;function Fp(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}te.isTimeInputHrTime=Fp;function SB(e){return Fp(e)||typeof e=="number"||e instanceof Date}te.isTimeInput=SB;function Vy(e,t){let r=[e[0]+t[0],e[1]+t[1]];return r[1]>=Na&&(r[1]-=Na,r[0]+=1),r}te.addHrTimes=Vy});var Ky=d(Yy=>{"use strict";Object.defineProperty(Yy,"__esModule",{value:!0})});var Xy=d(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.ExportResultCode=void 0;var AB;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(AB=zi.ExportResultCode||(zi.ExportResultCode={}))});var Qy=d(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.CompositePropagator=void 0;var zy=L(),Up=class{constructor(t={}){var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(t,r,n){for(let i of this._propagators)try{i.inject(t,r,n)}catch(s){zy.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${s.message}`)}}extract(t,r,n){return this._propagators.reduce((i,s)=>{try{return s.extract(i,r,n)}catch(o){zy.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${o.message}`)}return i},t)}fields(){return this._fields.slice()}};xa.CompositePropagator=Up});var Jy=d(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0})});var e0=d(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.getRPCMetadata=ct.deleteRPCMetadata=ct.setRPCMetadata=ct.RPCType=void 0;var TB=L(),kp=(0,TB.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA"),yB;(function(e){e.HTTP="http"})(yB=ct.RPCType||(ct.RPCType={}));function bB(e,t){return e.setValue(kp,t)}ct.setRPCMetadata=bB;function RB(e){return e.deleteValue(kp)}ct.deleteRPCMetadata=RB;function OB(e){return e.getValue(kp)}ct.getRPCMetadata=OB});var Gp=d(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.AlwaysOffSampler=void 0;var vB=L(),jp=class{shouldSample(){return{decision:vB.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};La.AlwaysOffSampler=jp});var Hp=d(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.AlwaysOnSampler=void 0;var PB=L(),qp=class{shouldSample(){return{decision:PB.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};wa.AlwaysOnSampler=qp});var r0=d(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.ParentBasedSampler=void 0;var Ma=L(),CB=Pp(),t0=Gp(),$p=Hp(),Vp=class{constructor(t){var r,n,i,s;this._root=t.root,this._root||((0,CB.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new $p.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new $p.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new t0.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new $p.AlwaysOnSampler,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new t0.AlwaysOffSampler}shouldSample(t,r,n,i,s,o){let a=Ma.trace.getSpanContext(t);return!a||!(0,Ma.isSpanContextValid)(a)?this._root.shouldSample(t,r,n,i,s,o):a.isRemote?a.traceFlags&Ma.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,s,o):this._remoteParentNotSampled.shouldSample(t,r,n,i,s,o):a.traceFlags&Ma.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,s,o):this._localParentNotSampled.shouldSample(t,r,n,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};Da.ParentBasedSampler=Vp});var n0=d(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.TraceIdRatioBasedSampler=void 0;var Wp=L(),Yp=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:(0,Wp.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?Wp.SamplingDecision.RECORD_AND_SAMPLED:Wp.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,s=parseInt(t.slice(i,i+8),16);r=(r^s)>>>0}return r}};Ba.TraceIdRatioBasedSampler=Yp});var u0=d(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.isPlainObject=void 0;var IB="[object Object]",NB="[object Null]",xB="[object Undefined]",LB=Function.prototype,i0=LB.toString,wB=i0.call(Object),MB=DB(Object.getPrototypeOf,Object),s0=Object.prototype,o0=s0.hasOwnProperty,Cr=Symbol?Symbol.toStringTag:void 0,a0=s0.toString;function DB(e,t){return function(r){return e(t(r))}}function BB(e){if(!FB(e)||UB(e)!==IB)return!1;let t=MB(e);if(t===null)return!0;let r=o0.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&i0.call(r)===wB}Fa.isPlainObject=BB;function FB(e){return e!=null&&typeof e=="object"}function UB(e){return e==null?e===void 0?xB:NB:Cr&&Cr in Object(e)?kB(e):jB(e)}function kB(e){let t=o0.call(e,Cr),r=e[Cr],n=!1;try{e[Cr]=void 0,n=!0}catch{}let i=a0.call(e);return n&&(t?e[Cr]=r:delete e[Cr]),i}function jB(e){return a0.call(e)}});var p0=d(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.merge=void 0;var c0=u0(),GB=20;function qB(...e){let t=e.shift(),r=new WeakMap;for(;e.length>0;)t=d0(t,e.shift(),0,r);return t}ja.merge=qB;function Kp(e){return ka(e)?e.slice():e}function d0(e,t,r=0,n){let i;if(!(r>GB)){if(r++,Ua(e)||Ua(t)||f0(t))i=Kp(t);else if(ka(e)){if(i=e.slice(),ka(t))for(let s=0,o=t.length;s<o;s++)i.push(Kp(t[s]));else if(Qi(t)){let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o];i[u]=Kp(t[u])}}}else if(Qi(e))if(Qi(t)){if(!HB(e,t))return t;i=Object.assign({},e);let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o],c=t[u];if(Ua(c))typeof c>"u"?delete i[u]:i[u]=c;else{let l=i[u],f=c;if(l0(e,u,n)||l0(t,u,n))delete i[u];else{if(Qi(l)&&Qi(f)){let p=n.get(l)||[],h=n.get(f)||[];p.push({obj:e,key:u}),h.push({obj:t,key:u}),n.set(l,p),n.set(f,h)}i[u]=d0(i[u],c,r,n)}}}}else i=t;return i}}function l0(e,t,r){let n=r.get(e[t])||[];for(let i=0,s=n.length;i<s;i++){let o=n[i];if(o.key===t&&o.obj===e)return!0}return!1}function ka(e){return Array.isArray(e)}function f0(e){return typeof e=="function"}function Qi(e){return!Ua(e)&&!ka(e)&&!f0(e)&&typeof e=="object"}function Ua(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function HB(e,t){return!(!(0,c0.isPlainObject)(e)||!(0,c0.isPlainObject)(t))}});var _0=d(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.callWithTimeout=Tn.TimeoutError=void 0;var Ga=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};Tn.TimeoutError=Ga;function $B(e,t){let r,n=new Promise(function(s,o){r=setTimeout(function(){o(new Ga("Operation timed out."))},t)});return Promise.race([e,n]).then(i=>(clearTimeout(r),i),i=>{throw clearTimeout(r),i})}Tn.callWithTimeout=$B});var g0=d(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.isUrlIgnored=yn.urlMatches=void 0;function h0(e,t){return typeof t=="string"?e===t:!!e.match(t)}yn.urlMatches=h0;function VB(e,t){if(!t)return!1;for(let r of t)if(h0(e,r))return!0;return!1}yn.isUrlIgnored=VB});var m0=d(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.isWrapped=void 0;function WB(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}qa.isWrapped=WB});var E0=d(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Deferred=void 0;var Xp=class{constructor(){this._promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}};Ha.Deferred=Xp});var S0=d($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.BindOnceFuture=void 0;var YB=E0(),zp=class{constructor(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new YB.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}};$a.BindOnceFuture=zp});var T0=d(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va._export=void 0;var A0=L(),KB=Wi();function XB(e,t){return new Promise(r=>{A0.context.with((0,KB.suppressTracing)(A0.context.active()),()=>{e.export(t,n=>{r(n)})})})}Va._export=XB});var J=d(G=>{"use strict";var zB=G&&G.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Q=G&&G.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zB(t,e,r)};Object.defineProperty(G,"__esModule",{value:!0});G.internal=G.baggageUtils=void 0;Q(my(),G);Q(Ey(),G);Q(by(),G);Q(Pp(),G);Q(vp(),G);Q(Wy(),G);Q(Ky(),G);Q(xp(),G);Q(Xy(),G);G.baggageUtils=Tp();Q(Mp(),G);Q(Qy(),G);Q(Sp(),G);Q(Jy(),G);Q(e0(),G);Q(Gp(),G);Q(Hp(),G);Q(r0(),G);Q(n0(),G);Q(Wi(),G);Q(mp(),G);Q(Np(),G);Q(p0(),G);Q(Cp(),G);Q(_0(),G);Q(g0(),G);Q(m0(),G);Q(S0(),G);Q(wp(),G);var QB=T0();G.internal={_export:QB._export}});var y0=d(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.ExceptionEventName=void 0;Wa.ExceptionEventName="exception"});var Zp=d(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Span=void 0;var lt=L(),Le=J(),Ir=Ot(),ZB=y0(),Qp=class{constructor(t,r,n,i,s,o,a=[],u,c,l){this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:lt.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=s,this.links=a;let f=Date.now();this._performanceStartTime=Le.otperformance.now(),this._performanceOffset=f-(this._performanceStartTime+(0,Le.getTimeOrigin)()),this._startTimeProvided=u!=null,this.startTime=this._getTime(u??f),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,l!=null&&this.setAttributes(l),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(lt.diag.warn(`Invalid attribute key: ${t}`),this):(0,Le.isAttributeValue)(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(r),this):(lt.diag.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(let[r,n]of Object.entries(t))this.setAttribute(r,n);return this}addEvent(t,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return lt.diag.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&lt.diag.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,Le.isTimeInput)(r)&&((0,Le.isTimeInput)(n)||(n=r),r=void 0);let i=(0,Le.sanitizeAttributes)(r);return this.events.push({name:t,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}setStatus(t){return this._isSpanEnded()?this:(this.status=t,this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t){if(this._isSpanEnded()){lt.diag.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=!0,this.endTime=this._getTime(t),this._duration=(0,Le.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&(lt.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&lt.diag.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(t){if(typeof t=="number"&&t<Le.otperformance.now())return(0,Le.hrTime)(t+this._performanceOffset);if(typeof t=="number")return(0,Le.millisToHrTime)(t);if(t instanceof Date)return(0,Le.millisToHrTime)(t.getTime());if((0,Le.isTimeInputHrTime)(t))return t;if(this._startTimeProvided)return(0,Le.millisToHrTime)(Date.now());let r=Le.otperformance.now()-this._performanceStartTime;return(0,Le.addHrTimes)(this.startTime,(0,Le.millisToHrTime)(r))}isRecording(){return this._ended===!1}recordException(t,r){let n={};typeof t=="string"?n[Ir.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[Ir.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[Ir.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[Ir.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[Ir.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[Ir.SemanticAttributes.EXCEPTION_TYPE]||n[Ir.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(ZB.ExceptionEventName,n,r):lt.diag.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){return this._ended&&lt.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),this._ended}_truncateToLimitUtil(t,r){return t.length<=r?t:t.substr(0,r)}_truncateToSize(t){let r=this._attributeValueLengthLimit;return r<=0?(lt.diag.warn(`Attribute value limit must be positive, got ${r}`),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):t}};Ya.Span=Qp});var Ji=d(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.SamplingDecision=void 0;var JB;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(JB=Zi.SamplingDecision||(Zi.SamplingDecision={}))});var Xa=d(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.AlwaysOffSampler=void 0;var eF=Ji(),Jp=class{shouldSample(){return{decision:eF.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};Ka.AlwaysOffSampler=Jp});var Qa=d(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.AlwaysOnSampler=void 0;var tF=Ji(),e_=class{shouldSample(){return{decision:tF.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};za.AlwaysOnSampler=e_});var n_=d(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.ParentBasedSampler=void 0;var Za=L(),rF=J(),b0=Xa(),t_=Qa(),r_=class{constructor(t){var r,n,i,s;this._root=t.root,this._root||((0,rF.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new t_.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new t_.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new b0.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new t_.AlwaysOnSampler,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new b0.AlwaysOffSampler}shouldSample(t,r,n,i,s,o){let a=Za.trace.getSpanContext(t);return!a||!(0,Za.isSpanContextValid)(a)?this._root.shouldSample(t,r,n,i,s,o):a.isRemote?a.traceFlags&Za.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,s,o):this._remoteParentNotSampled.shouldSample(t,r,n,i,s,o):a.traceFlags&Za.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,s,o):this._localParentNotSampled.shouldSample(t,r,n,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};Ja.ParentBasedSampler=r_});var s_=d(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.TraceIdRatioBasedSampler=void 0;var nF=L(),R0=Ji(),i_=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:(0,nF.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?R0.SamplingDecision.RECORD_AND_SAMPLED:R0.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,s=parseInt(t.slice(i,i+8),16);r=(r^s)>>>0}return r}};eu.TraceIdRatioBasedSampler=i_});var u_=d(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.buildSamplerFromEnv=Rn.loadDefaultConfig=void 0;var tu=L(),ye=J(),O0=Xa(),o_=Qa(),a_=n_(),v0=s_(),iF=(0,ye.getEnv)(),sF=ye.TracesSamplerValues.AlwaysOn,bn=1;function oF(){return{sampler:C0(iF),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,ye.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,ye.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,ye.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,ye.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,ye.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,ye.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,ye.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,ye.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}Rn.loadDefaultConfig=oF;function C0(e=(0,ye.getEnv)()){switch(e.OTEL_TRACES_SAMPLER){case ye.TracesSamplerValues.AlwaysOn:return new o_.AlwaysOnSampler;case ye.TracesSamplerValues.AlwaysOff:return new O0.AlwaysOffSampler;case ye.TracesSamplerValues.ParentBasedAlwaysOn:return new a_.ParentBasedSampler({root:new o_.AlwaysOnSampler});case ye.TracesSamplerValues.ParentBasedAlwaysOff:return new a_.ParentBasedSampler({root:new O0.AlwaysOffSampler});case ye.TracesSamplerValues.TraceIdRatio:return new v0.TraceIdRatioBasedSampler(P0(e));case ye.TracesSamplerValues.ParentBasedTraceIdRatio:return new a_.ParentBasedSampler({root:new v0.TraceIdRatioBasedSampler(P0(e))});default:return tu.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${sF}".`),new o_.AlwaysOnSampler}}Rn.buildSamplerFromEnv=C0;function P0(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return tu.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${bn}.`),bn;let t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(tu.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${bn}.`),bn):t<0||t>1?(tu.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${bn}.`),bn):t}});var l_=d(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.reconfigureLimits=On.mergeConfig=void 0;var I0=u_(),c_=J();function aF(e){let t={sampler:(0,I0.buildSamplerFromEnv)()},r=(0,I0.loadDefaultConfig)(),n=Object.assign({},r,t,e);return n.generalLimits=Object.assign({},r.generalLimits,e.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,e.spanLimits||{}),n}On.mergeConfig=aF;function uF(e){var t,r,n,i,s,o,a,u,c,l,f,p;let h=Object.assign({},e.spanLimits),_=(0,c_.getEnvWithoutDefaults)();return h.attributeCountLimit=(o=(s=(i=(r=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&r!==void 0?r:(n=e.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:_.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:_.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:c_.DEFAULT_ATTRIBUTE_COUNT_LIMIT,h.attributeValueLengthLimit=(p=(f=(l=(u=(a=e.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&u!==void 0?u:(c=e.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&l!==void 0?l:_.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:_.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:c_.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,Object.assign({},e,{spanLimits:h})}On.reconfigureLimits=uF});var N0=d(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.BatchSpanProcessorBase=void 0;var vn=L(),Nr=J(),d_=class{constructor(t,r){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;let n=(0,Nr.getEnv)();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Nr.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(vn.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,r){}onEnd(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&vn.TraceFlags.SAMPLED&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&vn.diag.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(vn.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise((t,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,o=i;s<o;s++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);vn.context.with((0,Nr.suppressTracing)(vn.context.active()),()=>{let i=this._finishedSpans.splice(0,this._maxExportBatchSize),s=()=>this._exporter.export(i,a=>{var u;clearTimeout(n),a.code===Nr.ExportResultCode.SUCCESS?t():r((u=a.error)!==null&&u!==void 0?u:new Error("BatchSpanProcessor: span export failed"))}),o=i.map(a=>a.resource).filter(a=>a.asyncAttributesPending);o.length===0?s():Promise.all(o.map(a=>{var u;return(u=a.waitForAsyncAttributes)===null||u===void 0?void 0:u.call(a)})).then(s,a=>{(0,Nr.globalErrorHandler)(a),r(a)})})})}_maybeStartTimer(){if(this._isExporting)return;let t=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(r=>{this._isExporting=!1,(0,Nr.globalErrorHandler)(r)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(()=>t(),this._scheduledDelayMillis),(0,Nr.unrefTimer)(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};ru.BatchSpanProcessorBase=d_});var x0=d(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.BatchSpanProcessor=void 0;var cF=N0(),f_=class extends cF.BatchSpanProcessorBase{onShutdown(){}};nu.BatchSpanProcessor=f_});var M0=d(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.RandomIdGenerator=void 0;var lF=8,w0=16,p_=class{constructor(){this.generateTraceId=L0(w0),this.generateSpanId=L0(lF)}};su.RandomIdGenerator=p_;var iu=Buffer.allocUnsafe(w0);function L0(e){return function(){for(let r=0;r<e/4;r++)iu.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(iu[r]>0);r++)r===e-1&&(iu[e-1]=1);return iu.toString("hex",0,e)}}});var B0=d(er=>{"use strict";var dF=er&&er.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),D0=er&&er.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&dF(t,e,r)};Object.defineProperty(er,"__esModule",{value:!0});D0(x0(),er);D0(M0(),er)});var ou=d(xr=>{"use strict";var fF=xr&&xr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),pF=xr&&xr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&fF(t,e,r)};Object.defineProperty(xr,"__esModule",{value:!0});pF(B0(),xr)});var F0=d(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.Tracer=void 0;var be=L(),au=J(),_F=Zp(),hF=l_(),gF=ou(),__=class{constructor(t,r,n){this._tracerProvider=n;let i=(0,hF.mergeConfig)(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new gF.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=t}startSpan(t,r={},n=be.context.active()){var i,s,o;r.root&&(n=be.trace.deleteSpan(n));let a=be.trace.getSpan(n);if((0,au.isTracingSuppressed)(n))return be.diag.debug("Instrumentation suppressed, returning Noop Span"),be.trace.wrapSpanContext(be.INVALID_SPAN_CONTEXT);let u=a?.spanContext(),c=this._idGenerator.generateSpanId(),l,f,p;!u||!be.trace.isSpanContextValid(u)?l=this._idGenerator.generateTraceId():(l=u.traceId,f=u.traceState,p=u.spanId);let h=(i=r.kind)!==null&&i!==void 0?i:be.SpanKind.INTERNAL,_=((s=r.links)!==null&&s!==void 0?s:[]).map(R=>({context:R.context,attributes:(0,au.sanitizeAttributes)(R.attributes)})),g=(0,au.sanitizeAttributes)(r.attributes),T=this._sampler.shouldSample(n,l,t,h,g,_);f=(o=T.traceState)!==null&&o!==void 0?o:f;let A=T.decision===be.SamplingDecision.RECORD_AND_SAMPLED?be.TraceFlags.SAMPLED:be.TraceFlags.NONE,y={traceId:l,spanId:c,traceFlags:A,traceState:f};if(T.decision===be.SamplingDecision.NOT_RECORD)return be.diag.debug("Recording is off, propagating context in a non-recording span"),be.trace.wrapSpanContext(y);let b=(0,au.sanitizeAttributes)(Object.assign(g,T.attributes));return new _F.Span(this,n,t,y,h,p,_,r.startTime,void 0,b)}startActiveSpan(t,r,n,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);let u=o??be.context.active(),c=this.startSpan(t,s,u),l=be.trace.setSpan(u,c);return be.context.with(l,a,void 0,c)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};uu.Tracer=__});var U0=d(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.defaultServiceName=void 0;function mF(){return`unknown_service:${process.argv0}`}cu.defaultServiceName=mF});var h_=d(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.normalizeType=Pn.normalizeArch=void 0;var EF=e=>{switch(e){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return e}};Pn.normalizeArch=EF;var SF=e=>{switch(e){case"sunos":return"solaris";case"win32":return"windows";default:return e}};Pn.normalizeType=SF});var du=d(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.execAsync=void 0;var AF=v("child_process"),TF=v("util");lu.execAsync=TF.promisify(AF.exec)});var k0=d(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.getMachineId=void 0;var yF=du(),bF=L();async function RF(){try{let t=(await(0,yF.execAsync)('ioreg -rd1 -c "IOPlatformExpertDevice"')).stdout.split(`
`).find(n=>n.includes("IOPlatformUUID"));if(!t)return"";let r=t.split('" = "');if(r.length===2)return r[1].slice(0,-1)}catch(e){bF.diag.debug(`error reading machine id: ${e}`)}return""}fu.getMachineId=RF});var j0=d(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.getMachineId=void 0;var OF=v("fs"),vF=L();async function PF(){let e=["/etc/machine-id","/var/lib/dbus/machine-id"];for(let t of e)try{return(await OF.promises.readFile(t,{encoding:"utf8"})).trim()}catch(r){vF.diag.debug(`error reading machine id: ${r}`)}return""}pu.getMachineId=PF});var q0=d(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.getMachineId=void 0;var CF=v("fs"),IF=du(),G0=L();async function NF(){try{return(await CF.promises.readFile("/etc/hostid",{encoding:"utf8"})).trim()}catch(e){G0.diag.debug(`error reading machine id: ${e}`)}try{return(await(0,IF.execAsync)("kenv -q smbios.system.uuid")).stdout.trim()}catch(e){G0.diag.debug(`error reading machine id: ${e}`)}return""}_u.getMachineId=NF});var $0=d(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.getMachineId=void 0;var H0=v("process"),xF=du(),LF=L();async function wF(){let e="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",t="%windir%\\System32\\REG.exe";H0.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in H0.env&&(t="%windir%\\sysnative\\cmd.exe /c "+t);try{let n=(await(0,xF.execAsync)(`${t} ${e}`)).stdout.split("REG_SZ");if(n.length===2)return n[1].trim()}catch(r){LF.diag.debug(`error reading machine id: ${r}`)}return""}hu.getMachineId=wF});var V0=d(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.getMachineId=void 0;var MF=L();async function DF(){return MF.diag.debug("could not read machine-id: unsupported platform"),""}gu.getMachineId=DF});var W0=d(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.getMachineId=void 0;var BF=v("process"),Cn;Bt.getMachineId=Cn;switch(BF.platform){case"darwin":Bt.getMachineId=Cn=k0().getMachineId;break;case"linux":Bt.getMachineId=Cn=j0().getMachineId;break;case"freebsd":Bt.getMachineId=Cn=q0().getMachineId;break;case"win32":Bt.getMachineId=Cn=$0().getMachineId;break;default:Bt.getMachineId=Cn=V0().getMachineId}});var E_=d(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.hostDetectorSync=void 0;var g_=Ot(),FF=Lr(),Y0=v("os"),UF=h_(),kF=W0(),m_=class{detect(t){let r={[g_.SemanticResourceAttributes.HOST_NAME]:(0,Y0.hostname)(),[g_.SemanticResourceAttributes.HOST_ARCH]:(0,UF.normalizeArch)((0,Y0.arch)())};return new FF.Resource(r,this._getAsyncAttributes())}_getAsyncAttributes(){return(0,kF.getMachineId)().then(t=>{let r={};return t&&(r[g_.SemanticResourceAttributes.HOST_ID]=t),r})}};mu.hostDetectorSync=new m_});var K0=d(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.hostDetector=void 0;var jF=E_(),S_=class{detect(t){return Promise.resolve(jF.hostDetectorSync.detect(t))}};Eu.hostDetector=new S_});var T_=d(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.osDetectorSync=void 0;var X0=Ot(),GF=Lr(),z0=v("os"),qF=h_(),A_=class{detect(t){let r={[X0.SemanticResourceAttributes.OS_TYPE]:(0,qF.normalizeType)((0,z0.platform)()),[X0.SemanticResourceAttributes.OS_VERSION]:(0,z0.release)()};return new GF.Resource(r)}};Su.osDetectorSync=new A_});var Q0=d(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.osDetector=void 0;var HF=T_(),y_=class{detect(t){return Promise.resolve(HF.osDetectorSync.detect(t))}};Au.osDetector=new y_});var R_=d(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.processDetectorSync=void 0;var $F=L(),Ft=Ot(),VF=Lr(),WF=v("os"),b_=class{detect(t){let r={[Ft.SemanticResourceAttributes.PROCESS_PID]:process.pid,[Ft.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title,[Ft.SemanticResourceAttributes.PROCESS_EXECUTABLE_PATH]:process.execPath,[Ft.SemanticResourceAttributes.PROCESS_COMMAND_ARGS]:[process.argv[0],...process.execArgv,...process.argv.slice(1)],[Ft.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:process.versions.node,[Ft.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"nodejs",[Ft.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Node.js"};process.argv.length>1&&(r[Ft.SemanticResourceAttributes.PROCESS_COMMAND]=process.argv[1]);try{let n=WF.userInfo();r[Ft.SemanticResourceAttributes.PROCESS_OWNER]=n.username}catch(n){$F.diag.debug(`error obtaining process owner: ${n}`)}return new VF.Resource(r)}};Tu.processDetectorSync=new b_});var Z0=d(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.processDetector=void 0;var YF=R_(),O_=class{detect(t){return Promise.resolve(YF.processDetectorSync.detect(t))}};yu.processDetector=new O_});var J0=d(ze=>{"use strict";var KF=ze&&ze.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),wr=ze&&ze.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&KF(t,e,r)};Object.defineProperty(ze,"__esModule",{value:!0});wr(U0(),ze);wr(K0(),ze);wr(Q0(),ze);wr(E_(),ze);wr(T_(),ze);wr(Z0(),ze);wr(R_(),ze)});var v_=d(Mr=>{"use strict";var XF=Mr&&Mr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),zF=Mr&&Mr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&XF(t,e,r)};Object.defineProperty(Mr,"__esModule",{value:!0});zF(J0(),Mr)});var Lr=d(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.Resource=void 0;var eb=L(),Dr=Ot(),P_=J(),QF=v_(),es=class e{constructor(t,r){var n;this._attributes=t,this.asyncAttributesPending=r!=null,this._syncAttributes=(n=this._attributes)!==null&&n!==void 0?n:{},this._asyncAttributesPromise=r?.then(i=>(this._attributes=Object.assign({},this._attributes,i),this.asyncAttributesPending=!1,i),i=>(eb.diag.debug("a resource's async attributes promise rejected: %s",i),this.asyncAttributesPending=!1,{}))}static empty(){return e.EMPTY}static default(){return new e({[Dr.SemanticResourceAttributes.SERVICE_NAME]:(0,QF.defaultServiceName)(),[Dr.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:P_.SDK_INFO[Dr.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],[Dr.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:P_.SDK_INFO[Dr.SemanticResourceAttributes.TELEMETRY_SDK_NAME],[Dr.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:P_.SDK_INFO[Dr.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]})}get attributes(){var t;return this.asyncAttributesPending&&eb.diag.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}}async waitForAsyncAttributes(){this.asyncAttributesPending&&await this._asyncAttributesPromise}merge(t){var r;if(!t)return this;let n=Object.assign(Object.assign({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);let i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(([s,o])=>{var a;return Object.assign(Object.assign(Object.assign(Object.assign({},this._syncAttributes),s),(a=t._syncAttributes)!==null&&a!==void 0?a:t.attributes),o)});return new e(n,i)}};bu.Resource=es;es.EMPTY=new es({})});var rb=d(tb=>{"use strict";Object.defineProperty(tb,"__esModule",{value:!0})});var ib=d(nb=>{"use strict";Object.defineProperty(nb,"__esModule",{value:!0})});var ob=d(sb=>{"use strict";Object.defineProperty(sb,"__esModule",{value:!0})});var ab=d(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.browserDetector=void 0;var ZF=In(),C_=class{detect(t){return Promise.resolve(ZF.browserDetectorSync.detect(t))}};Ru.browserDetector=new C_});var N_=d(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.envDetectorSync=void 0;var JF=L(),eU=J(),tU=Ot(),rU=Lr(),I_=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}detect(t){let r={},n=(0,eU.getEnv)(),i=n.OTEL_RESOURCE_ATTRIBUTES,s=n.OTEL_SERVICE_NAME;if(i)try{let o=this._parseResourceAttributes(i);Object.assign(r,o)}catch(o){JF.diag.debug(`EnvDetector failed: ${o.message}`)}return s&&(r[tU.SemanticResourceAttributes.SERVICE_NAME]=s),new rU.Resource(r)}_parseResourceAttributes(t){if(!t)return{};let r={},n=t.split(this._COMMA_SEPARATOR,-1);for(let i of n){let s=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(s.length!==2)continue;let[o,a]=s;if(o=o.trim(),a=a.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(o))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(a))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[o]=decodeURIComponent(a)}return r}_isValid(t){return t.length<=this._MAX_LENGTH&&this._isBaggageOctetString(t)}_isBaggageOctetString(t){for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0}_isValidAndNotEmpty(t){return t.length>0&&this._isValid(t)}};Ou.envDetectorSync=new I_});var ub=d(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.envDetector=void 0;var nU=N_(),x_=class{detect(t){return Promise.resolve(nU.envDetectorSync.detect(t))}};vu.envDetector=new x_});var cb=d(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.browserDetectorSync=void 0;var Pu=Ot(),L_=In(),iU=L(),w_=class{detect(t){if(!(typeof navigator<"u"))return L_.Resource.empty();let n={[Pu.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[Pu.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Web Browser",[Pu.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:navigator.userAgent};return this._getResourceAttributes(n,t)}_getResourceAttributes(t,r){return t[Pu.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]===""?(iU.diag.debug("BrowserDetector failed: Unable to find required browser resources. "),L_.Resource.empty()):new L_.Resource(Object.assign({},t))}};Cu.browserDetectorSync=new w_});var lb=d(vt=>{"use strict";var sU=vt&&vt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Iu=vt&&vt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sU(t,e,r)};Object.defineProperty(vt,"__esModule",{value:!0});Iu(ab(),vt);Iu(ub(),vt);Iu(cb(),vt);Iu(N_(),vt)});var db=d(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.isPromiseLike=void 0;var oU=e=>e!==null&&typeof e=="object"&&typeof e.then=="function";Nu.isPromiseLike=oU});var pb=d(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.detectResourcesSync=xn.detectResources=void 0;var ts=Lr(),Nn=L(),aU=db(),uU=async(e={})=>{let t=await Promise.all((e.detectors||[]).map(async r=>{try{let n=await r.detect(e);return Nn.diag.debug(`${r.constructor.name} found resource.`,n),n}catch(n){return Nn.diag.debug(`${r.constructor.name} failed: ${n.message}`),ts.Resource.empty()}}));return fb(t),t.reduce((r,n)=>r.merge(n),ts.Resource.empty())};xn.detectResources=uU;var cU=(e={})=>{var t;let r=((t=e.detectors)!==null&&t!==void 0?t:[]).map(i=>{try{let s=i.detect(e),o;if((0,aU.isPromiseLike)(s)){let a=async()=>(await s).attributes;o=new ts.Resource({},a())}else o=s;return o.waitForAsyncAttributes?o.waitForAsyncAttributes().then(()=>Nn.diag.debug(`${i.constructor.name} found resource.`,o)):Nn.diag.debug(`${i.constructor.name} found resource.`,o),o}catch(s){return Nn.diag.error(`${i.constructor.name} failed: ${s.message}`),ts.Resource.empty()}}),n=r.reduce((i,s)=>i.merge(s),ts.Resource.empty());return n.waitForAsyncAttributes&&n.waitForAsyncAttributes().then(()=>{fb(r)}),n};xn.detectResourcesSync=cU;var fb=e=>{e.forEach(t=>{if(Object.keys(t.attributes).length>0){let r=JSON.stringify(t.attributes,null,4);Nn.diag.verbose(r)}})}});var In=d(Qe=>{"use strict";var lU=Qe&&Qe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Br=Qe&&Qe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lU(t,e,r)};Object.defineProperty(Qe,"__esModule",{value:!0});Br(Lr(),Qe);Br(rb(),Qe);Br(v_(),Qe);Br(ib(),Qe);Br(ob(),Qe);Br(lb(),Qe);Br(pb(),Qe)});var _b=d(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.MultiSpanProcessor=void 0;var dU=J(),M_=class{constructor(t){this._spanProcessors=t}forceFlush(){let t=[];for(let r of this._spanProcessors)t.push(r.forceFlush());return new Promise(r=>{Promise.all(t).then(()=>{r()}).catch(n=>{(0,dU.globalErrorHandler)(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(t,r){for(let n of this._spanProcessors)n.onStart(t,r)}onEnd(t){for(let r of this._spanProcessors)r.onEnd(t)}shutdown(){let t=[];for(let r of this._spanProcessors)t.push(r.shutdown());return new Promise((r,n)=>{Promise.all(t).then(()=>{r()},n)})}};xu.MultiSpanProcessor=M_});var B_=d(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.NoopSpanProcessor=void 0;var D_=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};Lu.NoopSpanProcessor=D_});var gb=d(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.BasicTracerProvider=Fr.ForceFlushState=void 0;var Ln=L(),Mn=J(),hb=In(),fU=wu(),pU=u_(),_U=_b(),hU=B_(),gU=ou(),mU=l_(),wn;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(wn=Fr.ForceFlushState||(Fr.ForceFlushState={}));var rs=class{constructor(t={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map;let n=(0,Mn.merge)({},(0,pU.loadDefaultConfig)(),(0,mU.reconfigureLimits)(t));this.resource=(r=n.resource)!==null&&r!==void 0?r:hb.Resource.empty(),this.resource=hb.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let i=this._buildExporterFromEnv();if(i!==void 0){let s=new gU.BatchSpanProcessor(i);this.activeSpanProcessor=s}else this.activeSpanProcessor=new hU.NoopSpanProcessor}getTracer(t,r,n){let i=`${t}@${r||""}:${n?.schemaUrl||""}`;return this._tracers.has(i)||this._tracers.set(i,new fU.Tracer({name:t,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)}addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>Ln.diag.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new _U.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(t={}){Ln.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Ln.context.setGlobalContextManager(t.contextManager),t.propagator&&Ln.propagation.setGlobalPropagator(t.propagator)}forceFlush(){let t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(i=>{let s,o=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),s=wn.timeout},t);n.forceFlush().then(()=>{clearTimeout(o),s!==wn.timeout&&(s=wn.resolved,i(s))}).catch(a=>{clearTimeout(o),s=wn.error,i(a)})}));return new Promise((n,i)=>{Promise.all(r).then(s=>{let o=s.filter(a=>a!==wn.resolved);o.length>0?i(o):n()}).catch(s=>i([s]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(t){var r;return(r=this.constructor._registeredPropagators.get(t))===null||r===void 0?void 0:r()}_getSpanExporter(t){var r;return(r=this.constructor._registeredExporters.get(t))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let t=Array.from(new Set((0,Mn.getEnv)().OTEL_PROPAGATORS)),n=t.map(i=>{let s=this._getPropagator(i);return s||Ln.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),s}).reduce((i,s)=>(s&&i.push(s),i),[]);if(n.length!==0)return t.length===1?n[0]:new Mn.CompositePropagator({propagators:n})}_buildExporterFromEnv(){let t=(0,Mn.getEnv)().OTEL_TRACES_EXPORTER;if(t==="none"||t==="")return;let r=this._getSpanExporter(t);return r||Ln.diag.error(`Exporter "${t}" requested through environment variable is unavailable.`),r}};Fr.BasicTracerProvider=rs;rs._registeredPropagators=new Map([["tracecontext",()=>new Mn.W3CTraceContextPropagator],["baggage",()=>new Mn.W3CBaggagePropagator]]);rs._registeredExporters=new Map});var mb=d(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.ConsoleSpanExporter=void 0;var F_=J(),U_=class{export(t,r){return this._sendSpans(t,r)}shutdown(){return this._sendSpans([]),this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(t){var r;return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,traceState:(r=t.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:(0,F_.hrTimeToMicroseconds)(t.startTime),duration:(0,F_.hrTimeToMicroseconds)(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}}_sendSpans(t,r){for(let n of t)console.dir(this._exportInfo(n),{depth:3});if(r)return r({code:F_.ExportResultCode.SUCCESS})}};Mu.ConsoleSpanExporter=U_});var Sb=d(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.InMemorySpanExporter=void 0;var Eb=J(),k_=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(t,r){if(this._stopped)return r({code:Eb.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...t),setTimeout(()=>r({code:Eb.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};Du.InMemorySpanExporter=k_});var Tb=d(Ab=>{"use strict";Object.defineProperty(Ab,"__esModule",{value:!0})});var yb=d(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.SimpleSpanProcessor=void 0;var EU=L(),Dn=J(),j_=class{constructor(t){this._exporter=t,this._shutdownOnce=new Dn.BindOnceFuture(this._shutdown,this),this._unresolvedExports=new Set}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(t,r){}onEnd(t){var r,n;if(this._shutdownOnce.isCalled||!(t.spanContext().traceFlags&EU.TraceFlags.SAMPLED))return;let i=()=>Dn.internal._export(this._exporter,[t]).then(s=>{var o;s.code!==Dn.ExportResultCode.SUCCESS&&(0,Dn.globalErrorHandler)((o=s.error)!==null&&o!==void 0?o:new Error(`SimpleSpanProcessor: span export failed (status ${s})`))}).catch(s=>{(0,Dn.globalErrorHandler)(s)});if(t.resource.asyncAttributesPending){let s=(n=(r=t.resource).waitForAsyncAttributes)===null||n===void 0?void 0:n.call(r).then(()=>(s!=null&&this._unresolvedExports.delete(s),i()),o=>(0,Dn.globalErrorHandler)(o));s!=null&&this._unresolvedExports.add(s)}else i()}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}};Bu.SimpleSpanProcessor=j_});var Rb=d(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0})});var vb=d(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0})});var Cb=d(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0})});var Nb=d(Ib=>{"use strict";Object.defineProperty(Ib,"__esModule",{value:!0})});var Lb=d(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0})});var wu=d(ie=>{"use strict";var SU=ie&&ie.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Se=ie&&ie.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&SU(t,e,r)};Object.defineProperty(ie,"__esModule",{value:!0});Se(F0(),ie);Se(gb(),ie);Se(ou(),ie);Se(mb(),ie);Se(Sb(),ie);Se(Tb(),ie);Se(yb(),ie);Se(Rb(),ie);Se(B_(),ie);Se(Xa(),ie);Se(Qa(),ie);Se(n_(),ie);Se(s_(),ie);Se(Ji(),ie);Se(Zp(),ie);Se(vb(),ie);Se(Cb(),ie);Se(Nb(),ie);Se(Lb(),ie)});var Ur=d(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.parseRetryAfterToMills=ae.isExportRetryable=ae.invalidTimeout=ae.configureExporterTimeout=ae.appendRootPathToUrlIfNeeded=ae.appendResourcePathToUrl=ae.parseHeaders=ae.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=ae.DEFAULT_EXPORT_MAX_BACKOFF=ae.DEFAULT_EXPORT_INITIAL_BACKOFF=ae.DEFAULT_EXPORT_MAX_ATTEMPTS=void 0;var G_=L(),wb=J(),Mb=1e4;ae.DEFAULT_EXPORT_MAX_ATTEMPTS=5;ae.DEFAULT_EXPORT_INITIAL_BACKOFF=1e3;ae.DEFAULT_EXPORT_MAX_BACKOFF=5e3;ae.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=1.5;function AU(e={}){let t={};return Object.entries(e).forEach(([r,n])=>{typeof n<"u"?t[r]=String(n):G_.diag.warn(`Header "${r}" has wrong value and will be ignored`)}),t}ae.parseHeaders=AU;function TU(e,t){return e.endsWith("/")||(e=e+"/"),e+t}ae.appendResourcePathToUrl=TU;function yU(e){try{let t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch{return G_.diag.warn(`Could not parse export URL: '${e}'`),e}}ae.appendRootPathToUrlIfNeeded=yU;function bU(e){return typeof e=="number"?e<=0?q_(e,Mb):e:RU()}ae.configureExporterTimeout=bU;function RU(){var e;let t=Number((e=(0,wb.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:(0,wb.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?q_(t,Mb):t}function q_(e,t){return G_.diag.warn("Timeout must be greater than 0",e),t}ae.invalidTimeout=q_;function OU(e){return[429,502,503,504].includes(e)}ae.isExportRetryable=OU;function vU(e){if(e==null)return-1;let t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?t*1e3:-1;let r=new Date(e).getTime()-Date.now();return r>=0?r:0}ae.parseRetryAfterToMills=vU});var Uu=d(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.OTLPExporterBase=void 0;var Db=L(),ns=J(),PU=Ur(),H_=class{constructor(t={}){this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new ns.BindOnceFuture(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:30,this.timeoutMillis=(0,PU.configureExporterTimeout)(t.timeoutMillis),this.onInit(t)}export(t,r){if(this._shutdownOnce.isCalled){r({code:ns.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:ns.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(()=>{r({code:ns.ExportResultCode.SUCCESS})}).catch(n=>{r({code:ns.ExportResultCode.FAILED,error:n})})}_export(t){return new Promise((r,n)=>{try{Db.diag.debug("items to be sent",t),this.send(t,r,n)}catch(i){n(i)}})}shutdown(){return this._shutdownOnce.call()}forceFlush(){return Promise.all(this._sendingPromises).then(()=>{})}_shutdown(){return Db.diag.debug("shutdown started"),this.onShutdown(),this.forceFlush()}};Fu.OTLPExporterBase=H_});var $_=d(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.CompressionAlgorithm=void 0;var CU;(function(e){e.NONE="none",e.GZIP="gzip"})(CU=is.CompressionAlgorithm||(is.CompressionAlgorithm={}))});var ju=d(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.OTLPExporterError=void 0;var V_=class extends Error{constructor(t,r,n){super(t),this.name="OTLPExporterError",this.data=n,this.code=r}};ku.OTLPExporterError=V_});var Y_=d(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.configureCompression=tr.createHttpAgent=tr.sendWithHttp=void 0;var Fb=v("url"),Ub=v("http"),kb=v("https"),IU=v("zlib"),NU=v("stream"),W_=L(),Gu=$_(),Bb=J(),ss=ju(),Bn=Ur();function xU(e,t,r,n,i){let s=e.timeoutMillis,o=new Fb.URL(e.url),a=Number(process.versions.node.split(".")[0]),u,c,l=!1,f=setTimeout(()=>{if(clearTimeout(u),l=!0,c.destroyed){let g=new ss.OTLPExporterError("Request Timeout");i(g)}else a>=14?c.destroy():c.abort()},s),p={hostname:o.hostname,port:o.port,path:o.pathname,method:"POST",headers:Object.assign({"Content-Type":r},e.headers),agent:e.agent},h=o.protocol==="http:"?Ub.request:kb.request,_=(g=Bn.DEFAULT_EXPORT_MAX_ATTEMPTS,T=Bn.DEFAULT_EXPORT_INITIAL_BACKOFF)=>{switch(c=h(p,A=>{let y="";A.on("data",b=>y+=b),A.on("aborted",()=>{if(l){let b=new ss.OTLPExporterError("Request Timeout");i(b)}}),A.on("end",()=>{if(l===!1)if(A.statusCode&&A.statusCode<299)W_.diag.debug(`statusCode: ${A.statusCode}`,y),n(),clearTimeout(f),clearTimeout(u);else if(A.statusCode&&(0,Bn.isExportRetryable)(A.statusCode)&&g>0){let b;T=Bn.DEFAULT_EXPORT_BACKOFF_MULTIPLIER*T,A.headers["retry-after"]?b=(0,Bn.parseRetryAfterToMills)(A.headers["retry-after"]):b=Math.round(Math.random()*(Bn.DEFAULT_EXPORT_MAX_BACKOFF-T)+T),u=setTimeout(()=>{_(g-1,T)},b)}else{let b=new ss.OTLPExporterError(A.statusMessage,A.statusCode,y);i(b),clearTimeout(f),clearTimeout(u)}})}),c.on("error",A=>{if(l){let y=new ss.OTLPExporterError("Request Timeout",A.code);i(y)}else i(A);clearTimeout(f),clearTimeout(u)}),c.on("abort",()=>{if(l){let A=new ss.OTLPExporterError("Request Timeout");i(A)}clearTimeout(f),clearTimeout(u)}),e.compression){case Gu.CompressionAlgorithm.GZIP:{c.setHeader("Content-Encoding","gzip"),LU(t).on("error",i).pipe(IU.createGzip()).on("error",i).pipe(c);break}default:c.end(t);break}};_()}tr.sendWithHttp=xU;function LU(e){let t=new NU.Readable;return t.push(e),t.push(null),t}function wU(e){if(e.httpAgentOptions&&e.keepAlive===!1){W_.diag.warn("httpAgentOptions is used only when keepAlive is true");return}if(!(e.keepAlive===!1||!e.url))try{let r=new Fb.URL(e.url).protocol==="http:"?Ub.Agent:kb.Agent;return new r(Object.assign({keepAlive:!0},e.httpAgentOptions))}catch(t){W_.diag.error(`collector exporter failed to create http agent. err: ${t.message}`);return}}tr.createHttpAgent=wU;function MU(e){return e||(((0,Bb.getEnv)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,Bb.getEnv)().OTEL_EXPORTER_OTLP_COMPRESSION)===Gu.CompressionAlgorithm.GZIP?Gu.CompressionAlgorithm.GZIP:Gu.CompressionAlgorithm.NONE)}tr.configureCompression=MU});var qb=d(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.OTLPExporterNodeBase=void 0;var DU=Uu(),BU=Ur(),K_=Y_(),jb=L(),Gb=J(),X_=class extends DU.OTLPExporterBase{constructor(t={}){super(t),this.DEFAULT_HEADERS={},t.metadata&&jb.diag.warn("Metadata cannot be set when using http"),this.headers=Object.assign(this.DEFAULT_HEADERS,(0,BU.parseHeaders)(t.headers),Gb.baggageUtils.parseKeyPairsIntoRecord((0,Gb.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)),this.agent=(0,K_.createHttpAgent)(t),this.compression=(0,K_.configureCompression)(t.compression)}onInit(t){}send(t,r,n){if(this._shutdownOnce.isCalled){jb.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=new Promise((a,u)=>{(0,K_.sendWithHttp)(this,JSON.stringify(i),"application/json",a,u)}).then(r,n);this._sendingPromises.push(s);let o=()=>{let a=this._sendingPromises.indexOf(s);this._sendingPromises.splice(a,1)};s.then(o,o)}onShutdown(){}};qu.OTLPExporterNodeBase=X_});var Hb=d(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.CompressionAlgorithm=nt.configureCompression=nt.createHttpAgent=nt.sendWithHttp=nt.OTLPExporterNodeBase=void 0;var FU=qb();Object.defineProperty(nt,"OTLPExporterNodeBase",{enumerable:!0,get:function(){return FU.OTLPExporterNodeBase}});var z_=Y_();Object.defineProperty(nt,"sendWithHttp",{enumerable:!0,get:function(){return z_.sendWithHttp}});Object.defineProperty(nt,"createHttpAgent",{enumerable:!0,get:function(){return z_.createHttpAgent}});Object.defineProperty(nt,"configureCompression",{enumerable:!0,get:function(){return z_.configureCompression}});var UU=$_();Object.defineProperty(nt,"CompressionAlgorithm",{enumerable:!0,get:function(){return UU.CompressionAlgorithm}})});var Q_=d(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.sendWithXhr=Un.sendWithBeacon=void 0;var $b=L(),os=ju(),Fn=Ur();function kU(e,t,r,n,i){if(navigator.sendBeacon(t,new Blob([e],r)))$b.diag.debug("sendBeacon - can send",e),n();else{let s=new os.OTLPExporterError(`sendBeacon - cannot send ${e}`);i(s)}}Un.sendWithBeacon=kU;function jU(e,t,r,n,i,s){let o,a,u=!1,c=setTimeout(()=>{if(clearTimeout(o),u=!0,a.readyState===XMLHttpRequest.DONE){let f=new os.OTLPExporterError("Request Timeout");s(f)}else a.abort()},n),l=(f=Fn.DEFAULT_EXPORT_MAX_ATTEMPTS,p=Fn.DEFAULT_EXPORT_INITIAL_BACKOFF)=>{a=new XMLHttpRequest,a.open("POST",t),Object.entries(Object.assign(Object.assign({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach(([_,g])=>{a.setRequestHeader(_,g)}),a.send(e),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE&&u===!1)if(a.status>=200&&a.status<=299)$b.diag.debug("xhr success",e),i(),clearTimeout(c),clearTimeout(o);else if(a.status&&(0,Fn.isExportRetryable)(a.status)&&f>0){let _;p=Fn.DEFAULT_EXPORT_BACKOFF_MULTIPLIER*p,a.getResponseHeader("Retry-After")?_=(0,Fn.parseRetryAfterToMills)(a.getResponseHeader("Retry-After")):_=Math.round(Math.random()*(Fn.DEFAULT_EXPORT_MAX_BACKOFF-p)+p),o=setTimeout(()=>{l(f-1,p)},_)}else{let _=new os.OTLPExporterError(`Failed to export with XHR (status: ${a.status})`,a.status);s(_),clearTimeout(c),clearTimeout(o)}},a.onabort=()=>{if(u){let _=new os.OTLPExporterError("Request Timeout");s(_)}clearTimeout(c),clearTimeout(o)},a.onerror=()=>{if(u){let _=new os.OTLPExporterError("Request Timeout");s(_)}clearTimeout(c),clearTimeout(o)}};l()}Un.sendWithXhr=jU});var Wb=d($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.OTLPExporterBrowserBase=void 0;var GU=Uu(),qU=Ur(),Vb=Q_(),HU=L(),Hu=J(),Z_=class extends GU.OTLPExporterBase{constructor(t={}){super(t),this._useXHR=!1,this._useXHR=!!t.headers||typeof navigator.sendBeacon!="function",this._useXHR?this._headers=Object.assign({},(0,qU.parseHeaders)(t.headers),Hu.baggageUtils.parseKeyPairsIntoRecord((0,Hu.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)):this._headers={}}onInit(){Hu._globalThis.addEventListener("unload",this.shutdown)}onShutdown(){Hu._globalThis.removeEventListener("unload",this.shutdown)}send(t,r,n){if(this._shutdownOnce.isCalled){HU.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=JSON.stringify(i),o=new Promise((u,c)=>{this._useXHR?(0,Vb.sendWithXhr)(s,this.url,this._headers,this.timeoutMillis,u,c):(0,Vb.sendWithBeacon)(s,this.url,{type:"application/json"},u,c)}).then(r,n);this._sendingPromises.push(o);let a=()=>{let u=this._sendingPromises.indexOf(o);this._sendingPromises.splice(u,1)};o.then(a,a)}};$u.OTLPExporterBrowserBase=Z_});var Yb=d(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.sendWithXhr=kn.OTLPExporterBrowserBase=void 0;var $U=Wb();Object.defineProperty(kn,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return $U.OTLPExporterBrowserBase}});var VU=Q_();Object.defineProperty(kn,"sendWithXhr",{enumerable:!0,get:function(){return VU.sendWithXhr}})});var Xb=d(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.sendWithXhr=we.OTLPExporterBrowserBase=we.CompressionAlgorithm=we.configureCompression=we.createHttpAgent=we.sendWithHttp=we.OTLPExporterNodeBase=void 0;var as=Hb();Object.defineProperty(we,"OTLPExporterNodeBase",{enumerable:!0,get:function(){return as.OTLPExporterNodeBase}});Object.defineProperty(we,"sendWithHttp",{enumerable:!0,get:function(){return as.sendWithHttp}});Object.defineProperty(we,"createHttpAgent",{enumerable:!0,get:function(){return as.createHttpAgent}});Object.defineProperty(we,"configureCompression",{enumerable:!0,get:function(){return as.configureCompression}});Object.defineProperty(we,"CompressionAlgorithm",{enumerable:!0,get:function(){return as.CompressionAlgorithm}});var Kb=Yb();Object.defineProperty(we,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return Kb.OTLPExporterBrowserBase}});Object.defineProperty(we,"sendWithXhr",{enumerable:!0,get:function(){return Kb.sendWithXhr}})});var J_=d(de=>{"use strict";var WU=de&&de.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),YU=de&&de.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&WU(t,e,r)};Object.defineProperty(de,"__esModule",{value:!0});de.invalidTimeout=de.configureExporterTimeout=de.appendRootPathToUrlIfNeeded=de.appendResourcePathToUrl=de.parseHeaders=de.OTLPExporterError=de.OTLPExporterBase=void 0;YU(Xb(),de);var KU=Uu();Object.defineProperty(de,"OTLPExporterBase",{enumerable:!0,get:function(){return KU.OTLPExporterBase}});var XU=ju();Object.defineProperty(de,"OTLPExporterError",{enumerable:!0,get:function(){return XU.OTLPExporterError}});var us=Ur();Object.defineProperty(de,"parseHeaders",{enumerable:!0,get:function(){return us.parseHeaders}});Object.defineProperty(de,"appendResourcePathToUrl",{enumerable:!0,get:function(){return us.appendResourcePathToUrl}});Object.defineProperty(de,"appendRootPathToUrlIfNeeded",{enumerable:!0,get:function(){return us.appendRootPathToUrlIfNeeded}});Object.defineProperty(de,"configureExporterTimeout",{enumerable:!0,get:function(){return us.configureExporterTimeout}});Object.defineProperty(de,"invalidTimeout",{enumerable:!0,get:function(){return us.invalidTimeout}})});var Qb=d(zb=>{"use strict";Object.defineProperty(zb,"__esModule",{value:!0})});var cs=d(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.getOtlpEncoder=it.encodeAsString=it.encodeAsLongBits=it.toLongBits=it.hrTimeToNanos=void 0;var Vu=J(),zU=BigInt(1e9);function eh(e){return BigInt(e[0])*zU+BigInt(e[1])}it.hrTimeToNanos=eh;function Jb(e){let t=Number(BigInt.asUintN(32,e)),r=Number(BigInt.asUintN(32,e>>BigInt(32)));return{low:t,high:r}}it.toLongBits=Jb;function th(e){let t=eh(e);return Jb(t)}it.encodeAsLongBits=th;function eR(e){return eh(e).toString()}it.encodeAsString=eR;var QU=typeof BigInt<"u"?eR:Vu.hrTimeToNanoseconds;function Zb(e){return e}function tR(e){if(e!==void 0)return(0,Vu.hexToBinary)(e)}var ZU={encodeHrTime:th,encodeSpanContext:Vu.hexToBinary,encodeOptionalSpanContext:tR};function JU(e){var t,r;if(e===void 0)return ZU;let n=(t=e.useLongBits)!==null&&t!==void 0?t:!0,i=(r=e.useHex)!==null&&r!==void 0?r:!1;return{encodeHrTime:n?th:QU,encodeSpanContext:i?Zb:Vu.hexToBinary,encodeOptionalSpanContext:i?Zb:tR}}it.getOtlpEncoder=JU});var nR=d(rR=>{"use strict";Object.defineProperty(rR,"__esModule",{value:!0})});var sR=d(iR=>{"use strict";Object.defineProperty(iR,"__esModule",{value:!0})});var oR=d(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.ESpanKind=void 0;var ek;(function(e){e[e.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",e[e.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",e[e.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",e[e.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",e[e.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",e[e.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"})(ek=ls.ESpanKind||(ls.ESpanKind={}))});var uR=d(aR=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0})});var ds=d(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.toAnyValue=rr.toKeyValue=rr.toAttributes=void 0;function tk(e){return Object.keys(e).map(t=>rh(t,e[t]))}rr.toAttributes=tk;function rh(e,t){return{key:e,value:nh(t)}}rr.toKeyValue=rh;function nh(e){let t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(nh)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(([r,n])=>rh(r,n))}}:{}}rr.toAnyValue=nh});var dR=d(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.toOtlpSpanEvent=nr.toOtlpLink=nr.sdkSpanToOtlpSpan=void 0;var ih=ds();function rk(e,t){var r;let n=e.spanContext(),i=e.status;return{traceId:t.encodeSpanContext(n.traceId),spanId:t.encodeSpanContext(n.spanId),parentSpanId:t.encodeOptionalSpanContext(e.parentSpanId),traceState:(r=n.traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:(0,ih.toAttributes)(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(s=>lR(s,t)),droppedEventsCount:e.droppedEventsCount,status:{code:i.code,message:i.message},links:e.links.map(s=>cR(s,t)),droppedLinksCount:e.droppedLinksCount}}nr.sdkSpanToOtlpSpan=rk;function cR(e,t){var r;return{attributes:e.attributes?(0,ih.toAttributes)(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:(r=e.context.traceState)===null||r===void 0?void 0:r.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}nr.toOtlpLink=cR;function lR(e,t){return{attributes:e.attributes?(0,ih.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}nr.toOtlpSpanEvent=lR});var fR=d(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.createExportTraceServiceRequest=void 0;var nk=ds(),ik=dR(),sk=cs();function ok(e,t){let r=(0,sk.getOtlpEncoder)(t);return{resourceSpans:uk(e,r)}}Wu.createExportTraceServiceRequest=ok;function ak(e){let t=new Map;for(let r of e){let n=t.get(r.resource);n||(n=new Map,t.set(r.resource,n));let i=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`,s=n.get(i);s||(s=[],n.set(i,s)),s.push(r)}return t}function uk(e,t){let r=ak(e),n=[],i=r.entries(),s=i.next();for(;!s.done;){let[o,a]=s.value,u=[],c=a.values(),l=c.next();for(;!l.done;){let p=l.value;if(p.length>0){let{name:h,version:_,schemaUrl:g}=p[0].instrumentationLibrary,T=p.map(A=>(0,ik.sdkSpanToOtlpSpan)(A,t));u.push({scope:{name:h,version:_},spans:T,schemaUrl:g})}l=c.next()}let f={resource:{attributes:(0,nk.toAttributes)(o.attributes),droppedAttributesCount:0},scopeSpans:u,schemaUrl:void 0};n.push(f),s=i.next()}return n}});var Yu=d(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.AggregationTemporality=void 0;var ck;(function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"})(ck=fs.AggregationTemporality||(fs.AggregationTemporality={}))});var jn=d(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.DataPointType=void 0;var lk;(function(e){e[e.HISTOGRAM=0]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",e[e.GAUGE=2]="GAUGE",e[e.SUM=3]="SUM"})(lk=ps.DataPointType||(ps.DataPointType={}))});var Pt=d(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.equalsCaseInsensitive=ue.binarySearchLB=ue.setEquals=ue.FlatMap=ue.isPromiseAllSettledRejectionResult=ue.PromiseAllSettled=ue.callWithTimeout=ue.TimeoutError=ue.instrumentationScopeId=ue.hashAttributes=ue.isNotNullish=void 0;function dk(e){return e!=null}ue.isNotNullish=dk;function fk(e){let t=Object.keys(e);return t.length===0?"":(t=t.sort(),JSON.stringify(t.map(r=>[r,e[r]])))}ue.hashAttributes=fk;function pk(e){var t,r;return`${e.name}:${(t=e.version)!==null&&t!==void 0?t:""}:${(r=e.schemaUrl)!==null&&r!==void 0?r:""}`}ue.instrumentationScopeId=pk;var Ku=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};ue.TimeoutError=Ku;function _k(e,t){let r,n=new Promise(function(s,o){r=setTimeout(function(){o(new Ku("Operation timed out."))},t)});return Promise.race([e,n]).then(i=>(clearTimeout(r),i),i=>{throw clearTimeout(r),i})}ue.callWithTimeout=_k;async function hk(e){return Promise.all(e.map(async t=>{try{return{status:"fulfilled",value:await t}}catch(r){return{status:"rejected",reason:r}}}))}ue.PromiseAllSettled=hk;function gk(e){return e.status==="rejected"}ue.isPromiseAllSettledRejectionResult=gk;function mk(e,t){let r=[];return e.forEach(n=>{r.push(...t(n))}),r}ue.FlatMap=mk;function Ek(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}ue.setEquals=Ek;function Sk(e,t){let r=0,n=e.length-1;for(;n-r>1;){let i=Math.trunc((n+r)/2);e[i]<=t?r=i:n=i-1}return e[n]<=t?n:e[r]<=t?r:-1}ue.binarySearchLB=Sk;function Ak(e,t){return e.toLowerCase()===t.toLowerCase()}ue.equalsCaseInsensitive=Ak});var Gn=d(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.AggregatorKind=void 0;var Tk;(function(e){e[e.DROP=0]="DROP",e[e.SUM=1]="SUM",e[e.LAST_VALUE=2]="LAST_VALUE",e[e.HISTOGRAM=3]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"})(Tk=_s.AggregatorKind||(_s.AggregatorKind={}))});var pR=d(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.DropAggregator=void 0;var yk=Gn(),sh=class{constructor(){this.kind=yk.AggregatorKind.DROP}createAccumulation(){}merge(t,r){}diff(t,r){}toMetricData(t,r,n,i){}};Xu.DropAggregator=sh});var Ut=d(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.isValidName=Ze.isDescriptorCompatibleWith=Ze.createInstrumentDescriptorWithView=Ze.createInstrumentDescriptor=Ze.InstrumentType=void 0;var _R=L(),bk=Pt(),Rk;(function(e){e.COUNTER="COUNTER",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(Rk=Ze.InstrumentType||(Ze.InstrumentType={}));function Ok(e,t,r){var n,i,s,o;return hR(e)||_R.diag.warn(`Invalid metric name: "${e}". The metric name should be a ASCII string with a length no greater than 255 characters.`),{name:e,type:t,description:(n=r?.description)!==null&&n!==void 0?n:"",unit:(i=r?.unit)!==null&&i!==void 0?i:"",valueType:(s=r?.valueType)!==null&&s!==void 0?s:_R.ValueType.DOUBLE,advice:(o=r?.advice)!==null&&o!==void 0?o:{}}}Ze.createInstrumentDescriptor=Ok;function vk(e,t){var r,n;return{name:(r=e.name)!==null&&r!==void 0?r:t.name,description:(n=e.description)!==null&&n!==void 0?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType,advice:t.advice}}Ze.createInstrumentDescriptorWithView=vk;function Pk(e,t){return(0,bk.equalsCaseInsensitive)(e.name,t.name)&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}Ze.isDescriptorCompatibleWith=Pk;var Ck=/^[a-z][a-z0-9_.\-/]{0,254}$/i;function hR(e){return e.match(Ck)!=null}Ze.isValidName=hR});var gR=d(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.HistogramAggregator=Hn.HistogramAccumulation=void 0;var Ik=Gn(),Nk=jn(),oh=Ut(),xk=Pt();function Lk(e){let t=e.map(()=>0);return t.push(0),{buckets:{boundaries:e,counts:t},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}var qn=class{constructor(t,r,n=!0,i=Lk(r)){this.startTime=t,this._boundaries=r,this._recordMinMax=n,this._current=i}record(t){this._current.count+=1,this._current.sum+=t,this._recordMinMax&&(this._current.min=Math.min(t,this._current.min),this._current.max=Math.max(t,this._current.max),this._current.hasMinMax=!0);let r=(0,xk.binarySearchLB)(this._boundaries,t);this._current.buckets.counts[r+1]+=1}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};Hn.HistogramAccumulation=qn;var ah=class{constructor(t,r){this._boundaries=t,this._recordMinMax=r,this.kind=Ik.AggregatorKind.HISTOGRAM}createAccumulation(t){return new qn(t,this._boundaries,this._recordMinMax)}merge(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let l=0;l<s.length;l++)a[l]=s[l]+o[l];let u=1/0,c=-1/0;return this._recordMinMax&&(n.hasMinMax&&i.hasMinMax?(u=Math.min(n.min,i.min),c=Math.max(n.max,i.max)):n.hasMinMax?(u=n.min,c=n.max):i.hasMinMax&&(u=i.min,c=i.max)),new qn(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:n.count+i.count,sum:n.sum+i.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||i.hasMinMax),min:u,max:c})}diff(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let u=0;u<s.length;u++)a[u]=o[u]-s[u];return new qn(r.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:i.count-n.count,sum:i.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:Nk.DataPointType.HISTOGRAM,dataPoints:n.map(([s,o])=>{let a=o.toPointValue(),u=t.type===oh.InstrumentType.UP_DOWN_COUNTER||t.type===oh.InstrumentType.OBSERVABLE_GAUGE||t.type===oh.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:s,startTime:o.startTime,endTime:i,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:u?void 0:a.sum,buckets:a.buckets,count:a.count}}})}}};Hn.HistogramAggregator=ah});var mR=d(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.Buckets=void 0;var uh=class e{constructor(t=new ch,r=0,n=0,i=0){this.backing=t,this.indexBase=r,this.indexStart=n,this.indexEnd=i}get offset(){return this.indexStart}get length(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1}counts(){return Array.from({length:this.length},(t,r)=>this.at(r))}at(t){let r=this.indexBase-this.indexStart;return t<r&&(t+=this.backing.length),t-=r,this.backing.countAt(t)}incrementBucket(t,r){this.backing.increment(t,r)}decrementBucket(t,r){this.backing.decrement(t,r)}trim(){for(let t=0;t<this.length;t++)if(this.at(t)!==0){this.indexStart+=t;break}else if(t===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(let t=this.length-1;t>=0;t--)if(this.at(t)!==0){this.indexEnd-=this.length-t-1;break}this._rotate()}downscale(t){this._rotate();let r=1+this.indexEnd-this.indexStart,n=1<<t,i=0,s=0;for(let o=this.indexStart;o<=this.indexEnd;){let a=o%n;a<0&&(a+=n);for(let u=a;u<n&&i<r;u++)this._relocateBucket(s,i),i++,o++;s++}this.indexStart>>=t,this.indexEnd>>=t,this.indexBase=this.indexStart}clone(){return new e(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)}_rotate(){let t=this.indexBase-this.indexStart;t!==0&&(t>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,t),this.backing.reverse(t,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+t)),this.indexBase=this.indexStart)}_relocateBucket(t,r){t!==r&&this.incrementBucket(t,this.backing.emptyBucket(r))}};zu.Buckets=uh;var ch=class e{constructor(t=[0]){this._counts=t}get length(){return this._counts.length}countAt(t){return this._counts[t]}growTo(t,r,n){let i=new Array(t).fill(0);i.splice(n,this._counts.length-r,...this._counts.slice(r)),i.splice(0,r,...this._counts.slice(0,r)),this._counts=i}reverse(t,r){let n=Math.floor((t+r)/2)-t;for(let i=0;i<n;i++){let s=this._counts[t+i];this._counts[t+i]=this._counts[r-i-1],this._counts[r-i-1]=s}}emptyBucket(t){let r=this._counts[t];return this._counts[t]=0,r}increment(t,r){this._counts[t]+=r}decrement(t,r){this._counts[t]>=r?this._counts[t]-=r:this._counts[t]=0}clone(){return new e([...this._counts])}}});var dh=d(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.getSignificand=qe.getNormalBase2=qe.MIN_VALUE=qe.MAX_NORMAL_EXPONENT=qe.MIN_NORMAL_EXPONENT=qe.SIGNIFICAND_WIDTH=void 0;qe.SIGNIFICAND_WIDTH=52;var wk=2146435072,Mk=1048575,lh=1023;qe.MIN_NORMAL_EXPONENT=-lh+1;qe.MAX_NORMAL_EXPONENT=lh;qe.MIN_VALUE=Math.pow(2,-1022);function Dk(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e),((t.getUint32(0)&wk)>>20)-lh}qe.getNormalBase2=Dk;function Bk(e){let t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);let r=t.getUint32(0),n=t.getUint32(4);return(r&Mk)*Math.pow(2,32)+n}qe.getSignificand=Bk});var Qu=d($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.nextGreaterSquare=$n.ldexp=void 0;function Fk(e,t){return e===0||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||Number.isNaN(e)?e:e*Math.pow(2,t)}$n.ldexp=Fk;function Uk(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}$n.nextGreaterSquare=Uk});var Ju=d(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.MappingError=void 0;var fh=class extends Error{};Zu.MappingError=fh});var SR=d(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.ExponentMapping=void 0;var Vn=dh(),kk=Qu(),ER=Ju(),ph=class{constructor(t){this._shift=-t}mapToIndex(t){if(t<Vn.MIN_VALUE)return this._minNormalLowerBoundaryIndex();let r=Vn.getNormalBase2(t),n=this._rightShift(Vn.getSignificand(t)-1,Vn.SIGNIFICAND_WIDTH);return r+n>>this._shift}lowerBoundary(t){let r=this._minNormalLowerBoundaryIndex();if(t<r)throw new ER.MappingError(`underflow: ${t} is < minimum lower boundary: ${r}`);let n=this._maxNormalLowerBoundaryIndex();if(t>n)throw new ER.MappingError(`overflow: ${t} is > maximum lower boundary: ${n}`);return kk.ldexp(1,t<<this._shift)}get scale(){return this._shift===0?0:-this._shift}_minNormalLowerBoundaryIndex(){let t=Vn.MIN_NORMAL_EXPONENT>>this._shift;return this._shift<2&&t--,t}_maxNormalLowerBoundaryIndex(){return Vn.MAX_NORMAL_EXPONENT>>this._shift}_rightShift(t,r){return Math.floor(t*Math.pow(2,-r))}};ec.ExponentMapping=ph});var yR=d(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.LogarithmMapping=void 0;var Wn=dh(),AR=Qu(),TR=Ju(),_h=class{constructor(t){this._scale=t,this._scaleFactor=AR.ldexp(Math.LOG2E,t),this._inverseFactor=AR.ldexp(Math.LN2,-t)}mapToIndex(t){if(t<=Wn.MIN_VALUE)return this._minNormalLowerBoundaryIndex()-1;if(Wn.getSignificand(t)===0)return(Wn.getNormalBase2(t)<<this._scale)-1;let r=Math.floor(Math.log(t)*this._scaleFactor),n=this._maxNormalLowerBoundaryIndex();return r>=n?n:r}lowerBoundary(t){let r=this._maxNormalLowerBoundaryIndex();if(t>=r){if(t===r)return 2*Math.exp((t-(1<<this._scale))/this._scaleFactor);throw new TR.MappingError(`overflow: ${t} is > maximum lower boundary: ${r}`)}let n=this._minNormalLowerBoundaryIndex();if(t<=n){if(t===n)return Wn.MIN_VALUE;if(t===n-1)return Math.exp((t+(1<<this._scale))/this._scaleFactor)/2;throw new TR.MappingError(`overflow: ${t} is < minimum lower boundary: ${n}`)}return Math.exp(t*this._inverseFactor)}get scale(){return this._scale}_minNormalLowerBoundaryIndex(){return Wn.MIN_NORMAL_EXPONENT<<this._scale}_maxNormalLowerBoundaryIndex(){return(Wn.MAX_NORMAL_EXPONENT+1<<this._scale)-1}};tc.LogarithmMapping=_h});var OR=d(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.getMapping=void 0;var jk=SR(),Gk=yR(),qk=Ju(),bR=-10,RR=20,Hk=Array.from({length:31},(e,t)=>t>10?new Gk.LogarithmMapping(t-10):new jk.ExponentMapping(t-10));function $k(e){if(e>RR||e<bR)throw new qk.MappingError(`expected scale >= ${bR} && <= ${RR}, got: ${e}`);return Hk[e+10]}rc.getMapping=$k});var CR=d(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.ExponentialHistogramAggregator=Kn.ExponentialHistogramAccumulation=void 0;var Vk=Gn(),Wk=jn(),Yk=L(),hh=Ut(),vR=mR(),PR=OR(),Kk=Qu(),Yn=class e{constructor(t,r){this.low=t,this.high=r}static combine(t,r){return new e(Math.min(t.low,r.low),Math.max(t.high,r.high))}},Xk=20,zk=160,gh=2,nc=class e{constructor(t=t,r=zk,n=!0,i=0,s=0,o=0,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=new vR.Buckets,l=new vR.Buckets,f=(0,PR.getMapping)(Xk)){this.startTime=t,this._maxSize=r,this._recordMinMax=n,this._sum=i,this._count=s,this._zeroCount=o,this._min=a,this._max=u,this._positive=c,this._negative=l,this._mapping=f,this._maxSize<gh&&(Yk.diag.warn(`Exponential Histogram Max Size set to ${this._maxSize},                 changing to the minimum size of: ${gh}`),this._maxSize=gh)}record(t){this.updateByIncrement(t,1)}setStartTime(t){this.startTime=t}toPointValue(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}}get sum(){return this._sum}get min(){return this._min}get max(){return this._max}get count(){return this._count}get zeroCount(){return this._zeroCount}get scale(){return this._count===this._zeroCount?0:this._mapping.scale}get positive(){return this._positive}get negative(){return this._negative}updateByIncrement(t,r){if(t>this._max&&(this._max=t),t<this._min&&(this._min=t),this._count+=r,t===0){this._zeroCount+=r;return}this._sum+=t*r,t>0?this._updateBuckets(this._positive,t,r):this._updateBuckets(this._negative,-t,r)}merge(t){this._count===0?(this._min=t.min,this._max=t.max):t.count!==0&&(t.min<this.min&&(this._min=t.min),t.max>this.max&&(this._max=t.max)),this.startTime=t.startTime,this._sum+=t.sum,this._count+=t.count,this._zeroCount+=t.zeroCount;let r=this._minScale(t);this._downscale(this.scale-r),this._mergeBuckets(this.positive,t,t.positive,r),this._mergeBuckets(this.negative,t,t.negative,r)}diff(t){this._min=1/0,this._max=-1/0,this._sum-=t.sum,this._count-=t.count,this._zeroCount-=t.zeroCount;let r=this._minScale(t);this._downscale(this.scale-r),this._diffBuckets(this.positive,t,t.positive,r),this._diffBuckets(this.negative,t,t.negative,r)}clone(){return new e(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)}_updateBuckets(t,r,n){let i=this._mapping.mapToIndex(r),s=!1,o=0,a=0;if(t.length===0?(t.indexStart=i,t.indexEnd=t.indexStart,t.indexBase=t.indexStart):i<t.indexStart&&t.indexEnd-i>=this._maxSize?(s=!0,a=i,o=t.indexEnd):i>t.indexEnd&&i-t.indexStart>=this._maxSize&&(s=!0,a=t.indexStart,o=i),s){let u=this._changeScale(o,a);this._downscale(u),i=this._mapping.mapToIndex(r)}this._incrementIndexBy(t,i,n)}_incrementIndexBy(t,r,n){if(n===0)return;if(r<t.indexStart){let s=t.indexEnd-r;s>=t.backing.length&&this._grow(t,s+1),t.indexStart=r}else if(r>t.indexEnd){let s=r-t.indexStart;s>=t.backing.length&&this._grow(t,s+1),t.indexEnd=r}let i=r-t.indexBase;i<0&&(i+=t.backing.length),t.incrementBucket(i,n)}_grow(t,r){let n=t.backing.length,i=t.indexBase-t.indexStart,s=n-i,o=(0,Kk.nextGreaterSquare)(r);o>this._maxSize&&(o=this._maxSize);let a=o-i;t.backing.growTo(o,s,a)}_changeScale(t,r){let n=0;for(;t-r>=this._maxSize;)t>>=1,r>>=1,n++;return n}_downscale(t){if(t===0)return;if(t<0)throw new Error(`impossible change of scale: ${this.scale}`);let r=this._mapping.scale-t;this._positive.downscale(t),this._negative.downscale(t),this._mapping=(0,PR.getMapping)(r)}_minScale(t){let r=Math.min(this.scale,t.scale),n=Yn.combine(this._highLowAtScale(this.positive,this.scale,r),this._highLowAtScale(t.positive,t.scale,r)),i=Yn.combine(this._highLowAtScale(this.negative,this.scale,r),this._highLowAtScale(t.negative,t.scale,r));return Math.min(r-this._changeScale(n.high,n.low),r-this._changeScale(i.high,i.low))}_highLowAtScale(t,r,n){if(t.length===0)return new Yn(0,-1);let i=r-n;return new Yn(t.indexStart>>i,t.indexEnd>>i)}_mergeBuckets(t,r,n,i){let s=n.offset,o=r.scale-i;for(let a=0;a<n.length;a++)this._incrementIndexBy(t,s+a>>o,n.at(a))}_diffBuckets(t,r,n,i){let s=n.offset,o=r.scale-i;for(let a=0;a<n.length;a++){let c=(s+a>>o)-t.indexBase;c<0&&(c+=t.backing.length),t.decrementBucket(c,n.at(a))}t.trim()}};Kn.ExponentialHistogramAccumulation=nc;var mh=class{constructor(t,r){this._maxSize=t,this._recordMinMax=r,this.kind=Vk.AggregatorKind.EXPONENTIAL_HISTOGRAM}createAccumulation(t){return new nc(t,this._maxSize,this._recordMinMax)}merge(t,r){let n=r.clone();return n.merge(t),n}diff(t,r){let n=r.clone();return n.diff(t),n}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:Wk.DataPointType.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(([s,o])=>{let a=o.toPointValue(),u=t.type===hh.InstrumentType.UP_DOWN_COUNTER||t.type===hh.InstrumentType.OBSERVABLE_GAUGE||t.type===hh.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:s,startTime:o.startTime,endTime:i,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:u?void 0:a.sum,positive:{offset:a.positive.offset,bucketCounts:a.positive.bucketCounts},negative:{offset:a.negative.offset,bucketCounts:a.negative.bucketCounts},count:a.count,scale:a.scale,zeroCount:a.zeroCount}}})}}};Kn.ExponentialHistogramAggregator=mh});var IR=d(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.LastValueAggregator=zn.LastValueAccumulation=void 0;var Qk=Gn(),hs=J(),Zk=jn(),Xn=class{constructor(t,r=0,n=[0,0]){this.startTime=t,this._current=r,this.sampleTime=n}record(t){this._current=t,this.sampleTime=(0,hs.millisToHrTime)(Date.now())}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};zn.LastValueAccumulation=Xn;var Eh=class{constructor(){this.kind=Qk.AggregatorKind.LAST_VALUE}createAccumulation(t){return new Xn(t)}merge(t,r){let n=(0,hs.hrTimeToMicroseconds)(r.sampleTime)>=(0,hs.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new Xn(t.startTime,n.toPointValue(),n.sampleTime)}diff(t,r){let n=(0,hs.hrTimeToMicroseconds)(r.sampleTime)>=(0,hs.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new Xn(r.startTime,n.toPointValue(),n.sampleTime)}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:Zk.DataPointType.GAUGE,dataPoints:n.map(([s,o])=>({attributes:s,startTime:o.startTime,endTime:i,value:o.toPointValue()}))}}};zn.LastValueAggregator=Eh});var NR=d(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.SumAggregator=Qn.SumAccumulation=void 0;var Jk=Gn(),ej=jn(),ir=class{constructor(t,r,n=0,i=!1){this.startTime=t,this.monotonic=r,this._current=n,this.reset=i}record(t){this.monotonic&&t<0||(this._current+=t)}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};Qn.SumAccumulation=ir;var Sh=class{constructor(t){this.monotonic=t,this.kind=Jk.AggregatorKind.SUM}createAccumulation(t){return new ir(t,this.monotonic)}merge(t,r){let n=t.toPointValue(),i=r.toPointValue();return r.reset?new ir(r.startTime,this.monotonic,i,r.reset):new ir(t.startTime,this.monotonic,n+i)}diff(t,r){let n=t.toPointValue(),i=r.toPointValue();return this.monotonic&&n>i?new ir(r.startTime,this.monotonic,i,!0):new ir(r.startTime,this.monotonic,i-n)}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:ej.DataPointType.SUM,dataPoints:n.map(([s,o])=>({attributes:s,startTime:o.startTime,endTime:i,value:o.toPointValue()})),isMonotonic:this.monotonic}}};Qn.SumAggregator=Sh});var xR=d(dt=>{"use strict";var tj=dt&&dt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),gs=dt&&dt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tj(t,e,r)};Object.defineProperty(dt,"__esModule",{value:!0});gs(pR(),dt);gs(gR(),dt);gs(CR(),dt);gs(IR(),dt);gs(NR(),dt)});var ac=d(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.DefaultAggregation=Ae.ExponentialHistogramAggregation=Ae.ExplicitBucketHistogramAggregation=Ae.HistogramAggregation=Ae.LastValueAggregation=Ae.SumAggregation=Ae.DropAggregation=Ae.Aggregation=void 0;var rj=L(),kr=xR(),kt=Ut(),Ct=class{static Drop(){return LR}static Sum(){return wR}static LastValue(){return MR}static Histogram(){return DR}static ExponentialHistogram(){return nj}static Default(){return ij}};Ae.Aggregation=Ct;var ms=class e extends Ct{createAggregator(t){return e.DEFAULT_INSTANCE}};Ae.DropAggregation=ms;ms.DEFAULT_INSTANCE=new kr.DropAggregator;var Zn=class e extends Ct{createAggregator(t){switch(t.type){case kt.InstrumentType.COUNTER:case kt.InstrumentType.OBSERVABLE_COUNTER:case kt.InstrumentType.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}}};Ae.SumAggregation=Zn;Zn.MONOTONIC_INSTANCE=new kr.SumAggregator(!0);Zn.NON_MONOTONIC_INSTANCE=new kr.SumAggregator(!1);var Es=class e extends Ct{createAggregator(t){return e.DEFAULT_INSTANCE}};Ae.LastValueAggregation=Es;Es.DEFAULT_INSTANCE=new kr.LastValueAggregator;var Ss=class e extends Ct{createAggregator(t){return e.DEFAULT_INSTANCE}};Ae.HistogramAggregation=Ss;Ss.DEFAULT_INSTANCE=new kr.HistogramAggregator([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0);var ic=class extends Ct{constructor(t,r=!0){if(super(),this._recordMinMax=r,t===void 0||t.length===0)throw new Error("HistogramAggregator should be created with boundaries.");t=t.concat(),t=t.sort((s,o)=>s-o);let n=t.lastIndexOf(-1/0),i=t.indexOf(1/0);i===-1&&(i=void 0),this._boundaries=t.slice(n+1,i)}createAggregator(t){return new kr.HistogramAggregator(this._boundaries,this._recordMinMax)}};Ae.ExplicitBucketHistogramAggregation=ic;var sc=class extends Ct{constructor(t=160,r=!0){super(),this._maxSize=t,this._recordMinMax=r}createAggregator(t){return new kr.ExponentialHistogramAggregator(this._maxSize,this._recordMinMax)}};Ae.ExponentialHistogramAggregation=sc;var oc=class extends Ct{_resolve(t){switch(t.type){case kt.InstrumentType.COUNTER:case kt.InstrumentType.UP_DOWN_COUNTER:case kt.InstrumentType.OBSERVABLE_COUNTER:case kt.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return wR;case kt.InstrumentType.OBSERVABLE_GAUGE:return MR;case kt.InstrumentType.HISTOGRAM:return t.advice.explicitBucketBoundaries?new ic(t.advice.explicitBucketBoundaries):DR}return rj.diag.warn(`Unable to recognize instrument type: ${t.type}`),LR}createAggregator(t){return this._resolve(t).createAggregator(t)}};Ae.DefaultAggregation=oc;var LR=new ms,wR=new Zn,MR=new Es,DR=new Ss,nj=new sc,ij=new oc});var Ah=d(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=Jn.DEFAULT_AGGREGATION_SELECTOR=void 0;var sj=ac(),oj=Yu(),aj=e=>sj.Aggregation.Default();Jn.DEFAULT_AGGREGATION_SELECTOR=aj;var uj=e=>oj.AggregationTemporality.CUMULATIVE;Jn.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=uj});var yh=d(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.MetricReader=void 0;var BR=L(),uc=Pt(),FR=Ah(),Th=class{constructor(t){var r,n,i;this._shutdown=!1,this._aggregationSelector=(r=t?.aggregationSelector)!==null&&r!==void 0?r:FR.DEFAULT_AGGREGATION_SELECTOR,this._aggregationTemporalitySelector=(n=t?.aggregationTemporalitySelector)!==null&&n!==void 0?n:FR.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR,this._metricProducers=(i=t?.metricProducers)!==null&&i!==void 0?i:[]}setMetricProducer(t){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=t,this.onInitialized()}selectAggregation(t){return this._aggregationSelector(t)}selectAggregationTemporality(t){return this._aggregationTemporalitySelector(t)}onInitialized(){}async collect(t){if(this._sdkMetricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");let[r,...n]=await Promise.all([this._sdkMetricProducer.collect({timeoutMillis:t?.timeoutMillis}),...this._metricProducers.map(a=>a.collect({timeoutMillis:t?.timeoutMillis}))]),i=r.errors.concat((0,uc.FlatMap)(n,a=>a.errors)),s=r.resourceMetrics.resource,o=r.resourceMetrics.scopeMetrics.concat((0,uc.FlatMap)(n,a=>a.resourceMetrics.scopeMetrics));return{resourceMetrics:{resource:s,scopeMetrics:o},errors:i}}async shutdown(t){if(this._shutdown){BR.diag.error("Cannot call shutdown twice.");return}t?.timeoutMillis==null?await this.onShutdown():await(0,uc.callWithTimeout)(this.onShutdown(),t.timeoutMillis),this._shutdown=!0}async forceFlush(t){if(this._shutdown){BR.diag.warn("Cannot forceFlush on already shutdown MetricReader.");return}if(t?.timeoutMillis==null){await this.onForceFlush();return}await(0,uc.callWithTimeout)(this.onForceFlush(),t.timeoutMillis)}};cc.MetricReader=Th});var jR=d(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.PeriodicExportingMetricReader=void 0;var UR=L(),lc=J(),cj=yh(),kR=Pt(),lj=L(),bh=class extends cj.MetricReader{constructor(t){var r,n,i,s;if(super({aggregationSelector:(r=t.exporter.selectAggregation)===null||r===void 0?void 0:r.bind(t.exporter),aggregationTemporalitySelector:(n=t.exporter.selectAggregationTemporality)===null||n===void 0?void 0:n.bind(t.exporter),metricProducers:t.metricProducers}),t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=(i=t.exportIntervalMillis)!==null&&i!==void 0?i:6e4,this._exportTimeout=(s=t.exportTimeoutMillis)!==null&&s!==void 0?s:3e4,this._exporter=t.exporter}async _runOnce(){try{await(0,kR.callWithTimeout)(this._doRun(),this._exportTimeout)}catch(t){if(t instanceof kR.TimeoutError){UR.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);return}(0,lc.globalErrorHandler)(t)}}async _doRun(){var t,r;let{resourceMetrics:n,errors:i}=await this.collect({timeoutMillis:this._exportTimeout});i.length>0&&UR.diag.error("PeriodicExportingMetricReader: metrics collection errors",...i);let s=async()=>{let o=await lc.internal._export(this._exporter,n);if(o.code!==lc.ExportResultCode.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${o.error})`)};n.resource.asyncAttributesPending?(r=(t=n.resource).waitForAsyncAttributes)===null||r===void 0||r.call(t).then(s,o=>lj.diag.debug("Error while resolving async portion of resource: ",o)):await s()}onInitialized(){this._interval=setInterval(()=>{this._runOnce()},this._exportInterval),(0,lc.unrefTimer)(this._interval)}async onForceFlush(){await this._runOnce(),await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this._exporter.shutdown()}};dc.PeriodicExportingMetricReader=bh});var qR=d(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.InMemoryMetricExporter=void 0;var GR=J(),Rh=class{constructor(t){this._shutdown=!1,this._metrics=[],this._aggregationTemporality=t}export(t,r){if(this._shutdown){setTimeout(()=>r({code:GR.ExportResultCode.FAILED}),0);return}this._metrics.push(t),setTimeout(()=>r({code:GR.ExportResultCode.SUCCESS}),0)}getMetrics(){return this._metrics}forceFlush(){return Promise.resolve()}reset(){this._metrics=[]}selectAggregationTemporality(t){return this._aggregationTemporality}shutdown(){return this._shutdown=!0,Promise.resolve()}};fc.InMemoryMetricExporter=Rh});var $R=d(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.ConsoleMetricExporter=void 0;var HR=J(),dj=Ah(),Oh=class e{constructor(t){var r;this._shutdown=!1,this._temporalitySelector=(r=t?.temporalitySelector)!==null&&r!==void 0?r:dj.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR}export(t,r){if(this._shutdown){setImmediate(r,{code:HR.ExportResultCode.FAILED});return}return e._sendMetrics(t,r)}forceFlush(){return Promise.resolve()}selectAggregationTemporality(t){return this._temporalitySelector(t)}shutdown(){return this._shutdown=!0,Promise.resolve()}static _sendMetrics(t,r){for(let n of t.scopeMetrics)for(let i of n.metrics)console.dir({descriptor:i.descriptor,dataPointType:i.dataPointType,dataPoints:i.dataPoints});r({code:HR.ExportResultCode.SUCCESS})}};pc.ConsoleMetricExporter=Oh});var VR=d(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.ViewRegistry=void 0;var vh=class{constructor(){this._registeredViews=[]}addView(t){this._registeredViews.push(t)}findViews(t,r){return this._registeredViews.filter(i=>this._matchInstrument(i.instrumentSelector,t)&&this._matchMeter(i.meterSelector,r))}_matchInstrument(t,r){return(t.getType()===void 0||r.type===t.getType())&&t.getNameFilter().match(r.name)&&t.getUnitFilter().match(r.unit)}_matchMeter(t,r){return t.getNameFilter().match(r.name)&&(r.version===void 0||t.getVersionFilter().match(r.version))&&(r.schemaUrl===void 0||t.getSchemaUrlFilter().match(r.schemaUrl))}};_c.ViewRegistry=vh});var hc=d(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.isObservableInstrument=he.ObservableUpDownCounterInstrument=he.ObservableGaugeInstrument=he.ObservableCounterInstrument=he.ObservableInstrument=he.HistogramInstrument=he.CounterInstrument=he.UpDownCounterInstrument=he.SyncInstrument=void 0;var ei=L(),fj=J(),ti=class{constructor(t,r){this._writableMetricStorage=t,this._descriptor=r}_record(t,r={},n=ei.context.active()){if(typeof t!="number"){ei.diag.warn(`non-number value provided to metric ${this._descriptor.name}: ${t}`);return}this._descriptor.valueType===ei.ValueType.INT&&!Number.isInteger(t)&&(ei.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t),!Number.isInteger(t))||this._writableMetricStorage.record(t,r,n,(0,fj.millisToHrTime)(Date.now()))}};he.SyncInstrument=ti;var Ph=class extends ti{add(t,r,n){this._record(t,r,n)}};he.UpDownCounterInstrument=Ph;var Ch=class extends ti{add(t,r,n){if(t<0){ei.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};he.CounterInstrument=Ch;var Ih=class extends ti{record(t,r,n){if(t<0){ei.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};he.HistogramInstrument=Ih;var jr=class{constructor(t,r,n){this._observableRegistry=n,this._descriptor=t,this._metricStorages=r}addCallback(t){this._observableRegistry.addCallback(t,this)}removeCallback(t){this._observableRegistry.removeCallback(t,this)}};he.ObservableInstrument=jr;var Nh=class extends jr{};he.ObservableCounterInstrument=Nh;var xh=class extends jr{};he.ObservableGaugeInstrument=xh;var Lh=class extends jr{};he.ObservableUpDownCounterInstrument=Lh;function pj(e){return e instanceof jr}he.isObservableInstrument=pj});var WR=d(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.Meter=void 0;var st=Ut(),ri=hc(),wh=class{constructor(t){this._meterSharedState=t}createHistogram(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.HISTOGRAM,r),i=this._meterSharedState.registerMetricStorage(n);return new ri.HistogramInstrument(i,n)}createCounter(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new ri.CounterInstrument(i,n)}createUpDownCounter(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.UP_DOWN_COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new ri.UpDownCounterInstrument(i,n)}createObservableGauge(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.OBSERVABLE_GAUGE,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ri.ObservableGaugeInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableCounter(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.OBSERVABLE_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ri.ObservableCounterInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ri.ObservableUpDownCounterInstrument(n,i,this._meterSharedState.observableRegistry)}addBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.addBatchCallback(t,r)}removeBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.removeBatchCallback(t,r)}};gc.Meter=wh});var Dh=d(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.MetricStorage=void 0;var _j=Ut(),Mh=class{constructor(t){this._instrumentDescriptor=t}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(t){this._instrumentDescriptor=(0,_j.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})}};mc.MetricStorage=Mh});var As=d(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.AttributeHashMap=ni.HashMap=void 0;var hj=Pt(),Ec=class{constructor(t){this._hash=t,this._valueMap=new Map,this._keyMap=new Map}get(t,r){return r??(r=this._hash(t)),this._valueMap.get(r)}getOrDefault(t,r){let n=this._hash(t);if(this._valueMap.has(n))return this._valueMap.get(n);let i=r();return this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,i),i}set(t,r,n){n??(n=this._hash(t)),this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,r)}has(t,r){return r??(r=this._hash(t)),this._valueMap.has(r)}*keys(){let t=this._keyMap.entries(),r=t.next();for(;r.done!==!0;)yield[r.value[1],r.value[0]],r=t.next()}*entries(){let t=this._valueMap.entries(),r=t.next();for(;r.done!==!0;)yield[this._keyMap.get(r.value[0]),r.value[1],r.value[0]],r=t.next()}get size(){return this._valueMap.size}};ni.HashMap=Ec;var Bh=class extends Ec{constructor(){super(hj.hashAttributes)}};ni.AttributeHashMap=Bh});var kh=d(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.DeltaMetricProcessor=void 0;var Fh=As(),Uh=class{constructor(t){this._aggregator=t,this._activeCollectionStorage=new Fh.AttributeHashMap,this._cumulativeMemoStorage=new Fh.AttributeHashMap}record(t,r,n,i){let s=this._activeCollectionStorage.getOrDefault(r,()=>this._aggregator.createAccumulation(i));s?.record(t)}batchCumulate(t,r){Array.from(t.entries()).forEach(([n,i,s])=>{let o=this._aggregator.createAccumulation(r);o?.record(i);let a=o;if(this._cumulativeMemoStorage.has(n,s)){let u=this._cumulativeMemoStorage.get(n,s);a=this._aggregator.diff(u,o)}if(this._activeCollectionStorage.has(n,s)){let u=this._activeCollectionStorage.get(n,s);a=this._aggregator.merge(u,a)}this._cumulativeMemoStorage.set(n,o,s),this._activeCollectionStorage.set(n,a,s)})}collect(){let t=this._activeCollectionStorage;return this._activeCollectionStorage=new Fh.AttributeHashMap,t}};Sc.DeltaMetricProcessor=Uh});var Gh=d(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.TemporalMetricProcessor=void 0;var gj=Yu(),mj=As(),jh=class e{constructor(t,r){this._aggregator=t,this._unreportedAccumulations=new Map,this._reportHistory=new Map,r.forEach(n=>{this._unreportedAccumulations.set(n,[])})}buildMetrics(t,r,n,i){this._stashAccumulations(n);let s=this._getMergedUnreportedAccumulations(t),o=s,a;if(this._reportHistory.has(t)){let c=this._reportHistory.get(t),l=c.collectionTime;a=c.aggregationTemporality,a===gj.AggregationTemporality.CUMULATIVE?o=e.merge(c.accumulations,s,this._aggregator):o=e.calibrateStartTime(c.accumulations,s,l)}else a=t.selectAggregationTemporality(r.type);this._reportHistory.set(t,{accumulations:o,collectionTime:i,aggregationTemporality:a});let u=Ej(o);if(u.length!==0)return this._aggregator.toMetricData(r,a,u,i)}_stashAccumulations(t){let r=this._unreportedAccumulations.keys();for(let n of r){let i=this._unreportedAccumulations.get(n);i===void 0&&(i=[],this._unreportedAccumulations.set(n,i)),i.push(t)}}_getMergedUnreportedAccumulations(t){let r=new mj.AttributeHashMap,n=this._unreportedAccumulations.get(t);if(this._unreportedAccumulations.set(t,[]),n===void 0)return r;for(let i of n)r=e.merge(r,i,this._aggregator);return r}static merge(t,r,n){let i=t,s=r.entries(),o=s.next();for(;o.done!==!0;){let[a,u,c]=o.value;if(t.has(a,c)){let l=t.get(a,c),f=n.merge(l,u);i.set(a,f,c)}else i.set(a,u,c);o=s.next()}return i}static calibrateStartTime(t,r,n){for(let[i,s]of t.keys()){let o=r.get(i,s);o?.setStartTime(n)}return r}};Ac.TemporalMetricProcessor=jh;function Ej(e){return Array.from(e.entries())}});var YR=d(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.AsyncMetricStorage=void 0;var Sj=Dh(),Aj=kh(),Tj=Gh(),yj=As(),qh=class extends Sj.MetricStorage{constructor(t,r,n,i){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new Aj.DeltaMetricProcessor(r),this._temporalMetricStorage=new Tj.TemporalMetricProcessor(r,i)}record(t,r){let n=new yj.AttributeHashMap;Array.from(t.entries()).forEach(([i,s])=>{n.set(this._attributesProcessor.process(i),s)}),this._deltaMetricStorage.batchCumulate(n,r)}collect(t,r){let n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,r)}};Tc.AsyncMetricStorage=qh});var ZR=d(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.getConflictResolutionRecipe=He.getDescriptionResolutionRecipe=He.getTypeConflictResolutionRecipe=He.getUnitConflictResolutionRecipe=He.getValueTypeConflictResolutionRecipe=He.getIncompatibilityDetails=void 0;function bj(e,t){let r="";return e.unit!==t.unit&&(r+=`	- Unit '${e.unit}' does not match '${t.unit}'
`),e.type!==t.type&&(r+=`	- Type '${e.type}' does not match '${t.type}'
`),e.valueType!==t.valueType&&(r+=`	- Value Type '${e.valueType}' does not match '${t.valueType}'
`),e.description!==t.description&&(r+=`	- Description '${e.description}' does not match '${t.description}'
`),r}He.getIncompatibilityDetails=bj;function KR(e,t){return`	- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}He.getValueTypeConflictResolutionRecipe=KR;function XR(e,t){return`	- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}He.getUnitConflictResolutionRecipe=XR;function zR(e,t){let r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}He.getTypeConflictResolutionRecipe=zR;function QR(e,t){let r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'
    	- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}
    	- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}He.getDescriptionResolutionRecipe=QR;function Rj(e,t){return e.valueType!==t.valueType?KR(e,t):e.unit!==t.unit?XR(e,t):e.type!==t.type?zR(e,t):e.description!==t.description?QR(e,t):""}He.getConflictResolutionRecipe=Rj});var eO=d(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.MetricStorageRegistry=void 0;var Oj=Ut(),JR=L(),yc=ZR(),Hh=class e{constructor(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}static create(){return new e}getStorages(t){let r=[];for(let i of this._sharedRegistry.values())r=r.concat(i);let n=this._perCollectorRegistry.get(t);if(n!=null)for(let i of n.values())r=r.concat(i);return r}register(t){this._registerStorage(t,this._sharedRegistry)}registerForCollector(t,r){let n=this._perCollectorRegistry.get(t);n==null&&(n=new Map,this._perCollectorRegistry.set(t,n)),this._registerStorage(r,n)}findOrUpdateCompatibleStorage(t){let r=this._sharedRegistry.get(t.name);return r===void 0?null:this._findOrUpdateCompatibleStorage(t,r)}findOrUpdateCompatibleCollectorStorage(t,r){let n=this._perCollectorRegistry.get(t);if(n===void 0)return null;let i=n.get(r.name);return i===void 0?null:this._findOrUpdateCompatibleStorage(r,i)}_registerStorage(t,r){let n=t.getInstrumentDescriptor(),i=r.get(n.name);if(i===void 0){r.set(n.name,[t]);return}i.push(t)}_findOrUpdateCompatibleStorage(t,r){let n=null;for(let i of r){let s=i.getInstrumentDescriptor();(0,Oj.isDescriptorCompatibleWith)(s,t)?(s.description!==t.description&&(t.description.length>s.description.length&&i.updateDescription(t.description),JR.diag.warn("A view or instrument with the name ",t.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,(0,yc.getIncompatibilityDetails)(s,t),`The longer description will be used.
To resolve the conflict:`,(0,yc.getConflictResolutionRecipe)(s,t))),n=i):JR.diag.warn("A view or instrument with the name ",t.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,(0,yc.getIncompatibilityDetails)(s,t),`To resolve the conflict:
`,(0,yc.getConflictResolutionRecipe)(s,t))}return n}};bc.MetricStorageRegistry=Hh});var tO=d(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.MultiMetricStorage=void 0;var $h=class{constructor(t){this._backingStorages=t}record(t,r,n,i){this._backingStorages.forEach(s=>{s.record(t,r,n,i)})}};Rc.MultiMetricStorage=$h});var nO=d(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.BatchObservableResultImpl=si.ObservableResultImpl=void 0;var ii=L(),rO=As(),vj=hc(),Vh=class{constructor(t,r){this._instrumentName=t,this._valueType=r,this._buffer=new rO.AttributeHashMap}observe(t,r={}){if(typeof t!="number"){ii.diag.warn(`non-number value provided to metric ${this._instrumentName}: ${t}`);return}this._valueType===ii.ValueType.INT&&!Number.isInteger(t)&&(ii.diag.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`),t=Math.trunc(t),!Number.isInteger(t))||this._buffer.set(r,t)}};si.ObservableResultImpl=Vh;var Wh=class{constructor(){this._buffer=new Map}observe(t,r,n={}){if(!(0,vj.isObservableInstrument)(t))return;let i=this._buffer.get(t);if(i==null&&(i=new rO.AttributeHashMap,this._buffer.set(t,i)),typeof r!="number"){ii.diag.warn(`non-number value provided to metric ${t._descriptor.name}: ${r}`);return}t._descriptor.valueType===ii.ValueType.INT&&!Number.isInteger(r)&&(ii.diag.warn(`INT value type cannot accept a floating-point value for ${t._descriptor.name}, ignoring the fractional digits.`),r=Math.trunc(r),!Number.isInteger(r))||i.set(n,r)}};si.BatchObservableResultImpl=Wh});var oO=d(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.ObservableRegistry=void 0;var Pj=L(),iO=hc(),sO=nO(),Ts=Pt(),Yh=class{constructor(){this._callbacks=[],this._batchCallbacks=[]}addCallback(t,r){this._findCallback(t,r)>=0||this._callbacks.push({callback:t,instrument:r})}removeCallback(t,r){let n=this._findCallback(t,r);n<0||this._callbacks.splice(n,1)}addBatchCallback(t,r){let n=new Set(r.filter(iO.isObservableInstrument));if(n.size===0){Pj.diag.error("BatchObservableCallback is not associated with valid instruments",r);return}this._findBatchCallback(t,n)>=0||this._batchCallbacks.push({callback:t,instruments:n})}removeBatchCallback(t,r){let n=new Set(r.filter(iO.isObservableInstrument)),i=this._findBatchCallback(t,n);i<0||this._batchCallbacks.splice(i,1)}async observe(t,r){let n=this._observeCallbacks(t,r),i=this._observeBatchCallbacks(t,r);return(await(0,Ts.PromiseAllSettled)([...n,...i])).filter(Ts.isPromiseAllSettledRejectionResult).map(a=>a.reason)}_observeCallbacks(t,r){return this._callbacks.map(async({callback:n,instrument:i})=>{let s=new sO.ObservableResultImpl(i._descriptor.name,i._descriptor.valueType),o=Promise.resolve(n(s));r!=null&&(o=(0,Ts.callWithTimeout)(o,r)),await o,i._metricStorages.forEach(a=>{a.record(s._buffer,t)})})}_observeBatchCallbacks(t,r){return this._batchCallbacks.map(async({callback:n,instruments:i})=>{let s=new sO.BatchObservableResultImpl,o=Promise.resolve(n(s));r!=null&&(o=(0,Ts.callWithTimeout)(o,r)),await o,i.forEach(a=>{let u=s._buffer.get(a);u!=null&&a._metricStorages.forEach(c=>{c.record(u,t)})})})}_findCallback(t,r){return this._callbacks.findIndex(n=>n.callback===t&&n.instrument===r)}_findBatchCallback(t,r){return this._batchCallbacks.findIndex(n=>n.callback===t&&(0,Ts.setEquals)(n.instruments,r))}};Oc.ObservableRegistry=Yh});var aO=d(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.SyncMetricStorage=void 0;var Cj=Dh(),Ij=kh(),Nj=Gh(),Kh=class extends Cj.MetricStorage{constructor(t,r,n,i){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new Ij.DeltaMetricProcessor(r),this._temporalMetricStorage=new Nj.TemporalMetricProcessor(r,i)}record(t,r,n,i){r=this._attributesProcessor.process(r,n),this._deltaMetricStorage.record(t,r,n,i)}collect(t,r){let n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,r)}};vc.SyncMetricStorage=Kh});var zh=d(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.FilteringAttributesProcessor=sr.NoopAttributesProcessor=sr.AttributesProcessor=void 0;var ys=class{static Noop(){return xj}};sr.AttributesProcessor=ys;var Pc=class extends ys{process(t,r){return t}};sr.NoopAttributesProcessor=Pc;var Xh=class extends ys{constructor(t){super(),this._allowedAttributeNames=t}process(t,r){let n={};return Object.keys(t).filter(i=>this._allowedAttributeNames.includes(i)).forEach(i=>n[i]=t[i]),n}};sr.FilteringAttributesProcessor=Xh;var xj=new Pc});var uO=d(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.MeterSharedState=void 0;var Lj=Ut(),wj=WR(),Mj=Pt(),Dj=YR(),Bj=eO(),Fj=tO(),Uj=oO(),kj=aO(),jj=zh(),Qh=class{constructor(t,r){this._meterProviderSharedState=t,this._instrumentationScope=r,this.metricStorageRegistry=new Bj.MetricStorageRegistry,this.observableRegistry=new Uj.ObservableRegistry,this.meter=new wj.Meter(this)}registerMetricStorage(t){let r=this._registerMetricStorage(t,kj.SyncMetricStorage);return r.length===1?r[0]:new Fj.MultiMetricStorage(r)}registerAsyncMetricStorage(t){return this._registerMetricStorage(t,Dj.AsyncMetricStorage)}async collect(t,r,n){let i=await this.observableRegistry.observe(r,n?.timeoutMillis),s=this.metricStorageRegistry.getStorages(t);if(s.length===0)return null;let o=s.map(a=>a.collect(t,r)).filter(Mj.isNotNullish);return o.length===0?{errors:i}:{scopeMetrics:{scope:this._instrumentationScope,metrics:o},errors:i}}_registerMetricStorage(t,r){let i=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(s=>{let o=(0,Lj.createInstrumentDescriptorWithView)(s,t),a=this.metricStorageRegistry.findOrUpdateCompatibleStorage(o);if(a!=null)return a;let u=s.aggregation.createAggregator(o),c=new r(o,u,s.attributesProcessor,this._meterProviderSharedState.metricCollectors);return this.metricStorageRegistry.register(c),c});if(i.length===0){let o=this._meterProviderSharedState.selectAggregations(t.type).map(([a,u])=>{let c=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(a,t);if(c!=null)return c;let l=u.createAggregator(t),f=new r(t,l,jj.AttributesProcessor.Noop(),[a]);return this.metricStorageRegistry.registerForCollector(a,f),f});i=i.concat(o)}return i}};Cc.MeterSharedState=Qh});var cO=d(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.MeterProviderSharedState=void 0;var Gj=Pt(),qj=VR(),Hj=uO(),Zh=class{constructor(t){this.resource=t,this.viewRegistry=new qj.ViewRegistry,this.metricCollectors=[],this.meterSharedStates=new Map}getMeterSharedState(t){let r=(0,Gj.instrumentationScopeId)(t),n=this.meterSharedStates.get(r);return n==null&&(n=new Hj.MeterSharedState(this,t),this.meterSharedStates.set(r,n)),n}selectAggregations(t){let r=[];for(let n of this.metricCollectors)r.push([n,n.selectAggregation(t)]);return r}};Ic.MeterProviderSharedState=Zh});var lO=d(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.MetricCollector=void 0;var $j=J(),Jh=class{constructor(t,r){this._sharedState=t,this._metricReader=r}async collect(t){let r=(0,$j.millisToHrTime)(Date.now()),n=[],i=[],s=Array.from(this._sharedState.meterSharedStates.values()).map(async o=>{let a=await o.collect(this,r,t);a?.scopeMetrics!=null&&n.push(a.scopeMetrics),a?.errors!=null&&i.push(...a.errors)});return await Promise.all(s),{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:i}}async forceFlush(t){await this._metricReader.forceFlush(t)}async shutdown(t){await this._metricReader.shutdown(t)}selectAggregationTemporality(t){return this._metricReader.selectAggregationTemporality(t)}selectAggregation(t){return this._metricReader.selectAggregation(t)}};Nc.MetricCollector=Jh});var fO=d(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.MeterProvider=void 0;var xc=L(),dO=In(),Vj=cO(),Wj=lO(),eg=class{constructor(t){var r;this._shutdown=!1;let n=dO.Resource.default().merge((r=t?.resource)!==null&&r!==void 0?r:dO.Resource.empty());if(this._sharedState=new Vj.MeterProviderSharedState(n),t?.views!=null&&t.views.length>0)for(let i of t.views)this._sharedState.viewRegistry.addView(i);if(t?.readers!=null&&t.readers.length>0)for(let i of t.readers)this.addMetricReader(i)}getMeter(t,r="",n={}){return this._shutdown?(xc.diag.warn("A shutdown MeterProvider cannot provide a Meter"),(0,xc.createNoopMeter)()):this._sharedState.getMeterSharedState({name:t,version:r,schemaUrl:n.schemaUrl}).meter}addMetricReader(t){let r=new Wj.MetricCollector(this._sharedState,t);t.setMetricProducer(r),this._sharedState.metricCollectors.push(r)}async shutdown(t){if(this._shutdown){xc.diag.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map(r=>r.shutdown(t)))}async forceFlush(t){if(this._shutdown){xc.diag.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map(r=>r.forceFlush(t)))}};Lc.MeterProvider=eg});var wc=d(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.ExactPredicate=oi.PatternPredicate=void 0;var Yj=/[\^$\\.+?()[\]{}|]/g,tg=class e{constructor(t){t==="*"?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(e.escapePattern(t)))}match(t){return this._matchAll?!0:this._regexp.test(t)}static escapePattern(t){return`^${t.replace(Yj,"\\$&").replace("*",".*")}$`}static hasWildcard(t){return t.includes("*")}};oi.PatternPredicate=tg;var rg=class{constructor(t){this._matchAll=t===void 0,this._pattern=t}match(t){return!!(this._matchAll||t===this._pattern)}};oi.ExactPredicate=rg});var _O=d(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.InstrumentSelector=void 0;var pO=wc(),ng=class{constructor(t){var r;this._nameFilter=new pO.PatternPredicate((r=t?.name)!==null&&r!==void 0?r:"*"),this._type=t?.type,this._unitFilter=new pO.ExactPredicate(t?.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}};Mc.InstrumentSelector=ng});var hO=d(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.MeterSelector=void 0;var ig=wc(),sg=class{constructor(t){this._nameFilter=new ig.ExactPredicate(t?.name),this._versionFilter=new ig.ExactPredicate(t?.version),this._schemaUrlFilter=new ig.ExactPredicate(t?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}};Dc.MeterSelector=sg});var mO=d(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.View=void 0;var Kj=wc(),gO=zh(),Xj=_O(),zj=hO(),Qj=ac();function Zj(e){return e.instrumentName==null&&e.instrumentType==null&&e.instrumentUnit==null&&e.meterName==null&&e.meterVersion==null&&e.meterSchemaUrl==null}var og=class{constructor(t){var r;if(Zj(t))throw new Error("Cannot create view with no selector arguments supplied");if(t.name!=null&&(t?.instrumentName==null||Kj.PatternPredicate.hasWildcard(t.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");t.attributeKeys!=null?this.attributesProcessor=new gO.FilteringAttributesProcessor(t.attributeKeys):this.attributesProcessor=gO.AttributesProcessor.Noop(),this.name=t.name,this.description=t.description,this.aggregation=(r=t.aggregation)!==null&&r!==void 0?r:Qj.Aggregation.Default(),this.instrumentSelector=new Xj.InstrumentSelector({name:t.instrumentName,type:t.instrumentType,unit:t.instrumentUnit}),this.meterSelector=new zj.MeterSelector({name:t.meterName,version:t.meterVersion,schemaUrl:t.meterSchemaUrl})}};Bc.View=og});var EO=d(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.TimeoutError=q.View=q.Aggregation=q.SumAggregation=q.LastValueAggregation=q.HistogramAggregation=q.DropAggregation=q.ExponentialHistogramAggregation=q.ExplicitBucketHistogramAggregation=q.DefaultAggregation=q.MeterProvider=q.InstrumentType=q.ConsoleMetricExporter=q.InMemoryMetricExporter=q.PeriodicExportingMetricReader=q.MetricReader=q.DataPointType=q.AggregationTemporality=void 0;var Jj=Yu();Object.defineProperty(q,"AggregationTemporality",{enumerable:!0,get:function(){return Jj.AggregationTemporality}});var eG=jn();Object.defineProperty(q,"DataPointType",{enumerable:!0,get:function(){return eG.DataPointType}});var tG=yh();Object.defineProperty(q,"MetricReader",{enumerable:!0,get:function(){return tG.MetricReader}});var rG=jR();Object.defineProperty(q,"PeriodicExportingMetricReader",{enumerable:!0,get:function(){return rG.PeriodicExportingMetricReader}});var nG=qR();Object.defineProperty(q,"InMemoryMetricExporter",{enumerable:!0,get:function(){return nG.InMemoryMetricExporter}});var iG=$R();Object.defineProperty(q,"ConsoleMetricExporter",{enumerable:!0,get:function(){return iG.ConsoleMetricExporter}});var sG=Ut();Object.defineProperty(q,"InstrumentType",{enumerable:!0,get:function(){return sG.InstrumentType}});var oG=fO();Object.defineProperty(q,"MeterProvider",{enumerable:!0,get:function(){return oG.MeterProvider}});var or=ac();Object.defineProperty(q,"DefaultAggregation",{enumerable:!0,get:function(){return or.DefaultAggregation}});Object.defineProperty(q,"ExplicitBucketHistogramAggregation",{enumerable:!0,get:function(){return or.ExplicitBucketHistogramAggregation}});Object.defineProperty(q,"ExponentialHistogramAggregation",{enumerable:!0,get:function(){return or.ExponentialHistogramAggregation}});Object.defineProperty(q,"DropAggregation",{enumerable:!0,get:function(){return or.DropAggregation}});Object.defineProperty(q,"HistogramAggregation",{enumerable:!0,get:function(){return or.HistogramAggregation}});Object.defineProperty(q,"LastValueAggregation",{enumerable:!0,get:function(){return or.LastValueAggregation}});Object.defineProperty(q,"SumAggregation",{enumerable:!0,get:function(){return or.SumAggregation}});Object.defineProperty(q,"Aggregation",{enumerable:!0,get:function(){return or.Aggregation}});var aG=mO();Object.defineProperty(q,"View",{enumerable:!0,get:function(){return aG.View}});var uG=Pt();Object.defineProperty(q,"TimeoutError",{enumerable:!0,get:function(){return uG.TimeoutError}})});var bO=d(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.toMetric=ar.toScopeMetrics=ar.toResourceMetrics=void 0;var SO=L(),ai=EO(),Fc=ds(),cG=cs();function lG(e,t){let r=(0,cG.getOtlpEncoder)(t);return{resource:{attributes:(0,Fc.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:TO(e.scopeMetrics,r)}}ar.toResourceMetrics=lG;function TO(e,t){return Array.from(e.map(r=>({scope:{name:r.scope.name,version:r.scope.version},metrics:r.metrics.map(n=>yO(n,t)),schemaUrl:r.scope.schemaUrl})))}ar.toScopeMetrics=TO;function yO(e,t){let r={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},n=_G(e.aggregationTemporality);switch(e.dataPointType){case ai.DataPointType.SUM:r.sum={aggregationTemporality:n,isMonotonic:e.isMonotonic,dataPoints:AO(e,t)};break;case ai.DataPointType.GAUGE:r.gauge={dataPoints:AO(e,t)};break;case ai.DataPointType.HISTOGRAM:r.histogram={aggregationTemporality:n,dataPoints:fG(e,t)};break;case ai.DataPointType.EXPONENTIAL_HISTOGRAM:r.exponentialHistogram={aggregationTemporality:n,dataPoints:pG(e,t)};break}return r}ar.toMetric=yO;function dG(e,t,r){let n={attributes:(0,Fc.toAttributes)(e.attributes),startTimeUnixNano:r.encodeHrTime(e.startTime),timeUnixNano:r.encodeHrTime(e.endTime)};switch(t){case SO.ValueType.INT:n.asInt=e.value;break;case SO.ValueType.DOUBLE:n.asDouble=e.value;break}return n}function AO(e,t){return e.dataPoints.map(r=>dG(r,e.descriptor.valueType,t))}function fG(e,t){return e.dataPoints.map(r=>{let n=r.value;return{attributes:(0,Fc.toAttributes)(r.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)}})}function pG(e,t){return e.dataPoints.map(r=>{let n=r.value;return{attributes:(0,Fc.toAttributes)(r.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)}})}function _G(e){switch(e){case ai.AggregationTemporality.DELTA:return 1;case ai.AggregationTemporality.CUMULATIVE:return 2}}});var RO=d(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.createExportMetricsServiceRequest=void 0;var hG=bO();function gG(e,t){return{resourceMetrics:e.map(r=>(0,hG.toResourceMetrics)(r,t))}}Uc.createExportMetricsServiceRequest=gG});var vO=d(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.toLogAttributes=ui.createExportLogsServiceRequest=void 0;var mG=cs(),ag=ds();function EG(e,t){let r=(0,mG.getOtlpEncoder)(t);return{resourceLogs:AG(e,r)}}ui.createExportLogsServiceRequest=EG;function SG(e){let t=new Map;for(let r of e){let{resource:n,instrumentationScope:{name:i,version:s="",schemaUrl:o=""}}=r,a=t.get(n);a||(a=new Map,t.set(n,a));let u=`${i}@${s}:${o}`,c=a.get(u);c||(c=[],a.set(u,c)),c.push(r)}return t}function AG(e,t){let r=SG(e);return Array.from(r,([n,i])=>({resource:{attributes:(0,ag.toAttributes)(n.attributes),droppedAttributesCount:0},scopeLogs:Array.from(i,([,s])=>{let{instrumentationScope:{name:o,version:a,schemaUrl:u}}=s[0];return{scope:{name:o,version:a},logRecords:s.map(c=>TG(c,t)),schemaUrl:u}}),schemaUrl:void 0}))}function TG(e,t){var r,n,i;return{timeUnixNano:t.encodeHrTime(e.hrTime),observedTimeUnixNano:t.encodeHrTime(e.hrTimeObserved),severityNumber:e.severityNumber,severityText:e.severityText,body:(0,ag.toAnyValue)(e.body),attributes:OO(e.attributes),droppedAttributesCount:e.droppedAttributesCount,flags:(r=e.spanContext)===null||r===void 0?void 0:r.traceFlags,traceId:t.encodeOptionalSpanContext((n=e.spanContext)===null||n===void 0?void 0:n.traceId),spanId:t.encodeOptionalSpanContext((i=e.spanContext)===null||i===void 0?void 0:i.spanId)}}function OO(e){return Object.keys(e).map(t=>(0,ag.toKeyValue)(t,e[t]))}ui.toLogAttributes=OO});var PO=d(Te=>{"use strict";var yG=Te&&Te.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ci=Te&&Te.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&yG(t,e,r)};Object.defineProperty(Te,"__esModule",{value:!0});Te.createExportLogsServiceRequest=Te.createExportMetricsServiceRequest=Te.createExportTraceServiceRequest=void 0;ci(Qb(),Te);ci(cs(),Te);ci(nR(),Te);ci(sR(),Te);ci(oR(),Te);ci(uR(),Te);var bG=fR();Object.defineProperty(Te,"createExportTraceServiceRequest",{enumerable:!0,get:function(){return bG.createExportTraceServiceRequest}});var RG=RO();Object.defineProperty(Te,"createExportMetricsServiceRequest",{enumerable:!0,get:function(){return RG.createExportMetricsServiceRequest}});var OG=vO();Object.defineProperty(Te,"createExportLogsServiceRequest",{enumerable:!0,get:function(){return OG.createExportLogsServiceRequest}})});var CO=d(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.VERSION=void 0;kc.VERSION="0.48.0"});var xO=d(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.OTLPTraceExporter=void 0;var li=J(),vG=J_(),IO=J_(),PG=PO(),CG=CO(),NO="v1/traces",IG=`http://localhost:4318/${NO}`,NG={"User-Agent":`OTel-OTLP-Exporter-JavaScript/${CG.VERSION}`},ug=class extends vG.OTLPExporterNodeBase{constructor(t={}){super(t),this.headers=Object.assign(Object.assign(Object.assign(Object.assign({},this.headers),NG),li.baggageUtils.parseKeyPairsIntoRecord((0,li.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),t.headers)}convert(t){return(0,PG.createExportTraceServiceRequest)(t,{useHex:!0,useLongBits:!1})}getDefaultUrl(t){return typeof t.url=="string"?t.url:(0,li.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,IO.appendRootPathToUrlIfNeeded)((0,li.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,li.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,IO.appendResourcePathToUrl)((0,li.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,NO):IG}};jc.OTLPTraceExporter=ug});var LO=d(Gr=>{"use strict";var xG=Gr&&Gr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),LG=Gr&&Gr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&xG(t,e,r)};Object.defineProperty(Gr,"__esModule",{value:!0});LG(xO(),Gr)});var wO=d(qr=>{"use strict";var wG=qr&&qr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),MG=qr&&qr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wG(t,e,r)};Object.defineProperty(qr,"__esModule",{value:!0});MG(LO(),qr)});var MO=d(Hr=>{"use strict";var DG=Hr&&Hr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),BG=Hr&&Hr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&DG(t,e,r)};Object.defineProperty(Hr,"__esModule",{value:!0});BG(wO(),Hr)});var cv=d((Wr,uv)=>{"use strict";var mg=v("crypto");Wr=uv.exports=Cs;function Cs(e,t){return t=ov(e,t),oq(e,t)}Wr.sha1=function(e){return Cs(e)};Wr.keys=function(e){return Cs(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})};Wr.MD5=function(e){return Cs(e,{algorithm:"md5",encoding:"hex"})};Wr.keysMD5=function(e){return Cs(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var hi=mg.getHashes?mg.getHashes().slice():["sha1","md5"];hi.push("passthrough");var iv=["buffer","hex","binary","base64"];function ov(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=t.ignoreUnknown===!0,r.respectType=t.respectType!==!1,r.respectFunctionNames=t.respectFunctionNames!==!1,r.respectFunctionProperties=t.respectFunctionProperties!==!1,r.unorderedArrays=t.unorderedArrays===!0,r.unorderedSets=t.unorderedSets!==!1,r.unorderedObjects=t.unorderedObjects!==!1,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,typeof e>"u")throw new Error("Object argument required.");for(var n=0;n<hi.length;++n)hi[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=hi[n]);if(hi.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+hi.join(", "));if(iv.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+iv.join(", "));return r}function sv(e){if(typeof e!="function")return!1;var t=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i;return t.exec(Function.prototype.toString.call(e))!=null}function oq(e,t){var r;t.algorithm!=="passthrough"?r=mg.createHash(t.algorithm):r=new av,typeof r.write>"u"&&(r.write=r.update,r.end=r.update);var n=Eg(t,r);if(n.dispatch(e),r.update||r.end(""),r.digest)return r.digest(t.encoding==="buffer"?void 0:t.encoding);var i=r.read();return t.encoding==="buffer"?i:i.toString(t.encoding)}Wr.writeToStream=function(e,t,r){return typeof r>"u"&&(r=t,t={}),t=ov(e,t),Eg(t,r).dispatch(e)};function Eg(e,t,r){r=r||[];var n=function(i){return t.update?t.update(i,"utf8"):t.write(i,"utf8")};return{dispatch:function(i){e.replacer&&(i=e.replacer(i));var s=typeof i;return i===null&&(s="null"),this["_"+s](i)},_object:function(i){var s=/\[object (.*)\]/i,o=Object.prototype.toString.call(i),a=s.exec(o);a?a=a[1]:a="unknown:["+o+"]",a=a.toLowerCase();var u=null;if((u=r.indexOf(i))>=0)return this.dispatch("[CIRCULAR:"+u+"]");if(r.push(i),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(i))return n("buffer:"),n(i);if(a!=="object"&&a!=="function"&&a!=="asyncfunction")if(this["_"+a])this["_"+a](i);else{if(e.ignoreUnknown)return n("["+a+"]");throw new Error('Unknown object type "'+a+'"')}else{var c=Object.keys(i);e.unorderedObjects&&(c=c.sort()),e.respectType!==!1&&!sv(i)&&c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter(function(f){return!e.excludeKeys(f)})),n("object:"+c.length+":");var l=this;return c.forEach(function(f){l.dispatch(f),n(":"),e.excludeValues||l.dispatch(i[f]),n(",")})}},_array:function(i,s){s=typeof s<"u"?s:e.unorderedArrays!==!1;var o=this;if(n("array:"+i.length+":"),!s||i.length<=1)return i.forEach(function(c){return o.dispatch(c)});var a=[],u=i.map(function(c){var l=new av,f=r.slice(),p=Eg(e,l,f);return p.dispatch(c),a=a.concat(f.slice(r.length)),l.read().toString()});return r=r.concat(a),u.sort(),this._array(u,!1)},_date:function(i){return n("date:"+i.toJSON())},_symbol:function(i){return n("symbol:"+i.toString())},_error:function(i){return n("error:"+i.toString())},_boolean:function(i){return n("bool:"+i.toString())},_string:function(i){n("string:"+i.length+":"),n(i.toString())},_function:function(i){n("fn:"),sv(i)?this.dispatch("[native]"):this.dispatch(i.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),e.respectFunctionProperties&&this._object(i)},_number:function(i){return n("number:"+i.toString())},_xml:function(i){return n("xml:"+i.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(i){return n("regex:"+i.toString())},_uint8array:function(i){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return n("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return n("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return n("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return n("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return n("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return n("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return n("url:"+i.toString(),"utf8")},_map:function(i){n("map:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_set:function(i){n("set:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_file:function(i){return n("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return n("domwindow")},_bigint:function(i){return n("bigint:"+i.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function av(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}});var Eq={};Gv(Eq,{default:()=>mq});var Wc=v("@yarnpkg/cli"),Fe=v("@yarnpkg/core"),fe=v("clipanion"),yg=K(v("path")),Is=K(fl()),Av=v("os");var Oi=v("@yarnpkg/fslib"),H=K(v("typanion"));function Wm(e){return typeof e>"u"||e===null}function nC(e){return typeof e=="object"&&e!==null}function iC(e){return Array.isArray(e)?e:Wm(e)?[]:[e]}function sC(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function oC(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function aC(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var uC=Wm,cC=nC,lC=iC,dC=oC,fC=aC,pC=sC,me={isNothing:uC,isObject:cC,toArray:lC,repeat:dC,isNegativeZero:fC,extend:pC};function Ym(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Ti(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Ym(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ti.prototype=Object.create(Error.prototype);Ti.prototype.constructor=Ti;Ti.prototype.toString=function(t){return this.name+": "+Ym(this,t)};var ke=Ti;function pl(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"\u2192")+o,pos:n-t+s.length}}function _l(e,t){return me.repeat(" ",t-e.length)+e}function _C(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",u,c,l=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+l+3);for(u=1;u<=t.linesBefore&&!(o-u<0);u++)c=pl(e.buffer,n[o-u],i[o-u],e.position-(n[o]-n[o-u]),f),a=me.repeat(" ",t.indent)+_l((e.line-u+1).toString(),l)+" | "+c.str+`
`+a;for(c=pl(e.buffer,n[o],i[o],e.position,f),a+=me.repeat(" ",t.indent)+_l((e.line+1).toString(),l)+" | "+c.str+`
`,a+=me.repeat("-",t.indent+l+3+c.pos)+`^
`,u=1;u<=t.linesAfter&&!(o+u>=i.length);u++)c=pl(e.buffer,n[o+u],i[o+u],e.position-(n[o]-n[o+u]),f),a+=me.repeat(" ",t.indent)+_l((e.line+u+1).toString(),l)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var hC=_C,gC=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],mC=["scalar","sequence","mapping"];function EC(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function SC(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(gC.indexOf(r)===-1)throw new ke('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=EC(t.styleAliases||null),mC.indexOf(this.kind)===-1)throw new ke('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Re=SC;function xm(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function AC(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function gl(e){return this.extend(e)}gl.prototype.extend=function(t){var r=[],n=[];if(t instanceof Re)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new ke("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof Re))throw new ke("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ke("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ke("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Re))throw new ke("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(gl.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=xm(i,"implicit"),i.compiledExplicit=xm(i,"explicit"),i.compiledTypeMap=AC(i.compiledImplicit,i.compiledExplicit),i};var TC=gl,yC=new Re("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),bC=new Re("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),RC=new Re("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),OC=new TC({explicit:[yC,bC,RC]});function vC(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function PC(){return null}function CC(e){return e===null}var IC=new Re("tag:yaml.org,2002:null",{kind:"scalar",resolve:vC,construct:PC,predicate:CC,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function NC(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function xC(e){return e==="true"||e==="True"||e==="TRUE"}function LC(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var wC=new Re("tag:yaml.org,2002:bool",{kind:"scalar",resolve:NC,construct:xC,predicate:LC,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function MC(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function DC(e){return 48<=e&&e<=55}function BC(e){return 48<=e&&e<=57}function FC(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!MC(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!DC(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!BC(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function UC(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function kC(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!me.isNegativeZero(e)}var jC=new Re("tag:yaml.org,2002:int",{kind:"scalar",resolve:FC,construct:UC,predicate:kC,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),GC=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function qC(e){return!(e===null||!GC.test(e)||e[e.length-1]==="_")}function HC(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var $C=/^[-+]?[0-9]+e/;function VC(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(me.isNegativeZero(e))return"-0.0";return r=e.toString(10),$C.test(r)?r.replace("e",".e"):r}function WC(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||me.isNegativeZero(e))}var YC=new Re("tag:yaml.org,2002:float",{kind:"scalar",resolve:qC,construct:HC,predicate:WC,represent:VC,defaultStyle:"lowercase"}),Km=OC.extend({implicit:[IC,wC,jC,YC]}),KC=Km,Xm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),zm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function XC(e){return e===null?!1:Xm.exec(e)!==null||zm.exec(e)!==null}function zC(e){var t,r,n,i,s,o,a,u=0,c=null,l,f,p;if(t=Xm.exec(e),t===null&&(t=zm.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(l=+t[10],f=+(t[11]||0),c=(l*60+f)*6e4,t[9]==="-"&&(c=-c)),p=new Date(Date.UTC(r,n,i,s,o,a,u)),c&&p.setTime(p.getTime()-c),p}function QC(e){return e.toISOString()}var ZC=new Re("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:XC,construct:zC,instanceOf:Date,represent:QC});function JC(e){return e==="<<"||e===null}var eI=new Re("tag:yaml.org,2002:merge",{kind:"scalar",resolve:JC}),Tl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function tI(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=Tl;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function rI(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=Tl,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function nI(e){var t="",r=0,n,i,s=e.length,o=Tl;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function iI(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var sI=new Re("tag:yaml.org,2002:binary",{kind:"scalar",resolve:tI,construct:rI,predicate:iI,represent:nI}),oI=Object.prototype.hasOwnProperty,aI=Object.prototype.toString;function uI(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,aI.call(i)!=="[object Object]")return!1;for(s in i)if(oI.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function cI(e){return e!==null?e:[]}var lI=new Re("tag:yaml.org,2002:omap",{kind:"sequence",resolve:uI,construct:cI}),dI=Object.prototype.toString;function fI(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],dI.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function pI(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var _I=new Re("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:fI,construct:pI}),hI=Object.prototype.hasOwnProperty;function gI(e){if(e===null)return!0;var t,r=e;for(t in r)if(hI.call(r,t)&&r[t]!==null)return!1;return!0}function mI(e){return e!==null?e:{}}var EI=new Re("tag:yaml.org,2002:set",{kind:"mapping",resolve:gI,construct:mI}),Qm=KC.extend({implicit:[ZC,eI],explicit:[sI,lI,_I,EI]}),qt=Object.prototype.hasOwnProperty,Ws=1,Zm=2,Jm=3,Ys=4,hl=1,SI=2,Lm=3,AI=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,TI=/[\x85\u2028\u2029]/,yI=/[,\[\]\{\}]/,eE=/^(?:!|!!|![a-z\-]+!)$/i,tE=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function wm(e){return Object.prototype.toString.call(e)}function Et(e){return e===10||e===13}function fr(e){return e===9||e===32}function je(e){return e===9||e===32||e===10||e===13}function Zr(e){return e===44||e===91||e===93||e===123||e===125}function bI(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function RI(e){return e===120?2:e===117?4:e===85?8:0}function OI(e){return 48<=e&&e<=57?e-48:-1}function Mm(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function vI(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var rE=new Array(256),nE=new Array(256);for(dr=0;dr<256;dr++)rE[dr]=Mm(dr)?1:0,nE[dr]=Mm(dr);var dr;function PI(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Qm,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function iE(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=hC(r),new ke(t,r)}function x(e,t){throw iE(e,t)}function Ks(e,t){e.onWarning&&e.onWarning.call(null,iE(e,t))}var Dm={YAML:function(t,r,n){var i,s,o;t.version!==null&&x(t,"duplication of %YAML directive"),n.length!==1&&x(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&x(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&x(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Ks(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&x(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],eE.test(i)||x(t,"ill-formed tag handle (first argument) of the TAG directive"),qt.call(t.tagMap,i)&&x(t,'there is a previously declared suffix for "'+i+'" tag handle'),tE.test(s)||x(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{x(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function Gt(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||x(e,"expected valid JSON character");else AI.test(a)&&x(e,"the stream contains non-printable characters");e.result+=a}}function Bm(e,t,r,n){var i,s,o,a;for(me.isObject(r)||x(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],qt.call(t,s)||(t[s]=r[s],n[s]=!0)}function Jr(e,t,r,n,i,s,o,a,u){var c,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,l=i.length;c<l;c+=1)Array.isArray(i[c])&&x(e,"nested arrays are not supported inside keys"),typeof i=="object"&&wm(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&wm(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,l=s.length;c<l;c+=1)Bm(e,t,s[c],r);else Bm(e,t,s,r);else!e.json&&!qt.call(r,i)&&qt.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,x(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}function yl(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):x(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function pe(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;fr(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Et(i))for(yl(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Ks(e,"deficient indentation"),n}function Qs(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||je(r)))}function bl(e,t){t===1?e.result+=" ":t>1&&(e.result+=me.repeat(`
`,t-1))}function CI(e,t,r){var n,i,s,o,a,u,c,l,f=e.kind,p=e.result,h;if(h=e.input.charCodeAt(e.position),je(h)||Zr(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),je(i)||r&&Zr(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),je(i)||r&&Zr(i))break}else if(h===35){if(n=e.input.charCodeAt(e.position-1),je(n))break}else{if(e.position===e.lineStart&&Qs(e)||r&&Zr(h))break;if(Et(h))if(u=e.line,c=e.lineStart,l=e.lineIndent,pe(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=u,e.lineStart=c,e.lineIndent=l;break}}a&&(Gt(e,s,o,!1),bl(e,e.line-u),s=o=e.position,a=!1),fr(h)||(o=e.position+1),h=e.input.charCodeAt(++e.position)}return Gt(e,s,o,!1),e.result?!0:(e.kind=f,e.result=p,!1)}function II(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Gt(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Et(r)?(Gt(e,n,i,!0),bl(e,pe(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Qs(e)?x(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);x(e,"unexpected end of the stream within a single quoted scalar")}function NI(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Gt(e,r,e.position,!0),e.position++,!0;if(a===92){if(Gt(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Et(a))pe(e,!1,t);else if(a<256&&rE[a])e.result+=nE[a],e.position++;else if((o=RI(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=bI(a))>=0?s=(s<<4)+o:x(e,"expected hexadecimal character");e.result+=vI(s),e.position++}else x(e,"unknown escape sequence");r=n=e.position}else Et(a)?(Gt(e,r,n,!0),bl(e,pe(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Qs(e)?x(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}x(e,"unexpected end of the stream within a double quoted scalar")}function xI(e,t){var r=!0,n,i,s,o=e.tag,a,u=e.anchor,c,l,f,p,h,_=Object.create(null),g,T,A,y;if(y=e.input.charCodeAt(e.position),y===91)l=93,h=!1,a=[];else if(y===123)l=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),y=e.input.charCodeAt(++e.position);y!==0;){if(pe(e,!0,t),y=e.input.charCodeAt(e.position),y===l)return e.position++,e.tag=o,e.anchor=u,e.kind=h?"mapping":"sequence",e.result=a,!0;r?y===44&&x(e,"expected the node content, but found ','"):x(e,"missed comma between flow collection entries"),T=g=A=null,f=p=!1,y===63&&(c=e.input.charCodeAt(e.position+1),je(c)&&(f=p=!0,e.position++,pe(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,en(e,t,Ws,!1,!0),T=e.tag,g=e.result,pe(e,!0,t),y=e.input.charCodeAt(e.position),(p||e.line===n)&&y===58&&(f=!0,y=e.input.charCodeAt(++e.position),pe(e,!0,t),en(e,t,Ws,!1,!0),A=e.result),h?Jr(e,a,_,T,g,A,n,i,s):f?a.push(Jr(e,null,_,T,g,A,n,i,s)):a.push(g),pe(e,!0,t),y=e.input.charCodeAt(e.position),y===44?(r=!0,y=e.input.charCodeAt(++e.position)):r=!1}x(e,"unexpected end of the stream within a flow collection")}function LI(e,t){var r,n,i=hl,s=!1,o=!1,a=t,u=0,c=!1,l,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)hl===i?i=f===43?Lm:SI:x(e,"repeat of a chomping mode identifier");else if((l=OI(f))>=0)l===0?x(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?x(e,"repeat of an indentation width identifier"):(a=t+l-1,o=!0);else break;if(fr(f)){do f=e.input.charCodeAt(++e.position);while(fr(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Et(f)&&f!==0)}for(;f!==0;){for(yl(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Et(f)){u++;continue}if(e.lineIndent<a){i===Lm?e.result+=me.repeat(`
`,s?1+u:u):i===hl&&s&&(e.result+=`
`);break}for(n?fr(f)?(c=!0,e.result+=me.repeat(`
`,s?1+u:u)):c?(c=!1,e.result+=me.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=me.repeat(`
`,u):e.result+=me.repeat(`
`,s?1+u:u),s=!0,o=!0,u=0,r=e.position;!Et(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Gt(e,r,e.position,!1)}return!0}function Fm(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,x(e,"tab characters must not be used in indentation")),!(u!==45||(o=e.input.charCodeAt(e.position+1),!je(o))));){if(a=!0,e.position++,pe(e,!0,-1)&&e.lineIndent<=t){s.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,en(e,t,Jm,!1,!0),s.push(e.result),pe(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&u!==0)x(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function wI(e,t,r){var n,i,s,o,a,u,c=e.tag,l=e.anchor,f={},p=Object.create(null),h=null,_=null,g=null,T=!1,A=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),y=e.input.charCodeAt(e.position);y!==0;){if(!T&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,x(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(y===63||y===58)&&je(n))y===63?(T&&(Jr(e,f,p,h,_,null,o,a,u),h=_=g=null),A=!0,T=!0,i=!0):T?(T=!1,i=!0):x(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=n;else{if(o=e.line,a=e.lineStart,u=e.position,!en(e,r,Zm,!1,!0))break;if(e.line===s){for(y=e.input.charCodeAt(e.position);fr(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),je(y)||x(e,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(Jr(e,f,p,h,_,null,o,a,u),h=_=g=null),A=!0,T=!1,i=!1,h=e.tag,_=e.result;else if(A)x(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=l,!0}else if(A)x(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=l,!0}if((e.line===s||e.lineIndent>t)&&(T&&(o=e.line,a=e.lineStart,u=e.position),en(e,t,Ys,!0,i)&&(T?_=e.result:g=e.result),T||(Jr(e,f,p,h,_,g,o,a,u),h=_=g=null),pe(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&y!==0)x(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return T&&Jr(e,f,p,h,_,null,o,a,u),A&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=f),A}function MI(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&x(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):x(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!je(o);)o===33&&(n?x(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),eE.test(i)||x(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),yI.test(s)&&x(e,"tag suffix cannot contain flow indicator characters")}s&&!tE.test(s)&&x(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{x(e,"tag name is malformed: "+s)}return r?e.tag=s:qt.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:x(e,'undeclared tag handle "'+i+'"'),!0}function DI(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&x(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!je(r)&&!Zr(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&x(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function BI(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!je(n)&&!Zr(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&x(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),qt.call(e.anchorMap,r)||x(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],pe(e,!0,-1),!0}function en(e,t,r,n,i){var s,o,a,u=1,c=!1,l=!1,f,p,h,_,g,T;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=Ys===r||Jm===r,n&&pe(e,!0,-1)&&(c=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;MI(e)||DI(e);)pe(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||Ys===r)&&(Ws===r||Zm===r?g=t:g=t+1,T=e.position-e.lineStart,u===1?a&&(Fm(e,T)||wI(e,T,g))||xI(e,g)?l=!0:(o&&LI(e,g)||II(e,g)||NI(e,g)?l=!0:BI(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&x(e,"alias node should not have any properties")):CI(e,g,Ws===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(l=a&&Fm(e,T))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&x(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,p=e.implicitTypes.length;f<p;f+=1)if(_=e.implicitTypes[f],_.resolve(e.result)){e.result=_.construct(e.result),e.tag=_.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(qt.call(e.typeMap[e.kind||"fallback"],e.tag))_=e.typeMap[e.kind||"fallback"][e.tag];else for(_=null,h=e.typeMap.multi[e.kind||"fallback"],f=0,p=h.length;f<p;f+=1)if(e.tag.slice(0,h[f].tag.length)===h[f].tag){_=h[f];break}_||x(e,"unknown tag !<"+e.tag+">"),e.result!==null&&_.kind!==e.kind&&x(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+_.kind+'", not "'+e.kind+'"'),_.resolve(e.result,e.tag)?(e.result=_.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):x(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function FI(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(pe(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!je(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&x(e,"directive name must not be less than one character in length");o!==0;){for(;fr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Et(o));break}if(Et(o))break;for(r=e.position;o!==0&&!je(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&yl(e),qt.call(Dm,n)?Dm[n](e,n,i):Ks(e,'unknown document directive "'+n+'"')}if(pe(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,pe(e,!0,-1)):s&&x(e,"directives end mark is expected"),en(e,e.lineIndent-1,Ys,!1,!0),pe(e,!0,-1),e.checkLineBreaks&&TI.test(e.input.slice(t,e.position))&&Ks(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Qs(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,pe(e,!0,-1));return}if(e.position<e.length-1)x(e,"end of the stream or a document separator is expected");else return}function sE(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new PI(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,x(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)FI(r);return r.documents}function UI(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=sE(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function kI(e,t){var r=sE(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new ke("expected a single document in the stream, but found more")}}var jI=UI,GI=kI,oE={loadAll:jI,load:GI},aE=Object.prototype.toString,uE=Object.prototype.hasOwnProperty,Rl=65279,qI=9,yi=10,HI=13,$I=32,VI=33,WI=34,ml=35,YI=37,KI=38,XI=39,zI=42,cE=44,QI=45,Xs=58,ZI=61,JI=62,eN=63,tN=64,lE=91,dE=93,rN=96,fE=123,nN=124,pE=125,Oe={};Oe[0]="\\0";Oe[7]="\\a";Oe[8]="\\b";Oe[9]="\\t";Oe[10]="\\n";Oe[11]="\\v";Oe[12]="\\f";Oe[13]="\\r";Oe[27]="\\e";Oe[34]='\\"';Oe[92]="\\\\";Oe[133]="\\N";Oe[160]="\\_";Oe[8232]="\\L";Oe[8233]="\\P";var iN=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],sN=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function oN(e,t){var r,n,i,s,o,a,u;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),u=e.compiledTypeMap.fallback[o],u&&uE.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[o]=a;return r}function aN(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new ke("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+me.repeat("0",n-t.length)+t}var uN=1,bi=2;function cN(e){this.schema=e.schema||Qm,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=me.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=oN(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?bi:uN,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Um(e,t){for(var r=me.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function El(e,t){return`
`+me.repeat(" ",e.indent*t)}function lN(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function zs(e){return e===$I||e===qI}function Ri(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Rl||65536<=e&&e<=1114111}function km(e){return Ri(e)&&e!==Rl&&e!==HI&&e!==yi}function jm(e,t,r){var n=km(e),i=n&&!zs(e);return(r?n:n&&e!==cE&&e!==lE&&e!==dE&&e!==fE&&e!==pE)&&e!==ml&&!(t===Xs&&!i)||km(t)&&!zs(t)&&e===ml||t===Xs&&i}function dN(e){return Ri(e)&&e!==Rl&&!zs(e)&&e!==QI&&e!==eN&&e!==Xs&&e!==cE&&e!==lE&&e!==dE&&e!==fE&&e!==pE&&e!==ml&&e!==KI&&e!==zI&&e!==VI&&e!==nN&&e!==ZI&&e!==JI&&e!==XI&&e!==WI&&e!==YI&&e!==tN&&e!==rN}function fN(e){return!zs(e)&&e!==Xs}function Ai(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function _E(e){var t=/^\n* /;return t.test(e)}var hE=1,Sl=2,gE=3,mE=4,Qr=5;function pN(e,t,r,n,i,s,o,a){var u,c=0,l=null,f=!1,p=!1,h=n!==-1,_=-1,g=dN(Ai(e,0))&&fN(Ai(e,e.length-1));if(t||o)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=Ai(e,u),!Ri(c))return Qr;g=g&&jm(c,l,a),l=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=Ai(e,u),c===yi)f=!0,h&&(p=p||u-_-1>n&&e[_+1]!==" ",_=u);else if(!Ri(c))return Qr;g=g&&jm(c,l,a),l=c}p=p||h&&u-_-1>n&&e[_+1]!==" "}return!f&&!p?g&&!o&&!i(e)?hE:s===bi?Qr:Sl:r>9&&_E(e)?Qr:o?s===bi?Qr:Sl:p?mE:gE}function _N(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===bi?'""':"''";if(!e.noCompatMode&&(iN.indexOf(t)!==-1||sN.test(t)))return e.quotingType===bi?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function u(c){return lN(e,c)}switch(pN(t,a,e.indent,o,u,e.quotingType,e.forceQuotes&&!n,i)){case hE:return t;case Sl:return"'"+t.replace(/'/g,"''")+"'";case gE:return"|"+Gm(t,e.indent)+qm(Um(t,s));case mE:return">"+Gm(t,e.indent)+qm(Um(hN(t,o),s));case Qr:return'"'+gN(t)+'"';default:throw new ke("impossible error: invalid scalar style")}}()}function Gm(e,t){var r=_E(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function qm(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function hN(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,Hm(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],u=o[2];s=u[0]===" ",n+=a+(!i&&!s&&u!==""?`
`:"")+Hm(u,t),i=s}return n}function Hm(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,u="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,u+=`
`+e.slice(i,s),i=s+1),o=a;return u+=`
`,e.length-i>t&&o>i?u+=e.slice(i,o)+`
`+e.slice(o+1):u+=e.slice(i),u.slice(1)}function gN(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=Ai(e,i),n=Oe[r],!n&&Ri(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||aN(r);return t}function mN(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(xt(e,t,a,!1,!1)||typeof a>"u"&&xt(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function $m(e,t,r,n){var i="",s=e.tag,o,a,u;for(o=0,a=r.length;o<a;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(xt(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&xt(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=El(e,t)),e.dump&&yi===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function EN(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,u,c,l;for(o=0,a=s.length;o<a;o+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),u=s[o],c=r[u],e.replacer&&(c=e.replacer.call(r,u,c)),xt(e,t,u,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),xt(e,t,c,!1,!1)&&(l+=e.dump,n+=l));e.tag=i,e.dump="{"+n+"}"}function SN(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,u,c,l,f,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new ke("sortKeys must be a boolean or a function");for(a=0,u=o.length;a<u;a+=1)p="",(!n||i!=="")&&(p+=El(e,t)),c=o[a],l=r[c],e.replacer&&(l=e.replacer.call(r,c,l)),xt(e,t+1,c,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&yi===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,f&&(p+=El(e,t)),xt(e,t+1,l,!0,f)&&(e.dump&&yi===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=s,e.dump=i||"{}"}function Vm(e,t,r){var n,i,s,o,a,u;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,aE.call(a.represent)==="[object Function]")n=a.represent(t,u);else if(uE.call(a.represent,u))n=a.represent[u](t,u);else throw new ke("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function xt(e,t,r,n,i,s,o){e.tag=null,e.dump=r,Vm(e,r,!1)||Vm(e,r,!0);var a=aE.call(e.dump),u=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",f,p;if(l&&(f=e.duplicates.indexOf(r),p=f!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(i=!1),p&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(l&&p&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(SN(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(EN(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?$m(e,t-1,e.dump,i):$m(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(mN(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&_N(e,e.dump,t,s,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new ke("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function AN(e,t){var r=[],n=[],i,s;for(Al(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function Al(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)Al(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)Al(e[n[i]],t,r)}function TN(e,t){t=t||{};var r=new cN(t);r.noRefs||AN(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),xt(r,0,n,!0,!0)?r.dump+`
`:""}var yN=TN,bN={dump:yN};function Ol(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var EE=Km;var SE=oE.load,Fq=oE.loadAll,Uq=bN.dump;var kq=Ol("safeLoad","load"),jq=Ol("safeLoadAll","loadAll"),Gq=Ol("safeDump","dump");var RN=".yarnbuildrc.yml",ON=".bundleignore",vN=H.isObject({folders:H.isObject({input:H.isOneOf([H.isString(),H.isArray(H.isString())]),output:H.isNullable(H.isOneOf([H.isString(),H.isArray(H.isString())]))}),exclude:H.isArray(H.isString()),bail:H.isBoolean(),hideYarnBuildBadge:H.isBoolean(),ignoreFile:H.isString()}),PN=H.isObject({input:H.isOptional(H.isOneOf([H.isString(),H.isArray(H.isString())])),output:H.isOptional(H.isNullable(H.isOneOf([H.isString(),H.isArray(H.isString())]))),tsconfig:H.isOptional(H.isString())}),vl={folders:{input:".",output:null},exclude:[],bail:!0,hideYarnBuildBadge:!1,ignoreFile:ON};async function CN(e){let t=RN,r=Oi.ppath.join(e.projectCwd||e.startingCwd,t);if(Oi.xfs.existsSync(r)){let n=await Oi.xfs.readFilePromise(r,"utf8"),i=[];try{let s=SE(n,{schema:EE});if(vN(s,{errors:i}))return s;console.warn(i)}catch{let o="";throw n.match(/^\s+(?!-)[^:]+\s+\S+/m)&&(o=" (config is corrupted, please check it matches the shape in the yarn.build readme."),new Error(`Parse error when loading ${r}; please check it's proper Yaml${o}`)}}return vl}async function AE(e){let t=await CN(e);return{...vl,...t,folders:{...vl.folders,...t.folders??{}}}}function TE(e){let t={...e["yarn.build"]};return PN(t)?t:{}}var k=v("@yarnpkg/core"),$e=K(PE()),lv=v("os"),V=v("@yarnpkg/fslib");var uf=K(v("node:process"),1),BA=K(v("node:fs"),1),gr=K(v("node:path"),1);var Js=v("node:events"),IE=v("node:stream"),Cl=v("node:stream/promises");function Il(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got \`${typeof e}\`.`);for(let i of e)NE(i);let t=e.some(({readableObjectMode:i})=>i),r=NN(e,t),n=new Pl({objectMode:t,writableHighWaterMark:r,readableHighWaterMark:r});for(let i of e)n.add(i);return e.length===0&&n.end(),n}var NN=(e,t)=>{if(e.length===0)return 16384;let r=e.filter(({readableObjectMode:n})=>n===t).map(({readableHighWaterMark:n})=>n);return Math.max(...r)},Pl=class extends IE.PassThrough{#e=new Set([]);#n=new Set([]);#t;constructor(...t){super(...t),this.#t=xN(this,this.#e)}add(t){if(!this.#e.has(t)){if(NE(t),!this.writable)throw new TypeError("The merged stream has already ended.");this.#e.add(t),MN({passThroughStream:this,stream:t,streams:this.#e,ended:this.#n,onFinished:this.#t}),Zs(this,LE),t.pipe(this,{end:!1})}}remove(t){if(!this.#e.has(t))throw new TypeError("Stream cannot be removed because it was not piped.");t.unpipe(this)}},xN=async(e,t)=>{Zs(e,CE);let r=new AbortController;try{await Promise.race([LN(e,r),wN(e,t,r)])}finally{r.abort(),Zs(e,-CE)}},LN=async(e,{signal:t})=>{try{await(0,Cl.finished)(e,{signal:t,cleanup:!0})}catch{}},wN=async(e,t,{signal:r})=>{for await(let[n]of(0,Js.on)(e,"unpipe",{signal:r}))t.has(n)&&n.emit(xE)},NE=e=>{if(typeof e?.pipe!="function")throw new TypeError(`Expected a readable stream, got: \`${typeof e}\`.`)},MN=async({passThroughStream:e,stream:t,streams:r,ended:n,onFinished:i})=>{try{let s=new AbortController;try{await Promise.race([i,DN({stream:t,streams:r,ended:n,abortController:s}),BN({passThroughStream:e,stream:t,streams:r,ended:n,abortController:s})])}finally{s.abort()}r.size===n.size&&e.writable&&e.end()}catch(s){s?.code==="ERR_STREAM_PREMATURE_CLOSE"?e.destroy():e.destroy(s)}},DN=async({stream:e,streams:t,ended:r,abortController:{signal:n}})=>{await(0,Cl.finished)(e,{signal:n,cleanup:!0,readable:!0,writable:!1}),t.has(e)&&r.add(e)},BN=async({passThroughStream:e,stream:t,streams:r,ended:n,abortController:{signal:i}})=>{await(0,Js.once)(t,xE,{signal:i}),r.delete(t),n.delete(t),Zs(e,-LE)},xE=Symbol("unpipe"),Zs=(e,t)=>{e.setMaxListeners(e.getMaxListeners()+t)},CE=2,LE=1;var un=K(Qd(),1);var bo=K(v("fs"),1);async function Zd(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return(await bo.promises[e](r))[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}function Jd(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return bo.default[e](r)[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}var J2=Zd.bind(null,"stat","isFile"),fA=Zd.bind(null,"stat","isDirectory"),eH=Zd.bind(null,"lstat","isSymbolicLink"),tH=Jd.bind(null,"statSync","isFile"),pA=Jd.bind(null,"statSync","isDirectory"),rH=Jd.bind(null,"lstatSync","isSymbolicLink");var _A=v("node:url");function Pi(e){return e instanceof URL?(0,_A.fileURLToPath)(e):e}var RA=K(v("node:process"),1),OA=K(v("node:fs"),1),vA=K(v("node:fs/promises"),1),hr=K(v("node:path"),1),af=K(Qd(),1),PA=K(bA(),1);function an(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}var Ci=e=>e[0]==="!";var Vw=["**/node_modules","**/flow-typed","**/coverage","**/.git"],CA={absolute:!0,dot:!0},IA="**/.gitignore",Ww=(e,t)=>Ci(e)?"!"+hr.default.posix.join(t,e.slice(1)):hr.default.posix.join(t,e),Yw=(e,t)=>{let r=an(hr.default.relative(t,hr.default.dirname(e.filePath)));return e.content.split(/\r?\n/).filter(n=>n&&!n.startsWith("#")).map(n=>Ww(n,r))},Kw=(e,t)=>{if(t=an(t),hr.default.isAbsolute(e)){if(an(e).startsWith(t))return hr.default.relative(t,e);throw new Error(`Path ${e} is not in cwd ${t}`)}return e},NA=(e,t)=>{let r=e.flatMap(i=>Yw(i,t)),n=(0,PA.default)().add(r);return i=>(i=Pi(i),i=Kw(i,t),i?n.ignores(an(i)):!1)},xA=(e={})=>({cwd:Pi(e.cwd)??RA.default.cwd(),suppressErrors:!!e.suppressErrors,deep:typeof e.deep=="number"?e.deep:Number.POSITIVE_INFINITY,ignore:[...e.ignore??[],...Vw]}),LA=async(e,t)=>{let{cwd:r,suppressErrors:n,deep:i,ignore:s}=xA(t),o=await(0,af.default)(e,{cwd:r,suppressErrors:n,deep:i,ignore:s,...CA}),a=await Promise.all(o.map(async u=>({filePath:u,content:await vA.default.readFile(u,"utf8")})));return NA(a,r)},wA=(e,t)=>{let{cwd:r,suppressErrors:n,deep:i,ignore:s}=xA(t),a=af.default.sync(e,{cwd:r,suppressErrors:n,deep:i,ignore:s,...CA}).map(u=>({filePath:u,content:OA.default.readFileSync(u,"utf8")}));return NA(a,r)};var Xw=e=>{if(e.some(t=>typeof t!="string"))throw new TypeError("Patterns must be a string or an array of strings")},FA=(e,t)=>{let r=Ci(e)?e.slice(1):e;return gr.default.isAbsolute(r)?r:gr.default.join(t,r)},UA=({directoryPath:e,files:t,extensions:r})=>{let n=r?.length>0?`.${r.length>1?`{${r.join(",")}}`:r[0]}`:"";return t?t.map(i=>gr.default.posix.join(e,`**/${gr.default.extname(i)?i:`${i}${n}`}`)):[gr.default.posix.join(e,`**${n?`/*${n}`:""}`)]},MA=async(e,{cwd:t=uf.default.cwd(),files:r,extensions:n}={})=>(await Promise.all(e.map(async s=>await fA(FA(s,t))?UA({directoryPath:s,files:r,extensions:n}):s))).flat(),DA=(e,{cwd:t=uf.default.cwd(),files:r,extensions:n}={})=>e.flatMap(i=>pA(FA(i,t))?UA({directoryPath:i,files:r,extensions:n}):i),cf=e=>(e=[...new Set([e].flat())],Xw(e),e),zw=e=>{if(!e)return;let t;try{t=BA.default.statSync(e)}catch{return}if(!t.isDirectory())throw new Error("The `cwd` option must be a path to a directory")},kA=(e={})=>(e={...e,ignore:e.ignore??[],expandDirectories:e.expandDirectories??!0,cwd:Pi(e.cwd)},zw(e.cwd),e),jA=e=>async(t,r)=>e(cf(t),kA(r)),Oo=e=>(t,r)=>e(cf(t),kA(r)),GA=e=>{let{ignoreFiles:t,gitignore:r}=e,n=t?cf(t):[];return r&&n.push(IA),n},Qw=async e=>{let t=GA(e);return HA(t.length>0&&await LA(t,e))},qA=e=>{let t=GA(e);return HA(t.length>0&&wA(t,e))},HA=e=>{let t=new Set;return r=>{let n=gr.default.normalize(r.path??r);return t.has(n)||e&&e(n)?!1:(t.add(n),!0)}},$A=(e,t)=>e.flat().filter(r=>t(r)),VA=(e,t)=>{let r=[];for(;e.length>0;){let n=e.findIndex(s=>Ci(s));if(n===-1){r.push({patterns:e,options:t});break}let i=e[n].slice(1);for(let s of r)s.options.ignore.push(i);n!==0&&r.push({patterns:e.slice(0,n),options:{...t,ignore:[...t.ignore,i]}}),e=e.slice(n+1)}return r},WA=(e,t)=>({...t?{cwd:t}:{},...Array.isArray(e)?{files:e}:e}),YA=async(e,t)=>{let r=VA(e,t),{cwd:n,expandDirectories:i}=t;if(!i)return r;let s=WA(i,n);return Promise.all(r.map(async o=>{let{patterns:a,options:u}=o;return[a,u.ignore]=await Promise.all([MA(a,s),MA(u.ignore,{cwd:n})]),{patterns:a,options:u}}))},lf=(e,t)=>{let r=VA(e,t),{cwd:n,expandDirectories:i}=t;if(!i)return r;let s=WA(i,n);return r.map(o=>{let{patterns:a,options:u}=o;return a=DA(a,s),u.ignore=DA(u.ignore,{cwd:n}),{patterns:a,options:u}})},df=jA(async(e,t)=>{let[r,n]=await Promise.all([YA(e,t),Qw(t)]),i=await Promise.all(r.map(s=>(0,un.default)(s.patterns,s.options)));return $A(i,n)}),EH=Oo((e,t)=>{let r=lf(e,t),n=qA(t),i=r.map(s=>un.default.sync(s.patterns,s.options));return $A(i,n)}),SH=Oo((e,t)=>{let r=lf(e,t),n=qA(t),i=r.map(o=>un.default.stream(o.patterns,o.options));return Il(i).filter(o=>n(o))}),AH=Oo((e,t)=>e.some(r=>un.default.isDynamicPattern(r,t))),TH=jA(YA),yH=Oo(lf),{convertPathToPattern:bH}=un.default;var dv=v("events");var pf=K(XA(),1);var Ni=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},_f=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},zA=e=>globalThis.DOMException===void 0?new _f(e):new DOMException(e),QA=e=>{let t=e.reason===void 0?zA("This operation was aborted."):e.reason;return t instanceof Error?t:zA(t)};function hf(e,t){let{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout,clearTimeout}}=t,o,u=new Promise((c,l)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:p}=t;p.aborted&&l(QA(p)),p.addEventListener("abort",()=>{l(QA(p))})}if(r===Number.POSITIVE_INFINITY){e.then(c,l);return}let f=new Ni;o=s.setTimeout.call(void 0,()=>{if(n){try{c(n())}catch(p){l(p)}return}typeof e.cancel=="function"&&e.cancel(),i===!1?c():i instanceof Error?l(i):(f.message=i??`Promise timed out after ${r} milliseconds`,l(f))},r),(async()=>{try{c(await e)}catch(p){l(p)}})()}).finally(()=>{u.clear()});return u.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},u}function gf(e,t,r){let n=0,i=e.length;for(;i>0;){let s=Math.trunc(i/2),o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}var xi=class{#e=[];enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&this.#e[this.size-1].priority>=r.priority){this.#e.push(n);return}let i=gf(this.#e,n,(s,o)=>o.priority-s.priority);this.#e.splice(i,0,n)}dequeue(){return this.#e.shift()?.run}filter(t){return this.#e.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this.#e.length}};var Li=class extends pf.default{#e;#n;#t=0;#p;#a;#_=0;#i;#u;#r;#h;#s=0;#c;#o;#g;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:xi,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#e=t.carryoverConcurrencyCount,this.#n=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#p=t.intervalCap,this.#a=t.interval,this.#r=new t.queueClass,this.#h=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#g=t.throwOnTimeout===!0,this.#o=t.autoStart===!1}get#S(){return this.#n||this.#t<this.#p}get#A(){return this.#s<this.#c}#T(){this.#s--,this.#l(),this.emit("next")}#y(){this.#E(),this.#m(),this.#u=void 0}get#b(){let t=Date.now();if(this.#i===void 0){let r=this.#_-t;if(r<0)this.#t=this.#e?this.#s:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#y()},r)),!0}return!1}#l(){if(this.#r.size===0)return this.#i&&clearInterval(this.#i),this.#i=void 0,this.emit("empty"),this.#s===0&&this.emit("idle"),!1;if(!this.#o){let t=!this.#b;if(this.#S&&this.#A){let r=this.#r.dequeue();return r?(this.emit("active"),r(),t&&this.#m(),!0):!1}}return!1}#m(){this.#n||this.#i!==void 0||(this.#i=setInterval(()=>{this.#E()},this.#a),this.#_=Date.now()+this.#a)}#E(){this.#t===0&&this.#s===0&&this.#i&&(clearInterval(this.#i),this.#i=void 0),this.#t=this.#e?this.#s:0,this.#d()}#d(){for(;this.#l(););}get concurrency(){return this.#c}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#c=t,this.#d()}async#R(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:this.#g,...r},new Promise((n,i)=>{this.#r.enqueue(async()=>{this.#s++,this.#t++;try{r.signal?.throwIfAborted();let s=t({signal:r.signal});r.timeout&&(s=hf(Promise.resolve(s),{milliseconds:r.timeout})),r.signal&&(s=Promise.race([s,this.#R(r.signal)]));let o=await s;n(o),this.emit("completed",o)}catch(s){if(s instanceof Ni&&!r.throwOnTimeout){n();return}i(s),this.emit("error",s)}finally{this.#T()}},r),this.emit("add"),this.#l()})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this.#o?(this.#o=!1,this.#d(),this):this}pause(){this.#o=!0}clear(){this.#r=new this.#h}async onEmpty(){this.#r.size!==0&&await this.#f("empty")}async onSizeLessThan(t){this.#r.size<t||await this.#f("next",()=>this.#r.size<t)}async onIdle(){this.#s===0&&this.#r.size===0||await this.#f("idle")}async#f(t,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(t,i),n())};this.on(t,i)})}get size(){return this.#r.size}sizeBy(t){return this.#r.filter(t).length}get pending(){return this.#s}get isPaused(){return this.#o}};var mf=class{value;next;constructor(t){this.value=t}},wi=class{#e;#n;#t;constructor(){this.clear()}enqueue(t){let r=new mf(t);this.#e?(this.#n.next=r,this.#n=r):(this.#e=r,this.#n=r),this.#t++}dequeue(){let t=this.#e;if(t)return this.#e=this.#e.next,this.#t--,t.value}clear(){this.#e=void 0,this.#n=void 0,this.#t=0}get size(){return this.#t}*[Symbol.iterator](){let t=this.#e;for(;t;)yield t.value,t=t.next}};var ZA=v("async_hooks");function Ef(e){if(!((Number.isInteger(e)||e===Number.POSITIVE_INFINITY)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let t=new wi,r=0,n=()=>{r--,t.size>0&&t.dequeue()()},i=async(a,u,c)=>{r++;let l=(async()=>a(...c))();u(l);try{await l}catch{}n()},s=(a,u,c)=>{t.enqueue(ZA.AsyncResource.bind(i.bind(void 0,a,u,c))),(async()=>(await Promise.resolve(),r<e&&t.size>0&&t.dequeue()()))()},o=(a,...u)=>new Promise(c=>{s(a,c,u)});return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}}}),o}var Sg=K(JA());function Tf({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var eM=Tf();function mr(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(eM,"")}var eT=(e=0)=>t=>`\x1B[${t+e}m`,tT=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,rT=(e=0)=>(t,r,n)=>`\x1B[${38+e};2;${t};${r};${n}m`,oe={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},qH=Object.keys(oe.modifier),tM=Object.keys(oe.color),rM=Object.keys(oe.bgColor),HH=[...tM,...rM];function nM(){let e=new Map;for(let[t,r]of Object.entries(oe)){for(let[n,i]of Object.entries(r))oe[n]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},r[n]=oe[n],e.set(i[0],i[1]);Object.defineProperty(oe,t,{value:r,enumerable:!1})}return Object.defineProperty(oe,"codes",{value:e,enumerable:!1}),oe.color.close="\x1B[39m",oe.bgColor.close="\x1B[49m",oe.color.ansi=eT(),oe.color.ansi256=tT(),oe.color.ansi16m=rT(),oe.bgColor.ansi=eT(10),oe.bgColor.ansi256=tT(10),oe.bgColor.ansi16m=rT(10),Object.defineProperties(oe,{rgbToAnsi256:{value:(t,r,n)=>t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(s=>s+s).join(""));let i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:t=>oe.rgbToAnsi256(...oe.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,n,i;if(t>=232)r=((t-232)*10+8)/255,n=r,i=r;else{t-=16;let a=t%36;r=Math.floor(t/36)/5,n=Math.floor(a/6)/5,i=a%6/5}let s=Math.max(r,n,i)*2;if(s===0)return 30;let o=30+(Math.round(i)<<2|Math.round(n)<<1|Math.round(r));return s===2&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(t,r,n)=>oe.ansi256ToAnsi(oe.rgbToAnsi256(t,r,n)),enumerable:!1},hexToAnsi:{value:t=>oe.ansi256ToAnsi(oe.hexToAnsi256(t)),enumerable:!1}}),oe}var iM=nM(),Mt=iM;function nT(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function iT(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function sT(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function sM(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function oT(e,{ambiguousAsWide:t=!1}={}){return sM(e),iT(e)||sT(e)||t&&nT(e)?2:1}function yf(e){return Number.isInteger(e)?oT(e)===2:!1}var oM=new Set([27,155]),aM="0".codePointAt(0),uM="9".codePointAt(0),Rf=new Set,bf=new Map;for(let[e,t]of Mt.codes)Rf.add(Mt.color.ansi(t)),bf.set(Mt.color.ansi(e),Mt.color.ansi(t));function cM(e){if(Rf.has(e))return e;if(bf.has(e))return bf.get(e);e=e.slice(2),e.includes(";")&&(e=e[0]+"0");let t=Mt.codes.get(Number.parseInt(e,10));return t?Mt.color.ansi(t):Mt.reset.open}function lM(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(r>=aM&&r<=uM)return t}return-1}function dM(e,t){e=e.slice(t,t+19);let r=lM(e);if(r!==-1){let n=e.indexOf("m",r);return n===-1&&(n=e.length),e.slice(0,n+1)}}function fM(e,t=Number.POSITIVE_INFINITY){let r=[],n=0,i=0;for(;n<e.length;){let s=e.codePointAt(n);if(oM.has(s)){let u=dM(e,n);if(u){r.push({type:"ansi",code:u,endCode:cM(u)}),n+=u.length;continue}}let o=yf(s),a=String.fromCodePoint(s);if(r.push({type:"character",value:a,isFullWidth:o}),n+=a.length,i+=o?2:a.length,i>=t)break}return r}function aT(e){let t=[];for(let r of e)r.code===Mt.reset.open?t=[]:Rf.has(r.code)?t=t.filter(n=>n.endCode!==r.code):(t=t.filter(n=>n.endCode!==r.endCode),t.push(r));return t}function pM(e){return aT(e).map(({endCode:n})=>n).reverse().join("")}function Mi(e,t,r){let n=fM(e,r),i=[],s=0,o="",a=!1;for(let u of n){if(r!==void 0&&s>=r)break;u.type==="ansi"?(i.push(u),a&&(o+=u.code)):(!a&&s>=t&&(a=!0,i=aT(i),o=i.map(({code:c})=>c).join("")),a&&(o+=u.value),s+=u.isFullWidth?2:u.value.length)}return o+=pM(i),o}var X={PACKAGE_NAME:"package.name",PACKAGE_SCOPE:"package.scope",PACKAGE_DIRECTORY:"package.directory",PACKAGE_COMMAND:"package.command",GIT_BRANCH:"git.branch",GIT_COMMIT:"git.commit",YARN_BUILD_MESSAGE_CODE:"yarn.build.message.code",YARN_BUILD_CONFIG_FOLDERS_INPUT:"yarn.build.config.folders.input",YARN_BUILD_CONFIG_FOLDERS_OUTPUT:"yarn.build.config.folders.output",YARN_BUILD_CONFIG_EXCLUDE:"yarn.build.config.exclude",YARN_BUILD_CONFIG_BAIL:"yarn.build.config.bail",YARN_BUILD_CONFIG_HIDE_BADGE:"yarn.build.config.hide-badge",YARN_BUILD_CONFIG_MAX_CONCURRENCY:"yarn.build.config.max-concurrency",YARN_BUILD_FLAGS_OUTPUT_JSON:"yarn.build.flags.output.json",YARN_BUILD_FLAGS_ALL:"yarn.build.flags.all",YARN_BUILD_FLAGS_TARGETS:"yarn.build.flags.targets",YARN_BUILD_FLAGS_COMMAND:"yarn.build.flags.command",YARN_BUILD_FLAGS_INTERLACED:"yarn.build.flags.interlaced",YARN_BUILD_FLAGS_VERBOSE:"yarn.build.flags.verbose",YARN_BUILD_FLAGS_DRY_RUN:"yarn.build.flags.dry-run",YARN_BUILD_FLAGS_IGNORE_CACHE:"yarn.build.flags.ignore-cache",YARN_BUILD_FLAGS_MAX_CONCURRENCY:"yarn.build.flags.max-concurrency",YARN_BUILD_FLAGS_CONTINUE_ON_ERROR:"yarn.build.flags.continue-on-error",YARN_BUILD_FLAGS_EXCLUDE:"yarn.build.flags.exclude",YARN_BUILD_FLAGS_EXCLUDE_CURRENT:"yarn.build.flags.exclude.current",YARN_BUILD_FLAGS_CHANGES:"yarn.build.flags.changes",YARN_BUILD_FLAGS_SINCE:"yarn.build.flags.since",YARN_BUILD_FLAGS_SINCE_BRANCH:"yarn.build.flags.since-branch",YARN_BUILD_FLAGS_ONLY_CURRENT:"yarn.build.flags.only-current",YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES:"yarn.build.flags.ignore-dependencies",YARN_BUILD_FLAGS_BUNDLE_QUIET:"yarn.build.flags.bundle.quiet",YARN_BUILD_FLAGS_BUNDLE_TEMPORARY_DIRECTORY:"yarn.build.flags.bundle.temporary-directory",YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY:"yarn.build.flags.bundle.output-directory",YARN_BUILD_FLAGS_BUNDLE_NO_COMPRESS:"yarn.build.flags.bundle.no-compress",YARN_BUILD_FLAGS_BUNDLE_ARCHIVE_NAME:"yarn.build.flags.bundle.archive-name",YARN_BUILD_FLAGS_BUNDLE_EXCLUDE:"yarn.build.flags.bundle.exclude",YARN_BUILD_FLAGS_BUNDLE_IGNORE_FILE:"yarn.build.flags.bundle.ignore-file",YARN_BUILD_PACKAGE_NEEDS_RUN:"yarn.build.package.needs-run",YARN_BUILD_PACKAGE_RUN_COMMAND:"yarn.build.package.run.command",YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT:"yarn.build.package.run.command.exit"};var jO=K(L()),GO=K(Sp());var DO=K(wu()),BO=K(In()),FO=K(Ot()),UO=K(MO()),kO=K(wu()),di=K(L());process.env.DEBUG&&di.diag.setLogger(new di.DiagConsoleLogger,di.DiagLogLevel.DEBUG);var bs=class{static _instance;static getInstance(){return this._instance||(this._instance=new this().start())}static provider(){return this._instance||(this._instance=new this().start())}start(){let t=new UO.OTLPTraceExporter,r=new DO.BasicTracerProvider({resource:new BO.Resource({[FO.SemanticResourceAttributes.SERVICE_NAME]:"yarn.build"})});r.addSpanProcessor(new kO.BatchSpanProcessor(t));async function n(i){try{await r.shutdown(),process.env.DEBUG&&console.info("gracefullty exited trace provider")}finally{process.exit(isNaN(+i)?1:+i)}}return["beforeExit","exit","uncaughtException","unhandledRejection","SIGHUP","SIGINT","SIGQUIT","SIGILL","SIGTRAP","SIGABRT","SIGBUS","SIGFPE","SIGUSR1","SIGSEGV","SIGUSR2","SIGTERM"].forEach(i=>process.on(i,n)),r}};var $r=K(L()),jt=class{name;_tracer;constructor(t){this.name=t,this._tracer=bs.getInstance().getTracer(t)}recordException(t,r){(typeof typeof r=="string"||r instanceof Error)&&(t.recordException(r),t.setStatus({code:jO.SpanStatusCode.ERROR,message:r instanceof Error?r.message:r}))}async startSpan(t,r){let n;if(typeof t.ctx>"u"?n=$r.context.active():n=t.ctx,t.propegateFromEnv||t?.spanOptions?.kind==4){let o=process.env.TRACEPARENT;if(typeof o=="string"){let a=(0,GO.parseTraceParent)(o??"");a&&(n=$r.trace.setSpanContext($r.context.active(),a))}}let i=this._tracer.startSpan(t.name,t.spanOptions,n),s=$r.trace.setSpan(n,i);try{return r.constructor.name==="AsyncFunction"?await r({span:i,ctx:s}):r({span:i,ctx:s})}catch(o){if((typeof o=="string"||o instanceof Error)&&this.recordException(i,o),!t.supressExceptions)throw o}finally{i.end()}throw new Error("Unknown error")}async wrap(t,r,...n){let i;return typeof t.ctx>"u"?i=$r.context.active():i=t.ctx,await(async()=>await this.startSpan({name:t.name,ctx:i},async()=>await r(...n)))()}};var Gc=class e{tracer=new jt("yarn.build");nodes={};size=0;runSize=0;ran=new Set;dryRunCallback=()=>{};addNode(t){if(this.nodes[t])return this.nodes[t];let r=new Rs(t);return this.nodes[t]=r,this.size=Object.keys(this.nodes).length,this.checkCyclical(r),r}addRunCallback(t,r){let n=t;this.nodes[t.id]||(n=this.addNode(t.id)),n.runCallback||(n.addRunCallback(r),this.runSize++)}getNode(t){if(this.nodes[t])return this.nodes[t]}resetRuns(){this.ran=new Set}checkCyclical(t){let r=new Set,n=new Set;this.resolveNode(t,r,n)}resolveNode(t,r,n){n.add(t.id),Object.keys(t.dependencies).forEach(i=>{let s=t.dependencies[i];if(!r.has(s.id)){if(n.has(s.id))throw new Os(t.id,s.id);this.resolveNode(s,r,n)}}),r.add(t.id),n.delete(t.id)}async run(t,r,n=!1){return await this.tracer.startSpan({name:"run commands",ctx:t},async({ctx:i})=>{let s=new Set,o=new Set,a={};for(let u of r)this.resolveQueue(u,s,a);return n?(await this.dryRunLoop(s,a,o,0),a):(await new Promise(u=>{this.workLoop(i,s,a,o,u)}),a)})}async dryRunLoop(t,r,n,i=0){if(n.forEach((s,o)=>{this.dryRunCallback(s,i-1),r[s.id]={success:!0,done:!0},n.delete(o)}),t.size!==0&&t.forEach(s=>{s.canStart(r)&&s?.node?.runCallback&&(n.add(s.node),t.delete(s))}),n.size!=0)return await this.dryRunLoop(t,r,n,i+1)}workLoop(t,r,n,i,s){if(r.size!==0&&r.forEach(o=>{o.canStart(n)&&(o?.node?.runCallback?(o?.node?.runCallback(t,n),i.add(o.node)):n[o.node.id]={success:!0,done:!0},r.delete(o))}),i.forEach((o,a)=>{n[o.id].done&&i.delete(a)}),Object.keys(n).map(o=>n[o]?.done??!0).every(o=>o===!0)){s();return}setTimeout(()=>this.workLoop(t,r,n,i,s),30)}resolveQueue(t,r,n){let i=[];if(Object.keys(t.dependencies).forEach(s=>{let o=t.dependencies[s];if(i.push(o.id),!n[o.id]&&o.runCallback){n[o.id]={...e.RunLogInit};let a=this.resolveQueue(o,r,n),u={node:o,canStart:e.QueueItemCanStart(a)};r.add(u)}}),!n[t.id]&&t.runCallback){n[t.id]={...e.RunLogInit};let s={node:t,canStart:e.QueueItemCanStart(i)};r.add(s)}return i}static RunLogInit={success:!1,done:!1};static QueueItemCanStart=t=>r=>t.map(n=>r[n]?.done??!0).every(n=>n===!0)},Rs=class e{id;dependencies;cancelled=!1;skip=!1;runCallback;constructor(t){this.id=t,this.dependencies={}}addDependency(t){return this.dependencies[t.id]||(this.dependencies[t.id]=t),this}addRunCallback(t){return this.runCallback?this:(this.runCallback=(r,n)=>{if(!this.cancelled)return t(r,e.cancelDependentJobs(this)).then(i=>{n[this.id]={done:!0,success:i}})},this)}static cancelDependentJobs(t){return()=>{typeof t.dependencies>"u"||Object.keys(t.dependencies).forEach(r=>{let n=t.dependencies[r];n.cancelled=!0})}}},Os=class extends Error{code;node;dep;constructor(t,r){super(""),this.name="CyclicDependencyError",this.code="YN0003",this.node=t,this.dep=r}};var FG="\x1B",Je=FG+"[",It=class e{static row=0;static column=0;static pad(t=1){for(let r=0;r<t;r++)process.stdout.write(`
`);e.cursorUp(t)}static cursorUp(t=1){process.stdout.write(Je+`${t}A`)}static cursorSave(){process.stdout.write(Je+"s")}static cursorRestore(){process.stdout.write(Je+"u")}static autoWrap(t){t?process.stdout.write(Je+"?7h"):process.stdout.write(Je+"?7l")}static clearScreenDown(){process.stdout.write(Je+"J")}static async cursorPositionReport(){return new Promise(t=>{process.stdin.setRawMode(!0),process.stdin.once("data",r=>{process.stdin.setRawMode(!1),process.stdin.pause();let[n,i]=r.slice(2,r.length-1).toString().split(";").map(Number);t({x:i,y:n})}),process.stdout.write(Je+"6n")})}static setScrollableRegion(t,r){process.stdout.write(Je+`${t};${r}r`)}static resetScrollableRegion(){process.stdout.write(Je+"r")}static moveTo(t){process.stdout.write(Je+`${t.y};${t.x}H`)}static cursorHome(){process.stdout.write(Je+"H")}static alternateScreen(){process.stdout.write(Je+"?1049h")}static mainScreen(){process.stdout.write(Je+"?1049l")}static linesRequired(t,r){let n=new RegExp(`([^
]{0,${r}})(
)?`,"gm");return(mr(t).match(n)??[""]).length-1}};var HO=v("child_process"),$O=v("util");var qO=()=>process.platform==="win32"?"windows":"unix";var UG=(0,$O.promisify)(HO.exec),VO=async e=>{let t=qO(),r=(({platform:i,pid:s})=>{switch(i){case"unix":return`pgrep "-P ${s}"`;case"windows":return`wmic process where (ParentProcessId=${s}) get ProcessId`;default:throw new Error("Unable to find parent process")}})({platform:t,pid:e}),n=[];try{let{stdout:i}=await UG(r);n=i.split(`
`).filter(Boolean).map(s=>parseInt(s,10)).filter(s=>!isNaN(s))}catch{}return n};var fi={hasBeenTerminated:!1,callId:0},qc=async(e=0)=>{if(e!==fi.callId||fi.hasBeenTerminated)return;let t=process.pid;(await VO(t)).forEach(i=>{try{process.kill(i,"SIGKILL")}catch{}});let n=fi.callId+1;fi.callId=n,setTimeout(async()=>{qc(n)},50)};var fv=K(L());var Z=K(v("path"),1),gg=K(v("fs"),1),ev=K(v("module"),1);var WO=e=>e!==null&&typeof e=="object",pi=(e,t)=>Object.assign(new Error(`[${e}]: ${t}`),{code:e}),YO="ERR_INVALID_PACKAGE_CONFIG",cg="ERR_INVALID_PACKAGE_TARGET",kG="ERR_PACKAGE_PATH_NOT_EXPORTED";var jG=/^\d+$/,GG=/^(\.{1,2}|node_modules)$/i,qG=/\/|\\/,KO=(e=>(e.Export="exports",e.Import="imports",e))(KO||{}),lg=(e,t,r,n,i)=>{if(t==null)return[];if(typeof t=="string"){let[s,...o]=t.split(qG);if(s===".."||o.some(a=>GG.test(a)))throw pi(cg,`Invalid "${e}" target "${t}" defined in the package config`);return[i?t.replace(/\*/g,i):t]}if(Array.isArray(t))return t.flatMap(s=>lg(e,s,r,n,i));if(WO(t)){for(let s of Object.keys(t)){if(jG.test(s))throw pi(YO,"Cannot contain numeric property keys");if(s==="default"||n.includes(s))return lg(e,t[s],r,n,i)}return[]}throw pi(cg,`Invalid "${e}" target "${t}"`)},vs="*",HG=(e,t)=>{let r=e.indexOf(vs),n=t.indexOf(vs);return r===n?t.length>e.length:n>r};function $G(e,t){if(!t.includes(vs)&&e.hasOwnProperty(t))return[t];let r,n;for(let i of Object.keys(e))if(i.includes(vs)){let[s,o,a]=i.split(vs);if(a===void 0&&t.startsWith(s)&&t.endsWith(o)){let u=t.slice(s.length,-o.length||void 0);u&&(!r||HG(r,i))&&(r=i,n=u)}}return[r,n]}var VG=e=>Object.keys(e).reduce((t,r)=>{let n=r===""||r[0]!==".";if(t===void 0||t===n)return n;throw pi(YO,'"exports" cannot contain some keys starting with "." and some not')},void 0),WG=/^\w+:/,XO=(e,t,r)=>{if(!e)throw new Error('"exports" is required');t=t===""?".":`./${t}`,(typeof e=="string"||Array.isArray(e)||WO(e)&&VG(e))&&(e={".":e});let[n,i]=$G(e,t),s=lg(KO.Export,e[n],t,r,i);if(s.length===0)throw pi(kG,t==="."?'No "exports" main defined':`Package subpath '${t}' is not defined by "exports"`);for(let o of s)if(!o.startsWith("./")&&!WG.test(o))throw pi(cg,`Invalid "exports" target "${o}" defined in the package config`);return s};function Vr(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}var Vc=e=>{let t=gg.default[e];return function(r,...n){let i=`${e}:${n.join(":")}`,s=r?.get(i);return s===void 0&&(s=Reflect.apply(t,gg.default,n),r?.set(i,s)),s}},ft=Vc("existsSync"),YG=Vc("realpathSync"),KG=Vc("readFileSync"),Hc=Vc("statSync"),XG=(e,t,r)=>{for(;;){let n=Z.default.posix.join(e,t);if(ft(r,n))return n;let i=Z.default.dirname(e);if(i===e)return;e=i}},zG=/^\.{1,2}(\/.*)?$/,dg=e=>{let t=Vr(e);return zG.test(t)?t:`./${t}`};function QG(e,t=!1){let r=e.length,n=0,i="",s=0,o=16,a=0,u=0,c=0,l=0,f=0;function p(b,D){let R=0,B=0;for(;R<b||!D;){let I=e.charCodeAt(n);if(I>=48&&I<=57)B=B*16+I-48;else if(I>=65&&I<=70)B=B*16+I-65+10;else if(I>=97&&I<=102)B=B*16+I-97+10;else break;n++,R++}return R<b&&(B=-1),B}function h(b){n=b,i="",s=0,o=16,f=0}function _(){let b=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&_i(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&_i(e.charCodeAt(n)))for(n++;n<e.length&&_i(e.charCodeAt(n));)n++;else return f=3,e.substring(b,n);let D=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&_i(e.charCodeAt(n))){for(n++;n<e.length&&_i(e.charCodeAt(n));)n++;D=n}else f=3;return e.substring(b,D)}function g(){let b="",D=n;for(;;){if(n>=r){b+=e.substring(D,n),f=2;break}let R=e.charCodeAt(n);if(R===34){b+=e.substring(D,n),n++;break}if(R===92){if(b+=e.substring(D,n),n++,n>=r){f=2;break}switch(e.charCodeAt(n++)){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:let B=p(4,!0);B>=0?b+=String.fromCharCode(B):f=4;break;default:f=5}D=n;continue}if(R>=0&&R<=31)if(Ps(R)){b+=e.substring(D,n),f=2;break}else f=6;n++}return b}function T(){if(i="",f=0,s=n,u=a,l=c,n>=r)return s=r,o=17;let b=e.charCodeAt(n);if(fg(b)){do n++,i+=String.fromCharCode(b),b=e.charCodeAt(n);while(fg(b));return o=15}if(Ps(b))return n++,i+=String.fromCharCode(b),b===13&&e.charCodeAt(n)===10&&(n++,i+=`
`),a++,c=n,o=14;switch(b){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,i=g(),o=10;case 47:let D=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<r&&!Ps(e.charCodeAt(n));)n++;return i=e.substring(D,n),o=12}if(e.charCodeAt(n+1)===42){n+=2;let R=r-1,B=!1;for(;n<R;){let I=e.charCodeAt(n);if(I===42&&e.charCodeAt(n+1)===47){n+=2,B=!0;break}n++,Ps(I)&&(I===13&&e.charCodeAt(n)===10&&n++,a++,c=n)}return B||(n++,f=1),i=e.substring(D,n),o=13}return i+=String.fromCharCode(b),n++,o=16;case 45:if(i+=String.fromCharCode(b),n++,n===r||!_i(e.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=_(),o=11;default:for(;n<r&&A(b);)n++,b=e.charCodeAt(n);if(s!==n){switch(i=e.substring(s,n),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(b),n++,o=16}}function A(b){if(fg(b)||Ps(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){let b;do b=T();while(b>=12&&b<=15);return b}return{setPosition:h,getPosition:()=>n,scan:t?y:T,getToken:()=>o,getTokenValue:()=>i,getTokenOffset:()=>s,getTokenLength:()=>n-s,getTokenStartLine:()=>u,getTokenStartCharacter:()=>s-l,getTokenError:()=>f}}function fg(e){return e===32||e===9}function Ps(e){return e===10||e===13}function _i(e){return e>=48&&e<=57}var zO;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(zO||(zO={}));var $c;(function(e){e.DEFAULT={allowTrailingComma:!1}})($c||($c={}));function ZG(e,t=[],r=$c.DEFAULT){let n=null,i=[],s=[];function o(a){Array.isArray(i)?i.push(a):n!==null&&(i[n]=a)}return JG(e,{onObjectBegin:()=>{let a={};o(a),s.push(i),i=a,n=null},onObjectProperty:a=>{n=a},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{let a=[];o(a),s.push(i),i=a,n=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(a,u,c)=>{t.push({error:a,offset:u,length:c})}},r),i[0]}function JG(e,t,r=$c.DEFAULT){let n=QG(e,!1),i=[];function s(C){return C?()=>C(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function o(C){return C?()=>C(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(C){return C?F=>C(F,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function u(C){return C?F=>C(F,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let c=o(t.onObjectBegin),l=u(t.onObjectProperty),f=s(t.onObjectEnd),p=o(t.onArrayBegin),h=s(t.onArrayEnd),_=u(t.onLiteralValue),g=a(t.onSeparator),T=s(t.onComment),A=a(t.onError),y=r&&r.disallowComments,b=r&&r.allowTrailingComma;function D(){for(;;){let C=n.scan();switch(n.getTokenError()){case 4:R(14);break;case 5:R(15);break;case 3:R(13);break;case 1:y||R(11);break;case 2:R(12);break;case 6:R(16);break}switch(C){case 12:case 13:y?R(10):T();break;case 16:R(1);break;case 15:case 14:break;default:return C}}}function R(C,F=[],ot=[]){if(A(C),F.length+ot.length>0){let m=n.getToken();for(;m!==17;){if(F.indexOf(m)!==-1){D();break}else if(ot.indexOf(m)!==-1)break;m=D()}}}function B(C){let F=n.getTokenValue();return C?_(F):(l(F),i.push(F)),D(),!0}function I(){switch(n.getToken()){case 11:let C=n.getTokenValue(),F=Number(C);isNaN(F)&&(R(2),F=0),_(F);break;case 7:_(null);break;case 8:_(!0);break;case 9:_(!1);break;default:return!1}return D(),!0}function w(){return n.getToken()!==10?(R(3,[],[2,5]),!1):(B(!1),n.getToken()===6?(g(":"),D(),E()||R(4,[],[2,5])):R(5,[],[2,5]),i.pop(),!0)}function W(){c(),D();let C=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(C||R(4,[],[]),g(","),D(),n.getToken()===2&&b)break}else C&&R(6,[],[]);w()||R(4,[],[2,5]),C=!0}return f(),n.getToken()!==2?R(7,[2],[]):D(),!0}function ee(){p(),D();let C=!0,F=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(F||R(4,[],[]),g(","),D(),n.getToken()===4&&b)break}else F&&R(6,[],[]);C?(i.push(0),C=!1):i[i.length-1]++,E()||R(4,[],[4,5]),F=!0}return h(),C||i.pop(),n.getToken()!==4?R(8,[4],[]):D(),!0}function E(){switch(n.getToken()){case 3:return ee();case 1:return W();case 10:return B(!0);default:return I()}}return D(),n.getToken()===17?r.allowEmptyContent?!0:(R(4,[],[]),!1):E()?(n.getToken()!==17&&R(9,[],[]),!0):(R(4,[],[]),!1)}var QO;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(QO||(QO={}));var ZO;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(ZO||(ZO={}));var eq=ZG,JO;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(JO||(JO={}));var tv=(e,t)=>eq(KG(t,e,"utf8")),tq=Symbol("implicitBaseUrl"),rq=()=>{let{findPnpApi:e}=ev.default;return e&&e(process.cwd())},pg=(e,t,r,n)=>{let i=`resolveFromPackageJsonPath:${e}:${t}:${r}`;if(n!=null&&n.has(i))return n.get(i);let s=tv(e,n);if(!s)return;let o=t||"tsconfig.json";if(!r&&s.exports)try{let[a]=XO(s.exports,t,["require","types"]);o=a}catch{return!1}else!t&&s.tsconfig&&(o=s.tsconfig);return o=Z.default.join(e,"..",o),n?.set(i,o),o},_g="package.json",hg="tsconfig.json",nq=(e,t,r)=>{let n=e;if(e===".."&&(n=Z.default.join(n,hg)),e[0]==="."&&(n=Z.default.resolve(t,n)),Z.default.isAbsolute(n)){if(ft(r,n)){if(Hc(r,n).isFile())return n}else if(!n.endsWith(".json")){let h=`${n}.json`;if(ft(r,h))return h}return}let[i,...s]=e.split("/"),o=i[0]==="@"?`${i}/${s.shift()}`:i,a=s.join("/"),u=rq();if(u){let{resolveRequest:h}=u;try{if(o===e){let _=h(Z.default.join(o,_g),t);if(_){let g=pg(_,a,!1,r);if(g&&ft(r,g))return g}}else{let _;try{_=h(e,t,{extensions:[".json"]})}catch{_=h(Z.default.join(e,hg),t)}if(_)return _}}catch{}}let c=XG(t,Z.default.join("node_modules",o),r);if(!c||!Hc(r,c).isDirectory())return;let l=Z.default.join(c,_g);if(ft(r,l)){let h=pg(l,a,!1,r);if(h===!1)return;if(h&&ft(r,h)&&Hc(r,h).isFile())return h}let f=Z.default.join(c,a),p=f.endsWith(".json");if(!p){let h=`${f}.json`;if(ft(r,h))return h}if(ft(r,f)){if(Hc(r,f).isDirectory()){let h=Z.default.join(f,_g);if(ft(r,h)){let g=pg(h,"",!0,r);if(g&&ft(r,g))return g}let _=Z.default.join(f,hg);if(ft(r,_))return _}else if(p)return f}},iq=(e,t,r,n)=>{let i=nq(e,t,n);if(!i)throw new Error(`File '${e}' not found.`);if(r.has(i))throw new Error(`Circularity detected while resolving configuration: ${i}`);r.add(i);let s=Z.default.dirname(i),o=rv(i,n,r);delete o.references;let{compilerOptions:a}=o;if(a){let u=["baseUrl","outDir"];for(let c of u){let l=a[c];l&&(a[c]=Vr(Z.default.relative(t,Z.default.join(s,l)))||"./")}}return o.files&&(o.files=o.files.map(u=>Vr(Z.default.relative(t,Z.default.join(s,u))))),o.include&&(o.include=o.include.map(u=>Vr(Z.default.relative(t,Z.default.join(s,u))))),o.exclude&&(o.exclude=o.exclude.map(u=>Vr(Z.default.relative(t,Z.default.join(s,u))))),o},rv=(e,t,r=new Set)=>{let n;try{n=YG(t,e)}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}let i=tv(n,t)||{};if(typeof i!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);let s=Z.default.dirname(n);if(i.compilerOptions){let{compilerOptions:o}=i;o.paths&&!o.baseUrl&&(o[tq]=s)}if(i.extends){let o=Array.isArray(i.extends)?i.extends:[i.extends];delete i.extends;for(let a of o.reverse()){let u=iq(a,s,r,t),c={...u,...i,compilerOptions:{...u.compilerOptions,...i.compilerOptions}};u.watchOptions&&(c.watchOptions={...u.watchOptions,...i.watchOptions}),i=c}}if(i.compilerOptions){let{compilerOptions:o}=i,a=["baseUrl","rootDir"];for(let c of a){let l=o[c];if(l){let f=Z.default.resolve(s,l),p=dg(Z.default.relative(s,f));o[c]=p}}let{outDir:u}=o;u&&(Array.isArray(i.exclude)||(i.exclude=[]),i.exclude.includes(u)||i.exclude.push(u),o.outDir=dg(u))}else i.compilerOptions={};if(i.files&&(i.files=i.files.map(dg)),i.include&&(i.include=i.include.map(Vr)),i.watchOptions){let{watchOptions:o}=i;o.excludeDirectories&&(o.excludeDirectories=o.excludeDirectories.map(a=>Vr(Z.default.resolve(s,a))))}return i},nv=(e,t=new Map)=>rv(e,t);var{join:GY}=Z.default.posix;var sq=["node_modules","bower_components","jspm_packages"],qY=`(?!(${sq.join("|")})(/|$))`;var HY=process.platform==="win32";var pv=K(cv()),aq="yarn.build.json",_v=80,uq="-".repeat(_v);var Ag=class{tracer=new jt("yarn.build");project;configuration;pluginConfiguration;report;runCommand;cli;runLog;runGraph=new Gc;runLength=0;runTargets=[];runMutexes={};currentRunTarget;dryRun=!1;ignoreRunCache=!1;verbose=!1;continueOnError=!1;concurrency;limit;queue;entrypoints=new Set;excluded=new Set;runReporter=new dv.EventEmitter;ignoreDependencies=!1;failFast=!1;runReport={mutex:new Sg.Mutex,totalJobs:0,skipCount:0,previousOutput:"",successCount:0,failCount:0,ignoredCount:0,workspaces:{},done:!1};header="";nextUnitOfWork=[];errorLogFile;excludeWorkspacePredicate;checkIfRunIsRequiredCache={};planCache={};hasSetup=!1;constructor({project:t,report:r,runCommand:n,cli:i,configuration:s,pluginConfiguration:o,dryRun:a,ignoreRunCache:u,verbose:c,concurrency:l,continueOnError:f,excludeWorkspacePredicate:p,ignoreDependencies:h,failFast:_}){let g=l??(0,lv.cpus)().length;this.configuration=s,this.pluginConfiguration=o,this.project=t,this.report=r,this.runCommand=n,this.cli=i,this.dryRun=a,this.ignoreRunCache=u,this.verbose=c,this.concurrency=g,this.continueOnError=f,this.limit=Ef(g),this.queue=new Li({concurrency:g,carryoverConcurrencyCount:!0,timeout:5e4,throwOnTimeout:!0,autoStart:!0}),this.excludeWorkspacePredicate=p,this.verbose&&(this.errorLogFile=V.xfs.createWriteStream(this.getRunErrorPath(),{flags:"a"})),this.ignoreDependencies=h,this.failFast=_}async setup(){this.runLog=await this.readRunLog(),this.setupRunReporter(),this.hasSetup=!0}getRunErrorPath(){return V.ppath.resolve(this.project.cwd,"yarn.build-error.log")}getRunLogPath(){return V.ppath.resolve(this.project.cwd,".yarn",aq)}async readRunLog(){let t=new Map;try{let r=await V.xfs.readJsonPromise(this.getRunLogPath());if(r&&r.packages)for(let n in r.packages)t.set(n,{checksum:r.packages[n].checksum,status:r.packages[n].status,rerun:r.packages[n].rerun,command:this.runCommand})}catch{}return t}async saveRunLog(){if(!this.runLog)return;let t;try{t=await V.xfs.readJsonPromise(this.getRunLogPath())}catch{}let r={comment:"This is an auto-generated file, it keeps track of whats been built. This is a local file, don't store this in version control.",packages:{...t&&t.packages}};for(let[n]of this.runLog)r.packages[n]={...r.packages[n],...this.runLog.get(n)};await V.xfs.writeJsonPromise(this.getRunLogPath(),r)}setupRunReporter=()=>{this.runReporter.on("pending",(t,r,n)=>{this.runReport.mutex.acquire().then(i=>{this.runReport.workspaces[t]={name:n,stdout:[],stderr:[],done:!1,fail:!1,locator:r},i()})}),this.runReporter.on("start",(t,r,n,i)=>{this.runReport.mutex.acquire().then(s=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],start:Date.now(),runScript:i,name:n,locator:r},s()})}),this.runReporter.on("info",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stdout.push(r),n()})}),this.runReporter.on("error",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),n()})}),this.runReporter.on("success",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],done:!0},this.runReport.successCount++;let n=this.runReport.workspaces[t];if($e.default){let i=`\u2705 ${t}`.padEnd(60),s=Yr(0,n.runtimeSeconds??0).padStart(19);process.stdout.write(`${i}${s}
`)}r()})}),this.runReporter.on("skipped",t=>{this.runReport.mutex.acquire().then(r=>{if(this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].skipped=!0,this.runReport.skipCount++,r(),$e.default){let n=`\u23E9 ${t} `.padEnd(60),i="--".padStart(19);process.stdout.write(`${n}${i}
`)}})}),this.runReporter.on("ignored",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].ignored=!0,this.runReport.ignoredCount++,r();let n=this.runReport.workspaces[t],i=this.runLog?.get(`${t}#${this.runCommand}`);if($e.default){let s=`[IGNORE${i?.exitCode?`: ${i?.exitCode}`:""}] ${n.name} `.padEnd(60),o="--".padStart(19);process.stdout.write(`${s}${o}
`)}})}),this.runReporter.on("fail",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].fail=!0,this.runReport.failCount++,n();let i=this.runReport.workspaces[t],s=this.runLog?.get(`${t}#${this.runCommand}`);if($e.default){let o=`\u274C ${t}`.padEnd(50),a=`${s?.exitCode?`(exit code: ${s?.exitCode})`:"\u2192"} ${Yr(0,i.runtimeSeconds??0)}`.padStart(29);process.stdout.write(`${o}${a}
`)}})})};getDependenciesCount=async t=>{let r=0;for(let n of k.Manifest.hardDependencies)for(let i of t.manifest.getForScope(n).values())this.project.tryWorkspaceByDescriptor(i)!==null&&(r+=1);return r};removeFromExcluded(t){this.excluded.has(t)&&this.excluded.delete(t)}async addRunTarget(t){if(this.excluded.has(t))return;if(this.excludeWorkspacePredicate(t)){this.excluded.add(t);return}if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runGraph.addNode(t.relativeCwd);await this.plan(r,t)}plan=async(t,r)=>{if(!t)throw new Error("Internal error: lost reference to parent workspace. Please open an issue.");if(typeof this.planCache[r.relativeCwd]<"u")return this.planCache[r.relativeCwd];this.runGraph.checkCyclical(t);let n=!1,i=!1;if(this.runMutexes[r.relativeCwd]=new Sg.Mutex,this.ignoreDependencies===!1)for(let o of k.Manifest.hardDependencies)for(let a of r.manifest.getForScope(o).values()){let u=this.project.tryWorkspaceByDescriptor(a);if(u===null||this.excludeWorkspacePredicate(u)||typeof u.manifest.scripts.get(this.runCommand)>"u")continue;let c=this.runGraph.addNode(u.relativeCwd);t.addDependency(c),this.runGraph.checkCyclical(c),await this.plan(c,u)&&(this.runGraph.addRunCallback(c,this.createRunItem(u)),i=!0,this.removeFromExcluded(u))}let s=!1;if(r!==this.project.topLevelWorkspace&&(s=await this.checkIfRunIsRequired(r)),this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator),i||s)n=!0,this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator,`${r.manifest.name?.scope?`@${r.manifest.name?.scope}/`:""}${r.manifest.name?.name}`),this.runGraph.addRunCallback(t,this.createRunItem(r)),this.removeFromExcluded(r),this.entrypoints.add(t),this.runTargets.push(r);else{let o=this.runLog?.get(`${r.relativeCwd}#${this.runCommand}`);o&&this.runLog?.set(`${r.relativeCwd}#${this.runCommand}`,{checksum:o.checksum,status:"succeeded",rerun:!1,command:this.runCommand})}if(n){let o=r.getRecursiveWorkspaceDependents();for(let u of o)this.markWorkspaceForRerun(u);let a=Array.from(r.getRecursiveWorkspaceDependencies()).filter(u=>this.isWorkspaceMarkedForRerun(u));for(let u of a){let c=u.getRecursiveWorkspaceDependents();for(let l of c)this.markWorkspaceForRerun(l)}}return this.planCache[r.relativeCwd]=n,n};markWorkspaceForRerun(t){if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:r?.checksum??"",status:"succeeded",rerun:!0,command:this.runCommand})}isWorkspaceMarkedForRerun(t){return typeof t.manifest.scripts.get(this.runCommand)>"u"?!1:this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`)?.rerun??!1}async checkIfRunIsRequired(t){if(typeof this.checkIfRunIsRequiredCache[t.relativeCwd]<"u")return this.checkIfRunIsRequiredCache[t.relativeCwd];if(typeof t.manifest.scripts.get(this.runCommand)!="string")return this.checkIfRunIsRequiredCache[t.relativeCwd]=!1,!1;let r=!1;this.ignoreRunCache&&(r=!0);let n=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);n?.rerun&&(r=!0);for(let p of t.getRecursiveWorkspaceDependencies())if(this.checkIfRunIsRequiredCache[p.relativeCwd]===!0){r=!0;break}let i=TE(t.manifest.raw),s=i?.input!=null,o=typeof i?.output<"u",a=i.input??this.pluginConfiguration.folders.input,u=new Set,c=new Set(Array.isArray(a)?a:[a]),l=i.output??[],f=new Set(Array.isArray(l)?l:[l]);if(o||(typeof t?.manifest?.raw?.bin=="string"?f.add(t.manifest.raw.bin):typeof t?.manifest?.raw?.directories?.bin=="string"?f.add(t.manifest.raw.directories.bin):typeof t?.manifest?.raw?.files=="string"?f.add(t.manifest.raw.files):Array.isArray(t?.manifest?.raw?.files)?t.manifest.raw.files.forEach(p=>p&&f.add(p)):typeof t?.manifest?.raw?.main=="string"&&f.add(t.manifest.raw.main)),!s||!o)try{let p=i.tsconfig??"tsconfig.json",h=V.xfs.pathUtils.join(t.cwd,V.npath.toPortablePath(p));if(await V.xfs.existsPromise(h)){let g=nv(V.npath.fromPortablePath(h)),T=V.ppath.dirname(h);if(!s){if(g.compilerOptions?.incremental){let A=g.compilerOptions.tsBuildInfoFile??`${V.ppath.basename(h,V.ppath.extname(h))}.tsbuildinfo`,y=V.ppath.join(T,V.npath.toPortablePath(A)),b=V.ppath.relative(t.cwd,y);u.add(b)}g.include?.forEach(A=>{let y=V.ppath.join(T,V.npath.toPortablePath(A)),b=V.ppath.relative(t.cwd,y);c.add(b)}),g.exclude?.forEach(A=>{let y=V.ppath.join(T,V.npath.toPortablePath(A)),b=V.ppath.relative(t.cwd,y);u.add(b)})}if(!o&&g.compilerOptions?.outDir!=null){let A=V.ppath.join(T,V.npath.toPortablePath(V.npath.toPortablePath(g.compilerOptions.outDir))),y=V.ppath.relative(t.cwd,A);f.add(y)}}}catch(p){console.warn(t.relativeCwd,`
`,p)}f.size===0&&(Array.isArray(this.pluginConfiguration.folders.output)?this.pluginConfiguration.folders.output.forEach(p=>p&&f.add(p)):typeof this.pluginConfiguration.folders.output=="string"&&f.add(this.pluginConfiguration.folders.output));{let p=[...new Set(["node_modules",...f,...u])].map(g=>V.npath.toPortablePath(g)),h=[...c].map(g=>V.npath.toPortablePath(g)),_=await this.runReport.mutex.acquire();try{let g=await cq(t.cwd,h,p);if(n?.checksum!==g&&(r=!0),!r){let T=V.npath.fromPortablePath(t.cwd);(await Promise.all([...f].map(async y=>{try{return(await df(y,{dot:!0,cwd:T})).length===0}catch{return!1}}))).some(y=>y===!0)&&(r=!0)}this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:g,status:r?"succeeded":"pending",rerun:r,command:this.runCommand})}catch(g){this.runReport.workspaces[t.relativeCwd]?.stderr.push(new Error(`${t.relativeCwd}: failed to get lastModified (${g})`))}finally{_()}}return this.checkIfRunIsRequiredCache[t.relativeCwd]=r,r}performDryRun=async t=>await this.tracer.startSpan({name:"performDryRun",ctx:t},async({ctx:r})=>{let n=this.concurrency;this.concurrency=1;let i="",s={1:[]};this.runGraph.dryRunCallback=(u,c)=>{s[c]?s[c].push(u.id):s[c]=[u.id]},await this.runGraph.run(r,Array.from(this.entrypoints),!0);let o=(u,c,l,f)=>{let p=l?"\u2514\u2500":f&&l?"\u2514\u2500\u252C\u2500":"\u251C\u2500";return`${u==0?"":"  ".repeat(u)}${p}[${u}] ${c}`},a=Object.keys(s);return a.forEach((u,c)=>{let l=parseInt(u),f=s[l],p=c==a.length-1;f.forEach((h,_)=>{let g=this.runGraph.getNode(h);i+=o(l,h,_==f.length-1,p),g instanceof Rs&&g.skip&&(i+="(skip)"),i+=`
`})}),this.concurrency=n,i});run=async t=>await this.tracer.startSpan({name:"command supervisor run",ctx:t},async({ctx:r})=>{let n="";if(this.hasSetup===!1)throw new Error("RunSupervisor is not setup, you need to call await supervisor.setup()");if(this.runReport.runStart=Date.now(),($e.default||this.dryRun)&&(n+=`${this.formatHeader("Run Order")+`
`}`,n+=await this.performDryRun(r),$e.default||(n+=`${this.formatHeader(`Dry Run / Command: ${this.runCommand} / Total: ${this.runGraph.runSize}`,0,!0)+`
`}`),process.stdout.write(n),n="",this.dryRun))return!0;$e.default||It.pad(this.concurrency+3),$e.default&&process.stdout.write(`
${this.formatHeader(`Run / Command: ${this.runCommand} / Concurrency: ${this.concurrency}`,0,!1)+`
`}`),this.raf(this.waitUntilDone),this.currentRunTarget=this.runTargets.length>1?"All":this.runTargets[0]?.relativeCwd??"Nothing to run",$e.default||process.stderr.write(`
`),this.header=this.generateHeaderString(),await this.runGraph.run(r,Array.from(this.entrypoints));let i=await this.runReport.mutex.acquire();this.runReport.done=!0,i();let s=this.generateFinalReport();return typeof s=="string"&&process.stdout.write(`
${s}
`),await this.saveRunLog(),this.runReport.failCount===0});raf=t=>{setImmediate(()=>t(Date.now()))};waitUntilDone=t=>{if(this.runReport.done)return;let r=90,n="";$e.default?this.updateProgressCI(t):(n=this.generateProgressString(t),It.cursorUp(It.linesRequired(this.runReport.previousOutput,process.stdout.columns)),It.clearScreenDown()),typeof n<"u"&&typeof n=="string"&&process.stdout.write(n),this.runReport.previousOutput=n,lq(r).then(()=>{this.raf(this.waitUntilDone)})};grey=t=>k.formatUtils.pretty(this.configuration,t,"grey");formatHeader(t,r=0,n=!1){let i="-",s=i.repeat(r),o=this.grey(s),a=this.grey("["),u=this.grey("]"),c=`${o}${a} ${t} ${u}`,l=mr(c).length,f=n?"[ yarn.build ]":"",p=Math.max(_v-(l+f.length),0),h=i.repeat(p),_=this.grey(h),g=this.grey(f);return`${c}${_}${g}`}generateHeaderString(){return`${k.formatUtils.pretty(this.configuration,`${this.runCommand}`,k.FormatType.CODE)} for ${k.formatUtils.pretty(this.configuration,this.currentRunTarget?this.currentRunTarget:"",k.FormatType.SCOPE)}${this.dryRun?k.formatUtils.pretty(this.configuration," --dry-run",k.FormatType.NAME):""}`}updateRuntime(t){for(let r in this.runReport.workspaces){let n=this.runReport.workspaces[r];!n||!n.start||n.done||this.runReport.runStart&&(this.runReport.workspaces[r].runtimeSeconds=t-n.start)}}updateProgressCI(t){this.updateRuntime(t)}generateProgressString(t){let r="",n=o=>this.grey(`[${o}]`),i=k.formatUtils.pretty(this.configuration,"IDLE","grey");r+=this.formatHeader(this.generateHeaderString())+`
`,this.updateRuntime(t);let s=1;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(!a||!a.start||a.done)continue;let u=k.formatUtils.pretty(this.configuration,o,k.FormatType.PATH),c=k.formatUtils.pretty(this.configuration,`(${a.runScript})`,k.FormatType.REFERENCE),l=a.start?k.formatUtils.pretty(this.configuration,Yr(a.start,t),k.FormatType.RANGE):"",f=n(s++),p=" ".repeat(f.length-1),h=k.formatUtils.pretty(this.configuration,a.name,k.FormatType.NAME),_=`${f} ${h}${k.formatUtils.pretty(this.configuration,"@","grey")}${u} ${c} ${l}
`,g="",T="",A="";mr(_).length>=process.stdout.columns&&(g=`${f} ${u}${h}
`,T=`${p} ${c} ${l}
`,mr(g).length>=process.stdout.columns&&(g=Mi(`${f} ${u}
`,0,process.stdout.columns),T=Mi(`${p} ${h}
`,0,process.stdout.columns),A=Mi(`${p} ${c} ${l}
`,0,process.stdout.columns)),_=g+T+A),r+=_}for(s;s<this.concurrency+1;)r+=`${n(s++)} ${i}
`;return this.runReport.runStart&&(r+=this.generateRunCountString(t)),r}generateRunCountString=t=>{let r="";if(this.runReport.runStart){let n=k.formatUtils.pretty(this.configuration,`${this.runReport.successCount}`,"green"),i=k.formatUtils.pretty(this.configuration,`${this.runReport.failCount}`,"red"),s=k.formatUtils.pretty(this.configuration,`${this.runGraph.runSize}`,"white");r+=this.formatHeader(`${n}:${i}/${s} ${Yr(this.runReport.runStart,t)}`,0,!0)+`
`}return r};generateFinalReport=()=>{$e.default||(It.cursorUp(It.linesRequired(this.runReport.previousOutput,process.stdout.columns)),It.clearScreenDown());let t=!1,r="";if(this.runReport.failCount!==0&&(t=!0),this.verbose&&(t=!0),$e.default&&(t=!0),t){let s=[];r+=`${this.formatHeader(this.header)+`
`}`;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(a.fail&&s.push(o),!(this.runReport.failCount!==0&&a.fail===!1)){if(a.stdout.length!==0||a.stderr.length!==0){let u=this.formatHeader(`Output: ${k.formatUtils.pretty(this.configuration,o,k.FormatType.PATH)}`,2);r+=`
${u+`
`}`}a.stdout.length!==0&&a.stdout.forEach(u=>{u.split(`
`).forEach(l=>{typeof l<"u"&&l.length!==0&&(r+=`${l+`
`}`)})}),a.stderr.length!==0&&(r+=`
${"[stderr]"+`
`}`,a.stderr.forEach(c=>{(c instanceof Error?c.toString():`${c}`).split(`
`).forEach(p=>{typeof p<"u"&&p.length!==0&&(r+=`${p+`
`}`)})}))}}if(s.length>=2){r+=`${this.grey(uq)+`
`}`;let o=this.grey(`ERROR for script ${this.header}
The following packages returned an error.
`);r+=`${o}`,s.forEach(a=>{let u=`- ${k.formatUtils.pretty(this.configuration,a,k.FormatType.PATH)}`;r+=`${u+`
`}`})}}let n=this.formatHeader(`${k.formatUtils.pretty(this.configuration,`${this.runCommand} finished`,this.runReport.failCount===0?"green":"red")}${this.runReport.failCount!=0?k.formatUtils.pretty(this.configuration,` with ${this.runReport.failCount} errors`,"red"):""}`,0,!0)+`
`;if(r+=`
`+this.formatHeader("Summary")+`
`,this.runReport.runStart){let{successCount:s,failCount:o,ignoredCount:a,skipCount:u}=this.runReport,c=this.runGraph.runSize-a,l=c-o-s-u,f=k.formatUtils.pretty(this.configuration,`Success: ${s}`,"green"),p=k.formatUtils.pretty(this.configuration,`Fail: ${o}`,"red"),h=k.formatUtils.pretty(this.configuration,`Skipped: ${u}`,"white"),_=k.formatUtils.pretty(this.configuration,`Excluded: ${this.excluded.size}`,"white"),g=k.formatUtils.pretty(this.configuration,`Up to date: ${l}`,"white"),T=k.formatUtils.pretty(this.configuration,`Total: ${c}`,"white");if(r+=f+`
`,r+=g+`
`,r+=p+`
`,this.verbose&&o>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let y=this.runReport.workspaces[A];y.fail&&(r+=` - ${k.formatUtils.pretty(this.configuration,A,"grey")}${k.formatUtils.pretty(this.configuration,y.locator,"IDENT")}
`)}),r+=h+`
`,this.verbose&&u>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let y=this.runReport.workspaces[A];y.skipped&&(r+=` - ${k.formatUtils.pretty(this.configuration,A,"grey")}${k.formatUtils.pretty(this.configuration,y.locator,"IDENT")}
`)}),r+=_+`
`,this.verbose&&this.excluded.size>0)for(let A of this.excluded)r+=` - ${k.formatUtils.pretty(this.configuration,A.relativeCwd,"grey")}${k.formatUtils.pretty(this.configuration,A.anchoredLocator,"IDENT")}
`;r+=T+`
`+this.grey("---")+`
`}let i=50;for(let s in this.runReport.workspaces){let o=this.runReport.workspaces[s];i+=o.runtimeSeconds??0}if(this.runReport.runStart&&this.runGraph.runSize>1){let s=i,a=Date.now()-this.runReport.runStart,u=Yr(a,s);r+=`Cumulative: (cpu): ${Yr(0,i)}
`,r+=`Saved: ${u}
`}return this.runReport.runStart&&(r+="Runtime (wall): "+Yr(Date.now(),this.runReport.runStart)+`
`),r+=n,r+=`
`,r};createRunItem=t=>async(r,n)=>await this.limit(async()=>this.tracer.startSpan({name:"command",ctx:r},async({span:i,ctx:s})=>{let o=t.relativeCwd,a={[X.PACKAGE_NAME]:t.anchoredLocator.name,[X.PACKAGE_DIRECTORY]:t.relativeCwd,[X.PACKAGE_COMMAND]:this.runCommand};typeof t.anchoredLocator.scope=="string"&&(a[X.PACKAGE_SCOPE]=`@${t.anchoredLocator.scope}`);let u=t.manifest.scripts.get(this.runCommand);typeof u=="string"&&(a[X.YARN_BUILD_PACKAGE_RUN_COMMAND]=u);let c=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);if(this.runReporter.emit("start",t.relativeCwd,t.anchoredLocator,`${t.manifest.name?.scope?`@${t.manifest.name?.scope}/`:""}${t.manifest.name?.name}`,u),i.addEvent("start"),i.setAttributes(a),!u)return this.verbose&&this.runReporter.emit("info",t.relativeCwd,`[skip] No \`${this.runCommand}\` script in manifest.`),this.runReporter.emit("ignored",t.relativeCwd),i.addEvent("ignored"),!0;try{if(this.runReport.failCount!==0&&!this.continueOnError&&(this.runReporter.emit("skipped",t.relativeCwd),i.addEvent("skipped"),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"skipped",rerun:!1,command:this.runCommand}),i.addEvent("runReport failcount is not 0, exiting early"),this.continueOnError===!1))return!1;let l=await this.cli(s,this.runCommand,t.cwd,this.runReporter,o);if(i.setAttribute(X.YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT,l),l!==0)return this.runReporter.emit("fail",t.relativeCwd),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand,exitCode:`${l}`}),this.failFast===!0&&($e.default&&process.stdout.write(`--fail-fast is set, terminating all processes
`),qc()),!1;this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"succeeded",rerun:!1,command:this.runCommand}),this.runReporter.emit("success",t.relativeCwd)}catch(l){return this.runReporter.emit("fail",t.relativeCwd,l),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand}),(typeof l=="string"||l instanceof Error)&&i.recordException(l),i.setStatus({code:fv.SpanStatusCode.ERROR,message:"Command failed"}),this.continueOnError===!1&&(n(),qc()),!1}return!1}))},cq=async(e,t,r)=>{let n=await df(t,{cwd:V.npath.fromPortablePath(e),absolute:!0,expandDirectories:!0,dot:!0,ignore:r});n.sort();let i=await Promise.all(n.map(async s=>{let o=V.npath.toPortablePath(s),a=await V.xfs.statPromise(o);return{path:V.ppath.relative(e,o),size:a.isFile()?a.size:0,lastModified:a.isFile()?a.mtimeMs:0}}));return(0,pv.default)(i)},Yr=(e,t)=>{let r=Math.abs(t-e),n="",i=Math.trunc(r/6e4);return i&&(n+=`${i}m`,r-=i*6e4),r&&(i&&(n+=" "),n+=`${(r/1e3).toFixed(2)}s`),n};function lq(e){return new Promise(t=>setTimeout(t,e))}var hv=Ag;var gv=v("child_process"),mv=v("util"),dq=(0,mv.promisify)(gv.exec);function fq(e){let{commit:t,sinceBranch:r}=e;if(t)return`git diff --name-only ..${t}`;if(r)return`git diff --name-only ${r}...`;throw new Error("Unable to determine how to detect changes.")}async function Tg(e){try{let t=fq(e),{stdout:r}=await dq(t),n=r.split(`
`),s=e.root.project.workspaces.filter(o=>n.some(a=>a.startsWith(o.relativeCwd.replace(/^\.\//,"")))).reduce((o,a)=>{let u=a.getRecursiveWorkspaceDependents();return new Set([...o,...u,a])},new Set);return Array.from(s.values())}catch{return[]}}var Kr=v("@yarnpkg/core");var Ev=(e,t)=>{let r=[];for(let n of e.workspacesCwds){let i=t.workspacesByCwd.get(n);i&&r.push(i,...Ev(i,t))}return r},Sv=async({targetWorkspace:e,project:t,supervisor:r})=>{try{if(e.workspacesCwds.size!==0){let n=Ev(e,t);for(let i of n)for(let s of Kr.Manifest.hardDependencies){for(let o of i.manifest.getForScope(s).values()){let a=t.tryWorkspaceByDescriptor(o);a!==null&&await r.addRunTarget(a)}await r.addRunTarget(i)}await r.addRunTarget(e)}else await r.addRunTarget(e)}catch(n){if(n instanceof Os){let i=`${r.formatHeader("FATAL")}

You have a cyclic dependency.`,s=n.node.length<n.dep.length+4?"\u21B0":"",o=n.node.length>n.dep.length+4?"\u2934":"";i+=`

${Kr.formatUtils.pretty(r.configuration,n.node,"white")} ${s}
 \u21B3 ${Kr.formatUtils.pretty(r.configuration,n.dep,"red")} ${o}

`,i+=Kr.formatUtils.pretty(r.configuration,`
---

To fix this error you must remove the cyclic dependency.

Workspaces cannot directly or indirectly depend on each other. When running
the provided command yarn.build uses a parallelsied topological sort. This
maximises throughput (saving you time) while ensuring dependencies are run in
the order declared.

In a cyclic dependency A depends on B, which depends on A. Or in an indirect cyclic
dependency, A depends on B, which depends on C, and C depends on A.

In both cases A cannot be built, because to we cannot determine which one goes
first.

---
While some tooling may adapt to cyclic dependencies yarn.build cannot. Doing so
is unsound and unpredictable which goes against the stated goals of the tool.

In most cases this issue occurs by accident when you delcare a dependency on the
wrong package.

In some cases yuo may actually want the cyclic dependency. As that's not
possible, find the parts that are shared and move them to their own package
that both packages can depend on.
---

`,"grey"),i+=Kr.formatUtils.pretty(r.configuration,"FATAL: You have a cyclic dependency.","red"),console.error(i),process.exit(2)}else console.error("An error occured in yarn.build.",n)}};var Ns=K(L());var xs=class extends Wc.BaseCommand{static paths=[["build"]];json=fe.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});all=fe.Option.Boolean("-A,--all",!1,{description:"run for all workspaces of a project"});buildCommand=fe.Option.String("-c,--build-command","build",{description:'the command to be run in each package (if available), defaults to "build"'});interlaced=fe.Option.Boolean("-i,--interlaced",!0,{description:"If false it will instead buffer the output from each process and print the resulting buffers only after their source processes have exited. Defaults to false."});verbose=fe.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});dryRun=fe.Option.Boolean("-d,--dry-run",!1,{description:"simulate running a job, but not actually run it"});ignoreBuildCache=fe.Option.Boolean("-r,--ignore-cache",!1,{description:"every package will be built, regardless of whether is has changed or not."});maxConcurrency=fe.Option.String("-m,--max-concurrency",{description:"is the maximum number of jobs that can run at a time, defaults to the number of logical CPUs on the current machine."});continueOnError=fe.Option.Boolean("--continue-on-error",!1,{description:"if a job fails, continue with the rest"});failFast=fe.Option.Boolean("--fail-fast",!1,{description:"if a job fails, terminate other running jobs"});exclude=fe.Option.Array("--exclude",{description:"exclude specifc packages or glob paths from being built, including their dependencies."});excludeCurrent=fe.Option.Boolean("--exclude-current",!1,{description:"run for this workspaces dependencies, but not this workspace. Useful for running as part of a `dev` command."});onlyGitChanges=fe.Option.Boolean("--changes",!1,{description:"only run for packages that were changed in the last commit"});onlyGitChangesSinceCommit=fe.Option.String("--since",{description:"only run for packages that were changed since the given commit"});onlyGitChangesSinceBranch=fe.Option.String("--since-branch",{description:"only run for packages that have changes compared to the give branch. Uses 'git diff --name-only branch...'",arity:1});onlyCurrent=fe.Option.Boolean("--only-current",!1,{description:"only run for the current workspace"});ignoreDependencies=fe.Option.Boolean("--ignore-dependencies",!1,{description:"when true, don't run for packages this one depends on"});buildTargets=fe.Option.Rest({name:"workspaceNames"});static usage=fe.Command.Usage({category:"Build commands",description:"build a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are built in the right order.

    `});forceQuit=!1;commandType="build";async execute(){return await new jt("yarn.build").startSpan({name:`yarn ${this.commandType}`,propegateFromEnv:!0},async({span:r,ctx:n})=>{r.setAttributes({[X.YARN_BUILD_FLAGS_OUTPUT_JSON]:this.json,[X.YARN_BUILD_FLAGS_ALL]:this.all,[X.YARN_BUILD_FLAGS_TARGETS]:this.buildTargets,[X.YARN_BUILD_FLAGS_COMMAND]:this.buildCommand,[X.YARN_BUILD_FLAGS_INTERLACED]:this.interlaced,[X.YARN_BUILD_FLAGS_VERBOSE]:this.verbose,[X.YARN_BUILD_FLAGS_DRY_RUN]:this.dryRun,[X.YARN_BUILD_FLAGS_IGNORE_CACHE]:this.ignoreBuildCache,[X.YARN_BUILD_FLAGS_MAX_CONCURRENCY]:this.maxConcurrency,[X.YARN_BUILD_FLAGS_CONTINUE_ON_ERROR]:this.continueOnError,[X.YARN_BUILD_FLAGS_EXCLUDE]:this.exclude,[X.YARN_BUILD_FLAGS_EXCLUDE_CURRENT]:this.excludeCurrent,[X.YARN_BUILD_FLAGS_CHANGES]:this.onlyGitChanges,[X.YARN_BUILD_FLAGS_SINCE]:this.onlyGitChangesSinceCommit,[X.YARN_BUILD_FLAGS_SINCE_BRANCH]:this.onlyGitChangesSinceBranch,[X.YARN_BUILD_FLAGS_ONLY_CURRENT]:this.onlyCurrent});let i=await Fe.Configuration.find(this.context.cwd,this.context.plugins),{project:s,workspace:o}=await Fe.Project.find(i,this.context.cwd);if(!o)throw new Wc.WorkspaceRequiredError(s.cwd,this.context.cwd);let a=this.all?s.topLevelWorkspace:o,u=!1;a==s.topLevelWorkspace&&(u=!0);let c=[a,...this.buildTargets.length>0?a.getRecursiveWorkspaceChildren():[]];typeof this.onlyGitChangesSinceBranch=="string"?c=await Tg({root:s.topLevelWorkspace,sinceBranch:this.onlyGitChangesSinceBranch}):(this.onlyGitChanges||this.onlyGitChangesSinceCommit)&&(c=await Tg({root:s.topLevelWorkspace,commit:this.onlyGitChangesSinceCommit??"1"})),Array.isArray(this.exclude)||(this.exclude=[]),this.excludeCurrent&&this.exclude.push(Fe.structUtils.stringifyIdent(o.anchoredLocator)),!u&&this.onlyCurrent&&(this.maxConcurrency="1");let l=T=>!u&&this.onlyCurrent?T!=o:this.exclude?.some(A=>Is.default.isMatch(Fe.structUtils.stringifyIdent(T.anchoredLocator),A)||Is.default.isMatch(T.cwd,`${i.projectCwd}${yg.default.posix.sep}${A}`))??!1,f=T=>!u&&this.onlyCurrent?T==o:this.buildTargets.some(A=>Is.default.isMatch(Fe.structUtils.stringifyIdent(T.anchoredLocator),A)||Is.default.isMatch(T.cwd,`${i.projectCwd}${yg.default.posix.sep}${A}`)),p=this.buildTargets.length>0?c.filter(f):c,h=await AE(i);this.continueOnError=this.continueOnError??!!h.bail;let _=this.maxConcurrency===void 0?(0,Av.cpus)().length:parseInt(this.maxConcurrency);r.setAttributes({[X.YARN_BUILD_CONFIG_FOLDERS_INPUT]:h.folders.input,[X.YARN_BUILD_CONFIG_FOLDERS_OUTPUT]:h.folders.output,[X.YARN_BUILD_CONFIG_EXCLUDE]:h.exclude,[X.YARN_BUILD_CONFIG_BAIL]:h.bail,[X.YARN_BUILD_CONFIG_HIDE_BADGE]:h.hideYarnBuildBadge,[X.YARN_BUILD_CONFIG_MAX_CONCURRENCY]:_,[X.YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES]:this.ignoreDependencies});let g=await Fe.StreamReport.start({configuration:i,json:this.json,stdout:this.context.stdout,includeLogs:!0},async T=>{let A=async(D,R,B,I,w)=>{let W=Ns.trace.getSpan(D),ee=new Fe.miscUtils.BufferStream;ee.on("data",C=>I?.emit("info",w,C&&C.toString()));let E=new Fe.miscUtils.BufferStream;if(E.on("data",C=>I?.emit("error",w,C&&C.toString())),this.forceQuit)return ee.destroy(),E.destroy(),ee.end(),E.end(),2;try{let C=await this.cli.run(["run",R],{cwd:B,stdout:ee,stderr:E})||0;return ee.end(),E.end(),C}catch(C){W?.setStatus({code:Ns.SpanStatusCode.ERROR,message:C.message}),(typeof C=="string"||C instanceof Error)&&W?.recordException(C),ee.end(),E.end()}return 2},y=new hv({project:s,configuration:i,pluginConfiguration:h,report:T,runCommand:this.buildCommand,cli:A,dryRun:this.dryRun,ignoreRunCache:this.ignoreBuildCache,verbose:this.verbose,concurrency:_,continueOnError:this.continueOnError,excludeWorkspacePredicate:l,ignoreDependencies:this.ignoreDependencies,failFast:this.failFast});y.runReporter.on("force-quit",()=>{this.forceQuit=!0}),await y.setup();for(let D of p)await Sv({targetWorkspace:D,project:s,supervisor:y});await y.run(n)===!1&&(T.reportError(Fe.MessageName.BUILD_FAILED,"Build failed"),r.setStatus({code:Ns.SpanStatusCode.ERROR,message:"Build failed"}))});return fi.hasBeenTerminated=!0,g.exitCode()})}};var xv=v("@yarnpkg/cli"),Lv=v("@yarnpkg/core"),Kc=v("@yarnpkg/core"),wv=v("clipanion");var pt=e=>{if(e==null)throw new Error("Invalid name");return e.scope?`@${e.scope}/${e.name}`:e.name};var Tv=({workspace:e,project:t})=>{let r=Array.from(e.manifest.dependencies.values()).map(i=>pt(i)),n=Array.from(t.workspaces.values()).map(i=>pt(i.manifest.name));return r.filter(i=>n.includes(i))};var yv=({project:e,workspaceName:t})=>e.workspaces.find(n=>pt(n.manifest.name)===t);var Ov=v("@yarnpkg/core");var pq={firstCharacters:"\u27A4 ",tabString:"\u2502 "},bv="gray",Ls=({format:e,padding:t,step:r=5,characters:n=pq})=>{let{firstCharacters:i,tabString:s}=n,o=s.split("");for(let a=0;a<t;a++){let u=Array(r).fill(" ").map((c,l)=>l<o.length?o[l]:c).join("");process.stdout.write(e(u,bv))}process.stdout.write(e(i,bv))};var _q=Ov.FormatType.NAME,Rv="red",vv=({format:e,circular:t,dependency:r,parents:n,current:i,project:s,padding:o=0})=>{if(t){Ls({format:e,padding:o+1}),process.stdout.write(e(r,_q)),process.stdout.write(e(" -> circular dependency",Rv)),process.stdout.write(`
`);return}let a=yv({project:s,workspaceName:r});if(!a){Ls({format:e,padding:o+1}),process.stdout.write(r),process.stdout.write(e("-> incorrect dependency",Rv)),process.stdout.write(`
`);return}Yc({format:e,project:s,parent:i,parents:[...n,i],padding:o+1,workspace:a})};var Pv=({format:e,workspace:t,parent:r,parents:n,project:i,padding:s=0})=>{let o=Tv({workspace:t,project:i});for(let a of o)vv({format:e,workspace:t,project:i,padding:s,parent:r,parents:n,current:pt(t.manifest.name),circular:r===a||n.includes(a),dependency:a})};var Cv=v("@yarnpkg/core");var hq=Cv.FormatType.NAME,Iv=({format:e,workspace:t,padding:r=0})=>{let{name:n}=t.manifest,i=pt(n);Ls({format:e,padding:r}),process.stdout.write(e(i,hq)),process.stdout.write(`
`)};var Yc=({format:e,workspace:t,project:r,parents:n,padding:i=0,parent:s})=>{Iv({workspace:t,padding:i,format:e}),Pv({parents:n,workspace:t,project:r,padding:i,parent:s,format:e})};var ws=({padding:e})=>{for(let t=0;t<e;t++)process.stdout.write(`
`)};var Nv=({workspace:e,format:t})=>{let r=pt(e.manifest.name);process.stdout.write(`Build query for package: ${t(r,"bold")}`),ws({padding:1})};var Ms=class extends xv.BaseCommand{static paths=[["build","query"]];static usage=wv.Command.Usage({category:"Build commands",description:"prints out dependency graph for current package",details:`
          In a monorepo with internal packages that depend on others, this command
          will traverse the dependency graph and efficiently ensure, the packages
          are built in the right order.

        `});async execute(){let t=await Kc.Configuration.find(this.context.cwd,this.context.plugins),{project:r,workspace:n}=await Kc.Project.find(t,this.context.cwd);if(!n)return 0;let i=(s,o)=>Lv.formatUtils.pretty(t,s,o);return ws({padding:1}),Nv({workspace:n,format:i}),Yc({parents:[],workspace:n,project:r,format:i}),ws({padding:2}),0}};var gq={commands:[xs,Ms]},mq=gq;return qv(Eq);})();
/*! Bundled license information:

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel/index.js:
  (*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
return plugin;
}
};
