/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@ojkelly/plugin-build",
factory: function (require) {
var plugin=(()=>{var Ka=Object.create,Ge=Object.defineProperty,Va=Object.defineProperties,Ja=Object.getOwnPropertyDescriptor,Xa=Object.getOwnPropertyDescriptors,Za=Object.getOwnPropertyNames,Tn=Object.getOwnPropertySymbols,eu=Object.getPrototypeOf,On=Object.prototype.hasOwnProperty,ru=Object.prototype.propertyIsEnumerable;var Fn=(e,r,t)=>r in e?Ge(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,D=(e,r)=>{for(var t in r||(r={}))On.call(r,t)&&Fn(e,t,r[t]);if(Tn)for(var t of Tn(r))ru.call(r,t)&&Fn(e,t,r[t]);return e},Ie=(e,r)=>Va(e,Xa(r)),tu=e=>Ge(e,"__esModule",{value:!0});var C=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var b=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),nu=(e,r)=>{for(var t in r)Ge(e,t,{get:r[t],enumerable:!0})},iu=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Za(r))!On.call(e,n)&&n!=="default"&&Ge(e,n,{get:()=>r[n],enumerable:!(t=Ja(r,n))||t.enumerable});return e},_=e=>iu(tu(Ge(e!=null?Ka(eu(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Qn=b((Ap,Hn)=>{function jn(e){return Array.isArray(e)?e:[e]}var Bn="",qn=" ",Zr="\\",ou=/^\s+$/,su=/^\\!/,au=/^\\#/,uu=/\r?\n/g,cu=/^\.*\/|^\.+$/,et="/",$n=typeof Symbol!="undefined"?Symbol.for("node-ignore"):"node-ignore",lu=(e,r,t)=>Object.defineProperty(e,r,{value:t}),fu=/([0-z])-([0-z])/g,pu=e=>e.replace(fu,(r,t,n)=>t.charCodeAt(0)<=n.charCodeAt(0)?r:Bn),hu=e=>{let{length:r}=e;return e.slice(0,r-r%2)},du=[[/\\?\s+$/,e=>e.indexOf("\\")===0?qn:Bn],[/\\\s/g,()=>qn],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,r,t)=>r+6<t.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)\\\*(?=.+)/g,(e,r)=>`${r}[^\\/]*`],[/\\\\\\(?=[$.|*+(){^])/g,()=>Zr],[/\\\\/g,()=>Zr],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,r,t,n,i)=>r===Zr?`\\[${t}${hu(n)}${i}`:i==="]"&&n.length%2==0?`[${pu(t)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,r)=>`${r?`${r}[^/]+`:"[^/]*"}(?=$|\\/$)`]],Un=Object.create(null),mu=(e,r,t)=>{let n=Un[e];if(n)return n;let i=du.reduce((o,s)=>o.replace(s[0],s[1].bind(e)),e);return Un[e]=t?new RegExp(i,"i"):new RegExp(i)},rt=e=>typeof e=="string",gu=e=>e&&rt(e)&&!ou.test(e)&&e.indexOf("#")!==0,yu=e=>e.split(uu),Wn=class{constructor(r,t,n,i){this.origin=r,this.pattern=t,this.negative=n,this.regex=i}},vu=(e,r)=>{let t=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(su,"!").replace(au,"#");let i=mu(e,n,r);return new Wn(t,e,n,i)},bu=(e,r)=>{throw new r(e)},oe=(e,r,t)=>rt(e)?e?oe.isNotRelative(e)?t(`path should be a \`path.relative()\`d string, but got "${r}"`,RangeError):!0:t("path must not be empty",TypeError):t(`path must be a string, but got \`${r}\``,TypeError),Gn=e=>cu.test(e);oe.isNotRelative=Gn;oe.convert=e=>e;var Yn=class{constructor({ignorecase:r=!0}={}){this._rules=[],this._ignorecase=r,lu(this,$n,!0),this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(r){if(r&&r[$n]){this._rules=this._rules.concat(r._rules),this._added=!0;return}if(gu(r)){let t=vu(r,this._ignorecase);this._added=!0,this._rules.push(t)}}add(r){return this._added=!1,jn(rt(r)?yu(r):r).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(r){return this.add(r)}_testOne(r,t){let n=!1,i=!1;return this._rules.forEach(o=>{let{negative:s}=o;if(i===s&&n!==i||s&&!n&&!i&&!t)return;o.regex.test(r)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(r,t,n,i){let o=r&&oe.convert(r);return oe(o,r,bu),this._t(o,t,n,i)}_t(r,t,n,i){if(r in t)return t[r];if(i||(i=r.split(et)),i.pop(),!i.length)return t[r]=this._testOne(r,n);let o=this._t(i.join(et)+et,t,n,i);return t[r]=o.ignored?o:this._testOne(r,n)}ignores(r){return this._test(r,this._ignoreCache,!1).ignored}createFilter(){return r=>!this.ignores(r)}filter(r){return jn(r).filter(this.createFilter())}test(r){return this._test(r,this._testCache,!0)}},xr=e=>new Yn(e),wu=()=>!1,xu=e=>oe(e&&oe.convert(e),e,wu);xr.isPathValid=xu;xr.default=xr;Hn.exports=xr;if(typeof process!="undefined"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=t=>/^\\\\\?\\/.test(t)||/["<>|\u0000-\u001F]+/u.test(t)?t:t.replace(/\\/g,"/");oe.convert=e;let r=/^[a-z]:\//i;oe.isNotRelative=t=>r.test(t)||Gn(t)}});var zn=b(tt=>{var we=C("path"),fe=process.platform==="win32",pe=C("fs"),Cu=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function _u(){var e;if(Cu){var r=new Error;e=t}else e=n;return e;function t(i){i&&(r.message=i.message,i=r,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var o="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(o):console.error(o)}}}}function Eu(e){return typeof e=="function"?e:_u()}var Sp=we.normalize;fe?se=/(.*?)(?:[\/\\]+|$)/g:se=/(.*?)(?:[\/]+|$)/g;var se;fe?Ye=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Ye=/^[\/]*/;var Ye;tt.realpathSync=function(r,t){if(r=we.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];var n=r,i={},o={},s,a,u,c;f();function f(){var y=Ye.exec(r);s=y[0].length,a=y[0],u=y[0],c="",fe&&!o[u]&&(pe.lstatSync(u),o[u]=!0)}for(;s<r.length;){se.lastIndex=s;var l=se.exec(r);if(c=a,a+=l[0],u=c+l[1],s=se.lastIndex,!(o[u]||t&&t[u]===u)){var p;if(t&&Object.prototype.hasOwnProperty.call(t,u))p=t[u];else{var h=pe.lstatSync(u);if(!h.isSymbolicLink()){o[u]=!0,t&&(t[u]=u);continue}var d=null;if(!fe){var g=h.dev.toString(32)+":"+h.ino.toString(32);i.hasOwnProperty(g)&&(d=i[g])}d===null&&(pe.statSync(u),d=pe.readlinkSync(u)),p=we.resolve(c,d),t&&(t[u]=p),fe||(i[g]=d)}r=we.resolve(p,r.slice(s)),f()}}return t&&(t[n]=r),r};tt.realpath=function(r,t,n){if(typeof n!="function"&&(n=Eu(t),t=null),r=we.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return process.nextTick(n.bind(null,null,t[r]));var i=r,o={},s={},a,u,c,f;l();function l(){var y=Ye.exec(r);a=y[0].length,u=y[0],c=y[0],f="",fe&&!s[c]?pe.lstat(c,function(m){if(m)return n(m);s[c]=!0,p()}):process.nextTick(p)}function p(){if(a>=r.length)return t&&(t[i]=r),n(null,r);se.lastIndex=a;var y=se.exec(r);return f=u,u+=y[0],c=f+y[1],a=se.lastIndex,s[c]||t&&t[c]===c?process.nextTick(p):t&&Object.prototype.hasOwnProperty.call(t,c)?g(t[c]):pe.lstat(c,h)}function h(y,m){if(y)return n(y);if(!m.isSymbolicLink())return s[c]=!0,t&&(t[c]=c),process.nextTick(p);if(!fe){var v=m.dev.toString(32)+":"+m.ino.toString(32);if(o.hasOwnProperty(v))return d(null,o[v],c)}pe.stat(c,function(A){if(A)return n(A);pe.readlink(c,function(E,O){fe||(o[v]=O),d(E,O)})})}function d(y,m,v){if(y)return n(y);var A=we.resolve(f,m);t&&(t[v]=A),g(A)}function g(y){r=we.resolve(y,r.slice(a)),l()}}});var st=b((Rp,Xn)=>{Xn.exports=he;he.realpath=he;he.sync=ot;he.realpathSync=ot;he.monkeypatch=Au;he.unmonkeypatch=Su;var Re=C("fs"),nt=Re.realpath,it=Re.realpathSync,ku=process.version,Kn=/^v[0-5]\./.test(ku),Vn=zn();function Jn(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function he(e,r,t){if(Kn)return nt(e,r,t);typeof r=="function"&&(t=r,r=null),nt(e,r,function(n,i){Jn(n)?Vn.realpath(e,r,t):t(n,i)})}function ot(e,r){if(Kn)return it(e,r);try{return it(e,r)}catch(t){if(Jn(t))return Vn.realpathSync(e,r);throw t}}function Au(){Re.realpath=he,Re.realpathSync=ot}function Su(){Re.realpath=nt,Re.realpathSync=it}});var ei=b((Pp,Zn)=>{Zn.exports=function(e,r){for(var t=[],n=0;n<e.length;n++){var i=r(e[n],n);Iu(i)?t.push.apply(t,i):t.push(i)}return t};var Iu=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var oi=b((Tp,ii)=>{"use strict";ii.exports=ri;function ri(e,r,t){e instanceof RegExp&&(e=ti(e,t)),r instanceof RegExp&&(r=ti(r,t));var n=ni(e,r,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+e.length,n[1]),post:t.slice(n[1]+r.length)}}function ti(e,r){var t=r.match(e);return t?t[0]:null}ri.range=ni;function ni(e,r,t){var n,i,o,s,a,u=t.indexOf(e),c=t.indexOf(r,u+1),f=u;if(u>=0&&c>0){if(e===r)return[u,c];for(n=[],o=t.length;f>=0&&!a;)f==u?(n.push(f),u=t.indexOf(e,f+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<o&&(o=i,s=c),c=t.indexOf(r,f+1)),f=u<c&&u>=0?u:c;n.length&&(a=[o,s])}return a}});var hi=b((Op,pi)=>{var Ru=ei(),si=oi();pi.exports=Ou;var ai="\0SLASH"+Math.random()+"\0",ui="\0OPEN"+Math.random()+"\0",at="\0CLOSE"+Math.random()+"\0",ci="\0COMMA"+Math.random()+"\0",li="\0PERIOD"+Math.random()+"\0";function ut(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function Pu(e){return e.split("\\\\").join(ai).split("\\{").join(ui).split("\\}").join(at).split("\\,").join(ci).split("\\.").join(li)}function Tu(e){return e.split(ai).join("\\").split(ui).join("{").split(at).join("}").split(ci).join(",").split(li).join(".")}function fi(e){if(!e)return[""];var r=[],t=si("{","}",e);if(!t)return e.split(",");var n=t.pre,i=t.body,o=t.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=fi(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),r.push.apply(r,s),r}function Ou(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Pe(Pu(e),!0).map(Tu)):[]}function Fu(e){return"{"+e+"}"}function Lu(e){return/^-?0\d/.test(e)}function Nu(e,r){return e<=r}function Du(e,r){return e>=r}function Pe(e,r){var t=[],n=si("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=i||o,a=n.body.indexOf(",")>=0;if(!s&&!a)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+at+n.post,Pe(e)):[e];var u;if(s)u=n.body.split(/\.\./);else if(u=fi(n.body),u.length===1&&(u=Pe(u[0],!1).map(Fu),u.length===1)){var f=n.post.length?Pe(n.post,!1):[""];return f.map(function(le){return n.pre+u[0]+le})}var c=n.pre,f=n.post.length?Pe(n.post,!1):[""],l;if(s){var p=ut(u[0]),h=ut(u[1]),d=Math.max(u[0].length,u[1].length),g=u.length==3?Math.abs(ut(u[2])):1,y=Nu,m=h<p;m&&(g*=-1,y=Du);var v=u.some(Lu);l=[];for(var A=p;y(A,h);A+=g){var E;if(o)E=String.fromCharCode(A),E==="\\"&&(E="");else if(E=String(A),v){var O=d-E.length;if(O>0){var ve=new Array(O+1).join("0");A<0?E="-"+ve+E.slice(1):E=ve+E}}l.push(E)}}else l=Ru(u,function(H){return Pe(H,!1)});for(var ie=0;ie<l.length;ie++)for(var re=0;re<f.length;re++){var S=c+l[ie]+f[re];(!r||s||S)&&t.push(S)}return t}});var _r=b((Fp,bi)=>{bi.exports=Q;Q.Minimatch=N;var He={sep:"/"};try{He=C("path")}catch(e){}var ct=Q.GLOBSTAR=N.GLOBSTAR={},Mu=hi(),di={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},lt="[^/]",ft=lt+"*?",ju="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Bu="(?:(?!(?:\\/|^)\\.).)*?",mi=qu("().*{}+?[]^$\\!");function qu(e){return e.split("").reduce(function(r,t){return r[t]=!0,r},{})}var gi=/\/+/;Q.filter=$u;function $u(e,r){return r=r||{},function(t,n,i){return Q(t,e,r)}}function yi(e,r){e=e||{},r=r||{};var t={};return Object.keys(r).forEach(function(n){t[n]=r[n]}),Object.keys(e).forEach(function(n){t[n]=e[n]}),t}Q.defaults=function(e){if(!e||!Object.keys(e).length)return Q;var r=Q,t=function(i,o,s){return r.minimatch(i,o,yi(e,s))};return t.Minimatch=function(i,o){return new r.Minimatch(i,yi(e,o))},t};N.defaults=function(e){return!e||!Object.keys(e).length?N:Q.defaults(e).Minimatch};function Q(e,r,t){if(typeof r!="string")throw new TypeError("glob pattern string required");return t||(t={}),!t.nocomment&&r.charAt(0)==="#"?!1:r.trim()===""?e==="":new N(r,t).match(e)}function N(e,r){if(!(this instanceof N))return new N(e,r);if(typeof e!="string")throw new TypeError("glob pattern string required");r||(r={}),e=e.trim(),He.sep!=="/"&&(e=e.split(He.sep).join("/")),this.options=r,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}N.prototype.debug=function(){};N.prototype.make=Uu;function Uu(){if(!this._made){var e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();r.debug&&(this.debug=console.error),this.debug(this.pattern,t),t=this.globParts=t.map(function(n){return n.split(gi)}),this.debug(this.pattern,t),t=t.map(function(n,i,o){return n.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}}N.prototype.parseNegate=Wu;function Wu(){var e=this.pattern,r=!1,t=this.options,n=0;if(!t.nonegate){for(var i=0,o=e.length;i<o&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.substr(n)),this.negate=r}}Q.braceExpand=function(e,r){return vi(e,r)};N.prototype.braceExpand=vi;function vi(e,r){if(r||(this instanceof N?r=this.options:r={}),e=typeof e=="undefined"?this.pattern:e,typeof e=="undefined")throw new TypeError("undefined pattern");return r.nobrace||!e.match(/\{.*\}/)?[e]:Mu(e)}N.prototype.parse=Gu;var Cr={};function Gu(e,r){if(e.length>1024*64)throw new TypeError("pattern is too long");var t=this.options;if(!t.noglobstar&&e==="**")return ct;if(e==="")return"";var n="",i=!!t.nocase,o=!1,s=[],a=[],u,c=!1,f=-1,l=-1,p=e.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function d(){if(u){switch(u){case"*":n+=ft,i=!0;break;case"?":n+=lt,i=!0;break;default:n+="\\"+u;break}h.debug("clearStateChar %j %j",u,n),u=!1}}for(var g=0,y=e.length,m;g<y&&(m=e.charAt(g));g++){if(this.debug("%s	%s %s %j",e,g,n,m),o&&mi[m]){n+="\\"+m,o=!1;continue}switch(m){case"/":return!1;case"\\":d(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,g,n,m),c){this.debug("  in class"),m==="!"&&g===l+1&&(m="^"),n+=m;continue}h.debug("call clearStateChar %j",u),d(),u=m,t.noext&&d();continue;case"(":if(c){n+="(";continue}if(!u){n+="\\(";continue}s.push({type:u,start:g-1,reStart:n.length,open:di[u].open,close:di[u].close}),n+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,n),u=!1;continue;case")":if(c||!s.length){n+="\\)";continue}d(),i=!0;var v=s.pop();n+=v.close,v.type==="!"&&a.push(v),v.reEnd=n.length;continue;case"|":if(c||!s.length||o){n+="\\|",o=!1;continue}d(),n+="|";continue;case"[":if(d(),c){n+="\\"+m;continue}c=!0,l=g,f=n.length,n+=m;continue;case"]":if(g===l+1||!c){n+="\\"+m,o=!1;continue}if(c){var A=e.substring(l+1,g);try{RegExp("["+A+"]")}catch(Rn){var E=this.parse(A,Cr);n=n.substr(0,f)+"\\["+E[0]+"\\]",i=i||E[1],c=!1;continue}}i=!0,c=!1,n+=m;continue;default:d(),o?o=!1:mi[m]&&!(m==="^"&&c)&&(n+="\\"),n+=m}}for(c&&(A=e.substr(l+1),E=this.parse(A,Cr),n=n.substr(0,f)+"\\["+E[0],i=i||E[1]),v=s.pop();v;v=s.pop()){var O=n.slice(v.reStart+v.open.length);this.debug("setting tail",n,v),O=O.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Rn,Pn,Xr){return Xr||(Xr="\\"),Pn+Pn+Xr+"|"}),this.debug(`tail=%j
   %s`,O,O,v,n);var ve=v.type==="*"?ft:v.type==="?"?lt:"\\"+v.type;i=!0,n=n.slice(0,v.reStart)+ve+"\\("+O}d(),o&&(n+="\\\\");var ie=!1;switch(n.charAt(0)){case".":case"[":case"(":ie=!0}for(var re=a.length-1;re>-1;re--){var S=a[re],H=n.slice(0,S.reStart),le=n.slice(S.reStart,S.reEnd-8),be=n.slice(S.reEnd-8,S.reEnd),We=n.slice(S.reEnd);be+=We;var Ha=H.split("(").length-1,Vr=We;for(g=0;g<Ha;g++)Vr=Vr.replace(/\)[+*?]?/,"");We=Vr;var In="";We===""&&r!==Cr&&(In="$");var Qa=H+le+We+In+be;n=Qa}if(n!==""&&i&&(n="(?=.)"+n),ie&&(n=p+n),r===Cr)return[n,i];if(!i)return Qu(e);var za=t.nocase?"i":"";try{var Jr=new RegExp("^"+n+"$",za)}catch(Rn){return new RegExp("$.")}return Jr._glob=e,Jr._src=n,Jr}Q.makeRe=function(e,r){return new N(e,r||{}).makeRe()};N.prototype.makeRe=Yu;function Yu(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var r=this.options,t=r.noglobstar?ft:r.dot?ju:Bu,n=r.nocase?"i":"",i=e.map(function(o){return o.map(function(s){return s===ct?t:typeof s=="string"?zu(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(o){this.regexp=!1}return this.regexp}Q.match=function(e,r,t){t=t||{};var n=new N(r,t);return e=e.filter(function(i){return n.match(i)}),n.options.nonull&&!e.length&&e.push(r),e};N.prototype.match=Hu;function Hu(e,r){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var t=this.options;He.sep!=="/"&&(e=e.split(He.sep).join("/")),e=e.split(gi),this.debug(this.pattern,"split",e);var n=this.set;this.debug(this.pattern,"set",n);var i,o;for(o=e.length-1;o>=0&&(i=e[o],!i);o--);for(o=0;o<n.length;o++){var s=n[o],a=e;t.matchBase&&s.length===1&&(a=[i]);var u=this.matchOne(a,s,r);if(u)return t.flipNegate?!0:!this.negate}return t.flipNegate?!1:this.negate}N.prototype.matchOne=function(e,r,t){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var i=0,o=0,s=e.length,a=r.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var u=r[o],c=e[i];if(this.debug(r,u,c),u===!1)return!1;if(u===ct){this.debug("GLOBSTAR",[r,u,c]);var f=i,l=o+1;if(l===a){for(this.debug("** at the end");i<s;i++)if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return!1;return!0}for(;f<s;){var p=e[f];if(this.debug(`
globstar while`,e,f,r,l,p),this.matchOne(e.slice(f),r.slice(l),t))return this.debug("globstar found match!",f,s,p),!0;if(p==="."||p===".."||!n.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,f,r,l);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(t&&(this.debug(`
>>> no match, partial?`,e,f,r,l),f===s))}var h;if(typeof u=="string"?(n.nocase?h=c.toLowerCase()===u.toLowerCase():h=c===u,this.debug("string match",u,c,h)):(h=c.match(u),this.debug("pattern match",u,c,h)),!h)return!1}if(i===s&&o===a)return!0;if(i===s)return t;if(o===a){var d=i===s-1&&e[i]==="";return d}throw new Error("wtf?")};function Qu(e){return e.replace(/\\(.)/g,"$1")}function zu(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var wi=b((Lp,pt)=>{typeof Object.create=="function"?pt.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:pt.exports=function(r,t){if(t){r.super_=t;var n=function(){};n.prototype=t.prototype,r.prototype=new n,r.prototype.constructor=r}}});var xi=b((Np,dt)=>{try{if(ht=C("util"),typeof ht.inherits!="function")throw"";dt.exports=ht.inherits}catch(e){dt.exports=wi()}var ht});var kr=b((Dp,Er)=>{"use strict";function Ci(e){return e.charAt(0)==="/"}function _i(e){var r=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,t=r.exec(e),n=t[1]||"",i=Boolean(n&&n.charAt(1)!==":");return Boolean(t[2]||i)}Er.exports=process.platform==="win32"?_i:Ci;Er.exports.posix=Ci;Er.exports.win32=_i});var gt=b(de=>{de.setopts=ec;de.ownProp=Ei;de.makeAbs=Qe;de.finish=rc;de.mark=tc;de.isIgnored=Ai;de.childrenIgnored=nc;function Ei(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var Ku=C("fs"),Te=C("path"),Vu=_r(),ki=kr(),mt=Vu.Minimatch;function Ju(e,r){return e.localeCompare(r,"en")}function Xu(e,r){e.ignore=r.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(Zu))}function Zu(e){var r=null;if(e.slice(-3)==="/**"){var t=e.replace(/(\/\*\*)+$/,"");r=new mt(t,{dot:!0})}return{matcher:new mt(e,{dot:!0}),gmatcher:r}}function ec(e,r,t){if(t||(t={}),t.matchBase&&r.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}e.silent=!!t.silent,e.pattern=r,e.strict=t.strict!==!1,e.realpath=!!t.realpath,e.realpathCache=t.realpathCache||Object.create(null),e.follow=!!t.follow,e.dot=!!t.dot,e.mark=!!t.mark,e.nodir=!!t.nodir,e.nodir&&(e.mark=!0),e.sync=!!t.sync,e.nounique=!!t.nounique,e.nonull=!!t.nonull,e.nosort=!!t.nosort,e.nocase=!!t.nocase,e.stat=!!t.stat,e.noprocess=!!t.noprocess,e.absolute=!!t.absolute,e.fs=t.fs||Ku,e.maxLength=t.maxLength||Infinity,e.cache=t.cache||Object.create(null),e.statCache=t.statCache||Object.create(null),e.symlinks=t.symlinks||Object.create(null),Xu(e,t),e.changedCwd=!1;var n=process.cwd();Ei(t,"cwd")?(e.cwd=Te.resolve(t.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=t.root||Te.resolve(e.cwd,"/"),e.root=Te.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=ki(e.cwd)?e.cwd:Qe(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!t.nomount,t.nonegate=!0,t.nocomment=!0,e.minimatch=new mt(r,t),e.options=e.minimatch.options}function rc(e){for(var r=e.nounique,t=r?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(!o||Object.keys(o).length===0){if(e.nonull){var s=e.minimatch.globSet[n];r?t.push(s):t[s]=!0}}else{var a=Object.keys(o);r?t.push.apply(t,a):a.forEach(function(u){t[u]=!0})}}if(r||(t=Object.keys(t)),e.nosort||(t=t.sort(Ju)),e.mark){for(var n=0;n<t.length;n++)t[n]=e._mark(t[n]);e.nodir&&(t=t.filter(function(u){var c=!/\/$/.test(u),f=e.cache[u]||e.cache[Qe(e,u)];return c&&f&&(c=f!=="DIR"&&!Array.isArray(f)),c}))}e.ignore.length&&(t=t.filter(function(u){return!Ai(e,u)})),e.found=t}function tc(e,r){var t=Qe(e,r),n=e.cache[t],i=r;if(n){var o=n==="DIR"||Array.isArray(n),s=r.slice(-1)==="/";if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==r){var a=Qe(e,i);e.statCache[a]=e.statCache[t],e.cache[a]=e.cache[t]}}return i}function Qe(e,r){var t=r;return r.charAt(0)==="/"?t=Te.join(e.root,r):ki(r)||r===""?t=r:e.changedCwd?t=Te.resolve(e.cwd,r):t=Te.resolve(r),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function Ai(e,r){return e.ignore.length?e.ignore.some(function(t){return t.matcher.match(r)||!!(t.gmatcher&&t.gmatcher.match(r))}):!1}function nc(e,r){return e.ignore.length?e.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(r))}):!1}});var Ti=b(($p,Pi)=>{Pi.exports=Ri;Ri.GlobSync=L;var ic=st(),Si=_r(),jp=Si.Minimatch,Bp=bt().Glob,qp=C("util"),yt=C("path"),Ii=C("assert"),Ar=kr(),xe=gt(),oc=xe.setopts,vt=xe.ownProp,sc=xe.childrenIgnored,ac=xe.isIgnored;function Ri(e,r){if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new L(e,r).found}function L(e,r){if(!e)throw new Error("must provide pattern");if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof L))return new L(e,r);if(oc(this,e,r),this.noprocess)return this;var t=this.minimatch.set.length;this.matches=new Array(t);for(var n=0;n<t;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}L.prototype._finish=function(){if(Ii(this instanceof L),this.realpath){var e=this;this.matches.forEach(function(r,t){var n=e.matches[t]=Object.create(null);for(var i in r)try{i=e._makeAbs(i);var o=ic.realpathSync(i,e.realpathCache);n[o]=!0}catch(s){if(s.syscall==="stat")n[e._makeAbs(i)]=!0;else throw s}})}xe.finish(this)};L.prototype._process=function(e,r,t){Ii(this instanceof L);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),r);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var o=e.slice(n),s;i===null?s=".":((Ar(i)||Ar(e.join("/")))&&(!i||!Ar(i))&&(i="/"+i),s=i);var a=this._makeAbs(s);if(!sc(this,s)){var u=o[0]===Si.GLOBSTAR;u?this._processGlobStar(i,s,a,o,r,t):this._processReaddir(i,s,a,o,r,t)}};L.prototype._processReaddir=function(e,r,t,n,i,o){var s=this._readdir(t,o);if(!!s){for(var a=n[0],u=!!this.minimatch.negate,c=a._glob,f=this.dot||c.charAt(0)===".",l=[],p=0;p<s.length;p++){var h=s[p];if(h.charAt(0)!=="."||f){var d;u&&!e?d=!h.match(a):d=h.match(a),d&&l.push(h)}}var g=l.length;if(g!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<g;p++){var h=l[p];e&&(e.slice(-1)!=="/"?h=e+"/"+h:h=e+h),h.charAt(0)==="/"&&!this.nomount&&(h=yt.join(this.root,h)),this._emitMatch(i,h)}return}n.shift();for(var p=0;p<g;p++){var h=l[p],y;e?y=[e,h]:y=[h],this._process(y.concat(n),i,o)}}}};L.prototype._emitMatch=function(e,r){if(!ac(this,r)){var t=this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0,this.stat&&this._stat(r)}}};L.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var r,t,n;try{t=this.fs.lstatSync(e)}catch(o){if(o.code==="ENOENT")return null}var i=t&&t.isSymbolicLink();return this.symlinks[e]=i,!i&&t&&!t.isDirectory()?this.cache[e]="FILE":r=this._readdir(e,!1),r};L.prototype._readdir=function(e,r){var t;if(r&&!vt(this.symlinks,e))return this._readdirInGlobStar(e);if(vt(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};L.prototype._readdirEntries=function(e,r){if(!this.mark&&!this.stat)for(var t=0;t<r.length;t++){var n=r[t];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=r,r};L.prototype._readdirError=function(e,r){switch(r.code){case"ENOTSUP":case"ENOTDIR":var t=this._makeAbs(e);if(this.cache[t]="FILE",t===this.cwdAbs){var n=new Error(r.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=r.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw r;this.silent||console.error("glob error",r);break}};L.prototype._processGlobStar=function(e,r,t,n,i,o){var s=this._readdir(t,o);if(!!s){var a=n.slice(1),u=e?[e]:[],c=u.concat(a);this._process(c,i,!1);var f=s.length,l=this.symlinks[t];if(!(l&&o))for(var p=0;p<f;p++){var h=s[p];if(!(h.charAt(0)==="."&&!this.dot)){var d=u.concat(s[p],a);this._process(d,i,!0);var g=u.concat(s[p],n);this._process(g,i,!0)}}}};L.prototype._processSimple=function(e,r){var t=this._stat(e);if(this.matches[r]||(this.matches[r]=Object.create(null)),!!t){if(e&&Ar(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=yt.join(this.root,e):(e=yt.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e)}};L.prototype._stat=function(e){var r=this._makeAbs(e),t=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&vt(this.cache,r)){var s=this.cache[r];if(Array.isArray(s)&&(s="DIR"),!t||s==="DIR")return s;if(t&&s==="FILE")return!1}var n,i=this.statCache[r];if(!i){var o;try{o=this.fs.lstatSync(r)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[r]=!1,!1}if(o&&o.isSymbolicLink())try{i=this.fs.statSync(r)}catch(a){i=o}else i=o}this.statCache[r]=i;var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||s,t&&s==="FILE"?!1:s};L.prototype._mark=function(e){return xe.mark(this,e)};L.prototype._makeAbs=function(e){return xe.makeAbs(this,e)}});var wt=b((Up,Fi)=>{Fi.exports=Oi;function Oi(e,r){if(e&&r)return Oi(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}});var Ct=b((Wp,xt)=>{var Li=wt();xt.exports=Li(Sr);xt.exports.strict=Li(Ni);Sr.proto=Sr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Sr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Ni(this)},configurable:!0})});function Sr(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function Ni(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}});var Mi=b((Gp,Di)=>{var uc=wt(),ze=Object.create(null),cc=Ct();Di.exports=uc(lc);function lc(e,r){return ze[e]?(ze[e].push(r),null):(ze[e]=[r],fc(e))}function fc(e){return cc(function r(){var t=ze[e],n=t.length,i=pc(arguments);try{for(var o=0;o<n;o++)t[o].apply(null,i)}finally{t.length>n?(t.splice(0,n),process.nextTick(function(){r.apply(null,i)})):delete ze[e]}})}function pc(e){for(var r=e.length,t=[],n=0;n<r;n++)t[n]=e[n];return t}});var bt=b((Qp,Bi)=>{Bi.exports=_e;var hc=st(),ji=_r(),Yp=ji.Minimatch,dc=xi(),mc=C("events").EventEmitter,_t=C("path"),Et=C("assert"),Ke=kr(),kt=Ti(),Ce=gt(),gc=Ce.setopts,At=Ce.ownProp,St=Mi(),Hp=C("util"),yc=Ce.childrenIgnored,vc=Ce.isIgnored,bc=Ct();function _e(e,r,t){if(typeof r=="function"&&(t=r,r={}),r||(r={}),r.sync){if(t)throw new TypeError("callback provided to sync glob");return kt(e,r)}return new I(e,r,t)}_e.sync=kt;var wc=_e.GlobSync=kt.GlobSync;_e.glob=_e;function xc(e,r){if(r===null||typeof r!="object")return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e}_e.hasMagic=function(e,r){var t=xc({},r);t.noprocess=!0;var n=new I(e,t),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var o=0;o<i[0].length;o++)if(typeof i[0][o]!="string")return!0;return!1};_e.Glob=I;dc(I,mc);function I(e,r,t){if(typeof r=="function"&&(t=r,r=null),r&&r.sync){if(t)throw new TypeError("callback provided to sync glob");return new wc(e,r)}if(!(this instanceof I))return new I(e,r,t);gc(this,e,r),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof t=="function"&&(t=bc(t),this.on("error",t),this.on("end",function(u){t(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);o=!1;function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}}I.prototype._finish=function(){if(Et(this instanceof I),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Ce.finish(this),this.emit("end",this.found)}};I.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var r=this,t=0;t<this.matches.length;t++)this._realpathSet(t,n);function n(){--e==0&&r._finish()}};I.prototype._realpathSet=function(e,r){var t=this.matches[e];if(!t)return r();var n=Object.keys(t),i=this,o=n.length;if(o===0)return r();var s=this.matches[e]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),hc.realpath(a,i.realpathCache,function(c,f){c?c.syscall==="stat"?s[a]=!0:i.emit("error",c):s[f]=!0,--o==0&&(i.matches[e]=s,r())})})};I.prototype._mark=function(e){return Ce.mark(this,e)};I.prototype._makeAbs=function(e){return Ce.makeAbs(this,e)};I.prototype.abort=function(){this.aborted=!0,this.emit("abort")};I.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};I.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var r=0;r<e.length;r++){var t=e[r];this._emitMatch(t[0],t[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var r=0;r<n.length;r++){var i=n[r];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};I.prototype._process=function(e,r,t,n){if(Et(this instanceof I),Et(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,r,t,n]);return}for(var i=0;typeof e[i]=="string";)i++;var o;switch(i){case e.length:this._processSimple(e.join("/"),r,n);return;case 0:o=null;break;default:o=e.slice(0,i).join("/");break}var s=e.slice(i),a;o===null?a=".":((Ke(o)||Ke(e.join("/")))&&(!o||!Ke(o))&&(o="/"+o),a=o);var u=this._makeAbs(a);if(yc(this,a))return n();var c=s[0]===ji.GLOBSTAR;c?this._processGlobStar(o,a,u,s,r,t,n):this._processReaddir(o,a,u,s,r,t,n)}};I.prototype._processReaddir=function(e,r,t,n,i,o,s){var a=this;this._readdir(t,o,function(u,c){return a._processReaddir2(e,r,t,n,i,o,c,s)})};I.prototype._processReaddir2=function(e,r,t,n,i,o,s,a){if(!s)return a();for(var u=n[0],c=!!this.minimatch.negate,f=u._glob,l=this.dot||f.charAt(0)===".",p=[],h=0;h<s.length;h++){var d=s[h];if(d.charAt(0)!=="."||l){var g;c&&!e?g=!d.match(u):g=d.match(u),g&&p.push(d)}}var y=p.length;if(y===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<y;h++){var d=p[h];e&&(e!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=_t.join(this.root,d)),this._emitMatch(i,d)}return a()}n.shift();for(var h=0;h<y;h++){var d=p[h],m;e&&(e!=="/"?d=e+"/"+d:d=e+d),this._process([d].concat(n),i,o,a)}a()};I.prototype._emitMatch=function(e,r){if(!this.aborted&&!vc(this,r)){if(this.paused){this._emitQueue.push([e,r]);return}var t=Ke(r)?r:this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0;var i=this.statCache[t];i&&this.emit("stat",r,i),this.emit("match",r)}}};I.prototype._readdirInGlobStar=function(e,r){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,r);var t="lstat\0"+e,n=this,i=St(t,o);i&&n.fs.lstat(e,i);function o(s,a){if(s&&s.code==="ENOENT")return r();var u=a&&a.isSymbolicLink();n.symlinks[e]=u,!u&&a&&!a.isDirectory()?(n.cache[e]="FILE",r()):n._readdir(e,!1,r)}};I.prototype._readdir=function(e,r,t){if(!this.aborted&&(t=St("readdir\0"+e+"\0"+r,t),!!t)){if(r&&!At(this.symlinks,e))return this._readdirInGlobStar(e,t);if(At(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return t();if(Array.isArray(n))return t(null,n)}var i=this;i.fs.readdir(e,Cc(this,e,t))}};function Cc(e,r,t){return function(n,i){n?e._readdirError(r,n,t):e._readdirEntries(r,i,t)}}I.prototype._readdirEntries=function(e,r,t){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<r.length;n++){var i=r[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=r,t(null,r)}};I.prototype._readdirError=function(e,r,t){if(!this.aborted){switch(r.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(r.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=r.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",r),this.abort()),this.silent||console.error("glob error",r);break}return t()}};I.prototype._processGlobStar=function(e,r,t,n,i,o,s){var a=this;this._readdir(t,o,function(u,c){a._processGlobStar2(e,r,t,n,i,o,c,s)})};I.prototype._processGlobStar2=function(e,r,t,n,i,o,s,a){if(!s)return a();var u=n.slice(1),c=e?[e]:[],f=c.concat(u);this._process(f,i,!1,a);var l=this.symlinks[t],p=s.length;if(l&&o)return a();for(var h=0;h<p;h++){var d=s[h];if(!(d.charAt(0)==="."&&!this.dot)){var g=c.concat(s[h],u);this._process(g,i,!0,a);var y=c.concat(s[h],n);this._process(y,i,!0,a)}}a()};I.prototype._processSimple=function(e,r,t){var n=this;this._stat(e,function(i,o){n._processSimple2(e,r,i,o,t)})};I.prototype._processSimple2=function(e,r,t,n,i){if(this.matches[r]||(this.matches[r]=Object.create(null)),!n)return i();if(e&&Ke(e)&&!this.nomount){var o=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=_t.join(this.root,e):(e=_t.resolve(this.root,e),o&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e),i()};I.prototype._stat=function(e,r){var t=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return r();if(!this.stat&&At(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return r(null,i);if(n&&i==="FILE")return r()}var o,s=this.statCache[t];if(s!==void 0){if(s===!1)return r(null,s);var a=s.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?r():r(null,a,s)}var u=this,c=St("stat\0"+t,f);c&&u.fs.lstat(t,c);function f(l,p){if(p&&p.isSymbolicLink())return u.fs.stat(t,function(h,d){h?u._stat2(e,t,null,p,r):u._stat2(e,t,h,d,r)});u._stat2(e,t,l,p,r)}};I.prototype._stat2=function(e,r,t,n,i){if(t&&(t.code==="ENOENT"||t.code==="ENOTDIR"))return this.statCache[r]=!1,i();var o=e.slice(-1)==="/";if(this.statCache[r]=n,r.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||s,o&&s==="FILE"?i():i(null,s,n)}});var $i=b((zp,Ee)=>{var Ve=bt(),qi=function(e,r){return new Promise((t,n)=>{Ve(e,r,(i,o)=>i===null?t(o):n(i))})};Ee.exports=qi;Ee.exports.glob=Ve;Ee.exports.Glob=Ve.Glob;Ee.exports.hasMagic=Ve.hasMagic;Ee.exports.promise=qi;Ee.exports.sync=Ve.sync});var Oe=b((ah,ke)=>{"use strict";function Qi(e){return typeof e=="undefined"||e===null}function kc(e){return typeof e=="object"&&e!==null}function Ac(e){return Array.isArray(e)?e:Qi(e)?[]:[e]}function Sc(e,r){var t,n,i,o;if(r)for(o=Object.keys(r),t=0,n=o.length;t<n;t+=1)i=o[t],e[i]=r[i];return e}function Ic(e,r){var t="",n;for(n=0;n<r;n+=1)t+=e;return t}function Rc(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}ke.exports.isNothing=Qi;ke.exports.isObject=kc;ke.exports.toArray=Ac;ke.exports.repeat=Ic;ke.exports.isNegativeZero=Rc;ke.exports.extend=Sc});var Fe=b((uh,Ki)=>{"use strict";function zi(e,r){var t="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(t+='in "'+e.mark.name+'" '),t+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!r&&e.mark.snippet&&(t+=`

`+e.mark.snippet),n+" "+t):n}function Je(e,r){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=r,this.message=zi(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Je.prototype=Object.create(Error.prototype);Je.prototype.constructor=Je;Je.prototype.toString=function(r){return this.name+": "+zi(this,r)};Ki.exports=Je});var Ji=b((ch,Vi)=>{"use strict";var Xe=Oe();function Rt(e,r,t,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-r>a&&(o=" ... ",r=n-a+o.length),t-n>a&&(s=" ...",t=n+a-s.length),{str:o+e.slice(r,t).replace(/\t/g,"\u2192")+s,pos:n-r+o.length}}function Pt(e,r){return Xe.repeat(" ",r-e.length)+e}function Pc(e,r){if(r=Object.create(r||null),!e.buffer)return null;r.maxLength||(r.maxLength=79),typeof r.indent!="number"&&(r.indent=1),typeof r.linesBefore!="number"&&(r.linesBefore=3),typeof r.linesAfter!="number"&&(r.linesAfter=2);for(var t=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=t.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",u,c,f=Math.min(e.line+r.linesAfter,i.length).toString().length,l=r.maxLength-(r.indent+f+3);for(u=1;u<=r.linesBefore&&!(s-u<0);u++)c=Rt(e.buffer,n[s-u],i[s-u],e.position-(n[s]-n[s-u]),l),a=Xe.repeat(" ",r.indent)+Pt((e.line-u+1).toString(),f)+" | "+c.str+`
`+a;for(c=Rt(e.buffer,n[s],i[s],e.position,l),a+=Xe.repeat(" ",r.indent)+Pt((e.line+1).toString(),f)+" | "+c.str+`
`,a+=Xe.repeat("-",r.indent+f+3+c.pos)+`^
`,u=1;u<=r.linesAfter&&!(s+u>=i.length);u++)c=Rt(e.buffer,n[s+u],i[s+u],e.position-(n[s]-n[s+u]),l),a+=Xe.repeat(" ",r.indent)+Pt((e.line+u+1).toString(),f)+" | "+c.str+`
`;return a.replace(/\n$/,"")}Vi.exports=Pc});var M=b((lh,Zi)=>{"use strict";var Xi=Fe(),Tc=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Oc=["scalar","sequence","mapping"];function Fc(e){var r={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(n){r[String(n)]=t})}),r}function Lc(e,r){if(r=r||{},Object.keys(r).forEach(function(t){if(Tc.indexOf(t)===-1)throw new Xi('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=r,this.tag=e,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(t){return t},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.representName=r.representName||null,this.defaultStyle=r.defaultStyle||null,this.multi=r.multi||!1,this.styleAliases=Fc(r.styleAliases||null),Oc.indexOf(this.kind)===-1)throw new Xi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}Zi.exports=Lc});var Ft=b((fh,ro)=>{"use strict";var Ze=Fe(),Tt=M();function eo(e,r){var t=[];return e[r].forEach(function(n){var i=t.length;t.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),t[i]=n}),t}function Nc(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},r,t;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(r=0,t=arguments.length;r<t;r+=1)arguments[r].forEach(n);return e}function Ot(e){return this.extend(e)}Ot.prototype.extend=function(r){var t=[],n=[];if(r instanceof Tt)n.push(r);else if(Array.isArray(r))n=n.concat(r);else if(r&&(Array.isArray(r.implicit)||Array.isArray(r.explicit)))r.implicit&&(t=t.concat(r.implicit)),r.explicit&&(n=n.concat(r.explicit));else throw new Ze("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(o){if(!(o instanceof Tt))throw new Ze("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Ze("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Ze("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Tt))throw new Ze("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Ot.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=eo(i,"implicit"),i.compiledExplicit=eo(i,"explicit"),i.compiledTypeMap=Nc(i.compiledImplicit,i.compiledExplicit),i};ro.exports=Ot});var Lt=b((ph,to)=>{"use strict";var Dc=M();to.exports=new Dc("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}})});var Nt=b((hh,no)=>{"use strict";var Mc=M();no.exports=new Mc("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}})});var Dt=b((dh,io)=>{"use strict";var jc=M();io.exports=new jc("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}})});var Mt=b((mh,oo)=>{"use strict";var Bc=Ft();oo.exports=new Bc({explicit:[Lt(),Nt(),Dt()]})});var jt=b((gh,so)=>{"use strict";var qc=M();function $c(e){if(e===null)return!0;var r=e.length;return r===1&&e==="~"||r===4&&(e==="null"||e==="Null"||e==="NULL")}function Uc(){return null}function Wc(e){return e===null}so.exports=new qc("tag:yaml.org,2002:null",{kind:"scalar",resolve:$c,construct:Uc,predicate:Wc,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})});var Bt=b((yh,ao)=>{"use strict";var Gc=M();function Yc(e){if(e===null)return!1;var r=e.length;return r===4&&(e==="true"||e==="True"||e==="TRUE")||r===5&&(e==="false"||e==="False"||e==="FALSE")}function Hc(e){return e==="true"||e==="True"||e==="TRUE"}function Qc(e){return Object.prototype.toString.call(e)==="[object Boolean]"}ao.exports=new Gc("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Yc,construct:Hc,predicate:Qc,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})});var qt=b((vh,uo)=>{"use strict";var zc=Oe(),Kc=M();function Vc(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Jc(e){return 48<=e&&e<=55}function Xc(e){return 48<=e&&e<=57}function Zc(e){if(e===null)return!1;var r=e.length,t=0,n=!1,i;if(!r)return!1;if(i=e[t],(i==="-"||i==="+")&&(i=e[++t]),i==="0"){if(t+1===r)return!0;if(i=e[++t],i==="b"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(!Vc(e.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(!Jc(e.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;t<r;t++)if(i=e[t],i!=="_"){if(!Xc(e.charCodeAt(t)))return!1;n=!0}return!(!n||i==="_")}function el(e){var r=e,t=1,n;if(r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),n=r[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),r=r.slice(1),n=r[0]),r==="0")return 0;if(n==="0"){if(r[1]==="b")return t*parseInt(r.slice(2),2);if(r[1]==="x")return t*parseInt(r.slice(2),16);if(r[1]==="o")return t*parseInt(r.slice(2),8)}return t*parseInt(r,10)}function rl(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1==0&&!zc.isNegativeZero(e)}uo.exports=new Kc("tag:yaml.org,2002:int",{kind:"scalar",resolve:Zc,construct:el,predicate:rl,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var $t=b((bh,lo)=>{"use strict";var co=Oe(),tl=M(),nl=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function il(e){return!(e===null||!nl.test(e)||e[e.length-1]==="_")}function ol(e){var r,t;return r=e.replace(/_/g,"").toLowerCase(),t=r[0]==="-"?-1:1,"+-".indexOf(r[0])>=0&&(r=r.slice(1)),r===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:r===".nan"?NaN:t*parseFloat(r,10)}var sl=/^[-+]?[0-9]+e/;function al(e,r){var t;if(isNaN(e))switch(r){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(r){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(r){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(co.isNegativeZero(e))return"-0.0";return t=e.toString(10),sl.test(t)?t.replace("e",".e"):t}function ul(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!=0||co.isNegativeZero(e))}lo.exports=new tl("tag:yaml.org,2002:float",{kind:"scalar",resolve:il,construct:ol,predicate:ul,represent:al,defaultStyle:"lowercase"})});var Ut=b((wh,fo)=>{"use strict";fo.exports=Mt().extend({implicit:[jt(),Bt(),qt(),$t()]})});var Wt=b((xh,po)=>{"use strict";po.exports=Ut()});var Gt=b((Ch,go)=>{"use strict";var cl=M(),ho=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),mo=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ll(e){return e===null?!1:ho.exec(e)!==null||mo.exec(e)!==null}function fl(e){var r,t,n,i,o,s,a,u=0,c=null,f,l,p;if(r=ho.exec(e),r===null&&(r=mo.exec(e)),r===null)throw new Error("Date resolve error");if(t=+r[1],n=+r[2]-1,i=+r[3],!r[4])return new Date(Date.UTC(t,n,i));if(o=+r[4],s=+r[5],a=+r[6],r[7]){for(u=r[7].slice(0,3);u.length<3;)u+="0";u=+u}return r[9]&&(f=+r[10],l=+(r[11]||0),c=(f*60+l)*6e4,r[9]==="-"&&(c=-c)),p=new Date(Date.UTC(t,n,i,o,s,a,u)),c&&p.setTime(p.getTime()-c),p}function pl(e){return e.toISOString()}go.exports=new cl("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ll,construct:fl,instanceOf:Date,represent:pl})});var Yt=b((_h,yo)=>{"use strict";var hl=M();function dl(e){return e==="<<"||e===null}yo.exports=new hl("tag:yaml.org,2002:merge",{kind:"scalar",resolve:dl})});var Qt=b((Eh,vo)=>{"use strict";var ml=M(),Ht=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function gl(e){if(e===null)return!1;var r,t,n=0,i=e.length,o=Ht;for(t=0;t<i;t++)if(r=o.indexOf(e.charAt(t)),!(r>64)){if(r<0)return!1;n+=6}return n%8==0}function yl(e){var r,t,n=e.replace(/[\r\n=]/g,""),i=n.length,o=Ht,s=0,a=[];for(r=0;r<i;r++)r%4==0&&r&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(r));return t=i%4*6,t===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):t===18?(a.push(s>>10&255),a.push(s>>2&255)):t===12&&a.push(s>>4&255),new Uint8Array(a)}function vl(e){var r="",t=0,n,i,o=e.length,s=Ht;for(n=0;n<o;n++)n%3==0&&n&&(r+=s[t>>18&63],r+=s[t>>12&63],r+=s[t>>6&63],r+=s[t&63]),t=(t<<8)+e[n];return i=o%3,i===0?(r+=s[t>>18&63],r+=s[t>>12&63],r+=s[t>>6&63],r+=s[t&63]):i===2?(r+=s[t>>10&63],r+=s[t>>4&63],r+=s[t<<2&63],r+=s[64]):i===1&&(r+=s[t>>2&63],r+=s[t<<4&63],r+=s[64],r+=s[64]),r}function bl(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}vo.exports=new ml("tag:yaml.org,2002:binary",{kind:"scalar",resolve:gl,construct:yl,predicate:bl,represent:vl})});var zt=b((kh,bo)=>{"use strict";var wl=M(),xl=Object.prototype.hasOwnProperty,Cl=Object.prototype.toString;function _l(e){if(e===null)return!0;var r=[],t,n,i,o,s,a=e;for(t=0,n=a.length;t<n;t+=1){if(i=a[t],s=!1,Cl.call(i)!=="[object Object]")return!1;for(o in i)if(xl.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(r.indexOf(o)===-1)r.push(o);else return!1}return!0}function El(e){return e!==null?e:[]}bo.exports=new wl("tag:yaml.org,2002:omap",{kind:"sequence",resolve:_l,construct:El})});var Kt=b((Ah,wo)=>{"use strict";var kl=M(),Al=Object.prototype.toString;function Sl(e){if(e===null)return!0;var r,t,n,i,o,s=e;for(o=new Array(s.length),r=0,t=s.length;r<t;r+=1){if(n=s[r],Al.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[r]=[i[0],n[i[0]]]}return!0}function Il(e){if(e===null)return[];var r,t,n,i,o,s=e;for(o=new Array(s.length),r=0,t=s.length;r<t;r+=1)n=s[r],i=Object.keys(n),o[r]=[i[0],n[i[0]]];return o}wo.exports=new kl("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Sl,construct:Il})});var Vt=b((Sh,xo)=>{"use strict";var Rl=M(),Pl=Object.prototype.hasOwnProperty;function Tl(e){if(e===null)return!0;var r,t=e;for(r in t)if(Pl.call(t,r)&&t[r]!==null)return!1;return!0}function Ol(e){return e!==null?e:{}}xo.exports=new Rl("tag:yaml.org,2002:set",{kind:"mapping",resolve:Tl,construct:Ol})});var Rr=b((Ih,Co)=>{"use strict";Co.exports=Wt().extend({implicit:[Gt(),Yt()],explicit:[Qt(),zt(),Kt(),Vt()]})});var jo=b((Rh,en)=>{"use strict";var Ae=Oe(),_o=Fe(),Fl=Ji(),Ll=Rr(),me=Object.prototype.hasOwnProperty,Pr=1,Eo=2,ko=3,Tr=4,Jt=1,Nl=2,Ao=3,Dl=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ml=/[\x85\u2028\u2029]/,jl=/[,\[\]\{\}]/,So=/^(?:!|!!|![a-z\-]+!)$/i,Io=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ro(e){return Object.prototype.toString.call(e)}function te(e){return e===10||e===13}function Se(e){return e===9||e===32}function U(e){return e===9||e===32||e===10||e===13}function Le(e){return e===44||e===91||e===93||e===123||e===125}function Bl(e){var r;return 48<=e&&e<=57?e-48:(r=e|32,97<=r&&r<=102?r-97+10:-1)}function ql(e){return e===120?2:e===117?4:e===85?8:0}function $l(e){return 48<=e&&e<=57?e-48:-1}function Po(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Ul(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var To=new Array(256),Oo=new Array(256);for(var Ne=0;Ne<256;Ne++)To[Ne]=Po(Ne)?1:0,Oo[Ne]=Po(Ne);function Wl(e,r){this.input=e,this.filename=r.filename||null,this.schema=r.schema||Ll,this.onWarning=r.onWarning||null,this.legacy=r.legacy||!1,this.json=r.json||!1,this.listener=r.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Fo(e,r){var t={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return t.snippet=Fl(t),new _o(r,t)}function x(e,r){throw Fo(e,r)}function Or(e,r){e.onWarning&&e.onWarning.call(null,Fo(e,r))}var Lo={YAML:function(r,t,n){var i,o,s;r.version!==null&&x(r,"duplication of %YAML directive"),n.length!==1&&x(r,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&x(r,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&x(r,"unacceptable YAML version of the document"),r.version=n[0],r.checkLineBreaks=s<2,s!==1&&s!==2&&Or(r,"unsupported YAML version of the document")},TAG:function(r,t,n){var i,o;n.length!==2&&x(r,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],So.test(i)||x(r,"ill-formed tag handle (first argument) of the TAG directive"),me.call(r.tagMap,i)&&x(r,'there is a previously declared suffix for "'+i+'" tag handle'),Io.test(o)||x(r,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch(s){x(r,"tag prefix is malformed: "+o)}r.tagMap[i]=o}};function ge(e,r,t,n){var i,o,s,a;if(r<t){if(a=e.input.slice(r,t),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||x(e,"expected valid JSON character");else Dl.test(a)&&x(e,"the stream contains non-printable characters");e.result+=a}}function No(e,r,t,n){var i,o,s,a;for(Ae.isObject(t)||x(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),s=0,a=i.length;s<a;s+=1)o=i[s],me.call(r,o)||(r[o]=t[o],n[o]=!0)}function De(e,r,t,n,i,o,s,a,u){var c,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,f=i.length;c<f;c+=1)Array.isArray(i[c])&&x(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Ro(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Ro(i)==="[object Object]"&&(i="[object Object]"),i=String(i),r===null&&(r={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(c=0,f=o.length;c<f;c+=1)No(e,r,o[c],t);else No(e,r,o,t);else!e.json&&!me.call(t,i)&&me.call(r,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,x(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(r,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):r[i]=o,delete t[i];return r}function Xt(e){var r;r=e.input.charCodeAt(e.position),r===10?e.position++:r===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):x(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function F(e,r,t){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Se(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(r&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(te(i))for(Xt(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return t!==-1&&n!==0&&e.lineIndent<t&&Or(e,"deficient indentation"),n}function Fr(e){var r=e.position,t;return t=e.input.charCodeAt(r),!!((t===45||t===46)&&t===e.input.charCodeAt(r+1)&&t===e.input.charCodeAt(r+2)&&(r+=3,t=e.input.charCodeAt(r),t===0||U(t)))}function Zt(e,r){r===1?e.result+=" ":r>1&&(e.result+=Ae.repeat(`
`,r-1))}function Gl(e,r,t){var n,i,o,s,a,u,c,f,l=e.kind,p=e.result,h;if(h=e.input.charCodeAt(e.position),U(h)||Le(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),U(i)||t&&Le(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),U(i)||t&&Le(i))break}else if(h===35){if(n=e.input.charCodeAt(e.position-1),U(n))break}else{if(e.position===e.lineStart&&Fr(e)||t&&Le(h))break;if(te(h))if(u=e.line,c=e.lineStart,f=e.lineIndent,F(e,!1,-1),e.lineIndent>=r){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=u,e.lineStart=c,e.lineIndent=f;break}}a&&(ge(e,o,s,!1),Zt(e,e.line-u),o=s=e.position,a=!1),Se(h)||(s=e.position+1),h=e.input.charCodeAt(++e.position)}return ge(e,o,s,!1),e.result?!0:(e.kind=l,e.result=p,!1)}function Yl(e,r){var t,n,i;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(ge(e,n,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)n=e.position,e.position++,i=e.position;else return!0;else te(t)?(ge(e,n,i,!0),Zt(e,F(e,!1,r)),n=i=e.position):e.position===e.lineStart&&Fr(e)?x(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);x(e,"unexpected end of the stream within a single quoted scalar")}function Hl(e,r){var t,n,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return ge(e,t,e.position,!0),e.position++,!0;if(a===92){if(ge(e,t,e.position,!0),a=e.input.charCodeAt(++e.position),te(a))F(e,!1,r);else if(a<256&&To[a])e.result+=Oo[a],e.position++;else if((s=ql(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=Bl(a))>=0?o=(o<<4)+s:x(e,"expected hexadecimal character");e.result+=Ul(o),e.position++}else x(e,"unknown escape sequence");t=n=e.position}else te(a)?(ge(e,t,n,!0),Zt(e,F(e,!1,r)),t=n=e.position):e.position===e.lineStart&&Fr(e)?x(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}x(e,"unexpected end of the stream within a double quoted scalar")}function Ql(e,r){var t=!0,n,i,o,s=e.tag,a,u=e.anchor,c,f,l,p,h,d=Object.create(null),g,y,m,v;if(v=e.input.charCodeAt(e.position),v===91)f=93,h=!1,a=[];else if(v===123)f=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),v=e.input.charCodeAt(++e.position);v!==0;){if(F(e,!0,r),v=e.input.charCodeAt(e.position),v===f)return e.position++,e.tag=s,e.anchor=u,e.kind=h?"mapping":"sequence",e.result=a,!0;t?v===44&&x(e,"expected the node content, but found ','"):x(e,"missed comma between flow collection entries"),y=g=m=null,l=p=!1,v===63&&(c=e.input.charCodeAt(e.position+1),U(c)&&(l=p=!0,e.position++,F(e,!0,r))),n=e.line,i=e.lineStart,o=e.position,Me(e,r,Pr,!1,!0),y=e.tag,g=e.result,F(e,!0,r),v=e.input.charCodeAt(e.position),(p||e.line===n)&&v===58&&(l=!0,v=e.input.charCodeAt(++e.position),F(e,!0,r),Me(e,r,Pr,!1,!0),m=e.result),h?De(e,a,d,y,g,m,n,i,o):l?a.push(De(e,null,d,y,g,m,n,i,o)):a.push(g),F(e,!0,r),v=e.input.charCodeAt(e.position),v===44?(t=!0,v=e.input.charCodeAt(++e.position)):t=!1}x(e,"unexpected end of the stream within a flow collection")}function zl(e,r){var t,n,i=Jt,o=!1,s=!1,a=r,u=0,c=!1,f,l;if(l=e.input.charCodeAt(e.position),l===124)n=!1;else if(l===62)n=!0;else return!1;for(e.kind="scalar",e.result="";l!==0;)if(l=e.input.charCodeAt(++e.position),l===43||l===45)Jt===i?i=l===43?Ao:Nl:x(e,"repeat of a chomping mode identifier");else if((f=$l(l))>=0)f===0?x(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?x(e,"repeat of an indentation width identifier"):(a=r+f-1,s=!0);else break;if(Se(l)){do l=e.input.charCodeAt(++e.position);while(Se(l));if(l===35)do l=e.input.charCodeAt(++e.position);while(!te(l)&&l!==0)}for(;l!==0;){for(Xt(e),e.lineIndent=0,l=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&l===32;)e.lineIndent++,l=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),te(l)){u++;continue}if(e.lineIndent<a){i===Ao?e.result+=Ae.repeat(`
`,o?1+u:u):i===Jt&&o&&(e.result+=`
`);break}for(n?Se(l)?(c=!0,e.result+=Ae.repeat(`
`,o?1+u:u)):c?(c=!1,e.result+=Ae.repeat(`
`,u+1)):u===0?o&&(e.result+=" "):e.result+=Ae.repeat(`
`,u):e.result+=Ae.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,t=e.position;!te(l)&&l!==0;)l=e.input.charCodeAt(++e.position);ge(e,t,e.position,!1)}return!0}function Do(e,r){var t,n=e.tag,i=e.anchor,o=[],s,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,x(e,"tab characters must not be used in indentation")),!(u!==45||(s=e.input.charCodeAt(e.position+1),!U(s))));){if(a=!0,e.position++,F(e,!0,-1)&&e.lineIndent<=r){o.push(null),u=e.input.charCodeAt(e.position);continue}if(t=e.line,Me(e,r,ko,!1,!0),o.push(e.result),F(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>r)&&u!==0)x(e,"bad indentation of a sequence entry");else if(e.lineIndent<r)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function Kl(e,r,t){var n,i,o,s,a,u,c=e.tag,f=e.anchor,l={},p=Object.create(null),h=null,d=null,g=null,y=!1,m=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),v=e.input.charCodeAt(e.position);v!==0;){if(!y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,x(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(v===63||v===58)&&U(n))v===63?(y&&(De(e,l,p,h,d,null,s,a,u),h=d=g=null),m=!0,y=!0,i=!0):y?(y=!1,i=!0):x(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=n;else{if(s=e.line,a=e.lineStart,u=e.position,!Me(e,t,Eo,!1,!0))break;if(e.line===o){for(v=e.input.charCodeAt(e.position);Se(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),U(v)||x(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(De(e,l,p,h,d,null,s,a,u),h=d=g=null),m=!0,y=!1,i=!1,h=e.tag,d=e.result;else if(m)x(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=f,!0}else if(m)x(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=f,!0}if((e.line===o||e.lineIndent>r)&&(y&&(s=e.line,a=e.lineStart,u=e.position),Me(e,r,Tr,!0,i)&&(y?d=e.result:g=e.result),y||(De(e,l,p,h,d,g,s,a,u),h=d=g=null),F(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>r)&&v!==0)x(e,"bad indentation of a mapping entry");else if(e.lineIndent<r)break}return y&&De(e,l,p,h,d,null,s,a,u),m&&(e.tag=c,e.anchor=f,e.kind="mapping",e.result=l),m}function Vl(e){var r,t=!1,n=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&x(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(t=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",r=e.position,t){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(r,e.position),s=e.input.charCodeAt(++e.position)):x(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!U(s);)s===33&&(n?x(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(r-1,e.position+1),So.test(i)||x(e,"named tag handle cannot contain such characters"),n=!0,r=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(r,e.position),jl.test(o)&&x(e,"tag suffix cannot contain flow indicator characters")}o&&!Io.test(o)&&x(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch(a){x(e,"tag name is malformed: "+o)}return t?e.tag=o:me.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:x(e,'undeclared tag handle "'+i+'"'),!0}function Jl(e){var r,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&x(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),r=e.position;t!==0&&!U(t)&&!Le(t);)t=e.input.charCodeAt(++e.position);return e.position===r&&x(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(r,e.position),!0}function Xl(e){var r,t,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),r=e.position;n!==0&&!U(n)&&!Le(n);)n=e.input.charCodeAt(++e.position);return e.position===r&&x(e,"name of an alias node must contain at least one character"),t=e.input.slice(r,e.position),me.call(e.anchorMap,t)||x(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],F(e,!0,-1),!0}function Me(e,r,t,n,i){var o,s,a,u=1,c=!1,f=!1,l,p,h,d,g,y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=Tr===t||ko===t,n&&F(e,!0,-1)&&(c=!0,e.lineIndent>r?u=1:e.lineIndent===r?u=0:e.lineIndent<r&&(u=-1)),u===1)for(;Vl(e)||Jl(e);)F(e,!0,-1)?(c=!0,a=o,e.lineIndent>r?u=1:e.lineIndent===r?u=0:e.lineIndent<r&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||Tr===t)&&(Pr===t||Eo===t?g=r:g=r+1,y=e.position-e.lineStart,u===1?a&&(Do(e,y)||Kl(e,y,g))||Ql(e,g)?f=!0:(s&&zl(e,g)||Yl(e,g)||Hl(e,g)?f=!0:Xl(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&x(e,"alias node should not have any properties")):Gl(e,g,Pr===t)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(f=a&&Do(e,y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&x(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,p=e.implicitTypes.length;l<p;l+=1)if(d=e.implicitTypes[l],d.resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(me.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,h=e.typeMap.multi[e.kind||"fallback"],l=0,p=h.length;l<p;l+=1)if(e.tag.slice(0,h[l].tag.length)===h[l].tag){d=h[l];break}d||x(e,"unknown tag !<"+e.tag+">"),e.result!==null&&d.kind!==e.kind&&x(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):x(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function Zl(e){var r=e.position,t,n,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(F(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),t=e.position;s!==0&&!U(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(t,e.position),i=[],n.length<1&&x(e,"directive name must not be less than one character in length");s!==0;){for(;Se(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!te(s));break}if(te(s))break;for(t=e.position;s!==0&&!U(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}s!==0&&Xt(e),me.call(Lo,n)?Lo[n](e,n,i):Or(e,'unknown document directive "'+n+'"')}if(F(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,F(e,!0,-1)):o&&x(e,"directives end mark is expected"),Me(e,e.lineIndent-1,Tr,!1,!0),F(e,!0,-1),e.checkLineBreaks&&Ml.test(e.input.slice(r,e.position))&&Or(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Fr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,F(e,!0,-1));return}if(e.position<e.length-1)x(e,"end of the stream or a document separator is expected");else return}function Mo(e,r){e=String(e),r=r||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new Wl(e,r),n=e.indexOf("\0");for(n!==-1&&(t.position=n,x(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)Zl(t);return t.documents}function ef(e,r,t){r!==null&&typeof r=="object"&&typeof t=="undefined"&&(t=r,r=null);var n=Mo(e,t);if(typeof r!="function")return n;for(var i=0,o=n.length;i<o;i+=1)r(n[i])}function rf(e,r){var t=Mo(e,r);if(t.length!==0){if(t.length===1)return t[0];throw new _o("expected a single document in the stream, but found more")}}en.exports.loadAll=ef;en.exports.load=rf});var os=b((Ph,is)=>{"use strict";var Lr=Oe(),er=Fe(),tf=Rr(),Bo=Object.prototype.toString,qo=Object.prototype.hasOwnProperty,rn=65279,nf=9,rr=10,of=13,sf=32,af=33,uf=34,tn=35,cf=37,lf=38,ff=39,pf=42,$o=44,hf=45,Nr=58,df=61,mf=62,gf=63,yf=64,Uo=91,Wo=93,vf=96,Go=123,bf=124,Yo=125,j={};j[0]="\\0";j[7]="\\a";j[8]="\\b";j[9]="\\t";j[10]="\\n";j[11]="\\v";j[12]="\\f";j[13]="\\r";j[27]="\\e";j[34]='\\"';j[92]="\\\\";j[133]="\\N";j[160]="\\_";j[8232]="\\L";j[8233]="\\P";var wf=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],xf=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Cf(e,r){var t,n,i,o,s,a,u;if(r===null)return{};for(t={},n=Object.keys(r),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(r[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=e.compiledTypeMap.fallback[s],u&&qo.call(u.styleAliases,a)&&(a=u.styleAliases[a]),t[s]=a;return t}function _f(e){var r,t,n;if(r=e.toString(16).toUpperCase(),e<=255)t="x",n=2;else if(e<=65535)t="u",n=4;else if(e<=4294967295)t="U",n=8;else throw new er("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Lr.repeat("0",n-r.length)+r}var Ef=1,tr=2;function kf(e){this.schema=e.schema||tf,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Lr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Cf(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?tr:Ef,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ho(e,r){for(var t=Lr.repeat(" ",r),n=0,i=-1,o="",s,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(s=e.slice(n),n=a):(s=e.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=t),o+=s;return o}function nn(e,r){return`
`+Lr.repeat(" ",e.indent*r)}function Af(e,r){var t,n,i;for(t=0,n=e.implicitTypes.length;t<n;t+=1)if(i=e.implicitTypes[t],i.resolve(r))return!0;return!1}function Dr(e){return e===sf||e===nf}function nr(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==rn||65536<=e&&e<=1114111}function Qo(e){return nr(e)&&e!==rn&&e!==of&&e!==rr}function zo(e,r,t){var n=Qo(e),i=n&&!Dr(e);return(t?n:n&&e!==$o&&e!==Uo&&e!==Wo&&e!==Go&&e!==Yo)&&e!==tn&&!(r===Nr&&!i)||Qo(r)&&!Dr(r)&&e===tn||r===Nr&&i}function Sf(e){return nr(e)&&e!==rn&&!Dr(e)&&e!==hf&&e!==gf&&e!==Nr&&e!==$o&&e!==Uo&&e!==Wo&&e!==Go&&e!==Yo&&e!==tn&&e!==lf&&e!==pf&&e!==af&&e!==bf&&e!==df&&e!==mf&&e!==ff&&e!==uf&&e!==cf&&e!==yf&&e!==vf}function If(e){return!Dr(e)&&e!==Nr}function ir(e,r){var t=e.charCodeAt(r),n;return t>=55296&&t<=56319&&r+1<e.length&&(n=e.charCodeAt(r+1),n>=56320&&n<=57343)?(t-55296)*1024+n-56320+65536:t}function Ko(e){var r=/^\n* /;return r.test(e)}var Vo=1,on=2,Jo=3,Xo=4,je=5;function Rf(e,r,t,n,i,o,s,a){var u,c=0,f=null,l=!1,p=!1,h=n!==-1,d=-1,g=Sf(ir(e,0))&&If(ir(e,e.length-1));if(r||s)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=ir(e,u),!nr(c))return je;g=g&&zo(c,f,a),f=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=ir(e,u),c===rr)l=!0,h&&(p=p||u-d-1>n&&e[d+1]!==" ",d=u);else if(!nr(c))return je;g=g&&zo(c,f,a),f=c}p=p||h&&u-d-1>n&&e[d+1]!==" "}return!l&&!p?g&&!s&&!i(e)?Vo:o===tr?je:on:t>9&&Ko(e)?je:s?o===tr?je:on:p?Xo:Jo}function Pf(e,r,t,n,i){e.dump=function(){if(r.length===0)return e.quotingType===tr?'""':"''";if(!e.noCompatMode&&(wf.indexOf(r)!==-1||xf.test(r)))return e.quotingType===tr?'"'+r+'"':"'"+r+"'";var o=e.indent*Math.max(1,t),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=n||e.flowLevel>-1&&t>=e.flowLevel;function u(c){return Af(e,c)}switch(Rf(r,a,e.indent,s,u,e.quotingType,e.forceQuotes&&!n,i)){case Vo:return r;case on:return"'"+r.replace(/'/g,"''")+"'";case Jo:return"|"+Zo(r,e.indent)+es(Ho(r,o));case Xo:return">"+Zo(r,e.indent)+es(Ho(Tf(r,s),o));case je:return'"'+Of(r,s)+'"';default:throw new er("impossible error: invalid scalar style")}}()}function Zo(e,r){var t=Ko(e)?String(r):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return t+o+`
`}function es(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Tf(e,r){for(var t=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,t.lastIndex=c,rs(e.slice(0,c),r)}(),i=e[0]===`
`||e[0]===" ",o,s;s=t.exec(e);){var a=s[1],u=s[2];o=u[0]===" ",n+=a+(!i&&!o&&u!==""?`
`:"")+rs(u,r),i=o}return n}function rs(e,r){if(e===""||e[0]===" ")return e;for(var t=/ [^ ]/g,n,i=0,o,s=0,a=0,u="";n=t.exec(e);)a=n.index,a-i>r&&(o=s>i?s:a,u+=`
`+e.slice(i,o),i=o+1),s=a;return u+=`
`,e.length-i>r&&s>i?u+=e.slice(i,s)+`
`+e.slice(s+1):u+=e.slice(i),u.slice(1)}function Of(e){for(var r="",t=0,n,i=0;i<e.length;t>=65536?i+=2:i++)t=ir(e,i),n=j[t],!n&&nr(t)?(r+=e[i],t>=65536&&(r+=e[i+1])):r+=n||_f(t);return r}function Ff(e,r,t){var n="",i=e.tag,o,s,a;for(o=0,s=t.length;o<s;o+=1)a=t[o],e.replacer&&(a=e.replacer.call(t,String(o),a)),(ae(e,r,a,!1,!1)||typeof a=="undefined"&&ae(e,r,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function ts(e,r,t,n){var i="",o=e.tag,s,a,u;for(s=0,a=t.length;s<a;s+=1)u=t[s],e.replacer&&(u=e.replacer.call(t,String(s),u)),(ae(e,r+1,u,!0,!0,!1,!0)||typeof u=="undefined"&&ae(e,r+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=nn(e,r)),e.dump&&rr===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function Lf(e,r,t){var n="",i=e.tag,o=Object.keys(t),s,a,u,c,f;for(s=0,a=o.length;s<a;s+=1)f="",n!==""&&(f+=", "),e.condenseFlow&&(f+='"'),u=o[s],c=t[u],e.replacer&&(c=e.replacer.call(t,u,c)),!!ae(e,r,u,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),!!ae(e,r,c,!1,!1)&&(f+=e.dump,n+=f));e.tag=i,e.dump="{"+n+"}"}function Nf(e,r,t,n){var i="",o=e.tag,s=Object.keys(t),a,u,c,f,l,p;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new er("sortKeys must be a boolean or a function");for(a=0,u=s.length;a<u;a+=1)p="",(!n||i!=="")&&(p+=nn(e,r)),c=s[a],f=t[c],e.replacer&&(f=e.replacer.call(t,c,f)),!!ae(e,r+1,c,!0,!0,!0)&&(l=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,l&&(e.dump&&rr===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,l&&(p+=nn(e,r)),!!ae(e,r+1,f,!0,l)&&(e.dump&&rr===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=o,e.dump=i||"{}"}function ns(e,r,t){var n,i,o,s,a,u;for(i=t?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof r=="object"&&r instanceof a.instanceOf)&&(!a.predicate||a.predicate(r))){if(t?a.multi&&a.representName?e.tag=a.representName(r):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,Bo.call(a.represent)==="[object Function]")n=a.represent(r,u);else if(qo.call(a.represent,u))n=a.represent[u](r,u);else throw new er("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function ae(e,r,t,n,i,o,s){e.tag=null,e.dump=t,ns(e,t,!1)||ns(e,t,!0);var a=Bo.call(e.dump),u=n,c;n&&(n=e.flowLevel<0||e.flowLevel>r);var f=a==="[object Object]"||a==="[object Array]",l,p;if(f&&(l=e.duplicates.indexOf(t),p=l!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&r>0)&&(i=!1),p&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(f&&p&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(Nf(e,r,e.dump,i),p&&(e.dump="&ref_"+l+e.dump)):(Lf(e,r,e.dump),p&&(e.dump="&ref_"+l+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&r>0?ts(e,r-1,e.dump,i):ts(e,r,e.dump,i),p&&(e.dump="&ref_"+l+e.dump)):(Ff(e,r,e.dump),p&&(e.dump="&ref_"+l+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&Pf(e,e.dump,r,o,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new er("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function Df(e,r){var t=[],n=[],i,o;for(sn(e,t,n),i=0,o=n.length;i<o;i+=1)r.duplicates.push(t[n[i]]);r.usedDuplicates=new Array(o)}function sn(e,r,t){var n,i,o;if(e!==null&&typeof e=="object")if(i=r.indexOf(e),i!==-1)t.indexOf(i)===-1&&t.push(i);else if(r.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)sn(e[i],r,t);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)sn(e[n[i]],r,t)}function Mf(e,r){r=r||{};var t=new kf(r);t.noRefs||Df(e,t);var n=e;return t.replacer&&(n=t.replacer.call({"":n},"",n)),ae(t,0,n,!0,!0)?t.dump+`
`:""}is.exports.dump=Mf});var as=b((Th,q)=>{"use strict";var ss=jo(),jf=os();function an(e,r){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+r+" instead, which is now safe by default.")}}q.exports.Type=M();q.exports.Schema=Ft();q.exports.FAILSAFE_SCHEMA=Mt();q.exports.JSON_SCHEMA=Ut();q.exports.CORE_SCHEMA=Wt();q.exports.DEFAULT_SCHEMA=Rr();q.exports.load=ss.load;q.exports.loadAll=ss.loadAll;q.exports.dump=jf.dump;q.exports.YAMLException=Fe();q.exports.types={binary:Qt(),float:$t(),map:Dt(),null:jt(),pairs:Kt(),set:Vt(),timestamp:Gt(),bool:Bt(),int:qt(),merge:Yt(),omap:zt(),seq:Nt(),str:Lt()};q.exports.safeLoad=an("safeLoad","load");q.exports.safeLoadAll=an("safeLoadAll","loadAll");q.exports.safeDump=an("safeDump","dump")});var hs=b((Wh,$f)=>{$f.exports=[{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"SYSTEM_TEAMFOUNDATIONCOLLECTIONURI",pr:"SYSTEM_PULLREQUEST_PULLREQUESTID"},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY_BUILD_BASE",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}}]});var gs=b(G=>{"use strict";var ds=hs(),ne=process.env;Object.defineProperty(G,"_vendors",{value:ds.map(function(e){return e.constant})});G.name=null;G.isPR=null;ds.forEach(function(e){var r=Array.isArray(e.env)?e.env:[e.env],t=r.every(function(n){return ms(n)});if(G[e.constant]=t,t)switch(G.name=e.name,typeof e.pr){case"string":G.isPR=!!ne[e.pr];break;case"object":"env"in e.pr?G.isPR=e.pr.env in ne&&ne[e.pr.env]!==e.pr.ne:"any"in e.pr?G.isPR=e.pr.any.some(function(n){return!!ne[n]}):G.isPR=ms(e.pr);break;default:G.isPR=null}});G.isCI=!!(ne.CI||ne.CONTINUOUS_INTEGRATION||ne.BUILD_NUMBER||ne.RUN_ID||G.name);function ms(e){return typeof e=="string"?!!ne[e]:Object.keys(e).every(function(r){return ne[r]===e[r]})}});var vs=b((Yh,ys)=>{"use strict";ys.exports=gs().isCI});var ws=b((Hh,fn)=>{"use strict";var Uf=Object.prototype.hasOwnProperty,$="~";function ur(){}Object.create&&(ur.prototype=Object.create(null),new ur().__proto__||($=!1));function Wf(e,r,t){this.fn=e,this.context=r,this.once=t||!1}function bs(e,r,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new Wf(t,n||e,i),s=$?$+r:r;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function Br(e,r){--e._eventsCount==0?e._events=new ur:delete e._events[r]}function B(){this._events=new ur,this._eventsCount=0}B.prototype.eventNames=function(){var r=[],t,n;if(this._eventsCount===0)return r;for(n in t=this._events)Uf.call(t,n)&&r.push($?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r};B.prototype.listeners=function(r){var t=$?$+r:r,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};B.prototype.listenerCount=function(r){var t=$?$+r:r,n=this._events[t];return n?n.fn?1:n.length:0};B.prototype.emit=function(r,t,n,i,o,s){var a=$?$+r:r;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,f,l;if(u.fn){switch(u.once&&this.removeListener(r,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,s),!0}for(l=1,f=new Array(c-1);l<c;l++)f[l-1]=arguments[l];u.fn.apply(u.context,f)}else{var p=u.length,h;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(r,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!f)for(h=1,f=new Array(c-1);h<c;h++)f[h-1]=arguments[h];u[l].fn.apply(u[l].context,f)}}return!0};B.prototype.on=function(r,t,n){return bs(this,r,t,n,!1)};B.prototype.once=function(r,t,n){return bs(this,r,t,n,!0)};B.prototype.removeListener=function(r,t,n,i){var o=$?$+r:r;if(!this._events[o])return this;if(!t)return Br(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&Br(this,o);else{for(var a=0,u=[],c=s.length;a<c;a++)(s[a].fn!==t||i&&!s[a].once||n&&s[a].context!==n)&&u.push(s[a]);u.length?this._events[o]=u.length===1?u[0]:u:Br(this,o)}return this};B.prototype.removeAllListeners=function(r){var t;return r?(t=$?$+r:r,this._events[t]&&Br(this,t)):(this._events=new ur,this._eventsCount=0),this};B.prototype.off=B.prototype.removeListener;B.prototype.addListener=B.prototype.on;B.prefixed=$;B.EventEmitter=B;typeof fn!="undefined"&&(fn.exports=B)});var Cs=b((Qh,xs)=>{"use strict";xs.exports=(e,r)=>(r=r||(()=>{}),e.then(t=>new Promise(n=>{n(r())}).then(()=>t),t=>new Promise(n=>{n(r())}).then(()=>{throw t})))});var Es=b((zh,qr)=>{"use strict";var Gf=Cs(),pn=class extends Error{constructor(r){super(r);this.name="TimeoutError"}},_s=(e,r,t)=>new Promise((n,i)=>{if(typeof r!="number"||r<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(r===Infinity){n(e);return}let o=setTimeout(()=>{if(typeof t=="function"){try{n(t())}catch(u){i(u)}return}let s=typeof t=="string"?t:`Promise timed out after ${r} milliseconds`,a=t instanceof Error?t:new pn(s);typeof e.cancel=="function"&&e.cancel(),i(a)},r);Gf(e.then(n,i),()=>{clearTimeout(o)})});qr.exports=_s;qr.exports.default=_s;qr.exports.TimeoutError=pn});var ks=b(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});function Yf(e,r,t){let n=0,i=e.length;for(;i>0;){let o=i/2|0,s=n+o;t(e[s],r)<=0?(n=++s,i-=o+1):i=o}return n}hn.default=Yf});var Ss=b(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var Hf=ks(),As=class{constructor(){this._queue=[]}enqueue(r,t){t=Object.assign({priority:0},t);let n={priority:t.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(n);return}let i=Hf.default(this._queue,n,(o,s)=>s.priority-o.priority);this._queue.splice(i,0,n)}dequeue(){let r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(t=>t.priority===r.priority).map(t=>t.run)}get size(){return this._queue.length}};dn.default=As});var Ps=b(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var Qf=ws(),Is=Es(),zf=Ss(),$r=()=>{},Kf=new Is.TimeoutError,Rs=class extends Qf{constructor(r){var t,n,i,o;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=$r,this._resolveIdle=$r,r=Object.assign({carryoverConcurrencyCount:!1,intervalCap:Infinity,interval:0,concurrency:Infinity,autoStart:!0,queueClass:zf.default},r),!(typeof r.intervalCap=="number"&&r.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=r.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof r.intervalCap})`);if(r.interval===void 0||!(Number.isFinite(r.interval)&&r.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=r.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof r.interval})`);this._carryoverConcurrencyCount=r.carryoverConcurrencyCount,this._isIntervalIgnored=r.intervalCap===Infinity||r.interval===0,this._intervalCap=r.intervalCap,this._interval=r.interval,this._queue=new r.queueClass,this._queueClass=r.queueClass,this.concurrency=r.concurrency,this._timeout=r.timeout,this._throwOnTimeout=r.throwOnTimeout===!0,this._isPaused=r.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=$r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=$r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let r=Date.now();if(this._intervalId===void 0){let t=this._intervalEnd-r;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let r=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return t?(this.emit("active"),t(),r&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(r){if(!(typeof r=="number"&&r>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${r}\` (${typeof r})`);this._concurrency=r,this._processQueue()}async add(r,t={}){return new Promise((n,i)=>{let o=async()=>{this._pendingCount++,this._intervalCount++;try{let s=this._timeout===void 0&&t.timeout===void 0?r():Is.default(Promise.resolve(r()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&i(Kf)});n(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(o,t),this._tryToStartAnother(),this.emit("add")})}async addAll(r,t){return Promise.all(r.map(async n=>this.add(n,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(r=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),r()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(r=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),r()}})}get size(){return this._queue.size}sizeBy(r){return this._queue.filter(r).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(r){this._timeout=r}};mn.default=Rs});var Os=b((Xh,gn)=>{"use strict";var Ts=(e,...r)=>new Promise(t=>{t(e(...r))});gn.exports=Ts;gn.exports.default=Ts});var Ls=b((Zh,yn)=>{"use strict";var Vf=Os(),Fs=e=>{if(!((Number.isInteger(e)||e===Infinity)&&e>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let r=[],t=0,n=()=>{t--,r.length>0&&r.shift()()},i=(a,u,...c)=>{t++;let f=Vf(a,...c);u(f),f.then(n,n)},o=(a,u,...c)=>{t<e?i(a,u,...c):r.push(i.bind(null,a,u,...c))},s=(a,...u)=>new Promise(c=>o(a,c,...u));return Object.defineProperties(s,{activeCount:{get:()=>t},pendingCount:{get:()=>r.length},clearQueue:{value:()=>{r.length=0}}}),s};yn.exports=Fs;yn.exports.default=Fs});var Ds=b(bn=>{"use strict";var vn=class{constructor(r){this.tasks=[],this.count=r}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let r=this.tasks.shift();if(r===void 0)throw"Unexpected undefined value in tasks list";r()}}acquire(){return new Promise((r,t)=>{var n=()=>{var i=!1;r(()=>{i||(i=!0,this.count++,this.sched())})};this.tasks.push(n),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))})}use(r){return this.acquire().then(t=>r().then(n=>(t(),n)).catch(n=>{throw t(),n}))}};bn.Semaphore=vn;var Ns=class extends vn{constructor(){super(1)}};bn.Mutex=Ns});var js=b((rd,Ms)=>{"use strict";Ms.exports=({onlyFirst:e=!1}={})=>{let r=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(r,e?void 0:"g")}});var wn=b((td,Bs)=>{"use strict";var Jf=js();Bs.exports=e=>typeof e=="string"?e.replace(Jf(),""):e});var $s=b((nd,xn)=>{"use strict";var qs=e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141);xn.exports=qs;xn.exports.default=qs});var Gs=b((id,Ws)=>{"use strict";var Us="[\uD800-\uDBFF][\uDC00-\uDFFF]",Xf=e=>e&&e.exact?new RegExp(`^${Us}$`):new RegExp(Us,"g");Ws.exports=Xf});var Hs=b((od,Ys)=>{"use strict";Ys.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Cn=b((sd,zs)=>{var cr=Hs(),Qs={};for(let e of Object.keys(cr))Qs[cr[e]]=e;var w={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};zs.exports=w;for(let e of Object.keys(w)){if(!("channels"in w[e]))throw new Error("missing channels property: "+e);if(!("labels"in w[e]))throw new Error("missing channel labels property: "+e);if(w[e].labels.length!==w[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:r,labels:t}=w[e];delete w[e].channels,delete w[e].labels,Object.defineProperty(w[e],"channels",{value:r}),Object.defineProperty(w[e],"labels",{value:t})}w.rgb.hsl=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.min(r,t,n),o=Math.max(r,t,n),s=o-i,a,u;o===i?a=0:r===o?a=(t-n)/s:t===o?a=2+(n-r)/s:n===o&&(a=4+(r-t)/s),a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+o)/2;return o===i?u=0:c<=.5?u=s/(o+i):u=s/(2-o-i),[a,u*100,c*100]};w.rgb.hsv=function(e){let r,t,n,i,o,s=e[0]/255,a=e[1]/255,u=e[2]/255,c=Math.max(s,a,u),f=c-Math.min(s,a,u),l=function(p){return(c-p)/6/f+1/2};return f===0?(i=0,o=0):(o=f/c,r=l(s),t=l(a),n=l(u),s===c?i=n-t:a===c?i=1/3+r-n:u===c&&(i=2/3+t-r),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,c*100]};w.rgb.hwb=function(e){let r=e[0],t=e[1],n=e[2],i=w.rgb.hsl(e)[0],o=1/255*Math.min(r,Math.min(t,n));return n=1-1/255*Math.max(r,Math.max(t,n)),[i,o*100,n*100]};w.rgb.cmyk=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.min(1-r,1-t,1-n),o=(1-r-i)/(1-i)||0,s=(1-t-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function Zf(e,r){return(e[0]-r[0])**2+(e[1]-r[1])**2+(e[2]-r[2])**2}w.rgb.keyword=function(e){let r=Qs[e];if(r)return r;let t=Infinity,n;for(let i of Object.keys(cr)){let o=cr[i],s=Zf(e,o);s<t&&(t=s,n=i)}return n};w.keyword.rgb=function(e){return cr[e]};w.rgb.xyz=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255;r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=r*.4124+t*.3576+n*.1805,o=r*.2126+t*.7152+n*.0722,s=r*.0193+t*.1192+n*.9505;return[i*100,o*100,s*100]};w.rgb.lab=function(e){let r=w.rgb.xyz(e),t=r[0],n=r[1],i=r[2];t/=95.047,n/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let o=116*n-16,s=500*(t-n),a=200*(n-i);return[o,s,a]};w.hsl.rgb=function(e){let r=e[0]/360,t=e[1]/100,n=e[2]/100,i,o,s;if(t===0)return s=n*255,[s,s,s];n<.5?i=n*(1+t):i=n+t-n*t;let a=2*n-i,u=[0,0,0];for(let c=0;c<3;c++)o=r+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,u[c]=s*255;return u};w.hsl.hsv=function(e){let r=e[0],t=e[1]/100,n=e[2]/100,i=t,o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,i*=o<=1?o:2-o;let s=(n+t)/2,a=n===0?2*i/(o+i):2*t/(n+t);return[r,a*100,s*100]};w.hsv.rgb=function(e){let r=e[0]/60,t=e[1]/100,n=e[2]/100,i=Math.floor(r)%6,o=r-Math.floor(r),s=255*n*(1-t),a=255*n*(1-t*o),u=255*n*(1-t*(1-o));switch(n*=255,i){case 0:return[n,u,s];case 1:return[a,n,s];case 2:return[s,n,u];case 3:return[s,a,n];case 4:return[u,s,n];case 5:return[n,s,a]}};w.hsv.hsl=function(e){let r=e[0],t=e[1]/100,n=e[2]/100,i=Math.max(n,.01),o,s;s=(2-t)*n;let a=(2-t)*i;return o=t*i,o/=a<=1?a:2-a,o=o||0,s/=2,[r,o*100,s*100]};w.hwb.rgb=function(e){let r=e[0]/360,t=e[1]/100,n=e[2]/100,i=t+n,o;i>1&&(t/=i,n/=i);let s=Math.floor(6*r),a=1-n;o=6*r-s,(s&1)!=0&&(o=1-o);let u=t+o*(a-t),c,f,l;switch(s){default:case 6:case 0:c=a,f=u,l=t;break;case 1:c=u,f=a,l=t;break;case 2:c=t,f=a,l=u;break;case 3:c=t,f=u,l=a;break;case 4:c=u,f=t,l=a;break;case 5:c=a,f=t,l=u;break}return[c*255,f*255,l*255]};w.cmyk.rgb=function(e){let r=e[0]/100,t=e[1]/100,n=e[2]/100,i=e[3]/100,o=1-Math.min(1,r*(1-i)+i),s=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,s*255,a*255]};w.xyz.rgb=function(e){let r=e[0]/100,t=e[1]/100,n=e[2]/100,i,o,s;return i=r*3.2406+t*-1.5372+n*-.4986,o=r*-.9689+t*1.8758+n*.0415,s=r*.0557+t*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};w.xyz.lab=function(e){let r=e[0],t=e[1],n=e[2];r/=95.047,t/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*t-16,o=500*(r-t),s=200*(t-n);return[i,o,s]};w.lab.xyz=function(e){let r=e[0],t=e[1],n=e[2],i,o,s;o=(r+16)/116,i=t/500+o,s=o-n/200;let a=o**3,u=i**3,c=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};w.lab.lch=function(e){let r=e[0],t=e[1],n=e[2],i;i=Math.atan2(n,t)*360/2/Math.PI,i<0&&(i+=360);let s=Math.sqrt(t*t+n*n);return[r,s,i]};w.lch.lab=function(e){let r=e[0],t=e[1],i=e[2]/360*2*Math.PI,o=t*Math.cos(i),s=t*Math.sin(i);return[r,o,s]};w.rgb.ansi16=function(e,r=null){let[t,n,i]=e,o=r===null?w.rgb.hsv(e)[2]:r;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};w.hsv.ansi16=function(e){return w.rgb.ansi16(w.hsv.rgb(e),e[2])};w.rgb.ansi256=function(e){let r=e[0],t=e[1],n=e[2];return r===t&&t===n?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};w.ansi16.rgb=function(e){let r=e%10;if(r===0||r===7)return e>50&&(r+=3.5),r=r/10.5*255,[r,r,r];let t=(~~(e>50)+1)*.5,n=(r&1)*t*255,i=(r>>1&1)*t*255,o=(r>>2&1)*t*255;return[n,i,o]};w.ansi256.rgb=function(e){if(e>=232){let o=(e-232)*10+8;return[o,o,o]}e-=16;let r,t=Math.floor(e/36)/5*255,n=Math.floor((r=e%36)/6)/5*255,i=r%6/5*255;return[t,n,i]};w.rgb.hex=function(e){let t=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};w.hex.rgb=function(e){let r=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!r)return[0,0,0];let t=r[0];r[0].length===3&&(t=t.split("").map(a=>a+a).join(""));let n=parseInt(t,16),i=n>>16&255,o=n>>8&255,s=n&255;return[i,o,s]};w.rgb.hcg=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.max(Math.max(r,t),n),o=Math.min(Math.min(r,t),n),s=i-o,a,u;return s<1?a=o/(1-s):a=0,s<=0?u=0:i===r?u=(t-n)/s%6:i===t?u=2+(n-r)/s:u=4+(r-t)/s,u/=6,u%=1,[u*360,s*100,a*100]};w.hsl.hcg=function(e){let r=e[1]/100,t=e[2]/100,n=t<.5?2*r*t:2*r*(1-t),i=0;return n<1&&(i=(t-.5*n)/(1-n)),[e[0],n*100,i*100]};w.hsv.hcg=function(e){let r=e[1]/100,t=e[2]/100,n=r*t,i=0;return n<1&&(i=(t-n)/(1-n)),[e[0],n*100,i*100]};w.hcg.rgb=function(e){let r=e[0]/360,t=e[1]/100,n=e[2]/100;if(t===0)return[n*255,n*255,n*255];let i=[0,0,0],o=r%1*6,s=o%1,a=1-s,u=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-t)*n,[(t*i[0]+u)*255,(t*i[1]+u)*255,(t*i[2]+u)*255]};w.hcg.hsv=function(e){let r=e[1]/100,t=e[2]/100,n=r+t*(1-r),i=0;return n>0&&(i=r/n),[e[0],i*100,n*100]};w.hcg.hsl=function(e){let r=e[1]/100,n=e[2]/100*(1-r)+.5*r,i=0;return n>0&&n<.5?i=r/(2*n):n>=.5&&n<1&&(i=r/(2*(1-n))),[e[0],i*100,n*100]};w.hcg.hwb=function(e){let r=e[1]/100,t=e[2]/100,n=r+t*(1-r);return[e[0],(n-r)*100,(1-n)*100]};w.hwb.hcg=function(e){let r=e[1]/100,t=e[2]/100,n=1-t,i=n-r,o=0;return i<1&&(o=(n-i)/(1-i)),[e[0],i*100,o*100]};w.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};w.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};w.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};w.gray.hsl=function(e){return[0,0,e[0]]};w.gray.hsv=w.gray.hsl;w.gray.hwb=function(e){return[0,100,e[0]]};w.gray.cmyk=function(e){return[0,0,0,e[0]]};w.gray.lab=function(e){return[e[0],0,0]};w.gray.hex=function(e){let r=Math.round(e[0]/100*255)&255,n=((r<<16)+(r<<8)+r).toString(16).toUpperCase();return"000000".substring(n.length)+n};w.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var Vs=b((ad,Ks)=>{var Ur=Cn();function ep(){let e={},r=Object.keys(Ur);for(let t=r.length,n=0;n<t;n++)e[r[n]]={distance:-1,parent:null};return e}function rp(e){let r=ep(),t=[e];for(r[e].distance=0;t.length;){let n=t.pop(),i=Object.keys(Ur[n]);for(let o=i.length,s=0;s<o;s++){let a=i[s],u=r[a];u.distance===-1&&(u.distance=r[n].distance+1,u.parent=n,t.unshift(a))}}return r}function tp(e,r){return function(t){return r(e(t))}}function np(e,r){let t=[r[e].parent,e],n=Ur[r[e].parent][e],i=r[e].parent;for(;r[i].parent;)t.unshift(r[i].parent),n=tp(Ur[r[i].parent][i],n),i=r[i].parent;return n.conversion=t,n}Ks.exports=function(e){let r=rp(e),t={},n=Object.keys(r);for(let i=n.length,o=0;o<i;o++){let s=n[o];r[s].parent!==null&&(t[s]=np(s,r))}return t}});var Xs=b((ud,Js)=>{var _n=Cn(),ip=Vs(),Be={},op=Object.keys(_n);function sp(e){let r=function(...t){let n=t[0];return n==null?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(r.conversion=e.conversion),r}function ap(e){let r=function(...t){let n=t[0];if(n==null)return n;n.length>1&&(t=n);let i=e(t);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in e&&(r.conversion=e.conversion),r}op.forEach(e=>{Be[e]={},Object.defineProperty(Be[e],"channels",{value:_n[e].channels}),Object.defineProperty(Be[e],"labels",{value:_n[e].labels});let r=ip(e);Object.keys(r).forEach(n=>{let i=r[n];Be[e][n]=ap(i),Be[e][n].raw=sp(i)})});Js.exports=Be});var ia=b((cd,na)=>{"use strict";var Zs=(e,r)=>(...t)=>`[${e(...t)+r}m`,ea=(e,r)=>(...t)=>{let n=e(...t);return`[${38+r};5;${n}m`},ra=(e,r)=>(...t)=>{let n=e(...t);return`[${38+r};2;${n[0]};${n[1]};${n[2]}m`},Wr=e=>e,ta=(e,r,t)=>[e,r,t],qe=(e,r,t)=>{Object.defineProperty(e,r,{get:()=>{let n=t();return Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})},En,$e=(e,r,t,n)=>{En===void 0&&(En=Xs());let i=n?10:0,o={};for(let[s,a]of Object.entries(En)){let u=s==="ansi16"?"ansi":s;s===r?o[u]=e(t,i):typeof a=="object"&&(o[u]=e(a[r],i))}return o};function up(){let e=new Map,r={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};r.color.gray=r.color.blackBright,r.bgColor.bgGray=r.bgColor.bgBlackBright,r.color.grey=r.color.blackBright,r.bgColor.bgGrey=r.bgColor.bgBlackBright;for(let[t,n]of Object.entries(r)){for(let[i,o]of Object.entries(n))r[i]={open:`[${o[0]}m`,close:`[${o[1]}m`},n[i]=r[i],e.set(o[0],o[1]);Object.defineProperty(r,t,{value:n,enumerable:!1})}return Object.defineProperty(r,"codes",{value:e,enumerable:!1}),r.color.close="[39m",r.bgColor.close="[49m",qe(r.color,"ansi",()=>$e(Zs,"ansi16",Wr,!1)),qe(r.color,"ansi256",()=>$e(ea,"ansi256",Wr,!1)),qe(r.color,"ansi16m",()=>$e(ra,"rgb",ta,!1)),qe(r.bgColor,"ansi",()=>$e(Zs,"ansi16",Wr,!0)),qe(r.bgColor,"ansi256",()=>$e(ea,"ansi256",Wr,!0)),qe(r.bgColor,"ansi16m",()=>$e(ra,"rgb",ta,!0)),r}Object.defineProperty(na,"exports",{enumerable:!0,get:up})});var ca=b((ld,ua)=>{"use strict";var cp=$s(),lp=Gs(),oa=ia(),sa=["","\x9B"],Gr=e=>`${sa[0]}[${e}m`,aa=(e,r,t)=>{let n=[];e=[...e];for(let i of e){let o=i;i.includes(";")&&(i=i.split(";")[0][0]+"0");let s=oa.codes.get(Number.parseInt(i,10));if(s){let a=e.indexOf(s.toString());a===-1?n.push(Gr(r?s:o)):e.splice(a,1)}else if(r){n.push(Gr(0));break}else n.push(Gr(o))}if(r&&(n=n.filter((i,o)=>n.indexOf(i)===o),t!==void 0)){let i=Gr(oa.codes.get(Number.parseInt(t,10)));n=n.reduce((o,s)=>s===i?[s,...o]:[...o,s],[])}return n.join("")};ua.exports=(e,r,t)=>{let n=[...e],i=[],o=typeof t=="number"?t:n.length,s=!1,a,u=0,c="";for(let[f,l]of n.entries()){let p=!1;if(sa.includes(l)){let h=/\d[^m]*/.exec(e.slice(f,f+18));a=h&&h.length>0?h[0]:void 0,u<o&&(s=!0,a!==void 0&&i.push(a))}else s&&l==="m"&&(s=!1,p=!0);if(!s&&!p&&u++,!lp({exact:!0}).test(l)&&cp(l.codePointAt())&&(u++,typeof t!="number"&&o++),u>r&&u<=o)c+=l;else if(u===r&&!s&&a!==void 0)c=aa(i);else if(u>=o){c+=aa(i,!0,a);break}}return c}});var xp={};nu(xp,{default:()=>wp});var sr=_(C("@yarnpkg/cli")),W=_(C("@yarnpkg/core")),ls=_(C("@yarnpkg/libzip")),P=_(C("@yarnpkg/fslib")),ue=_(C("clipanion")),ln=_(C("path"));var wr=".bundleignore";var Ln=_(C("fs")),Nn=async e=>{try{return(0,Ln.readFileSync)(e,"utf-8").split(`
`)}catch(r){return[]}};var Dn=_(C("path")),Mn=({ignoreFile:e,cwd:r})=>(0,Dn.join)(r,e);var Gi=_(Qn());var Ui=_($i()),Wi=async({cwd:e})=>{try{return(await(0,Ui.default)(`${e}/**/*`,{dot:!0})).map(t=>{var n;return(n=t.split(`${e}/`)[1])!=null?n:""}).filter(Boolean)}catch(r){return[]}};var It=async({exclude:e,ignoreFile:r,cwd:t})=>{let n=Mn({ignoreFile:r,cwd:t}),i=(0,Gi.default)().add([...e,...await Nn(n)]);return(await Wi({cwd:t})).filter(a=>i.ignores(a)).map(a=>`${t}/${a}`)};var Yi=["package.json","package.yaml","package.yml"];var Ir=_(C("path")),_c={directory:({cwd:e})=>[e],parentDirectories:({cwd:e,rootDir:r})=>{if(!e.startsWith(r))throw new Error("Package directory not in rootDir. This should never happen");let t=e,n=[];for(;;){if(t===r||t.length<r.length)return n;t=(0,Ir.dirname)(t),n=[...n,t]}},packageFiles:({cwd:e})=>Yi.map(r=>(0,Ir.join)(e,r))},Ec=({cwd:e,rootDir:r})=>[...new Set(...[Object.values(_c).map(t=>t({cwd:e,rootDir:r})).flat()])],Hi=({workspaces:e,rootDir:r})=>Array.from(e).map(({cwd:t})=>Ec({cwd:t,rootDir:r})).flat();var or=_(C("@yarnpkg/fslib")),R=_(C("typanion")),Mr=_(as());var Bf=".yarnbuildrc.yml",un=R.isObject({folders:R.isObject({input:R.isOneOf([R.isString(),R.isArray(R.isString())]),output:R.isOneOf([R.isString(),R.isArray(R.isString())])}),exclude:R.isArray(R.isString()),bail:R.isBoolean(),ignoreFile:R.isString(),maxConcurrency:R.isOptional(R.applyCascade(R.isNumber(),[R.isInteger(),R.isInInclusiveRange(1,128)]))}),cn={folders:{input:".",output:["build","node_modules"]},exclude:[],bail:!1,ignoreFile:wr,maxConcurrency:8};async function us(e){let r=Bf,t=or.ppath.join(e.projectCwd||e.startingCwd,r);if(or.xfs.existsSync(t)){let n=await or.xfs.readFilePromise(t,"utf8"),i=[];try{let o=(0,Mr.load)(n,{schema:Mr.JSON_SCHEMA});if(un(o,{errors:i}))return o;console.warn(i)}catch(o){let s="";throw n.match(/^\s+(?!-)[^:]+\s+\S+/m)&&(s=" (config is corrupted, please check it matches the shape in the yarn.build readme."),new Error(`Parse error when loading ${t}; please check it's proper Yaml${s}`)}}return cn}async function cs(e){return await us(e)}async function jr(e){var t;let r=await us(e);return Ie(D(D({},cn),r),{folders:D(D({},cn.folders),(t=r.folders)!=null?t:{})})}var ar=class extends sr.BaseCommand{constructor(){super(...arguments);this.json=ue.Option.Boolean("--json",!1,{description:"flag is set the output will follow a JSON-stream output also known as NDJSON (https://github.com/ndjson/ndjson-spec)"});this.outputDirectory=ue.Option.String("-o,--output-directory",{description:"sets the output directory, this should be outside your source input directory."});this.noCompress=ue.Option.Boolean("--no-compress",!1,{description:"set this with --output-directory to skip zipping your bundle, when this is set your output directory must be outside your projecty root"});this.archiveName=ue.Option.String("-a,--archive-name","bundle.zip",{description:"sets the name of the archive. Any files matching this, will be excluded from subsequent archives. Defaults to ./bundle.zip"});this.exclude=ue.Option.Array("--exclude",[],{arity:1,description:"Exclude specific paths from the final bundle."});this.ignoreFile=ue.Option.String("--ignore-file",wr,{description:"set the name of ignore file. Files matching this in workspace root and package root will be used to indicate which files will be excluded from bundle."})}async removeUnusedPackages(r,t,n){var u;let{project:i,workspace:o}=await W.Project.find(n,t);if(!o)throw new sr.WorkspaceRequiredError(i.cwd,t);let s=new Set([o]),a=await cs(n);this.exclude=a.exclude?[...this.exclude,...a.exclude]:this.exclude,this.ignoreFile=(u=a==null?void 0:a.ignoreFile)!=null?u:this.ignoreFile;for(let c of s)for(let f of W.Manifest.hardDependencies)for(let l of c.manifest.getForScope(f).values()){let p=i.tryWorkspaceByDescriptor(l);p!==null&&s.add(p)}for(let c of i.workspaces)s.has(c)||c.cwd!==r&&await P.xfs.removePromise(c.cwd)}async removeEmptyDirectories({cwd:r}){if(!P.xfs.statSync(r).isDirectory())return!1;let n=await P.xfs.readdirPromise(r);for(let i of n)await this.removeEmptyDirectories({cwd:P.ppath.join(r,i)});return n=await P.xfs.readdirPromise(r),n.length===0?(await P.xfs.removePromise(r),!0):!1}async removeExcluded({tmpDir:r,excluded:t,nonRemovableFiles:n,yarnDirectory:i,cacheDirectory:o,shouldRemoveEmptyDirectories:s=!1}){let a=`${r}/.git`;try{await P.xfs.lstatPromise(a)&&await P.xfs.removePromise(a)}catch(u){}await Promise.all(t.map(async u=>{if(!u.startsWith(i)&&!u.startsWith(o)&&!n.includes(u)&&!!u.startsWith(r))try{await P.xfs.lstatPromise(u)&&await P.xfs.removePromise(u)}catch(c){}})),s&&await this.removeEmptyDirectories({cwd:r})}async execute(){return await P.xfs.mktempPromise(async r=>{var O,ve,ie,re;let t=`${this.context.cwd}`,n=P.ppath.join(t,this.archiveName);if(typeof this.outputDirectory=="string"){let S=fs(this.outputDirectory);if(P.xfs.existsSync(S)||await P.xfs.mkdirPromise(S),P.xfs.readdirSync(S).length!=0)return console.error("ERROR: --output-directory is not empty"),1;n=P.ppath.join(S,this.archiveName)}let i=await W.Configuration.find(this.context.cwd,this.context.plugins);if(i.projectCwd===null)throw new Error("Can't find project directory");let o=t.replace(i.projectCwd,""),s=!1,a;if(this.noCompress===!0){if(typeof this.outputDirectory!="string")return console.error("ERROR: you set --no-compress, but did not specify --output-directory"),1;if(a=fs(this.outputDirectory),a.startsWith(i.projectCwd))return console.error(`ERROR: --output-directory is inside project root with --no-compress set.
This is no allowed to prevent you destroying your project`),1;s=!0}let u=new P.NodeFS;await P.xfs.copyPromise(r,i.projectCwd,{baseFs:u});let c=`${r}${o}`,f=`${c}/${this.archiveName}`,l=this.exclude;try{await P.xfs.lstatPromise(f)&&l.push(f)}catch(S){}let p=await W.Configuration.find(c,this.context.plugins);p.use("<custom>",{enableNetwork:!1},c);let h=await W.Cache.find(p),d=`${r}/.yarn`,g=h.cwd;await this.removeUnusedPackages(r,c,p);let{project:y,workspace:m}=await W.Project.find(p,c);if(!m)throw new sr.WorkspaceRequiredError(y.cwd,c);let v=new Set([m]),A=Hi({workspaces:y.workspaces,rootDir:r});l=await It({cwd:r,ignoreFile:this.ignoreFile,exclude:l});for(let S of v)for(let H of W.Manifest.hardDependencies)for(let le of S.manifest.getForScope(H).values()){let be=y.tryWorkspaceByDescriptor(le);be!==null&&v.add(be)}for(let S of v){let H=await It({cwd:S.cwd,ignoreFile:this.ignoreFile,exclude:l});await this.removeExcluded({tmpDir:r,excluded:H,nonRemovableFiles:A,yarnDirectory:d,cacheDirectory:g,shouldRemoveEmptyDirectories:!1})}await this.removeExcluded({tmpDir:r,excluded:l,nonRemovableFiles:A,yarnDirectory:d,cacheDirectory:g,shouldRemoveEmptyDirectories:!0});for(let S of y.workspaces)S.manifest.devDependencies.clear(),!v.has(S)&&(S.manifest.dependencies.clear(),S.manifest.peerDependencies.clear());if((ve=(O=m==null?void 0:m.manifest)==null?void 0:O.raw)==null?void 0:ve.main){let S=m.relativeCwd+ln.default.posix.sep+((re=(ie=m==null?void 0:m.manifest)==null?void 0:ie.raw)==null?void 0:re.main),H=".pnp.cjs";P.xfs.writeFilePromise(`${r}${ln.default.posix.sep}entrypoint.js`,qf(S,H))}return(await W.StreamReport.start({configuration:p,json:this.json,stdout:this.context.stdout,includeLogs:!0},async S=>{if(await y.install({cache:h,report:S}),s&&typeof a!="undefined")S.reportInfo(null,"Moving build to output directory"),await u.copyPromise(a,r);else{let H=await(0,ls.getLibzipPromise)();S.reportInfo(null,"Creating archive");let le=new P.ZipFS(n,{create:!0,libzip:H}),be="bundle";S.reportInfo(null,"Copying files to archive"),await le.copyPromise(be,r,{baseFs:u}),le.saveAndClose(),S.reportJson({name:"ArchiveSuccess",message:"Archive created successfuly at ",outputArchive:n})}})).exitCode()})}};ar.paths=[["bundle"]],ar.usage=ue.Command.Usage({category:"Build commands",description:"bundle a workspace package into a deployable archive",details:`
      This command will bundle up the source of the target package along with
      its dependencies into an archive.

      This is designed to be used for deployment, not for publishing, so
      everything to run except for a runtime (ie node) is bundled into
      the archive.

      Call this after you have run your build step (if any).

      This is designed to work best with zero-install configurations. If you
      don't have that, run \`yarn install\` before this command.

      Why not just compile like we do on the front-end?
      Some dependencies may use require in interesting ways, or be or call
      binaries. It's safest not to transpile them.
    `});var ps=ar,qf=(e,r)=>`
"use strict";

const path = require("path");

const pnp = require(path.normalize(path.resolve( __dirname, "${r}"))).setup();

const index = require(path.normalize(path.resolve( __dirname,"${e}")));

Object.defineProperty(exports, "__esModule", { value: true });

exports.default = index;
`;function fs(e){let r=P.npath.toPortablePath(e);return P.ppath.resolve(r)}var Aa=_(C("@yarnpkg/cli")),X=_(C("@yarnpkg/core")),z=_(C("clipanion")),Sa=_(C("path"));var k=_(C("@yarnpkg/core")),fr=_(vs()),ya=_(C("os")),V=_(C("@yarnpkg/fslib"));var va=_(C("events")),ba=_(Ps()),pr=_(C("path")),wa=_(Ls()),Sn=_(Ds()),hr=_(wn()),Yr=_(ca());var Ue=class{constructor(){this.nodes={};this.size=0;this.runSize=0;this.ran=new Set}addNode(r){if(this.nodes[r])return this.nodes[r];let t=new la(r,this);return this.nodes[r]=t,this.size++,t}getNode(r){if(this.nodes[r])return this.nodes[r]}resetRuns(){this.ran=new Set}async resolve(r){let t=new Set,n=new Set;await this.resolveNode(r,t,n)}async resolveNode(r,t,n){n.add(r.id);for(let i of r.dependencies)if(!t.has(i.id)){if(n.has(i.id))throw new fa(`${r.id} has a cyclic dependency on ${i.id}`);await this.resolveNode(i,t,n)}t.add(r.id),n.delete(r.id)}async run(r){let t=new Set,n=new Set,i={};for(let o of r)this.resolveQueue(o,t,i);return await new Promise(o=>{this.workLoop(t,i,n,o)}),i}workLoop(r,t,n,i){if(r.size!==0&&r.forEach(o=>{var s,a;o.canStart(t)&&(((s=o==null?void 0:o.node)==null?void 0:s.runCallback)?((a=o==null?void 0:o.node)==null||a.runCallback(t),n.add(o.node)):t[o.node.id]={success:!0,done:!0},r.delete(o))}),n.forEach((o,s)=>{t[o.id].done&&n.delete(s)}),Object.keys(t).map(o=>{var s,a;return(a=(s=t[o])==null?void 0:s.done)!=null?a:!0}).every(o=>o===!0)){i();return}setTimeout(()=>this.workLoop(r,t,n,i),30)}resolveQueue(r,t,n){let i=[];for(let o of r.dependencies)if(i.push(o.id),!n[o.id]&&o.runCallback){n[o.id]=D({},Ue.RunLogInit);let s=this.resolveQueue(o,t,n),a={node:o,canStart:Ue.QueueItemCanStart(s)};t.add(a)}if(!n[r.id]&&r.runCallback){n[r.id]=D({},Ue.RunLogInit);let o={node:r,canStart:Ue.QueueItemCanStart(i)};t.add(o)}return i}},lr=Ue;lr.RunLogInit={success:!1,done:!1},lr.QueueItemCanStart=r=>t=>r.map(n=>{var i,o;return(o=(i=t[n])==null?void 0:i.done)!=null?o:!0}).every(n=>n===!0);var la=class{constructor(r,t){this.id=r,this.dependencies=[],this.graph=t}addDependency(r){return this.dependencies.push(r),this}addWorkSpace(r){return this.workspace=r,this}addRunCallback(r){return this.runCallback?this:(this.runCallback=t=>r().then(n=>{t[this.id]={done:!0,success:n}}),this.graph.runSize++,this)}},fa=class extends Error{constructor(r){super(r);this.name="CyclicDependencyError",this.code="YN0003"}};var pa=_(wn()),fp="",Y=fp+"[",kn=class{static pad(r=1){for(let t=0;t<r;t++)process.stdout.write(`
`);kn.cursorUp(r)}static cursorUp(r=1){process.stdout.write(Y+`${r}A`)}static cursorSave(){process.stdout.write(Y+"s")}static cursorRestore(){process.stdout.write(Y+"u")}static autoWrap(r){r?process.stdout.write(Y+"?7h"):process.stdout.write(Y+"?7l")}static clearScreenDown(){process.stdout.write(Y+"J")}static async cursorPositionReport(){return new Promise(r=>{process.stdin.setRawMode(!0),process.stdin.once("data",t=>{process.stdin.setRawMode(!1),process.stdin.pause();let[n,i]=t.slice(2,t.length-1).toString().split(";").map(Number);r({x:i,y:n})}),process.stdout.write(Y+"6n")})}static setScrollableRegion(r,t){process.stdout.write(Y+`${r};${t}r`)}static resetScrollableRegion(){process.stdout.write(Y+"r")}static moveTo(r){process.stdout.write(Y+`${r.y};${r.x}H`)}static cursorHome(){process.stdout.write(Y+"H")}static alternateScreen(){process.stdout.write(Y+"?1049h")}static mainScreen(){process.stdout.write(Y+"?1049l")}static linesRequired(r,t){var o;let n=new RegExp(`([^
]{0,${t}})(
)?`,"gm");return((o=(0,pa.default)(r).match(n))!=null?o:[""]).length-1}},K=kn;K.row=0,K.column=0;var da=_(C("child_process")),ma=_(C("util"));var ha=()=>process.platform==="win32"?"windows":"unix";var pp=(0,ma.promisify)(da.exec),ga=async e=>{let r=ha(),t=(({platform:i,pid:o})=>{switch(i){case"unix":return`pgrep "-P ${o}"`;case"windows":return`wmic process where (ParentProcessId=${o}) get ProcessId`;default:throw new Error("Unable to find parent process")}})({platform:r,pid:e}),n=[];try{let{stdout:i}=await pp(t);n=i.split(`
`).filter(Boolean).map(o=>parseInt(o,10)).filter(o=>!isNaN(o))}catch(i){}return n};var ye={hasBeenTerminated:!1,callId:0},An=async(e=0)=>{if(e!==ye.callId||ye.hasBeenTerminated)return;let r=process.pid;(await ga(r)).forEach(i=>{try{process.kill(i,"SIGKILL")}catch(o){}});let n=ye.callId+1;ye.callId=n,setTimeout(async()=>{An(n)},50)};var hp="yarn.build.json",xa=80,dp="-".repeat(xa),J;(function(o){o.pending="pending",o.skipped="skipped",o.inProgress="inProgress",o.failed="failed",o.succeeded="succeeded"})(J||(J={}));var T;(function(c){c.pending="pending",c.start="start",c.info="info",c.error="error",c.skipped="skipped",c.success="success",c.fail="fail",c.finish="finish",c.forceQuit="force-quit"})(T||(T={}));var Ca=class{constructor({project:r,report:t,runCommand:n,cli:i,configuration:o,pluginConfiguration:s,dryRun:a,ignoreRunCache:u,verbose:c,concurrency:f,shouldBailInstantly:l}){this.runGraph=new lr;this.runLength=0;this.runTargets=[];this.runMutexes={};this.dryRun=!1;this.ignoreRunCache=!1;this.verbose=!1;this.shouldBailInstantly=!1;this.entrypoints=[];this.runReporter=new va.EventEmitter;this.runReport={mutex:new Sn.Mutex,totalJobs:0,skipCount:0,previousOutput:"",successCount:0,failCount:0,bail:!1,workspaces:{},done:!1};this.nextUnitOfWork=[];this.hasSetup=!1;this.setupRunReporter=()=>{this.runReporter.on(T.pending,(r,t)=>{this.runReport.mutex.acquire().then(n=>{this.runReport.workspaces[r]={name:t,stdout:[],stderr:[],done:!1,fail:!1},n()})}),this.runReporter.on(T.start,(r,t,n)=>{this.runReport.mutex.acquire().then(i=>{this.runReport.workspaces[r]=Ie(D({},this.runReport.workspaces[r]),{start:Date.now(),runScript:n,name:t}),i()})}),this.runReporter.on(T.info,(r,t)=>{this.runReport.mutex.acquire().then(n=>{this.runReport.workspaces[r].stdout.push(t),n()})}),this.runReporter.on(T.error,(r,t)=>{this.runReport.mutex.acquire().then(n=>{this.runReport.workspaces[r].stderr.push(t),this.logError(`${r} ${t}`),n()})}),this.runReporter.on(T.success,r=>{this.runReport.mutex.acquire().then(t=>{this.runReport.workspaces[r]=Ie(D({},this.runReport.workspaces[r]),{done:!0}),this.runReport.successCount++,t()})}),this.runReporter.on(T.skipped,r=>{this.runReport.mutex.acquire().then(t=>{this.runReport.workspaces[r].done=!0,this.runReport.workspaces[r].skipped=!0,this.runReport.skipCount++,t()})}),this.runReporter.on(T.fail,(r,t)=>{this.runReport.mutex.acquire().then(n=>{this.runReport.workspaces[r].stderr.push(t),this.runReport.workspaces[r].done=!0,this.runReport.workspaces[r].fail=!0,this.runReport.failCount++,this.logError(`${r} ${t}`),n()})})};this.getDependenciesCount=async r=>{let t=0;for(let n of k.Manifest.hardDependencies)for(let i of r.manifest.getForScope(n).values())this.project.tryWorkspaceByDescriptor(i)!==null&&(t+=1);return t};this.plan=async r=>{var o,s,a,u,c;let t=this.runGraph.addNode(r.relativeCwd).addWorkSpace(r),n=!1;this.runMutexes[r.relativeCwd]=new Sn.Mutex;for(let f of k.Manifest.hardDependencies)for(let l of r.manifest.getForScope(f).values()){let p=this.project.tryWorkspaceByDescriptor(l);if(p===null)continue;let h=this.runGraph.addNode(p.relativeCwd).addWorkSpace(p);t.addDependency(h);let d=await this.plan(p),g=!1;p!==this.project.topLevelWorkspace&&(g=await this.checkIfRunIsRequired(p)),(g||d)&&(n=!0,h.addRunCallback(this.createRunItem(p)))}let i=!1;if(r!==this.project.topLevelWorkspace&&(i=await this.checkIfRunIsRequired(r)),this.runReporter.emit(T.pending,r.relativeCwd),n||i)return this.runReporter.emit(T.pending,r.relativeCwd,`${((o=r.manifest.name)==null?void 0:o.scope)?`@${(s=r.manifest.name)==null?void 0:s.scope}/`:""}${(a=r.manifest.name)==null?void 0:a.name}`),t.addRunCallback(this.createRunItem(r)),!0;{let f=(u=this.runLog)==null?void 0:u.get(`${r.relativeCwd}#${this.runCommand}`);f&&((c=this.runLog)==null||c.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:f.lastModified,status:J.succeeded,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}))}return!1};this.run=async()=>{var i,o;if(this.hasSetup===!1)throw new Error("RunSupervisor is not setup, you need to call await supervisor.setup()");if(this.runReport.runStart=Date.now(),!this.dryRun&&!fr.default&&(K.pad(this.concurrency+3),this.raf(this.waitUntilDone)),this.dryRun)return!0;this.currentRunTarget=this.runTargets.length>1?"All":(o=(i=this.runTargets[0])==null?void 0:i.relativeCwd)!=null?o:"Nothing to run",fr.default||process.stderr.write(`
`);let r=this.generateHeaderString();await this.runGraph.run(this.entrypoints);let t=await this.runReport.mutex.acquire();if(this.runReport.done=!0,t(),fr.default||(K.cursorUp(K.linesRequired(this.runReport.previousOutput,process.stdout.columns)),K.clearScreenDown()),this.runReport.failCount!==0){let s=[];process.stdout.write(this.formatHeader(r)+`
`);let a=!1;for(let u in this.runReport.workspaces){let c=this.runReport.workspaces[u];if(c.fail&&s.push(u),c.stdout.length!==0||c.stderr.length!==0){a=!0;let f=this.formatHeader(`Output: ${k.formatUtils.pretty(this.configuration,u,k.FormatType.NAME)}`,2);process.stdout.write(f+`
`)}if(c.stdout.length!==0&&(a=!0,c.stdout.forEach(f=>{f.split(`
`).forEach(p=>{p.length!==0&&process.stdout.write(p+`
`)})})),c.stderr.length!==0){a=!0;let f="[stderr]";process.stderr.write(f+`
`),c.stderr.forEach(l=>{(l instanceof Error?l.toString():`${l}`).split(`
`).forEach(d=>{d.length!==0&&process.stderr.write(d+`
`)})})}}if(a&&process.stdout.write(this.grey(dp)+`
`),s.length>0){let u=this.grey(`ERROR for script ${r}
The following packages returned an error.
`);process.stderr.write(u),s.forEach(c=>{let f=`- ${k.formatUtils.pretty(this.configuration,c,k.FormatType.NAME)}`;process.stderr.write(f+`
`)})}process.stderr.write(this.grey("Search `Output: path` to find the start of the output.\n"))}let n=this.generateFinalReport();return process.stdout.write(n),await this.saveRunLog(),this.runReport.failCount===0};this.raf=r=>{setImmediate(()=>r(Date.now()))};this.waitUntilDone=r=>{if(this.runReport.done)return;let t=this.generateProgressString(r);K.cursorUp(K.linesRequired(this.runReport.previousOutput,process.stdout.columns)),K.clearScreenDown(),process.stdout.write(t),this.runReport.previousOutput=t,mp(90).then(()=>{this.raf(this.waitUntilDone)})};this.grey=r=>k.formatUtils.pretty(this.configuration,r,"grey");this.generateRunCountString=r=>{let t="";if(this.runReport.runStart){let n=k.formatUtils.pretty(this.configuration,`${this.runReport.successCount}`,"green"),i=k.formatUtils.pretty(this.configuration,`${this.runReport.failCount}`,"red"),o=k.formatUtils.pretty(this.configuration,`${this.runGraph.runSize}`,"white");t+=this.formatHeader(`${n}:${i}/${o} ${dr(this.runReport.runStart,r)}`)+`
`}return t};this.generateFinalReport=()=>{var i;let r=this.formatHeader(`${k.formatUtils.pretty(this.configuration,`${this.runCommand} finished`,this.runReport.failCount===0?"green":"red")}${this.runReport.failCount!=0?k.formatUtils.pretty(this.configuration,` with ${this.runReport.failCount} errors`,"red"):""}`)+`
`,t=this.formatHeader("Summary")+`
`;if(this.runReport.runStart){let o=this.runReport.skipCount+(this.runReport.totalJobs-this.runReport.skipCount-this.runReport.failCount-this.runReport.successCount),s=k.formatUtils.pretty(this.configuration,`Success: ${this.runReport.successCount}`,"green"),a=k.formatUtils.pretty(this.configuration,`Fail: ${this.runReport.failCount}`,"red"),u=k.formatUtils.pretty(this.configuration,`Skipped: ${o}`,"white"),c=k.formatUtils.pretty(this.configuration,`Total: ${this.runReport.totalJobs}`,"white");t+=s+`
`+a+`
`+u+`
`+c+`
`+this.grey("---")+`
`}let n=50;for(let o in this.runReport.workspaces)n+=(i=this.runReport.workspaces[o].runtimeSeconds)!=null?i:0;if(!!this.runReport.runStart&&this.runGraph.runSize>1){let o=n,a=Date.now()-this.runReport.runStart,u=dr(a,o);fr.default||(t+=`Cumulative: (cpu): ${dr(0,n)}
`,t+=`Saved: ${u}
`)}return this.runReport.runStart&&(t+="Runtime (wall): "+dr(Date.now(),this.runReport.runStart)+`
`),t+=r,t};this.createRunItem=r=>async()=>await this.limit(async()=>{var o,s,a,u,c,f,l,p,h;let t=r.relativeCwd,n=r.manifest.scripts.get(this.runCommand),i=(o=this.runLog)==null?void 0:o.get(`${r.relativeCwd}#${this.runCommand}`);if(this.runReporter.emit(T.start,r.relativeCwd,`${((s=r.manifest.name)==null?void 0:s.scope)?`@${(a=r.manifest.name)==null?void 0:a.scope}/`:""}${(u=r.manifest.name)==null?void 0:u.name}`,n),!n)return this.verbose&&this.runReporter.emit(T.info,r.relativeCwd,`Missing \`${this.runCommand}\` script in manifest.`),this.runReporter.emit(T.success,r.relativeCwd),!0;try{if(this.runReport.bail)return this.runReporter.emit(T.skipped,r.relativeCwd),(c=this.runLog)==null||c.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:J.skipped,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),!1;let d=await this.cli(this.runCommand,r.cwd,this.runReporter,t);if(d!==0)return this.shouldBailInstantly&&this.runReport.bail&&d>100?(this.runReporter.emit(T.skipped,r.relativeCwd),(f=this.runLog)==null||f.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:J.skipped,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),!1):(this.runReporter.emit(T.fail,r.relativeCwd),(l=this.runLog)==null||l.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:J.failed,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),this.shouldBailInstantly&&!this.runReport.bail&&(this.runReport.bail=!0,An()),!1);(p=this.runLog)==null||p.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:J.succeeded,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),this.runReporter.emit(T.success,r.relativeCwd)}catch(d){return this.runReporter.emit(T.fail,r.relativeCwd,d),(h=this.runLog)==null||h.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:i==null?void 0:i.lastModified,status:J.failed,haveCheckedForRerun:!0,rerun:!1,command:this.runCommand}),!1}return!0});let p=f!=null?f:Math.max(1,(0,ya.cpus)().length);this.configuration=o,this.pluginConfiguration=s,this.project=r,this.report=t,this.runCommand=n,this.cli=i,this.dryRun=a,this.ignoreRunCache=u,this.verbose=c,this.concurrency=p,this.shouldBailInstantly=l!=null?l:this.shouldBailInstantly,this.limit=(0,wa.default)(p),this.queue=new ba.default({concurrency:p,carryoverConcurrencyCount:!0,timeout:5e4,throwOnTimeout:!0,autoStart:!0}),this.verbose&&(this.errorLogFile=V.xfs.createWriteStream(this.getRunErrorPath(),{flags:"a"}))}async setup(){this.runLog=await this.readRunLog(),this.setupRunReporter(),this.hasSetup=!0}getRunErrorPath(){return V.ppath.resolve(this.project.cwd,"yarn.build-error.log")}getRunLogPath(){return V.ppath.resolve(this.project.cwd,".yarn",hp)}async readRunLog(){let r=new Map;try{let t=await V.xfs.readJsonPromise(this.getRunLogPath());if(t&&t.packages)for(let n in t.packages)r.set(n,{lastModified:t.packages[n].lastModified,status:t.packages[n].status,haveCheckedForRerun:!1,rerun:!0,command:this.runCommand})}catch{}return r}async saveRunLog(){if(!this.runLog)return;let r;try{r=await V.xfs.readJsonPromise(this.getRunLogPath())}catch{}let t={comment:"This is an auto-generated file, it keeps track of whats been built. This is a local file, don't store this in version control.",packages:D({},r&&r.packages)};for(let[n,i]of this.runLog)i.status===J.succeeded&&(t.packages[n]=D(D({},t.packages[n]),this.runLog.get(n)));await V.xfs.writeJsonPromise(this.getRunLogPath(),t)}logError(r){this.verbose&&process.stderr.write((0,hr.default)(r)+`
`)}async addRunTarget(r,t=!1){this.entrypoints.push(this.runGraph.addNode(r.relativeCwd));let n=await this.plan(r);if(t){let i=1+await this.getDependenciesCount(r);this.runReport.totalJobs=i}n&&this.runTargets.push(r)}getWorkspaceConfig(r){let t=[],n=Ie(D({},this.pluginConfiguration),{folders:D(D({},this.pluginConfiguration.folders),r==null?void 0:r.manifest.raw["yarn.build"])});return un(n,{errors:t})?n:(console.warn(t),this.pluginConfiguration)}async checkIfRunIsRequired(r){var h,d,g,y;if(this.ignoreRunCache===!0)return!0;let t=!1,n=V.ppath.resolve(r.project.cwd,r.relativeCwd),i=this.getWorkspaceConfig(r),o=typeof(r==null?void 0:r.manifest.raw.main)=="string"?r.manifest.raw.main:void 0,s=(h=i.folders.output)!=null?h:o==null?void 0:o.substring(0,o==null?void 0:o.lastIndexOf(pr.default.posix.sep)),u=(typeof s=="string"?[s]:s).map(m=>`${n}${pr.default.posix.sep}${m}`),c=i.folders.input,f=typeof c=="string"?[c]:c,l=f==null?void 0:f.map(m=>`${n}${pr.default.posix.sep}${m}`).map(m=>(m==null?void 0:m.endsWith("/."))?m.substring(0,m.length-2):m),p=await this.runReport.mutex.acquire();try{let m=(d=this.runLog)==null?void 0:d.get(`${r.relativeCwd}#${this.runCommand}`);if(m==null?void 0:m.haveCheckedForRerun)return(g=m==null?void 0:m.rerun)!=null?g:!0;let v=await _a(l!=null?l:[n],u);(m==null?void 0:m.lastModified)!==v&&(t=!0),(y=this.runLog)==null||y.set(`${r.relativeCwd}#${this.runCommand}`,{lastModified:v,status:t?J.succeeded:J.pending,haveCheckedForRerun:!0,rerun:t,command:this.runCommand})}catch(m){this.logError(`${r.relativeCwd}: failed to get lastModified (${m})`)}finally{p()}return t}formatHeader(r,t=0){let n=`${this.grey("-".repeat(t)+"[")} ${r} ${this.grey("]")}`,i=(0,hr.default)(n).length;return n+this.grey("-".repeat(xa-i))}generateHeaderString(){return`${k.formatUtils.pretty(this.configuration,`${this.runCommand}`,k.FormatType.CODE)} for ${k.formatUtils.pretty(this.configuration,this.currentRunTarget?this.currentRunTarget:"",k.FormatType.SCOPE)}${this.dryRun?k.formatUtils.pretty(this.configuration," --dry-run",k.FormatType.NAME):""}`}generateProgressString(r){let t="",n=s=>this.grey(`[${s}]`),i=k.formatUtils.pretty(this.configuration,"IDLE","grey");t+=this.formatHeader(this.generateHeaderString())+`
`;let o=1;for(let s in this.runReport.workspaces){let a=this.runReport.workspaces[s];if(!a||!a.start||a.done)continue;this.runReport.runStart&&(this.runReport.workspaces[s].runtimeSeconds=r-this.runReport.runStart);let u=k.formatUtils.pretty(this.configuration,s,k.FormatType.NAME),c=k.formatUtils.pretty(this.configuration,`(${a.runScript})`,k.FormatType.REFERENCE),f=a.start?k.formatUtils.pretty(this.configuration,dr(a.start,r),k.FormatType.RANGE):"",l=n(o++),p=" ".repeat(l.length-1),h=k.formatUtils.pretty(this.configuration,a.name,k.FormatType.NAME),d=`${l} ${u}${h} ${c} ${f}
`,g="",y="",m="";(0,hr.default)(d).length>=process.stdout.columns&&(g=`${l} ${u}${h}
`,y=`${p} ${c} ${f}
`,(0,hr.default)(g).length>=process.stdout.columns&&(g=(0,Yr.default)(`${l} ${u}
`,0,process.stdout.columns),y=(0,Yr.default)(`${p} ${h}
`,0,process.stdout.columns),m=(0,Yr.default)(`${p} ${c} ${f}
`,0,process.stdout.columns)),d=g+y+m),t+=d}for(o;o<this.concurrency+1;)t+=`${n(o++)} ${i}
`;return this.runReport.runStart&&(t+=this.generateRunCountString(r)),t}},_a=async(e,r)=>{let t=0;return await Promise.all(e.map(async n=>{let i=await V.xfs.readdirPromise(n);await Promise.all(i.map(async o=>{let s=`${n}${pr.default.posix.sep}${o}`;if(r==null?void 0:r.some(u=>s.startsWith(u)))return;let a=await V.xfs.statPromise(s);if(a.isFile()&&a.mtimeMs>t&&(t=a.mtimeMs),a.isDirectory()){let u=await _a([s],r);u>t&&(t=u)}}))})),t},dr=(e,r)=>{let t=Math.abs(r-e),n="",i=Math.trunc(t/6e4);return i&&(n+=`${i}m`,t-=i*6e4),t&&(i&&(n+=" "),n+=`${(t/1e3).toFixed(2)}s`),n};function mp(e){return new Promise(r=>setTimeout(r,e))}var Hr=Ca;var Ea=_(C("@yarnpkg/core")),ka=(e,r)=>{let t=[];for(let n of e.workspacesCwds){let i=r.workspacesByCwd.get(n);i&&t.push(i,...ka(i,r))}return t},Qr=async({targetWorkspace:e,project:r,supervisor:t})=>{if(e.workspacesCwds.size!==0){let n=ka(e,r);t.runReport.totalJobs=n.length;for(let i of n){for(let o of Ea.Manifest.hardDependencies)for(let s of i.manifest.getForScope(o).values()){let a=r.tryWorkspaceByDescriptor(s);a!==null&&await t.addRunTarget(a)}await t.addRunTarget(i)}await t.addRunTarget(e)}else await t.addRunTarget(e,!0)};var mr=class extends Aa.BaseCommand{constructor(){super(...arguments);this.json=z.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});this.buildCommand=z.Option.String("-c,--build-command","build",{description:'the command to be run in each package (if available), defaults to "build"'});this.interlaced=z.Option.Boolean("-i,--interlaced",!0,{description:"If false it will instead buffer the output from each process and print the resulting buffers only after their source processes have exited. Defaults to false."});this.verbose=z.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});this.dryRun=z.Option.Boolean("-d,--dry-run",!1,{description:"simulate running a build, but not actually run it"});this.ignoreBuildCache=z.Option.Boolean("--ignore-cache",!1,{description:"every package will be built, regardless of whether is has changed or not."});this.maxConcurrency=z.Option.String("-m,--max-concurrency",{description:"is the maximum number of builds that can run at a time, defaults to the number of logical CPUs on the current machine. Will override the global config option."});this.shouldBailInstantly=z.Option.Boolean("--bail",!1,{description:"exit immediately upon build failing"});this.buildTarget=z.Option.Rest();this.forceQuit=!1;this.buildLog={}}async execute(){var o,s;let r=await X.Configuration.find(this.context.cwd,this.context.plugins),t=await jr(r);this.shouldBailInstantly=(o=this.shouldBailInstantly)!=null?o:t.bail,this.shouldBailInstantly=(s=this.shouldBailInstantly)!=null?s:t.bail;let n=this.maxConcurrency===void 0?t.maxConcurrency:parseInt(this.maxConcurrency),i=await X.StreamReport.start({configuration:r,json:this.json,stdout:this.context.stdout,includeLogs:!0},async a=>{let u=this.context.cwd;typeof this.buildTarget[0]=="string"&&(u=`${r.projectCwd}${Sa.default.posix.sep}${this.buildTarget[0]}`);let{project:c,workspace:f}=await X.Project.find(r,u),l=f||c.topLevelWorkspace,p=async(g,y,m,v)=>{let A=new X.miscUtils.BufferStream;A.on("data",O=>m==null?void 0:m.emit(T.info,v,O&&O.toString()));let E=new X.miscUtils.BufferStream;if(E.on("data",O=>m==null?void 0:m.emit(T.error,v,O&&O.toString())),this.forceQuit)return A.destroy(),E.destroy(),A.end(),E.end(),2;try{let O=await this.cli.run(["run",g],{cwd:y,stdout:A,stderr:E})||0;return A.end(),E.end(),O}catch(O){A.end(),E.end()}return 2},h=new Hr({project:c,configuration:r,pluginConfiguration:t,report:a,runCommand:this.buildCommand,cli:p,dryRun:this.dryRun,ignoreRunCache:this.ignoreBuildCache,verbose:this.verbose,concurrency:n,shouldBailInstantly:this.shouldBailInstantly});h.runReporter.on(T.forceQuit,()=>{this.forceQuit=!0}),await h.setup(),await Qr({targetWorkspace:l,project:c,supervisor:h}),await h.run()===!1&&a.reportError(X.MessageName.BUILD_FAILED,"Build failed")});return ye.hasBeenTerminated=!0,i.exitCode()}};mr.paths=[["build"]],mr.usage=z.Command.Usage({category:"Build commands",description:"build a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are built in the right order.

    `});var Ia=mr;var Ba=_(C("@yarnpkg/cli")),qa=_(C("@yarnpkg/core")),Kr=_(C("@yarnpkg/core")),$a=_(C("clipanion"));var Z=e=>{if(e==null)throw new Error("Invalid name");return e.scope?`@${e.scope}/${e.name}`:e.name};var Ra=({workspace:e,project:r})=>{let t=Array.from(e.manifest.dependencies.values()).map(i=>Z(i)),n=Array.from(r.workspaces.values()).map(i=>Z(i.manifest.name));return t.filter(i=>n.includes(i))};var Pa=({project:e,workspaceName:r})=>e.workspaces.find(n=>Z(n.manifest.name)===r);var Oa=_(C("@yarnpkg/core"));var gp={firstCharacters:"\u27A4 ",tabString:"\u2502 "},Ta="gray",gr=({format:e,padding:r,step:t=5,characters:n=gp})=>{let{firstCharacters:i,tabString:o}=n,s=o.split("");for(let a=0;a<r;a++){let u=Array(t).fill(" ").map((c,f)=>f<s.length?s[f]:c).join("");process.stdout.write(e(u,Ta))}process.stdout.write(e(i,Ta))};var yp=Oa.FormatType.NAME,Fa="red",La=({format:e,circular:r,dependency:t,parents:n,current:i,project:o,padding:s=0})=>{if(r){gr({format:e,padding:s+1}),process.stdout.write(e(t,yp)),process.stdout.write(e(" -> circular dependency",Fa)),process.stdout.write(`
`);return}let a=Pa({project:o,workspaceName:t});if(!a){gr({format:e,padding:s+1}),process.stdout.write(t),process.stdout.write(e("-> incorrect dependency",Fa)),process.stdout.write(`
`);return}zr({format:e,project:o,parent:i,parents:[...n,i],padding:s+1,workspace:a})};var Na=({format:e,workspace:r,parent:t,parents:n,project:i,padding:o=0})=>{let s=Ra({workspace:r,project:i});for(let a of s)La({format:e,workspace:r,project:i,padding:o,parent:t,parents:n,current:Z(r.manifest.name),circular:t===a||n.includes(a),dependency:a})};var Da=_(C("@yarnpkg/core"));var vp=Da.FormatType.NAME,Ma=({format:e,workspace:r,padding:t=0})=>{let{name:n}=r.manifest,i=Z(n);gr({format:e,padding:t}),process.stdout.write(e(i,vp)),process.stdout.write(`
`)};var zr=({format:e,workspace:r,project:t,parents:n,padding:i=0,parent:o})=>{Ma({workspace:r,padding:i,format:e}),Na({parents:n,workspace:r,project:t,padding:i,parent:o,format:e})};var yr=({padding:e})=>{for(let r=0;r<e;r++)process.stdout.write(`
`)};var ja=({workspace:e,format:r})=>{let t=Z(e.manifest.name);process.stdout.write(`Build query for package: ${r(t,"bold")}`),yr({padding:1})};var vr=class extends Ba.BaseCommand{async execute(){let r=await Kr.Configuration.find(this.context.cwd,this.context.plugins),{project:t,workspace:n}=await Kr.Project.find(r,this.context.cwd);if(!n)return 0;let i=(o,s)=>qa.formatUtils.pretty(r,o,s);return yr({padding:1}),ja({workspace:n,format:i}),zr({parents:[],workspace:n,project:t,format:i}),yr({padding:2}),0}};vr.paths=[["build","query"]],vr.usage=$a.Command.Usage({category:"Build commands",description:"prints out dependency graph for current package",details:`
          In a monorepo with internal packages that depend on others, this command
          will traverse the dependency graph and efficiently ensure, the packages
          are built in the right order.
    
        `});var Ua=vr;var Wa=_(C("@yarnpkg/cli")),ee=_(C("@yarnpkg/core")),ce=_(C("clipanion")),Ga=_(C("path"));var br=class extends Wa.BaseCommand{constructor(){super(...arguments);this.json=ce.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});this.verbose=ce.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});this.ignoreTestCache=ce.Option.Boolean("--ignore-cache",!1,{description:"every package will be tested, regardless of whether is has changed or not."});this.maxConcurrency=ce.Option.String("-m,--max-concurrency",{description:"is the maximum number of tests that can run at a time, defaults to the number of logical CPUs on the current machine. Will override the global config option."});this.shouldBailInstantly=ce.Option.Boolean("--bail",!1,{description:"exit immediately upon build failing"});this.runTarget=ce.Option.Rest();this.forceQuit=!1;this.runLog={}}async execute(){var o;let r=await ee.Configuration.find(this.context.cwd,this.context.plugins),t=await jr(r);this.shouldBailInstantly=(o=this.shouldBailInstantly)!=null?o:t.bail;let n=this.maxConcurrency===void 0?t.maxConcurrency:parseInt(this.maxConcurrency),i=await ee.StreamReport.start({configuration:r,json:this.json,stdout:this.context.stdout,includeLogs:!0},async s=>{let a=this.context.cwd;typeof this.runTarget[0]=="string"&&(a=`${r.projectCwd}${Ga.default.posix.sep}${this.runTarget[0]}`);let{project:u,workspace:c}=await ee.Project.find(r,a),f=c||u.topLevelWorkspace,l=async(d,g,y,m)=>{let v=new ee.miscUtils.BufferStream;v.on("data",E=>y==null?void 0:y.emit(T.info,m,E&&E.toString()));let A=new ee.miscUtils.BufferStream;if(A.on("data",E=>y==null?void 0:y.emit(T.error,m,E&&E.toString())),this.forceQuit)return v.destroy(),A.destroy(),v.end(),A.end(),2;try{let E=await this.cli.run(["run",d],{cwd:g,stdout:v,stderr:A})||0;return v.end(),A.end(),E}catch(E){v.end(),A.end()}return 2},p=new Hr({project:u,configuration:r,pluginConfiguration:t,report:s,runCommand:"test",cli:l,dryRun:!1,ignoreRunCache:this.ignoreTestCache,verbose:this.verbose,concurrency:n,shouldBailInstantly:this.shouldBailInstantly});p.runReporter.on(T.forceQuit,()=>{this.forceQuit=!0}),await p.setup(),await Qr({targetWorkspace:f,project:u,supervisor:p}),await p.run()===!1&&s.reportError(ee.MessageName.BUILD_FAILED,"Test failed")});return ye.hasBeenTerminated=!0,i.exitCode()}};br.paths=[["test"]],br.usage=ce.Command.Usage({category:"Test commands",description:"test a package and all its dependencies",details:`
    In a monorepo with internal packages that depend on others, this command
    will traverse the dependency graph and efficiently ensure, the packages
    are tested in the right order.
    `});var Ya=br;var bp={commands:[ps,Ua,Ia,Ya]},wp=bp;return xp;})();
return plugin;
}
};
