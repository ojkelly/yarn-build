/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@ojkelly/plugin-test",
factory: function (require) {
"use strict";var plugin=(()=>{var Sv=Object.create;var Fs=Object.defineProperty;var Av=Object.getOwnPropertyDescriptor;var Tv=Object.getOwnPropertyNames;var yv=Object.getPrototypeOf,Rv=Object.prototype.hasOwnProperty;var v=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),bv=(e,t)=>{for(var r in t)Fs(e,r,{get:t[r],enumerable:!0})},Sg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Tv(t))!Rv.call(e,i)&&i!==r&&Fs(e,i,{get:()=>t[i],enumerable:!(n=Av(t,i))||n.enumerable});return e};var K=(e,t,r)=>(r=e!=null?Sv(yv(e)):{},Sg(t||!e||!e.__esModule?Fs(r,"default",{value:e,enumerable:!0}):r,e)),Ov=e=>Sg(Fs({},"__esModule",{value:!0}),e);var Us=d(et=>{"use strict";et.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;et.find=(e,t)=>e.nodes.find(r=>r.type===t);et.exceedsLimit=(e,t,r=1,n)=>n===!1||!et.isInteger(e)||!et.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=n;et.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};et.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0);et.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;et.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;et.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);et.flatten=(...e)=>{let t=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];Array.isArray(s)?r(s,t):s!==void 0&&t.push(s)}return t};return r(e),t}});var ks=d((tj,Tg)=>{"use strict";var Ag=Us();Tg.exports=(e,t={})=>{let r=(n,i={})=>{let s=t.escapeInvalid&&Ag.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a="";if(n.value)return(s||o)&&Ag.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(e)}});var Rg=d((rj,yg)=>{"use strict";yg.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}});var xg=d((nj,Lg)=>{"use strict";var bg=Rg(),ur=(e,t,r)=>{if(bg(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(bg(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),s=String(n.shorthand),o=String(n.capture),a=String(n.wrap),u=e+":"+t+"="+i+s+o+a;if(ur.cache.hasOwnProperty(u))return ur.cache[u].result;let c=Math.min(e,t),l=Math.max(e,t);if(Math.abs(c-l)===1){let g=e+"|"+t;return n.capture?`(${g})`:n.wrap===!1?g:`(?:${g})`}let f=Ng(e)||Ng(t),p={min:e,max:t,a:c,b:l},h=[],_=[];if(f&&(p.isPadded=f,p.maxLen=String(p.max).length),c<0){let g=l<0?Math.abs(l):1;_=Og(g,Math.abs(c),p,n),c=p.a=0}return l>=0&&(h=Og(c,l,p,n)),p.negatives=_,p.positives=h,p.result=vv(_,h,n),n.capture===!0?p.result=`(${p.result})`:n.wrap!==!1&&h.length+_.length>1&&(p.result=`(?:${p.result})`),ur.cache[u]=p,p.result};function vv(e,t,r){let n=Wc(e,t,"-",!1,r)||[],i=Wc(t,e,"",!1,r)||[],s=Wc(e,t,"-?",!0,r)||[];return n.concat(s).concat(i).join("|")}function Pv(e,t){let r=1,n=1,i=Pg(e,r),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),r+=1,i=Pg(e,r);for(i=Cg(t+1,n)-1;e<i&&i<=t;)s.add(i),n+=1,i=Cg(t+1,n)-1;return s=[...s],s.sort(Nv),s}function Cv(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=Iv(e,t),i=n.length,s="",o=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?s+=u:u!=="0"||c!=="9"?s+=Lv(u,c,r):o++}return o&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[o],digits:i}}function Og(e,t,r,n){let i=Pv(e,t),s=[],o=e,a;for(let u=0;u<i.length;u++){let c=i[u],l=Cv(String(o),String(c),n),f="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+Ig(a.count),o=c+1;continue}r.isPadded&&(f=xv(c,r,n)),l.string=f+l.pattern+Ig(l.count),s.push(l),o=c+1,a=l}return s}function Wc(e,t,r,n,i){let s=[];for(let o of e){let{string:a}=o;!n&&!vg(t,"string",a)&&s.push(r+a),n&&vg(t,"string",a)&&s.push(r+a)}return s}function Iv(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}function Nv(e,t){return e>t?1:t>e?-1:0}function vg(e,t,r){return e.some(n=>n[t]===r)}function Pg(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function Cg(e,t){return e-e%Math.pow(10,t)}function Ig(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function Lv(e,t,r){return`[${e}${t-e===1?"":"-"}${t}]`}function Ng(e){return/^-?(0+)\d/.test(e)}function xv(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}ur.cache={};ur.clearCache=()=>ur.cache={};Lg.exports=ur});var Xc=d((ij,Gg)=>{"use strict";var wv=v("util"),Dg=xg(),wg=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),Mv=e=>t=>e===!0?Number(t):String(t),Yc=e=>typeof e=="number"||typeof e=="string"&&e!=="",hi=e=>Number.isInteger(+e),Kc=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return!1;for(;t[++r]==="0";);return r>0},Dv=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,Bv=(e,t,r)=>{if(t>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return r===!1?String(e):e},Mg=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},Fv=(e,t)=>{e.negatives.sort((o,a)=>o<a?-1:o>a?1:0),e.positives.sort((o,a)=>o<a?-1:o>a?1:0);let r=t.capture?"":"?:",n="",i="",s;return e.positives.length&&(n=e.positives.join("|")),e.negatives.length&&(i=`-(${r}${e.negatives.join("|")})`),n&&i?s=`${n}|${i}`:s=n||i,t.wrap?`(${r}${s})`:s},Bg=(e,t,r,n)=>{if(r)return Dg(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);if(e===t)return i;let s=String.fromCharCode(t);return`[${i}-${s}]`},Fg=(e,t,r)=>{if(Array.isArray(e)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${e.join("|")})`:e.join("|")}return Dg(e,t,r)},Ug=(...e)=>new RangeError("Invalid range arguments: "+wv.inspect(...e)),kg=(e,t,r)=>{if(r.strictRanges===!0)throw Ug([e,t]);return[]},Uv=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},kv=(e,t,r=1,n={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw Ug([e,t]);return[]}i===0&&(i=0),s===0&&(s=0);let o=i>s,a=String(e),u=String(t),c=String(r);r=Math.max(Math.abs(r),1);let l=Kc(a)||Kc(u)||Kc(c),f=l?Math.max(a.length,u.length,c.length):0,p=l===!1&&Dv(e,t,n)===!1,h=n.transform||Mv(p);if(n.toRegex&&r===1)return Bg(Mg(e,f),Mg(t,f),!0,n);let _={negatives:[],positives:[]},g=y=>_[y<0?"negatives":"positives"].push(Math.abs(y)),T=[],A=0;for(;o?i>=s:i<=s;)n.toRegex===!0&&r>1?g(i):T.push(Bv(h(i,A),f,p)),i=o?i-r:i+r,A++;return n.toRegex===!0?r>1?Fv(_,n):Fg(T,null,{wrap:!1,...n}):T},Gv=(e,t,r=1,n={})=>{if(!hi(e)&&e.length>1||!hi(t)&&t.length>1)return kg(e,t,n);let i=n.transform||(p=>String.fromCharCode(p)),s=`${e}`.charCodeAt(0),o=`${t}`.charCodeAt(0),a=s>o,u=Math.min(s,o),c=Math.max(s,o);if(n.toRegex&&r===1)return Bg(u,c,!1,n);let l=[],f=0;for(;a?s>=o:s<=o;)l.push(i(s,f)),s=a?s-r:s+r,f++;return n.toRegex===!0?Fg(l,null,{wrap:!1,options:n}):l},Gs=(e,t,r,n={})=>{if(t==null&&Yc(e))return[e];if(!Yc(e)||!Yc(t))return kg(e,t,n);if(typeof r=="function")return Gs(e,t,1,{transform:r});if(wg(r))return Gs(e,t,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,hi(r)?hi(e)&&hi(t)?kv(e,t,r,i):Gv(e,t,Math.max(Math.abs(r),1),i):r!=null&&!wg(r)?Uv(r,i):Gs(e,t,1,r)};Gg.exports=Gs});var Hg=d((sj,jg)=>{"use strict";var qv=Xc(),qg=Us(),jv=(e,t={})=>{let r=(n,i={})=>{let s=qg.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a=s===!0||o===!0,u=t.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=qg.reduce(n.nodes),f=qv(...l,{...t,wrap:!1,toRegex:!0});if(f.length!==0)return l.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let l of n.nodes)c+=r(l,n);return c};return r(e)};jg.exports=jv});var Wg=d((oj,Vg)=>{"use strict";var Hv=Xc(),$g=ks(),Kr=Us(),cr=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?Kr.flatten(t).map(i=>`{${i}}`):t;for(let i of e)if(Array.isArray(i))for(let s of i)n.push(cr(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?cr(i,s,r):i+s);return Kr.flatten(n)},$v=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,n=(i,s={})=>{i.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(i.invalid||i.dollar){a.push(cr(a.pop(),$g(i,t)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(cr(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let f=Kr.reduce(i.nodes);if(Kr.exceedsLimit(...f,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let p=Hv(...f,t);p.length===0&&(p=$g(i,t)),a.push(cr(a.pop(),p)),i.nodes=[];return}let u=Kr.encloseBrace(i),c=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let f=0;f<i.nodes.length;f++){let p=i.nodes[f];if(p.type==="comma"&&i.type==="brace"){f===1&&c.push(""),c.push("");continue}if(p.type==="close"){a.push(cr(a.pop(),c,u));continue}if(p.value&&p.type!=="open"){c.push(cr(c.pop(),p.value));continue}p.nodes&&n(p,i)}return c};return Kr.flatten(n(e))};Vg.exports=$v});var Kg=d((aj,Yg)=>{"use strict";Yg.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Jg=d((uj,Zg)=>{"use strict";var Vv=ks(),{MAX_LENGTH:Xg,CHAR_BACKSLASH:zc,CHAR_BACKTICK:Wv,CHAR_COMMA:Yv,CHAR_DOT:Kv,CHAR_LEFT_PARENTHESES:Xv,CHAR_RIGHT_PARENTHESES:zv,CHAR_LEFT_CURLY_BRACE:Qv,CHAR_RIGHT_CURLY_BRACE:Zv,CHAR_LEFT_SQUARE_BRACKET:zg,CHAR_RIGHT_SQUARE_BRACKET:Qg,CHAR_DOUBLE_QUOTE:Jv,CHAR_SINGLE_QUOTE:eP,CHAR_NO_BREAK_SPACE:tP,CHAR_ZERO_WIDTH_NOBREAK_SPACE:rP}=Kg(),nP=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},n=typeof r.maxLength=="number"?Math.min(Xg,r.maxLength):Xg;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let i={type:"root",input:e,nodes:[]},s=[i],o=i,a=i,u=0,c=e.length,l=0,f=0,p,h={},_=()=>e[l++],g=T=>{if(T.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&T.type==="text"){a.value+=T.value;return}return o.nodes.push(T),T.parent=o,T.prev=a,a=T,T};for(g({type:"bos"});l<c;)if(o=s[s.length-1],p=_(),!(p===rP||p===tP)){if(p===zc){g({type:"text",value:(t.keepEscaping?p:"")+_()});continue}if(p===Qg){g({type:"text",value:"\\"+p});continue}if(p===zg){u++;let T=!0,A;for(;l<c&&(A=_());){if(p+=A,A===zg){u++;continue}if(A===zc){p+=_();continue}if(A===Qg&&(u--,u===0))break}g({type:"text",value:p});continue}if(p===Xv){o=g({type:"paren",nodes:[]}),s.push(o),g({type:"text",value:p});continue}if(p===zv){if(o.type!=="paren"){g({type:"text",value:p});continue}o=s.pop(),g({type:"text",value:p}),o=s[s.length-1];continue}if(p===Jv||p===eP||p===Wv){let T=p,A;for(t.keepQuotes!==!0&&(p="");l<c&&(A=_());){if(A===zc){p+=A+_();continue}if(A===T){t.keepQuotes===!0&&(p+=A);break}p+=A}g({type:"text",value:p});continue}if(p===Qv){f++;let A={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};o=g(A),s.push(o),g({type:"open",value:p});continue}if(p===Zv){if(o.type!=="brace"){g({type:"text",value:p});continue}let T="close";o=s.pop(),o.close=!0,g({type:T,value:p}),f--,o=s[s.length-1];continue}if(p===Yv&&f>0){if(o.ranges>0){o.ranges=0;let T=o.nodes.shift();o.nodes=[T,{type:"text",value:Vv(o)}]}g({type:"comma",value:p}),o.commas++;continue}if(p===Kv&&f>0&&o.commas===0){let T=o.nodes;if(f===0||T.length===0){g({type:"text",value:p});continue}if(a.type==="dot"){if(o.range=[],a.value+=p,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){T.pop();let A=T[T.length-1];A.value+=a.value+p,a=A,o.ranges--;continue}g({type:"dot",value:p});continue}g({type:"text",value:p})}do if(o=s.pop(),o.type!=="root"){o.nodes.forEach(y=>{y.nodes||(y.type==="open"&&(y.isOpen=!0),y.type==="close"&&(y.isClose=!0),y.nodes||(y.type="text"),y.invalid=!0)});let T=s[s.length-1],A=T.nodes.indexOf(o);T.nodes.splice(A,1,...o.nodes)}while(s.length>0);return g({type:"eos"}),i};Zg.exports=nP});var rm=d((cj,tm)=>{"use strict";var em=ks(),iP=Hg(),sP=Wg(),oP=Jg(),We=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let i=We.create(n,t);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(We.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};We.parse=(e,t={})=>oP(e,t);We.stringify=(e,t={})=>em(typeof e=="string"?We.parse(e,t):e,t);We.compile=(e,t={})=>(typeof e=="string"&&(e=We.parse(e,t)),iP(e,t));We.expand=(e,t={})=>{typeof e=="string"&&(e=We.parse(e,t));let r=sP(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};We.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?We.compile(e,t):We.expand(e,t);tm.exports=We});var gi=d((lj,am)=>{"use strict";var aP=v("path"),ht="\\\\/",nm=`[^${ht}]`,It="\\.",uP="\\+",cP="\\?",qs="\\/",lP="(?=.)",im="[^/]",Qc=`(?:${qs}|$)`,sm=`(?:^|${qs})`,Zc=`${It}{1,2}${Qc}`,dP=`(?!${It})`,fP=`(?!${sm}${Zc})`,pP=`(?!${It}{0,1}${Qc})`,_P=`(?!${Zc})`,hP=`[^.${qs}]`,gP=`${im}*?`,om={DOT_LITERAL:It,PLUS_LITERAL:uP,QMARK_LITERAL:cP,SLASH_LITERAL:qs,ONE_CHAR:lP,QMARK:im,END_ANCHOR:Qc,DOTS_SLASH:Zc,NO_DOT:dP,NO_DOTS:fP,NO_DOT_SLASH:pP,NO_DOTS_SLASH:_P,QMARK_NO_DOT:hP,STAR:gP,START_ANCHOR:sm},mP={...om,SLASH_LITERAL:`[${ht}]`,QMARK:nm,STAR:`${nm}*?`,DOTS_SLASH:`${It}{1,2}(?:[${ht}]|$)`,NO_DOT:`(?!${It})`,NO_DOTS:`(?!(?:^|[${ht}])${It}{1,2}(?:[${ht}]|$))`,NO_DOT_SLASH:`(?!${It}{0,1}(?:[${ht}]|$))`,NO_DOTS_SLASH:`(?!${It}{1,2}(?:[${ht}]|$))`,QMARK_NO_DOT:`[^.${ht}]`,START_ANCHOR:`(?:^|[${ht}])`,END_ANCHOR:`(?:[${ht}]|$)`},EP={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};am.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:EP,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:aP.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?mP:om}}});var mi=d(Ue=>{"use strict";var SP=v("path"),AP=process.platform==="win32",{REGEX_BACKSLASH:TP,REGEX_REMOVE_BACKSLASH:yP,REGEX_SPECIAL_CHARS:RP,REGEX_SPECIAL_CHARS_GLOBAL:bP}=gi();Ue.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Ue.hasRegexChars=e=>RP.test(e);Ue.isRegexChar=e=>e.length===1&&Ue.hasRegexChars(e);Ue.escapeRegex=e=>e.replace(bP,"\\$1");Ue.toPosixSlashes=e=>e.replace(TP,"/");Ue.removeBackslashes=e=>e.replace(yP,t=>t==="\\"?"":t);Ue.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Ue.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:AP===!0||SP.sep==="\\";Ue.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Ue.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Ue.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Ue.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",s=`${n}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var hm=d((fj,_m)=>{"use strict";var um=mi(),{CHAR_ASTERISK:Jc,CHAR_AT:OP,CHAR_BACKWARD_SLASH:Ei,CHAR_COMMA:vP,CHAR_DOT:el,CHAR_EXCLAMATION_MARK:tl,CHAR_FORWARD_SLASH:pm,CHAR_LEFT_CURLY_BRACE:rl,CHAR_LEFT_PARENTHESES:nl,CHAR_LEFT_SQUARE_BRACKET:PP,CHAR_PLUS:CP,CHAR_QUESTION_MARK:cm,CHAR_RIGHT_CURLY_BRACE:IP,CHAR_RIGHT_PARENTHESES:lm,CHAR_RIGHT_SQUARE_BRACKET:NP}=gi(),dm=e=>e===pm||e===Ei,fm=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},LP=(e,t)=>{let r=t||{},n=e.length-1,i=r.parts===!0||r.scanToEnd===!0,s=[],o=[],a=[],u=e,c=-1,l=0,f=0,p=!1,h=!1,_=!1,g=!1,T=!1,A=!1,y=!1,R=!1,D=!1,b=!1,B=0,I,w,W={value:"",depth:0,isGlob:!1},ee=()=>c>=n,E=()=>u.charCodeAt(c+1),C=()=>(I=w,u.charCodeAt(++c));for(;c<n;){w=C();let Me;if(w===Ei){y=W.backslashes=!0,w=C(),w===rl&&(A=!0);continue}if(A===!0||w===rl){for(B++;ee()!==!0&&(w=C());){if(w===Ei){y=W.backslashes=!0,C();continue}if(w===rl){B++;continue}if(A!==!0&&w===el&&(w=C())===el){if(p=W.isBrace=!0,_=W.isGlob=!0,b=!0,i===!0)continue;break}if(A!==!0&&w===vP){if(p=W.isBrace=!0,_=W.isGlob=!0,b=!0,i===!0)continue;break}if(w===IP&&(B--,B===0)){A=!1,p=W.isBrace=!0,b=!0;break}}if(i===!0)continue;break}if(w===pm){if(s.push(c),o.push(W),W={value:"",depth:0,isGlob:!1},b===!0)continue;if(I===el&&c===l+1){l+=2;continue}f=c+1;continue}if(r.noext!==!0&&(w===CP||w===OP||w===Jc||w===cm||w===tl)===!0&&E()===nl){if(_=W.isGlob=!0,g=W.isExtglob=!0,b=!0,w===tl&&c===l&&(D=!0),i===!0){for(;ee()!==!0&&(w=C());){if(w===Ei){y=W.backslashes=!0,w=C();continue}if(w===lm){_=W.isGlob=!0,b=!0;break}}continue}break}if(w===Jc){if(I===Jc&&(T=W.isGlobstar=!0),_=W.isGlob=!0,b=!0,i===!0)continue;break}if(w===cm){if(_=W.isGlob=!0,b=!0,i===!0)continue;break}if(w===PP){for(;ee()!==!0&&(Me=C());){if(Me===Ei){y=W.backslashes=!0,C();continue}if(Me===NP){h=W.isBracket=!0,_=W.isGlob=!0,b=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&w===tl&&c===l){R=W.negated=!0,l++;continue}if(r.noparen!==!0&&w===nl){if(_=W.isGlob=!0,i===!0){for(;ee()!==!0&&(w=C());){if(w===nl){y=W.backslashes=!0,w=C();continue}if(w===lm){b=!0;break}}continue}break}if(_===!0){if(b=!0,i===!0)continue;break}}r.noext===!0&&(g=!1,_=!1);let F=u,ot="",m="";l>0&&(ot=u.slice(0,l),u=u.slice(l),f-=l),F&&_===!0&&f>0?(F=u.slice(0,f),m=u.slice(f)):_===!0?(F="",m=u):F=u,F&&F!==""&&F!=="/"&&F!==u&&dm(F.charCodeAt(F.length-1))&&(F=F.slice(0,-1)),r.unescape===!0&&(m&&(m=um.removeBackslashes(m)),F&&y===!0&&(F=um.removeBackslashes(F)));let S={prefix:ot,input:e,start:l,base:F,glob:m,isBrace:p,isBracket:h,isGlob:_,isExtglob:g,isGlobstar:T,negated:R,negatedExtglob:D};if(r.tokens===!0&&(S.maxDepth=0,dm(w)||o.push(W),S.tokens=o),r.parts===!0||r.tokens===!0){let Me;for(let Y=0;Y<s.length;Y++){let pt=Me?Me+1:l,_t=s[Y],Ve=e.slice(pt,_t);r.tokens&&(Y===0&&l!==0?(o[Y].isPrefix=!0,o[Y].value=ot):o[Y].value=Ve,fm(o[Y]),S.maxDepth+=o[Y].depth),(Y!==0||Ve!=="")&&a.push(Ve),Me=_t}if(Me&&Me+1<e.length){let Y=e.slice(Me+1);a.push(Y),r.tokens&&(o[o.length-1].value=Y,fm(o[o.length-1]),S.maxDepth+=o[o.length-1].depth)}S.slashes=s,S.parts=a}return S};_m.exports=LP});var Em=d((pj,mm)=>{"use strict";var js=gi(),Ye=mi(),{MAX_LENGTH:Hs,POSIX_REGEX_SOURCE:xP,REGEX_NON_SPECIAL_CHARS:wP,REGEX_SPECIAL_CHARS_BACKREF:MP,REPLACEMENTS:gm}=js,DP=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(i=>Ye.escapeRegex(i)).join("..")}return r},Xr=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,il=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=gm[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(Hs,r.maxLength):Hs,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let s={type:"bos",value:"",output:r.prepend||""},o=[s],a=r.capture?"":"?:",u=Ye.isWindows(t),c=js.globChars(u),l=js.extglobChars(c),{DOT_LITERAL:f,PLUS_LITERAL:p,SLASH_LITERAL:h,ONE_CHAR:_,DOTS_SLASH:g,NO_DOT:T,NO_DOT_SLASH:A,NO_DOTS_SLASH:y,QMARK:R,QMARK_NO_DOT:D,STAR:b,START_ANCHOR:B}=c,I=P=>`(${a}(?:(?!${B}${P.dot?g:f}).)*?)`,w=r.dot?"":T,W=r.dot?R:D,ee=r.bash===!0?I(r):b;r.capture&&(ee=`(${ee})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let E={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};e=Ye.removePrefix(e,E),i=e.length;let C=[],F=[],ot=[],m=s,S,Me=()=>E.index===i-1,Y=E.peek=(P=1)=>e[E.index+P],pt=E.advance=()=>e[++E.index]||"",_t=()=>e.slice(E.index+1),Ve=(P="",re=0)=>{E.consumed+=P,E.index+=re},ws=P=>{E.output+=P.output!=null?P.output:P.value,Ve(P.value)},mv=()=>{let P=1;for(;Y()==="!"&&(Y(2)!=="("||Y(3)==="?");)pt(),E.start++,P++;return P%2===0?!1:(E.negated=!0,E.start++,!0)},Ms=P=>{E[P]++,ot.push(P)},ar=P=>{E[P]--,ot.pop()},$=P=>{if(m.type==="globstar"){let re=E.braces>0&&(P.type==="comma"||P.type==="brace"),O=P.extglob===!0||C.length&&(P.type==="pipe"||P.type==="paren");P.type!=="slash"&&P.type!=="paren"&&!re&&!O&&(E.output=E.output.slice(0,-m.output.length),m.type="star",m.value="*",m.output=ee,E.output+=m.output)}if(C.length&&P.type!=="paren"&&(C[C.length-1].inner+=P.value),(P.value||P.output)&&ws(P),m&&m.type==="text"&&P.type==="text"){m.value+=P.value,m.output=(m.output||"")+P.value;return}P.prev=m,o.push(P),m=P},Ds=(P,re)=>{let O={...l[re],conditions:1,inner:""};O.prev=m,O.parens=E.parens,O.output=E.output;let G=(r.capture?"(":"")+O.open;Ms("parens"),$({type:P,value:re,output:E.output?"":_}),$({type:"paren",extglob:!0,value:pt(),output:G}),C.push(O)},Ev=P=>{let re=P.close+(r.capture?")":""),O;if(P.type==="negate"){let G=ee;if(P.inner&&P.inner.length>1&&P.inner.includes("/")&&(G=I(r)),(G!==ee||Me()||/^\)+$/.test(_t()))&&(re=P.close=`)$))${G}`),P.inner.includes("*")&&(O=_t())&&/^\.[^\\/.]+$/.test(O)){let ce=il(O,{...t,fastpaths:!1}).output;re=P.close=`)${ce})${G})`}P.prev.type==="bos"&&(E.negatedExtglob=!0)}$({type:"paren",extglob:!0,value:S,output:re}),ar("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let P=!1,re=e.replace(MP,(O,G,ce,De,ge,Vc)=>De==="\\"?(P=!0,O):De==="?"?G?G+De+(ge?R.repeat(ge.length):""):Vc===0?W+(ge?R.repeat(ge.length):""):R.repeat(ce.length):De==="."?f.repeat(ce.length):De==="*"?G?G+De+(ge?ee:""):ee:G?O:`\\${O}`);return P===!0&&(r.unescape===!0?re=re.replace(/\\/g,""):re=re.replace(/\\+/g,O=>O.length%2===0?"\\\\":O?"\\":"")),re===e&&r.contains===!0?(E.output=e,E):(E.output=Ye.wrapOutput(re,E,t),E)}for(;!Me();){if(S=pt(),S==="\0")continue;if(S==="\\"){let O=Y();if(O==="/"&&r.bash!==!0||O==="."||O===";")continue;if(!O){S+="\\",$({type:"text",value:S});continue}let G=/^\\+/.exec(_t()),ce=0;if(G&&G[0].length>2&&(ce=G[0].length,E.index+=ce,ce%2!==0&&(S+="\\")),r.unescape===!0?S=pt():S+=pt(),E.brackets===0){$({type:"text",value:S});continue}}if(E.brackets>0&&(S!=="]"||m.value==="["||m.value==="[^")){if(r.posix!==!1&&S===":"){let O=m.value.slice(1);if(O.includes("[")&&(m.posix=!0,O.includes(":"))){let G=m.value.lastIndexOf("["),ce=m.value.slice(0,G),De=m.value.slice(G+2),ge=xP[De];if(ge){m.value=ce+ge,E.backtrack=!0,pt(),!s.output&&o.indexOf(m)===1&&(s.output=_);continue}}}(S==="["&&Y()!==":"||S==="-"&&Y()==="]")&&(S=`\\${S}`),S==="]"&&(m.value==="["||m.value==="[^")&&(S=`\\${S}`),r.posix===!0&&S==="!"&&m.value==="["&&(S="^"),m.value+=S,ws({value:S});continue}if(E.quotes===1&&S!=='"'){S=Ye.escapeRegex(S),m.value+=S,ws({value:S});continue}if(S==='"'){E.quotes=E.quotes===1?0:1,r.keepQuotes===!0&&$({type:"text",value:S});continue}if(S==="("){Ms("parens"),$({type:"paren",value:S});continue}if(S===")"){if(E.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Xr("opening","("));let O=C[C.length-1];if(O&&E.parens===O.parens+1){Ev(C.pop());continue}$({type:"paren",value:S,output:E.parens?")":"\\)"}),ar("parens");continue}if(S==="["){if(r.nobracket===!0||!_t().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Xr("closing","]"));S=`\\${S}`}else Ms("brackets");$({type:"bracket",value:S});continue}if(S==="]"){if(r.nobracket===!0||m&&m.type==="bracket"&&m.value.length===1){$({type:"text",value:S,output:`\\${S}`});continue}if(E.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Xr("opening","["));$({type:"text",value:S,output:`\\${S}`});continue}ar("brackets");let O=m.value.slice(1);if(m.posix!==!0&&O[0]==="^"&&!O.includes("/")&&(S=`/${S}`),m.value+=S,ws({value:S}),r.literalBrackets===!1||Ye.hasRegexChars(O))continue;let G=Ye.escapeRegex(m.value);if(E.output=E.output.slice(0,-m.value.length),r.literalBrackets===!0){E.output+=G,m.value=G;continue}m.value=`(${a}${G}|${m.value})`,E.output+=m.value;continue}if(S==="{"&&r.nobrace!==!0){Ms("braces");let O={type:"brace",value:S,output:"(",outputIndex:E.output.length,tokensIndex:E.tokens.length};F.push(O),$(O);continue}if(S==="}"){let O=F[F.length-1];if(r.nobrace===!0||!O){$({type:"text",value:S,output:S});continue}let G=")";if(O.dots===!0){let ce=o.slice(),De=[];for(let ge=ce.length-1;ge>=0&&(o.pop(),ce[ge].type!=="brace");ge--)ce[ge].type!=="dots"&&De.unshift(ce[ge].value);G=DP(De,r),E.backtrack=!0}if(O.comma!==!0&&O.dots!==!0){let ce=E.output.slice(0,O.outputIndex),De=E.tokens.slice(O.tokensIndex);O.value=O.output="\\{",S=G="\\}",E.output=ce;for(let ge of De)E.output+=ge.output||ge.value}$({type:"brace",value:S,output:G}),ar("braces"),F.pop();continue}if(S==="|"){C.length>0&&C[C.length-1].conditions++,$({type:"text",value:S});continue}if(S===","){let O=S,G=F[F.length-1];G&&ot[ot.length-1]==="braces"&&(G.comma=!0,O="|"),$({type:"comma",value:S,output:O});continue}if(S==="/"){if(m.type==="dot"&&E.index===E.start+1){E.start=E.index+1,E.consumed="",E.output="",o.pop(),m=s;continue}$({type:"slash",value:S,output:h});continue}if(S==="."){if(E.braces>0&&m.type==="dot"){m.value==="."&&(m.output=f);let O=F[F.length-1];m.type="dots",m.output+=S,m.value+=S,O.dots=!0;continue}if(E.braces+E.parens===0&&m.type!=="bos"&&m.type!=="slash"){$({type:"text",value:S,output:f});continue}$({type:"dot",value:S,output:f});continue}if(S==="?"){if(!(m&&m.value==="(")&&r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){Ds("qmark",S);continue}if(m&&m.type==="paren"){let G=Y(),ce=S;if(G==="<"&&!Ye.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(m.value==="("&&!/[!=<:]/.test(G)||G==="<"&&!/<([!=]|\w+>)/.test(_t()))&&(ce=`\\${S}`),$({type:"text",value:S,output:ce});continue}if(r.dot!==!0&&(m.type==="slash"||m.type==="bos")){$({type:"qmark",value:S,output:D});continue}$({type:"qmark",value:S,output:R});continue}if(S==="!"){if(r.noextglob!==!0&&Y()==="("&&(Y(2)!=="?"||!/[!=<:]/.test(Y(3)))){Ds("negate",S);continue}if(r.nonegate!==!0&&E.index===0){mv();continue}}if(S==="+"){if(r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){Ds("plus",S);continue}if(m&&m.value==="("||r.regex===!1){$({type:"plus",value:S,output:p});continue}if(m&&(m.type==="bracket"||m.type==="paren"||m.type==="brace")||E.parens>0){$({type:"plus",value:S});continue}$({type:"plus",value:p});continue}if(S==="@"){if(r.noextglob!==!0&&Y()==="("&&Y(2)!=="?"){$({type:"at",extglob:!0,value:S,output:""});continue}$({type:"text",value:S});continue}if(S!=="*"){(S==="$"||S==="^")&&(S=`\\${S}`);let O=wP.exec(_t());O&&(S+=O[0],E.index+=O[0].length),$({type:"text",value:S});continue}if(m&&(m.type==="globstar"||m.star===!0)){m.type="star",m.star=!0,m.value+=S,m.output=ee,E.backtrack=!0,E.globstar=!0,Ve(S);continue}let P=_t();if(r.noextglob!==!0&&/^\([^?]/.test(P)){Ds("star",S);continue}if(m.type==="star"){if(r.noglobstar===!0){Ve(S);continue}let O=m.prev,G=O.prev,ce=O.type==="slash"||O.type==="bos",De=G&&(G.type==="star"||G.type==="globstar");if(r.bash===!0&&(!ce||P[0]&&P[0]!=="/")){$({type:"star",value:S,output:""});continue}let ge=E.braces>0&&(O.type==="comma"||O.type==="brace"),Vc=C.length&&(O.type==="pipe"||O.type==="paren");if(!ce&&O.type!=="paren"&&!ge&&!Vc){$({type:"star",value:S,output:""});continue}for(;P.slice(0,3)==="/**";){let Bs=e[E.index+4];if(Bs&&Bs!=="/")break;P=P.slice(3),Ve("/**",3)}if(O.type==="bos"&&Me()){m.type="globstar",m.value+=S,m.output=I(r),E.output=m.output,E.globstar=!0,Ve(S);continue}if(O.type==="slash"&&O.prev.type!=="bos"&&!De&&Me()){E.output=E.output.slice(0,-(O.output+m.output).length),O.output=`(?:${O.output}`,m.type="globstar",m.output=I(r)+(r.strictSlashes?")":"|$)"),m.value+=S,E.globstar=!0,E.output+=O.output+m.output,Ve(S);continue}if(O.type==="slash"&&O.prev.type!=="bos"&&P[0]==="/"){let Bs=P[1]!==void 0?"|$":"";E.output=E.output.slice(0,-(O.output+m.output).length),O.output=`(?:${O.output}`,m.type="globstar",m.output=`${I(r)}${h}|${h}${Bs})`,m.value+=S,E.output+=O.output+m.output,E.globstar=!0,Ve(S+pt()),$({type:"slash",value:"/",output:""});continue}if(O.type==="bos"&&P[0]==="/"){m.type="globstar",m.value+=S,m.output=`(?:^|${h}|${I(r)}${h})`,E.output=m.output,E.globstar=!0,Ve(S+pt()),$({type:"slash",value:"/",output:""});continue}E.output=E.output.slice(0,-m.output.length),m.type="globstar",m.output=I(r),m.value+=S,E.output+=m.output,E.globstar=!0,Ve(S);continue}let re={type:"star",value:S,output:ee};if(r.bash===!0){re.output=".*?",(m.type==="bos"||m.type==="slash")&&(re.output=w+re.output),$(re);continue}if(m&&(m.type==="bracket"||m.type==="paren")&&r.regex===!0){re.output=S,$(re);continue}(E.index===E.start||m.type==="slash"||m.type==="dot")&&(m.type==="dot"?(E.output+=A,m.output+=A):r.dot===!0?(E.output+=y,m.output+=y):(E.output+=w,m.output+=w),Y()!=="*"&&(E.output+=_,m.output+=_)),$(re)}for(;E.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Xr("closing","]"));E.output=Ye.escapeLast(E.output,"["),ar("brackets")}for(;E.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Xr("closing",")"));E.output=Ye.escapeLast(E.output,"("),ar("parens")}for(;E.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Xr("closing","}"));E.output=Ye.escapeLast(E.output,"{"),ar("braces")}if(r.strictSlashes!==!0&&(m.type==="star"||m.type==="bracket")&&$({type:"maybe_slash",value:"",output:`${h}?`}),E.backtrack===!0){E.output="";for(let P of E.tokens)E.output+=P.output!=null?P.output:P.value,P.suffix&&(E.output+=P.suffix)}return E};il.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(Hs,r.maxLength):Hs,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);e=gm[e]||e;let s=Ye.isWindows(t),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:f,NO_DOTS_SLASH:p,STAR:h,START_ANCHOR:_}=js.globChars(s),g=r.dot?f:l,T=r.dot?p:l,A=r.capture?"":"?:",y={negated:!1,prefix:""},R=r.bash===!0?".*?":h;r.capture&&(R=`(${R})`);let D=w=>w.noglobstar===!0?R:`(${A}(?:(?!${_}${w.dot?c:o}).)*?)`,b=w=>{switch(w){case"*":return`${g}${u}${R}`;case".*":return`${o}${u}${R}`;case"*.*":return`${g}${R}${o}${u}${R}`;case"*/*":return`${g}${R}${a}${u}${T}${R}`;case"**":return g+D(r);case"**/*":return`(?:${g}${D(r)}${a})?${T}${u}${R}`;case"**/*.*":return`(?:${g}${D(r)}${a})?${T}${R}${o}${u}${R}`;case"**/.*":return`(?:${g}${D(r)}${a})?${o}${u}${R}`;default:{let W=/^(.*?)\.(\w+)$/.exec(w);if(!W)return;let ee=b(W[1]);return ee?ee+o+W[2]:void 0}}},B=Ye.removePrefix(e,y),I=b(B);return I&&r.strictSlashes!==!0&&(I+=`${a}?`),I};mm.exports=il});var Am=d((_j,Sm)=>{"use strict";var BP=v("path"),FP=hm(),sl=Em(),ol=mi(),UP=gi(),kP=e=>e&&typeof e=="object"&&!Array.isArray(e),le=(e,t,r=!1)=>{if(Array.isArray(e)){let l=e.map(p=>le(p,t,r));return p=>{for(let h of l){let _=h(p);if(_)return _}return!1}}let n=kP(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=ol.isWindows(t),o=n?le.compileRe(e,t):le.makeRe(e,t,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(i.ignore){let l={...t,ignore:null,onMatch:null,onResult:null};u=le(i.ignore,l,r)}let c=(l,f=!1)=>{let{isMatch:p,match:h,output:_}=le.test(l,o,t,{glob:e,posix:s}),g={glob:e,state:a,regex:o,posix:s,input:l,output:_,match:h,isMatch:p};return typeof i.onResult=="function"&&i.onResult(g),p===!1?(g.isMatch=!1,f?g:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(g),g.isMatch=!1,f?g:!1):(typeof i.onMatch=="function"&&i.onMatch(g),f?g:!0)};return r&&(c.state=a),c};le.test=(e,t,r,{glob:n,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=r||{},o=s.format||(i?ol.toPosixSlashes:null),a=e===n,u=a&&o?o(e):e;return a===!1&&(u=o?o(e):e,a=u===n),(a===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?a=le.matchBase(e,t,r,i):a=t.exec(u)),{isMatch:!!a,match:a,output:u}};le.matchBase=(e,t,r,n=ol.isWindows(r))=>(t instanceof RegExp?t:le.makeRe(t,r)).test(BP.basename(e));le.isMatch=(e,t,r)=>le(t,r)(e);le.parse=(e,t)=>Array.isArray(e)?e.map(r=>le.parse(r,t)):sl(e,{...t,fastpaths:!1});le.scan=(e,t)=>FP(e,t);le.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let i=t||{},s=i.contains?"":"^",o=i.contains?"":"$",a=`${s}(?:${e.output})${o}`;e&&e.negated===!0&&(a=`^(?!${a}).*$`);let u=le.toRegex(a,t);return n===!0&&(u.state=e),u};le.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=sl.fastpaths(e,t)),i.output||(i=sl(e,t)),le.compileRe(i,t,r,n)};le.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};le.constants=UP;Sm.exports=le});var ym=d((hj,Tm)=>{"use strict";Tm.exports=Am()});var ul=d((gj,vm)=>{"use strict";var bm=v("util"),Om=rm(),gt=ym(),al=mi(),Rm=e=>e===""||e==="./",se=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,i=new Set,s=new Set,o=0,a=l=>{s.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<t.length;l++){let f=gt(String(t[l]),{...r,onResult:a},!0),p=f.state.negated||f.state.negatedExtglob;p&&o++;for(let h of e){let _=f(h,!0);(p?!_.isMatch:_.isMatch)&&(p?n.add(_.output):(n.delete(_.output),i.add(_.output)))}}let c=(o===t.length?[...s]:[...i]).filter(l=>!n.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?t.map(l=>l.replace(/\\/g,"")):t}return c};se.match=se;se.matcher=(e,t)=>gt(e,t);se.isMatch=(e,t,r)=>gt(t,r)(e);se.any=se.isMatch;se.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,i=[],s=a=>{r.onResult&&r.onResult(a),i.push(a.output)},o=new Set(se(e,t,{...r,onResult:s}));for(let a of i)o.has(a)||n.add(a);return[...n]};se.contains=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${bm.inspect(e)}"`);if(Array.isArray(t))return t.some(n=>se.contains(e,n,r));if(typeof t=="string"){if(Rm(e)||Rm(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return se.isMatch(e,t,{...r,contains:!0})};se.matchKeys=(e,t,r)=>{if(!al.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=se(Object.keys(e),t,r),i={};for(let s of n)i[s]=e[s];return i};se.some=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=gt(String(i),r);if(n.some(o=>s(o)))return!0}return!1};se.every=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=gt(String(i),r);if(!n.every(o=>s(o)))return!1}return!0};se.all=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${bm.inspect(e)}"`);return[].concat(t).every(n=>gt(n,r)(e))};se.capture=(e,t,r)=>{let n=al.isWindows(r),s=gt.makeRe(String(e),{...r,capture:!0}).exec(n?al.toPosixSlashes(t):t);if(s)return s.slice(1).map(o=>o===void 0?"":o)};se.makeRe=(...e)=>gt.makeRe(...e);se.scan=(...e)=>gt.scan(...e);se.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let i of Om(String(n),t))r.push(gt.parse(i,t));return r};se.braces=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!/\{.*\}/.test(e)?[e]:Om(e,t)};se.braceExpand=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return se.braces(e,{...t,expand:!0})};vm.exports=se});var EE=d((Pj,fN)=>{fN.exports=[{name:"Appcircle",constant:"APPCIRCLE",env:"AC_APPCIRCLE"},{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"TF_BUILD",pr:{BUILD_REASON:"PullRequest"}},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"Codefresh",constant:"CODEFRESH",env:"CF_BUILD_ID",pr:{any:["CF_PULL_REQUEST_NUMBER","CF_PULL_REQUEST_ID"]}},{name:"Codemagic",constant:"CODEMAGIC",env:"CM_BUILD_ID",pr:"CM_PULL_REQUEST"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"Expo Application Services",constant:"EAS",env:"EAS_BUILD"},{name:"Gerrit",constant:"GERRIT",env:"GERRIT_PROJECT"},{name:"GitHub Actions",constant:"GITHUB_ACTIONS",env:"GITHUB_ACTIONS",pr:{GITHUB_EVENT_NAME:"pull_request"}},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI",pr:"CI_MERGE_REQUEST_ID"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Google Cloud Build",constant:"GOOGLE_CLOUD_BUILD",env:"BUILDER_OUTPUT"},{name:"Harness CI",constant:"HARNESS",env:"HARNESS_BUILD_ID"},{name:"Heroku",constant:"HEROKU",env:{env:"NODE",includes:"/app/.heroku/node/bin/node"}},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"LayerCI",constant:"LAYERCI",env:"LAYERCI",pr:"LAYERCI_PULL_REQUEST"},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Nevercode",constant:"NEVERCODE",env:"NEVERCODE",pr:{env:"NEVERCODE_PULL_REQUEST",ne:"false"}},{name:"ReleaseHub",constant:"RELEASEHUB",env:"RELEASE_BUILD_ID"},{name:"Render",constant:"RENDER",env:"RENDER",pr:{IS_PULL_REQUEST:"true"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Screwdriver",constant:"SCREWDRIVER",env:"SCREWDRIVER",pr:{env:"SD_PULL_REQUEST",ne:"false"}},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Sourcehut",constant:"SOURCEHUT",env:{CI_NAME:"sourcehut"}},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}},{name:"Vercel",constant:"VERCEL",env:{any:["NOW_BUILDER","VERCEL"]},pr:"VERCEL_GIT_PULL_REQUEST_ID"},{name:"Visual Studio App Center",constant:"APPCENTER",env:"APPCENTER_BUILD_ID"},{name:"Woodpecker",constant:"WOODPECKER",env:{CI:"woodpecker"},pr:{CI_BUILD_EVENT:"pull_request"}},{name:"Xcode Cloud",constant:"XCODE_CLOUD",env:"CI_XCODE_PROJECT",pr:"CI_PULL_REQUEST_NUMBER"},{name:"Xcode Server",constant:"XCODE_SERVER",env:"XCS"}]});var TE=d(Ke=>{"use strict";var AE=EE(),Ee=process.env;Object.defineProperty(Ke,"_vendors",{value:AE.map(function(e){return e.constant})});Ke.name=null;Ke.isPR=null;AE.forEach(function(e){let r=(Array.isArray(e.env)?e.env:[e.env]).every(function(n){return SE(n)});if(Ke[e.constant]=r,!!r)switch(Ke.name=e.name,typeof e.pr){case"string":Ke.isPR=!!Ee[e.pr];break;case"object":"env"in e.pr?Ke.isPR=e.pr.env in Ee&&Ee[e.pr.env]!==e.pr.ne:"any"in e.pr?Ke.isPR=e.pr.any.some(function(n){return!!Ee[n]}):Ke.isPR=SE(e.pr);break;default:Ke.isPR=null}});Ke.isCI=!!(Ee.CI!=="false"&&(Ee.BUILD_ID||Ee.BUILD_NUMBER||Ee.CI||Ee.CI_APP_ID||Ee.CI_BUILD_ID||Ee.CI_BUILD_NUMBER||Ee.CI_NAME||Ee.CONTINUOUS_INTEGRATION||Ee.RUN_ID||Ke.name));function SE(e){return typeof e=="string"?!!Ee[e]:"env"in e?Ee[e.env]&&Ee[e.env].includes(e.includes):"any"in e?e.any.some(function(t){return!!Ee[t]}):Object.keys(e).every(function(t){return Ee[t]===e[t]})}});var RE=d((Ij,yE)=>{"use strict";yE.exports=TE().isCI});var IE=d(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.splitWhen=en.flatten=void 0;function AN(e){return e.reduce((t,r)=>[].concat(t,r),[])}en.flatten=AN;function TN(e,t){let r=[[]],n=0;for(let i of e)t(i)?(n++,r[n]=[]):r[n].push(i);return r}en.splitWhen=TN});var NE=d(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.isEnoentCodeError=void 0;function yN(e){return e.code==="ENOENT"}Zs.isEnoentCodeError=yN});var LE=d(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.createDirentFromStats=void 0;var vl=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function RN(e,t){return new vl(e,t)}Js.createDirentFromStats=RN});var DE=d(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.convertPosixPathToPattern=_e.convertWindowsPathToPattern=_e.convertPathToPattern=_e.escapePosixPath=_e.escapeWindowsPath=_e.escape=_e.removeLeadingDotSegment=_e.makeAbsolute=_e.unixify=void 0;var bN=v("os"),ON=v("path"),xE=bN.platform()==="win32",vN=2,PN=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\()|\\(?![!()*+?@[\]{|}]))/g,CN=/(\\?)([()[\]{}]|^!|[!+@](?=\())/g,IN=/^\\\\([.?])/,NN=/\\(?![!()+@[\]{}])/g;function LN(e){return e.replace(/\\/g,"/")}_e.unixify=LN;function xN(e,t){return ON.resolve(e,t)}_e.makeAbsolute=xN;function wN(e){if(e.charAt(0)==="."){let t=e.charAt(1);if(t==="/"||t==="\\")return e.slice(vN)}return e}_e.removeLeadingDotSegment=wN;_e.escape=xE?Pl:Cl;function Pl(e){return e.replace(CN,"\\$2")}_e.escapeWindowsPath=Pl;function Cl(e){return e.replace(PN,"\\$2")}_e.escapePosixPath=Cl;_e.convertPathToPattern=xE?wE:ME;function wE(e){return Pl(e).replace(IN,"//$1").replace(NN,"/")}_e.convertWindowsPathToPattern=wE;function ME(e){return Cl(e)}_e.convertPosixPathToPattern=ME});var FE=d((Dj,BE)=>{BE.exports=function(t){if(typeof t!="string"||t==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1}});var GE=d((Bj,kE)=>{var MN=FE(),UE={"{":"}","(":")","[":"]"},DN=function(e){if(e[0]==="!")return!0;for(var t=0,r=-2,n=-2,i=-2,s=-2,o=-2;t<e.length;){if(e[t]==="*"||e[t+1]==="?"&&/[\].+)]/.test(e[t])||n!==-1&&e[t]==="["&&e[t+1]!=="]"&&(n<t&&(n=e.indexOf("]",t)),n>t&&(o===-1||o>n||(o=e.indexOf("\\",t),o===-1||o>n)))||i!==-1&&e[t]==="{"&&e[t+1]!=="}"&&(i=e.indexOf("}",t),i>t&&(o=e.indexOf("\\",t),o===-1||o>i))||s!==-1&&e[t]==="("&&e[t+1]==="?"&&/[:!=]/.test(e[t+2])&&e[t+3]!==")"&&(s=e.indexOf(")",t),s>t&&(o=e.indexOf("\\",t),o===-1||o>s))||r!==-1&&e[t]==="("&&e[t+1]!=="|"&&(r<t&&(r=e.indexOf("|",t)),r!==-1&&e[r+1]!==")"&&(s=e.indexOf(")",r),s>r&&(o=e.indexOf("\\",r),o===-1||o>s))))return!0;if(e[t]==="\\"){var a=e[t+1];t+=2;var u=UE[a];if(u){var c=e.indexOf(u,t);c!==-1&&(t=c+1)}if(e[t]==="!")return!0}else t++}return!1},BN=function(e){if(e[0]==="!")return!0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return!0;if(e[t]==="\\"){var r=e[t+1];t+=2;var n=UE[r];if(n){var i=e.indexOf(n,t);i!==-1&&(t=i+1)}if(e[t]==="!")return!0}else t++}return!1};kE.exports=function(t,r){if(typeof t!="string"||t==="")return!1;if(MN(t))return!0;var n=DN;return r&&r.strict===!1&&(n=BN),n(t)}});var jE=d((Fj,qE)=>{"use strict";var FN=GE(),UN=v("path").posix.dirname,kN=v("os").platform()==="win32",Il="/",GN=/\\/g,qN=/[\{\[].*[\}\]]$/,jN=/(^|[^\\])([\{\[]|\([^\)]+$)/,HN=/\\([\!\*\?\|\[\]\(\)\{\}])/g;qE.exports=function(t,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&kN&&t.indexOf(Il)<0&&(t=t.replace(GN,Il)),qN.test(t)&&(t+=Il),t+="a";do t=UN(t);while(FN(t)||jN.test(t));return t.replace(HN,"$1")}});var zE=d(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.removeDuplicateSlashes=M.matchAny=M.convertPatternsToRe=M.makeRe=M.getPatternParts=M.expandBraceExpansion=M.expandPatternsWithBraceExpansion=M.isAffectDepthOfReadingPattern=M.endsWithSlashGlobStar=M.hasGlobStar=M.getBaseDirectory=M.isPatternRelatedToParentDirectory=M.getPatternsOutsideCurrentDirectory=M.getPatternsInsideCurrentDirectory=M.getPositivePatterns=M.getNegativePatterns=M.isPositivePattern=M.isNegativePattern=M.convertToNegativePattern=M.convertToPositivePattern=M.isDynamicPattern=M.isStaticPattern=void 0;var $N=v("path"),VN=jE(),Nl=ul(),HE="**",WN="\\",YN=/[*?]|^!/,KN=/\[[^[]*]/,XN=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,zN=/[!*+?@]\([^(]*\)/,QN=/,|\.\./,ZN=/(?!^)\/{2,}/g;function $E(e,t={}){return!VE(e,t)}M.isStaticPattern=$E;function VE(e,t={}){return e===""?!1:!!(t.caseSensitiveMatch===!1||e.includes(WN)||YN.test(e)||KN.test(e)||XN.test(e)||t.extglob!==!1&&zN.test(e)||t.braceExpansion!==!1&&JN(e))}M.isDynamicPattern=VE;function JN(e){let t=e.indexOf("{");if(t===-1)return!1;let r=e.indexOf("}",t+1);if(r===-1)return!1;let n=e.slice(t,r);return QN.test(n)}function eL(e){return eo(e)?e.slice(1):e}M.convertToPositivePattern=eL;function tL(e){return"!"+e}M.convertToNegativePattern=tL;function eo(e){return e.startsWith("!")&&e[1]!=="("}M.isNegativePattern=eo;function WE(e){return!eo(e)}M.isPositivePattern=WE;function rL(e){return e.filter(eo)}M.getNegativePatterns=rL;function nL(e){return e.filter(WE)}M.getPositivePatterns=nL;function iL(e){return e.filter(t=>!Ll(t))}M.getPatternsInsideCurrentDirectory=iL;function sL(e){return e.filter(Ll)}M.getPatternsOutsideCurrentDirectory=sL;function Ll(e){return e.startsWith("..")||e.startsWith("./..")}M.isPatternRelatedToParentDirectory=Ll;function oL(e){return VN(e,{flipBackslashes:!1})}M.getBaseDirectory=oL;function aL(e){return e.includes(HE)}M.hasGlobStar=aL;function YE(e){return e.endsWith("/"+HE)}M.endsWithSlashGlobStar=YE;function uL(e){let t=$N.basename(e);return YE(e)||$E(t)}M.isAffectDepthOfReadingPattern=uL;function cL(e){return e.reduce((t,r)=>t.concat(KE(r)),[])}M.expandPatternsWithBraceExpansion=cL;function KE(e){let t=Nl.braces(e,{expand:!0,nodupes:!0,keepEscaping:!0});return t.sort((r,n)=>r.length-n.length),t.filter(r=>r!=="")}M.expandBraceExpansion=KE;function lL(e,t){let{parts:r}=Nl.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return r.length===0&&(r=[e]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}M.getPatternParts=lL;function XE(e,t){return Nl.makeRe(e,t)}M.makeRe=XE;function dL(e,t){return e.map(r=>XE(r,t))}M.convertPatternsToRe=dL;function fL(e,t){return t.some(r=>r.test(e))}M.matchAny=fL;function pL(e){return e.replace(ZN,"/")}M.removeDuplicateSlashes=pL});var eS=d((kj,JE)=>{"use strict";var _L=v("stream"),QE=_L.PassThrough,hL=Array.prototype.slice;JE.exports=gL;function gL(){let e=[],t=hL.call(arguments),r=!1,n=t[t.length-1];n&&!Array.isArray(n)&&n.pipe==null?t.pop():n={};let i=n.end!==!1,s=n.pipeError===!0;n.objectMode==null&&(n.objectMode=!0),n.highWaterMark==null&&(n.highWaterMark=64*1024);let o=QE(n);function a(){for(let l=0,f=arguments.length;l<f;l++)e.push(ZE(arguments[l],n));return u(),this}function u(){if(r)return;r=!0;let l=e.shift();if(!l){process.nextTick(c);return}Array.isArray(l)||(l=[l]);let f=l.length+1;function p(){--f>0||(r=!1,u())}function h(_){function g(){_.removeListener("merge2UnpipeEnd",g),_.removeListener("end",g),s&&_.removeListener("error",T),p()}function T(A){o.emit("error",A)}if(_._readableState.endEmitted)return p();_.on("merge2UnpipeEnd",g),_.on("end",g),s&&_.on("error",T),_.pipe(o,{end:!1}),_.resume()}for(let _=0;_<l.length;_++)h(l[_]);p()}function c(){r=!1,o.emit("queueDrain"),i&&o.end()}return o.setMaxListeners(0),o.add=a,o.on("unpipe",function(l){l.emit("merge2UnpipeEnd")}),t.length&&a.apply(null,t),o}function ZE(e,t){if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=ZE(e[r],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(QE(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}});var rS=d(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.merge=void 0;var mL=eS();function EL(e){let t=mL(e);return e.forEach(r=>{r.once("error",n=>t.emit("error",n))}),t.once("close",()=>tS(e)),t.once("end",()=>tS(e)),t}to.merge=EL;function tS(e){e.forEach(t=>t.emit("close"))}});var nS=d(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.isEmpty=tn.isString=void 0;function SL(e){return typeof e=="string"}tn.isString=SL;function AL(e){return e===""}tn.isEmpty=AL});var Lt=d(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.string=ve.stream=ve.pattern=ve.path=ve.fs=ve.errno=ve.array=void 0;var TL=IE();ve.array=TL;var yL=NE();ve.errno=yL;var RL=LE();ve.fs=RL;var bL=DE();ve.path=bL;var OL=zE();ve.pattern=OL;var vL=rS();ve.stream=vL;var PL=nS();ve.string=PL});var aS=d(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.convertPatternGroupToTask=Pe.convertPatternGroupsToTasks=Pe.groupPatternsByBaseDirectory=Pe.getNegativePatternsAsPositive=Pe.getPositivePatterns=Pe.convertPatternsToTasks=Pe.generate=void 0;var at=Lt();function CL(e,t){let r=iS(e,t),n=iS(t.ignore,t),i=sS(r),s=oS(r,n),o=i.filter(l=>at.pattern.isStaticPattern(l,t)),a=i.filter(l=>at.pattern.isDynamicPattern(l,t)),u=xl(o,s,!1),c=xl(a,s,!0);return u.concat(c)}Pe.generate=CL;function iS(e,t){let r=e;return t.braceExpansion&&(r=at.pattern.expandPatternsWithBraceExpansion(r)),t.baseNameMatch&&(r=r.map(n=>n.includes("/")?n:`**/${n}`)),r.map(n=>at.pattern.removeDuplicateSlashes(n))}function xl(e,t,r){let n=[],i=at.pattern.getPatternsOutsideCurrentDirectory(e),s=at.pattern.getPatternsInsideCurrentDirectory(e),o=wl(i),a=wl(s);return n.push(...Ml(o,t,r)),"."in a?n.push(Dl(".",s,t,r)):n.push(...Ml(a,t,r)),n}Pe.convertPatternsToTasks=xl;function sS(e){return at.pattern.getPositivePatterns(e)}Pe.getPositivePatterns=sS;function oS(e,t){return at.pattern.getNegativePatterns(e).concat(t).map(at.pattern.convertToPositivePattern)}Pe.getNegativePatternsAsPositive=oS;function wl(e){let t={};return e.reduce((r,n)=>{let i=at.pattern.getBaseDirectory(n);return i in r?r[i].push(n):r[i]=[n],r},t)}Pe.groupPatternsByBaseDirectory=wl;function Ml(e,t,r){return Object.keys(e).map(n=>Dl(n,e[n],t,r))}Pe.convertPatternGroupsToTasks=Ml;function Dl(e,t,r,n){return{dynamic:n,positive:t,negative:r,base:e,patterns:[].concat(t,r.map(at.pattern.convertToNegativePattern))}}Pe.convertPatternGroupToTask=Dl});var cS=d(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.read=void 0;function IL(e,t,r){t.fs.lstat(e,(n,i)=>{if(n!==null){uS(r,n);return}if(!i.isSymbolicLink()||!t.followSymbolicLink){Bl(r,i);return}t.fs.stat(e,(s,o)=>{if(s!==null){if(t.throwErrorOnBrokenSymbolicLink){uS(r,s);return}Bl(r,i);return}t.markSymbolicLink&&(o.isSymbolicLink=()=>!0),Bl(r,o)})})}ro.read=IL;function uS(e,t){e(t)}function Bl(e,t){e(null,t)}});var lS=d(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.read=void 0;function NL(e,t){let r=t.fs.lstatSync(e);if(!r.isSymbolicLink()||!t.followSymbolicLink)return r;try{let n=t.fs.statSync(e);return t.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(n){if(!t.throwErrorOnBrokenSymbolicLink)return r;throw n}}no.read=NL});var dS=d(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.createFileSystemAdapter=jt.FILE_SYSTEM_ADAPTER=void 0;var io=v("fs");jt.FILE_SYSTEM_ADAPTER={lstat:io.lstat,stat:io.stat,lstatSync:io.lstatSync,statSync:io.statSync};function LL(e){return e===void 0?jt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},jt.FILE_SYSTEM_ADAPTER),e)}jt.createFileSystemAdapter=LL});var fS=d(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});var xL=dS(),Fl=class{constructor(t={}){this._options=t,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=xL.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(t,r){return t??r}};Ul.default=Fl});var fr=d(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.statSync=Ht.stat=Ht.Settings=void 0;var pS=cS(),wL=lS(),kl=fS();Ht.Settings=kl.default;function ML(e,t,r){if(typeof t=="function"){pS.read(e,Gl(),t);return}pS.read(e,Gl(t),r)}Ht.stat=ML;function DL(e,t){let r=Gl(t);return wL.read(e,r)}Ht.statSync=DL;function Gl(e={}){return e instanceof kl.default?e:new kl.default(e)}});var gS=d((Xj,hS)=>{var _S;hS.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(_S||(_S=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var ES=d((zj,mS)=>{mS.exports=FL;var BL=gS();function FL(e,t){let r,n,i,s=!0;Array.isArray(e)?(r=[],n=e.length):(i=Object.keys(e),r={},n=i.length);function o(u){function c(){t&&t(u,r),t=null}s?BL(c):c()}function a(u,c,l){r[u]=l,(--n===0||c)&&o(c)}n?i?i.forEach(function(u){e[u](function(c,l){a(u,c,l)})}):e.forEach(function(u,c){u(function(l,f){a(c,l,f)})}):o(null),s=!1}});var ql=d(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var so=process.versions.node.split(".");if(so[0]===void 0||so[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var SS=Number.parseInt(so[0],10),UL=Number.parseInt(so[1],10),AS=10,kL=10,GL=SS>AS,qL=SS===AS&&UL>=kL;oo.IS_SUPPORT_READDIR_WITH_FILE_TYPES=GL||qL});var TS=d(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.createDirentFromStats=void 0;var jl=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function jL(e,t){return new jl(e,t)}ao.createDirentFromStats=jL});var Hl=d(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.fs=void 0;var HL=TS();uo.fs=HL});var $l=d(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.joinPathSegments=void 0;function $L(e,t,r){return e.endsWith(r)?e+t:e+r+t}co.joinPathSegments=$L});var PS=d($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.readdir=$t.readdirWithFileTypes=$t.read=void 0;var VL=fr(),yS=ES(),WL=ql(),RS=Hl(),bS=$l();function YL(e,t,r){if(!t.stats&&WL.IS_SUPPORT_READDIR_WITH_FILE_TYPES){OS(e,t,r);return}vS(e,t,r)}$t.read=YL;function OS(e,t,r){t.fs.readdir(e,{withFileTypes:!0},(n,i)=>{if(n!==null){lo(r,n);return}let s=i.map(a=>({dirent:a,name:a.name,path:bS.joinPathSegments(e,a.name,t.pathSegmentSeparator)}));if(!t.followSymbolicLinks){Vl(r,s);return}let o=s.map(a=>KL(a,t));yS(o,(a,u)=>{if(a!==null){lo(r,a);return}Vl(r,u)})})}$t.readdirWithFileTypes=OS;function KL(e,t){return r=>{if(!e.dirent.isSymbolicLink()){r(null,e);return}t.fs.stat(e.path,(n,i)=>{if(n!==null){if(t.throwErrorOnBrokenSymbolicLink){r(n);return}r(null,e);return}e.dirent=RS.fs.createDirentFromStats(e.name,i),r(null,e)})}}function vS(e,t,r){t.fs.readdir(e,(n,i)=>{if(n!==null){lo(r,n);return}let s=i.map(o=>{let a=bS.joinPathSegments(e,o,t.pathSegmentSeparator);return u=>{VL.stat(a,t.fsStatSettings,(c,l)=>{if(c!==null){u(c);return}let f={name:o,path:a,dirent:RS.fs.createDirentFromStats(o,l)};t.stats&&(f.stats=l),u(null,f)})}});yS(s,(o,a)=>{if(o!==null){lo(r,o);return}Vl(r,a)})})}$t.readdir=vS;function lo(e,t){e(t)}function Vl(e,t){e(null,t)}});var xS=d(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.readdir=Vt.readdirWithFileTypes=Vt.read=void 0;var XL=fr(),zL=ql(),CS=Hl(),IS=$l();function QL(e,t){return!t.stats&&zL.IS_SUPPORT_READDIR_WITH_FILE_TYPES?NS(e,t):LS(e,t)}Vt.read=QL;function NS(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map(n=>{let i={dirent:n,name:n.name,path:IS.joinPathSegments(e,n.name,t.pathSegmentSeparator)};if(i.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{let s=t.fs.statSync(i.path);i.dirent=CS.fs.createDirentFromStats(i.name,s)}catch(s){if(t.throwErrorOnBrokenSymbolicLink)throw s}return i})}Vt.readdirWithFileTypes=NS;function LS(e,t){return t.fs.readdirSync(e).map(n=>{let i=IS.joinPathSegments(e,n,t.pathSegmentSeparator),s=XL.statSync(i,t.fsStatSettings),o={name:n,path:i,dirent:CS.fs.createDirentFromStats(n,s)};return t.stats&&(o.stats=s),o})}Vt.readdir=LS});var wS=d(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.createFileSystemAdapter=Wt.FILE_SYSTEM_ADAPTER=void 0;var rn=v("fs");Wt.FILE_SYSTEM_ADAPTER={lstat:rn.lstat,stat:rn.stat,lstatSync:rn.lstatSync,statSync:rn.statSync,readdir:rn.readdir,readdirSync:rn.readdirSync};function ZL(e){return e===void 0?Wt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},Wt.FILE_SYSTEM_ADAPTER),e)}Wt.createFileSystemAdapter=ZL});var MS=d(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});var JL=v("path"),ex=fr(),tx=wS(),Wl=class{constructor(t={}){this._options=t,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=tx.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,JL.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new ex.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};Yl.default=Wl});var fo=d(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.Settings=Yt.scandirSync=Yt.scandir=void 0;var DS=PS(),rx=xS(),Kl=MS();Yt.Settings=Kl.default;function nx(e,t,r){if(typeof t=="function"){DS.read(e,Xl(),t);return}DS.read(e,Xl(t),r)}Yt.scandir=nx;function ix(e,t){let r=Xl(t);return rx.read(e,r)}Yt.scandirSync=ix;function Xl(e={}){return e instanceof Kl.default?e:new Kl.default(e)}});var FS=d((o2,BS)=>{"use strict";function sx(e){var t=new e,r=t;function n(){var s=t;return s.next?t=s.next:(t=new e,r=t),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}BS.exports=sx});var kS=d((a2,zl)=>{"use strict";var ox=FS();function US(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=ox(ax),i=null,s=null,o=0,a=null,u={push:g,drain:tt,saturated:tt,pause:l,paused:!1,get concurrency(){return r},set concurrency(b){if(!(b>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=b,!u.paused)for(;i&&o<r;)o++,A()},running:c,resume:h,idle:_,length:f,getQueue:p,unshift:T,empty:tt,kill:y,killAndDrain:R,error:D};return u;function c(){return o}function l(){u.paused=!0}function f(){for(var b=i,B=0;b;)b=b.next,B++;return B}function p(){for(var b=i,B=[];b;)B.push(b.value),b=b.next;return B}function h(){if(u.paused){if(u.paused=!1,i===null){o++,A();return}for(;i&&o<r;)o++,A()}}function _(){return o===0&&u.length()===0}function g(b,B){var I=n.get();I.context=e,I.release=A,I.value=b,I.callback=B||tt,I.errorHandler=a,o>=r||u.paused?s?(s.next=I,s=I):(i=I,s=I,u.saturated()):(o++,t.call(e,I.value,I.worked))}function T(b,B){var I=n.get();I.context=e,I.release=A,I.value=b,I.callback=B||tt,I.errorHandler=a,o>=r||u.paused?i?(I.next=i,i=I):(i=I,s=I,u.saturated()):(o++,t.call(e,I.value,I.worked))}function A(b){b&&n.release(b);var B=i;B&&o<=r?u.paused?o--:(s===i&&(s=null),i=B.next,B.next=null,t.call(e,B.value,B.worked),s===null&&u.empty()):--o===0&&u.drain()}function y(){i=null,s=null,u.drain=tt}function R(){i=null,s=null,u.drain(),u.drain=tt}function D(b){a=b}}function tt(){}function ax(){this.value=null,this.callback=tt,this.next=null,this.release=tt,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var i=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=tt,e.errorHandler&&s(r,o),i.call(e.context,r,n),e.release(e)}}function ux(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(l,f){t.call(this,l).then(function(p){f(null,p)},f)}var i=US(e,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=u,i.drained=c,i;function a(l){var f=new Promise(function(p,h){s(l,function(_,g){if(_){h(_);return}p(g)})});return f.catch(tt),f}function u(l){var f=new Promise(function(p,h){o(l,function(_,g){if(_){h(_);return}p(g)})});return f.catch(tt),f}function c(){if(i.idle())return new Promise(function(p){p()});var l=i.drain,f=new Promise(function(p){i.drain=function(){l(),p()}});return f}}zl.exports=US;zl.exports.promise=ux});var po=d(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.joinPathSegments=Et.replacePathSegmentSeparator=Et.isAppliedFilter=Et.isFatalError=void 0;function cx(e,t){return e.errorFilter===null?!0:!e.errorFilter(t)}Et.isFatalError=cx;function lx(e,t){return e===null||e(t)}Et.isAppliedFilter=lx;function dx(e,t){return e.split(/[/\\]/).join(t)}Et.replacePathSegmentSeparator=dx;function fx(e,t,r){return e===""?t:e.endsWith(r)?e+t:e+r+t}Et.joinPathSegments=fx});var Jl=d(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var px=po(),Ql=class{constructor(t,r){this._root=t,this._settings=r,this._root=px.replacePathSegmentSeparator(t,r.pathSegmentSeparator)}};Zl.default=Ql});var rd=d(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});var _x=v("events"),hx=fo(),gx=kS(),_o=po(),mx=Jl(),ed=class extends mx.default{constructor(t,r){super(t,r),this._settings=r,this._scandir=hx.scandir,this._emitter=new _x.EventEmitter,this._queue=gx(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(t){this._emitter.on("entry",t)}onError(t){this._emitter.once("error",t)}onEnd(t){this._emitter.once("end",t)}_pushToQueue(t,r){let n={directory:t,base:r};this._queue.push(n,i=>{i!==null&&this._handleError(i)})}_worker(t,r){this._scandir(t.directory,this._settings.fsScandirSettings,(n,i)=>{if(n!==null){r(n,void 0);return}for(let s of i)this._handleEntry(s,t.base);r(null,void 0)})}_handleError(t){this._isDestroyed||!_o.isFatalError(this._settings,t)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",t))}_handleEntry(t,r){if(this._isDestroyed||this._isFatalError)return;let n=t.path;r!==void 0&&(t.path=_o.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),_o.isAppliedFilter(this._settings.entryFilter,t)&&this._emitEntry(t),t.dirent.isDirectory()&&_o.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_emitEntry(t){this._emitter.emit("entry",t)}};td.default=ed});var GS=d(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});var Ex=rd(),nd=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new Ex.default(this._root,this._settings),this._storage=[]}read(t){this._reader.onError(r=>{Sx(t,r)}),this._reader.onEntry(r=>{this._storage.push(r)}),this._reader.onEnd(()=>{Ax(t,this._storage)}),this._reader.read()}};id.default=nd;function Sx(e,t){e(t)}function Ax(e,t){e(null,t)}});var qS=d(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var Tx=v("stream"),yx=rd(),sd=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new yx.default(this._root,this._settings),this._stream=new Tx.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(t=>{this._stream.emit("error",t)}),this._reader.onEntry(t=>{this._stream.push(t)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}};od.default=sd});var jS=d(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var Rx=fo(),ho=po(),bx=Jl(),ad=class extends bx.default{constructor(){super(...arguments),this._scandir=Rx.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(t,r){this._queue.add({directory:t,base:r})}_handleQueue(){for(let t of this._queue.values())this._handleDirectory(t.directory,t.base)}_handleDirectory(t,r){try{let n=this._scandir(t,this._settings.fsScandirSettings);for(let i of n)this._handleEntry(i,r)}catch(n){this._handleError(n)}}_handleError(t){if(ho.isFatalError(this._settings,t))throw t}_handleEntry(t,r){let n=t.path;r!==void 0&&(t.path=ho.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),ho.isAppliedFilter(this._settings.entryFilter,t)&&this._pushToStorage(t),t.dirent.isDirectory()&&ho.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_pushToStorage(t){this._storage.push(t)}};ud.default=ad});var HS=d(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var Ox=jS(),cd=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new Ox.default(this._root,this._settings)}read(){return this._reader.read()}};ld.default=cd});var $S=d(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});var vx=v("path"),Px=fo(),dd=class{constructor(t={}){this._options=t,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,vx.sep),this.fsScandirSettings=new Px.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};fd.default=dd});var mo=d(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.Settings=St.walkStream=St.walkSync=St.walk=void 0;var VS=GS(),Cx=qS(),Ix=HS(),pd=$S();St.Settings=pd.default;function Nx(e,t,r){if(typeof t=="function"){new VS.default(e,go()).read(t);return}new VS.default(e,go(t)).read(r)}St.walk=Nx;function Lx(e,t){let r=go(t);return new Ix.default(e,r).read()}St.walkSync=Lx;function xx(e,t){let r=go(t);return new Cx.default(e,r).read()}St.walkStream=xx;function go(e={}){return e instanceof pd.default?e:new pd.default(e)}});var Eo=d(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});var wx=v("path"),Mx=fr(),WS=Lt(),_d=class{constructor(t){this._settings=t,this._fsStatSettings=new Mx.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(t){return wx.resolve(this._settings.cwd,t)}_makeEntry(t,r){let n={name:r,path:r,dirent:WS.fs.createDirentFromStats(r,t)};return this._settings.stats&&(n.stats=t),n}_isFatalError(t){return!WS.errno.isEnoentCodeError(t)&&!this._settings.suppressErrors}};hd.default=_d});var Ed=d(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});var Dx=v("stream"),Bx=fr(),Fx=mo(),Ux=Eo(),gd=class extends Ux.default{constructor(){super(...arguments),this._walkStream=Fx.walkStream,this._stat=Bx.stat}dynamic(t,r){return this._walkStream(t,r)}static(t,r){let n=t.map(this._getFullEntryPath,this),i=new Dx.PassThrough({objectMode:!0});i._write=(s,o,a)=>this._getEntry(n[s],t[s],r).then(u=>{u!==null&&r.entryFilter(u)&&i.push(u),s===n.length-1&&i.end(),a()}).catch(a);for(let s=0;s<n.length;s++)i.write(s);return i}_getEntry(t,r,n){return this._getStat(t).then(i=>this._makeEntry(i,r)).catch(i=>{if(n.errorFilter(i))return null;throw i})}_getStat(t){return new Promise((r,n)=>{this._stat(t,this._fsStatSettings,(i,s)=>i===null?r(s):n(i))})}};md.default=gd});var YS=d(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});var kx=mo(),Gx=Eo(),qx=Ed(),Sd=class extends Gx.default{constructor(){super(...arguments),this._walkAsync=kx.walk,this._readerStream=new qx.default(this._settings)}dynamic(t,r){return new Promise((n,i)=>{this._walkAsync(t,r,(s,o)=>{s===null?n(o):i(s)})})}async static(t,r){let n=[],i=this._readerStream.static(t,r);return new Promise((s,o)=>{i.once("error",o),i.on("data",a=>n.push(a)),i.once("end",()=>s(n))})}};Ad.default=Sd});var KS=d(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var Oi=Lt(),Td=class{constructor(t,r,n){this._patterns=t,this._settings=r,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){for(let t of this._patterns){let r=this._getPatternSegments(t),n=this._splitSegmentsIntoSections(r);this._storage.push({complete:n.length<=1,pattern:t,segments:r,sections:n})}}_getPatternSegments(t){return Oi.pattern.getPatternParts(t,this._micromatchOptions).map(n=>Oi.pattern.isDynamicPattern(n,this._settings)?{dynamic:!0,pattern:n,patternRe:Oi.pattern.makeRe(n,this._micromatchOptions)}:{dynamic:!1,pattern:n})}_splitSegmentsIntoSections(t){return Oi.array.splitWhen(t,r=>r.dynamic&&Oi.pattern.hasGlobStar(r.pattern))}};yd.default=Td});var XS=d(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var jx=KS(),Rd=class extends jx.default{match(t){let r=t.split("/"),n=r.length,i=this._storage.filter(s=>!s.complete||s.segments.length>n);for(let s of i){let o=s.sections[0];if(!s.complete&&n>o.length||r.every((u,c)=>{let l=s.segments[c];return!!(l.dynamic&&l.patternRe.test(u)||!l.dynamic&&l.pattern===u)}))return!0}return!1}};bd.default=Rd});var zS=d(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});var So=Lt(),Hx=XS(),Od=class{constructor(t,r){this._settings=t,this._micromatchOptions=r}getFilter(t,r,n){let i=this._getMatcher(r),s=this._getNegativePatternsRe(n);return o=>this._filter(t,o,i,s)}_getMatcher(t){return new Hx.default(t,this._settings,this._micromatchOptions)}_getNegativePatternsRe(t){let r=t.filter(So.pattern.isAffectDepthOfReadingPattern);return So.pattern.convertPatternsToRe(r,this._micromatchOptions)}_filter(t,r,n,i){if(this._isSkippedByDeep(t,r.path)||this._isSkippedSymbolicLink(r))return!1;let s=So.path.removeLeadingDotSegment(r.path);return this._isSkippedByPositivePatterns(s,n)?!1:this._isSkippedByNegativePatterns(s,i)}_isSkippedByDeep(t,r){return this._settings.deep===1/0?!1:this._getEntryLevel(t,r)>=this._settings.deep}_getEntryLevel(t,r){let n=r.split("/").length;if(t==="")return n;let i=t.split("/").length;return n-i}_isSkippedSymbolicLink(t){return!this._settings.followSymbolicLinks&&t.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(t,r){return!this._settings.baseNameMatch&&!r.match(t)}_isSkippedByNegativePatterns(t,r){return!So.pattern.matchAny(t,r)}};vd.default=Od});var QS=d(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var pr=Lt(),Pd=class{constructor(t,r){this._settings=t,this._micromatchOptions=r,this.index=new Map}getFilter(t,r){let n=pr.pattern.convertPatternsToRe(t,this._micromatchOptions),i=pr.pattern.convertPatternsToRe(r,Object.assign(Object.assign({},this._micromatchOptions),{dot:!0}));return s=>this._filter(s,n,i)}_filter(t,r,n){let i=pr.path.removeLeadingDotSegment(t.path);if(this._settings.unique&&this._isDuplicateEntry(i)||this._onlyFileFilter(t)||this._onlyDirectoryFilter(t)||this._isSkippedByAbsoluteNegativePatterns(i,n))return!1;let s=t.dirent.isDirectory(),o=this._isMatchToPatterns(i,r,s)&&!this._isMatchToPatterns(i,n,s);return this._settings.unique&&o&&this._createIndexRecord(i),o}_isDuplicateEntry(t){return this.index.has(t)}_createIndexRecord(t){this.index.set(t,void 0)}_onlyFileFilter(t){return this._settings.onlyFiles&&!t.dirent.isFile()}_onlyDirectoryFilter(t){return this._settings.onlyDirectories&&!t.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(t,r){if(!this._settings.absolute)return!1;let n=pr.path.makeAbsolute(this._settings.cwd,t);return pr.pattern.matchAny(n,r)}_isMatchToPatterns(t,r,n){let i=pr.pattern.matchAny(t,r);return!i&&n?pr.pattern.matchAny(t+"/",r):i}};Cd.default=Pd});var ZS=d(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});var $x=Lt(),Id=class{constructor(t){this._settings=t}getFilter(){return t=>this._isNonFatalError(t)}_isNonFatalError(t){return $x.errno.isEnoentCodeError(t)||this._settings.suppressErrors}};Nd.default=Id});var eA=d(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});var JS=Lt(),Ld=class{constructor(t){this._settings=t}getTransformer(){return t=>this._transform(t)}_transform(t){let r=t.path;return this._settings.absolute&&(r=JS.path.makeAbsolute(this._settings.cwd,r),r=JS.path.unixify(r)),this._settings.markDirectories&&t.dirent.isDirectory()&&(r+="/"),this._settings.objectMode?Object.assign(Object.assign({},t),{path:r}):r}};xd.default=Ld});var Ao=d(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var Vx=v("path"),Wx=zS(),Yx=QS(),Kx=ZS(),Xx=eA(),wd=class{constructor(t){this._settings=t,this.errorFilter=new Kx.default(this._settings),this.entryFilter=new Yx.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new Wx.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new Xx.default(this._settings)}_getRootDirectory(t){return Vx.resolve(this._settings.cwd,t.base)}_getReaderOptions(t){let r=t.base==="."?"":t.base;return{basePath:r,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(r,t.positive,t.negative),entryFilter:this.entryFilter.getFilter(t.positive,t.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}};Md.default=wd});var tA=d(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});var zx=YS(),Qx=Ao(),Dd=class extends Qx.default{constructor(){super(...arguments),this._reader=new zx.default(this._settings)}async read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return(await this.api(r,t,n)).map(s=>n.transform(s))}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Bd.default=Dd});var rA=d(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});var Zx=v("stream"),Jx=Ed(),ew=Ao(),Fd=class extends ew.default{constructor(){super(...arguments),this._reader=new Jx.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t),i=this.api(r,t,n),s=new Zx.Readable({objectMode:!0,read:()=>{}});return i.once("error",o=>s.emit("error",o)).on("data",o=>s.emit("data",n.transform(o))).once("end",()=>s.emit("end")),s.once("close",()=>i.destroy()),s}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Ud.default=Fd});var nA=d(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});var tw=fr(),rw=mo(),nw=Eo(),kd=class extends nw.default{constructor(){super(...arguments),this._walkSync=rw.walkSync,this._statSync=tw.statSync}dynamic(t,r){return this._walkSync(t,r)}static(t,r){let n=[];for(let i of t){let s=this._getFullEntryPath(i),o=this._getEntry(s,i,r);o===null||!r.entryFilter(o)||n.push(o)}return n}_getEntry(t,r,n){try{let i=this._getStat(t);return this._makeEntry(i,r)}catch(i){if(n.errorFilter(i))return null;throw i}}_getStat(t){return this._statSync(t,this._fsStatSettings)}};Gd.default=kd});var iA=d(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});var iw=nA(),sw=Ao(),qd=class extends sw.default{constructor(){super(...arguments),this._reader=new iw.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return this.api(r,t,n).map(n.transform)}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};jd.default=qd});var sA=d(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var nn=v("fs"),ow=v("os"),aw=Math.max(ow.cpus().length,1);sn.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:nn.lstat,lstatSync:nn.lstatSync,stat:nn.stat,statSync:nn.statSync,readdir:nn.readdir,readdirSync:nn.readdirSync};var Hd=class{constructor(t={}){this._options=t,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,aw),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0),this.ignore=[].concat(this.ignore)}_getValue(t,r){return t===void 0?r:t}_getFileSystemMethods(t={}){return Object.assign(Object.assign({},sn.DEFAULT_FILE_SYSTEM_ADAPTER),t)}};sn.default=Hd});var Yd=d((x2,aA)=>{"use strict";var oA=aS(),uw=tA(),cw=rA(),lw=iA(),$d=sA(),rt=Lt();async function Vd(e,t){ut(e);let r=Wd(e,uw.default,t),n=await Promise.all(r);return rt.array.flatten(n)}(function(e){e.glob=e,e.globSync=t,e.globStream=r,e.async=e;function t(c,l){ut(c);let f=Wd(c,lw.default,l);return rt.array.flatten(f)}e.sync=t;function r(c,l){ut(c);let f=Wd(c,cw.default,l);return rt.stream.merge(f)}e.stream=r;function n(c,l){ut(c);let f=[].concat(c),p=new $d.default(l);return oA.generate(f,p)}e.generateTasks=n;function i(c,l){ut(c);let f=new $d.default(l);return rt.pattern.isDynamicPattern(c,f)}e.isDynamicPattern=i;function s(c){return ut(c),rt.path.escape(c)}e.escapePath=s;function o(c){return ut(c),rt.path.convertPathToPattern(c)}e.convertPathToPattern=o;let a;(function(c){function l(p){return ut(p),rt.path.escapePosixPath(p)}c.escapePath=l;function f(p){return ut(p),rt.path.convertPosixPathToPattern(p)}c.convertPathToPattern=f})(a=e.posix||(e.posix={}));let u;(function(c){function l(p){return ut(p),rt.path.escapeWindowsPath(p)}c.escapePath=l;function f(p){return ut(p),rt.path.convertWindowsPathToPattern(p)}c.convertPathToPattern=f})(u=e.win32||(e.win32={}))})(Vd||(Vd={}));function Wd(e,t,r){let n=[].concat(e),i=new $d.default(r),s=oA.generate(n,i),o=new t(i);return s.map(o.read,o)}function ut(e){if(![].concat(e).every(n=>rt.string.isString(n)&&!rt.string.isEmpty(n)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}aA.exports=Vd});var SA=d((G2,EA)=>{function dA(e){return Array.isArray(e)?e:[e]}var Zd="",fA=" ",zd="\\",dw=/^\s+$/,fw=/(?:[^\\]|^)\\$/,pw=/^\\!/,_w=/^\\#/,hw=/\r?\n/g,gw=/^\.*\/|^\.+$/,Qd="/",hA="node-ignore";typeof Symbol<"u"&&(hA=Symbol.for("node-ignore"));var pA=hA,mw=(e,t,r)=>Object.defineProperty(e,t,{value:r}),Ew=/([0-z])-([0-z])/g,gA=()=>!1,Sw=e=>e.replace(Ew,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:Zd),Aw=e=>{let{length:t}=e;return e.slice(0,t-t%2)},Tw=[[/^\uFEFF/,()=>Zd],[/\\?\s+$/,e=>e.indexOf("\\")===0?fA:Zd],[/\\\s/g,()=>fA],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>zd],[/\\\\/g,()=>zd],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===zd?`\\[${r}${Aw(n)}${i}`:i==="]"&&n.length%2===0?`[${Sw(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],_A=Object.create(null),yw=(e,t)=>{let r=_A[e];return r||(r=Tw.reduce((n,i)=>n.replace(i[0],i[1].bind(e)),e),_A[e]=r),t?new RegExp(r,"i"):new RegExp(r)},tf=e=>typeof e=="string",Rw=e=>e&&tf(e)&&!dw.test(e)&&!fw.test(e)&&e.indexOf("#")!==0,bw=e=>e.split(hw),Jd=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},Ow=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(pw,"!").replace(_w,"#");let i=yw(e,t);return new Jd(r,e,n,i)},vw=(e,t)=>{throw new t(e)},xt=(e,t,r)=>tf(e)?e?xt.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),mA=e=>gw.test(e);xt.isNotRelative=mA;xt.convert=e=>e;var ef=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){mw(this,pA,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[pA]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(Rw(t)){let r=Ow(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,dA(tf(t)?bw(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(s=>{let{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let s=t&&xt.convert(t);return xt(s,t,this._allowRelativePaths?gA:vw),this._t(s,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(Qd)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let s=this._t(i.join(Qd)+Qd,r,n,i);return r[t]=s.ignored?s:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return dA(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},yo=e=>new ef(e),Pw=e=>xt(e&&xt.convert(e),e,gA);yo.isPathValid=Pw;yo.default=yo;EA.exports=yo;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");xt.convert=e;let t=/^[a-z]:\//i;xt.isNotRelative=r=>t.test(r)||mA(r)}});var VA=d((sH,uf)=>{"use strict";var Dw=Object.prototype.hasOwnProperty,Be="~";function Ci(){}Object.create&&(Ci.prototype=Object.create(null),new Ci().__proto__||(Be=!1));function Bw(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function $A(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Bw(r,n||e,i),o=Be?Be+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function bo(e,t){--e._eventsCount===0?e._events=new Ci:delete e._events[t]}function Ce(){this._events=new Ci,this._eventsCount=0}Ce.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)Dw.call(r,n)&&t.push(Be?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Ce.prototype.listeners=function(t){var r=Be?Be+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Ce.prototype.listenerCount=function(t){var r=Be?Be+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Ce.prototype.emit=function(t,r,n,i,s,o){var a=Be?Be+t:t;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,l,f;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(f=1,l=new Array(c-1);f<c;f++)l[f-1]=arguments[f];u.fn.apply(u.context,l)}else{var p=u.length,h;for(f=0;f<p;f++)switch(u[f].once&&this.removeListener(t,u[f].fn,void 0,!0),c){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,r);break;case 3:u[f].fn.call(u[f].context,r,n);break;case 4:u[f].fn.call(u[f].context,r,n,i);break;default:if(!l)for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u[f].fn.apply(u[f].context,l)}}return!0};Ce.prototype.on=function(t,r,n){return $A(this,t,r,n,!1)};Ce.prototype.once=function(t,r,n){return $A(this,t,r,n,!0)};Ce.prototype.removeListener=function(t,r,n,i){var s=Be?Be+t:t;if(!this._events[s])return this;if(!r)return bo(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&bo(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:bo(this,s)}return this};Ce.prototype.removeAllListeners=function(t){var r;return t?(r=Be?Be+t:t,this._events[r]&&bo(this,r)):(this._events=new Ci,this._eventsCount=0),this};Ce.prototype.off=Ce.prototype.removeListener;Ce.prototype.addListener=Ce.prototype.on;Ce.prefixed=Be;Ce.EventEmitter=Ce;typeof uf<"u"&&(uf.exports=Ce)});var XA=d(gf=>{"use strict";var Oo=class{constructor(t){this.tasks=[],this.count=t}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let t=this.tasks.shift();if(t===void 0)throw"Unexpected undefined value in tasks list";t()}}acquire(){return new Promise((t,r)=>{var n=()=>{var i=!1;t(()=>{i||(i=!0,this.count++,this.sched())})};this.tasks.push(n),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))})}use(t){return this.acquire().then(r=>t().then(n=>(r(),n)).catch(n=>{throw r(),n}))}};gf.Semaphore=Oo;var hf=class extends Oo{constructor(){super(1)}};gf.Mutex=hf});var iT=d(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo._globalThis=void 0;vo._globalThis=typeof globalThis=="object"?globalThis:global});var sT=d(mr=>{"use strict";var Qw=mr&&mr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Zw=mr&&mr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Qw(t,e,r)};Object.defineProperty(mr,"__esModule",{value:!0});Zw(iT(),mr)});var oT=d(Er=>{"use strict";var Jw=Er&&Er.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),eM=Er&&Er.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Jw(t,e,r)};Object.defineProperty(Er,"__esModule",{value:!0});eM(sT(),Er)});var Tf=d(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.VERSION=void 0;Po.VERSION="1.7.0"});var cT=d(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.isCompatible=un._makeCompatibilityCheck=void 0;var tM=Tf(),aT=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function uT(e){let t=new Set([e]),r=new Set,n=e.match(aT);if(!n)return()=>!1;let i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(u){return u===e};function s(a){return r.add(a),!1}function o(a){return t.add(a),!0}return function(u){if(t.has(u))return!0;if(r.has(u))return!1;let c=u.match(aT);if(!c)return s(u);let l={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return l.prerelease!=null||i.major!==l.major?s(u):i.major===0?i.minor===l.minor&&i.patch<=l.patch?o(u):s(u):i.minor<=l.minor?o(u):s(u)}}un._makeCompatibilityCheck=uT;un.isCompatible=uT(tM.VERSION)});var Sr=d(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.unregisterGlobal=Kt.getGlobal=Kt.registerGlobal=void 0;var rM=oT(),cn=Tf(),nM=cT(),iM=cn.VERSION.split(".")[0],Mi=Symbol.for(`opentelemetry.js.api.${iM}`),Di=rM._globalThis;function sM(e,t,r,n=!1){var i;let s=Di[Mi]=(i=Di[Mi])!==null&&i!==void 0?i:{version:cn.VERSION};if(!n&&s[e]){let o=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(o.stack||o.message),!1}if(s.version!==cn.VERSION){let o=new Error(`@opentelemetry/api: Registration of version v${s.version} for ${e} does not match previously registered API v${cn.VERSION}`);return r.error(o.stack||o.message),!1}return s[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${cn.VERSION}.`),!0}Kt.registerGlobal=sM;function oM(e){var t,r;let n=(t=Di[Mi])===null||t===void 0?void 0:t.version;if(!(!n||!(0,nM.isCompatible)(n)))return(r=Di[Mi])===null||r===void 0?void 0:r[e]}Kt.getGlobal=oM;function aM(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${cn.VERSION}.`);let r=Di[Mi];r&&delete r[e]}Kt.unregisterGlobal=aM});var lT=d(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.DiagComponentLogger=void 0;var uM=Sr(),yf=class{constructor(t){this._namespace=t.namespace||"DiagComponentLogger"}debug(...t){return Bi("debug",this._namespace,t)}error(...t){return Bi("error",this._namespace,t)}info(...t){return Bi("info",this._namespace,t)}warn(...t){return Bi("warn",this._namespace,t)}verbose(...t){return Bi("verbose",this._namespace,t)}};Co.DiagComponentLogger=yf;function Bi(e,t,r){let n=(0,uM.getGlobal)("diag");if(n)return r.unshift(t),n[e](...r)}});var Io=d(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.DiagLogLevel=void 0;var cM;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(cM=Fi.DiagLogLevel||(Fi.DiagLogLevel={}))});var dT=d(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.createLogLevelDiagLogger=void 0;var Mt=Io();function lM(e,t){e<Mt.DiagLogLevel.NONE?e=Mt.DiagLogLevel.NONE:e>Mt.DiagLogLevel.ALL&&(e=Mt.DiagLogLevel.ALL),t=t||{};function r(n,i){let s=t[n];return typeof s=="function"&&e>=i?s.bind(t):function(){}}return{error:r("error",Mt.DiagLogLevel.ERROR),warn:r("warn",Mt.DiagLogLevel.WARN),info:r("info",Mt.DiagLogLevel.INFO),debug:r("debug",Mt.DiagLogLevel.DEBUG),verbose:r("verbose",Mt.DiagLogLevel.VERBOSE)}}No.createLogLevelDiagLogger=lM});var Ar=d(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.DiagAPI=void 0;var dM=lT(),fM=dT(),fT=Io(),Lo=Sr(),pM="diag",Rf=class e{constructor(){function t(i){return function(...s){let o=(0,Lo.getGlobal)("diag");if(o)return o[i](...s)}}let r=this,n=(i,s={logLevel:fT.DiagLogLevel.INFO})=>{var o,a,u;if(i===r){let f=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=f.stack)!==null&&o!==void 0?o:f.message),!1}typeof s=="number"&&(s={logLevel:s});let c=(0,Lo.getGlobal)("diag"),l=(0,fM.createLogLevelDiagLogger)((a=s.logLevel)!==null&&a!==void 0?a:fT.DiagLogLevel.INFO,i);if(c&&!s.suppressOverrideMessage){let f=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${f}`),l.warn(`Current logger will overwrite one already registered from ${f}`)}return(0,Lo.registerGlobal)("diag",l,r,!0)};r.setLogger=n,r.disable=()=>{(0,Lo.unregisterGlobal)(pM,r)},r.createComponentLogger=i=>new dM.DiagComponentLogger(i),r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}static instance(){return this._instance||(this._instance=new e),this._instance}};xo.DiagAPI=Rf});var pT=d(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.BaggageImpl=void 0;var bf=class e{constructor(t){this._entries=t?new Map(t):new Map}getEntry(t){let r=this._entries.get(t);if(r)return Object.assign({},r)}getAllEntries(){return Array.from(this._entries.entries()).map(([t,r])=>[t,r])}setEntry(t,r){let n=new e(this._entries);return n._entries.set(t,r),n}removeEntry(t){let r=new e(this._entries);return r._entries.delete(t),r}removeEntries(...t){let r=new e(this._entries);for(let n of t)r._entries.delete(n);return r}clear(){return new e}};wo.BaggageImpl=bf});var _T=d(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.baggageEntryMetadataSymbol=void 0;Mo.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var Of=d(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.baggageEntryMetadataFromString=ln.createBaggage=void 0;var _M=Ar(),hM=pT(),gM=_T(),mM=_M.DiagAPI.instance();function EM(e={}){return new hM.BaggageImpl(new Map(Object.entries(e)))}ln.createBaggage=EM;function SM(e){return typeof e!="string"&&(mM.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:gM.baggageEntryMetadataSymbol,toString(){return e}}}ln.baggageEntryMetadataFromString=SM});var Ui=d(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.ROOT_CONTEXT=dn.createContextKey=void 0;function AM(e){return Symbol.for(e)}dn.createContextKey=AM;var vf=class e{constructor(t){let r=this;r._currentContext=t?new Map(t):new Map,r.getValue=n=>r._currentContext.get(n),r.setValue=(n,i)=>{let s=new e(r._currentContext);return s._currentContext.set(n,i),s},r.deleteValue=n=>{let i=new e(r._currentContext);return i._currentContext.delete(n),i}}};dn.ROOT_CONTEXT=new vf});var hT=d(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.DiagConsoleLogger=void 0;var Pf=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Cf=class{constructor(){function t(r){return function(...n){if(console){let i=console[r];if(typeof i!="function"&&(i=console.log),typeof i=="function")return i.apply(console,n)}}}for(let r=0;r<Pf.length;r++)this[Pf[r].n]=t(Pf[r].c)}};Do.DiagConsoleLogger=Cf});var If=d(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.createNoopMeter=U.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=U.NOOP_OBSERVABLE_GAUGE_METRIC=U.NOOP_OBSERVABLE_COUNTER_METRIC=U.NOOP_UP_DOWN_COUNTER_METRIC=U.NOOP_HISTOGRAM_METRIC=U.NOOP_COUNTER_METRIC=U.NOOP_METER=U.NoopObservableUpDownCounterMetric=U.NoopObservableGaugeMetric=U.NoopObservableCounterMetric=U.NoopObservableMetric=U.NoopHistogramMetric=U.NoopUpDownCounterMetric=U.NoopCounterMetric=U.NoopMetric=U.NoopMeter=void 0;var Bo=class{constructor(){}createHistogram(t,r){return U.NOOP_HISTOGRAM_METRIC}createCounter(t,r){return U.NOOP_COUNTER_METRIC}createUpDownCounter(t,r){return U.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(t,r){return U.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(t,r){return U.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(t,r){return U.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(t,r){}removeBatchObservableCallback(t){}};U.NoopMeter=Bo;var fn=class{};U.NoopMetric=fn;var Fo=class extends fn{add(t,r){}};U.NoopCounterMetric=Fo;var Uo=class extends fn{add(t,r){}};U.NoopUpDownCounterMetric=Uo;var ko=class extends fn{record(t,r){}};U.NoopHistogramMetric=ko;var pn=class{addCallback(t){}removeCallback(t){}};U.NoopObservableMetric=pn;var Go=class extends pn{};U.NoopObservableCounterMetric=Go;var qo=class extends pn{};U.NoopObservableGaugeMetric=qo;var jo=class extends pn{};U.NoopObservableUpDownCounterMetric=jo;U.NOOP_METER=new Bo;U.NOOP_COUNTER_METRIC=new Fo;U.NOOP_HISTOGRAM_METRIC=new ko;U.NOOP_UP_DOWN_COUNTER_METRIC=new Uo;U.NOOP_OBSERVABLE_COUNTER_METRIC=new Go;U.NOOP_OBSERVABLE_GAUGE_METRIC=new qo;U.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new jo;function TM(){return U.NOOP_METER}U.createNoopMeter=TM});var gT=d(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.ValueType=void 0;var yM;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(yM=ki.ValueType||(ki.ValueType={}))});var Nf=d(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.defaultTextMapSetter=_n.defaultTextMapGetter=void 0;_n.defaultTextMapGetter={get(e,t){if(e!=null)return e[t]},keys(e){return e==null?[]:Object.keys(e)}};_n.defaultTextMapSetter={set(e,t,r){e!=null&&(e[t]=r)}}});var mT=d(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.NoopContextManager=void 0;var RM=Ui(),Lf=class{active(){return RM.ROOT_CONTEXT}with(t,r,n,...i){return r.call(n,...i)}bind(t,r){return r}enable(){return this}disable(){return this}};Ho.NoopContextManager=Lf});var Gi=d($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.ContextAPI=void 0;var bM=mT(),xf=Sr(),ET=Ar(),wf="context",OM=new bM.NoopContextManager,Mf=class e{constructor(){}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalContextManager(t){return(0,xf.registerGlobal)(wf,t,ET.DiagAPI.instance())}active(){return this._getContextManager().active()}with(t,r,n,...i){return this._getContextManager().with(t,r,n,...i)}bind(t,r){return this._getContextManager().bind(t,r)}_getContextManager(){return(0,xf.getGlobal)(wf)||OM}disable(){this._getContextManager().disable(),(0,xf.unregisterGlobal)(wf,ET.DiagAPI.instance())}};$o.ContextAPI=Mf});var Df=d(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.TraceFlags=void 0;var vM;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(vM=qi.TraceFlags||(qi.TraceFlags={}))});var Vo=d(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.INVALID_SPAN_CONTEXT=At.INVALID_TRACEID=At.INVALID_SPANID=void 0;var PM=Df();At.INVALID_SPANID="0000000000000000";At.INVALID_TRACEID="00000000000000000000000000000000";At.INVALID_SPAN_CONTEXT={traceId:At.INVALID_TRACEID,spanId:At.INVALID_SPANID,traceFlags:PM.TraceFlags.NONE}});var Yo=d(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.NonRecordingSpan=void 0;var CM=Vo(),Bf=class{constructor(t=CM.INVALID_SPAN_CONTEXT){this._spanContext=t}spanContext(){return this._spanContext}setAttribute(t,r){return this}setAttributes(t){return this}addEvent(t,r){return this}setStatus(t){return this}updateName(t){return this}end(t){}isRecording(){return!1}recordException(t,r){}};Wo.NonRecordingSpan=Bf});var kf=d(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.getSpanContext=qe.setSpanContext=qe.deleteSpan=qe.setSpan=qe.getActiveSpan=qe.getSpan=void 0;var IM=Ui(),NM=Yo(),LM=Gi(),Ff=(0,IM.createContextKey)("OpenTelemetry Context Key SPAN");function Uf(e){return e.getValue(Ff)||void 0}qe.getSpan=Uf;function xM(){return Uf(LM.ContextAPI.getInstance().active())}qe.getActiveSpan=xM;function ST(e,t){return e.setValue(Ff,t)}qe.setSpan=ST;function wM(e){return e.deleteValue(Ff)}qe.deleteSpan=wM;function MM(e,t){return ST(e,new NM.NonRecordingSpan(t))}qe.setSpanContext=MM;function DM(e){var t;return(t=Uf(e))===null||t===void 0?void 0:t.spanContext()}qe.getSpanContext=DM});var Ko=d(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.wrapSpanContext=Tt.isSpanContextValid=Tt.isValidSpanId=Tt.isValidTraceId=void 0;var AT=Vo(),BM=Yo(),FM=/^([0-9a-f]{32})$/i,UM=/^[0-9a-f]{16}$/i;function TT(e){return FM.test(e)&&e!==AT.INVALID_TRACEID}Tt.isValidTraceId=TT;function yT(e){return UM.test(e)&&e!==AT.INVALID_SPANID}Tt.isValidSpanId=yT;function kM(e){return TT(e.traceId)&&yT(e.spanId)}Tt.isSpanContextValid=kM;function GM(e){return new BM.NonRecordingSpan(e)}Tt.wrapSpanContext=GM});var Hf=d(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.NoopTracer=void 0;var qM=Gi(),RT=kf(),Gf=Yo(),jM=Ko(),qf=qM.ContextAPI.getInstance(),jf=class{startSpan(t,r,n=qf.active()){if(!!r?.root)return new Gf.NonRecordingSpan;let s=n&&(0,RT.getSpanContext)(n);return HM(s)&&(0,jM.isSpanContextValid)(s)?new Gf.NonRecordingSpan(s):new Gf.NonRecordingSpan}startActiveSpan(t,r,n,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);let u=o??qf.active(),c=this.startSpan(t,s,u),l=(0,RT.setSpan)(u,c);return qf.with(l,a,void 0,c)}};Xo.NoopTracer=jf;function HM(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}});var Vf=d(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.ProxyTracer=void 0;var $M=Hf(),VM=new $M.NoopTracer,$f=class{constructor(t,r,n,i){this._provider=t,this.name=r,this.version=n,this.options=i}startSpan(t,r,n){return this._getTracer().startSpan(t,r,n)}startActiveSpan(t,r,n,i){let s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)}_getTracer(){if(this._delegate)return this._delegate;let t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):VM}};zo.ProxyTracer=$f});var bT=d(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.NoopTracerProvider=void 0;var WM=Hf(),Wf=class{getTracer(t,r,n){return new WM.NoopTracer}};Qo.NoopTracerProvider=Wf});var Kf=d(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.ProxyTracerProvider=void 0;var YM=Vf(),KM=bT(),XM=new KM.NoopTracerProvider,Yf=class{getTracer(t,r,n){var i;return(i=this.getDelegateTracer(t,r,n))!==null&&i!==void 0?i:new YM.ProxyTracer(this,t,r,n)}getDelegate(){var t;return(t=this._delegate)!==null&&t!==void 0?t:XM}setDelegate(t){this._delegate=t}getDelegateTracer(t,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,r,n)}};Zo.ProxyTracerProvider=Yf});var OT=d(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.SamplingDecision=void 0;var zM;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(zM=ji.SamplingDecision||(ji.SamplingDecision={}))});var vT=d(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.SpanKind=void 0;var QM;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(QM=Hi.SpanKind||(Hi.SpanKind={}))});var PT=d($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.SpanStatusCode=void 0;var ZM;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(ZM=$i.SpanStatusCode||($i.SpanStatusCode={}))});var CT=d(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.validateValue=hn.validateKey=void 0;var Xf="[_0-9a-z-*/]",JM=`[a-z]${Xf}{0,255}`,e1=`[a-z0-9]${Xf}{0,240}@[a-z]${Xf}{0,13}`,t1=new RegExp(`^(?:${JM}|${e1})$`),r1=/^[ -~]{0,255}[!-~]$/,n1=/,|=/;function i1(e){return t1.test(e)}hn.validateKey=i1;function s1(e){return r1.test(e)&&!n1.test(e)}hn.validateValue=s1});var wT=d(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.TraceStateImpl=void 0;var IT=CT(),NT=32,o1=512,LT=",",xT="=",zf=class e{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+xT+this.get(r)),t),[]).join(LT)}_parse(t){t.length>o1||(this._internalState=t.split(LT).reverse().reduce((r,n)=>{let i=n.trim(),s=i.indexOf(xT);if(s!==-1){let o=i.slice(0,s),a=i.slice(s+1,n.length);(0,IT.validateKey)(o)&&(0,IT.validateValue)(a)&&r.set(o,a)}return r},new Map),this._internalState.size>NT&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,NT))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new e;return t._internalState=new Map(this._internalState),t}};Jo.TraceStateImpl=zf});var MT=d(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.createTraceState=void 0;var a1=wT();function u1(e){return new a1.TraceStateImpl(e)}ea.createTraceState=u1});var DT=d(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.context=void 0;var c1=Gi();ta.context=c1.ContextAPI.getInstance()});var BT=d(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.diag=void 0;var l1=Ar();ra.diag=l1.DiagAPI.instance()});var FT=d(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.NOOP_METER_PROVIDER=gn.NoopMeterProvider=void 0;var d1=If(),na=class{getMeter(t,r,n){return d1.NOOP_METER}};gn.NoopMeterProvider=na;gn.NOOP_METER_PROVIDER=new na});var kT=d(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.MetricsAPI=void 0;var f1=FT(),Qf=Sr(),UT=Ar(),Zf="metrics",Jf=class e{constructor(){}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalMeterProvider(t){return(0,Qf.registerGlobal)(Zf,t,UT.DiagAPI.instance())}getMeterProvider(){return(0,Qf.getGlobal)(Zf)||f1.NOOP_METER_PROVIDER}getMeter(t,r,n){return this.getMeterProvider().getMeter(t,r,n)}disable(){(0,Qf.unregisterGlobal)(Zf,UT.DiagAPI.instance())}};ia.MetricsAPI=Jf});var GT=d(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.metrics=void 0;var p1=kT();sa.metrics=p1.MetricsAPI.getInstance()});var qT=d(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.NoopTextMapPropagator=void 0;var ep=class{inject(t,r){}extract(t,r){return t}fields(){return[]}};oa.NoopTextMapPropagator=ep});var HT=d(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.deleteBaggage=yt.setBaggage=yt.getActiveBaggage=yt.getBaggage=void 0;var _1=Gi(),h1=Ui(),tp=(0,h1.createContextKey)("OpenTelemetry Baggage Key");function jT(e){return e.getValue(tp)||void 0}yt.getBaggage=jT;function g1(){return jT(_1.ContextAPI.getInstance().active())}yt.getActiveBaggage=g1;function m1(e,t){return e.setValue(tp,t)}yt.setBaggage=m1;function E1(e){return e.deleteValue(tp)}yt.deleteBaggage=E1});var WT=d(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.PropagationAPI=void 0;var rp=Sr(),S1=qT(),$T=Nf(),aa=HT(),A1=Of(),VT=Ar(),np="propagation",T1=new S1.NoopTextMapPropagator,ip=class e{constructor(){this.createBaggage=A1.createBaggage,this.getBaggage=aa.getBaggage,this.getActiveBaggage=aa.getActiveBaggage,this.setBaggage=aa.setBaggage,this.deleteBaggage=aa.deleteBaggage}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalPropagator(t){return(0,rp.registerGlobal)(np,t,VT.DiagAPI.instance())}inject(t,r,n=$T.defaultTextMapSetter){return this._getGlobalPropagator().inject(t,r,n)}extract(t,r,n=$T.defaultTextMapGetter){return this._getGlobalPropagator().extract(t,r,n)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,rp.unregisterGlobal)(np,VT.DiagAPI.instance())}_getGlobalPropagator(){return(0,rp.getGlobal)(np)||T1}};ua.PropagationAPI=ip});var YT=d(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.propagation=void 0;var y1=WT();ca.propagation=y1.PropagationAPI.getInstance()});var QT=d(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.TraceAPI=void 0;var sp=Sr(),KT=Kf(),XT=Ko(),mn=kf(),zT=Ar(),op="trace",ap=class e{constructor(){this._proxyTracerProvider=new KT.ProxyTracerProvider,this.wrapSpanContext=XT.wrapSpanContext,this.isSpanContextValid=XT.isSpanContextValid,this.deleteSpan=mn.deleteSpan,this.getSpan=mn.getSpan,this.getActiveSpan=mn.getActiveSpan,this.getSpanContext=mn.getSpanContext,this.setSpan=mn.setSpan,this.setSpanContext=mn.setSpanContext}static getInstance(){return this._instance||(this._instance=new e),this._instance}setGlobalTracerProvider(t){let r=(0,sp.registerGlobal)(op,this._proxyTracerProvider,zT.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(t),r}getTracerProvider(){return(0,sp.getGlobal)(op)||this._proxyTracerProvider}getTracer(t,r){return this.getTracerProvider().getTracer(t,r)}disable(){(0,sp.unregisterGlobal)(op,zT.DiagAPI.instance()),this._proxyTracerProvider=new KT.ProxyTracerProvider}};la.TraceAPI=ap});var ZT=d(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.trace=void 0;var R1=QT();da.trace=R1.TraceAPI.getInstance()});var x=d(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.trace=N.propagation=N.metrics=N.diag=N.context=N.INVALID_SPAN_CONTEXT=N.INVALID_TRACEID=N.INVALID_SPANID=N.isValidSpanId=N.isValidTraceId=N.isSpanContextValid=N.createTraceState=N.TraceFlags=N.SpanStatusCode=N.SpanKind=N.SamplingDecision=N.ProxyTracerProvider=N.ProxyTracer=N.defaultTextMapSetter=N.defaultTextMapGetter=N.ValueType=N.createNoopMeter=N.DiagLogLevel=N.DiagConsoleLogger=N.ROOT_CONTEXT=N.createContextKey=N.baggageEntryMetadataFromString=void 0;var b1=Of();Object.defineProperty(N,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return b1.baggageEntryMetadataFromString}});var JT=Ui();Object.defineProperty(N,"createContextKey",{enumerable:!0,get:function(){return JT.createContextKey}});Object.defineProperty(N,"ROOT_CONTEXT",{enumerable:!0,get:function(){return JT.ROOT_CONTEXT}});var O1=hT();Object.defineProperty(N,"DiagConsoleLogger",{enumerable:!0,get:function(){return O1.DiagConsoleLogger}});var v1=Io();Object.defineProperty(N,"DiagLogLevel",{enumerable:!0,get:function(){return v1.DiagLogLevel}});var P1=If();Object.defineProperty(N,"createNoopMeter",{enumerable:!0,get:function(){return P1.createNoopMeter}});var C1=gT();Object.defineProperty(N,"ValueType",{enumerable:!0,get:function(){return C1.ValueType}});var e0=Nf();Object.defineProperty(N,"defaultTextMapGetter",{enumerable:!0,get:function(){return e0.defaultTextMapGetter}});Object.defineProperty(N,"defaultTextMapSetter",{enumerable:!0,get:function(){return e0.defaultTextMapSetter}});var I1=Vf();Object.defineProperty(N,"ProxyTracer",{enumerable:!0,get:function(){return I1.ProxyTracer}});var N1=Kf();Object.defineProperty(N,"ProxyTracerProvider",{enumerable:!0,get:function(){return N1.ProxyTracerProvider}});var L1=OT();Object.defineProperty(N,"SamplingDecision",{enumerable:!0,get:function(){return L1.SamplingDecision}});var x1=vT();Object.defineProperty(N,"SpanKind",{enumerable:!0,get:function(){return x1.SpanKind}});var w1=PT();Object.defineProperty(N,"SpanStatusCode",{enumerable:!0,get:function(){return w1.SpanStatusCode}});var M1=Df();Object.defineProperty(N,"TraceFlags",{enumerable:!0,get:function(){return M1.TraceFlags}});var D1=MT();Object.defineProperty(N,"createTraceState",{enumerable:!0,get:function(){return D1.createTraceState}});var up=Ko();Object.defineProperty(N,"isSpanContextValid",{enumerable:!0,get:function(){return up.isSpanContextValid}});Object.defineProperty(N,"isValidTraceId",{enumerable:!0,get:function(){return up.isValidTraceId}});Object.defineProperty(N,"isValidSpanId",{enumerable:!0,get:function(){return up.isValidSpanId}});var cp=Vo();Object.defineProperty(N,"INVALID_SPANID",{enumerable:!0,get:function(){return cp.INVALID_SPANID}});Object.defineProperty(N,"INVALID_TRACEID",{enumerable:!0,get:function(){return cp.INVALID_TRACEID}});Object.defineProperty(N,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return cp.INVALID_SPAN_CONTEXT}});var t0=DT();Object.defineProperty(N,"context",{enumerable:!0,get:function(){return t0.context}});var r0=BT();Object.defineProperty(N,"diag",{enumerable:!0,get:function(){return r0.diag}});var n0=GT();Object.defineProperty(N,"metrics",{enumerable:!0,get:function(){return n0.metrics}});var i0=YT();Object.defineProperty(N,"propagation",{enumerable:!0,get:function(){return i0.propagation}});var s0=ZT();Object.defineProperty(N,"trace",{enumerable:!0,get:function(){return s0.trace}});N.default={context:t0.context,diag:r0.diag,metrics:n0.metrics,propagation:i0.propagation,trace:s0.trace}});var Vi=d(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.isTracingSuppressed=Xt.unsuppressTracing=Xt.suppressTracing=void 0;var B1=x(),lp=(0,B1.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function F1(e){return e.setValue(lp,!0)}Xt.suppressTracing=F1;function U1(e){return e.deleteValue(lp)}Xt.unsuppressTracing=U1;function k1(e){return e.getValue(lp)===!0}Xt.isTracingSuppressed=k1});var o0=d(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.validateValue=En.validateKey=void 0;var dp="[_0-9a-z-*/]",G1=`[a-z]${dp}{0,255}`,q1=`[a-z0-9]${dp}{0,240}@[a-z]${dp}{0,13}`,j1=new RegExp(`^(?:${G1}|${q1})$`),H1=/^[ -~]{0,255}[!-~]$/,$1=/,|=/;function V1(e){return j1.test(e)}En.validateKey=V1;function W1(e){return H1.test(e)&&!$1.test(e)}En.validateValue=W1});var pp=d(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.TraceState=void 0;var a0=o0(),u0=32,Y1=512,c0=",",l0="=",fp=class e{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+l0+this.get(r)),t),[]).join(c0)}_parse(t){t.length>Y1||(this._internalState=t.split(c0).reverse().reduce((r,n)=>{let i=n.trim(),s=i.indexOf(l0);if(s!==-1){let o=i.slice(0,s),a=i.slice(s+1,n.length);(0,a0.validateKey)(o)&&(0,a0.validateValue)(a)&&r.set(o,a)}return r},new Map),this._internalState.size>u0&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,u0))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new e;return t._internalState=new Map(this._internalState),t}};fa.TraceState=fp});var hp=d(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.W3CTraceContextPropagator=Ie.parseTraceParent=Ie.TRACE_STATE_HEADER=Ie.TRACE_PARENT_HEADER=void 0;var pa=x(),K1=Vi(),X1=pp();Ie.TRACE_PARENT_HEADER="traceparent";Ie.TRACE_STATE_HEADER="tracestate";var z1="00",Q1="(?!ff)[\\da-f]{2}",Z1="(?![0]{32})[\\da-f]{32}",J1="(?![0]{16})[\\da-f]{16}",eD="[\\da-f]{2}",tD=new RegExp(`^\\s?(${Q1})-(${Z1})-(${J1})-(${eD})(-.*)?\\s?$`);function d0(e){let t=tD.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}Ie.parseTraceParent=d0;var _p=class{inject(t,r,n){let i=pa.trace.getSpanContext(t);if(!i||(0,K1.isTracingSuppressed)(t)||!(0,pa.isSpanContextValid)(i))return;let s=`${z1}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||pa.TraceFlags.NONE).toString(16)}`;n.set(r,Ie.TRACE_PARENT_HEADER,s),i.traceState&&n.set(r,Ie.TRACE_STATE_HEADER,i.traceState.serialize())}extract(t,r,n){let i=n.get(r,Ie.TRACE_PARENT_HEADER);if(!i)return t;let s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return t;let o=d0(s);if(!o)return t;o.isRemote=!0;let a=n.get(r,Ie.TRACE_STATE_HEADER);if(a){let u=Array.isArray(a)?a.join(","):a;o.traceState=new X1.TraceState(typeof u=="string"?u:void 0)}return pa.trace.setSpanContext(t,o)}fields(){return[Ie.TRACE_PARENT_HEADER,Ie.TRACE_STATE_HEADER]}};Ie.W3CTraceContextPropagator=_p});var gp=d(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.BAGGAGE_MAX_TOTAL_LENGTH=Ne.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=Ne.BAGGAGE_MAX_NAME_VALUE_PAIRS=Ne.BAGGAGE_HEADER=Ne.BAGGAGE_ITEMS_SEPARATOR=Ne.BAGGAGE_PROPERTIES_SEPARATOR=Ne.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;Ne.BAGGAGE_KEY_PAIR_SEPARATOR="=";Ne.BAGGAGE_PROPERTIES_SEPARATOR=";";Ne.BAGGAGE_ITEMS_SEPARATOR=",";Ne.BAGGAGE_HEADER="baggage";Ne.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;Ne.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;Ne.BAGGAGE_MAX_TOTAL_LENGTH=8192});var mp=d(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.parseKeyPairsIntoRecord=Rt.parsePairKeyValue=Rt.getKeyPairs=Rt.serializeKeyPairs=void 0;var rD=x(),Tr=gp();function nD(e){return e.reduce((t,r)=>{let n=`${t}${t!==""?Tr.BAGGAGE_ITEMS_SEPARATOR:""}${r}`;return n.length>Tr.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"")}Rt.serializeKeyPairs=nD;function iD(e){return e.getAllEntries().map(([t,r])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=Tr.BAGGAGE_PROPERTIES_SEPARATOR+r.metadata.toString()),n})}Rt.getKeyPairs=iD;function f0(e){let t=e.split(Tr.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;let r=t.shift();if(!r)return;let n=r.indexOf(Tr.BAGGAGE_KEY_PAIR_SEPARATOR);if(n<=0)return;let i=decodeURIComponent(r.substring(0,n).trim()),s=decodeURIComponent(r.substring(n+1).trim()),o;return t.length>0&&(o=(0,rD.baggageEntryMetadataFromString)(t.join(Tr.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:s,metadata:o}}Rt.parsePairKeyValue=f0;function sD(e){return typeof e!="string"||e.length===0?{}:e.split(Tr.BAGGAGE_ITEMS_SEPARATOR).map(t=>f0(t)).filter(t=>t!==void 0&&t.value.length>0).reduce((t,r)=>(t[r.key]=r.value,t),{})}Rt.parseKeyPairsIntoRecord=sD});var p0=d(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.W3CBaggagePropagator=void 0;var Ep=x(),oD=Vi(),yr=gp(),Sp=mp(),Ap=class{inject(t,r,n){let i=Ep.propagation.getBaggage(t);if(!i||(0,oD.isTracingSuppressed)(t))return;let s=(0,Sp.getKeyPairs)(i).filter(a=>a.length<=yr.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,yr.BAGGAGE_MAX_NAME_VALUE_PAIRS),o=(0,Sp.serializeKeyPairs)(s);o.length>0&&n.set(r,yr.BAGGAGE_HEADER,o)}extract(t,r,n){let i=n.get(r,yr.BAGGAGE_HEADER),s=Array.isArray(i)?i.join(yr.BAGGAGE_ITEMS_SEPARATOR):i;if(!s)return t;let o={};return s.length===0||(s.split(yr.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let c=(0,Sp.parsePairKeyValue)(u);if(c){let l={value:c.value};c.metadata&&(l.metadata=c.metadata),o[c.key]=l}}),Object.entries(o).length===0)?t:Ep.propagation.setBaggage(t,Ep.propagation.createBaggage(o))}fields(){return[yr.BAGGAGE_HEADER]}};_a.W3CBaggagePropagator=Ap});var _0=d(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.AnchoredClock=void 0;var Tp=class{constructor(t,r){this._monotonicClock=r,this._epochMillis=t.now(),this._performanceMillis=r.now()}now(){let t=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+t}};ha.AnchoredClock=Tp});var S0=d(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.isAttributeValue=zt.isAttributeKey=zt.sanitizeAttributes=void 0;var h0=x();function aD(e){let t={};if(typeof e!="object"||e==null)return t;for(let[r,n]of Object.entries(e)){if(!g0(r)){h0.diag.warn(`Invalid attribute key: ${r}`);continue}if(!m0(n)){h0.diag.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?t[r]=n.slice():t[r]=n}return t}zt.sanitizeAttributes=aD;function g0(e){return typeof e=="string"&&e.length>0}zt.isAttributeKey=g0;function m0(e){return e==null?!0:Array.isArray(e)?uD(e):E0(e)}zt.isAttributeValue=m0;function uD(e){let t;for(let r of e)if(r!=null){if(!t){if(E0(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}function E0(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}});var yp=d(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.loggingErrorHandler=void 0;var cD=x();function lD(){return e=>{cD.diag.error(dD(e))}}ga.loggingErrorHandler=lD;function dD(e){return typeof e=="string"?e:JSON.stringify(fD(e))}function fD(e){let t={},r=e;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(t[n])return;let i=r[n];i&&(t[n]=String(i))}),r=Object.getPrototypeOf(r);return t}});var Rp=d(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.globalErrorHandler=Sn.setGlobalErrorHandler=void 0;var pD=yp(),A0=(0,pD.loggingErrorHandler)();function _D(e){A0=e}Sn.setGlobalErrorHandler=_D;function hD(e){try{A0(e)}catch{}}Sn.globalErrorHandler=hD});var bp=d(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.TracesSamplerValues=void 0;var gD;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(gD=Wi.TracesSamplerValues||(Wi.TracesSamplerValues={}))});var T0=d(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma._globalThis=void 0;ma._globalThis=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});var vp=d(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.getEnvWithoutDefaults=ne.parseEnvironment=ne.DEFAULT_ENVIRONMENT=ne.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=ne.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT=ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;var Qt=x(),mD=bp(),ED=T0(),SD=",",AD=["OTEL_SDK_DISABLED"];function TD(e){return AD.indexOf(e)>-1}var yD=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function RD(e){return yD.indexOf(e)>-1}var bD=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function OD(e){return bD.indexOf(e)>-1}ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0;ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;ne.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=128;ne.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=128;ne.DEFAULT_ENVIRONMENT={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Qt.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:ne.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:ne.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:ne.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:ne.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:mD.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function vD(e,t,r){if(typeof r[e]>"u")return;let n=String(r[e]);t[e]=n.toLowerCase()==="true"}function PD(e,t,r,n=-1/0,i=1/0){if(typeof r[e]<"u"){let s=Number(r[e]);isNaN(s)||(s<n?t[e]=n:s>i?t[e]=i:t[e]=s)}}function CD(e,t,r,n=SD){let i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(s=>s.trim()))}var ID={ALL:Qt.DiagLogLevel.ALL,VERBOSE:Qt.DiagLogLevel.VERBOSE,DEBUG:Qt.DiagLogLevel.DEBUG,INFO:Qt.DiagLogLevel.INFO,WARN:Qt.DiagLogLevel.WARN,ERROR:Qt.DiagLogLevel.ERROR,NONE:Qt.DiagLogLevel.NONE};function ND(e,t,r){let n=r[e];if(typeof n=="string"){let i=ID[n.toUpperCase()];i!=null&&(t[e]=i)}}function Op(e){let t={};for(let r in ne.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":ND(n,t,e);break;default:if(TD(n))vD(n,t,e);else if(RD(n))PD(n,t,e);else if(OD(n))CD(n,t,e);else{let i=e[n];typeof i<"u"&&i!==null&&(t[n]=String(i))}}}return t}ne.parseEnvironment=Op;function LD(){return typeof process<"u"&&process&&process.env?Op(process.env):Op(ED._globalThis)}ne.getEnvWithoutDefaults=LD});var R0=d(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.getEnv=void 0;var y0=vp();function xD(){let e=(0,y0.parseEnvironment)(process.env);return Object.assign({},y0.DEFAULT_ENVIRONMENT,e)}Ea.getEnv=xD});var b0=d(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa._globalThis=void 0;Sa._globalThis=typeof globalThis=="object"?globalThis:global});var Pp=d(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.hexToBinary=void 0;function O0(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function wD(e){let t=new Uint8Array(e.length/2),r=0;for(let n=0;n<e.length;n+=2){let i=O0(e.charCodeAt(n)),s=O0(e.charCodeAt(n+1));t[r++]=i<<4|s}return t}Aa.hexToBinary=wD});var v0=d(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.hexToBase64=void 0;var MD=Pp();function DD(e){return Buffer.from((0,MD.hexToBinary)(e)).toString("base64")}Ta.hexToBase64=DD});var I0=d(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.RandomIdGenerator=void 0;var BD=8,C0=16,Cp=class{constructor(){this.generateTraceId=P0(C0),this.generateSpanId=P0(BD)}};Ra.RandomIdGenerator=Cp;var ya=Buffer.allocUnsafe(C0);function P0(e){return function(){for(let r=0;r<e/4;r++)ya.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(ya[r]>0);r++)r===e-1&&(ya[e-1]=1);return ya.toString("hex",0,e)}}});var N0=d(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.otperformance=void 0;var FD=v("perf_hooks");ba.otperformance=FD.performance});var Ip=d(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.VERSION=void 0;Oa.VERSION="1.21.0"});var L0=d(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.MessageTypeValues=z.RpcGrpcStatusCodeValues=z.MessagingOperationValues=z.MessagingDestinationKindValues=z.HttpFlavorValues=z.NetHostConnectionSubtypeValues=z.NetHostConnectionTypeValues=z.NetTransportValues=z.FaasInvokedProviderValues=z.FaasDocumentOperationValues=z.FaasTriggerValues=z.DbCassandraConsistencyLevelValues=z.DbSystemValues=z.SemanticAttributes=void 0;z.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"};z.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"};z.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"};z.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"};z.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"};z.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};z.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"};z.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"};z.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"};z.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"};z.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"};z.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"};z.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16};z.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}});var x0=d(Rr=>{"use strict";var UD=Rr&&Rr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),kD=Rr&&Rr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&UD(t,e,r)};Object.defineProperty(Rr,"__esModule",{value:!0});kD(L0(),Rr)});var w0=d(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.TelemetrySdkLanguageValues=Le.OsTypeValues=Le.HostArchValues=Le.AwsEcsLaunchtypeValues=Le.CloudPlatformValues=Le.CloudProviderValues=Le.SemanticResourceAttributes=void 0;Le.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};Le.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};Le.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"};Le.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"};Le.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"};Le.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"};Le.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var M0=d(br=>{"use strict";var GD=br&&br.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),qD=br&&br.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&GD(t,e,r)};Object.defineProperty(br,"__esModule",{value:!0});qD(w0(),br)});var bt=d(Zt=>{"use strict";var jD=Zt&&Zt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),D0=Zt&&Zt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&jD(t,e,r)};Object.defineProperty(Zt,"__esModule",{value:!0});D0(x0(),Zt);D0(M0(),Zt)});var B0=d(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.SDK_INFO=void 0;var HD=Ip(),Yi=bt();va.SDK_INFO={[Yi.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[Yi.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[Yi.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Yi.TelemetrySdkLanguageValues.NODEJS,[Yi.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:HD.VERSION}});var F0=d(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.unrefTimer=void 0;function $D(e){e.unref()}Pa.unrefTimer=$D});var U0=d(Xe=>{"use strict";var VD=Xe&&Xe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Or=Xe&&Xe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&VD(t,e,r)};Object.defineProperty(Xe,"__esModule",{value:!0});Or(R0(),Xe);Or(b0(),Xe);Or(v0(),Xe);Or(I0(),Xe);Or(N0(),Xe);Or(B0(),Xe);Or(F0(),Xe)});var Np=d(vr=>{"use strict";var WD=vr&&vr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),YD=vr&&vr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&WD(t,e,r)};Object.defineProperty(vr,"__esModule",{value:!0});YD(U0(),vr)});var j0=d(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.addHrTimes=te.isTimeInput=te.isTimeInputHrTime=te.hrTimeToMicroseconds=te.hrTimeToMilliseconds=te.hrTimeToNanoseconds=te.hrTimeToTimeStamp=te.hrTimeDuration=te.timeInputToHrTime=te.hrTime=te.getTimeOrigin=te.millisToHrTime=void 0;var Lp=Np(),k0=9,KD=6,XD=Math.pow(10,KD),Ca=Math.pow(10,k0);function Ki(e){let t=e/1e3,r=Math.trunc(t),n=Math.round(e%1e3*XD);return[r,n]}te.millisToHrTime=Ki;function xp(){let e=Lp.otperformance.timeOrigin;if(typeof e!="number"){let t=Lp.otperformance;e=t.timing&&t.timing.fetchStart}return e}te.getTimeOrigin=xp;function G0(e){let t=Ki(xp()),r=Ki(typeof e=="number"?e:Lp.otperformance.now());return q0(t,r)}te.hrTime=G0;function zD(e){if(wp(e))return e;if(typeof e=="number")return e<xp()?G0(e):Ki(e);if(e instanceof Date)return Ki(e.getTime());throw TypeError("Invalid input type")}te.timeInputToHrTime=zD;function QD(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Ca),[r,n]}te.hrTimeDuration=QD;function ZD(e){let t=k0,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n)}te.hrTimeToTimeStamp=ZD;function JD(e){return e[0]*Ca+e[1]}te.hrTimeToNanoseconds=JD;function eB(e){return e[0]*1e3+e[1]/1e6}te.hrTimeToMilliseconds=eB;function tB(e){return e[0]*1e6+e[1]/1e3}te.hrTimeToMicroseconds=tB;function wp(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}te.isTimeInputHrTime=wp;function rB(e){return wp(e)||typeof e=="number"||e instanceof Date}te.isTimeInput=rB;function q0(e,t){let r=[e[0]+t[0],e[1]+t[1]];return r[1]>=Ca&&(r[1]-=Ca,r[0]+=1),r}te.addHrTimes=q0});var $0=d(H0=>{"use strict";Object.defineProperty(H0,"__esModule",{value:!0})});var V0=d(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.ExportResultCode=void 0;var nB;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(nB=Xi.ExportResultCode||(Xi.ExportResultCode={}))});var Y0=d(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.CompositePropagator=void 0;var W0=x(),Mp=class{constructor(t={}){var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(t,r,n){for(let i of this._propagators)try{i.inject(t,r,n)}catch(s){W0.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${s.message}`)}}extract(t,r,n){return this._propagators.reduce((i,s)=>{try{return s.extract(i,r,n)}catch(o){W0.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${o.message}`)}return i},t)}fields(){return this._fields.slice()}};Ia.CompositePropagator=Mp});var X0=d(K0=>{"use strict";Object.defineProperty(K0,"__esModule",{value:!0})});var z0=d(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.getRPCMetadata=ct.deleteRPCMetadata=ct.setRPCMetadata=ct.RPCType=void 0;var iB=x(),Dp=(0,iB.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA"),sB;(function(e){e.HTTP="http"})(sB=ct.RPCType||(ct.RPCType={}));function oB(e,t){return e.setValue(Dp,t)}ct.setRPCMetadata=oB;function aB(e){return e.deleteValue(Dp)}ct.deleteRPCMetadata=aB;function uB(e){return e.getValue(Dp)}ct.getRPCMetadata=uB});var Fp=d(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.AlwaysOffSampler=void 0;var cB=x(),Bp=class{shouldSample(){return{decision:cB.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};Na.AlwaysOffSampler=Bp});var kp=d(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.AlwaysOnSampler=void 0;var lB=x(),Up=class{shouldSample(){return{decision:lB.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};La.AlwaysOnSampler=Up});var Z0=d(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.ParentBasedSampler=void 0;var xa=x(),dB=Rp(),Q0=Fp(),Gp=kp(),qp=class{constructor(t){var r,n,i,s;this._root=t.root,this._root||((0,dB.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Gp.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Gp.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new Q0.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Gp.AlwaysOnSampler,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new Q0.AlwaysOffSampler}shouldSample(t,r,n,i,s,o){let a=xa.trace.getSpanContext(t);return!a||!(0,xa.isSpanContextValid)(a)?this._root.shouldSample(t,r,n,i,s,o):a.isRemote?a.traceFlags&xa.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,s,o):this._remoteParentNotSampled.shouldSample(t,r,n,i,s,o):a.traceFlags&xa.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,s,o):this._localParentNotSampled.shouldSample(t,r,n,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};wa.ParentBasedSampler=qp});var J0=d(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.TraceIdRatioBasedSampler=void 0;var jp=x(),Hp=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:(0,jp.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?jp.SamplingDecision.RECORD_AND_SAMPLED:jp.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,s=parseInt(t.slice(i,i+8),16);r=(r^s)>>>0}return r}};Ma.TraceIdRatioBasedSampler=Hp});var iy=d(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.isPlainObject=void 0;var fB="[object Object]",pB="[object Null]",_B="[object Undefined]",hB=Function.prototype,ey=hB.toString,gB=ey.call(Object),mB=EB(Object.getPrototypeOf,Object),ty=Object.prototype,ry=ty.hasOwnProperty,Pr=Symbol?Symbol.toStringTag:void 0,ny=ty.toString;function EB(e,t){return function(r){return e(t(r))}}function SB(e){if(!AB(e)||TB(e)!==fB)return!1;let t=mB(e);if(t===null)return!0;let r=ry.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ey.call(r)===gB}Da.isPlainObject=SB;function AB(e){return e!=null&&typeof e=="object"}function TB(e){return e==null?e===void 0?_B:pB:Pr&&Pr in Object(e)?yB(e):RB(e)}function yB(e){let t=ry.call(e,Pr),r=e[Pr],n=!1;try{e[Pr]=void 0,n=!0}catch{}let i=ny.call(e);return n&&(t?e[Pr]=r:delete e[Pr]),i}function RB(e){return ny.call(e)}});var cy=d(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.merge=void 0;var sy=iy(),bB=20;function OB(...e){let t=e.shift(),r=new WeakMap;for(;e.length>0;)t=ay(t,e.shift(),0,r);return t}Ua.merge=OB;function $p(e){return Fa(e)?e.slice():e}function ay(e,t,r=0,n){let i;if(!(r>bB)){if(r++,Ba(e)||Ba(t)||uy(t))i=$p(t);else if(Fa(e)){if(i=e.slice(),Fa(t))for(let s=0,o=t.length;s<o;s++)i.push($p(t[s]));else if(zi(t)){let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o];i[u]=$p(t[u])}}}else if(zi(e))if(zi(t)){if(!vB(e,t))return t;i=Object.assign({},e);let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o],c=t[u];if(Ba(c))typeof c>"u"?delete i[u]:i[u]=c;else{let l=i[u],f=c;if(oy(e,u,n)||oy(t,u,n))delete i[u];else{if(zi(l)&&zi(f)){let p=n.get(l)||[],h=n.get(f)||[];p.push({obj:e,key:u}),h.push({obj:t,key:u}),n.set(l,p),n.set(f,h)}i[u]=ay(i[u],c,r,n)}}}}else i=t;return i}}function oy(e,t,r){let n=r.get(e[t])||[];for(let i=0,s=n.length;i<s;i++){let o=n[i];if(o.key===t&&o.obj===e)return!0}return!1}function Fa(e){return Array.isArray(e)}function uy(e){return typeof e=="function"}function zi(e){return!Ba(e)&&!Fa(e)&&!uy(e)&&typeof e=="object"}function Ba(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function vB(e,t){return!(!(0,sy.isPlainObject)(e)||!(0,sy.isPlainObject)(t))}});var ly=d(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.callWithTimeout=An.TimeoutError=void 0;var ka=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};An.TimeoutError=ka;function PB(e,t){let r,n=new Promise(function(s,o){r=setTimeout(function(){o(new ka("Operation timed out."))},t)});return Promise.race([e,n]).then(i=>(clearTimeout(r),i),i=>{throw clearTimeout(r),i})}An.callWithTimeout=PB});var fy=d(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.isUrlIgnored=Tn.urlMatches=void 0;function dy(e,t){return typeof t=="string"?e===t:!!e.match(t)}Tn.urlMatches=dy;function CB(e,t){if(!t)return!1;for(let r of t)if(dy(e,r))return!0;return!1}Tn.isUrlIgnored=CB});var py=d(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.isWrapped=void 0;function IB(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}Ga.isWrapped=IB});var _y=d(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.Deferred=void 0;var Vp=class{constructor(){this._promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}};qa.Deferred=Vp});var hy=d(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.BindOnceFuture=void 0;var NB=_y(),Wp=class{constructor(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new NB.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}};ja.BindOnceFuture=Wp});var my=d(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha._export=void 0;var gy=x(),LB=Vi();function xB(e,t){return new Promise(r=>{gy.context.with((0,LB.suppressTracing)(gy.context.active()),()=>{e.export(t,n=>{r(n)})})})}Ha._export=xB});var J=d(q=>{"use strict";var wB=q&&q.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Q=q&&q.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wB(t,e,r)};Object.defineProperty(q,"__esModule",{value:!0});q.internal=q.baggageUtils=void 0;Q(p0(),q);Q(_0(),q);Q(S0(),q);Q(Rp(),q);Q(yp(),q);Q(j0(),q);Q($0(),q);Q(Pp(),q);Q(V0(),q);q.baggageUtils=mp();Q(Np(),q);Q(Y0(),q);Q(hp(),q);Q(X0(),q);Q(z0(),q);Q(Fp(),q);Q(kp(),q);Q(Z0(),q);Q(J0(),q);Q(Vi(),q);Q(pp(),q);Q(vp(),q);Q(cy(),q);Q(bp(),q);Q(ly(),q);Q(fy(),q);Q(py(),q);Q(hy(),q);Q(Ip(),q);var MB=my();q.internal={_export:MB._export}});var Ey=d($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.ExceptionEventName=void 0;$a.ExceptionEventName="exception"});var Kp=d(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.Span=void 0;var lt=x(),xe=J(),Cr=bt(),DB=Ey(),Yp=class{constructor(t,r,n,i,s,o,a=[],u,c,l){this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:lt.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=s,this.links=a;let f=Date.now();this._performanceStartTime=xe.otperformance.now(),this._performanceOffset=f-(this._performanceStartTime+(0,xe.getTimeOrigin)()),this._startTimeProvided=u!=null,this.startTime=this._getTime(u??f),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,l!=null&&this.setAttributes(l),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(lt.diag.warn(`Invalid attribute key: ${t}`),this):(0,xe.isAttributeValue)(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(r),this):(lt.diag.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(let[r,n]of Object.entries(t))this.setAttribute(r,n);return this}addEvent(t,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return lt.diag.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&lt.diag.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,xe.isTimeInput)(r)&&((0,xe.isTimeInput)(n)||(n=r),r=void 0);let i=(0,xe.sanitizeAttributes)(r);return this.events.push({name:t,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}setStatus(t){return this._isSpanEnded()?this:(this.status=t,this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t){if(this._isSpanEnded()){lt.diag.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=!0,this.endTime=this._getTime(t),this._duration=(0,xe.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&(lt.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&lt.diag.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(t){if(typeof t=="number"&&t<xe.otperformance.now())return(0,xe.hrTime)(t+this._performanceOffset);if(typeof t=="number")return(0,xe.millisToHrTime)(t);if(t instanceof Date)return(0,xe.millisToHrTime)(t.getTime());if((0,xe.isTimeInputHrTime)(t))return t;if(this._startTimeProvided)return(0,xe.millisToHrTime)(Date.now());let r=xe.otperformance.now()-this._performanceStartTime;return(0,xe.addHrTimes)(this.startTime,(0,xe.millisToHrTime)(r))}isRecording(){return this._ended===!1}recordException(t,r){let n={};typeof t=="string"?n[Cr.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[Cr.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[Cr.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[Cr.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[Cr.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[Cr.SemanticAttributes.EXCEPTION_TYPE]||n[Cr.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(DB.ExceptionEventName,n,r):lt.diag.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){return this._ended&&lt.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),this._ended}_truncateToLimitUtil(t,r){return t.length<=r?t:t.substr(0,r)}_truncateToSize(t){let r=this._attributeValueLengthLimit;return r<=0?(lt.diag.warn(`Attribute value limit must be positive, got ${r}`),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):t}};Va.Span=Yp});var Zi=d(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.SamplingDecision=void 0;var BB;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(BB=Qi.SamplingDecision||(Qi.SamplingDecision={}))});var Ya=d(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.AlwaysOffSampler=void 0;var FB=Zi(),Xp=class{shouldSample(){return{decision:FB.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};Wa.AlwaysOffSampler=Xp});var Xa=d(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.AlwaysOnSampler=void 0;var UB=Zi(),zp=class{shouldSample(){return{decision:UB.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};Ka.AlwaysOnSampler=zp});var Jp=d(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.ParentBasedSampler=void 0;var za=x(),kB=J(),Sy=Ya(),Qp=Xa(),Zp=class{constructor(t){var r,n,i,s;this._root=t.root,this._root||((0,kB.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Qp.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Qp.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new Sy.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Qp.AlwaysOnSampler,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new Sy.AlwaysOffSampler}shouldSample(t,r,n,i,s,o){let a=za.trace.getSpanContext(t);return!a||!(0,za.isSpanContextValid)(a)?this._root.shouldSample(t,r,n,i,s,o):a.isRemote?a.traceFlags&za.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,s,o):this._remoteParentNotSampled.shouldSample(t,r,n,i,s,o):a.traceFlags&za.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,s,o):this._localParentNotSampled.shouldSample(t,r,n,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};Qa.ParentBasedSampler=Zp});var t_=d(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.TraceIdRatioBasedSampler=void 0;var GB=x(),Ay=Zi(),e_=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:(0,GB.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?Ay.SamplingDecision.RECORD_AND_SAMPLED:Ay.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,s=parseInt(t.slice(i,i+8),16);r=(r^s)>>>0}return r}};Za.TraceIdRatioBasedSampler=e_});var i_=d(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.buildSamplerFromEnv=Rn.loadDefaultConfig=void 0;var Ja=x(),ye=J(),Ty=Ya(),r_=Xa(),n_=Jp(),yy=t_(),qB=(0,ye.getEnv)(),jB=ye.TracesSamplerValues.AlwaysOn,yn=1;function HB(){return{sampler:by(qB),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,ye.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,ye.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,ye.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,ye.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,ye.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,ye.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,ye.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,ye.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}Rn.loadDefaultConfig=HB;function by(e=(0,ye.getEnv)()){switch(e.OTEL_TRACES_SAMPLER){case ye.TracesSamplerValues.AlwaysOn:return new r_.AlwaysOnSampler;case ye.TracesSamplerValues.AlwaysOff:return new Ty.AlwaysOffSampler;case ye.TracesSamplerValues.ParentBasedAlwaysOn:return new n_.ParentBasedSampler({root:new r_.AlwaysOnSampler});case ye.TracesSamplerValues.ParentBasedAlwaysOff:return new n_.ParentBasedSampler({root:new Ty.AlwaysOffSampler});case ye.TracesSamplerValues.TraceIdRatio:return new yy.TraceIdRatioBasedSampler(Ry(e));case ye.TracesSamplerValues.ParentBasedTraceIdRatio:return new n_.ParentBasedSampler({root:new yy.TraceIdRatioBasedSampler(Ry(e))});default:return Ja.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${jB}".`),new r_.AlwaysOnSampler}}Rn.buildSamplerFromEnv=by;function Ry(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return Ja.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${yn}.`),yn;let t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Ja.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${yn}.`),yn):t<0||t>1?(Ja.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${yn}.`),yn):t}});var o_=d(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.reconfigureLimits=bn.mergeConfig=void 0;var Oy=i_(),s_=J();function $B(e){let t={sampler:(0,Oy.buildSamplerFromEnv)()},r=(0,Oy.loadDefaultConfig)(),n=Object.assign({},r,t,e);return n.generalLimits=Object.assign({},r.generalLimits,e.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,e.spanLimits||{}),n}bn.mergeConfig=$B;function VB(e){var t,r,n,i,s,o,a,u,c,l,f,p;let h=Object.assign({},e.spanLimits),_=(0,s_.getEnvWithoutDefaults)();return h.attributeCountLimit=(o=(s=(i=(r=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&r!==void 0?r:(n=e.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:_.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:_.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:s_.DEFAULT_ATTRIBUTE_COUNT_LIMIT,h.attributeValueLengthLimit=(p=(f=(l=(u=(a=e.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&u!==void 0?u:(c=e.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&l!==void 0?l:_.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:_.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:s_.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,Object.assign({},e,{spanLimits:h})}bn.reconfigureLimits=VB});var vy=d(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.BatchSpanProcessorBase=void 0;var On=x(),Ir=J(),a_=class{constructor(t,r){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;let n=(0,Ir.getEnv)();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Ir.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(On.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,r){}onEnd(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&On.TraceFlags.SAMPLED&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&On.diag.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(On.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise((t,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,o=i;s<o;s++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);On.context.with((0,Ir.suppressTracing)(On.context.active()),()=>{let i=this._finishedSpans.splice(0,this._maxExportBatchSize),s=()=>this._exporter.export(i,a=>{var u;clearTimeout(n),a.code===Ir.ExportResultCode.SUCCESS?t():r((u=a.error)!==null&&u!==void 0?u:new Error("BatchSpanProcessor: span export failed"))}),o=i.map(a=>a.resource).filter(a=>a.asyncAttributesPending);o.length===0?s():Promise.all(o.map(a=>{var u;return(u=a.waitForAsyncAttributes)===null||u===void 0?void 0:u.call(a)})).then(s,a=>{(0,Ir.globalErrorHandler)(a),r(a)})})})}_maybeStartTimer(){if(this._isExporting)return;let t=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(r=>{this._isExporting=!1,(0,Ir.globalErrorHandler)(r)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(()=>t(),this._scheduledDelayMillis),(0,Ir.unrefTimer)(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};eu.BatchSpanProcessorBase=a_});var Py=d(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.BatchSpanProcessor=void 0;var WB=vy(),u_=class extends WB.BatchSpanProcessorBase{onShutdown(){}};tu.BatchSpanProcessor=u_});var Ny=d(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.RandomIdGenerator=void 0;var YB=8,Iy=16,c_=class{constructor(){this.generateTraceId=Cy(Iy),this.generateSpanId=Cy(YB)}};nu.RandomIdGenerator=c_;var ru=Buffer.allocUnsafe(Iy);function Cy(e){return function(){for(let r=0;r<e/4;r++)ru.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(ru[r]>0);r++)r===e-1&&(ru[e-1]=1);return ru.toString("hex",0,e)}}});var xy=d(Jt=>{"use strict";var KB=Jt&&Jt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ly=Jt&&Jt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&KB(t,e,r)};Object.defineProperty(Jt,"__esModule",{value:!0});Ly(Py(),Jt);Ly(Ny(),Jt)});var iu=d(Nr=>{"use strict";var XB=Nr&&Nr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),zB=Nr&&Nr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&XB(t,e,r)};Object.defineProperty(Nr,"__esModule",{value:!0});zB(xy(),Nr)});var wy=d(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.Tracer=void 0;var Re=x(),su=J(),QB=Kp(),ZB=o_(),JB=iu(),l_=class{constructor(t,r,n){this._tracerProvider=n;let i=(0,ZB.mergeConfig)(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new JB.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=t}startSpan(t,r={},n=Re.context.active()){var i,s,o;r.root&&(n=Re.trace.deleteSpan(n));let a=Re.trace.getSpan(n);if((0,su.isTracingSuppressed)(n))return Re.diag.debug("Instrumentation suppressed, returning Noop Span"),Re.trace.wrapSpanContext(Re.INVALID_SPAN_CONTEXT);let u=a?.spanContext(),c=this._idGenerator.generateSpanId(),l,f,p;!u||!Re.trace.isSpanContextValid(u)?l=this._idGenerator.generateTraceId():(l=u.traceId,f=u.traceState,p=u.spanId);let h=(i=r.kind)!==null&&i!==void 0?i:Re.SpanKind.INTERNAL,_=((s=r.links)!==null&&s!==void 0?s:[]).map(b=>({context:b.context,attributes:(0,su.sanitizeAttributes)(b.attributes)})),g=(0,su.sanitizeAttributes)(r.attributes),T=this._sampler.shouldSample(n,l,t,h,g,_);f=(o=T.traceState)!==null&&o!==void 0?o:f;let A=T.decision===Re.SamplingDecision.RECORD_AND_SAMPLED?Re.TraceFlags.SAMPLED:Re.TraceFlags.NONE,y={traceId:l,spanId:c,traceFlags:A,traceState:f};if(T.decision===Re.SamplingDecision.NOT_RECORD)return Re.diag.debug("Recording is off, propagating context in a non-recording span"),Re.trace.wrapSpanContext(y);let R=(0,su.sanitizeAttributes)(Object.assign(g,T.attributes));return new QB.Span(this,n,t,y,h,p,_,r.startTime,void 0,R)}startActiveSpan(t,r,n,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);let u=o??Re.context.active(),c=this.startSpan(t,s,u),l=Re.trace.setSpan(u,c);return Re.context.with(l,a,void 0,c)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};ou.Tracer=l_});var My=d(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.defaultServiceName=void 0;function eF(){return`unknown_service:${process.argv0}`}au.defaultServiceName=eF});var d_=d(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.normalizeType=vn.normalizeArch=void 0;var tF=e=>{switch(e){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return e}};vn.normalizeArch=tF;var rF=e=>{switch(e){case"sunos":return"solaris";case"win32":return"windows";default:return e}};vn.normalizeType=rF});var cu=d(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.execAsync=void 0;var nF=v("child_process"),iF=v("util");uu.execAsync=iF.promisify(nF.exec)});var Dy=d(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.getMachineId=void 0;var sF=cu(),oF=x();async function aF(){try{let t=(await(0,sF.execAsync)('ioreg -rd1 -c "IOPlatformExpertDevice"')).stdout.split(`
`).find(n=>n.includes("IOPlatformUUID"));if(!t)return"";let r=t.split('" = "');if(r.length===2)return r[1].slice(0,-1)}catch(e){oF.diag.debug(`error reading machine id: ${e}`)}return""}lu.getMachineId=aF});var By=d(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.getMachineId=void 0;var uF=v("fs"),cF=x();async function lF(){let e=["/etc/machine-id","/var/lib/dbus/machine-id"];for(let t of e)try{return(await uF.promises.readFile(t,{encoding:"utf8"})).trim()}catch(r){cF.diag.debug(`error reading machine id: ${r}`)}return""}du.getMachineId=lF});var Uy=d(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.getMachineId=void 0;var dF=v("fs"),fF=cu(),Fy=x();async function pF(){try{return(await dF.promises.readFile("/etc/hostid",{encoding:"utf8"})).trim()}catch(e){Fy.diag.debug(`error reading machine id: ${e}`)}try{return(await(0,fF.execAsync)("kenv -q smbios.system.uuid")).stdout.trim()}catch(e){Fy.diag.debug(`error reading machine id: ${e}`)}return""}fu.getMachineId=pF});var Gy=d(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.getMachineId=void 0;var ky=v("process"),_F=cu(),hF=x();async function gF(){let e="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",t="%windir%\\System32\\REG.exe";ky.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in ky.env&&(t="%windir%\\sysnative\\cmd.exe /c "+t);try{let n=(await(0,_F.execAsync)(`${t} ${e}`)).stdout.split("REG_SZ");if(n.length===2)return n[1].trim()}catch(r){hF.diag.debug(`error reading machine id: ${r}`)}return""}pu.getMachineId=gF});var qy=d(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.getMachineId=void 0;var mF=x();async function EF(){return mF.diag.debug("could not read machine-id: unsupported platform"),""}_u.getMachineId=EF});var jy=d(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getMachineId=void 0;var SF=v("process"),Pn;Dt.getMachineId=Pn;switch(SF.platform){case"darwin":Dt.getMachineId=Pn=Dy().getMachineId;break;case"linux":Dt.getMachineId=Pn=By().getMachineId;break;case"freebsd":Dt.getMachineId=Pn=Uy().getMachineId;break;case"win32":Dt.getMachineId=Pn=Gy().getMachineId;break;default:Dt.getMachineId=Pn=qy().getMachineId}});var __=d(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.hostDetectorSync=void 0;var f_=bt(),AF=Lr(),Hy=v("os"),TF=d_(),yF=jy(),p_=class{detect(t){let r={[f_.SemanticResourceAttributes.HOST_NAME]:(0,Hy.hostname)(),[f_.SemanticResourceAttributes.HOST_ARCH]:(0,TF.normalizeArch)((0,Hy.arch)())};return new AF.Resource(r,this._getAsyncAttributes())}_getAsyncAttributes(){return(0,yF.getMachineId)().then(t=>{let r={};return t&&(r[f_.SemanticResourceAttributes.HOST_ID]=t),r})}};hu.hostDetectorSync=new p_});var $y=d(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.hostDetector=void 0;var RF=__(),h_=class{detect(t){return Promise.resolve(RF.hostDetectorSync.detect(t))}};gu.hostDetector=new h_});var m_=d(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.osDetectorSync=void 0;var Vy=bt(),bF=Lr(),Wy=v("os"),OF=d_(),g_=class{detect(t){let r={[Vy.SemanticResourceAttributes.OS_TYPE]:(0,OF.normalizeType)((0,Wy.platform)()),[Vy.SemanticResourceAttributes.OS_VERSION]:(0,Wy.release)()};return new bF.Resource(r)}};mu.osDetectorSync=new g_});var Yy=d(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.osDetector=void 0;var vF=m_(),E_=class{detect(t){return Promise.resolve(vF.osDetectorSync.detect(t))}};Eu.osDetector=new E_});var A_=d(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.processDetectorSync=void 0;var PF=x(),Bt=bt(),CF=Lr(),IF=v("os"),S_=class{detect(t){let r={[Bt.SemanticResourceAttributes.PROCESS_PID]:process.pid,[Bt.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title,[Bt.SemanticResourceAttributes.PROCESS_EXECUTABLE_PATH]:process.execPath,[Bt.SemanticResourceAttributes.PROCESS_COMMAND_ARGS]:[process.argv[0],...process.execArgv,...process.argv.slice(1)],[Bt.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:process.versions.node,[Bt.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"nodejs",[Bt.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Node.js"};process.argv.length>1&&(r[Bt.SemanticResourceAttributes.PROCESS_COMMAND]=process.argv[1]);try{let n=IF.userInfo();r[Bt.SemanticResourceAttributes.PROCESS_OWNER]=n.username}catch(n){PF.diag.debug(`error obtaining process owner: ${n}`)}return new CF.Resource(r)}};Su.processDetectorSync=new S_});var Ky=d(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.processDetector=void 0;var NF=A_(),T_=class{detect(t){return Promise.resolve(NF.processDetectorSync.detect(t))}};Au.processDetector=new T_});var Xy=d(ze=>{"use strict";var LF=ze&&ze.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xr=ze&&ze.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&LF(t,e,r)};Object.defineProperty(ze,"__esModule",{value:!0});xr(My(),ze);xr($y(),ze);xr(Yy(),ze);xr(__(),ze);xr(m_(),ze);xr(Ky(),ze);xr(A_(),ze)});var y_=d(wr=>{"use strict";var xF=wr&&wr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),wF=wr&&wr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&xF(t,e,r)};Object.defineProperty(wr,"__esModule",{value:!0});wF(Xy(),wr)});var Lr=d(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.Resource=void 0;var zy=x(),Mr=bt(),R_=J(),MF=y_(),Ji=class e{constructor(t,r){var n;this._attributes=t,this.asyncAttributesPending=r!=null,this._syncAttributes=(n=this._attributes)!==null&&n!==void 0?n:{},this._asyncAttributesPromise=r?.then(i=>(this._attributes=Object.assign({},this._attributes,i),this.asyncAttributesPending=!1,i),i=>(zy.diag.debug("a resource's async attributes promise rejected: %s",i),this.asyncAttributesPending=!1,{}))}static empty(){return e.EMPTY}static default(){return new e({[Mr.SemanticResourceAttributes.SERVICE_NAME]:(0,MF.defaultServiceName)(),[Mr.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:R_.SDK_INFO[Mr.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],[Mr.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:R_.SDK_INFO[Mr.SemanticResourceAttributes.TELEMETRY_SDK_NAME],[Mr.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:R_.SDK_INFO[Mr.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]})}get attributes(){var t;return this.asyncAttributesPending&&zy.diag.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}}async waitForAsyncAttributes(){this.asyncAttributesPending&&await this._asyncAttributesPromise}merge(t){var r;if(!t)return this;let n=Object.assign(Object.assign({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);let i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(([s,o])=>{var a;return Object.assign(Object.assign(Object.assign(Object.assign({},this._syncAttributes),s),(a=t._syncAttributes)!==null&&a!==void 0?a:t.attributes),o)});return new e(n,i)}};Tu.Resource=Ji;Ji.EMPTY=new Ji({})});var Zy=d(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0})});var eR=d(Jy=>{"use strict";Object.defineProperty(Jy,"__esModule",{value:!0})});var rR=d(tR=>{"use strict";Object.defineProperty(tR,"__esModule",{value:!0})});var nR=d(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.browserDetector=void 0;var DF=Cn(),b_=class{detect(t){return Promise.resolve(DF.browserDetectorSync.detect(t))}};yu.browserDetector=new b_});var v_=d(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.envDetectorSync=void 0;var BF=x(),FF=J(),UF=bt(),kF=Lr(),O_=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}detect(t){let r={},n=(0,FF.getEnv)(),i=n.OTEL_RESOURCE_ATTRIBUTES,s=n.OTEL_SERVICE_NAME;if(i)try{let o=this._parseResourceAttributes(i);Object.assign(r,o)}catch(o){BF.diag.debug(`EnvDetector failed: ${o.message}`)}return s&&(r[UF.SemanticResourceAttributes.SERVICE_NAME]=s),new kF.Resource(r)}_parseResourceAttributes(t){if(!t)return{};let r={},n=t.split(this._COMMA_SEPARATOR,-1);for(let i of n){let s=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(s.length!==2)continue;let[o,a]=s;if(o=o.trim(),a=a.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(o))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(a))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[o]=decodeURIComponent(a)}return r}_isValid(t){return t.length<=this._MAX_LENGTH&&this._isBaggageOctetString(t)}_isBaggageOctetString(t){for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0}_isValidAndNotEmpty(t){return t.length>0&&this._isValid(t)}};Ru.envDetectorSync=new O_});var iR=d(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.envDetector=void 0;var GF=v_(),P_=class{detect(t){return Promise.resolve(GF.envDetectorSync.detect(t))}};bu.envDetector=new P_});var sR=d(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.browserDetectorSync=void 0;var Ou=bt(),C_=Cn(),qF=x(),I_=class{detect(t){if(!(typeof navigator<"u"))return C_.Resource.empty();let n={[Ou.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[Ou.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Web Browser",[Ou.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:navigator.userAgent};return this._getResourceAttributes(n,t)}_getResourceAttributes(t,r){return t[Ou.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]===""?(qF.diag.debug("BrowserDetector failed: Unable to find required browser resources. "),C_.Resource.empty()):new C_.Resource(Object.assign({},t))}};vu.browserDetectorSync=new I_});var oR=d(Ot=>{"use strict";var jF=Ot&&Ot.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Pu=Ot&&Ot.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&jF(t,e,r)};Object.defineProperty(Ot,"__esModule",{value:!0});Pu(nR(),Ot);Pu(iR(),Ot);Pu(sR(),Ot);Pu(v_(),Ot)});var aR=d(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.isPromiseLike=void 0;var HF=e=>e!==null&&typeof e=="object"&&typeof e.then=="function";Cu.isPromiseLike=HF});var cR=d(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.detectResourcesSync=Nn.detectResources=void 0;var es=Lr(),In=x(),$F=aR(),VF=async(e={})=>{let t=await Promise.all((e.detectors||[]).map(async r=>{try{let n=await r.detect(e);return In.diag.debug(`${r.constructor.name} found resource.`,n),n}catch(n){return In.diag.debug(`${r.constructor.name} failed: ${n.message}`),es.Resource.empty()}}));return uR(t),t.reduce((r,n)=>r.merge(n),es.Resource.empty())};Nn.detectResources=VF;var WF=(e={})=>{var t;let r=((t=e.detectors)!==null&&t!==void 0?t:[]).map(i=>{try{let s=i.detect(e),o;if((0,$F.isPromiseLike)(s)){let a=async()=>(await s).attributes;o=new es.Resource({},a())}else o=s;return o.waitForAsyncAttributes?o.waitForAsyncAttributes().then(()=>In.diag.debug(`${i.constructor.name} found resource.`,o)):In.diag.debug(`${i.constructor.name} found resource.`,o),o}catch(s){return In.diag.error(`${i.constructor.name} failed: ${s.message}`),es.Resource.empty()}}),n=r.reduce((i,s)=>i.merge(s),es.Resource.empty());return n.waitForAsyncAttributes&&n.waitForAsyncAttributes().then(()=>{uR(r)}),n};Nn.detectResourcesSync=WF;var uR=e=>{e.forEach(t=>{if(Object.keys(t.attributes).length>0){let r=JSON.stringify(t.attributes,null,4);In.diag.verbose(r)}})}});var Cn=d(Qe=>{"use strict";var YF=Qe&&Qe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Dr=Qe&&Qe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&YF(t,e,r)};Object.defineProperty(Qe,"__esModule",{value:!0});Dr(Lr(),Qe);Dr(Zy(),Qe);Dr(y_(),Qe);Dr(eR(),Qe);Dr(rR(),Qe);Dr(oR(),Qe);Dr(cR(),Qe)});var lR=d(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.MultiSpanProcessor=void 0;var KF=J(),N_=class{constructor(t){this._spanProcessors=t}forceFlush(){let t=[];for(let r of this._spanProcessors)t.push(r.forceFlush());return new Promise(r=>{Promise.all(t).then(()=>{r()}).catch(n=>{(0,KF.globalErrorHandler)(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(t,r){for(let n of this._spanProcessors)n.onStart(t,r)}onEnd(t){for(let r of this._spanProcessors)r.onEnd(t)}shutdown(){let t=[];for(let r of this._spanProcessors)t.push(r.shutdown());return new Promise((r,n)=>{Promise.all(t).then(()=>{r()},n)})}};Iu.MultiSpanProcessor=N_});var x_=d(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.NoopSpanProcessor=void 0;var L_=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};Nu.NoopSpanProcessor=L_});var fR=d(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.BasicTracerProvider=Br.ForceFlushState=void 0;var Ln=x(),wn=J(),dR=Cn(),XF=Lu(),zF=i_(),QF=lR(),ZF=x_(),JF=iu(),eU=o_(),xn;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(xn=Br.ForceFlushState||(Br.ForceFlushState={}));var ts=class{constructor(t={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map;let n=(0,wn.merge)({},(0,zF.loadDefaultConfig)(),(0,eU.reconfigureLimits)(t));this.resource=(r=n.resource)!==null&&r!==void 0?r:dR.Resource.empty(),this.resource=dR.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let i=this._buildExporterFromEnv();if(i!==void 0){let s=new JF.BatchSpanProcessor(i);this.activeSpanProcessor=s}else this.activeSpanProcessor=new ZF.NoopSpanProcessor}getTracer(t,r,n){let i=`${t}@${r||""}:${n?.schemaUrl||""}`;return this._tracers.has(i)||this._tracers.set(i,new XF.Tracer({name:t,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)}addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>Ln.diag.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new QF.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(t={}){Ln.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Ln.context.setGlobalContextManager(t.contextManager),t.propagator&&Ln.propagation.setGlobalPropagator(t.propagator)}forceFlush(){let t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(i=>{let s,o=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),s=xn.timeout},t);n.forceFlush().then(()=>{clearTimeout(o),s!==xn.timeout&&(s=xn.resolved,i(s))}).catch(a=>{clearTimeout(o),s=xn.error,i(a)})}));return new Promise((n,i)=>{Promise.all(r).then(s=>{let o=s.filter(a=>a!==xn.resolved);o.length>0?i(o):n()}).catch(s=>i([s]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(t){var r;return(r=this.constructor._registeredPropagators.get(t))===null||r===void 0?void 0:r()}_getSpanExporter(t){var r;return(r=this.constructor._registeredExporters.get(t))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let t=Array.from(new Set((0,wn.getEnv)().OTEL_PROPAGATORS)),n=t.map(i=>{let s=this._getPropagator(i);return s||Ln.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),s}).reduce((i,s)=>(s&&i.push(s),i),[]);if(n.length!==0)return t.length===1?n[0]:new wn.CompositePropagator({propagators:n})}_buildExporterFromEnv(){let t=(0,wn.getEnv)().OTEL_TRACES_EXPORTER;if(t==="none"||t==="")return;let r=this._getSpanExporter(t);return r||Ln.diag.error(`Exporter "${t}" requested through environment variable is unavailable.`),r}};Br.BasicTracerProvider=ts;ts._registeredPropagators=new Map([["tracecontext",()=>new wn.W3CTraceContextPropagator],["baggage",()=>new wn.W3CBaggagePropagator]]);ts._registeredExporters=new Map});var pR=d(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.ConsoleSpanExporter=void 0;var w_=J(),M_=class{export(t,r){return this._sendSpans(t,r)}shutdown(){return this._sendSpans([]),this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(t){var r;return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,traceState:(r=t.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:(0,w_.hrTimeToMicroseconds)(t.startTime),duration:(0,w_.hrTimeToMicroseconds)(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}}_sendSpans(t,r){for(let n of t)console.dir(this._exportInfo(n),{depth:3});if(r)return r({code:w_.ExportResultCode.SUCCESS})}};xu.ConsoleSpanExporter=M_});var hR=d(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.InMemorySpanExporter=void 0;var _R=J(),D_=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(t,r){if(this._stopped)return r({code:_R.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...t),setTimeout(()=>r({code:_R.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};wu.InMemorySpanExporter=D_});var mR=d(gR=>{"use strict";Object.defineProperty(gR,"__esModule",{value:!0})});var ER=d(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.SimpleSpanProcessor=void 0;var tU=x(),Mn=J(),B_=class{constructor(t){this._exporter=t,this._shutdownOnce=new Mn.BindOnceFuture(this._shutdown,this),this._unresolvedExports=new Set}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(t,r){}onEnd(t){var r,n;if(this._shutdownOnce.isCalled||!(t.spanContext().traceFlags&tU.TraceFlags.SAMPLED))return;let i=()=>Mn.internal._export(this._exporter,[t]).then(s=>{var o;s.code!==Mn.ExportResultCode.SUCCESS&&(0,Mn.globalErrorHandler)((o=s.error)!==null&&o!==void 0?o:new Error(`SimpleSpanProcessor: span export failed (status ${s})`))}).catch(s=>{(0,Mn.globalErrorHandler)(s)});if(t.resource.asyncAttributesPending){let s=(n=(r=t.resource).waitForAsyncAttributes)===null||n===void 0?void 0:n.call(r).then(()=>(s!=null&&this._unresolvedExports.delete(s),i()),o=>(0,Mn.globalErrorHandler)(o));s!=null&&this._unresolvedExports.add(s)}else i()}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}};Mu.SimpleSpanProcessor=B_});var AR=d(SR=>{"use strict";Object.defineProperty(SR,"__esModule",{value:!0})});var yR=d(TR=>{"use strict";Object.defineProperty(TR,"__esModule",{value:!0})});var bR=d(RR=>{"use strict";Object.defineProperty(RR,"__esModule",{value:!0})});var vR=d(OR=>{"use strict";Object.defineProperty(OR,"__esModule",{value:!0})});var CR=d(PR=>{"use strict";Object.defineProperty(PR,"__esModule",{value:!0})});var Lu=d(ie=>{"use strict";var rU=ie&&ie.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Se=ie&&ie.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&rU(t,e,r)};Object.defineProperty(ie,"__esModule",{value:!0});Se(wy(),ie);Se(fR(),ie);Se(iu(),ie);Se(pR(),ie);Se(hR(),ie);Se(mR(),ie);Se(ER(),ie);Se(AR(),ie);Se(x_(),ie);Se(Ya(),ie);Se(Xa(),ie);Se(Jp(),ie);Se(t_(),ie);Se(Zi(),ie);Se(Kp(),ie);Se(yR(),ie);Se(bR(),ie);Se(vR(),ie);Se(CR(),ie)});var Fr=d(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.parseRetryAfterToMills=ae.isExportRetryable=ae.invalidTimeout=ae.configureExporterTimeout=ae.appendRootPathToUrlIfNeeded=ae.appendResourcePathToUrl=ae.parseHeaders=ae.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=ae.DEFAULT_EXPORT_MAX_BACKOFF=ae.DEFAULT_EXPORT_INITIAL_BACKOFF=ae.DEFAULT_EXPORT_MAX_ATTEMPTS=void 0;var F_=x(),IR=J(),NR=1e4;ae.DEFAULT_EXPORT_MAX_ATTEMPTS=5;ae.DEFAULT_EXPORT_INITIAL_BACKOFF=1e3;ae.DEFAULT_EXPORT_MAX_BACKOFF=5e3;ae.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=1.5;function nU(e={}){let t={};return Object.entries(e).forEach(([r,n])=>{typeof n<"u"?t[r]=String(n):F_.diag.warn(`Header "${r}" has wrong value and will be ignored`)}),t}ae.parseHeaders=nU;function iU(e,t){return e.endsWith("/")||(e=e+"/"),e+t}ae.appendResourcePathToUrl=iU;function sU(e){try{let t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch{return F_.diag.warn(`Could not parse export URL: '${e}'`),e}}ae.appendRootPathToUrlIfNeeded=sU;function oU(e){return typeof e=="number"?e<=0?U_(e,NR):e:aU()}ae.configureExporterTimeout=oU;function aU(){var e;let t=Number((e=(0,IR.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:(0,IR.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?U_(t,NR):t}function U_(e,t){return F_.diag.warn("Timeout must be greater than 0",e),t}ae.invalidTimeout=U_;function uU(e){return[429,502,503,504].includes(e)}ae.isExportRetryable=uU;function cU(e){if(e==null)return-1;let t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?t*1e3:-1;let r=new Date(e).getTime()-Date.now();return r>=0?r:0}ae.parseRetryAfterToMills=cU});var Bu=d(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.OTLPExporterBase=void 0;var LR=x(),rs=J(),lU=Fr(),k_=class{constructor(t={}){this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new rs.BindOnceFuture(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:30,this.timeoutMillis=(0,lU.configureExporterTimeout)(t.timeoutMillis),this.onInit(t)}export(t,r){if(this._shutdownOnce.isCalled){r({code:rs.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:rs.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(()=>{r({code:rs.ExportResultCode.SUCCESS})}).catch(n=>{r({code:rs.ExportResultCode.FAILED,error:n})})}_export(t){return new Promise((r,n)=>{try{LR.diag.debug("items to be sent",t),this.send(t,r,n)}catch(i){n(i)}})}shutdown(){return this._shutdownOnce.call()}forceFlush(){return Promise.all(this._sendingPromises).then(()=>{})}_shutdown(){return LR.diag.debug("shutdown started"),this.onShutdown(),this.forceFlush()}};Du.OTLPExporterBase=k_});var G_=d(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.CompressionAlgorithm=void 0;var dU;(function(e){e.NONE="none",e.GZIP="gzip"})(dU=ns.CompressionAlgorithm||(ns.CompressionAlgorithm={}))});var Uu=d(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.OTLPExporterError=void 0;var q_=class extends Error{constructor(t,r,n){super(t),this.name="OTLPExporterError",this.data=n,this.code=r}};Fu.OTLPExporterError=q_});var H_=d(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.configureCompression=er.createHttpAgent=er.sendWithHttp=void 0;var wR=v("url"),MR=v("http"),DR=v("https"),fU=v("zlib"),pU=v("stream"),j_=x(),ku=G_(),xR=J(),is=Uu(),Dn=Fr();function _U(e,t,r,n,i){let s=e.timeoutMillis,o=new wR.URL(e.url),a=Number(process.versions.node.split(".")[0]),u,c,l=!1,f=setTimeout(()=>{if(clearTimeout(u),l=!0,c.destroyed){let g=new is.OTLPExporterError("Request Timeout");i(g)}else a>=14?c.destroy():c.abort()},s),p={hostname:o.hostname,port:o.port,path:o.pathname,method:"POST",headers:Object.assign({"Content-Type":r},e.headers),agent:e.agent},h=o.protocol==="http:"?MR.request:DR.request,_=(g=Dn.DEFAULT_EXPORT_MAX_ATTEMPTS,T=Dn.DEFAULT_EXPORT_INITIAL_BACKOFF)=>{switch(c=h(p,A=>{let y="";A.on("data",R=>y+=R),A.on("aborted",()=>{if(l){let R=new is.OTLPExporterError("Request Timeout");i(R)}}),A.on("end",()=>{if(l===!1)if(A.statusCode&&A.statusCode<299)j_.diag.debug(`statusCode: ${A.statusCode}`,y),n(),clearTimeout(f),clearTimeout(u);else if(A.statusCode&&(0,Dn.isExportRetryable)(A.statusCode)&&g>0){let R;T=Dn.DEFAULT_EXPORT_BACKOFF_MULTIPLIER*T,A.headers["retry-after"]?R=(0,Dn.parseRetryAfterToMills)(A.headers["retry-after"]):R=Math.round(Math.random()*(Dn.DEFAULT_EXPORT_MAX_BACKOFF-T)+T),u=setTimeout(()=>{_(g-1,T)},R)}else{let R=new is.OTLPExporterError(A.statusMessage,A.statusCode,y);i(R),clearTimeout(f),clearTimeout(u)}})}),c.on("error",A=>{if(l){let y=new is.OTLPExporterError("Request Timeout",A.code);i(y)}else i(A);clearTimeout(f),clearTimeout(u)}),c.on("abort",()=>{if(l){let A=new is.OTLPExporterError("Request Timeout");i(A)}clearTimeout(f),clearTimeout(u)}),e.compression){case ku.CompressionAlgorithm.GZIP:{c.setHeader("Content-Encoding","gzip"),hU(t).on("error",i).pipe(fU.createGzip()).on("error",i).pipe(c);break}default:c.end(t);break}};_()}er.sendWithHttp=_U;function hU(e){let t=new pU.Readable;return t.push(e),t.push(null),t}function gU(e){if(e.httpAgentOptions&&e.keepAlive===!1){j_.diag.warn("httpAgentOptions is used only when keepAlive is true");return}if(!(e.keepAlive===!1||!e.url))try{let r=new wR.URL(e.url).protocol==="http:"?MR.Agent:DR.Agent;return new r(Object.assign({keepAlive:!0},e.httpAgentOptions))}catch(t){j_.diag.error(`collector exporter failed to create http agent. err: ${t.message}`);return}}er.createHttpAgent=gU;function mU(e){return e||(((0,xR.getEnv)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,xR.getEnv)().OTEL_EXPORTER_OTLP_COMPRESSION)===ku.CompressionAlgorithm.GZIP?ku.CompressionAlgorithm.GZIP:ku.CompressionAlgorithm.NONE)}er.configureCompression=mU});var UR=d(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.OTLPExporterNodeBase=void 0;var EU=Bu(),SU=Fr(),$_=H_(),BR=x(),FR=J(),V_=class extends EU.OTLPExporterBase{constructor(t={}){super(t),this.DEFAULT_HEADERS={},t.metadata&&BR.diag.warn("Metadata cannot be set when using http"),this.headers=Object.assign(this.DEFAULT_HEADERS,(0,SU.parseHeaders)(t.headers),FR.baggageUtils.parseKeyPairsIntoRecord((0,FR.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)),this.agent=(0,$_.createHttpAgent)(t),this.compression=(0,$_.configureCompression)(t.compression)}onInit(t){}send(t,r,n){if(this._shutdownOnce.isCalled){BR.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=new Promise((a,u)=>{(0,$_.sendWithHttp)(this,JSON.stringify(i),"application/json",a,u)}).then(r,n);this._sendingPromises.push(s);let o=()=>{let a=this._sendingPromises.indexOf(s);this._sendingPromises.splice(a,1)};s.then(o,o)}onShutdown(){}};Gu.OTLPExporterNodeBase=V_});var kR=d(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.CompressionAlgorithm=nt.configureCompression=nt.createHttpAgent=nt.sendWithHttp=nt.OTLPExporterNodeBase=void 0;var AU=UR();Object.defineProperty(nt,"OTLPExporterNodeBase",{enumerable:!0,get:function(){return AU.OTLPExporterNodeBase}});var W_=H_();Object.defineProperty(nt,"sendWithHttp",{enumerable:!0,get:function(){return W_.sendWithHttp}});Object.defineProperty(nt,"createHttpAgent",{enumerable:!0,get:function(){return W_.createHttpAgent}});Object.defineProperty(nt,"configureCompression",{enumerable:!0,get:function(){return W_.configureCompression}});var TU=G_();Object.defineProperty(nt,"CompressionAlgorithm",{enumerable:!0,get:function(){return TU.CompressionAlgorithm}})});var Y_=d(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.sendWithXhr=Fn.sendWithBeacon=void 0;var GR=x(),ss=Uu(),Bn=Fr();function yU(e,t,r,n,i){if(navigator.sendBeacon(t,new Blob([e],r)))GR.diag.debug("sendBeacon - can send",e),n();else{let s=new ss.OTLPExporterError(`sendBeacon - cannot send ${e}`);i(s)}}Fn.sendWithBeacon=yU;function RU(e,t,r,n,i,s){let o,a,u=!1,c=setTimeout(()=>{if(clearTimeout(o),u=!0,a.readyState===XMLHttpRequest.DONE){let f=new ss.OTLPExporterError("Request Timeout");s(f)}else a.abort()},n),l=(f=Bn.DEFAULT_EXPORT_MAX_ATTEMPTS,p=Bn.DEFAULT_EXPORT_INITIAL_BACKOFF)=>{a=new XMLHttpRequest,a.open("POST",t),Object.entries(Object.assign(Object.assign({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach(([_,g])=>{a.setRequestHeader(_,g)}),a.send(e),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE&&u===!1)if(a.status>=200&&a.status<=299)GR.diag.debug("xhr success",e),i(),clearTimeout(c),clearTimeout(o);else if(a.status&&(0,Bn.isExportRetryable)(a.status)&&f>0){let _;p=Bn.DEFAULT_EXPORT_BACKOFF_MULTIPLIER*p,a.getResponseHeader("Retry-After")?_=(0,Bn.parseRetryAfterToMills)(a.getResponseHeader("Retry-After")):_=Math.round(Math.random()*(Bn.DEFAULT_EXPORT_MAX_BACKOFF-p)+p),o=setTimeout(()=>{l(f-1,p)},_)}else{let _=new ss.OTLPExporterError(`Failed to export with XHR (status: ${a.status})`,a.status);s(_),clearTimeout(c),clearTimeout(o)}},a.onabort=()=>{if(u){let _=new ss.OTLPExporterError("Request Timeout");s(_)}clearTimeout(c),clearTimeout(o)},a.onerror=()=>{if(u){let _=new ss.OTLPExporterError("Request Timeout");s(_)}clearTimeout(c),clearTimeout(o)}};l()}Fn.sendWithXhr=RU});var jR=d(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.OTLPExporterBrowserBase=void 0;var bU=Bu(),OU=Fr(),qR=Y_(),vU=x(),qu=J(),K_=class extends bU.OTLPExporterBase{constructor(t={}){super(t),this._useXHR=!1,this._useXHR=!!t.headers||typeof navigator.sendBeacon!="function",this._useXHR?this._headers=Object.assign({},(0,OU.parseHeaders)(t.headers),qu.baggageUtils.parseKeyPairsIntoRecord((0,qu.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)):this._headers={}}onInit(){qu._globalThis.addEventListener("unload",this.shutdown)}onShutdown(){qu._globalThis.removeEventListener("unload",this.shutdown)}send(t,r,n){if(this._shutdownOnce.isCalled){vU.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=JSON.stringify(i),o=new Promise((u,c)=>{this._useXHR?(0,qR.sendWithXhr)(s,this.url,this._headers,this.timeoutMillis,u,c):(0,qR.sendWithBeacon)(s,this.url,{type:"application/json"},u,c)}).then(r,n);this._sendingPromises.push(o);let a=()=>{let u=this._sendingPromises.indexOf(o);this._sendingPromises.splice(u,1)};o.then(a,a)}};ju.OTLPExporterBrowserBase=K_});var HR=d(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.sendWithXhr=Un.OTLPExporterBrowserBase=void 0;var PU=jR();Object.defineProperty(Un,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return PU.OTLPExporterBrowserBase}});var CU=Y_();Object.defineProperty(Un,"sendWithXhr",{enumerable:!0,get:function(){return CU.sendWithXhr}})});var VR=d(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.sendWithXhr=we.OTLPExporterBrowserBase=we.CompressionAlgorithm=we.configureCompression=we.createHttpAgent=we.sendWithHttp=we.OTLPExporterNodeBase=void 0;var os=kR();Object.defineProperty(we,"OTLPExporterNodeBase",{enumerable:!0,get:function(){return os.OTLPExporterNodeBase}});Object.defineProperty(we,"sendWithHttp",{enumerable:!0,get:function(){return os.sendWithHttp}});Object.defineProperty(we,"createHttpAgent",{enumerable:!0,get:function(){return os.createHttpAgent}});Object.defineProperty(we,"configureCompression",{enumerable:!0,get:function(){return os.configureCompression}});Object.defineProperty(we,"CompressionAlgorithm",{enumerable:!0,get:function(){return os.CompressionAlgorithm}});var $R=HR();Object.defineProperty(we,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return $R.OTLPExporterBrowserBase}});Object.defineProperty(we,"sendWithXhr",{enumerable:!0,get:function(){return $R.sendWithXhr}})});var X_=d(de=>{"use strict";var IU=de&&de.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),NU=de&&de.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&IU(t,e,r)};Object.defineProperty(de,"__esModule",{value:!0});de.invalidTimeout=de.configureExporterTimeout=de.appendRootPathToUrlIfNeeded=de.appendResourcePathToUrl=de.parseHeaders=de.OTLPExporterError=de.OTLPExporterBase=void 0;NU(VR(),de);var LU=Bu();Object.defineProperty(de,"OTLPExporterBase",{enumerable:!0,get:function(){return LU.OTLPExporterBase}});var xU=Uu();Object.defineProperty(de,"OTLPExporterError",{enumerable:!0,get:function(){return xU.OTLPExporterError}});var as=Fr();Object.defineProperty(de,"parseHeaders",{enumerable:!0,get:function(){return as.parseHeaders}});Object.defineProperty(de,"appendResourcePathToUrl",{enumerable:!0,get:function(){return as.appendResourcePathToUrl}});Object.defineProperty(de,"appendRootPathToUrlIfNeeded",{enumerable:!0,get:function(){return as.appendRootPathToUrlIfNeeded}});Object.defineProperty(de,"configureExporterTimeout",{enumerable:!0,get:function(){return as.configureExporterTimeout}});Object.defineProperty(de,"invalidTimeout",{enumerable:!0,get:function(){return as.invalidTimeout}})});var YR=d(WR=>{"use strict";Object.defineProperty(WR,"__esModule",{value:!0})});var us=d(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.getOtlpEncoder=it.encodeAsString=it.encodeAsLongBits=it.toLongBits=it.hrTimeToNanos=void 0;var Hu=J(),wU=BigInt(1e9);function z_(e){return BigInt(e[0])*wU+BigInt(e[1])}it.hrTimeToNanos=z_;function XR(e){let t=Number(BigInt.asUintN(32,e)),r=Number(BigInt.asUintN(32,e>>BigInt(32)));return{low:t,high:r}}it.toLongBits=XR;function Q_(e){let t=z_(e);return XR(t)}it.encodeAsLongBits=Q_;function zR(e){return z_(e).toString()}it.encodeAsString=zR;var MU=typeof BigInt<"u"?zR:Hu.hrTimeToNanoseconds;function KR(e){return e}function QR(e){if(e!==void 0)return(0,Hu.hexToBinary)(e)}var DU={encodeHrTime:Q_,encodeSpanContext:Hu.hexToBinary,encodeOptionalSpanContext:QR};function BU(e){var t,r;if(e===void 0)return DU;let n=(t=e.useLongBits)!==null&&t!==void 0?t:!0,i=(r=e.useHex)!==null&&r!==void 0?r:!1;return{encodeHrTime:n?Q_:MU,encodeSpanContext:i?KR:Hu.hexToBinary,encodeOptionalSpanContext:i?KR:QR}}it.getOtlpEncoder=BU});var JR=d(ZR=>{"use strict";Object.defineProperty(ZR,"__esModule",{value:!0})});var tb=d(eb=>{"use strict";Object.defineProperty(eb,"__esModule",{value:!0})});var rb=d(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.ESpanKind=void 0;var FU;(function(e){e[e.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",e[e.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",e[e.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",e[e.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",e[e.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",e[e.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"})(FU=cs.ESpanKind||(cs.ESpanKind={}))});var ib=d(nb=>{"use strict";Object.defineProperty(nb,"__esModule",{value:!0})});var ls=d(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.toAnyValue=tr.toKeyValue=tr.toAttributes=void 0;function UU(e){return Object.keys(e).map(t=>Z_(t,e[t]))}tr.toAttributes=UU;function Z_(e,t){return{key:e,value:J_(t)}}tr.toKeyValue=Z_;function J_(e){let t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(J_)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(([r,n])=>Z_(r,n))}}:{}}tr.toAnyValue=J_});var ab=d(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.toOtlpSpanEvent=rr.toOtlpLink=rr.sdkSpanToOtlpSpan=void 0;var eh=ls();function kU(e,t){var r;let n=e.spanContext(),i=e.status;return{traceId:t.encodeSpanContext(n.traceId),spanId:t.encodeSpanContext(n.spanId),parentSpanId:t.encodeOptionalSpanContext(e.parentSpanId),traceState:(r=n.traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:(0,eh.toAttributes)(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(s=>ob(s,t)),droppedEventsCount:e.droppedEventsCount,status:{code:i.code,message:i.message},links:e.links.map(s=>sb(s,t)),droppedLinksCount:e.droppedLinksCount}}rr.sdkSpanToOtlpSpan=kU;function sb(e,t){var r;return{attributes:e.attributes?(0,eh.toAttributes)(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:(r=e.context.traceState)===null||r===void 0?void 0:r.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}rr.toOtlpLink=sb;function ob(e,t){return{attributes:e.attributes?(0,eh.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}rr.toOtlpSpanEvent=ob});var ub=d($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.createExportTraceServiceRequest=void 0;var GU=ls(),qU=ab(),jU=us();function HU(e,t){let r=(0,jU.getOtlpEncoder)(t);return{resourceSpans:VU(e,r)}}$u.createExportTraceServiceRequest=HU;function $U(e){let t=new Map;for(let r of e){let n=t.get(r.resource);n||(n=new Map,t.set(r.resource,n));let i=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`,s=n.get(i);s||(s=[],n.set(i,s)),s.push(r)}return t}function VU(e,t){let r=$U(e),n=[],i=r.entries(),s=i.next();for(;!s.done;){let[o,a]=s.value,u=[],c=a.values(),l=c.next();for(;!l.done;){let p=l.value;if(p.length>0){let{name:h,version:_,schemaUrl:g}=p[0].instrumentationLibrary,T=p.map(A=>(0,qU.sdkSpanToOtlpSpan)(A,t));u.push({scope:{name:h,version:_},spans:T,schemaUrl:g})}l=c.next()}let f={resource:{attributes:(0,GU.toAttributes)(o.attributes),droppedAttributesCount:0},scopeSpans:u,schemaUrl:void 0};n.push(f),s=i.next()}return n}});var Vu=d(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.AggregationTemporality=void 0;var WU;(function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"})(WU=ds.AggregationTemporality||(ds.AggregationTemporality={}))});var kn=d(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.DataPointType=void 0;var YU;(function(e){e[e.HISTOGRAM=0]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",e[e.GAUGE=2]="GAUGE",e[e.SUM=3]="SUM"})(YU=fs.DataPointType||(fs.DataPointType={}))});var vt=d(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.equalsCaseInsensitive=ue.binarySearchLB=ue.setEquals=ue.FlatMap=ue.isPromiseAllSettledRejectionResult=ue.PromiseAllSettled=ue.callWithTimeout=ue.TimeoutError=ue.instrumentationScopeId=ue.hashAttributes=ue.isNotNullish=void 0;function KU(e){return e!=null}ue.isNotNullish=KU;function XU(e){let t=Object.keys(e);return t.length===0?"":(t=t.sort(),JSON.stringify(t.map(r=>[r,e[r]])))}ue.hashAttributes=XU;function zU(e){var t,r;return`${e.name}:${(t=e.version)!==null&&t!==void 0?t:""}:${(r=e.schemaUrl)!==null&&r!==void 0?r:""}`}ue.instrumentationScopeId=zU;var Wu=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};ue.TimeoutError=Wu;function QU(e,t){let r,n=new Promise(function(s,o){r=setTimeout(function(){o(new Wu("Operation timed out."))},t)});return Promise.race([e,n]).then(i=>(clearTimeout(r),i),i=>{throw clearTimeout(r),i})}ue.callWithTimeout=QU;async function ZU(e){return Promise.all(e.map(async t=>{try{return{status:"fulfilled",value:await t}}catch(r){return{status:"rejected",reason:r}}}))}ue.PromiseAllSettled=ZU;function JU(e){return e.status==="rejected"}ue.isPromiseAllSettledRejectionResult=JU;function ek(e,t){let r=[];return e.forEach(n=>{r.push(...t(n))}),r}ue.FlatMap=ek;function tk(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}ue.setEquals=tk;function rk(e,t){let r=0,n=e.length-1;for(;n-r>1;){let i=Math.trunc((n+r)/2);e[i]<=t?r=i:n=i-1}return e[n]<=t?n:e[r]<=t?r:-1}ue.binarySearchLB=rk;function nk(e,t){return e.toLowerCase()===t.toLowerCase()}ue.equalsCaseInsensitive=nk});var Gn=d(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.AggregatorKind=void 0;var ik;(function(e){e[e.DROP=0]="DROP",e[e.SUM=1]="SUM",e[e.LAST_VALUE=2]="LAST_VALUE",e[e.HISTOGRAM=3]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"})(ik=ps.AggregatorKind||(ps.AggregatorKind={}))});var cb=d(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.DropAggregator=void 0;var sk=Gn(),th=class{constructor(){this.kind=sk.AggregatorKind.DROP}createAccumulation(){}merge(t,r){}diff(t,r){}toMetricData(t,r,n,i){}};Yu.DropAggregator=th});var Ft=d(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.isValidName=Ze.isDescriptorCompatibleWith=Ze.createInstrumentDescriptorWithView=Ze.createInstrumentDescriptor=Ze.InstrumentType=void 0;var lb=x(),ok=vt(),ak;(function(e){e.COUNTER="COUNTER",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(ak=Ze.InstrumentType||(Ze.InstrumentType={}));function uk(e,t,r){var n,i,s,o;return db(e)||lb.diag.warn(`Invalid metric name: "${e}". The metric name should be a ASCII string with a length no greater than 255 characters.`),{name:e,type:t,description:(n=r?.description)!==null&&n!==void 0?n:"",unit:(i=r?.unit)!==null&&i!==void 0?i:"",valueType:(s=r?.valueType)!==null&&s!==void 0?s:lb.ValueType.DOUBLE,advice:(o=r?.advice)!==null&&o!==void 0?o:{}}}Ze.createInstrumentDescriptor=uk;function ck(e,t){var r,n;return{name:(r=e.name)!==null&&r!==void 0?r:t.name,description:(n=e.description)!==null&&n!==void 0?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType,advice:t.advice}}Ze.createInstrumentDescriptorWithView=ck;function lk(e,t){return(0,ok.equalsCaseInsensitive)(e.name,t.name)&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}Ze.isDescriptorCompatibleWith=lk;var dk=/^[a-z][a-z0-9_.\-/]{0,254}$/i;function db(e){return e.match(dk)!=null}Ze.isValidName=db});var fb=d(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.HistogramAggregator=jn.HistogramAccumulation=void 0;var fk=Gn(),pk=kn(),rh=Ft(),_k=vt();function hk(e){let t=e.map(()=>0);return t.push(0),{buckets:{boundaries:e,counts:t},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}var qn=class{constructor(t,r,n=!0,i=hk(r)){this.startTime=t,this._boundaries=r,this._recordMinMax=n,this._current=i}record(t){this._current.count+=1,this._current.sum+=t,this._recordMinMax&&(this._current.min=Math.min(t,this._current.min),this._current.max=Math.max(t,this._current.max),this._current.hasMinMax=!0);let r=(0,_k.binarySearchLB)(this._boundaries,t);this._current.buckets.counts[r+1]+=1}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};jn.HistogramAccumulation=qn;var nh=class{constructor(t,r){this._boundaries=t,this._recordMinMax=r,this.kind=fk.AggregatorKind.HISTOGRAM}createAccumulation(t){return new qn(t,this._boundaries,this._recordMinMax)}merge(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let l=0;l<s.length;l++)a[l]=s[l]+o[l];let u=1/0,c=-1/0;return this._recordMinMax&&(n.hasMinMax&&i.hasMinMax?(u=Math.min(n.min,i.min),c=Math.max(n.max,i.max)):n.hasMinMax?(u=n.min,c=n.max):i.hasMinMax&&(u=i.min,c=i.max)),new qn(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:n.count+i.count,sum:n.sum+i.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||i.hasMinMax),min:u,max:c})}diff(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let u=0;u<s.length;u++)a[u]=o[u]-s[u];return new qn(r.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:i.count-n.count,sum:i.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:pk.DataPointType.HISTOGRAM,dataPoints:n.map(([s,o])=>{let a=o.toPointValue(),u=t.type===rh.InstrumentType.UP_DOWN_COUNTER||t.type===rh.InstrumentType.OBSERVABLE_GAUGE||t.type===rh.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:s,startTime:o.startTime,endTime:i,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:u?void 0:a.sum,buckets:a.buckets,count:a.count}}})}}};jn.HistogramAggregator=nh});var pb=d(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.Buckets=void 0;var ih=class e{constructor(t=new sh,r=0,n=0,i=0){this.backing=t,this.indexBase=r,this.indexStart=n,this.indexEnd=i}get offset(){return this.indexStart}get length(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1}counts(){return Array.from({length:this.length},(t,r)=>this.at(r))}at(t){let r=this.indexBase-this.indexStart;return t<r&&(t+=this.backing.length),t-=r,this.backing.countAt(t)}incrementBucket(t,r){this.backing.increment(t,r)}decrementBucket(t,r){this.backing.decrement(t,r)}trim(){for(let t=0;t<this.length;t++)if(this.at(t)!==0){this.indexStart+=t;break}else if(t===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(let t=this.length-1;t>=0;t--)if(this.at(t)!==0){this.indexEnd-=this.length-t-1;break}this._rotate()}downscale(t){this._rotate();let r=1+this.indexEnd-this.indexStart,n=1<<t,i=0,s=0;for(let o=this.indexStart;o<=this.indexEnd;){let a=o%n;a<0&&(a+=n);for(let u=a;u<n&&i<r;u++)this._relocateBucket(s,i),i++,o++;s++}this.indexStart>>=t,this.indexEnd>>=t,this.indexBase=this.indexStart}clone(){return new e(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)}_rotate(){let t=this.indexBase-this.indexStart;t!==0&&(t>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,t),this.backing.reverse(t,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+t)),this.indexBase=this.indexStart)}_relocateBucket(t,r){t!==r&&this.incrementBucket(t,this.backing.emptyBucket(r))}};Ku.Buckets=ih;var sh=class e{constructor(t=[0]){this._counts=t}get length(){return this._counts.length}countAt(t){return this._counts[t]}growTo(t,r,n){let i=new Array(t).fill(0);i.splice(n,this._counts.length-r,...this._counts.slice(r)),i.splice(0,r,...this._counts.slice(0,r)),this._counts=i}reverse(t,r){let n=Math.floor((t+r)/2)-t;for(let i=0;i<n;i++){let s=this._counts[t+i];this._counts[t+i]=this._counts[r-i-1],this._counts[r-i-1]=s}}emptyBucket(t){let r=this._counts[t];return this._counts[t]=0,r}increment(t,r){this._counts[t]+=r}decrement(t,r){this._counts[t]>=r?this._counts[t]-=r:this._counts[t]=0}clone(){return new e([...this._counts])}}});var ah=d(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.getSignificand=je.getNormalBase2=je.MIN_VALUE=je.MAX_NORMAL_EXPONENT=je.MIN_NORMAL_EXPONENT=je.SIGNIFICAND_WIDTH=void 0;je.SIGNIFICAND_WIDTH=52;var gk=2146435072,mk=1048575,oh=1023;je.MIN_NORMAL_EXPONENT=-oh+1;je.MAX_NORMAL_EXPONENT=oh;je.MIN_VALUE=Math.pow(2,-1022);function Ek(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e),((t.getUint32(0)&gk)>>20)-oh}je.getNormalBase2=Ek;function Sk(e){let t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);let r=t.getUint32(0),n=t.getUint32(4);return(r&mk)*Math.pow(2,32)+n}je.getSignificand=Sk});var Xu=d(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.nextGreaterSquare=Hn.ldexp=void 0;function Ak(e,t){return e===0||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||Number.isNaN(e)?e:e*Math.pow(2,t)}Hn.ldexp=Ak;function Tk(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}Hn.nextGreaterSquare=Tk});var Qu=d(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.MappingError=void 0;var uh=class extends Error{};zu.MappingError=uh});var hb=d(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.ExponentMapping=void 0;var $n=ah(),yk=Xu(),_b=Qu(),ch=class{constructor(t){this._shift=-t}mapToIndex(t){if(t<$n.MIN_VALUE)return this._minNormalLowerBoundaryIndex();let r=$n.getNormalBase2(t),n=this._rightShift($n.getSignificand(t)-1,$n.SIGNIFICAND_WIDTH);return r+n>>this._shift}lowerBoundary(t){let r=this._minNormalLowerBoundaryIndex();if(t<r)throw new _b.MappingError(`underflow: ${t} is < minimum lower boundary: ${r}`);let n=this._maxNormalLowerBoundaryIndex();if(t>n)throw new _b.MappingError(`overflow: ${t} is > maximum lower boundary: ${n}`);return yk.ldexp(1,t<<this._shift)}get scale(){return this._shift===0?0:-this._shift}_minNormalLowerBoundaryIndex(){let t=$n.MIN_NORMAL_EXPONENT>>this._shift;return this._shift<2&&t--,t}_maxNormalLowerBoundaryIndex(){return $n.MAX_NORMAL_EXPONENT>>this._shift}_rightShift(t,r){return Math.floor(t*Math.pow(2,-r))}};Zu.ExponentMapping=ch});var Eb=d(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.LogarithmMapping=void 0;var Vn=ah(),gb=Xu(),mb=Qu(),lh=class{constructor(t){this._scale=t,this._scaleFactor=gb.ldexp(Math.LOG2E,t),this._inverseFactor=gb.ldexp(Math.LN2,-t)}mapToIndex(t){if(t<=Vn.MIN_VALUE)return this._minNormalLowerBoundaryIndex()-1;if(Vn.getSignificand(t)===0)return(Vn.getNormalBase2(t)<<this._scale)-1;let r=Math.floor(Math.log(t)*this._scaleFactor),n=this._maxNormalLowerBoundaryIndex();return r>=n?n:r}lowerBoundary(t){let r=this._maxNormalLowerBoundaryIndex();if(t>=r){if(t===r)return 2*Math.exp((t-(1<<this._scale))/this._scaleFactor);throw new mb.MappingError(`overflow: ${t} is > maximum lower boundary: ${r}`)}let n=this._minNormalLowerBoundaryIndex();if(t<=n){if(t===n)return Vn.MIN_VALUE;if(t===n-1)return Math.exp((t+(1<<this._scale))/this._scaleFactor)/2;throw new mb.MappingError(`overflow: ${t} is < minimum lower boundary: ${n}`)}return Math.exp(t*this._inverseFactor)}get scale(){return this._scale}_minNormalLowerBoundaryIndex(){return Vn.MIN_NORMAL_EXPONENT<<this._scale}_maxNormalLowerBoundaryIndex(){return(Vn.MAX_NORMAL_EXPONENT+1<<this._scale)-1}};Ju.LogarithmMapping=lh});var Tb=d(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.getMapping=void 0;var Rk=hb(),bk=Eb(),Ok=Qu(),Sb=-10,Ab=20,vk=Array.from({length:31},(e,t)=>t>10?new bk.LogarithmMapping(t-10):new Rk.ExponentMapping(t-10));function Pk(e){if(e>Ab||e<Sb)throw new Ok.MappingError(`expected scale >= ${Sb} && <= ${Ab}, got: ${e}`);return vk[e+10]}ec.getMapping=Pk});var bb=d(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.ExponentialHistogramAggregator=Yn.ExponentialHistogramAccumulation=void 0;var Ck=Gn(),Ik=kn(),Nk=x(),dh=Ft(),yb=pb(),Rb=Tb(),Lk=Xu(),Wn=class e{constructor(t,r){this.low=t,this.high=r}static combine(t,r){return new e(Math.min(t.low,r.low),Math.max(t.high,r.high))}},xk=20,wk=160,fh=2,tc=class e{constructor(t=t,r=wk,n=!0,i=0,s=0,o=0,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=new yb.Buckets,l=new yb.Buckets,f=(0,Rb.getMapping)(xk)){this.startTime=t,this._maxSize=r,this._recordMinMax=n,this._sum=i,this._count=s,this._zeroCount=o,this._min=a,this._max=u,this._positive=c,this._negative=l,this._mapping=f,this._maxSize<fh&&(Nk.diag.warn(`Exponential Histogram Max Size set to ${this._maxSize},                 changing to the minimum size of: ${fh}`),this._maxSize=fh)}record(t){this.updateByIncrement(t,1)}setStartTime(t){this.startTime=t}toPointValue(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}}get sum(){return this._sum}get min(){return this._min}get max(){return this._max}get count(){return this._count}get zeroCount(){return this._zeroCount}get scale(){return this._count===this._zeroCount?0:this._mapping.scale}get positive(){return this._positive}get negative(){return this._negative}updateByIncrement(t,r){if(t>this._max&&(this._max=t),t<this._min&&(this._min=t),this._count+=r,t===0){this._zeroCount+=r;return}this._sum+=t*r,t>0?this._updateBuckets(this._positive,t,r):this._updateBuckets(this._negative,-t,r)}merge(t){this._count===0?(this._min=t.min,this._max=t.max):t.count!==0&&(t.min<this.min&&(this._min=t.min),t.max>this.max&&(this._max=t.max)),this.startTime=t.startTime,this._sum+=t.sum,this._count+=t.count,this._zeroCount+=t.zeroCount;let r=this._minScale(t);this._downscale(this.scale-r),this._mergeBuckets(this.positive,t,t.positive,r),this._mergeBuckets(this.negative,t,t.negative,r)}diff(t){this._min=1/0,this._max=-1/0,this._sum-=t.sum,this._count-=t.count,this._zeroCount-=t.zeroCount;let r=this._minScale(t);this._downscale(this.scale-r),this._diffBuckets(this.positive,t,t.positive,r),this._diffBuckets(this.negative,t,t.negative,r)}clone(){return new e(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)}_updateBuckets(t,r,n){let i=this._mapping.mapToIndex(r),s=!1,o=0,a=0;if(t.length===0?(t.indexStart=i,t.indexEnd=t.indexStart,t.indexBase=t.indexStart):i<t.indexStart&&t.indexEnd-i>=this._maxSize?(s=!0,a=i,o=t.indexEnd):i>t.indexEnd&&i-t.indexStart>=this._maxSize&&(s=!0,a=t.indexStart,o=i),s){let u=this._changeScale(o,a);this._downscale(u),i=this._mapping.mapToIndex(r)}this._incrementIndexBy(t,i,n)}_incrementIndexBy(t,r,n){if(n===0)return;if(r<t.indexStart){let s=t.indexEnd-r;s>=t.backing.length&&this._grow(t,s+1),t.indexStart=r}else if(r>t.indexEnd){let s=r-t.indexStart;s>=t.backing.length&&this._grow(t,s+1),t.indexEnd=r}let i=r-t.indexBase;i<0&&(i+=t.backing.length),t.incrementBucket(i,n)}_grow(t,r){let n=t.backing.length,i=t.indexBase-t.indexStart,s=n-i,o=(0,Lk.nextGreaterSquare)(r);o>this._maxSize&&(o=this._maxSize);let a=o-i;t.backing.growTo(o,s,a)}_changeScale(t,r){let n=0;for(;t-r>=this._maxSize;)t>>=1,r>>=1,n++;return n}_downscale(t){if(t===0)return;if(t<0)throw new Error(`impossible change of scale: ${this.scale}`);let r=this._mapping.scale-t;this._positive.downscale(t),this._negative.downscale(t),this._mapping=(0,Rb.getMapping)(r)}_minScale(t){let r=Math.min(this.scale,t.scale),n=Wn.combine(this._highLowAtScale(this.positive,this.scale,r),this._highLowAtScale(t.positive,t.scale,r)),i=Wn.combine(this._highLowAtScale(this.negative,this.scale,r),this._highLowAtScale(t.negative,t.scale,r));return Math.min(r-this._changeScale(n.high,n.low),r-this._changeScale(i.high,i.low))}_highLowAtScale(t,r,n){if(t.length===0)return new Wn(0,-1);let i=r-n;return new Wn(t.indexStart>>i,t.indexEnd>>i)}_mergeBuckets(t,r,n,i){let s=n.offset,o=r.scale-i;for(let a=0;a<n.length;a++)this._incrementIndexBy(t,s+a>>o,n.at(a))}_diffBuckets(t,r,n,i){let s=n.offset,o=r.scale-i;for(let a=0;a<n.length;a++){let c=(s+a>>o)-t.indexBase;c<0&&(c+=t.backing.length),t.decrementBucket(c,n.at(a))}t.trim()}};Yn.ExponentialHistogramAccumulation=tc;var ph=class{constructor(t,r){this._maxSize=t,this._recordMinMax=r,this.kind=Ck.AggregatorKind.EXPONENTIAL_HISTOGRAM}createAccumulation(t){return new tc(t,this._maxSize,this._recordMinMax)}merge(t,r){let n=r.clone();return n.merge(t),n}diff(t,r){let n=r.clone();return n.diff(t),n}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:Ik.DataPointType.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(([s,o])=>{let a=o.toPointValue(),u=t.type===dh.InstrumentType.UP_DOWN_COUNTER||t.type===dh.InstrumentType.OBSERVABLE_GAUGE||t.type===dh.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:s,startTime:o.startTime,endTime:i,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:u?void 0:a.sum,positive:{offset:a.positive.offset,bucketCounts:a.positive.bucketCounts},negative:{offset:a.negative.offset,bucketCounts:a.negative.bucketCounts},count:a.count,scale:a.scale,zeroCount:a.zeroCount}}})}}};Yn.ExponentialHistogramAggregator=ph});var Ob=d(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.LastValueAggregator=Xn.LastValueAccumulation=void 0;var Mk=Gn(),_s=J(),Dk=kn(),Kn=class{constructor(t,r=0,n=[0,0]){this.startTime=t,this._current=r,this.sampleTime=n}record(t){this._current=t,this.sampleTime=(0,_s.millisToHrTime)(Date.now())}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};Xn.LastValueAccumulation=Kn;var _h=class{constructor(){this.kind=Mk.AggregatorKind.LAST_VALUE}createAccumulation(t){return new Kn(t)}merge(t,r){let n=(0,_s.hrTimeToMicroseconds)(r.sampleTime)>=(0,_s.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new Kn(t.startTime,n.toPointValue(),n.sampleTime)}diff(t,r){let n=(0,_s.hrTimeToMicroseconds)(r.sampleTime)>=(0,_s.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new Kn(r.startTime,n.toPointValue(),n.sampleTime)}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:Dk.DataPointType.GAUGE,dataPoints:n.map(([s,o])=>({attributes:s,startTime:o.startTime,endTime:i,value:o.toPointValue()}))}}};Xn.LastValueAggregator=_h});var vb=d(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.SumAggregator=zn.SumAccumulation=void 0;var Bk=Gn(),Fk=kn(),nr=class{constructor(t,r,n=0,i=!1){this.startTime=t,this.monotonic=r,this._current=n,this.reset=i}record(t){this.monotonic&&t<0||(this._current+=t)}setStartTime(t){this.startTime=t}toPointValue(){return this._current}};zn.SumAccumulation=nr;var hh=class{constructor(t){this.monotonic=t,this.kind=Bk.AggregatorKind.SUM}createAccumulation(t){return new nr(t,this.monotonic)}merge(t,r){let n=t.toPointValue(),i=r.toPointValue();return r.reset?new nr(r.startTime,this.monotonic,i,r.reset):new nr(t.startTime,this.monotonic,n+i)}diff(t,r){let n=t.toPointValue(),i=r.toPointValue();return this.monotonic&&n>i?new nr(r.startTime,this.monotonic,i,!0):new nr(r.startTime,this.monotonic,i-n)}toMetricData(t,r,n,i){return{descriptor:t,aggregationTemporality:r,dataPointType:Fk.DataPointType.SUM,dataPoints:n.map(([s,o])=>({attributes:s,startTime:o.startTime,endTime:i,value:o.toPointValue()})),isMonotonic:this.monotonic}}};zn.SumAggregator=hh});var Pb=d(dt=>{"use strict";var Uk=dt&&dt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),hs=dt&&dt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Uk(t,e,r)};Object.defineProperty(dt,"__esModule",{value:!0});hs(cb(),dt);hs(fb(),dt);hs(bb(),dt);hs(Ob(),dt);hs(vb(),dt)});var sc=d(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.DefaultAggregation=Ae.ExponentialHistogramAggregation=Ae.ExplicitBucketHistogramAggregation=Ae.HistogramAggregation=Ae.LastValueAggregation=Ae.SumAggregation=Ae.DropAggregation=Ae.Aggregation=void 0;var kk=x(),Ur=Pb(),Ut=Ft(),Pt=class{static Drop(){return Cb}static Sum(){return Ib}static LastValue(){return Nb}static Histogram(){return Lb}static ExponentialHistogram(){return Gk}static Default(){return qk}};Ae.Aggregation=Pt;var gs=class e extends Pt{createAggregator(t){return e.DEFAULT_INSTANCE}};Ae.DropAggregation=gs;gs.DEFAULT_INSTANCE=new Ur.DropAggregator;var Qn=class e extends Pt{createAggregator(t){switch(t.type){case Ut.InstrumentType.COUNTER:case Ut.InstrumentType.OBSERVABLE_COUNTER:case Ut.InstrumentType.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}}};Ae.SumAggregation=Qn;Qn.MONOTONIC_INSTANCE=new Ur.SumAggregator(!0);Qn.NON_MONOTONIC_INSTANCE=new Ur.SumAggregator(!1);var ms=class e extends Pt{createAggregator(t){return e.DEFAULT_INSTANCE}};Ae.LastValueAggregation=ms;ms.DEFAULT_INSTANCE=new Ur.LastValueAggregator;var Es=class e extends Pt{createAggregator(t){return e.DEFAULT_INSTANCE}};Ae.HistogramAggregation=Es;Es.DEFAULT_INSTANCE=new Ur.HistogramAggregator([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0);var rc=class extends Pt{constructor(t,r=!0){if(super(),this._recordMinMax=r,t===void 0||t.length===0)throw new Error("HistogramAggregator should be created with boundaries.");t=t.concat(),t=t.sort((s,o)=>s-o);let n=t.lastIndexOf(-1/0),i=t.indexOf(1/0);i===-1&&(i=void 0),this._boundaries=t.slice(n+1,i)}createAggregator(t){return new Ur.HistogramAggregator(this._boundaries,this._recordMinMax)}};Ae.ExplicitBucketHistogramAggregation=rc;var nc=class extends Pt{constructor(t=160,r=!0){super(),this._maxSize=t,this._recordMinMax=r}createAggregator(t){return new Ur.ExponentialHistogramAggregator(this._maxSize,this._recordMinMax)}};Ae.ExponentialHistogramAggregation=nc;var ic=class extends Pt{_resolve(t){switch(t.type){case Ut.InstrumentType.COUNTER:case Ut.InstrumentType.UP_DOWN_COUNTER:case Ut.InstrumentType.OBSERVABLE_COUNTER:case Ut.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return Ib;case Ut.InstrumentType.OBSERVABLE_GAUGE:return Nb;case Ut.InstrumentType.HISTOGRAM:return t.advice.explicitBucketBoundaries?new rc(t.advice.explicitBucketBoundaries):Lb}return kk.diag.warn(`Unable to recognize instrument type: ${t.type}`),Cb}createAggregator(t){return this._resolve(t).createAggregator(t)}};Ae.DefaultAggregation=ic;var Cb=new gs,Ib=new Qn,Nb=new ms,Lb=new Es,Gk=new nc,qk=new ic});var gh=d(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=Zn.DEFAULT_AGGREGATION_SELECTOR=void 0;var jk=sc(),Hk=Vu(),$k=e=>jk.Aggregation.Default();Zn.DEFAULT_AGGREGATION_SELECTOR=$k;var Vk=e=>Hk.AggregationTemporality.CUMULATIVE;Zn.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=Vk});var Eh=d(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.MetricReader=void 0;var xb=x(),oc=vt(),wb=gh(),mh=class{constructor(t){var r,n,i;this._shutdown=!1,this._aggregationSelector=(r=t?.aggregationSelector)!==null&&r!==void 0?r:wb.DEFAULT_AGGREGATION_SELECTOR,this._aggregationTemporalitySelector=(n=t?.aggregationTemporalitySelector)!==null&&n!==void 0?n:wb.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR,this._metricProducers=(i=t?.metricProducers)!==null&&i!==void 0?i:[]}setMetricProducer(t){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=t,this.onInitialized()}selectAggregation(t){return this._aggregationSelector(t)}selectAggregationTemporality(t){return this._aggregationTemporalitySelector(t)}onInitialized(){}async collect(t){if(this._sdkMetricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");let[r,...n]=await Promise.all([this._sdkMetricProducer.collect({timeoutMillis:t?.timeoutMillis}),...this._metricProducers.map(a=>a.collect({timeoutMillis:t?.timeoutMillis}))]),i=r.errors.concat((0,oc.FlatMap)(n,a=>a.errors)),s=r.resourceMetrics.resource,o=r.resourceMetrics.scopeMetrics.concat((0,oc.FlatMap)(n,a=>a.resourceMetrics.scopeMetrics));return{resourceMetrics:{resource:s,scopeMetrics:o},errors:i}}async shutdown(t){if(this._shutdown){xb.diag.error("Cannot call shutdown twice.");return}t?.timeoutMillis==null?await this.onShutdown():await(0,oc.callWithTimeout)(this.onShutdown(),t.timeoutMillis),this._shutdown=!0}async forceFlush(t){if(this._shutdown){xb.diag.warn("Cannot forceFlush on already shutdown MetricReader.");return}if(t?.timeoutMillis==null){await this.onForceFlush();return}await(0,oc.callWithTimeout)(this.onForceFlush(),t.timeoutMillis)}};ac.MetricReader=mh});var Bb=d(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.PeriodicExportingMetricReader=void 0;var Mb=x(),uc=J(),Wk=Eh(),Db=vt(),Yk=x(),Sh=class extends Wk.MetricReader{constructor(t){var r,n,i,s;if(super({aggregationSelector:(r=t.exporter.selectAggregation)===null||r===void 0?void 0:r.bind(t.exporter),aggregationTemporalitySelector:(n=t.exporter.selectAggregationTemporality)===null||n===void 0?void 0:n.bind(t.exporter),metricProducers:t.metricProducers}),t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=(i=t.exportIntervalMillis)!==null&&i!==void 0?i:6e4,this._exportTimeout=(s=t.exportTimeoutMillis)!==null&&s!==void 0?s:3e4,this._exporter=t.exporter}async _runOnce(){try{await(0,Db.callWithTimeout)(this._doRun(),this._exportTimeout)}catch(t){if(t instanceof Db.TimeoutError){Mb.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);return}(0,uc.globalErrorHandler)(t)}}async _doRun(){var t,r;let{resourceMetrics:n,errors:i}=await this.collect({timeoutMillis:this._exportTimeout});i.length>0&&Mb.diag.error("PeriodicExportingMetricReader: metrics collection errors",...i);let s=async()=>{let o=await uc.internal._export(this._exporter,n);if(o.code!==uc.ExportResultCode.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${o.error})`)};n.resource.asyncAttributesPending?(r=(t=n.resource).waitForAsyncAttributes)===null||r===void 0||r.call(t).then(s,o=>Yk.diag.debug("Error while resolving async portion of resource: ",o)):await s()}onInitialized(){this._interval=setInterval(()=>{this._runOnce()},this._exportInterval),(0,uc.unrefTimer)(this._interval)}async onForceFlush(){await this._runOnce(),await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this._exporter.shutdown()}};cc.PeriodicExportingMetricReader=Sh});var Ub=d(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.InMemoryMetricExporter=void 0;var Fb=J(),Ah=class{constructor(t){this._shutdown=!1,this._metrics=[],this._aggregationTemporality=t}export(t,r){if(this._shutdown){setTimeout(()=>r({code:Fb.ExportResultCode.FAILED}),0);return}this._metrics.push(t),setTimeout(()=>r({code:Fb.ExportResultCode.SUCCESS}),0)}getMetrics(){return this._metrics}forceFlush(){return Promise.resolve()}reset(){this._metrics=[]}selectAggregationTemporality(t){return this._aggregationTemporality}shutdown(){return this._shutdown=!0,Promise.resolve()}};lc.InMemoryMetricExporter=Ah});var Gb=d(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.ConsoleMetricExporter=void 0;var kb=J(),Kk=gh(),Th=class e{constructor(t){var r;this._shutdown=!1,this._temporalitySelector=(r=t?.temporalitySelector)!==null&&r!==void 0?r:Kk.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR}export(t,r){if(this._shutdown){setImmediate(r,{code:kb.ExportResultCode.FAILED});return}return e._sendMetrics(t,r)}forceFlush(){return Promise.resolve()}selectAggregationTemporality(t){return this._temporalitySelector(t)}shutdown(){return this._shutdown=!0,Promise.resolve()}static _sendMetrics(t,r){for(let n of t.scopeMetrics)for(let i of n.metrics)console.dir({descriptor:i.descriptor,dataPointType:i.dataPointType,dataPoints:i.dataPoints});r({code:kb.ExportResultCode.SUCCESS})}};dc.ConsoleMetricExporter=Th});var qb=d(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.ViewRegistry=void 0;var yh=class{constructor(){this._registeredViews=[]}addView(t){this._registeredViews.push(t)}findViews(t,r){return this._registeredViews.filter(i=>this._matchInstrument(i.instrumentSelector,t)&&this._matchMeter(i.meterSelector,r))}_matchInstrument(t,r){return(t.getType()===void 0||r.type===t.getType())&&t.getNameFilter().match(r.name)&&t.getUnitFilter().match(r.unit)}_matchMeter(t,r){return t.getNameFilter().match(r.name)&&(r.version===void 0||t.getVersionFilter().match(r.version))&&(r.schemaUrl===void 0||t.getSchemaUrlFilter().match(r.schemaUrl))}};fc.ViewRegistry=yh});var pc=d(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.isObservableInstrument=he.ObservableUpDownCounterInstrument=he.ObservableGaugeInstrument=he.ObservableCounterInstrument=he.ObservableInstrument=he.HistogramInstrument=he.CounterInstrument=he.UpDownCounterInstrument=he.SyncInstrument=void 0;var Jn=x(),Xk=J(),ei=class{constructor(t,r){this._writableMetricStorage=t,this._descriptor=r}_record(t,r={},n=Jn.context.active()){if(typeof t!="number"){Jn.diag.warn(`non-number value provided to metric ${this._descriptor.name}: ${t}`);return}this._descriptor.valueType===Jn.ValueType.INT&&!Number.isInteger(t)&&(Jn.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t),!Number.isInteger(t))||this._writableMetricStorage.record(t,r,n,(0,Xk.millisToHrTime)(Date.now()))}};he.SyncInstrument=ei;var Rh=class extends ei{add(t,r,n){this._record(t,r,n)}};he.UpDownCounterInstrument=Rh;var bh=class extends ei{add(t,r,n){if(t<0){Jn.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};he.CounterInstrument=bh;var Oh=class extends ei{record(t,r,n){if(t<0){Jn.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};he.HistogramInstrument=Oh;var kr=class{constructor(t,r,n){this._observableRegistry=n,this._descriptor=t,this._metricStorages=r}addCallback(t){this._observableRegistry.addCallback(t,this)}removeCallback(t){this._observableRegistry.removeCallback(t,this)}};he.ObservableInstrument=kr;var vh=class extends kr{};he.ObservableCounterInstrument=vh;var Ph=class extends kr{};he.ObservableGaugeInstrument=Ph;var Ch=class extends kr{};he.ObservableUpDownCounterInstrument=Ch;function zk(e){return e instanceof kr}he.isObservableInstrument=zk});var jb=d(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.Meter=void 0;var st=Ft(),ti=pc(),Ih=class{constructor(t){this._meterSharedState=t}createHistogram(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.HISTOGRAM,r),i=this._meterSharedState.registerMetricStorage(n);return new ti.HistogramInstrument(i,n)}createCounter(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new ti.CounterInstrument(i,n)}createUpDownCounter(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.UP_DOWN_COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new ti.UpDownCounterInstrument(i,n)}createObservableGauge(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.OBSERVABLE_GAUGE,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ti.ObservableGaugeInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableCounter(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.OBSERVABLE_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ti.ObservableCounterInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(t,r){let n=(0,st.createInstrumentDescriptor)(t,st.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new ti.ObservableUpDownCounterInstrument(n,i,this._meterSharedState.observableRegistry)}addBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.addBatchCallback(t,r)}removeBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.removeBatchCallback(t,r)}};_c.Meter=Ih});var Lh=d(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.MetricStorage=void 0;var Qk=Ft(),Nh=class{constructor(t){this._instrumentDescriptor=t}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(t){this._instrumentDescriptor=(0,Qk.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})}};hc.MetricStorage=Nh});var Ss=d(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.AttributeHashMap=ri.HashMap=void 0;var Zk=vt(),gc=class{constructor(t){this._hash=t,this._valueMap=new Map,this._keyMap=new Map}get(t,r){return r??(r=this._hash(t)),this._valueMap.get(r)}getOrDefault(t,r){let n=this._hash(t);if(this._valueMap.has(n))return this._valueMap.get(n);let i=r();return this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,i),i}set(t,r,n){n??(n=this._hash(t)),this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,r)}has(t,r){return r??(r=this._hash(t)),this._valueMap.has(r)}*keys(){let t=this._keyMap.entries(),r=t.next();for(;r.done!==!0;)yield[r.value[1],r.value[0]],r=t.next()}*entries(){let t=this._valueMap.entries(),r=t.next();for(;r.done!==!0;)yield[this._keyMap.get(r.value[0]),r.value[1],r.value[0]],r=t.next()}get size(){return this._valueMap.size}};ri.HashMap=gc;var xh=class extends gc{constructor(){super(Zk.hashAttributes)}};ri.AttributeHashMap=xh});var Dh=d(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.DeltaMetricProcessor=void 0;var wh=Ss(),Mh=class{constructor(t){this._aggregator=t,this._activeCollectionStorage=new wh.AttributeHashMap,this._cumulativeMemoStorage=new wh.AttributeHashMap}record(t,r,n,i){let s=this._activeCollectionStorage.getOrDefault(r,()=>this._aggregator.createAccumulation(i));s?.record(t)}batchCumulate(t,r){Array.from(t.entries()).forEach(([n,i,s])=>{let o=this._aggregator.createAccumulation(r);o?.record(i);let a=o;if(this._cumulativeMemoStorage.has(n,s)){let u=this._cumulativeMemoStorage.get(n,s);a=this._aggregator.diff(u,o)}if(this._activeCollectionStorage.has(n,s)){let u=this._activeCollectionStorage.get(n,s);a=this._aggregator.merge(u,a)}this._cumulativeMemoStorage.set(n,o,s),this._activeCollectionStorage.set(n,a,s)})}collect(){let t=this._activeCollectionStorage;return this._activeCollectionStorage=new wh.AttributeHashMap,t}};mc.DeltaMetricProcessor=Mh});var Fh=d(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.TemporalMetricProcessor=void 0;var Jk=Vu(),eG=Ss(),Bh=class e{constructor(t,r){this._aggregator=t,this._unreportedAccumulations=new Map,this._reportHistory=new Map,r.forEach(n=>{this._unreportedAccumulations.set(n,[])})}buildMetrics(t,r,n,i){this._stashAccumulations(n);let s=this._getMergedUnreportedAccumulations(t),o=s,a;if(this._reportHistory.has(t)){let c=this._reportHistory.get(t),l=c.collectionTime;a=c.aggregationTemporality,a===Jk.AggregationTemporality.CUMULATIVE?o=e.merge(c.accumulations,s,this._aggregator):o=e.calibrateStartTime(c.accumulations,s,l)}else a=t.selectAggregationTemporality(r.type);this._reportHistory.set(t,{accumulations:o,collectionTime:i,aggregationTemporality:a});let u=tG(o);if(u.length!==0)return this._aggregator.toMetricData(r,a,u,i)}_stashAccumulations(t){let r=this._unreportedAccumulations.keys();for(let n of r){let i=this._unreportedAccumulations.get(n);i===void 0&&(i=[],this._unreportedAccumulations.set(n,i)),i.push(t)}}_getMergedUnreportedAccumulations(t){let r=new eG.AttributeHashMap,n=this._unreportedAccumulations.get(t);if(this._unreportedAccumulations.set(t,[]),n===void 0)return r;for(let i of n)r=e.merge(r,i,this._aggregator);return r}static merge(t,r,n){let i=t,s=r.entries(),o=s.next();for(;o.done!==!0;){let[a,u,c]=o.value;if(t.has(a,c)){let l=t.get(a,c),f=n.merge(l,u);i.set(a,f,c)}else i.set(a,u,c);o=s.next()}return i}static calibrateStartTime(t,r,n){for(let[i,s]of t.keys()){let o=r.get(i,s);o?.setStartTime(n)}return r}};Ec.TemporalMetricProcessor=Bh;function tG(e){return Array.from(e.entries())}});var Hb=d(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.AsyncMetricStorage=void 0;var rG=Lh(),nG=Dh(),iG=Fh(),sG=Ss(),Uh=class extends rG.MetricStorage{constructor(t,r,n,i){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new nG.DeltaMetricProcessor(r),this._temporalMetricStorage=new iG.TemporalMetricProcessor(r,i)}record(t,r){let n=new sG.AttributeHashMap;Array.from(t.entries()).forEach(([i,s])=>{n.set(this._attributesProcessor.process(i),s)}),this._deltaMetricStorage.batchCumulate(n,r)}collect(t,r){let n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,r)}};Sc.AsyncMetricStorage=Uh});var Kb=d(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.getConflictResolutionRecipe=He.getDescriptionResolutionRecipe=He.getTypeConflictResolutionRecipe=He.getUnitConflictResolutionRecipe=He.getValueTypeConflictResolutionRecipe=He.getIncompatibilityDetails=void 0;function oG(e,t){let r="";return e.unit!==t.unit&&(r+=`	- Unit '${e.unit}' does not match '${t.unit}'
`),e.type!==t.type&&(r+=`	- Type '${e.type}' does not match '${t.type}'
`),e.valueType!==t.valueType&&(r+=`	- Value Type '${e.valueType}' does not match '${t.valueType}'
`),e.description!==t.description&&(r+=`	- Description '${e.description}' does not match '${t.description}'
`),r}He.getIncompatibilityDetails=oG;function $b(e,t){return`	- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}He.getValueTypeConflictResolutionRecipe=$b;function Vb(e,t){return`	- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}He.getUnitConflictResolutionRecipe=Vb;function Wb(e,t){let r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}He.getTypeConflictResolutionRecipe=Wb;function Yb(e,t){let r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'
    	- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}
    	- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}He.getDescriptionResolutionRecipe=Yb;function aG(e,t){return e.valueType!==t.valueType?$b(e,t):e.unit!==t.unit?Vb(e,t):e.type!==t.type?Wb(e,t):e.description!==t.description?Yb(e,t):""}He.getConflictResolutionRecipe=aG});var zb=d(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.MetricStorageRegistry=void 0;var uG=Ft(),Xb=x(),Ac=Kb(),kh=class e{constructor(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}static create(){return new e}getStorages(t){let r=[];for(let i of this._sharedRegistry.values())r=r.concat(i);let n=this._perCollectorRegistry.get(t);if(n!=null)for(let i of n.values())r=r.concat(i);return r}register(t){this._registerStorage(t,this._sharedRegistry)}registerForCollector(t,r){let n=this._perCollectorRegistry.get(t);n==null&&(n=new Map,this._perCollectorRegistry.set(t,n)),this._registerStorage(r,n)}findOrUpdateCompatibleStorage(t){let r=this._sharedRegistry.get(t.name);return r===void 0?null:this._findOrUpdateCompatibleStorage(t,r)}findOrUpdateCompatibleCollectorStorage(t,r){let n=this._perCollectorRegistry.get(t);if(n===void 0)return null;let i=n.get(r.name);return i===void 0?null:this._findOrUpdateCompatibleStorage(r,i)}_registerStorage(t,r){let n=t.getInstrumentDescriptor(),i=r.get(n.name);if(i===void 0){r.set(n.name,[t]);return}i.push(t)}_findOrUpdateCompatibleStorage(t,r){let n=null;for(let i of r){let s=i.getInstrumentDescriptor();(0,uG.isDescriptorCompatibleWith)(s,t)?(s.description!==t.description&&(t.description.length>s.description.length&&i.updateDescription(t.description),Xb.diag.warn("A view or instrument with the name ",t.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,(0,Ac.getIncompatibilityDetails)(s,t),`The longer description will be used.
To resolve the conflict:`,(0,Ac.getConflictResolutionRecipe)(s,t))),n=i):Xb.diag.warn("A view or instrument with the name ",t.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,(0,Ac.getIncompatibilityDetails)(s,t),`To resolve the conflict:
`,(0,Ac.getConflictResolutionRecipe)(s,t))}return n}};Tc.MetricStorageRegistry=kh});var Qb=d(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.MultiMetricStorage=void 0;var Gh=class{constructor(t){this._backingStorages=t}record(t,r,n,i){this._backingStorages.forEach(s=>{s.record(t,r,n,i)})}};yc.MultiMetricStorage=Gh});var Jb=d(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.BatchObservableResultImpl=ii.ObservableResultImpl=void 0;var ni=x(),Zb=Ss(),cG=pc(),qh=class{constructor(t,r){this._instrumentName=t,this._valueType=r,this._buffer=new Zb.AttributeHashMap}observe(t,r={}){if(typeof t!="number"){ni.diag.warn(`non-number value provided to metric ${this._instrumentName}: ${t}`);return}this._valueType===ni.ValueType.INT&&!Number.isInteger(t)&&(ni.diag.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`),t=Math.trunc(t),!Number.isInteger(t))||this._buffer.set(r,t)}};ii.ObservableResultImpl=qh;var jh=class{constructor(){this._buffer=new Map}observe(t,r,n={}){if(!(0,cG.isObservableInstrument)(t))return;let i=this._buffer.get(t);if(i==null&&(i=new Zb.AttributeHashMap,this._buffer.set(t,i)),typeof r!="number"){ni.diag.warn(`non-number value provided to metric ${t._descriptor.name}: ${r}`);return}t._descriptor.valueType===ni.ValueType.INT&&!Number.isInteger(r)&&(ni.diag.warn(`INT value type cannot accept a floating-point value for ${t._descriptor.name}, ignoring the fractional digits.`),r=Math.trunc(r),!Number.isInteger(r))||i.set(n,r)}};ii.BatchObservableResultImpl=jh});var rO=d(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.ObservableRegistry=void 0;var lG=x(),eO=pc(),tO=Jb(),As=vt(),Hh=class{constructor(){this._callbacks=[],this._batchCallbacks=[]}addCallback(t,r){this._findCallback(t,r)>=0||this._callbacks.push({callback:t,instrument:r})}removeCallback(t,r){let n=this._findCallback(t,r);n<0||this._callbacks.splice(n,1)}addBatchCallback(t,r){let n=new Set(r.filter(eO.isObservableInstrument));if(n.size===0){lG.diag.error("BatchObservableCallback is not associated with valid instruments",r);return}this._findBatchCallback(t,n)>=0||this._batchCallbacks.push({callback:t,instruments:n})}removeBatchCallback(t,r){let n=new Set(r.filter(eO.isObservableInstrument)),i=this._findBatchCallback(t,n);i<0||this._batchCallbacks.splice(i,1)}async observe(t,r){let n=this._observeCallbacks(t,r),i=this._observeBatchCallbacks(t,r);return(await(0,As.PromiseAllSettled)([...n,...i])).filter(As.isPromiseAllSettledRejectionResult).map(a=>a.reason)}_observeCallbacks(t,r){return this._callbacks.map(async({callback:n,instrument:i})=>{let s=new tO.ObservableResultImpl(i._descriptor.name,i._descriptor.valueType),o=Promise.resolve(n(s));r!=null&&(o=(0,As.callWithTimeout)(o,r)),await o,i._metricStorages.forEach(a=>{a.record(s._buffer,t)})})}_observeBatchCallbacks(t,r){return this._batchCallbacks.map(async({callback:n,instruments:i})=>{let s=new tO.BatchObservableResultImpl,o=Promise.resolve(n(s));r!=null&&(o=(0,As.callWithTimeout)(o,r)),await o,i.forEach(a=>{let u=s._buffer.get(a);u!=null&&a._metricStorages.forEach(c=>{c.record(u,t)})})})}_findCallback(t,r){return this._callbacks.findIndex(n=>n.callback===t&&n.instrument===r)}_findBatchCallback(t,r){return this._batchCallbacks.findIndex(n=>n.callback===t&&(0,As.setEquals)(n.instruments,r))}};Rc.ObservableRegistry=Hh});var nO=d(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.SyncMetricStorage=void 0;var dG=Lh(),fG=Dh(),pG=Fh(),$h=class extends dG.MetricStorage{constructor(t,r,n,i){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new fG.DeltaMetricProcessor(r),this._temporalMetricStorage=new pG.TemporalMetricProcessor(r,i)}record(t,r,n,i){r=this._attributesProcessor.process(r,n),this._deltaMetricStorage.record(t,r,n,i)}collect(t,r){let n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,r)}};bc.SyncMetricStorage=$h});var Wh=d(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.FilteringAttributesProcessor=ir.NoopAttributesProcessor=ir.AttributesProcessor=void 0;var Ts=class{static Noop(){return _G}};ir.AttributesProcessor=Ts;var Oc=class extends Ts{process(t,r){return t}};ir.NoopAttributesProcessor=Oc;var Vh=class extends Ts{constructor(t){super(),this._allowedAttributeNames=t}process(t,r){let n={};return Object.keys(t).filter(i=>this._allowedAttributeNames.includes(i)).forEach(i=>n[i]=t[i]),n}};ir.FilteringAttributesProcessor=Vh;var _G=new Oc});var iO=d(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.MeterSharedState=void 0;var hG=Ft(),gG=jb(),mG=vt(),EG=Hb(),SG=zb(),AG=Qb(),TG=rO(),yG=nO(),RG=Wh(),Yh=class{constructor(t,r){this._meterProviderSharedState=t,this._instrumentationScope=r,this.metricStorageRegistry=new SG.MetricStorageRegistry,this.observableRegistry=new TG.ObservableRegistry,this.meter=new gG.Meter(this)}registerMetricStorage(t){let r=this._registerMetricStorage(t,yG.SyncMetricStorage);return r.length===1?r[0]:new AG.MultiMetricStorage(r)}registerAsyncMetricStorage(t){return this._registerMetricStorage(t,EG.AsyncMetricStorage)}async collect(t,r,n){let i=await this.observableRegistry.observe(r,n?.timeoutMillis),s=this.metricStorageRegistry.getStorages(t);if(s.length===0)return null;let o=s.map(a=>a.collect(t,r)).filter(mG.isNotNullish);return o.length===0?{errors:i}:{scopeMetrics:{scope:this._instrumentationScope,metrics:o},errors:i}}_registerMetricStorage(t,r){let i=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(s=>{let o=(0,hG.createInstrumentDescriptorWithView)(s,t),a=this.metricStorageRegistry.findOrUpdateCompatibleStorage(o);if(a!=null)return a;let u=s.aggregation.createAggregator(o),c=new r(o,u,s.attributesProcessor,this._meterProviderSharedState.metricCollectors);return this.metricStorageRegistry.register(c),c});if(i.length===0){let o=this._meterProviderSharedState.selectAggregations(t.type).map(([a,u])=>{let c=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(a,t);if(c!=null)return c;let l=u.createAggregator(t),f=new r(t,l,RG.AttributesProcessor.Noop(),[a]);return this.metricStorageRegistry.registerForCollector(a,f),f});i=i.concat(o)}return i}};vc.MeterSharedState=Yh});var sO=d(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.MeterProviderSharedState=void 0;var bG=vt(),OG=qb(),vG=iO(),Kh=class{constructor(t){this.resource=t,this.viewRegistry=new OG.ViewRegistry,this.metricCollectors=[],this.meterSharedStates=new Map}getMeterSharedState(t){let r=(0,bG.instrumentationScopeId)(t),n=this.meterSharedStates.get(r);return n==null&&(n=new vG.MeterSharedState(this,t),this.meterSharedStates.set(r,n)),n}selectAggregations(t){let r=[];for(let n of this.metricCollectors)r.push([n,n.selectAggregation(t)]);return r}};Pc.MeterProviderSharedState=Kh});var oO=d(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.MetricCollector=void 0;var PG=J(),Xh=class{constructor(t,r){this._sharedState=t,this._metricReader=r}async collect(t){let r=(0,PG.millisToHrTime)(Date.now()),n=[],i=[],s=Array.from(this._sharedState.meterSharedStates.values()).map(async o=>{let a=await o.collect(this,r,t);a?.scopeMetrics!=null&&n.push(a.scopeMetrics),a?.errors!=null&&i.push(...a.errors)});return await Promise.all(s),{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:i}}async forceFlush(t){await this._metricReader.forceFlush(t)}async shutdown(t){await this._metricReader.shutdown(t)}selectAggregationTemporality(t){return this._metricReader.selectAggregationTemporality(t)}selectAggregation(t){return this._metricReader.selectAggregation(t)}};Cc.MetricCollector=Xh});var uO=d(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.MeterProvider=void 0;var Ic=x(),aO=Cn(),CG=sO(),IG=oO(),zh=class{constructor(t){var r;this._shutdown=!1;let n=aO.Resource.default().merge((r=t?.resource)!==null&&r!==void 0?r:aO.Resource.empty());if(this._sharedState=new CG.MeterProviderSharedState(n),t?.views!=null&&t.views.length>0)for(let i of t.views)this._sharedState.viewRegistry.addView(i);if(t?.readers!=null&&t.readers.length>0)for(let i of t.readers)this.addMetricReader(i)}getMeter(t,r="",n={}){return this._shutdown?(Ic.diag.warn("A shutdown MeterProvider cannot provide a Meter"),(0,Ic.createNoopMeter)()):this._sharedState.getMeterSharedState({name:t,version:r,schemaUrl:n.schemaUrl}).meter}addMetricReader(t){let r=new IG.MetricCollector(this._sharedState,t);t.setMetricProducer(r),this._sharedState.metricCollectors.push(r)}async shutdown(t){if(this._shutdown){Ic.diag.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map(r=>r.shutdown(t)))}async forceFlush(t){if(this._shutdown){Ic.diag.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map(r=>r.forceFlush(t)))}};Nc.MeterProvider=zh});var Lc=d(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.ExactPredicate=si.PatternPredicate=void 0;var NG=/[\^$\\.+?()[\]{}|]/g,Qh=class e{constructor(t){t==="*"?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(e.escapePattern(t)))}match(t){return this._matchAll?!0:this._regexp.test(t)}static escapePattern(t){return`^${t.replace(NG,"\\$&").replace("*",".*")}$`}static hasWildcard(t){return t.includes("*")}};si.PatternPredicate=Qh;var Zh=class{constructor(t){this._matchAll=t===void 0,this._pattern=t}match(t){return!!(this._matchAll||t===this._pattern)}};si.ExactPredicate=Zh});var lO=d(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.InstrumentSelector=void 0;var cO=Lc(),Jh=class{constructor(t){var r;this._nameFilter=new cO.PatternPredicate((r=t?.name)!==null&&r!==void 0?r:"*"),this._type=t?.type,this._unitFilter=new cO.ExactPredicate(t?.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}};xc.InstrumentSelector=Jh});var dO=d(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.MeterSelector=void 0;var eg=Lc(),tg=class{constructor(t){this._nameFilter=new eg.ExactPredicate(t?.name),this._versionFilter=new eg.ExactPredicate(t?.version),this._schemaUrlFilter=new eg.ExactPredicate(t?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}};wc.MeterSelector=tg});var pO=d(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.View=void 0;var LG=Lc(),fO=Wh(),xG=lO(),wG=dO(),MG=sc();function DG(e){return e.instrumentName==null&&e.instrumentType==null&&e.instrumentUnit==null&&e.meterName==null&&e.meterVersion==null&&e.meterSchemaUrl==null}var rg=class{constructor(t){var r;if(DG(t))throw new Error("Cannot create view with no selector arguments supplied");if(t.name!=null&&(t?.instrumentName==null||LG.PatternPredicate.hasWildcard(t.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");t.attributeKeys!=null?this.attributesProcessor=new fO.FilteringAttributesProcessor(t.attributeKeys):this.attributesProcessor=fO.AttributesProcessor.Noop(),this.name=t.name,this.description=t.description,this.aggregation=(r=t.aggregation)!==null&&r!==void 0?r:MG.Aggregation.Default(),this.instrumentSelector=new xG.InstrumentSelector({name:t.instrumentName,type:t.instrumentType,unit:t.instrumentUnit}),this.meterSelector=new wG.MeterSelector({name:t.meterName,version:t.meterVersion,schemaUrl:t.meterSchemaUrl})}};Mc.View=rg});var _O=d(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.TimeoutError=j.View=j.Aggregation=j.SumAggregation=j.LastValueAggregation=j.HistogramAggregation=j.DropAggregation=j.ExponentialHistogramAggregation=j.ExplicitBucketHistogramAggregation=j.DefaultAggregation=j.MeterProvider=j.InstrumentType=j.ConsoleMetricExporter=j.InMemoryMetricExporter=j.PeriodicExportingMetricReader=j.MetricReader=j.DataPointType=j.AggregationTemporality=void 0;var BG=Vu();Object.defineProperty(j,"AggregationTemporality",{enumerable:!0,get:function(){return BG.AggregationTemporality}});var FG=kn();Object.defineProperty(j,"DataPointType",{enumerable:!0,get:function(){return FG.DataPointType}});var UG=Eh();Object.defineProperty(j,"MetricReader",{enumerable:!0,get:function(){return UG.MetricReader}});var kG=Bb();Object.defineProperty(j,"PeriodicExportingMetricReader",{enumerable:!0,get:function(){return kG.PeriodicExportingMetricReader}});var GG=Ub();Object.defineProperty(j,"InMemoryMetricExporter",{enumerable:!0,get:function(){return GG.InMemoryMetricExporter}});var qG=Gb();Object.defineProperty(j,"ConsoleMetricExporter",{enumerable:!0,get:function(){return qG.ConsoleMetricExporter}});var jG=Ft();Object.defineProperty(j,"InstrumentType",{enumerable:!0,get:function(){return jG.InstrumentType}});var HG=uO();Object.defineProperty(j,"MeterProvider",{enumerable:!0,get:function(){return HG.MeterProvider}});var sr=sc();Object.defineProperty(j,"DefaultAggregation",{enumerable:!0,get:function(){return sr.DefaultAggregation}});Object.defineProperty(j,"ExplicitBucketHistogramAggregation",{enumerable:!0,get:function(){return sr.ExplicitBucketHistogramAggregation}});Object.defineProperty(j,"ExponentialHistogramAggregation",{enumerable:!0,get:function(){return sr.ExponentialHistogramAggregation}});Object.defineProperty(j,"DropAggregation",{enumerable:!0,get:function(){return sr.DropAggregation}});Object.defineProperty(j,"HistogramAggregation",{enumerable:!0,get:function(){return sr.HistogramAggregation}});Object.defineProperty(j,"LastValueAggregation",{enumerable:!0,get:function(){return sr.LastValueAggregation}});Object.defineProperty(j,"SumAggregation",{enumerable:!0,get:function(){return sr.SumAggregation}});Object.defineProperty(j,"Aggregation",{enumerable:!0,get:function(){return sr.Aggregation}});var $G=pO();Object.defineProperty(j,"View",{enumerable:!0,get:function(){return $G.View}});var VG=vt();Object.defineProperty(j,"TimeoutError",{enumerable:!0,get:function(){return VG.TimeoutError}})});var SO=d(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.toMetric=or.toScopeMetrics=or.toResourceMetrics=void 0;var hO=x(),oi=_O(),Dc=ls(),WG=us();function YG(e,t){let r=(0,WG.getOtlpEncoder)(t);return{resource:{attributes:(0,Dc.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:mO(e.scopeMetrics,r)}}or.toResourceMetrics=YG;function mO(e,t){return Array.from(e.map(r=>({scope:{name:r.scope.name,version:r.scope.version},metrics:r.metrics.map(n=>EO(n,t)),schemaUrl:r.scope.schemaUrl})))}or.toScopeMetrics=mO;function EO(e,t){let r={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},n=QG(e.aggregationTemporality);switch(e.dataPointType){case oi.DataPointType.SUM:r.sum={aggregationTemporality:n,isMonotonic:e.isMonotonic,dataPoints:gO(e,t)};break;case oi.DataPointType.GAUGE:r.gauge={dataPoints:gO(e,t)};break;case oi.DataPointType.HISTOGRAM:r.histogram={aggregationTemporality:n,dataPoints:XG(e,t)};break;case oi.DataPointType.EXPONENTIAL_HISTOGRAM:r.exponentialHistogram={aggregationTemporality:n,dataPoints:zG(e,t)};break}return r}or.toMetric=EO;function KG(e,t,r){let n={attributes:(0,Dc.toAttributes)(e.attributes),startTimeUnixNano:r.encodeHrTime(e.startTime),timeUnixNano:r.encodeHrTime(e.endTime)};switch(t){case hO.ValueType.INT:n.asInt=e.value;break;case hO.ValueType.DOUBLE:n.asDouble=e.value;break}return n}function gO(e,t){return e.dataPoints.map(r=>KG(r,e.descriptor.valueType,t))}function XG(e,t){return e.dataPoints.map(r=>{let n=r.value;return{attributes:(0,Dc.toAttributes)(r.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)}})}function zG(e,t){return e.dataPoints.map(r=>{let n=r.value;return{attributes:(0,Dc.toAttributes)(r.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)}})}function QG(e){switch(e){case oi.AggregationTemporality.DELTA:return 1;case oi.AggregationTemporality.CUMULATIVE:return 2}}});var AO=d(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.createExportMetricsServiceRequest=void 0;var ZG=SO();function JG(e,t){return{resourceMetrics:e.map(r=>(0,ZG.toResourceMetrics)(r,t))}}Bc.createExportMetricsServiceRequest=JG});var yO=d(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.toLogAttributes=ai.createExportLogsServiceRequest=void 0;var eq=us(),ng=ls();function tq(e,t){let r=(0,eq.getOtlpEncoder)(t);return{resourceLogs:nq(e,r)}}ai.createExportLogsServiceRequest=tq;function rq(e){let t=new Map;for(let r of e){let{resource:n,instrumentationScope:{name:i,version:s="",schemaUrl:o=""}}=r,a=t.get(n);a||(a=new Map,t.set(n,a));let u=`${i}@${s}:${o}`,c=a.get(u);c||(c=[],a.set(u,c)),c.push(r)}return t}function nq(e,t){let r=rq(e);return Array.from(r,([n,i])=>({resource:{attributes:(0,ng.toAttributes)(n.attributes),droppedAttributesCount:0},scopeLogs:Array.from(i,([,s])=>{let{instrumentationScope:{name:o,version:a,schemaUrl:u}}=s[0];return{scope:{name:o,version:a},logRecords:s.map(c=>iq(c,t)),schemaUrl:u}}),schemaUrl:void 0}))}function iq(e,t){var r,n,i;return{timeUnixNano:t.encodeHrTime(e.hrTime),observedTimeUnixNano:t.encodeHrTime(e.hrTimeObserved),severityNumber:e.severityNumber,severityText:e.severityText,body:(0,ng.toAnyValue)(e.body),attributes:TO(e.attributes),droppedAttributesCount:e.droppedAttributesCount,flags:(r=e.spanContext)===null||r===void 0?void 0:r.traceFlags,traceId:t.encodeOptionalSpanContext((n=e.spanContext)===null||n===void 0?void 0:n.traceId),spanId:t.encodeOptionalSpanContext((i=e.spanContext)===null||i===void 0?void 0:i.spanId)}}function TO(e){return Object.keys(e).map(t=>(0,ng.toKeyValue)(t,e[t]))}ai.toLogAttributes=TO});var RO=d(Te=>{"use strict";var sq=Te&&Te.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ui=Te&&Te.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sq(t,e,r)};Object.defineProperty(Te,"__esModule",{value:!0});Te.createExportLogsServiceRequest=Te.createExportMetricsServiceRequest=Te.createExportTraceServiceRequest=void 0;ui(YR(),Te);ui(us(),Te);ui(JR(),Te);ui(tb(),Te);ui(rb(),Te);ui(ib(),Te);var oq=ub();Object.defineProperty(Te,"createExportTraceServiceRequest",{enumerable:!0,get:function(){return oq.createExportTraceServiceRequest}});var aq=AO();Object.defineProperty(Te,"createExportMetricsServiceRequest",{enumerable:!0,get:function(){return aq.createExportMetricsServiceRequest}});var uq=yO();Object.defineProperty(Te,"createExportLogsServiceRequest",{enumerable:!0,get:function(){return uq.createExportLogsServiceRequest}})});var bO=d(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.VERSION=void 0;Fc.VERSION="0.48.0"});var PO=d(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.OTLPTraceExporter=void 0;var ci=J(),cq=X_(),OO=X_(),lq=RO(),dq=bO(),vO="v1/traces",fq=`http://localhost:4318/${vO}`,pq={"User-Agent":`OTel-OTLP-Exporter-JavaScript/${dq.VERSION}`},ig=class extends cq.OTLPExporterNodeBase{constructor(t={}){super(t),this.headers=Object.assign(Object.assign(Object.assign(Object.assign({},this.headers),pq),ci.baggageUtils.parseKeyPairsIntoRecord((0,ci.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),t.headers)}convert(t){return(0,lq.createExportTraceServiceRequest)(t,{useHex:!0,useLongBits:!1})}getDefaultUrl(t){return typeof t.url=="string"?t.url:(0,ci.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,OO.appendRootPathToUrlIfNeeded)((0,ci.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,ci.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,OO.appendResourcePathToUrl)((0,ci.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,vO):fq}};Uc.OTLPTraceExporter=ig});var CO=d(Gr=>{"use strict";var _q=Gr&&Gr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),hq=Gr&&Gr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&_q(t,e,r)};Object.defineProperty(Gr,"__esModule",{value:!0});hq(PO(),Gr)});var IO=d(qr=>{"use strict";var gq=qr&&qr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mq=qr&&qr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gq(t,e,r)};Object.defineProperty(qr,"__esModule",{value:!0});mq(CO(),qr)});var NO=d(jr=>{"use strict";var Eq=jr&&jr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Sq=jr&&jr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Eq(t,e,r)};Object.defineProperty(jr,"__esModule",{value:!0});Sq(IO(),jr)});var sv=d((Vr,iv)=>{"use strict";var pg=v("crypto");Vr=iv.exports=Ps;function Ps(e,t){return t=rv(e,t),Hq(e,t)}Vr.sha1=function(e){return Ps(e)};Vr.keys=function(e){return Ps(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})};Vr.MD5=function(e){return Ps(e,{algorithm:"md5",encoding:"hex"})};Vr.keysMD5=function(e){return Ps(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var _i=pg.getHashes?pg.getHashes().slice():["sha1","md5"];_i.push("passthrough");var ev=["buffer","hex","binary","base64"];function rv(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=t.ignoreUnknown===!0,r.respectType=t.respectType!==!1,r.respectFunctionNames=t.respectFunctionNames!==!1,r.respectFunctionProperties=t.respectFunctionProperties!==!1,r.unorderedArrays=t.unorderedArrays===!0,r.unorderedSets=t.unorderedSets!==!1,r.unorderedObjects=t.unorderedObjects!==!1,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,typeof e>"u")throw new Error("Object argument required.");for(var n=0;n<_i.length;++n)_i[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=_i[n]);if(_i.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+_i.join(", "));if(ev.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+ev.join(", "));return r}function tv(e){if(typeof e!="function")return!1;var t=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i;return t.exec(Function.prototype.toString.call(e))!=null}function Hq(e,t){var r;t.algorithm!=="passthrough"?r=pg.createHash(t.algorithm):r=new nv,typeof r.write>"u"&&(r.write=r.update,r.end=r.update);var n=_g(t,r);if(n.dispatch(e),r.update||r.end(""),r.digest)return r.digest(t.encoding==="buffer"?void 0:t.encoding);var i=r.read();return t.encoding==="buffer"?i:i.toString(t.encoding)}Vr.writeToStream=function(e,t,r){return typeof r>"u"&&(r=t,t={}),t=rv(e,t),_g(t,r).dispatch(e)};function _g(e,t,r){r=r||[];var n=function(i){return t.update?t.update(i,"utf8"):t.write(i,"utf8")};return{dispatch:function(i){e.replacer&&(i=e.replacer(i));var s=typeof i;return i===null&&(s="null"),this["_"+s](i)},_object:function(i){var s=/\[object (.*)\]/i,o=Object.prototype.toString.call(i),a=s.exec(o);a?a=a[1]:a="unknown:["+o+"]",a=a.toLowerCase();var u=null;if((u=r.indexOf(i))>=0)return this.dispatch("[CIRCULAR:"+u+"]");if(r.push(i),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(i))return n("buffer:"),n(i);if(a!=="object"&&a!=="function"&&a!=="asyncfunction")if(this["_"+a])this["_"+a](i);else{if(e.ignoreUnknown)return n("["+a+"]");throw new Error('Unknown object type "'+a+'"')}else{var c=Object.keys(i);e.unorderedObjects&&(c=c.sort()),e.respectType!==!1&&!tv(i)&&c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter(function(f){return!e.excludeKeys(f)})),n("object:"+c.length+":");var l=this;return c.forEach(function(f){l.dispatch(f),n(":"),e.excludeValues||l.dispatch(i[f]),n(",")})}},_array:function(i,s){s=typeof s<"u"?s:e.unorderedArrays!==!1;var o=this;if(n("array:"+i.length+":"),!s||i.length<=1)return i.forEach(function(c){return o.dispatch(c)});var a=[],u=i.map(function(c){var l=new nv,f=r.slice(),p=_g(e,l,f);return p.dispatch(c),a=a.concat(f.slice(r.length)),l.read().toString()});return r=r.concat(a),u.sort(),this._array(u,!1)},_date:function(i){return n("date:"+i.toJSON())},_symbol:function(i){return n("symbol:"+i.toString())},_error:function(i){return n("error:"+i.toString())},_boolean:function(i){return n("bool:"+i.toString())},_string:function(i){n("string:"+i.length+":"),n(i.toString())},_function:function(i){n("fn:"),tv(i)?this.dispatch("[native]"):this.dispatch(i.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),e.respectFunctionProperties&&this._object(i)},_number:function(i){return n("number:"+i.toString())},_xml:function(i){return n("xml:"+i.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(i){return n("regex:"+i.toString())},_uint8array:function(i){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return n("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return n("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return n("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return n("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return n("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return n("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return n("url:"+i.toString(),"utf8")},_map:function(i){n("map:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_set:function(i){n("set:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_file:function(i){return n("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return n("domwindow")},_bigint:function(i){return n("bigint:"+i.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function nv(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}});var Zq={};bv(Zq,{default:()=>Qq});var Ls=v("clipanion");var $c=v("@yarnpkg/cli"),Fe=v("@yarnpkg/core"),fe=v("clipanion"),Eg=K(v("path")),Cs=K(ul()),gv=v("os");var bi=v("@yarnpkg/fslib"),H=K(v("typanion"));function jm(e){return typeof e>"u"||e===null}function GP(e){return typeof e=="object"&&e!==null}function qP(e){return Array.isArray(e)?e:jm(e)?[]:[e]}function jP(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function HP(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function $P(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var VP=jm,WP=GP,YP=qP,KP=HP,XP=$P,zP=jP,me={isNothing:VP,isObject:WP,toArray:YP,repeat:KP,isNegativeZero:XP,extend:zP};function Hm(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Ai(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Hm(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ai.prototype=Object.create(Error.prototype);Ai.prototype.constructor=Ai;Ai.prototype.toString=function(t){return this.name+": "+Hm(this,t)};var ke=Ai;function cl(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"\u2192")+o,pos:n-t+s.length}}function ll(e,t){return me.repeat(" ",t-e.length)+e}function QP(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",u,c,l=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+l+3);for(u=1;u<=t.linesBefore&&!(o-u<0);u++)c=cl(e.buffer,n[o-u],i[o-u],e.position-(n[o]-n[o-u]),f),a=me.repeat(" ",t.indent)+ll((e.line-u+1).toString(),l)+" | "+c.str+`
`+a;for(c=cl(e.buffer,n[o],i[o],e.position,f),a+=me.repeat(" ",t.indent)+ll((e.line+1).toString(),l)+" | "+c.str+`
`,a+=me.repeat("-",t.indent+l+3+c.pos)+`^
`,u=1;u<=t.linesAfter&&!(o+u>=i.length);u++)c=cl(e.buffer,n[o+u],i[o+u],e.position-(n[o]-n[o+u]),f),a+=me.repeat(" ",t.indent)+ll((e.line+u+1).toString(),l)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var ZP=QP,JP=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],eC=["scalar","sequence","mapping"];function tC(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function rC(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(JP.indexOf(r)===-1)throw new ke('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=tC(t.styleAliases||null),eC.indexOf(this.kind)===-1)throw new ke('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var be=rC;function Pm(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function nC(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function fl(e){return this.extend(e)}fl.prototype.extend=function(t){var r=[],n=[];if(t instanceof be)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new ke("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof be))throw new ke("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ke("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ke("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof be))throw new ke("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(fl.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Pm(i,"implicit"),i.compiledExplicit=Pm(i,"explicit"),i.compiledTypeMap=nC(i.compiledImplicit,i.compiledExplicit),i};var iC=fl,sC=new be("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),oC=new be("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),aC=new be("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),uC=new iC({explicit:[sC,oC,aC]});function cC(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function lC(){return null}function dC(e){return e===null}var fC=new be("tag:yaml.org,2002:null",{kind:"scalar",resolve:cC,construct:lC,predicate:dC,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function pC(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function _C(e){return e==="true"||e==="True"||e==="TRUE"}function hC(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var gC=new be("tag:yaml.org,2002:bool",{kind:"scalar",resolve:pC,construct:_C,predicate:hC,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function mC(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function EC(e){return 48<=e&&e<=55}function SC(e){return 48<=e&&e<=57}function AC(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!mC(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!EC(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!SC(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function TC(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function yC(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!me.isNegativeZero(e)}var RC=new be("tag:yaml.org,2002:int",{kind:"scalar",resolve:AC,construct:TC,predicate:yC,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),bC=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function OC(e){return!(e===null||!bC.test(e)||e[e.length-1]==="_")}function vC(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var PC=/^[-+]?[0-9]+e/;function CC(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(me.isNegativeZero(e))return"-0.0";return r=e.toString(10),PC.test(r)?r.replace("e",".e"):r}function IC(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||me.isNegativeZero(e))}var NC=new be("tag:yaml.org,2002:float",{kind:"scalar",resolve:OC,construct:vC,predicate:IC,represent:CC,defaultStyle:"lowercase"}),$m=uC.extend({implicit:[fC,gC,RC,NC]}),LC=$m,Vm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Wm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function xC(e){return e===null?!1:Vm.exec(e)!==null||Wm.exec(e)!==null}function wC(e){var t,r,n,i,s,o,a,u=0,c=null,l,f,p;if(t=Vm.exec(e),t===null&&(t=Wm.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(l=+t[10],f=+(t[11]||0),c=(l*60+f)*6e4,t[9]==="-"&&(c=-c)),p=new Date(Date.UTC(r,n,i,s,o,a,u)),c&&p.setTime(p.getTime()-c),p}function MC(e){return e.toISOString()}var DC=new be("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:xC,construct:wC,instanceOf:Date,represent:MC});function BC(e){return e==="<<"||e===null}var FC=new be("tag:yaml.org,2002:merge",{kind:"scalar",resolve:BC}),ml=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function UC(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=ml;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function kC(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=ml,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function GC(e){var t="",r=0,n,i,s=e.length,o=ml;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function qC(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var jC=new be("tag:yaml.org,2002:binary",{kind:"scalar",resolve:UC,construct:kC,predicate:qC,represent:GC}),HC=Object.prototype.hasOwnProperty,$C=Object.prototype.toString;function VC(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,$C.call(i)!=="[object Object]")return!1;for(s in i)if(HC.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function WC(e){return e!==null?e:[]}var YC=new be("tag:yaml.org,2002:omap",{kind:"sequence",resolve:VC,construct:WC}),KC=Object.prototype.toString;function XC(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],KC.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function zC(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var QC=new be("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:XC,construct:zC}),ZC=Object.prototype.hasOwnProperty;function JC(e){if(e===null)return!0;var t,r=e;for(t in r)if(ZC.call(r,t)&&r[t]!==null)return!1;return!0}function eI(e){return e!==null?e:{}}var tI=new be("tag:yaml.org,2002:set",{kind:"mapping",resolve:JC,construct:eI}),Ym=LC.extend({implicit:[DC,FC],explicit:[jC,YC,QC,tI]}),qt=Object.prototype.hasOwnProperty,$s=1,Km=2,Xm=3,Vs=4,dl=1,rI=2,Cm=3,nI=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,iI=/[\x85\u2028\u2029]/,sI=/[,\[\]\{\}]/,zm=/^(?:!|!!|![a-z\-]+!)$/i,Qm=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Im(e){return Object.prototype.toString.call(e)}function mt(e){return e===10||e===13}function dr(e){return e===9||e===32}function Ge(e){return e===9||e===32||e===10||e===13}function Qr(e){return e===44||e===91||e===93||e===123||e===125}function oI(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function aI(e){return e===120?2:e===117?4:e===85?8:0}function uI(e){return 48<=e&&e<=57?e-48:-1}function Nm(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function cI(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Zm=new Array(256),Jm=new Array(256);for(lr=0;lr<256;lr++)Zm[lr]=Nm(lr)?1:0,Jm[lr]=Nm(lr);var lr;function lI(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Ym,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function eE(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=ZP(r),new ke(t,r)}function L(e,t){throw eE(e,t)}function Ws(e,t){e.onWarning&&e.onWarning.call(null,eE(e,t))}var Lm={YAML:function(t,r,n){var i,s,o;t.version!==null&&L(t,"duplication of %YAML directive"),n.length!==1&&L(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&L(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&L(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Ws(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&L(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],zm.test(i)||L(t,"ill-formed tag handle (first argument) of the TAG directive"),qt.call(t.tagMap,i)&&L(t,'there is a previously declared suffix for "'+i+'" tag handle'),Qm.test(s)||L(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{L(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function Gt(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||L(e,"expected valid JSON character");else nI.test(a)&&L(e,"the stream contains non-printable characters");e.result+=a}}function xm(e,t,r,n){var i,s,o,a;for(me.isObject(r)||L(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],qt.call(t,s)||(t[s]=r[s],n[s]=!0)}function Zr(e,t,r,n,i,s,o,a,u){var c,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,l=i.length;c<l;c+=1)Array.isArray(i[c])&&L(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Im(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Im(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,l=s.length;c<l;c+=1)xm(e,t,s[c],r);else xm(e,t,s,r);else!e.json&&!qt.call(r,i)&&qt.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,L(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}function El(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):L(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function pe(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;dr(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(mt(i))for(El(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Ws(e,"deficient indentation"),n}function Xs(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Ge(r)))}function Sl(e,t){t===1?e.result+=" ":t>1&&(e.result+=me.repeat(`
`,t-1))}function dI(e,t,r){var n,i,s,o,a,u,c,l,f=e.kind,p=e.result,h;if(h=e.input.charCodeAt(e.position),Ge(h)||Qr(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),Ge(i)||r&&Qr(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),Ge(i)||r&&Qr(i))break}else if(h===35){if(n=e.input.charCodeAt(e.position-1),Ge(n))break}else{if(e.position===e.lineStart&&Xs(e)||r&&Qr(h))break;if(mt(h))if(u=e.line,c=e.lineStart,l=e.lineIndent,pe(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=u,e.lineStart=c,e.lineIndent=l;break}}a&&(Gt(e,s,o,!1),Sl(e,e.line-u),s=o=e.position,a=!1),dr(h)||(o=e.position+1),h=e.input.charCodeAt(++e.position)}return Gt(e,s,o,!1),e.result?!0:(e.kind=f,e.result=p,!1)}function fI(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Gt(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else mt(r)?(Gt(e,n,i,!0),Sl(e,pe(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Xs(e)?L(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);L(e,"unexpected end of the stream within a single quoted scalar")}function pI(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Gt(e,r,e.position,!0),e.position++,!0;if(a===92){if(Gt(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),mt(a))pe(e,!1,t);else if(a<256&&Zm[a])e.result+=Jm[a],e.position++;else if((o=aI(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=oI(a))>=0?s=(s<<4)+o:L(e,"expected hexadecimal character");e.result+=cI(s),e.position++}else L(e,"unknown escape sequence");r=n=e.position}else mt(a)?(Gt(e,r,n,!0),Sl(e,pe(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Xs(e)?L(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}L(e,"unexpected end of the stream within a double quoted scalar")}function _I(e,t){var r=!0,n,i,s,o=e.tag,a,u=e.anchor,c,l,f,p,h,_=Object.create(null),g,T,A,y;if(y=e.input.charCodeAt(e.position),y===91)l=93,h=!1,a=[];else if(y===123)l=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),y=e.input.charCodeAt(++e.position);y!==0;){if(pe(e,!0,t),y=e.input.charCodeAt(e.position),y===l)return e.position++,e.tag=o,e.anchor=u,e.kind=h?"mapping":"sequence",e.result=a,!0;r?y===44&&L(e,"expected the node content, but found ','"):L(e,"missed comma between flow collection entries"),T=g=A=null,f=p=!1,y===63&&(c=e.input.charCodeAt(e.position+1),Ge(c)&&(f=p=!0,e.position++,pe(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,Jr(e,t,$s,!1,!0),T=e.tag,g=e.result,pe(e,!0,t),y=e.input.charCodeAt(e.position),(p||e.line===n)&&y===58&&(f=!0,y=e.input.charCodeAt(++e.position),pe(e,!0,t),Jr(e,t,$s,!1,!0),A=e.result),h?Zr(e,a,_,T,g,A,n,i,s):f?a.push(Zr(e,null,_,T,g,A,n,i,s)):a.push(g),pe(e,!0,t),y=e.input.charCodeAt(e.position),y===44?(r=!0,y=e.input.charCodeAt(++e.position)):r=!1}L(e,"unexpected end of the stream within a flow collection")}function hI(e,t){var r,n,i=dl,s=!1,o=!1,a=t,u=0,c=!1,l,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)dl===i?i=f===43?Cm:rI:L(e,"repeat of a chomping mode identifier");else if((l=uI(f))>=0)l===0?L(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?L(e,"repeat of an indentation width identifier"):(a=t+l-1,o=!0);else break;if(dr(f)){do f=e.input.charCodeAt(++e.position);while(dr(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!mt(f)&&f!==0)}for(;f!==0;){for(El(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),mt(f)){u++;continue}if(e.lineIndent<a){i===Cm?e.result+=me.repeat(`
`,s?1+u:u):i===dl&&s&&(e.result+=`
`);break}for(n?dr(f)?(c=!0,e.result+=me.repeat(`
`,s?1+u:u)):c?(c=!1,e.result+=me.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=me.repeat(`
`,u):e.result+=me.repeat(`
`,s?1+u:u),s=!0,o=!0,u=0,r=e.position;!mt(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Gt(e,r,e.position,!1)}return!0}function wm(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),!(u!==45||(o=e.input.charCodeAt(e.position+1),!Ge(o))));){if(a=!0,e.position++,pe(e,!0,-1)&&e.lineIndent<=t){s.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,Jr(e,t,Xm,!1,!0),s.push(e.result),pe(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&u!==0)L(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function gI(e,t,r){var n,i,s,o,a,u,c=e.tag,l=e.anchor,f={},p=Object.create(null),h=null,_=null,g=null,T=!1,A=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),y=e.input.charCodeAt(e.position);y!==0;){if(!T&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(y===63||y===58)&&Ge(n))y===63?(T&&(Zr(e,f,p,h,_,null,o,a,u),h=_=g=null),A=!0,T=!0,i=!0):T?(T=!1,i=!0):L(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=n;else{if(o=e.line,a=e.lineStart,u=e.position,!Jr(e,r,Km,!1,!0))break;if(e.line===s){for(y=e.input.charCodeAt(e.position);dr(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),Ge(y)||L(e,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(Zr(e,f,p,h,_,null,o,a,u),h=_=g=null),A=!0,T=!1,i=!1,h=e.tag,_=e.result;else if(A)L(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=l,!0}else if(A)L(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=l,!0}if((e.line===s||e.lineIndent>t)&&(T&&(o=e.line,a=e.lineStart,u=e.position),Jr(e,t,Vs,!0,i)&&(T?_=e.result:g=e.result),T||(Zr(e,f,p,h,_,g,o,a,u),h=_=g=null),pe(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&y!==0)L(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return T&&Zr(e,f,p,h,_,null,o,a,u),A&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=f),A}function mI(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&L(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):L(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Ge(o);)o===33&&(n?L(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),zm.test(i)||L(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),sI.test(s)&&L(e,"tag suffix cannot contain flow indicator characters")}s&&!Qm.test(s)&&L(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{L(e,"tag name is malformed: "+s)}return r?e.tag=s:qt.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:L(e,'undeclared tag handle "'+i+'"'),!0}function EI(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&L(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Ge(r)&&!Qr(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function SI(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Ge(n)&&!Qr(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),qt.call(e.anchorMap,r)||L(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],pe(e,!0,-1),!0}function Jr(e,t,r,n,i){var s,o,a,u=1,c=!1,l=!1,f,p,h,_,g,T;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=Vs===r||Xm===r,n&&pe(e,!0,-1)&&(c=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;mI(e)||EI(e);)pe(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||Vs===r)&&($s===r||Km===r?g=t:g=t+1,T=e.position-e.lineStart,u===1?a&&(wm(e,T)||gI(e,T,g))||_I(e,g)?l=!0:(o&&hI(e,g)||fI(e,g)||pI(e,g)?l=!0:SI(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&L(e,"alias node should not have any properties")):dI(e,g,$s===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(l=a&&wm(e,T))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&L(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,p=e.implicitTypes.length;f<p;f+=1)if(_=e.implicitTypes[f],_.resolve(e.result)){e.result=_.construct(e.result),e.tag=_.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(qt.call(e.typeMap[e.kind||"fallback"],e.tag))_=e.typeMap[e.kind||"fallback"][e.tag];else for(_=null,h=e.typeMap.multi[e.kind||"fallback"],f=0,p=h.length;f<p;f+=1)if(e.tag.slice(0,h[f].tag.length)===h[f].tag){_=h[f];break}_||L(e,"unknown tag !<"+e.tag+">"),e.result!==null&&_.kind!==e.kind&&L(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+_.kind+'", not "'+e.kind+'"'),_.resolve(e.result,e.tag)?(e.result=_.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):L(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function AI(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(pe(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!Ge(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&L(e,"directive name must not be less than one character in length");o!==0;){for(;dr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!mt(o));break}if(mt(o))break;for(r=e.position;o!==0&&!Ge(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&El(e),qt.call(Lm,n)?Lm[n](e,n,i):Ws(e,'unknown document directive "'+n+'"')}if(pe(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,pe(e,!0,-1)):s&&L(e,"directives end mark is expected"),Jr(e,e.lineIndent-1,Vs,!1,!0),pe(e,!0,-1),e.checkLineBreaks&&iI.test(e.input.slice(t,e.position))&&Ws(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Xs(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,pe(e,!0,-1));return}if(e.position<e.length-1)L(e,"end of the stream or a document separator is expected");else return}function tE(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new lI(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,L(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)AI(r);return r.documents}function TI(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=tE(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function yI(e,t){var r=tE(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new ke("expected a single document in the stream, but found more")}}var RI=TI,bI=yI,rE={loadAll:RI,load:bI},nE=Object.prototype.toString,iE=Object.prototype.hasOwnProperty,Al=65279,OI=9,Ti=10,vI=13,PI=32,CI=33,II=34,pl=35,NI=37,LI=38,xI=39,wI=42,sE=44,MI=45,Ys=58,DI=61,BI=62,FI=63,UI=64,oE=91,aE=93,kI=96,uE=123,GI=124,cE=125,Oe={};Oe[0]="\\0";Oe[7]="\\a";Oe[8]="\\b";Oe[9]="\\t";Oe[10]="\\n";Oe[11]="\\v";Oe[12]="\\f";Oe[13]="\\r";Oe[27]="\\e";Oe[34]='\\"';Oe[92]="\\\\";Oe[133]="\\N";Oe[160]="\\_";Oe[8232]="\\L";Oe[8233]="\\P";var qI=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],jI=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function HI(e,t){var r,n,i,s,o,a,u;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),u=e.compiledTypeMap.fallback[o],u&&iE.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[o]=a;return r}function $I(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new ke("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+me.repeat("0",n-t.length)+t}var VI=1,yi=2;function WI(e){this.schema=e.schema||Ym,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=me.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=HI(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?yi:VI,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Mm(e,t){for(var r=me.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function _l(e,t){return`
`+me.repeat(" ",e.indent*t)}function YI(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Ks(e){return e===PI||e===OI}function Ri(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Al||65536<=e&&e<=1114111}function Dm(e){return Ri(e)&&e!==Al&&e!==vI&&e!==Ti}function Bm(e,t,r){var n=Dm(e),i=n&&!Ks(e);return(r?n:n&&e!==sE&&e!==oE&&e!==aE&&e!==uE&&e!==cE)&&e!==pl&&!(t===Ys&&!i)||Dm(t)&&!Ks(t)&&e===pl||t===Ys&&i}function KI(e){return Ri(e)&&e!==Al&&!Ks(e)&&e!==MI&&e!==FI&&e!==Ys&&e!==sE&&e!==oE&&e!==aE&&e!==uE&&e!==cE&&e!==pl&&e!==LI&&e!==wI&&e!==CI&&e!==GI&&e!==DI&&e!==BI&&e!==xI&&e!==II&&e!==NI&&e!==UI&&e!==kI}function XI(e){return!Ks(e)&&e!==Ys}function Si(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function lE(e){var t=/^\n* /;return t.test(e)}var dE=1,hl=2,fE=3,pE=4,zr=5;function zI(e,t,r,n,i,s,o,a){var u,c=0,l=null,f=!1,p=!1,h=n!==-1,_=-1,g=KI(Si(e,0))&&XI(Si(e,e.length-1));if(t||o)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=Si(e,u),!Ri(c))return zr;g=g&&Bm(c,l,a),l=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=Si(e,u),c===Ti)f=!0,h&&(p=p||u-_-1>n&&e[_+1]!==" ",_=u);else if(!Ri(c))return zr;g=g&&Bm(c,l,a),l=c}p=p||h&&u-_-1>n&&e[_+1]!==" "}return!f&&!p?g&&!o&&!i(e)?dE:s===yi?zr:hl:r>9&&lE(e)?zr:o?s===yi?zr:hl:p?pE:fE}function QI(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===yi?'""':"''";if(!e.noCompatMode&&(qI.indexOf(t)!==-1||jI.test(t)))return e.quotingType===yi?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function u(c){return YI(e,c)}switch(zI(t,a,e.indent,o,u,e.quotingType,e.forceQuotes&&!n,i)){case dE:return t;case hl:return"'"+t.replace(/'/g,"''")+"'";case fE:return"|"+Fm(t,e.indent)+Um(Mm(t,s));case pE:return">"+Fm(t,e.indent)+Um(Mm(ZI(t,o),s));case zr:return'"'+JI(t)+'"';default:throw new ke("impossible error: invalid scalar style")}}()}function Fm(e,t){var r=lE(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function Um(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function ZI(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,km(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],u=o[2];s=u[0]===" ",n+=a+(!i&&!s&&u!==""?`
`:"")+km(u,t),i=s}return n}function km(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,u="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,u+=`
`+e.slice(i,s),i=s+1),o=a;return u+=`
`,e.length-i>t&&o>i?u+=e.slice(i,o)+`
`+e.slice(o+1):u+=e.slice(i),u.slice(1)}function JI(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=Si(e,i),n=Oe[r],!n&&Ri(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||$I(r);return t}function eN(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(Nt(e,t,a,!1,!1)||typeof a>"u"&&Nt(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function Gm(e,t,r,n){var i="",s=e.tag,o,a,u;for(o=0,a=r.length;o<a;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(Nt(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&Nt(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=_l(e,t)),e.dump&&Ti===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function tN(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,u,c,l;for(o=0,a=s.length;o<a;o+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),u=s[o],c=r[u],e.replacer&&(c=e.replacer.call(r,u,c)),Nt(e,t,u,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Nt(e,t,c,!1,!1)&&(l+=e.dump,n+=l));e.tag=i,e.dump="{"+n+"}"}function rN(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,u,c,l,f,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new ke("sortKeys must be a boolean or a function");for(a=0,u=o.length;a<u;a+=1)p="",(!n||i!=="")&&(p+=_l(e,t)),c=o[a],l=r[c],e.replacer&&(l=e.replacer.call(r,c,l)),Nt(e,t+1,c,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Ti===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,f&&(p+=_l(e,t)),Nt(e,t+1,l,!0,f)&&(e.dump&&Ti===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=s,e.dump=i||"{}"}function qm(e,t,r){var n,i,s,o,a,u;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,nE.call(a.represent)==="[object Function]")n=a.represent(t,u);else if(iE.call(a.represent,u))n=a.represent[u](t,u);else throw new ke("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function Nt(e,t,r,n,i,s,o){e.tag=null,e.dump=r,qm(e,r,!1)||qm(e,r,!0);var a=nE.call(e.dump),u=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",f,p;if(l&&(f=e.duplicates.indexOf(r),p=f!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(i=!1),p&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(l&&p&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(rN(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(tN(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Gm(e,t-1,e.dump,i):Gm(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(eN(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&QI(e,e.dump,t,s,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new ke("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function nN(e,t){var r=[],n=[],i,s;for(gl(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function gl(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)gl(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)gl(e[n[i]],t,r)}function iN(e,t){t=t||{};var r=new WI(t);r.noRefs||nN(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Nt(r,0,n,!0,!0)?r.dump+`
`:""}var sN=iN,oN={dump:sN};function Tl(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var _E=$m;var hE=rE.load,mj=rE.loadAll,Ej=oN.dump;var Sj=Tl("safeLoad","load"),Aj=Tl("safeLoadAll","loadAll"),Tj=Tl("safeDump","dump");var aN=".yarnbuildrc.yml",uN=".bundleignore",cN=H.isObject({folders:H.isObject({input:H.isOneOf([H.isString(),H.isArray(H.isString())]),output:H.isNullable(H.isOneOf([H.isString(),H.isArray(H.isString())]))}),exclude:H.isArray(H.isString()),bail:H.isBoolean(),hideYarnBuildBadge:H.isBoolean(),ignoreFile:H.isString()}),lN=H.isObject({input:H.isOptional(H.isOneOf([H.isString(),H.isArray(H.isString())])),output:H.isOptional(H.isNullable(H.isOneOf([H.isString(),H.isArray(H.isString())]))),tsconfig:H.isOptional(H.isString())}),yl={folders:{input:".",output:null},exclude:[],bail:!0,hideYarnBuildBadge:!1,ignoreFile:uN};async function dN(e){let t=aN,r=bi.ppath.join(e.projectCwd||e.startingCwd,t);if(bi.xfs.existsSync(r)){let n=await bi.xfs.readFilePromise(r,"utf8"),i=[];try{let s=hE(n,{schema:_E});if(cN(s,{errors:i}))return s;console.warn(i)}catch{let o="";throw n.match(/^\s+(?!-)[^:]+\s+\S+/m)&&(o=" (config is corrupted, please check it matches the shape in the yarn.build readme."),new Error(`Parse error when loading ${r}; please check it's proper Yaml${o}`)}}return yl}async function gE(e){let t=await dN(e);return{...yl,...t,folders:{...yl.folders,...t.folders??{}}}}function mE(e){let t={...e["yarn.build"]};return lN(t)?t:{}}var k=v("@yarnpkg/core"),$e=K(RE()),ov=v("os"),V=v("@yarnpkg/fslib");var nf=K(v("node:process"),1),xA=K(v("node:fs"),1),hr=K(v("node:path"),1);var Qs=v("node:events"),OE=v("node:stream"),bl=v("node:stream/promises");function Ol(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got \`${typeof e}\`.`);for(let i of e)vE(i);let t=e.some(({readableObjectMode:i})=>i),r=pN(e,t),n=new Rl({objectMode:t,writableHighWaterMark:r,readableHighWaterMark:r});for(let i of e)n.add(i);return e.length===0&&n.end(),n}var pN=(e,t)=>{if(e.length===0)return 16384;let r=e.filter(({readableObjectMode:n})=>n===t).map(({readableHighWaterMark:n})=>n);return Math.max(...r)},Rl=class extends OE.PassThrough{#e=new Set([]);#n=new Set([]);#t;constructor(...t){super(...t),this.#t=_N(this,this.#e)}add(t){if(!this.#e.has(t)){if(vE(t),!this.writable)throw new TypeError("The merged stream has already ended.");this.#e.add(t),mN({passThroughStream:this,stream:t,streams:this.#e,ended:this.#n,onFinished:this.#t}),zs(this,CE),t.pipe(this,{end:!1})}}remove(t){if(!this.#e.has(t))throw new TypeError("Stream cannot be removed because it was not piped.");t.unpipe(this)}},_N=async(e,t)=>{zs(e,bE);let r=new AbortController;try{await Promise.race([hN(e,r),gN(e,t,r)])}finally{r.abort(),zs(e,-bE)}},hN=async(e,{signal:t})=>{try{await(0,bl.finished)(e,{signal:t,cleanup:!0})}catch{}},gN=async(e,t,{signal:r})=>{for await(let[n]of(0,Qs.on)(e,"unpipe",{signal:r}))t.has(n)&&n.emit(PE)},vE=e=>{if(typeof e?.pipe!="function")throw new TypeError(`Expected a readable stream, got: \`${typeof e}\`.`)},mN=async({passThroughStream:e,stream:t,streams:r,ended:n,onFinished:i})=>{try{let s=new AbortController;try{await Promise.race([i,EN({stream:t,streams:r,ended:n,abortController:s}),SN({passThroughStream:e,stream:t,streams:r,ended:n,abortController:s})])}finally{s.abort()}r.size===n.size&&e.writable&&e.end()}catch(s){s?.code==="ERR_STREAM_PREMATURE_CLOSE"?e.destroy():e.destroy(s)}},EN=async({stream:e,streams:t,ended:r,abortController:{signal:n}})=>{await(0,bl.finished)(e,{signal:n,cleanup:!0,readable:!0,writable:!1}),t.has(e)&&r.add(e)},SN=async({passThroughStream:e,stream:t,streams:r,ended:n,abortController:{signal:i}})=>{await(0,Qs.once)(t,PE,{signal:i}),r.delete(t),n.delete(t),zs(e,-CE)},PE=Symbol("unpipe"),zs=(e,t)=>{e.setMaxListeners(e.getMaxListeners()+t)},bE=2,CE=1;var an=K(Yd(),1);var To=K(v("fs"),1);async function Kd(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return(await To.promises[e](r))[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}function Xd(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return To.default[e](r)[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}var w2=Kd.bind(null,"stat","isFile"),uA=Kd.bind(null,"stat","isDirectory"),M2=Kd.bind(null,"lstat","isSymbolicLink"),D2=Xd.bind(null,"statSync","isFile"),cA=Xd.bind(null,"statSync","isDirectory"),B2=Xd.bind(null,"lstatSync","isSymbolicLink");var lA=v("node:url");function vi(e){return e instanceof URL?(0,lA.fileURLToPath)(e):e}var AA=K(v("node:process"),1),TA=K(v("node:fs"),1),yA=K(v("node:fs/promises"),1),_r=K(v("node:path"),1),rf=K(Yd(),1),RA=K(SA(),1);function on(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}var Pi=e=>e[0]==="!";var Cw=["**/node_modules","**/flow-typed","**/coverage","**/.git"],bA={absolute:!0,dot:!0},OA="**/.gitignore",Iw=(e,t)=>Pi(e)?"!"+_r.default.posix.join(t,e.slice(1)):_r.default.posix.join(t,e),Nw=(e,t)=>{let r=on(_r.default.relative(t,_r.default.dirname(e.filePath)));return e.content.split(/\r?\n/).filter(n=>n&&!n.startsWith("#")).map(n=>Iw(n,r))},Lw=(e,t)=>{if(t=on(t),_r.default.isAbsolute(e)){if(on(e).startsWith(t))return _r.default.relative(t,e);throw new Error(`Path ${e} is not in cwd ${t}`)}return e},vA=(e,t)=>{let r=e.flatMap(i=>Nw(i,t)),n=(0,RA.default)().add(r);return i=>(i=vi(i),i=Lw(i,t),i?n.ignores(on(i)):!1)},PA=(e={})=>({cwd:vi(e.cwd)??AA.default.cwd(),suppressErrors:!!e.suppressErrors,deep:typeof e.deep=="number"?e.deep:Number.POSITIVE_INFINITY,ignore:[...e.ignore??[],...Cw]}),CA=async(e,t)=>{let{cwd:r,suppressErrors:n,deep:i,ignore:s}=PA(t),o=await(0,rf.default)(e,{cwd:r,suppressErrors:n,deep:i,ignore:s,...bA}),a=await Promise.all(o.map(async u=>({filePath:u,content:await yA.default.readFile(u,"utf8")})));return vA(a,r)},IA=(e,t)=>{let{cwd:r,suppressErrors:n,deep:i,ignore:s}=PA(t),a=rf.default.sync(e,{cwd:r,suppressErrors:n,deep:i,ignore:s,...bA}).map(u=>({filePath:u,content:TA.default.readFileSync(u,"utf8")}));return vA(a,r)};var xw=e=>{if(e.some(t=>typeof t!="string"))throw new TypeError("Patterns must be a string or an array of strings")},wA=(e,t)=>{let r=Pi(e)?e.slice(1):e;return hr.default.isAbsolute(r)?r:hr.default.join(t,r)},MA=({directoryPath:e,files:t,extensions:r})=>{let n=r?.length>0?`.${r.length>1?`{${r.join(",")}}`:r[0]}`:"";return t?t.map(i=>hr.default.posix.join(e,`**/${hr.default.extname(i)?i:`${i}${n}`}`)):[hr.default.posix.join(e,`**${n?`/*${n}`:""}`)]},NA=async(e,{cwd:t=nf.default.cwd(),files:r,extensions:n}={})=>(await Promise.all(e.map(async s=>await uA(wA(s,t))?MA({directoryPath:s,files:r,extensions:n}):s))).flat(),LA=(e,{cwd:t=nf.default.cwd(),files:r,extensions:n}={})=>e.flatMap(i=>cA(wA(i,t))?MA({directoryPath:i,files:r,extensions:n}):i),sf=e=>(e=[...new Set([e].flat())],xw(e),e),ww=e=>{if(!e)return;let t;try{t=xA.default.statSync(e)}catch{return}if(!t.isDirectory())throw new Error("The `cwd` option must be a path to a directory")},DA=(e={})=>(e={...e,ignore:e.ignore??[],expandDirectories:e.expandDirectories??!0,cwd:vi(e.cwd)},ww(e.cwd),e),BA=e=>async(t,r)=>e(sf(t),DA(r)),Ro=e=>(t,r)=>e(sf(t),DA(r)),FA=e=>{let{ignoreFiles:t,gitignore:r}=e,n=t?sf(t):[];return r&&n.push(OA),n},Mw=async e=>{let t=FA(e);return kA(t.length>0&&await CA(t,e))},UA=e=>{let t=FA(e);return kA(t.length>0&&IA(t,e))},kA=e=>{let t=new Set;return r=>{let n=hr.default.normalize(r.path??r);return t.has(n)||e&&e(n)?!1:(t.add(n),!0)}},GA=(e,t)=>e.flat().filter(r=>t(r)),qA=(e,t)=>{let r=[];for(;e.length>0;){let n=e.findIndex(s=>Pi(s));if(n===-1){r.push({patterns:e,options:t});break}let i=e[n].slice(1);for(let s of r)s.options.ignore.push(i);n!==0&&r.push({patterns:e.slice(0,n),options:{...t,ignore:[...t.ignore,i]}}),e=e.slice(n+1)}return r},jA=(e,t)=>({...t?{cwd:t}:{},...Array.isArray(e)?{files:e}:e}),HA=async(e,t)=>{let r=qA(e,t),{cwd:n,expandDirectories:i}=t;if(!i)return r;let s=jA(i,n);return Promise.all(r.map(async o=>{let{patterns:a,options:u}=o;return[a,u.ignore]=await Promise.all([NA(a,s),NA(u.ignore,{cwd:n})]),{patterns:a,options:u}}))},of=(e,t)=>{let r=qA(e,t),{cwd:n,expandDirectories:i}=t;if(!i)return r;let s=jA(i,n);return r.map(o=>{let{patterns:a,options:u}=o;return a=LA(a,s),u.ignore=LA(u.ignore,{cwd:n}),{patterns:a,options:u}})},af=BA(async(e,t)=>{let[r,n]=await Promise.all([HA(e,t),Mw(t)]),i=await Promise.all(r.map(s=>(0,an.default)(s.patterns,s.options)));return GA(i,n)}),Z2=Ro((e,t)=>{let r=of(e,t),n=UA(t),i=r.map(s=>an.default.sync(s.patterns,s.options));return GA(i,n)}),J2=Ro((e,t)=>{let r=of(e,t),n=UA(t),i=r.map(o=>an.default.stream(o.patterns,o.options));return Ol(i).filter(o=>n(o))}),eH=Ro((e,t)=>e.some(r=>an.default.isDynamicPattern(r,t))),tH=BA(HA),rH=Ro(of),{convertPathToPattern:nH}=an.default;var av=v("events");var cf=K(VA(),1);var Ii=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},lf=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},WA=e=>globalThis.DOMException===void 0?new lf(e):new DOMException(e),YA=e=>{let t=e.reason===void 0?WA("This operation was aborted."):e.reason;return t instanceof Error?t:WA(t)};function df(e,t){let{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout,clearTimeout}}=t,o,u=new Promise((c,l)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:p}=t;p.aborted&&l(YA(p)),p.addEventListener("abort",()=>{l(YA(p))})}if(r===Number.POSITIVE_INFINITY){e.then(c,l);return}let f=new Ii;o=s.setTimeout.call(void 0,()=>{if(n){try{c(n())}catch(p){l(p)}return}typeof e.cancel=="function"&&e.cancel(),i===!1?c():i instanceof Error?l(i):(f.message=i??`Promise timed out after ${r} milliseconds`,l(f))},r),(async()=>{try{c(await e)}catch(p){l(p)}})()}).finally(()=>{u.clear()});return u.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},u}function ff(e,t,r){let n=0,i=e.length;for(;i>0;){let s=Math.trunc(i/2),o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}var Ni=class{#e=[];enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&this.#e[this.size-1].priority>=r.priority){this.#e.push(n);return}let i=ff(this.#e,n,(s,o)=>o.priority-s.priority);this.#e.splice(i,0,n)}dequeue(){return this.#e.shift()?.run}filter(t){return this.#e.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this.#e.length}};var Li=class extends cf.default{#e;#n;#t=0;#p;#a;#_=0;#i;#u;#r;#h;#s=0;#c;#o;#g;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ni,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#e=t.carryoverConcurrencyCount,this.#n=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#p=t.intervalCap,this.#a=t.interval,this.#r=new t.queueClass,this.#h=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#g=t.throwOnTimeout===!0,this.#o=t.autoStart===!1}get#S(){return this.#n||this.#t<this.#p}get#A(){return this.#s<this.#c}#T(){this.#s--,this.#l(),this.emit("next")}#y(){this.#E(),this.#m(),this.#u=void 0}get#R(){let t=Date.now();if(this.#i===void 0){let r=this.#_-t;if(r<0)this.#t=this.#e?this.#s:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#y()},r)),!0}return!1}#l(){if(this.#r.size===0)return this.#i&&clearInterval(this.#i),this.#i=void 0,this.emit("empty"),this.#s===0&&this.emit("idle"),!1;if(!this.#o){let t=!this.#R;if(this.#S&&this.#A){let r=this.#r.dequeue();return r?(this.emit("active"),r(),t&&this.#m(),!0):!1}}return!1}#m(){this.#n||this.#i!==void 0||(this.#i=setInterval(()=>{this.#E()},this.#a),this.#_=Date.now()+this.#a)}#E(){this.#t===0&&this.#s===0&&this.#i&&(clearInterval(this.#i),this.#i=void 0),this.#t=this.#e?this.#s:0,this.#d()}#d(){for(;this.#l(););}get concurrency(){return this.#c}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#c=t,this.#d()}async#b(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:this.#g,...r},new Promise((n,i)=>{this.#r.enqueue(async()=>{this.#s++,this.#t++;try{r.signal?.throwIfAborted();let s=t({signal:r.signal});r.timeout&&(s=df(Promise.resolve(s),{milliseconds:r.timeout})),r.signal&&(s=Promise.race([s,this.#b(r.signal)]));let o=await s;n(o),this.emit("completed",o)}catch(s){if(s instanceof Ii&&!r.throwOnTimeout){n();return}i(s),this.emit("error",s)}finally{this.#T()}},r),this.emit("add"),this.#l()})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this.#o?(this.#o=!1,this.#d(),this):this}pause(){this.#o=!0}clear(){this.#r=new this.#h}async onEmpty(){this.#r.size!==0&&await this.#f("empty")}async onSizeLessThan(t){this.#r.size<t||await this.#f("next",()=>this.#r.size<t)}async onIdle(){this.#s===0&&this.#r.size===0||await this.#f("idle")}async#f(t,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(t,i),n())};this.on(t,i)})}get size(){return this.#r.size}sizeBy(t){return this.#r.filter(t).length}get pending(){return this.#s}get isPaused(){return this.#o}};var pf=class{value;next;constructor(t){this.value=t}},xi=class{#e;#n;#t;constructor(){this.clear()}enqueue(t){let r=new pf(t);this.#e?(this.#n.next=r,this.#n=r):(this.#e=r,this.#n=r),this.#t++}dequeue(){let t=this.#e;if(t)return this.#e=this.#e.next,this.#t--,t.value}clear(){this.#e=void 0,this.#n=void 0,this.#t=0}get size(){return this.#t}*[Symbol.iterator](){let t=this.#e;for(;t;)yield t.value,t=t.next}};var KA=v("async_hooks");function _f(e){if(!((Number.isInteger(e)||e===Number.POSITIVE_INFINITY)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let t=new xi,r=0,n=()=>{r--,t.size>0&&t.dequeue()()},i=async(a,u,c)=>{r++;let l=(async()=>a(...c))();u(l);try{await l}catch{}n()},s=(a,u,c)=>{t.enqueue(KA.AsyncResource.bind(i.bind(void 0,a,u,c))),(async()=>(await Promise.resolve(),r<e&&t.size>0&&t.dequeue()()))()},o=(a,...u)=>new Promise(c=>{s(a,c,u)});return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}}}),o}var hg=K(XA());function mf({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var Fw=mf();function gr(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Fw,"")}var zA=(e=0)=>t=>`\x1B[${t+e}m`,QA=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,ZA=(e=0)=>(t,r,n)=>`\x1B[${38+e};2;${t};${r};${n}m`,oe={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},yH=Object.keys(oe.modifier),Uw=Object.keys(oe.color),kw=Object.keys(oe.bgColor),RH=[...Uw,...kw];function Gw(){let e=new Map;for(let[t,r]of Object.entries(oe)){for(let[n,i]of Object.entries(r))oe[n]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},r[n]=oe[n],e.set(i[0],i[1]);Object.defineProperty(oe,t,{value:r,enumerable:!1})}return Object.defineProperty(oe,"codes",{value:e,enumerable:!1}),oe.color.close="\x1B[39m",oe.bgColor.close="\x1B[49m",oe.color.ansi=zA(),oe.color.ansi256=QA(),oe.color.ansi16m=ZA(),oe.bgColor.ansi=zA(10),oe.bgColor.ansi256=QA(10),oe.bgColor.ansi16m=ZA(10),Object.defineProperties(oe,{rgbToAnsi256:{value:(t,r,n)=>t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(s=>s+s).join(""));let i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:t=>oe.rgbToAnsi256(...oe.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,n,i;if(t>=232)r=((t-232)*10+8)/255,n=r,i=r;else{t-=16;let a=t%36;r=Math.floor(t/36)/5,n=Math.floor(a/6)/5,i=a%6/5}let s=Math.max(r,n,i)*2;if(s===0)return 30;let o=30+(Math.round(i)<<2|Math.round(n)<<1|Math.round(r));return s===2&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(t,r,n)=>oe.ansi256ToAnsi(oe.rgbToAnsi256(t,r,n)),enumerable:!1},hexToAnsi:{value:t=>oe.ansi256ToAnsi(oe.hexToAnsi256(t)),enumerable:!1}}),oe}var qw=Gw(),wt=qw;function JA(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function eT(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function tT(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function jw(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function rT(e,{ambiguousAsWide:t=!1}={}){return jw(e),eT(e)||tT(e)||t&&JA(e)?2:1}function Ef(e){return Number.isInteger(e)?rT(e)===2:!1}var Hw=new Set([27,155]),$w="0".codePointAt(0),Vw="9".codePointAt(0),Af=new Set,Sf=new Map;for(let[e,t]of wt.codes)Af.add(wt.color.ansi(t)),Sf.set(wt.color.ansi(e),wt.color.ansi(t));function Ww(e){if(Af.has(e))return e;if(Sf.has(e))return Sf.get(e);e=e.slice(2),e.includes(";")&&(e=e[0]+"0");let t=wt.codes.get(Number.parseInt(e,10));return t?wt.color.ansi(t):wt.reset.open}function Yw(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(r>=$w&&r<=Vw)return t}return-1}function Kw(e,t){e=e.slice(t,t+19);let r=Yw(e);if(r!==-1){let n=e.indexOf("m",r);return n===-1&&(n=e.length),e.slice(0,n+1)}}function Xw(e,t=Number.POSITIVE_INFINITY){let r=[],n=0,i=0;for(;n<e.length;){let s=e.codePointAt(n);if(Hw.has(s)){let u=Kw(e,n);if(u){r.push({type:"ansi",code:u,endCode:Ww(u)}),n+=u.length;continue}}let o=Ef(s),a=String.fromCodePoint(s);if(r.push({type:"character",value:a,isFullWidth:o}),n+=a.length,i+=o?2:a.length,i>=t)break}return r}function nT(e){let t=[];for(let r of e)r.code===wt.reset.open?t=[]:Af.has(r.code)?t=t.filter(n=>n.endCode!==r.code):(t=t.filter(n=>n.endCode!==r.endCode),t.push(r));return t}function zw(e){return nT(e).map(({endCode:n})=>n).reverse().join("")}function wi(e,t,r){let n=Xw(e,r),i=[],s=0,o="",a=!1;for(let u of n){if(r!==void 0&&s>=r)break;u.type==="ansi"?(i.push(u),a&&(o+=u.code)):(!a&&s>=t&&(a=!0,i=nT(i),o=i.map(({code:c})=>c).join("")),a&&(o+=u.value),s+=u.isFullWidth?2:u.value.length)}return o+=zw(i),o}var X={PACKAGE_NAME:"package.name",PACKAGE_SCOPE:"package.scope",PACKAGE_DIRECTORY:"package.directory",PACKAGE_COMMAND:"package.command",GIT_BRANCH:"git.branch",GIT_COMMIT:"git.commit",YARN_BUILD_MESSAGE_CODE:"yarn.build.message.code",YARN_BUILD_CONFIG_FOLDERS_INPUT:"yarn.build.config.folders.input",YARN_BUILD_CONFIG_FOLDERS_OUTPUT:"yarn.build.config.folders.output",YARN_BUILD_CONFIG_EXCLUDE:"yarn.build.config.exclude",YARN_BUILD_CONFIG_BAIL:"yarn.build.config.bail",YARN_BUILD_CONFIG_HIDE_BADGE:"yarn.build.config.hide-badge",YARN_BUILD_CONFIG_MAX_CONCURRENCY:"yarn.build.config.max-concurrency",YARN_BUILD_FLAGS_OUTPUT_JSON:"yarn.build.flags.output.json",YARN_BUILD_FLAGS_ALL:"yarn.build.flags.all",YARN_BUILD_FLAGS_TARGETS:"yarn.build.flags.targets",YARN_BUILD_FLAGS_COMMAND:"yarn.build.flags.command",YARN_BUILD_FLAGS_INTERLACED:"yarn.build.flags.interlaced",YARN_BUILD_FLAGS_VERBOSE:"yarn.build.flags.verbose",YARN_BUILD_FLAGS_DRY_RUN:"yarn.build.flags.dry-run",YARN_BUILD_FLAGS_IGNORE_CACHE:"yarn.build.flags.ignore-cache",YARN_BUILD_FLAGS_MAX_CONCURRENCY:"yarn.build.flags.max-concurrency",YARN_BUILD_FLAGS_CONTINUE_ON_ERROR:"yarn.build.flags.continue-on-error",YARN_BUILD_FLAGS_EXCLUDE:"yarn.build.flags.exclude",YARN_BUILD_FLAGS_EXCLUDE_CURRENT:"yarn.build.flags.exclude.current",YARN_BUILD_FLAGS_CHANGES:"yarn.build.flags.changes",YARN_BUILD_FLAGS_SINCE:"yarn.build.flags.since",YARN_BUILD_FLAGS_SINCE_BRANCH:"yarn.build.flags.since-branch",YARN_BUILD_FLAGS_ONLY_CURRENT:"yarn.build.flags.only-current",YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES:"yarn.build.flags.ignore-dependencies",YARN_BUILD_FLAGS_BUNDLE_QUIET:"yarn.build.flags.bundle.quiet",YARN_BUILD_FLAGS_BUNDLE_TEMPORARY_DIRECTORY:"yarn.build.flags.bundle.temporary-directory",YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY:"yarn.build.flags.bundle.output-directory",YARN_BUILD_FLAGS_BUNDLE_NO_COMPRESS:"yarn.build.flags.bundle.no-compress",YARN_BUILD_FLAGS_BUNDLE_ARCHIVE_NAME:"yarn.build.flags.bundle.archive-name",YARN_BUILD_FLAGS_BUNDLE_EXCLUDE:"yarn.build.flags.bundle.exclude",YARN_BUILD_FLAGS_BUNDLE_IGNORE_FILE:"yarn.build.flags.bundle.ignore-file",YARN_BUILD_PACKAGE_NEEDS_RUN:"yarn.build.package.needs-run",YARN_BUILD_PACKAGE_RUN_COMMAND:"yarn.build.package.run.command",YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT:"yarn.build.package.run.command.exit"};var BO=K(x()),FO=K(hp());var LO=K(Lu()),xO=K(Cn()),wO=K(bt()),MO=K(NO()),DO=K(Lu()),li=K(x());process.env.DEBUG&&li.diag.setLogger(new li.DiagConsoleLogger,li.DiagLogLevel.DEBUG);var ys=class{static _instance;static getInstance(){return this._instance||(this._instance=new this().start())}static provider(){return this._instance||(this._instance=new this().start())}start(){let t=new MO.OTLPTraceExporter,r=new LO.BasicTracerProvider({resource:new xO.Resource({[wO.SemanticResourceAttributes.SERVICE_NAME]:"yarn.build"})});r.addSpanProcessor(new DO.BatchSpanProcessor(t));async function n(i){try{await r.shutdown(),process.env.DEBUG&&console.info("gracefullty exited trace provider")}finally{process.exit(isNaN(+i)?1:+i)}}return["beforeExit","exit","uncaughtException","unhandledRejection","SIGHUP","SIGINT","SIGQUIT","SIGILL","SIGTRAP","SIGABRT","SIGBUS","SIGFPE","SIGUSR1","SIGSEGV","SIGUSR2","SIGTERM"].forEach(i=>process.on(i,n)),r}};var Hr=K(x()),kt=class{name;_tracer;constructor(t){this.name=t,this._tracer=ys.getInstance().getTracer(t)}recordException(t,r){(typeof typeof r=="string"||r instanceof Error)&&(t.recordException(r),t.setStatus({code:BO.SpanStatusCode.ERROR,message:r instanceof Error?r.message:r}))}async startSpan(t,r){let n;if(typeof t.ctx>"u"?n=Hr.context.active():n=t.ctx,t.propegateFromEnv||t?.spanOptions?.kind==4){let o=process.env.TRACEPARENT;if(typeof o=="string"){let a=(0,FO.parseTraceParent)(o??"");a&&(n=Hr.trace.setSpanContext(Hr.context.active(),a))}}let i=this._tracer.startSpan(t.name,t.spanOptions,n),s=Hr.trace.setSpan(n,i);try{return r.constructor.name==="AsyncFunction"?await r({span:i,ctx:s}):r({span:i,ctx:s})}catch(o){if((typeof o=="string"||o instanceof Error)&&this.recordException(i,o),!t.supressExceptions)throw o}finally{i.end()}throw new Error("Unknown error")}async wrap(t,r,...n){let i;return typeof t.ctx>"u"?i=Hr.context.active():i=t.ctx,await(async()=>await this.startSpan({name:t.name,ctx:i},async()=>await r(...n)))()}};var kc=class e{tracer=new kt("yarn.build");nodes={};size=0;runSize=0;ran=new Set;dryRunCallback=()=>{};addNode(t){if(this.nodes[t])return this.nodes[t];let r=new Rs(t);return this.nodes[t]=r,this.size=Object.keys(this.nodes).length,this.checkCyclical(r),r}addRunCallback(t,r){let n=t;this.nodes[t.id]||(n=this.addNode(t.id)),n.runCallback||(n.addRunCallback(r),this.runSize++)}getNode(t){if(this.nodes[t])return this.nodes[t]}resetRuns(){this.ran=new Set}checkCyclical(t){let r=new Set,n=new Set;this.resolveNode(t,r,n)}resolveNode(t,r,n){n.add(t.id),Object.keys(t.dependencies).forEach(i=>{let s=t.dependencies[i];if(!r.has(s.id)){if(n.has(s.id))throw new bs(t.id,s.id);this.resolveNode(s,r,n)}}),r.add(t.id),n.delete(t.id)}async run(t,r,n=!1){return await this.tracer.startSpan({name:"run commands",ctx:t},async({ctx:i})=>{let s=new Set,o=new Set,a={};for(let u of r)this.resolveQueue(u,s,a);return n?(await this.dryRunLoop(s,a,o,0),a):(await new Promise(u=>{this.workLoop(i,s,a,o,u)}),a)})}async dryRunLoop(t,r,n,i=0){if(n.forEach((s,o)=>{this.dryRunCallback(s,i-1),r[s.id]={success:!0,done:!0},n.delete(o)}),t.size!==0&&t.forEach(s=>{s.canStart(r)&&s?.node?.runCallback&&(n.add(s.node),t.delete(s))}),n.size!=0)return await this.dryRunLoop(t,r,n,i+1)}workLoop(t,r,n,i,s){if(r.size!==0&&r.forEach(o=>{o.canStart(n)&&(o?.node?.runCallback?(o?.node?.runCallback(t,n),i.add(o.node)):n[o.node.id]={success:!0,done:!0},r.delete(o))}),i.forEach((o,a)=>{n[o.id].done&&i.delete(a)}),Object.keys(n).map(o=>n[o]?.done??!0).every(o=>o===!0)){s();return}setTimeout(()=>this.workLoop(t,r,n,i,s),30)}resolveQueue(t,r,n){let i=[];if(Object.keys(t.dependencies).forEach(s=>{let o=t.dependencies[s];if(i.push(o.id),!n[o.id]&&o.runCallback){n[o.id]={...e.RunLogInit};let a=this.resolveQueue(o,r,n),u={node:o,canStart:e.QueueItemCanStart(a)};r.add(u)}}),!n[t.id]&&t.runCallback){n[t.id]={...e.RunLogInit};let s={node:t,canStart:e.QueueItemCanStart(i)};r.add(s)}return i}static RunLogInit={success:!1,done:!1};static QueueItemCanStart=t=>r=>t.map(n=>r[n]?.done??!0).every(n=>n===!0)},Rs=class e{id;dependencies;cancelled=!1;skip=!1;runCallback;constructor(t){this.id=t,this.dependencies={}}addDependency(t){return this.dependencies[t.id]||(this.dependencies[t.id]=t),this}addRunCallback(t){return this.runCallback?this:(this.runCallback=(r,n)=>{if(!this.cancelled)return t(r,e.cancelDependentJobs(this)).then(i=>{n[this.id]={done:!0,success:i}})},this)}static cancelDependentJobs(t){return()=>{typeof t.dependencies>"u"||Object.keys(t.dependencies).forEach(r=>{let n=t.dependencies[r];n.cancelled=!0})}}},bs=class extends Error{code;node;dep;constructor(t,r){super(""),this.name="CyclicDependencyError",this.code="YN0003",this.node=t,this.dep=r}};var Aq="\x1B",Je=Aq+"[",Ct=class e{static row=0;static column=0;static pad(t=1){for(let r=0;r<t;r++)process.stdout.write(`
`);e.cursorUp(t)}static cursorUp(t=1){process.stdout.write(Je+`${t}A`)}static cursorSave(){process.stdout.write(Je+"s")}static cursorRestore(){process.stdout.write(Je+"u")}static autoWrap(t){t?process.stdout.write(Je+"?7h"):process.stdout.write(Je+"?7l")}static clearScreenDown(){process.stdout.write(Je+"J")}static async cursorPositionReport(){return new Promise(t=>{process.stdin.setRawMode(!0),process.stdin.once("data",r=>{process.stdin.setRawMode(!1),process.stdin.pause();let[n,i]=r.slice(2,r.length-1).toString().split(";").map(Number);t({x:i,y:n})}),process.stdout.write(Je+"6n")})}static setScrollableRegion(t,r){process.stdout.write(Je+`${t};${r}r`)}static resetScrollableRegion(){process.stdout.write(Je+"r")}static moveTo(t){process.stdout.write(Je+`${t.y};${t.x}H`)}static cursorHome(){process.stdout.write(Je+"H")}static alternateScreen(){process.stdout.write(Je+"?1049h")}static mainScreen(){process.stdout.write(Je+"?1049l")}static linesRequired(t,r){let n=new RegExp(`([^
]{0,${r}})(
)?`,"gm");return(gr(t).match(n)??[""]).length-1}};var kO=v("child_process"),GO=v("util");var UO=()=>process.platform==="win32"?"windows":"unix";var Tq=(0,GO.promisify)(kO.exec),qO=async e=>{let t=UO(),r=(({platform:i,pid:s})=>{switch(i){case"unix":return`pgrep "-P ${s}"`;case"windows":return`wmic process where (ParentProcessId=${s}) get ProcessId`;default:throw new Error("Unable to find parent process")}})({platform:t,pid:e}),n=[];try{let{stdout:i}=await Tq(r);n=i.split(`
`).filter(Boolean).map(s=>parseInt(s,10)).filter(s=>!isNaN(s))}catch{}return n};var di={hasBeenTerminated:!1,callId:0},Gc=async(e=0)=>{if(e!==di.callId||di.hasBeenTerminated)return;let t=process.pid;(await qO(t)).forEach(i=>{try{process.kill(i,"SIGKILL")}catch{}});let n=di.callId+1;di.callId=n,setTimeout(async()=>{Gc(n)},50)};var uv=K(x());var Z=K(v("path"),1),fg=K(v("fs"),1),zO=K(v("module"),1);var jO=e=>e!==null&&typeof e=="object",fi=(e,t)=>Object.assign(new Error(`[${e}]: ${t}`),{code:e}),HO="ERR_INVALID_PACKAGE_CONFIG",sg="ERR_INVALID_PACKAGE_TARGET",yq="ERR_PACKAGE_PATH_NOT_EXPORTED";var Rq=/^\d+$/,bq=/^(\.{1,2}|node_modules)$/i,Oq=/\/|\\/,$O=(e=>(e.Export="exports",e.Import="imports",e))($O||{}),og=(e,t,r,n,i)=>{if(t==null)return[];if(typeof t=="string"){let[s,...o]=t.split(Oq);if(s===".."||o.some(a=>bq.test(a)))throw fi(sg,`Invalid "${e}" target "${t}" defined in the package config`);return[i?t.replace(/\*/g,i):t]}if(Array.isArray(t))return t.flatMap(s=>og(e,s,r,n,i));if(jO(t)){for(let s of Object.keys(t)){if(Rq.test(s))throw fi(HO,"Cannot contain numeric property keys");if(s==="default"||n.includes(s))return og(e,t[s],r,n,i)}return[]}throw fi(sg,`Invalid "${e}" target "${t}"`)},Os="*",vq=(e,t)=>{let r=e.indexOf(Os),n=t.indexOf(Os);return r===n?t.length>e.length:n>r};function Pq(e,t){if(!t.includes(Os)&&e.hasOwnProperty(t))return[t];let r,n;for(let i of Object.keys(e))if(i.includes(Os)){let[s,o,a]=i.split(Os);if(a===void 0&&t.startsWith(s)&&t.endsWith(o)){let u=t.slice(s.length,-o.length||void 0);u&&(!r||vq(r,i))&&(r=i,n=u)}}return[r,n]}var Cq=e=>Object.keys(e).reduce((t,r)=>{let n=r===""||r[0]!==".";if(t===void 0||t===n)return n;throw fi(HO,'"exports" cannot contain some keys starting with "." and some not')},void 0),Iq=/^\w+:/,VO=(e,t,r)=>{if(!e)throw new Error('"exports" is required');t=t===""?".":`./${t}`,(typeof e=="string"||Array.isArray(e)||jO(e)&&Cq(e))&&(e={".":e});let[n,i]=Pq(e,t),s=og($O.Export,e[n],t,r,i);if(s.length===0)throw fi(yq,t==="."?'No "exports" main defined':`Package subpath '${t}' is not defined by "exports"`);for(let o of s)if(!o.startsWith("./")&&!Iq.test(o))throw fi(sg,`Invalid "exports" target "${o}" defined in the package config`);return s};function $r(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}var Hc=e=>{let t=fg.default[e];return function(r,...n){let i=`${e}:${n.join(":")}`,s=r?.get(i);return s===void 0&&(s=Reflect.apply(t,fg.default,n),r?.set(i,s)),s}},ft=Hc("existsSync"),Nq=Hc("realpathSync"),Lq=Hc("readFileSync"),qc=Hc("statSync"),xq=(e,t,r)=>{for(;;){let n=Z.default.posix.join(e,t);if(ft(r,n))return n;let i=Z.default.dirname(e);if(i===e)return;e=i}},wq=/^\.{1,2}(\/.*)?$/,ag=e=>{let t=$r(e);return wq.test(t)?t:`./${t}`};function Mq(e,t=!1){let r=e.length,n=0,i="",s=0,o=16,a=0,u=0,c=0,l=0,f=0;function p(R,D){let b=0,B=0;for(;b<R||!D;){let I=e.charCodeAt(n);if(I>=48&&I<=57)B=B*16+I-48;else if(I>=65&&I<=70)B=B*16+I-65+10;else if(I>=97&&I<=102)B=B*16+I-97+10;else break;n++,b++}return b<R&&(B=-1),B}function h(R){n=R,i="",s=0,o=16,f=0}function _(){let R=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&pi(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&pi(e.charCodeAt(n)))for(n++;n<e.length&&pi(e.charCodeAt(n));)n++;else return f=3,e.substring(R,n);let D=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&pi(e.charCodeAt(n))){for(n++;n<e.length&&pi(e.charCodeAt(n));)n++;D=n}else f=3;return e.substring(R,D)}function g(){let R="",D=n;for(;;){if(n>=r){R+=e.substring(D,n),f=2;break}let b=e.charCodeAt(n);if(b===34){R+=e.substring(D,n),n++;break}if(b===92){if(R+=e.substring(D,n),n++,n>=r){f=2;break}switch(e.charCodeAt(n++)){case 34:R+='"';break;case 92:R+="\\";break;case 47:R+="/";break;case 98:R+="\b";break;case 102:R+="\f";break;case 110:R+=`
`;break;case 114:R+="\r";break;case 116:R+="	";break;case 117:let B=p(4,!0);B>=0?R+=String.fromCharCode(B):f=4;break;default:f=5}D=n;continue}if(b>=0&&b<=31)if(vs(b)){R+=e.substring(D,n),f=2;break}else f=6;n++}return R}function T(){if(i="",f=0,s=n,u=a,l=c,n>=r)return s=r,o=17;let R=e.charCodeAt(n);if(ug(R)){do n++,i+=String.fromCharCode(R),R=e.charCodeAt(n);while(ug(R));return o=15}if(vs(R))return n++,i+=String.fromCharCode(R),R===13&&e.charCodeAt(n)===10&&(n++,i+=`
`),a++,c=n,o=14;switch(R){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,i=g(),o=10;case 47:let D=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<r&&!vs(e.charCodeAt(n));)n++;return i=e.substring(D,n),o=12}if(e.charCodeAt(n+1)===42){n+=2;let b=r-1,B=!1;for(;n<b;){let I=e.charCodeAt(n);if(I===42&&e.charCodeAt(n+1)===47){n+=2,B=!0;break}n++,vs(I)&&(I===13&&e.charCodeAt(n)===10&&n++,a++,c=n)}return B||(n++,f=1),i=e.substring(D,n),o=13}return i+=String.fromCharCode(R),n++,o=16;case 45:if(i+=String.fromCharCode(R),n++,n===r||!pi(e.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=_(),o=11;default:for(;n<r&&A(R);)n++,R=e.charCodeAt(n);if(s!==n){switch(i=e.substring(s,n),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(R),n++,o=16}}function A(R){if(ug(R)||vs(R))return!1;switch(R){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){let R;do R=T();while(R>=12&&R<=15);return R}return{setPosition:h,getPosition:()=>n,scan:t?y:T,getToken:()=>o,getTokenValue:()=>i,getTokenOffset:()=>s,getTokenLength:()=>n-s,getTokenStartLine:()=>u,getTokenStartCharacter:()=>s-l,getTokenError:()=>f}}function ug(e){return e===32||e===9}function vs(e){return e===10||e===13}function pi(e){return e>=48&&e<=57}var WO;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(WO||(WO={}));var jc;(function(e){e.DEFAULT={allowTrailingComma:!1}})(jc||(jc={}));function Dq(e,t=[],r=jc.DEFAULT){let n=null,i=[],s=[];function o(a){Array.isArray(i)?i.push(a):n!==null&&(i[n]=a)}return Bq(e,{onObjectBegin:()=>{let a={};o(a),s.push(i),i=a,n=null},onObjectProperty:a=>{n=a},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{let a=[];o(a),s.push(i),i=a,n=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(a,u,c)=>{t.push({error:a,offset:u,length:c})}},r),i[0]}function Bq(e,t,r=jc.DEFAULT){let n=Mq(e,!1),i=[];function s(C){return C?()=>C(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function o(C){return C?()=>C(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(C){return C?F=>C(F,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function u(C){return C?F=>C(F,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let c=o(t.onObjectBegin),l=u(t.onObjectProperty),f=s(t.onObjectEnd),p=o(t.onArrayBegin),h=s(t.onArrayEnd),_=u(t.onLiteralValue),g=a(t.onSeparator),T=s(t.onComment),A=a(t.onError),y=r&&r.disallowComments,R=r&&r.allowTrailingComma;function D(){for(;;){let C=n.scan();switch(n.getTokenError()){case 4:b(14);break;case 5:b(15);break;case 3:b(13);break;case 1:y||b(11);break;case 2:b(12);break;case 6:b(16);break}switch(C){case 12:case 13:y?b(10):T();break;case 16:b(1);break;case 15:case 14:break;default:return C}}}function b(C,F=[],ot=[]){if(A(C),F.length+ot.length>0){let m=n.getToken();for(;m!==17;){if(F.indexOf(m)!==-1){D();break}else if(ot.indexOf(m)!==-1)break;m=D()}}}function B(C){let F=n.getTokenValue();return C?_(F):(l(F),i.push(F)),D(),!0}function I(){switch(n.getToken()){case 11:let C=n.getTokenValue(),F=Number(C);isNaN(F)&&(b(2),F=0),_(F);break;case 7:_(null);break;case 8:_(!0);break;case 9:_(!1);break;default:return!1}return D(),!0}function w(){return n.getToken()!==10?(b(3,[],[2,5]),!1):(B(!1),n.getToken()===6?(g(":"),D(),E()||b(4,[],[2,5])):b(5,[],[2,5]),i.pop(),!0)}function W(){c(),D();let C=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(C||b(4,[],[]),g(","),D(),n.getToken()===2&&R)break}else C&&b(6,[],[]);w()||b(4,[],[2,5]),C=!0}return f(),n.getToken()!==2?b(7,[2],[]):D(),!0}function ee(){p(),D();let C=!0,F=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(F||b(4,[],[]),g(","),D(),n.getToken()===4&&R)break}else F&&b(6,[],[]);C?(i.push(0),C=!1):i[i.length-1]++,E()||b(4,[],[4,5]),F=!0}return h(),C||i.pop(),n.getToken()!==4?b(8,[4],[]):D(),!0}function E(){switch(n.getToken()){case 3:return ee();case 1:return W();case 10:return B(!0);default:return I()}}return D(),n.getToken()===17?r.allowEmptyContent?!0:(b(4,[],[]),!1):E()?(n.getToken()!==17&&b(9,[],[]),!0):(b(4,[],[]),!1)}var YO;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(YO||(YO={}));var KO;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(KO||(KO={}));var Fq=Dq,XO;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(XO||(XO={}));var QO=(e,t)=>Fq(Lq(t,e,"utf8")),Uq=Symbol("implicitBaseUrl"),kq=()=>{let{findPnpApi:e}=zO.default;return e&&e(process.cwd())},cg=(e,t,r,n)=>{let i=`resolveFromPackageJsonPath:${e}:${t}:${r}`;if(n!=null&&n.has(i))return n.get(i);let s=QO(e,n);if(!s)return;let o=t||"tsconfig.json";if(!r&&s.exports)try{let[a]=VO(s.exports,t,["require","types"]);o=a}catch{return!1}else!t&&s.tsconfig&&(o=s.tsconfig);return o=Z.default.join(e,"..",o),n?.set(i,o),o},lg="package.json",dg="tsconfig.json",Gq=(e,t,r)=>{let n=e;if(e===".."&&(n=Z.default.join(n,dg)),e[0]==="."&&(n=Z.default.resolve(t,n)),Z.default.isAbsolute(n)){if(ft(r,n)){if(qc(r,n).isFile())return n}else if(!n.endsWith(".json")){let h=`${n}.json`;if(ft(r,h))return h}return}let[i,...s]=e.split("/"),o=i[0]==="@"?`${i}/${s.shift()}`:i,a=s.join("/"),u=kq();if(u){let{resolveRequest:h}=u;try{if(o===e){let _=h(Z.default.join(o,lg),t);if(_){let g=cg(_,a,!1,r);if(g&&ft(r,g))return g}}else{let _;try{_=h(e,t,{extensions:[".json"]})}catch{_=h(Z.default.join(e,dg),t)}if(_)return _}}catch{}}let c=xq(t,Z.default.join("node_modules",o),r);if(!c||!qc(r,c).isDirectory())return;let l=Z.default.join(c,lg);if(ft(r,l)){let h=cg(l,a,!1,r);if(h===!1)return;if(h&&ft(r,h)&&qc(r,h).isFile())return h}let f=Z.default.join(c,a),p=f.endsWith(".json");if(!p){let h=`${f}.json`;if(ft(r,h))return h}if(ft(r,f)){if(qc(r,f).isDirectory()){let h=Z.default.join(f,lg);if(ft(r,h)){let g=cg(h,"",!0,r);if(g&&ft(r,g))return g}let _=Z.default.join(f,dg);if(ft(r,_))return _}else if(p)return f}},qq=(e,t,r,n)=>{let i=Gq(e,t,n);if(!i)throw new Error(`File '${e}' not found.`);if(r.has(i))throw new Error(`Circularity detected while resolving configuration: ${i}`);r.add(i);let s=Z.default.dirname(i),o=ZO(i,n,r);delete o.references;let{compilerOptions:a}=o;if(a){let u=["baseUrl","outDir"];for(let c of u){let l=a[c];l&&(a[c]=$r(Z.default.relative(t,Z.default.join(s,l)))||"./")}}return o.files&&(o.files=o.files.map(u=>$r(Z.default.relative(t,Z.default.join(s,u))))),o.include&&(o.include=o.include.map(u=>$r(Z.default.relative(t,Z.default.join(s,u))))),o.exclude&&(o.exclude=o.exclude.map(u=>$r(Z.default.relative(t,Z.default.join(s,u))))),o},ZO=(e,t,r=new Set)=>{let n;try{n=Nq(t,e)}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}let i=QO(n,t)||{};if(typeof i!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);let s=Z.default.dirname(n);if(i.compilerOptions){let{compilerOptions:o}=i;o.paths&&!o.baseUrl&&(o[Uq]=s)}if(i.extends){let o=Array.isArray(i.extends)?i.extends:[i.extends];delete i.extends;for(let a of o.reverse()){let u=qq(a,s,r,t),c={...u,...i,compilerOptions:{...u.compilerOptions,...i.compilerOptions}};u.watchOptions&&(c.watchOptions={...u.watchOptions,...i.watchOptions}),i=c}}if(i.compilerOptions){let{compilerOptions:o}=i,a=["baseUrl","rootDir"];for(let c of a){let l=o[c];if(l){let f=Z.default.resolve(s,l),p=ag(Z.default.relative(s,f));o[c]=p}}let{outDir:u}=o;u&&(Array.isArray(i.exclude)||(i.exclude=[]),i.exclude.includes(u)||i.exclude.push(u),o.outDir=ag(u))}else i.compilerOptions={};if(i.files&&(i.files=i.files.map(ag)),i.include&&(i.include=i.include.map($r)),i.watchOptions){let{watchOptions:o}=i;o.excludeDirectories&&(o.excludeDirectories=o.excludeDirectories.map(a=>$r(Z.default.resolve(s,a))))}return i},JO=(e,t=new Map)=>ZO(e,t);var{join:TY}=Z.default.posix;var jq=["node_modules","bower_components","jspm_packages"],yY=`(?!(${jq.join("|")})(/|$))`;var RY=process.platform==="win32";var cv=K(sv()),$q="yarn.build.json",lv=80,Vq="-".repeat(lv);var gg=class{tracer=new kt("yarn.build");project;configuration;pluginConfiguration;report;runCommand;cli;runLog;runGraph=new kc;runLength=0;runTargets=[];runMutexes={};currentRunTarget;dryRun=!1;ignoreRunCache=!1;verbose=!1;continueOnError=!1;concurrency;limit;queue;entrypoints=new Set;excluded=new Set;runReporter=new av.EventEmitter;ignoreDependencies=!1;failFast=!1;runReport={mutex:new hg.Mutex,totalJobs:0,skipCount:0,previousOutput:"",successCount:0,failCount:0,ignoredCount:0,workspaces:{},done:!1};header="";nextUnitOfWork=[];errorLogFile;excludeWorkspacePredicate;checkIfRunIsRequiredCache={};planCache={};hasSetup=!1;constructor({project:t,report:r,runCommand:n,cli:i,configuration:s,pluginConfiguration:o,dryRun:a,ignoreRunCache:u,verbose:c,concurrency:l,continueOnError:f,excludeWorkspacePredicate:p,ignoreDependencies:h,failFast:_}){let g=l??(0,ov.cpus)().length;this.configuration=s,this.pluginConfiguration=o,this.project=t,this.report=r,this.runCommand=n,this.cli=i,this.dryRun=a,this.ignoreRunCache=u,this.verbose=c,this.concurrency=g,this.continueOnError=f,this.limit=_f(g),this.queue=new Li({concurrency:g,carryoverConcurrencyCount:!0,timeout:5e4,throwOnTimeout:!0,autoStart:!0}),this.excludeWorkspacePredicate=p,this.verbose&&(this.errorLogFile=V.xfs.createWriteStream(this.getRunErrorPath(),{flags:"a"})),this.ignoreDependencies=h,this.failFast=_}async setup(){this.runLog=await this.readRunLog(),this.setupRunReporter(),this.hasSetup=!0}getRunErrorPath(){return V.ppath.resolve(this.project.cwd,"yarn.build-error.log")}getRunLogPath(){return V.ppath.resolve(this.project.cwd,".yarn",$q)}async readRunLog(){let t=new Map;try{let r=await V.xfs.readJsonPromise(this.getRunLogPath());if(r&&r.packages)for(let n in r.packages)t.set(n,{checksum:r.packages[n].checksum,status:r.packages[n].status,rerun:r.packages[n].rerun,command:this.runCommand})}catch{}return t}async saveRunLog(){if(!this.runLog)return;let t;try{t=await V.xfs.readJsonPromise(this.getRunLogPath())}catch{}let r={comment:"This is an auto-generated file, it keeps track of whats been built. This is a local file, don't store this in version control.",packages:{...t&&t.packages}};for(let[n]of this.runLog)r.packages[n]={...r.packages[n],...this.runLog.get(n)};await V.xfs.writeJsonPromise(this.getRunLogPath(),r)}setupRunReporter=()=>{this.runReporter.on("pending",(t,r,n)=>{this.runReport.mutex.acquire().then(i=>{this.runReport.workspaces[t]={name:n,stdout:[],stderr:[],done:!1,fail:!1,locator:r},i()})}),this.runReporter.on("start",(t,r,n,i)=>{this.runReport.mutex.acquire().then(s=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],start:Date.now(),runScript:i,name:n,locator:r},s()})}),this.runReporter.on("info",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stdout.push(r),n()})}),this.runReporter.on("error",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),n()})}),this.runReporter.on("success",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],done:!0},this.runReport.successCount++;let n=this.runReport.workspaces[t];if($e.default){let i=`\u2705 ${t}`.padEnd(60),s=Wr(0,n.runtimeSeconds??0).padStart(19);process.stdout.write(`${i}${s}
`)}r()})}),this.runReporter.on("skipped",t=>{this.runReport.mutex.acquire().then(r=>{if(this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].skipped=!0,this.runReport.skipCount++,r(),$e.default){let n=`\u23E9 ${t} `.padEnd(60),i="--".padStart(19);process.stdout.write(`${n}${i}
`)}})}),this.runReporter.on("ignored",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].ignored=!0,this.runReport.ignoredCount++,r();let n=this.runReport.workspaces[t],i=this.runLog?.get(`${t}#${this.runCommand}`);if($e.default){let s=`[IGNORE${i?.exitCode?`: ${i?.exitCode}`:""}] ${n.name} `.padEnd(60),o="--".padStart(19);process.stdout.write(`${s}${o}
`)}})}),this.runReporter.on("fail",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].fail=!0,this.runReport.failCount++,n();let i=this.runReport.workspaces[t],s=this.runLog?.get(`${t}#${this.runCommand}`);if($e.default){let o=`\u274C ${t}`.padEnd(50),a=`${s?.exitCode?`(exit code: ${s?.exitCode})`:"\u2192"} ${Wr(0,i.runtimeSeconds??0)}`.padStart(29);process.stdout.write(`${o}${a}
`)}})})};getDependenciesCount=async t=>{let r=0;for(let n of k.Manifest.hardDependencies)for(let i of t.manifest.getForScope(n).values())this.project.tryWorkspaceByDescriptor(i)!==null&&(r+=1);return r};removeFromExcluded(t){this.excluded.has(t)&&this.excluded.delete(t)}async addRunTarget(t){if(this.excluded.has(t))return;if(this.excludeWorkspacePredicate(t)){this.excluded.add(t);return}if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runGraph.addNode(t.relativeCwd);await this.plan(r,t)}plan=async(t,r)=>{if(!t)throw new Error("Internal error: lost reference to parent workspace. Please open an issue.");if(typeof this.planCache[r.relativeCwd]<"u")return this.planCache[r.relativeCwd];this.runGraph.checkCyclical(t);let n=!1,i=!1;if(this.runMutexes[r.relativeCwd]=new hg.Mutex,this.ignoreDependencies===!1)for(let o of k.Manifest.hardDependencies)for(let a of r.manifest.getForScope(o).values()){let u=this.project.tryWorkspaceByDescriptor(a);if(u===null||this.excludeWorkspacePredicate(u)||typeof u.manifest.scripts.get(this.runCommand)>"u")continue;let c=this.runGraph.addNode(u.relativeCwd);t.addDependency(c),this.runGraph.checkCyclical(c),await this.plan(c,u)&&(this.runGraph.addRunCallback(c,this.createRunItem(u)),i=!0,this.removeFromExcluded(u))}let s=!1;if(r!==this.project.topLevelWorkspace&&(s=await this.checkIfRunIsRequired(r)),this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator),i||s)n=!0,this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator,`${r.manifest.name?.scope?`@${r.manifest.name?.scope}/`:""}${r.manifest.name?.name}`),this.runGraph.addRunCallback(t,this.createRunItem(r)),this.removeFromExcluded(r),this.entrypoints.add(t),this.runTargets.push(r);else{let o=this.runLog?.get(`${r.relativeCwd}#${this.runCommand}`);o&&this.runLog?.set(`${r.relativeCwd}#${this.runCommand}`,{checksum:o.checksum,status:"succeeded",rerun:!1,command:this.runCommand})}if(n){let o=r.getRecursiveWorkspaceDependents();for(let u of o)this.markWorkspaceForRerun(u);let a=Array.from(r.getRecursiveWorkspaceDependencies()).filter(u=>this.isWorkspaceMarkedForRerun(u));for(let u of a){let c=u.getRecursiveWorkspaceDependents();for(let l of c)this.markWorkspaceForRerun(l)}}return this.planCache[r.relativeCwd]=n,n};markWorkspaceForRerun(t){if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:r?.checksum??"",status:"succeeded",rerun:!0,command:this.runCommand})}isWorkspaceMarkedForRerun(t){return typeof t.manifest.scripts.get(this.runCommand)>"u"?!1:this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`)?.rerun??!1}async checkIfRunIsRequired(t){if(typeof this.checkIfRunIsRequiredCache[t.relativeCwd]<"u")return this.checkIfRunIsRequiredCache[t.relativeCwd];if(typeof t.manifest.scripts.get(this.runCommand)!="string")return this.checkIfRunIsRequiredCache[t.relativeCwd]=!1,!1;let r=!1;this.ignoreRunCache&&(r=!0);let n=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);n?.rerun&&(r=!0);for(let p of t.getRecursiveWorkspaceDependencies())if(this.checkIfRunIsRequiredCache[p.relativeCwd]===!0){r=!0;break}let i=mE(t.manifest.raw),s=i?.input!=null,o=typeof i?.output<"u",a=i.input??this.pluginConfiguration.folders.input,u=new Set,c=new Set(Array.isArray(a)?a:[a]),l=i.output??[],f=new Set(Array.isArray(l)?l:[l]);if(o||(typeof t?.manifest?.raw?.bin=="string"?f.add(t.manifest.raw.bin):typeof t?.manifest?.raw?.directories?.bin=="string"?f.add(t.manifest.raw.directories.bin):typeof t?.manifest?.raw?.files=="string"?f.add(t.manifest.raw.files):Array.isArray(t?.manifest?.raw?.files)?t.manifest.raw.files.forEach(p=>p&&f.add(p)):typeof t?.manifest?.raw?.main=="string"&&f.add(t.manifest.raw.main)),!s||!o)try{let p=i.tsconfig??"tsconfig.json",h=V.xfs.pathUtils.join(t.cwd,V.npath.toPortablePath(p));if(await V.xfs.existsPromise(h)){let g=JO(V.npath.fromPortablePath(h)),T=V.ppath.dirname(h);if(!s){if(g.compilerOptions?.incremental){let A=g.compilerOptions.tsBuildInfoFile??`${V.ppath.basename(h,V.ppath.extname(h))}.tsbuildinfo`,y=V.ppath.join(T,V.npath.toPortablePath(A)),R=V.ppath.relative(t.cwd,y);u.add(R)}g.include?.forEach(A=>{let y=V.ppath.join(T,V.npath.toPortablePath(A)),R=V.ppath.relative(t.cwd,y);c.add(R)}),g.exclude?.forEach(A=>{let y=V.ppath.join(T,V.npath.toPortablePath(A)),R=V.ppath.relative(t.cwd,y);u.add(R)})}if(!o&&g.compilerOptions?.outDir!=null){let A=V.ppath.join(T,V.npath.toPortablePath(V.npath.toPortablePath(g.compilerOptions.outDir))),y=V.ppath.relative(t.cwd,A);f.add(y)}}}catch(p){console.warn(t.relativeCwd,`
`,p)}f.size===0&&(Array.isArray(this.pluginConfiguration.folders.output)?this.pluginConfiguration.folders.output.forEach(p=>p&&f.add(p)):typeof this.pluginConfiguration.folders.output=="string"&&f.add(this.pluginConfiguration.folders.output));{let p=[...new Set(["node_modules",...f,...u])].map(g=>V.npath.toPortablePath(g)),h=[...c].map(g=>V.npath.toPortablePath(g)),_=await this.runReport.mutex.acquire();try{let g=await Wq(t.cwd,h,p);if(n?.checksum!==g&&(r=!0),!r){let T=V.npath.fromPortablePath(t.cwd);(await Promise.all([...f].map(async y=>{try{return(await af(y,{dot:!0,cwd:T})).length===0}catch{return!1}}))).some(y=>y===!0)&&(r=!0)}this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:g,status:r?"succeeded":"pending",rerun:r,command:this.runCommand})}catch(g){this.runReport.workspaces[t.relativeCwd]?.stderr.push(new Error(`${t.relativeCwd}: failed to get lastModified (${g})`))}finally{_()}}return this.checkIfRunIsRequiredCache[t.relativeCwd]=r,r}performDryRun=async t=>await this.tracer.startSpan({name:"performDryRun",ctx:t},async({ctx:r})=>{let n=this.concurrency;this.concurrency=1;let i="",s={1:[]};this.runGraph.dryRunCallback=(u,c)=>{s[c]?s[c].push(u.id):s[c]=[u.id]},await this.runGraph.run(r,Array.from(this.entrypoints),!0);let o=(u,c,l,f)=>{let p=l?"\u2514\u2500":f&&l?"\u2514\u2500\u252C\u2500":"\u251C\u2500";return`${u==0?"":"  ".repeat(u)}${p}[${u}] ${c}`},a=Object.keys(s);return a.forEach((u,c)=>{let l=parseInt(u),f=s[l],p=c==a.length-1;f.forEach((h,_)=>{let g=this.runGraph.getNode(h);i+=o(l,h,_==f.length-1,p),g instanceof Rs&&g.skip&&(i+="(skip)"),i+=`
`})}),this.concurrency=n,i});run=async t=>await this.tracer.startSpan({name:"command supervisor run",ctx:t},async({ctx:r})=>{let n="";if(this.hasSetup===!1)throw new Error("RunSupervisor is not setup, you need to call await supervisor.setup()");if(this.runReport.runStart=Date.now(),($e.default||this.dryRun)&&(n+=`${this.formatHeader("Run Order")+`
`}`,n+=await this.performDryRun(r),$e.default||(n+=`${this.formatHeader(`Dry Run / Command: ${this.runCommand} / Total: ${this.runGraph.runSize}`,0,!0)+`
`}`),process.stdout.write(n),n="",this.dryRun))return!0;$e.default||Ct.pad(this.concurrency+3),$e.default&&process.stdout.write(`
${this.formatHeader(`Run / Command: ${this.runCommand} / Concurrency: ${this.concurrency}`,0,!1)+`
`}`),this.raf(this.waitUntilDone),this.currentRunTarget=this.runTargets.length>1?"All":this.runTargets[0]?.relativeCwd??"Nothing to run",$e.default||process.stderr.write(`
`),this.header=this.generateHeaderString(),await this.runGraph.run(r,Array.from(this.entrypoints));let i=await this.runReport.mutex.acquire();this.runReport.done=!0,i();let s=this.generateFinalReport();return typeof s=="string"&&process.stdout.write(`
${s}
`),await this.saveRunLog(),this.runReport.failCount===0});raf=t=>{setImmediate(()=>t(Date.now()))};waitUntilDone=t=>{if(this.runReport.done)return;let r=90,n="";$e.default?this.updateProgressCI(t):(n=this.generateProgressString(t),Ct.cursorUp(Ct.linesRequired(this.runReport.previousOutput,process.stdout.columns)),Ct.clearScreenDown()),typeof n<"u"&&typeof n=="string"&&process.stdout.write(n),this.runReport.previousOutput=n,Yq(r).then(()=>{this.raf(this.waitUntilDone)})};grey=t=>k.formatUtils.pretty(this.configuration,t,"grey");formatHeader(t,r=0,n=!1){let i="-",s=i.repeat(r),o=this.grey(s),a=this.grey("["),u=this.grey("]"),c=`${o}${a} ${t} ${u}`,l=gr(c).length,f=n?"[ yarn.build ]":"",p=Math.max(lv-(l+f.length),0),h=i.repeat(p),_=this.grey(h),g=this.grey(f);return`${c}${_}${g}`}generateHeaderString(){return`${k.formatUtils.pretty(this.configuration,`${this.runCommand}`,k.FormatType.CODE)} for ${k.formatUtils.pretty(this.configuration,this.currentRunTarget?this.currentRunTarget:"",k.FormatType.SCOPE)}${this.dryRun?k.formatUtils.pretty(this.configuration," --dry-run",k.FormatType.NAME):""}`}updateRuntime(t){for(let r in this.runReport.workspaces){let n=this.runReport.workspaces[r];!n||!n.start||n.done||this.runReport.runStart&&(this.runReport.workspaces[r].runtimeSeconds=t-n.start)}}updateProgressCI(t){this.updateRuntime(t)}generateProgressString(t){let r="",n=o=>this.grey(`[${o}]`),i=k.formatUtils.pretty(this.configuration,"IDLE","grey");r+=this.formatHeader(this.generateHeaderString())+`
`,this.updateRuntime(t);let s=1;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(!a||!a.start||a.done)continue;let u=k.formatUtils.pretty(this.configuration,o,k.FormatType.PATH),c=k.formatUtils.pretty(this.configuration,`(${a.runScript})`,k.FormatType.REFERENCE),l=a.start?k.formatUtils.pretty(this.configuration,Wr(a.start,t),k.FormatType.RANGE):"",f=n(s++),p=" ".repeat(f.length-1),h=k.formatUtils.pretty(this.configuration,a.name,k.FormatType.NAME),_=`${f} ${h}${k.formatUtils.pretty(this.configuration,"@","grey")}${u} ${c} ${l}
`,g="",T="",A="";gr(_).length>=process.stdout.columns&&(g=`${f} ${u}${h}
`,T=`${p} ${c} ${l}
`,gr(g).length>=process.stdout.columns&&(g=wi(`${f} ${u}
`,0,process.stdout.columns),T=wi(`${p} ${h}
`,0,process.stdout.columns),A=wi(`${p} ${c} ${l}
`,0,process.stdout.columns)),_=g+T+A),r+=_}for(s;s<this.concurrency+1;)r+=`${n(s++)} ${i}
`;return this.runReport.runStart&&(r+=this.generateRunCountString(t)),r}generateRunCountString=t=>{let r="";if(this.runReport.runStart){let n=k.formatUtils.pretty(this.configuration,`${this.runReport.successCount}`,"green"),i=k.formatUtils.pretty(this.configuration,`${this.runReport.failCount}`,"red"),s=k.formatUtils.pretty(this.configuration,`${this.runGraph.runSize}`,"white");r+=this.formatHeader(`${n}:${i}/${s} ${Wr(this.runReport.runStart,t)}`,0,!0)+`
`}return r};generateFinalReport=()=>{$e.default||(Ct.cursorUp(Ct.linesRequired(this.runReport.previousOutput,process.stdout.columns)),Ct.clearScreenDown());let t=!1,r="";if(this.runReport.failCount!==0&&(t=!0),this.verbose&&(t=!0),$e.default&&(t=!0),t){let s=[];r+=`${this.formatHeader(this.header)+`
`}`;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(a.fail&&s.push(o),!(this.runReport.failCount!==0&&a.fail===!1)){if(a.stdout.length!==0||a.stderr.length!==0){let u=this.formatHeader(`Output: ${k.formatUtils.pretty(this.configuration,o,k.FormatType.PATH)}`,2);r+=`
${u+`
`}`}a.stdout.length!==0&&a.stdout.forEach(u=>{u.split(`
`).forEach(l=>{typeof l<"u"&&l.length!==0&&(r+=`${l+`
`}`)})}),a.stderr.length!==0&&(r+=`
${"[stderr]"+`
`}`,a.stderr.forEach(c=>{(c instanceof Error?c.toString():`${c}`).split(`
`).forEach(p=>{typeof p<"u"&&p.length!==0&&(r+=`${p+`
`}`)})}))}}if(s.length>=2){r+=`${this.grey(Vq)+`
`}`;let o=this.grey(`ERROR for script ${this.header}
The following packages returned an error.
`);r+=`${o}`,s.forEach(a=>{let u=`- ${k.formatUtils.pretty(this.configuration,a,k.FormatType.PATH)}`;r+=`${u+`
`}`})}}let n=this.formatHeader(`${k.formatUtils.pretty(this.configuration,`${this.runCommand} finished`,this.runReport.failCount===0?"green":"red")}${this.runReport.failCount!=0?k.formatUtils.pretty(this.configuration,` with ${this.runReport.failCount} errors`,"red"):""}`,0,!0)+`
`;if(r+=`
`+this.formatHeader("Summary")+`
`,this.runReport.runStart){let{successCount:s,failCount:o,ignoredCount:a,skipCount:u}=this.runReport,c=this.runGraph.runSize-a,l=c-o-s-u,f=k.formatUtils.pretty(this.configuration,`Success: ${s}`,"green"),p=k.formatUtils.pretty(this.configuration,`Fail: ${o}`,"red"),h=k.formatUtils.pretty(this.configuration,`Skipped: ${u}`,"white"),_=k.formatUtils.pretty(this.configuration,`Excluded: ${this.excluded.size}`,"white"),g=k.formatUtils.pretty(this.configuration,`Up to date: ${l}`,"white"),T=k.formatUtils.pretty(this.configuration,`Total: ${c}`,"white");if(r+=f+`
`,r+=g+`
`,r+=p+`
`,this.verbose&&o>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let y=this.runReport.workspaces[A];y.fail&&(r+=` - ${k.formatUtils.pretty(this.configuration,A,"grey")}${k.formatUtils.pretty(this.configuration,y.locator,"IDENT")}
`)}),r+=h+`
`,this.verbose&&u>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let y=this.runReport.workspaces[A];y.skipped&&(r+=` - ${k.formatUtils.pretty(this.configuration,A,"grey")}${k.formatUtils.pretty(this.configuration,y.locator,"IDENT")}
`)}),r+=_+`
`,this.verbose&&this.excluded.size>0)for(let A of this.excluded)r+=` - ${k.formatUtils.pretty(this.configuration,A.relativeCwd,"grey")}${k.formatUtils.pretty(this.configuration,A.anchoredLocator,"IDENT")}
`;r+=T+`
`+this.grey("---")+`
`}let i=50;for(let s in this.runReport.workspaces){let o=this.runReport.workspaces[s];i+=o.runtimeSeconds??0}if(this.runReport.runStart&&this.runGraph.runSize>1){let s=i,a=Date.now()-this.runReport.runStart,u=Wr(a,s);r+=`Cumulative: (cpu): ${Wr(0,i)}
`,r+=`Saved: ${u}
`}return this.runReport.runStart&&(r+="Runtime (wall): "+Wr(Date.now(),this.runReport.runStart)+`
`),r+=n,r+=`
`,r};createRunItem=t=>async(r,n)=>await this.limit(async()=>this.tracer.startSpan({name:"command",ctx:r},async({span:i,ctx:s})=>{let o=t.relativeCwd,a={[X.PACKAGE_NAME]:t.anchoredLocator.name,[X.PACKAGE_DIRECTORY]:t.relativeCwd,[X.PACKAGE_COMMAND]:this.runCommand};typeof t.anchoredLocator.scope=="string"&&(a[X.PACKAGE_SCOPE]=`@${t.anchoredLocator.scope}`);let u=t.manifest.scripts.get(this.runCommand);typeof u=="string"&&(a[X.YARN_BUILD_PACKAGE_RUN_COMMAND]=u);let c=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);if(this.runReporter.emit("start",t.relativeCwd,t.anchoredLocator,`${t.manifest.name?.scope?`@${t.manifest.name?.scope}/`:""}${t.manifest.name?.name}`,u),i.addEvent("start"),i.setAttributes(a),!u)return this.verbose&&this.runReporter.emit("info",t.relativeCwd,`[skip] No \`${this.runCommand}\` script in manifest.`),this.runReporter.emit("ignored",t.relativeCwd),i.addEvent("ignored"),!0;try{if(this.runReport.failCount!==0&&!this.continueOnError&&(this.runReporter.emit("skipped",t.relativeCwd),i.addEvent("skipped"),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"skipped",rerun:!1,command:this.runCommand}),i.addEvent("runReport failcount is not 0, exiting early"),this.continueOnError===!1))return!1;let l=await this.cli(s,this.runCommand,t.cwd,this.runReporter,o);if(i.setAttribute(X.YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT,l),l!==0)return this.runReporter.emit("fail",t.relativeCwd),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand,exitCode:`${l}`}),this.failFast===!0&&($e.default&&process.stdout.write(`--fail-fast is set, terminating all processes
`),Gc()),!1;this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"succeeded",rerun:!1,command:this.runCommand}),this.runReporter.emit("success",t.relativeCwd)}catch(l){return this.runReporter.emit("fail",t.relativeCwd,l),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand}),(typeof l=="string"||l instanceof Error)&&i.recordException(l),i.setStatus({code:uv.SpanStatusCode.ERROR,message:"Command failed"}),this.continueOnError===!1&&(n(),Gc()),!1}return!1}))},Wq=async(e,t,r)=>{let n=await af(t,{cwd:V.npath.fromPortablePath(e),absolute:!0,expandDirectories:!0,dot:!0,ignore:r});n.sort();let i=await Promise.all(n.map(async s=>{let o=V.npath.toPortablePath(s),a=await V.xfs.statPromise(o);return{path:V.ppath.relative(e,o),size:a.isFile()?a.size:0,lastModified:a.isFile()?a.mtimeMs:0}}));return(0,cv.default)(i)},Wr=(e,t)=>{let r=Math.abs(t-e),n="",i=Math.trunc(r/6e4);return i&&(n+=`${i}m`,r-=i*6e4),r&&(i&&(n+=" "),n+=`${(r/1e3).toFixed(2)}s`),n};function Yq(e){return new Promise(t=>setTimeout(t,e))}var dv=gg;var fv=v("child_process"),pv=v("util"),Kq=(0,pv.promisify)(fv.exec);function Xq(e){let{commit:t,sinceBranch:r}=e;if(t)return`git diff --name-only ..${t}`;if(r)return`git diff --name-only ${r}...`;throw new Error("Unable to determine how to detect changes.")}async function mg(e){try{let t=Xq(e),{stdout:r}=await Kq(t),n=r.split(`
`),s=e.root.project.workspaces.filter(o=>n.some(a=>a.startsWith(o.relativeCwd.replace(/^\.\//,"")))).reduce((o,a)=>{let u=a.getRecursiveWorkspaceDependents();return new Set([...o,...u,a])},new Set);return Array.from(s.values())}catch{return[]}}var Yr=v("@yarnpkg/core");var _v=(e,t)=>{let r=[];for(let n of e.workspacesCwds){let i=t.workspacesByCwd.get(n);i&&r.push(i,..._v(i,t))}return r},hv=async({targetWorkspace:e,project:t,supervisor:r})=>{try{if(e.workspacesCwds.size!==0){let n=_v(e,t);for(let i of n)for(let s of Yr.Manifest.hardDependencies){for(let o of i.manifest.getForScope(s).values()){let a=t.tryWorkspaceByDescriptor(o);a!==null&&await r.addRunTarget(a)}await r.addRunTarget(i)}await r.addRunTarget(e)}else await r.addRunTarget(e)}catch(n){if(n instanceof bs){let i=`${r.formatHeader("FATAL")}

You have a cyclic dependency.`,s=n.node.length<n.dep.length+4?"\u21B0":"",o=n.node.length>n.dep.length+4?"\u2934":"";i+=`

${Yr.formatUtils.pretty(r.configuration,n.node,"white")} ${s}
 \u21B3 ${Yr.formatUtils.pretty(r.configuration,n.dep,"red")} ${o}

`,i+=Yr.formatUtils.pretty(r.configuration,`
---

To fix this error you must remove the cyclic dependency.

Workspaces cannot directly or indirectly depend on each other. When running
the provided command yarn.build uses a parallelsied topological sort. This
maximises throughput (saving you time) while ensuring dependencies are run in
the order declared.

In a cyclic dependency A depends on B, which depends on A. Or in an indirect cyclic
dependency, A depends on B, which depends on C, and C depends on A.

In both cases A cannot be built, because to we cannot determine which one goes
first.

---
While some tooling may adapt to cyclic dependencies yarn.build cannot. Doing so
is unsound and unpredictable which goes against the stated goals of the tool.

In most cases this issue occurs by accident when you delcare a dependency on the
wrong package.

In some cases yuo may actually want the cyclic dependency. As that's not
possible, find the parts that are shared and move them to their own package
that both packages can depend on.
---

`,"grey"),i+=Yr.formatUtils.pretty(r.configuration,"FATAL: You have a cyclic dependency.","red"),console.error(i),process.exit(2)}else console.error("An error occured in yarn.build.",n)}};var Is=K(x());var Ns=class extends $c.BaseCommand{static paths=[["build"]];json=fe.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});all=fe.Option.Boolean("-A,--all",!1,{description:"run for all workspaces of a project"});buildCommand=fe.Option.String("-c,--build-command","build",{description:'the command to be run in each package (if available), defaults to "build"'});interlaced=fe.Option.Boolean("-i,--interlaced",!0,{description:"If false it will instead buffer the output from each process and print the resulting buffers only after their source processes have exited. Defaults to false."});verbose=fe.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});dryRun=fe.Option.Boolean("-d,--dry-run",!1,{description:"simulate running a job, but not actually run it"});ignoreBuildCache=fe.Option.Boolean("-r,--ignore-cache",!1,{description:"every package will be built, regardless of whether is has changed or not."});maxConcurrency=fe.Option.String("-m,--max-concurrency",{description:"is the maximum number of jobs that can run at a time, defaults to the number of logical CPUs on the current machine."});continueOnError=fe.Option.Boolean("--continue-on-error",!1,{description:"if a job fails, continue with the rest"});failFast=fe.Option.Boolean("--fail-fast",!1,{description:"if a job fails, terminate other running jobs"});exclude=fe.Option.Array("--exclude",{description:"exclude specifc packages or glob paths from being built, including their dependencies."});excludeCurrent=fe.Option.Boolean("--exclude-current",!1,{description:"run for this workspaces dependencies, but not this workspace. Useful for running as part of a `dev` command."});onlyGitChanges=fe.Option.Boolean("--changes",!1,{description:"only run for packages that were changed in the last commit"});onlyGitChangesSinceCommit=fe.Option.String("--since",{description:"only run for packages that were changed since the given commit"});onlyGitChangesSinceBranch=fe.Option.String("--since-branch",{description:"only run for packages that have changes compared to the give branch. Uses 'git diff --name-only branch...'",arity:1});onlyCurrent=fe.Option.Boolean("--only-current",!1,{description:"only run for the current workspace"});ignoreDependencies=fe.Option.Boolean("--ignore-dependencies",!1,{description:"when true, don't run for packages this one depends on"});buildTargets=fe.Option.Rest({name:"workspaceNames"});static usage=fe.Command.Usage({category:"Build commands",description:"build a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are built in the right order.

    `});forceQuit=!1;commandType="build";async execute(){return await new kt("yarn.build").startSpan({name:`yarn ${this.commandType}`,propegateFromEnv:!0},async({span:r,ctx:n})=>{r.setAttributes({[X.YARN_BUILD_FLAGS_OUTPUT_JSON]:this.json,[X.YARN_BUILD_FLAGS_ALL]:this.all,[X.YARN_BUILD_FLAGS_TARGETS]:this.buildTargets,[X.YARN_BUILD_FLAGS_COMMAND]:this.buildCommand,[X.YARN_BUILD_FLAGS_INTERLACED]:this.interlaced,[X.YARN_BUILD_FLAGS_VERBOSE]:this.verbose,[X.YARN_BUILD_FLAGS_DRY_RUN]:this.dryRun,[X.YARN_BUILD_FLAGS_IGNORE_CACHE]:this.ignoreBuildCache,[X.YARN_BUILD_FLAGS_MAX_CONCURRENCY]:this.maxConcurrency,[X.YARN_BUILD_FLAGS_CONTINUE_ON_ERROR]:this.continueOnError,[X.YARN_BUILD_FLAGS_EXCLUDE]:this.exclude,[X.YARN_BUILD_FLAGS_EXCLUDE_CURRENT]:this.excludeCurrent,[X.YARN_BUILD_FLAGS_CHANGES]:this.onlyGitChanges,[X.YARN_BUILD_FLAGS_SINCE]:this.onlyGitChangesSinceCommit,[X.YARN_BUILD_FLAGS_SINCE_BRANCH]:this.onlyGitChangesSinceBranch,[X.YARN_BUILD_FLAGS_ONLY_CURRENT]:this.onlyCurrent});let i=await Fe.Configuration.find(this.context.cwd,this.context.plugins),{project:s,workspace:o}=await Fe.Project.find(i,this.context.cwd);if(!o)throw new $c.WorkspaceRequiredError(s.cwd,this.context.cwd);let a=this.all?s.topLevelWorkspace:o,u=!1;a==s.topLevelWorkspace&&(u=!0);let c=[a,...this.buildTargets.length>0?a.getRecursiveWorkspaceChildren():[]];typeof this.onlyGitChangesSinceBranch=="string"?c=await mg({root:s.topLevelWorkspace,sinceBranch:this.onlyGitChangesSinceBranch}):(this.onlyGitChanges||this.onlyGitChangesSinceCommit)&&(c=await mg({root:s.topLevelWorkspace,commit:this.onlyGitChangesSinceCommit??"1"})),Array.isArray(this.exclude)||(this.exclude=[]),this.excludeCurrent&&this.exclude.push(Fe.structUtils.stringifyIdent(o.anchoredLocator)),!u&&this.onlyCurrent&&(this.maxConcurrency="1");let l=T=>!u&&this.onlyCurrent?T!=o:this.exclude?.some(A=>Cs.default.isMatch(Fe.structUtils.stringifyIdent(T.anchoredLocator),A)||Cs.default.isMatch(T.cwd,`${i.projectCwd}${Eg.default.posix.sep}${A}`))??!1,f=T=>!u&&this.onlyCurrent?T==o:this.buildTargets.some(A=>Cs.default.isMatch(Fe.structUtils.stringifyIdent(T.anchoredLocator),A)||Cs.default.isMatch(T.cwd,`${i.projectCwd}${Eg.default.posix.sep}${A}`)),p=this.buildTargets.length>0?c.filter(f):c,h=await gE(i);this.continueOnError=this.continueOnError??!!h.bail;let _=this.maxConcurrency===void 0?(0,gv.cpus)().length:parseInt(this.maxConcurrency);r.setAttributes({[X.YARN_BUILD_CONFIG_FOLDERS_INPUT]:h.folders.input,[X.YARN_BUILD_CONFIG_FOLDERS_OUTPUT]:h.folders.output,[X.YARN_BUILD_CONFIG_EXCLUDE]:h.exclude,[X.YARN_BUILD_CONFIG_BAIL]:h.bail,[X.YARN_BUILD_CONFIG_HIDE_BADGE]:h.hideYarnBuildBadge,[X.YARN_BUILD_CONFIG_MAX_CONCURRENCY]:_,[X.YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES]:this.ignoreDependencies});let g=await Fe.StreamReport.start({configuration:i,json:this.json,stdout:this.context.stdout,includeLogs:!0},async T=>{let A=async(D,b,B,I,w)=>{let W=Is.trace.getSpan(D),ee=new Fe.miscUtils.BufferStream;ee.on("data",C=>I?.emit("info",w,C&&C.toString()));let E=new Fe.miscUtils.BufferStream;if(E.on("data",C=>I?.emit("error",w,C&&C.toString())),this.forceQuit)return ee.destroy(),E.destroy(),ee.end(),E.end(),2;try{let C=await this.cli.run(["run",b],{cwd:B,stdout:ee,stderr:E})||0;return ee.end(),E.end(),C}catch(C){W?.setStatus({code:Is.SpanStatusCode.ERROR,message:C.message}),(typeof C=="string"||C instanceof Error)&&W?.recordException(C),ee.end(),E.end()}return 2},y=new dv({project:s,configuration:i,pluginConfiguration:h,report:T,runCommand:this.buildCommand,cli:A,dryRun:this.dryRun,ignoreRunCache:this.ignoreBuildCache,verbose:this.verbose,concurrency:_,continueOnError:this.continueOnError,excludeWorkspacePredicate:l,ignoreDependencies:this.ignoreDependencies,failFast:this.failFast});y.runReporter.on("force-quit",()=>{this.forceQuit=!0}),await y.setup();for(let D of p)await hv({targetWorkspace:D,project:s,supervisor:y});await y.run(n)===!1&&(T.reportError(Fe.MessageName.BUILD_FAILED,"Build failed"),r.setStatus({code:Is.SpanStatusCode.ERROR,message:"Build failed"}))});return di.hasBeenTerminated=!0,g.exitCode()})}};var xs=class extends Ns{static paths=[["test"]];static usage=Ls.Command.Usage({category:"Test commands",description:"test a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are tested in the right order.
      `});buildCommand=Ls.Option.String("-c,--command","test",{description:'the command to be run in each package (if available), defaults to "test"'});onlyCurrent=Ls.Option.Boolean("--only-current",!0,{description:"only test the current workspace"});ignoreDependencies=!0;commandType="test"};var zq={commands:[xs]},Qq=zq;return Ov(Zq);})();
/*! Bundled license information:

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel/index.js:
  (*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
return plugin;
}
};
