/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@ojkelly/plugin-test",
factory: function (require) {
"use strict";var plugin=(()=>{var oT=Object.create;var ys=Object.defineProperty;var aT=Object.getOwnPropertyDescriptor;var uT=Object.getOwnPropertyNames;var cT=Object.getPrototypeOf,lT=Object.prototype.hasOwnProperty;var O=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),dT=(e,t)=>{for(var r in t)ys(e,r,{get:t[r],enumerable:!0})},Sh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of uT(t))!lT.call(e,i)&&i!==r&&ys(e,i,{get:()=>t[i],enumerable:!(n=aT(t,i))||n.enumerable});return e};var Q=(e,t,r)=>(r=e!=null?oT(cT(e)):{},Sh(t||!e||!e.__esModule?ys(r,"default",{value:e,enumerable:!0}):r,e)),fT=e=>Sh(ys({},"__esModule",{value:!0}),e);var As=l(Ve=>{"use strict";Ve.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;Ve.find=(e,t)=>e.nodes.find(r=>r.type===t);Ve.exceedsLimit=(e,t,r=1,n)=>n===!1||!Ve.isInteger(e)||!Ve.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=n;Ve.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];!n||(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};Ve.encloseBrace=e=>e.type!=="brace"?!1:e.commas>>0+e.ranges>>0===0?(e.invalid=!0,!0):!1;Ve.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:e.commas>>0+e.ranges>>0===0||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;Ve.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;Ve.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);Ve.flatten=(...e)=>{let t=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];Array.isArray(s)?r(s,t):s!==void 0&&t.push(s)}return t};return r(e),t}});var vs=l((SF,Ah)=>{"use strict";var yh=As();Ah.exports=(e,t={})=>{let r=(n,i={})=>{let s=t.escapeInvalid&&yh.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a="";if(n.value)return(s||o)&&yh.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(e)}});var bh=l((yF,vh)=>{"use strict";vh.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}});var Lh=l((AF,Nh)=>{"use strict";var Th=bh(),ar=(e,t,r)=>{if(Th(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(Th(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),s=String(n.shorthand),o=String(n.capture),a=String(n.wrap),u=e+":"+t+"="+i+s+o+a;if(ar.cache.hasOwnProperty(u))return ar.cache[u].result;let c=Math.min(e,t),d=Math.max(e,t);if(Math.abs(c-d)===1){let _=e+"|"+t;return n.capture?`(${_})`:n.wrap===!1?_:`(?:${_})`}let f=wh(e)||wh(t),p={min:e,max:t,a:c,b:d},h=[],g=[];if(f&&(p.isPadded=f,p.maxLen=String(p.max).length),c<0){let _=d<0?Math.abs(d):1;g=Rh(_,Math.abs(c),p,n),c=p.a=0}return d>=0&&(h=Rh(c,d,p,n)),p.negatives=g,p.positives=h,p.result=pT(g,h,n),n.capture===!0?p.result=`(${p.result})`:n.wrap!==!1&&h.length+g.length>1&&(p.result=`(?:${p.result})`),ar.cache[u]=p,p.result};function pT(e,t,r){let n=$u(e,t,"-",!1,r)||[],i=$u(t,e,"",!1,r)||[],s=$u(e,t,"-?",!0,r)||[];return n.concat(s).concat(i).join("|")}function hT(e,t){let r=1,n=1,i=Ch(e,r),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),r+=1,i=Ch(e,r);for(i=Ph(t+1,n)-1;e<i&&i<=t;)s.add(i),n+=1,i=Ph(t+1,n)-1;return s=[...s],s.sort(mT),s}function _T(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=gT(e,t),i=n.length,s="",o=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?s+=u:u!=="0"||c!=="9"?s+=ET(u,c,r):o++}return o&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[o],digits:i}}function Rh(e,t,r,n){let i=hT(e,t),s=[],o=e,a;for(let u=0;u<i.length;u++){let c=i[u],d=_T(String(o),String(c),n),f="";if(!r.isPadded&&a&&a.pattern===d.pattern){a.count.length>1&&a.count.pop(),a.count.push(d.count[0]),a.string=a.pattern+Ih(a.count),o=c+1;continue}r.isPadded&&(f=ST(c,r,n)),d.string=f+d.pattern+Ih(d.count),s.push(d),o=c+1,a=d}return s}function $u(e,t,r,n,i){let s=[];for(let o of e){let{string:a}=o;!n&&!Oh(t,"string",a)&&s.push(r+a),n&&Oh(t,"string",a)&&s.push(r+a)}return s}function gT(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}function mT(e,t){return e>t?1:t>e?-1:0}function Oh(e,t,r){return e.some(n=>n[t]===r)}function Ch(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function Ph(e,t){return e-e%Math.pow(10,t)}function Ih(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function ET(e,t,r){return`[${e}${t-e===1?"":"-"}${t}]`}function wh(e){return/^-?(0+)\d/.test(e)}function ST(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}ar.cache={};ar.clearCache=()=>ar.cache={};Nh.exports=ar});var Wu=l((vF,kh)=>{"use strict";var yT=O("util"),Dh=Lh(),xh=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),AT=e=>t=>e===!0?Number(t):String(t),Vu=e=>typeof e=="number"||typeof e=="string"&&e!=="",li=e=>Number.isInteger(+e),Yu=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return!1;for(;t[++r]==="0";);return r>0},vT=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,bT=(e,t,r)=>{if(t>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return r===!1?String(e):e},Mh=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},TT=(e,t)=>{e.negatives.sort((o,a)=>o<a?-1:o>a?1:0),e.positives.sort((o,a)=>o<a?-1:o>a?1:0);let r=t.capture?"":"?:",n="",i="",s;return e.positives.length&&(n=e.positives.join("|")),e.negatives.length&&(i=`-(${r}${e.negatives.join("|")})`),n&&i?s=`${n}|${i}`:s=n||i,t.wrap?`(${r}${s})`:s},Bh=(e,t,r,n)=>{if(r)return Dh(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);if(e===t)return i;let s=String.fromCharCode(t);return`[${i}-${s}]`},Uh=(e,t,r)=>{if(Array.isArray(e)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${e.join("|")})`:e.join("|")}return Dh(e,t,r)},Fh=(...e)=>new RangeError("Invalid range arguments: "+yT.inspect(...e)),jh=(e,t,r)=>{if(r.strictRanges===!0)throw Fh([e,t]);return[]},RT=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},OT=(e,t,r=1,n={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw Fh([e,t]);return[]}i===0&&(i=0),s===0&&(s=0);let o=i>s,a=String(e),u=String(t),c=String(r);r=Math.max(Math.abs(r),1);let d=Yu(a)||Yu(u)||Yu(c),f=d?Math.max(a.length,u.length,c.length):0,p=d===!1&&vT(e,t,n)===!1,h=n.transform||AT(p);if(n.toRegex&&r===1)return Bh(Mh(e,f),Mh(t,f),!0,n);let g={negatives:[],positives:[]},_=y=>g[y<0?"negatives":"positives"].push(Math.abs(y)),v=[],A=0;for(;o?i>=s:i<=s;)n.toRegex===!0&&r>1?_(i):v.push(bT(h(i,A),f,p)),i=o?i-r:i+r,A++;return n.toRegex===!0?r>1?TT(g,n):Uh(v,null,{wrap:!1,...n}):v},CT=(e,t,r=1,n={})=>{if(!li(e)&&e.length>1||!li(t)&&t.length>1)return jh(e,t,n);let i=n.transform||(p=>String.fromCharCode(p)),s=`${e}`.charCodeAt(0),o=`${t}`.charCodeAt(0),a=s>o,u=Math.min(s,o),c=Math.max(s,o);if(n.toRegex&&r===1)return Bh(u,c,!1,n);let d=[],f=0;for(;a?s>=o:s<=o;)d.push(i(s,f)),s=a?s-r:s+r,f++;return n.toRegex===!0?Uh(d,null,{wrap:!1,options:n}):d},bs=(e,t,r,n={})=>{if(t==null&&Vu(e))return[e];if(!Vu(e)||!Vu(t))return jh(e,t,n);if(typeof r=="function")return bs(e,t,1,{transform:r});if(xh(r))return bs(e,t,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,li(r)?li(e)&&li(t)?OT(e,t,r,i):CT(e,t,Math.max(Math.abs(r),1),i):r!=null&&!xh(r)?RT(r,i):bs(e,t,1,r)};kh.exports=bs});var Hh=l((bF,Gh)=>{"use strict";var PT=Wu(),qh=As(),IT=(e,t={})=>{let r=(n,i={})=>{let s=qh.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a=s===!0||o===!0,u=t.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let d=qh.reduce(n.nodes),f=PT(...d,{...t,wrap:!1,toRegex:!0});if(f.length!==0)return d.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let d of n.nodes)c+=r(d,n);return c};return r(e)};Gh.exports=IT});var Yh=l((TF,Vh)=>{"use strict";var wT=Wu(),$h=vs(),Zr=As(),ur=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?Zr.flatten(t).map(i=>`{${i}}`):t;for(let i of e)if(Array.isArray(i))for(let s of i)n.push(ur(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?ur(i,s,r):i+s);return Zr.flatten(n)},NT=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,n=(i,s={})=>{i.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(i.invalid||i.dollar){a.push(ur(a.pop(),$h(i,t)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(ur(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let f=Zr.reduce(i.nodes);if(Zr.exceedsLimit(...f,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let p=wT(...f,t);p.length===0&&(p=$h(i,t)),a.push(ur(a.pop(),p)),i.nodes=[];return}let u=Zr.encloseBrace(i),c=i.queue,d=i;for(;d.type!=="brace"&&d.type!=="root"&&d.parent;)d=d.parent,c=d.queue;for(let f=0;f<i.nodes.length;f++){let p=i.nodes[f];if(p.type==="comma"&&i.type==="brace"){f===1&&c.push(""),c.push("");continue}if(p.type==="close"){a.push(ur(a.pop(),c,u));continue}if(p.value&&p.type!=="open"){c.push(ur(c.pop(),p.value));continue}p.nodes&&n(p,i)}return c};return Zr.flatten(n(e))};Vh.exports=NT});var Kh=l((RF,Wh)=>{"use strict";Wh.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Jh=l((OF,Zh)=>{"use strict";var LT=vs(),{MAX_LENGTH:Xh,CHAR_BACKSLASH:Ku,CHAR_BACKTICK:xT,CHAR_COMMA:MT,CHAR_DOT:DT,CHAR_LEFT_PARENTHESES:BT,CHAR_RIGHT_PARENTHESES:UT,CHAR_LEFT_CURLY_BRACE:FT,CHAR_RIGHT_CURLY_BRACE:jT,CHAR_LEFT_SQUARE_BRACKET:zh,CHAR_RIGHT_SQUARE_BRACKET:Qh,CHAR_DOUBLE_QUOTE:kT,CHAR_SINGLE_QUOTE:qT,CHAR_NO_BREAK_SPACE:GT,CHAR_ZERO_WIDTH_NOBREAK_SPACE:HT}=Kh(),$T=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},n=typeof r.maxLength=="number"?Math.min(Xh,r.maxLength):Xh;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let i={type:"root",input:e,nodes:[]},s=[i],o=i,a=i,u=0,c=e.length,d=0,f=0,p,h={},g=()=>e[d++],_=v=>{if(v.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&v.type==="text"){a.value+=v.value;return}return o.nodes.push(v),v.parent=o,v.prev=a,a=v,v};for(_({type:"bos"});d<c;)if(o=s[s.length-1],p=g(),!(p===HT||p===GT)){if(p===Ku){_({type:"text",value:(t.keepEscaping?p:"")+g()});continue}if(p===Qh){_({type:"text",value:"\\"+p});continue}if(p===zh){u++;let v=!0,A;for(;d<c&&(A=g());){if(p+=A,A===zh){u++;continue}if(A===Ku){p+=g();continue}if(A===Qh&&(u--,u===0))break}_({type:"text",value:p});continue}if(p===BT){o=_({type:"paren",nodes:[]}),s.push(o),_({type:"text",value:p});continue}if(p===UT){if(o.type!=="paren"){_({type:"text",value:p});continue}o=s.pop(),_({type:"text",value:p}),o=s[s.length-1];continue}if(p===kT||p===qT||p===xT){let v=p,A;for(t.keepQuotes!==!0&&(p="");d<c&&(A=g());){if(A===Ku){p+=A+g();continue}if(A===v){t.keepQuotes===!0&&(p+=A);break}p+=A}_({type:"text",value:p});continue}if(p===FT){f++;let A={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};o=_(A),s.push(o),_({type:"open",value:p});continue}if(p===jT){if(o.type!=="brace"){_({type:"text",value:p});continue}let v="close";o=s.pop(),o.close=!0,_({type:v,value:p}),f--,o=s[s.length-1];continue}if(p===MT&&f>0){if(o.ranges>0){o.ranges=0;let v=o.nodes.shift();o.nodes=[v,{type:"text",value:LT(o)}]}_({type:"comma",value:p}),o.commas++;continue}if(p===DT&&f>0&&o.commas===0){let v=o.nodes;if(f===0||v.length===0){_({type:"text",value:p});continue}if(a.type==="dot"){if(o.range=[],a.value+=p,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){v.pop();let A=v[v.length-1];A.value+=a.value+p,a=A,o.ranges--;continue}_({type:"dot",value:p});continue}_({type:"text",value:p})}do if(o=s.pop(),o.type!=="root"){o.nodes.forEach(y=>{y.nodes||(y.type==="open"&&(y.isOpen=!0),y.type==="close"&&(y.isClose=!0),y.nodes||(y.type="text"),y.invalid=!0)});let v=s[s.length-1],A=v.nodes.indexOf(o);v.nodes.splice(A,1,...o.nodes)}while(s.length>0);return _({type:"eos"}),i};Zh.exports=$T});var r_=l((CF,t_)=>{"use strict";var e_=vs(),VT=Hh(),YT=Yh(),WT=Jh(),je=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let i=je.create(n,t);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(je.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};je.parse=(e,t={})=>WT(e,t);je.stringify=(e,t={})=>e_(typeof e=="string"?je.parse(e,t):e,t);je.compile=(e,t={})=>(typeof e=="string"&&(e=je.parse(e,t)),VT(e,t));je.expand=(e,t={})=>{typeof e=="string"&&(e=je.parse(e,t));let r=YT(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};je.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?je.compile(e,t):je.expand(e,t);t_.exports=je});var di=l((PF,a_)=>{"use strict";var KT=O("path"),st="\\\\/",n_=`[^${st}]`,Tt="\\.",XT="\\+",zT="\\?",Ts="\\/",QT="(?=.)",i_="[^/]",Xu=`(?:${Ts}|$)`,s_=`(?:^|${Ts})`,zu=`${Tt}{1,2}${Xu}`,ZT=`(?!${Tt})`,JT=`(?!${s_}${zu})`,eR=`(?!${Tt}{0,1}${Xu})`,tR=`(?!${zu})`,rR=`[^.${Ts}]`,nR=`${i_}*?`,o_={DOT_LITERAL:Tt,PLUS_LITERAL:XT,QMARK_LITERAL:zT,SLASH_LITERAL:Ts,ONE_CHAR:QT,QMARK:i_,END_ANCHOR:Xu,DOTS_SLASH:zu,NO_DOT:ZT,NO_DOTS:JT,NO_DOT_SLASH:eR,NO_DOTS_SLASH:tR,QMARK_NO_DOT:rR,STAR:nR,START_ANCHOR:s_},iR={...o_,SLASH_LITERAL:`[${st}]`,QMARK:n_,STAR:`${n_}*?`,DOTS_SLASH:`${Tt}{1,2}(?:[${st}]|$)`,NO_DOT:`(?!${Tt})`,NO_DOTS:`(?!(?:^|[${st}])${Tt}{1,2}(?:[${st}]|$))`,NO_DOT_SLASH:`(?!${Tt}{0,1}(?:[${st}]|$))`,NO_DOTS_SLASH:`(?!${Tt}{1,2}(?:[${st}]|$))`,QMARK_NO_DOT:`[^.${st}]`,START_ANCHOR:`(?:^|[${st}])`,END_ANCHOR:`(?:[${st}]|$)`},sR={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};a_.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:sR,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:KT.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?iR:o_}}});var fi=l(Ne=>{"use strict";var oR=O("path"),aR=process.platform==="win32",{REGEX_BACKSLASH:uR,REGEX_REMOVE_BACKSLASH:cR,REGEX_SPECIAL_CHARS:lR,REGEX_SPECIAL_CHARS_GLOBAL:dR}=di();Ne.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Ne.hasRegexChars=e=>lR.test(e);Ne.isRegexChar=e=>e.length===1&&Ne.hasRegexChars(e);Ne.escapeRegex=e=>e.replace(dR,"\\$1");Ne.toPosixSlashes=e=>e.replace(uR,"/");Ne.removeBackslashes=e=>e.replace(cR,t=>t==="\\"?"":t);Ne.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Ne.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:aR===!0||oR.sep==="\\";Ne.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Ne.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Ne.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Ne.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",s=`${n}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var __=l((wF,h_)=>{"use strict";var u_=fi(),{CHAR_ASTERISK:Qu,CHAR_AT:fR,CHAR_BACKWARD_SLASH:pi,CHAR_COMMA:pR,CHAR_DOT:Zu,CHAR_EXCLAMATION_MARK:Ju,CHAR_FORWARD_SLASH:p_,CHAR_LEFT_CURLY_BRACE:ec,CHAR_LEFT_PARENTHESES:tc,CHAR_LEFT_SQUARE_BRACKET:hR,CHAR_PLUS:_R,CHAR_QUESTION_MARK:c_,CHAR_RIGHT_CURLY_BRACE:gR,CHAR_RIGHT_PARENTHESES:l_,CHAR_RIGHT_SQUARE_BRACKET:mR}=di(),d_=e=>e===p_||e===pi,f_=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},ER=(e,t)=>{let r=t||{},n=e.length-1,i=r.parts===!0||r.scanToEnd===!0,s=[],o=[],a=[],u=e,c=-1,d=0,f=0,p=!1,h=!1,g=!1,_=!1,v=!1,A=!1,y=!1,b=!1,z=!1,N=!1,U=0,P,x,L={value:"",depth:0,isGlob:!1},V=()=>c>=n,m=()=>u.charCodeAt(c+1),G=()=>(P=x,u.charCodeAt(++c));for(;c<n;){x=G();let Oe;if(x===pi){y=L.backslashes=!0,x=G(),x===ec&&(A=!0);continue}if(A===!0||x===ec){for(U++;V()!==!0&&(x=G());){if(x===pi){y=L.backslashes=!0,G();continue}if(x===ec){U++;continue}if(A!==!0&&x===Zu&&(x=G())===Zu){if(p=L.isBrace=!0,g=L.isGlob=!0,N=!0,i===!0)continue;break}if(A!==!0&&x===pR){if(p=L.isBrace=!0,g=L.isGlob=!0,N=!0,i===!0)continue;break}if(x===gR&&(U--,U===0)){A=!1,p=L.isBrace=!0,N=!0;break}}if(i===!0)continue;break}if(x===p_){if(s.push(c),o.push(L),L={value:"",depth:0,isGlob:!1},N===!0)continue;if(P===Zu&&c===d+1){d+=2;continue}f=c+1;continue}if(r.noext!==!0&&(x===_R||x===fR||x===Qu||x===c_||x===Ju)===!0&&m()===tc){if(g=L.isGlob=!0,_=L.isExtglob=!0,N=!0,x===Ju&&c===d&&(z=!0),i===!0){for(;V()!==!0&&(x=G());){if(x===pi){y=L.backslashes=!0,x=G();continue}if(x===l_){g=L.isGlob=!0,N=!0;break}}continue}break}if(x===Qu){if(P===Qu&&(v=L.isGlobstar=!0),g=L.isGlob=!0,N=!0,i===!0)continue;break}if(x===c_){if(g=L.isGlob=!0,N=!0,i===!0)continue;break}if(x===hR){for(;V()!==!0&&(Oe=G());){if(Oe===pi){y=L.backslashes=!0,G();continue}if(Oe===mR){h=L.isBracket=!0,g=L.isGlob=!0,N=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&x===Ju&&c===d){b=L.negated=!0,d++;continue}if(r.noparen!==!0&&x===tc){if(g=L.isGlob=!0,i===!0){for(;V()!==!0&&(x=G());){if(x===tc){y=L.backslashes=!0,x=G();continue}if(x===l_){N=!0;break}}continue}break}if(g===!0){if(N=!0,i===!0)continue;break}}r.noext===!0&&(_=!1,g=!1);let j=u,Ft="",E="";d>0&&(Ft=u.slice(0,d),u=u.slice(d),f-=d),j&&g===!0&&f>0?(j=u.slice(0,f),E=u.slice(f)):g===!0?(j="",E=u):j=u,j&&j!==""&&j!=="/"&&j!==u&&d_(j.charCodeAt(j.length-1))&&(j=j.slice(0,-1)),r.unescape===!0&&(E&&(E=u_.removeBackslashes(E)),j&&y===!0&&(j=u_.removeBackslashes(j)));let S={prefix:Ft,input:e,start:d,base:j,glob:E,isBrace:p,isBracket:h,isGlob:g,isExtglob:_,isGlobstar:v,negated:b,negatedExtglob:z};if(r.tokens===!0&&(S.maxDepth=0,d_(x)||o.push(L),S.tokens=o),r.parts===!0||r.tokens===!0){let Oe;for(let W=0;W<s.length;W++){let nt=Oe?Oe+1:d,it=s[W],Fe=e.slice(nt,it);r.tokens&&(W===0&&d!==0?(o[W].isPrefix=!0,o[W].value=Ft):o[W].value=Fe,f_(o[W]),S.maxDepth+=o[W].depth),(W!==0||Fe!=="")&&a.push(Fe),Oe=it}if(Oe&&Oe+1<e.length){let W=e.slice(Oe+1);a.push(W),r.tokens&&(o[o.length-1].value=W,f_(o[o.length-1]),S.maxDepth+=o[o.length-1].depth)}S.slashes=s,S.parts=a}return S};h_.exports=ER});var S_=l((NF,E_)=>{"use strict";var Rs=di(),ke=fi(),{MAX_LENGTH:Os,POSIX_REGEX_SOURCE:SR,REGEX_NON_SPECIAL_CHARS:yR,REGEX_SPECIAL_CHARS_BACKREF:AR,REPLACEMENTS:g_}=Rs,vR=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(i=>ke.escapeRegex(i)).join("..")}return r},Jr=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,m_=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=g_[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(Os,r.maxLength):Os,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let s={type:"bos",value:"",output:r.prepend||""},o=[s],a=r.capture?"":"?:",u=ke.isWindows(t),c=Rs.globChars(u),d=Rs.extglobChars(c),{DOT_LITERAL:f,PLUS_LITERAL:p,SLASH_LITERAL:h,ONE_CHAR:g,DOTS_SLASH:_,NO_DOT:v,NO_DOT_SLASH:A,NO_DOTS_SLASH:y,QMARK:b,QMARK_NO_DOT:z,STAR:N,START_ANCHOR:U}=c,P=R=>`(${a}(?:(?!${U}${R.dot?_:f}).)*?)`,x=r.dot?"":v,L=r.dot?b:z,V=r.bash===!0?P(r):N;r.capture&&(V=`(${V})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let m={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};e=ke.removePrefix(e,m),i=e.length;let G=[],j=[],Ft=[],E=s,S,Oe=()=>m.index===i-1,W=m.peek=(R=1)=>e[m.index+R],nt=m.advance=()=>e[++m.index]||"",it=()=>e.slice(m.index+1),Fe=(R="",ee=0)=>{m.consumed+=R,m.index+=ee},gs=R=>{m.output+=R.output!=null?R.output:R.value,Fe(R.value)},iT=()=>{let R=1;for(;W()==="!"&&(W(2)!=="("||W(3)==="?");)nt(),m.start++,R++;return R%2===0?!1:(m.negated=!0,m.start++,!0)},ms=R=>{m[R]++,Ft.push(R)},or=R=>{m[R]--,Ft.pop()},H=R=>{if(E.type==="globstar"){let ee=m.braces>0&&(R.type==="comma"||R.type==="brace"),T=R.extglob===!0||G.length&&(R.type==="pipe"||R.type==="paren");R.type!=="slash"&&R.type!=="paren"&&!ee&&!T&&(m.output=m.output.slice(0,-E.output.length),E.type="star",E.value="*",E.output=V,m.output+=E.output)}if(G.length&&R.type!=="paren"&&(G[G.length-1].inner+=R.value),(R.value||R.output)&&gs(R),E&&E.type==="text"&&R.type==="text"){E.value+=R.value,E.output=(E.output||"")+R.value;return}R.prev=E,o.push(R),E=R},Es=(R,ee)=>{let T={...d[ee],conditions:1,inner:""};T.prev=E,T.parens=m.parens,T.output=m.output;let k=(r.capture?"(":"")+T.open;ms("parens"),H({type:R,value:ee,output:m.output?"":g}),H({type:"paren",extglob:!0,value:nt(),output:k}),G.push(T)},sT=R=>{let ee=R.close+(r.capture?")":""),T;if(R.type==="negate"){let k=V;R.inner&&R.inner.length>1&&R.inner.includes("/")&&(k=P(r)),(k!==V||Oe()||/^\)+$/.test(it()))&&(ee=R.close=`)$))${k}`),R.inner.includes("*")&&(T=it())&&/^\.[^\\/.]+$/.test(T)&&(ee=R.close=`)${T})${k})`),R.prev.type==="bos"&&(m.negatedExtglob=!0)}H({type:"paren",extglob:!0,value:S,output:ee}),or("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let R=!1,ee=e.replace(AR,(T,k,se,Ce,pe,Hu)=>Ce==="\\"?(R=!0,T):Ce==="?"?k?k+Ce+(pe?b.repeat(pe.length):""):Hu===0?L+(pe?b.repeat(pe.length):""):b.repeat(se.length):Ce==="."?f.repeat(se.length):Ce==="*"?k?k+Ce+(pe?V:""):V:k?T:`\\${T}`);return R===!0&&(r.unescape===!0?ee=ee.replace(/\\/g,""):ee=ee.replace(/\\+/g,T=>T.length%2===0?"\\\\":T?"\\":"")),ee===e&&r.contains===!0?(m.output=e,m):(m.output=ke.wrapOutput(ee,m,t),m)}for(;!Oe();){if(S=nt(),S==="\0")continue;if(S==="\\"){let T=W();if(T==="/"&&r.bash!==!0||T==="."||T===";")continue;if(!T){S+="\\",H({type:"text",value:S});continue}let k=/^\\+/.exec(it()),se=0;if(k&&k[0].length>2&&(se=k[0].length,m.index+=se,se%2!==0&&(S+="\\")),r.unescape===!0?S=nt():S+=nt(),m.brackets===0){H({type:"text",value:S});continue}}if(m.brackets>0&&(S!=="]"||E.value==="["||E.value==="[^")){if(r.posix!==!1&&S===":"){let T=E.value.slice(1);if(T.includes("[")&&(E.posix=!0,T.includes(":"))){let k=E.value.lastIndexOf("["),se=E.value.slice(0,k),Ce=E.value.slice(k+2),pe=SR[Ce];if(pe){E.value=se+pe,m.backtrack=!0,nt(),!s.output&&o.indexOf(E)===1&&(s.output=g);continue}}}(S==="["&&W()!==":"||S==="-"&&W()==="]")&&(S=`\\${S}`),S==="]"&&(E.value==="["||E.value==="[^")&&(S=`\\${S}`),r.posix===!0&&S==="!"&&E.value==="["&&(S="^"),E.value+=S,gs({value:S});continue}if(m.quotes===1&&S!=='"'){S=ke.escapeRegex(S),E.value+=S,gs({value:S});continue}if(S==='"'){m.quotes=m.quotes===1?0:1,r.keepQuotes===!0&&H({type:"text",value:S});continue}if(S==="("){ms("parens"),H({type:"paren",value:S});continue}if(S===")"){if(m.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Jr("opening","("));let T=G[G.length-1];if(T&&m.parens===T.parens+1){sT(G.pop());continue}H({type:"paren",value:S,output:m.parens?")":"\\)"}),or("parens");continue}if(S==="["){if(r.nobracket===!0||!it().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Jr("closing","]"));S=`\\${S}`}else ms("brackets");H({type:"bracket",value:S});continue}if(S==="]"){if(r.nobracket===!0||E&&E.type==="bracket"&&E.value.length===1){H({type:"text",value:S,output:`\\${S}`});continue}if(m.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Jr("opening","["));H({type:"text",value:S,output:`\\${S}`});continue}or("brackets");let T=E.value.slice(1);if(E.posix!==!0&&T[0]==="^"&&!T.includes("/")&&(S=`/${S}`),E.value+=S,gs({value:S}),r.literalBrackets===!1||ke.hasRegexChars(T))continue;let k=ke.escapeRegex(E.value);if(m.output=m.output.slice(0,-E.value.length),r.literalBrackets===!0){m.output+=k,E.value=k;continue}E.value=`(${a}${k}|${E.value})`,m.output+=E.value;continue}if(S==="{"&&r.nobrace!==!0){ms("braces");let T={type:"brace",value:S,output:"(",outputIndex:m.output.length,tokensIndex:m.tokens.length};j.push(T),H(T);continue}if(S==="}"){let T=j[j.length-1];if(r.nobrace===!0||!T){H({type:"text",value:S,output:S});continue}let k=")";if(T.dots===!0){let se=o.slice(),Ce=[];for(let pe=se.length-1;pe>=0&&(o.pop(),se[pe].type!=="brace");pe--)se[pe].type!=="dots"&&Ce.unshift(se[pe].value);k=vR(Ce,r),m.backtrack=!0}if(T.comma!==!0&&T.dots!==!0){let se=m.output.slice(0,T.outputIndex),Ce=m.tokens.slice(T.tokensIndex);T.value=T.output="\\{",S=k="\\}",m.output=se;for(let pe of Ce)m.output+=pe.output||pe.value}H({type:"brace",value:S,output:k}),or("braces"),j.pop();continue}if(S==="|"){G.length>0&&G[G.length-1].conditions++,H({type:"text",value:S});continue}if(S===","){let T=S,k=j[j.length-1];k&&Ft[Ft.length-1]==="braces"&&(k.comma=!0,T="|"),H({type:"comma",value:S,output:T});continue}if(S==="/"){if(E.type==="dot"&&m.index===m.start+1){m.start=m.index+1,m.consumed="",m.output="",o.pop(),E=s;continue}H({type:"slash",value:S,output:h});continue}if(S==="."){if(m.braces>0&&E.type==="dot"){E.value==="."&&(E.output=f);let T=j[j.length-1];E.type="dots",E.output+=S,E.value+=S,T.dots=!0;continue}if(m.braces+m.parens===0&&E.type!=="bos"&&E.type!=="slash"){H({type:"text",value:S,output:f});continue}H({type:"dot",value:S,output:f});continue}if(S==="?"){if(!(E&&E.value==="(")&&r.noextglob!==!0&&W()==="("&&W(2)!=="?"){Es("qmark",S);continue}if(E&&E.type==="paren"){let k=W(),se=S;if(k==="<"&&!ke.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(E.value==="("&&!/[!=<:]/.test(k)||k==="<"&&!/<([!=]|\w+>)/.test(it()))&&(se=`\\${S}`),H({type:"text",value:S,output:se});continue}if(r.dot!==!0&&(E.type==="slash"||E.type==="bos")){H({type:"qmark",value:S,output:z});continue}H({type:"qmark",value:S,output:b});continue}if(S==="!"){if(r.noextglob!==!0&&W()==="("&&(W(2)!=="?"||!/[!=<:]/.test(W(3)))){Es("negate",S);continue}if(r.nonegate!==!0&&m.index===0){iT();continue}}if(S==="+"){if(r.noextglob!==!0&&W()==="("&&W(2)!=="?"){Es("plus",S);continue}if(E&&E.value==="("||r.regex===!1){H({type:"plus",value:S,output:p});continue}if(E&&(E.type==="bracket"||E.type==="paren"||E.type==="brace")||m.parens>0){H({type:"plus",value:S});continue}H({type:"plus",value:p});continue}if(S==="@"){if(r.noextglob!==!0&&W()==="("&&W(2)!=="?"){H({type:"at",extglob:!0,value:S,output:""});continue}H({type:"text",value:S});continue}if(S!=="*"){(S==="$"||S==="^")&&(S=`\\${S}`);let T=yR.exec(it());T&&(S+=T[0],m.index+=T[0].length),H({type:"text",value:S});continue}if(E&&(E.type==="globstar"||E.star===!0)){E.type="star",E.star=!0,E.value+=S,E.output=V,m.backtrack=!0,m.globstar=!0,Fe(S);continue}let R=it();if(r.noextglob!==!0&&/^\([^?]/.test(R)){Es("star",S);continue}if(E.type==="star"){if(r.noglobstar===!0){Fe(S);continue}let T=E.prev,k=T.prev,se=T.type==="slash"||T.type==="bos",Ce=k&&(k.type==="star"||k.type==="globstar");if(r.bash===!0&&(!se||R[0]&&R[0]!=="/")){H({type:"star",value:S,output:""});continue}let pe=m.braces>0&&(T.type==="comma"||T.type==="brace"),Hu=G.length&&(T.type==="pipe"||T.type==="paren");if(!se&&T.type!=="paren"&&!pe&&!Hu){H({type:"star",value:S,output:""});continue}for(;R.slice(0,3)==="/**";){let Ss=e[m.index+4];if(Ss&&Ss!=="/")break;R=R.slice(3),Fe("/**",3)}if(T.type==="bos"&&Oe()){E.type="globstar",E.value+=S,E.output=P(r),m.output=E.output,m.globstar=!0,Fe(S);continue}if(T.type==="slash"&&T.prev.type!=="bos"&&!Ce&&Oe()){m.output=m.output.slice(0,-(T.output+E.output).length),T.output=`(?:${T.output}`,E.type="globstar",E.output=P(r)+(r.strictSlashes?")":"|$)"),E.value+=S,m.globstar=!0,m.output+=T.output+E.output,Fe(S);continue}if(T.type==="slash"&&T.prev.type!=="bos"&&R[0]==="/"){let Ss=R[1]!==void 0?"|$":"";m.output=m.output.slice(0,-(T.output+E.output).length),T.output=`(?:${T.output}`,E.type="globstar",E.output=`${P(r)}${h}|${h}${Ss})`,E.value+=S,m.output+=T.output+E.output,m.globstar=!0,Fe(S+nt()),H({type:"slash",value:"/",output:""});continue}if(T.type==="bos"&&R[0]==="/"){E.type="globstar",E.value+=S,E.output=`(?:^|${h}|${P(r)}${h})`,m.output=E.output,m.globstar=!0,Fe(S+nt()),H({type:"slash",value:"/",output:""});continue}m.output=m.output.slice(0,-E.output.length),E.type="globstar",E.output=P(r),E.value+=S,m.output+=E.output,m.globstar=!0,Fe(S);continue}let ee={type:"star",value:S,output:V};if(r.bash===!0){ee.output=".*?",(E.type==="bos"||E.type==="slash")&&(ee.output=x+ee.output),H(ee);continue}if(E&&(E.type==="bracket"||E.type==="paren")&&r.regex===!0){ee.output=S,H(ee);continue}(m.index===m.start||E.type==="slash"||E.type==="dot")&&(E.type==="dot"?(m.output+=A,E.output+=A):r.dot===!0?(m.output+=y,E.output+=y):(m.output+=x,E.output+=x),W()!=="*"&&(m.output+=g,E.output+=g)),H(ee)}for(;m.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Jr("closing","]"));m.output=ke.escapeLast(m.output,"["),or("brackets")}for(;m.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Jr("closing",")"));m.output=ke.escapeLast(m.output,"("),or("parens")}for(;m.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Jr("closing","}"));m.output=ke.escapeLast(m.output,"{"),or("braces")}if(r.strictSlashes!==!0&&(E.type==="star"||E.type==="bracket")&&H({type:"maybe_slash",value:"",output:`${h}?`}),m.backtrack===!0){m.output="";for(let R of m.tokens)m.output+=R.output!=null?R.output:R.value,R.suffix&&(m.output+=R.suffix)}return m};m_.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(Os,r.maxLength):Os,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);e=g_[e]||e;let s=ke.isWindows(t),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:d,NO_DOTS:f,NO_DOTS_SLASH:p,STAR:h,START_ANCHOR:g}=Rs.globChars(s),_=r.dot?f:d,v=r.dot?p:d,A=r.capture?"":"?:",y={negated:!1,prefix:""},b=r.bash===!0?".*?":h;r.capture&&(b=`(${b})`);let z=x=>x.noglobstar===!0?b:`(${A}(?:(?!${g}${x.dot?c:o}).)*?)`,N=x=>{switch(x){case"*":return`${_}${u}${b}`;case".*":return`${o}${u}${b}`;case"*.*":return`${_}${b}${o}${u}${b}`;case"*/*":return`${_}${b}${a}${u}${v}${b}`;case"**":return _+z(r);case"**/*":return`(?:${_}${z(r)}${a})?${v}${u}${b}`;case"**/*.*":return`(?:${_}${z(r)}${a})?${v}${b}${o}${u}${b}`;case"**/.*":return`(?:${_}${z(r)}${a})?${o}${u}${b}`;default:{let L=/^(.*?)\.(\w+)$/.exec(x);if(!L)return;let V=N(L[1]);return V?V+o+L[2]:void 0}}},U=ke.removePrefix(e,y),P=N(U);return P&&r.strictSlashes!==!0&&(P+=`${a}?`),P};E_.exports=m_});var A_=l((LF,y_)=>{"use strict";var bR=O("path"),TR=__(),rc=S_(),nc=fi(),RR=di(),OR=e=>e&&typeof e=="object"&&!Array.isArray(e),oe=(e,t,r=!1)=>{if(Array.isArray(e)){let d=e.map(p=>oe(p,t,r));return p=>{for(let h of d){let g=h(p);if(g)return g}return!1}}let n=OR(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=nc.isWindows(t),o=n?oe.compileRe(e,t):oe.makeRe(e,t,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(i.ignore){let d={...t,ignore:null,onMatch:null,onResult:null};u=oe(i.ignore,d,r)}let c=(d,f=!1)=>{let{isMatch:p,match:h,output:g}=oe.test(d,o,t,{glob:e,posix:s}),_={glob:e,state:a,regex:o,posix:s,input:d,output:g,match:h,isMatch:p};return typeof i.onResult=="function"&&i.onResult(_),p===!1?(_.isMatch=!1,f?_:!1):u(d)?(typeof i.onIgnore=="function"&&i.onIgnore(_),_.isMatch=!1,f?_:!1):(typeof i.onMatch=="function"&&i.onMatch(_),f?_:!0)};return r&&(c.state=a),c};oe.test=(e,t,r,{glob:n,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=r||{},o=s.format||(i?nc.toPosixSlashes:null),a=e===n,u=a&&o?o(e):e;return a===!1&&(u=o?o(e):e,a=u===n),(a===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?a=oe.matchBase(e,t,r,i):a=t.exec(u)),{isMatch:Boolean(a),match:a,output:u}};oe.matchBase=(e,t,r,n=nc.isWindows(r))=>(t instanceof RegExp?t:oe.makeRe(t,r)).test(bR.basename(e));oe.isMatch=(e,t,r)=>oe(t,r)(e);oe.parse=(e,t)=>Array.isArray(e)?e.map(r=>oe.parse(r,t)):rc(e,{...t,fastpaths:!1});oe.scan=(e,t)=>TR(e,t);oe.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let i=t||{},s=i.contains?"":"^",o=i.contains?"":"$",a=`${s}(?:${e.output})${o}`;e&&e.negated===!0&&(a=`^(?!${a}).*$`);let u=oe.toRegex(a,t);return n===!0&&(u.state=e),u};oe.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=rc.fastpaths(e,t)),i.output||(i=rc(e,t)),oe.compileRe(i,t,r,n)};oe.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};oe.constants=RR;y_.exports=oe});var b_=l((xF,v_)=>{"use strict";v_.exports=A_()});var sc=l((MF,C_)=>{"use strict";var R_=O("util"),O_=r_(),ot=b_(),ic=fi(),T_=e=>e===""||e==="./",re=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,i=new Set,s=new Set,o=0,a=d=>{s.add(d.output),r&&r.onResult&&r.onResult(d)};for(let d=0;d<t.length;d++){let f=ot(String(t[d]),{...r,onResult:a},!0),p=f.state.negated||f.state.negatedExtglob;p&&o++;for(let h of e){let g=f(h,!0);!(p?!g.isMatch:g.isMatch)||(p?n.add(g.output):(n.delete(g.output),i.add(g.output)))}}let c=(o===t.length?[...s]:[...i]).filter(d=>!n.has(d));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?t.map(d=>d.replace(/\\/g,"")):t}return c};re.match=re;re.matcher=(e,t)=>ot(e,t);re.isMatch=(e,t,r)=>ot(t,r)(e);re.any=re.isMatch;re.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,i=[],o=re(e,t,{...r,onResult:a=>{r.onResult&&r.onResult(a),i.push(a.output)}});for(let a of i)o.includes(a)||n.add(a);return[...n]};re.contains=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${R_.inspect(e)}"`);if(Array.isArray(t))return t.some(n=>re.contains(e,n,r));if(typeof t=="string"){if(T_(e)||T_(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return re.isMatch(e,t,{...r,contains:!0})};re.matchKeys=(e,t,r)=>{if(!ic.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=re(Object.keys(e),t,r),i={};for(let s of n)i[s]=e[s];return i};re.some=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=ot(String(i),r);if(n.some(o=>s(o)))return!0}return!1};re.every=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=ot(String(i),r);if(!n.every(o=>s(o)))return!1}return!0};re.all=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${R_.inspect(e)}"`);return[].concat(t).every(n=>ot(n,r)(e))};re.capture=(e,t,r)=>{let n=ic.isWindows(r),s=ot.makeRe(String(e),{...r,capture:!0}).exec(n?ic.toPosixSlashes(t):t);if(s)return s.slice(1).map(o=>o===void 0?"":o)};re.makeRe=(...e)=>ot.makeRe(...e);re.scan=(...e)=>ot.scan(...e);re.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let i of O_(String(n),t))r.push(ot.parse(i,t));return r};re.braces=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!/\{.*\}/.test(e)?[e]:O_(e,t)};re.braceExpand=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return re.braces(e,{...t,expand:!0})};C_.exports=re});var Sg=l((VF,JC)=>{JC.exports=[{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"SYSTEM_TEAMFOUNDATIONCOLLECTIONURI",pr:"SYSTEM_PULLREQUEST_PULLREQUESTID"},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY_BUILD_BASE",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}}]});var vg=l(qe=>{"use strict";var Ag=Sg(),ut=process.env;Object.defineProperty(qe,"_vendors",{value:Ag.map(function(e){return e.constant})});qe.name=null;qe.isPR=null;Ag.forEach(function(e){var t=Array.isArray(e.env)?e.env:[e.env],r=t.every(function(n){return yg(n)});if(qe[e.constant]=r,r)switch(qe.name=e.name,typeof e.pr){case"string":qe.isPR=!!ut[e.pr];break;case"object":"env"in e.pr?qe.isPR=e.pr.env in ut&&ut[e.pr.env]!==e.pr.ne:"any"in e.pr?qe.isPR=e.pr.any.some(function(n){return!!ut[n]}):qe.isPR=yg(e.pr);break;default:qe.isPR=null}});qe.isCI=!!(ut.CI||ut.CONTINUOUS_INTEGRATION||ut.BUILD_NUMBER||ut.RUN_ID||qe.name);function yg(e){return typeof e=="string"?!!ut[e]:Object.keys(e).every(function(t){return ut[t]===e[t]})}});var Tg=l((WF,bg)=>{"use strict";bg.exports=vg().isCI});var Og=l((KF,Rg)=>{"use strict";Rg.exports=(...e)=>[...new Set([].concat(...e))]});var yc=l((XF,Ig)=>{"use strict";var eP=O("stream"),Cg=eP.PassThrough,tP=Array.prototype.slice;Ig.exports=rP;function rP(){let e=[],t=tP.call(arguments),r=!1,n=t[t.length-1];n&&!Array.isArray(n)&&n.pipe==null?t.pop():n={};let i=n.end!==!1,s=n.pipeError===!0;n.objectMode==null&&(n.objectMode=!0),n.highWaterMark==null&&(n.highWaterMark=64*1024);let o=Cg(n);function a(){for(let d=0,f=arguments.length;d<f;d++)e.push(Pg(arguments[d],n));return u(),this}function u(){if(r)return;r=!0;let d=e.shift();if(!d){process.nextTick(c);return}Array.isArray(d)||(d=[d]);let f=d.length+1;function p(){--f>0||(r=!1,u())}function h(g){function _(){g.removeListener("merge2UnpipeEnd",_),g.removeListener("end",_),s&&g.removeListener("error",v),p()}function v(A){o.emit("error",A)}if(g._readableState.endEmitted)return p();g.on("merge2UnpipeEnd",_),g.on("end",_),s&&g.on("error",v),g.pipe(o,{end:!1}),g.resume()}for(let g=0;g<d.length;g++)h(d[g]);p()}function c(){r=!1,o.emit("queueDrain"),i&&o.end()}return o.setMaxListeners(0),o.add=a,o.on("unpipe",function(d){d.emit("merge2UnpipeEnd")}),t.length&&a.apply(null,t),o}function Pg(e,t){if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=Pg(e[r],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(Cg(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}});var wg=l(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.splitWhen=sn.flatten=void 0;function nP(e){return e.reduce((t,r)=>[].concat(t,r),[])}sn.flatten=nP;function iP(e,t){let r=[[]],n=0;for(let i of e)t(i)?(n++,r[n]=[]):r[n].push(i);return r}sn.splitWhen=iP});var Ng=l(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.isEnoentCodeError=void 0;function sP(e){return e.code==="ENOENT"}xs.isEnoentCodeError=sP});var Lg=l(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.createDirentFromStats=void 0;var Ac=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function oP(e,t){return new Ac(e,t)}Ms.createDirentFromStats=oP});var xg=l(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.removeLeadingDotSegment=ct.escape=ct.makeAbsolute=ct.unixify=void 0;var aP=O("path"),uP=2,cP=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\())/g;function lP(e){return e.replace(/\\/g,"/")}ct.unixify=lP;function dP(e,t){return aP.resolve(e,t)}ct.makeAbsolute=dP;function fP(e){return e.replace(cP,"\\$2")}ct.escape=fP;function pP(e){if(e.charAt(0)==="."){let t=e.charAt(1);if(t==="/"||t==="\\")return e.slice(uP)}return e}ct.removeLeadingDotSegment=pP});var Dg=l((ej,Mg)=>{Mg.exports=function(t){if(typeof t!="string"||t==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1}});var Ug=l((tj,Bg)=>{var hP=Dg(),_P={"{":"}","(":")","[":"]"},gP=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,mP=/\\(.)|(^!|[*?{}()[\]]|\(\?)/;Bg.exports=function(t,r){if(typeof t!="string"||t==="")return!1;if(hP(t))return!0;var n=gP,i;for(r&&r.strict===!1&&(n=mP);i=n.exec(t);){if(i[2])return!0;var s=i.index+i[0].length,o=i[1],a=o?_P[o]:null;if(o&&a){var u=t.indexOf(a,s);u!==-1&&(s=u+1)}t=t.slice(s)}return!1}});var jg=l((rj,Fg)=>{"use strict";var EP=Ug(),SP=O("path").posix.dirname,yP=O("os").platform()==="win32",vc="/",AP=/\\/g,vP=/[\{\[].*[\}\]]$/,bP=/(^|[^\\])([\{\[]|\([^\)]+$)/,TP=/\\([\!\*\?\|\[\]\(\)\{\}])/g;Fg.exports=function(t,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&yP&&t.indexOf(vc)<0&&(t=t.replace(AP,vc)),vP.test(t)&&(t+=vc),t+="a";do t=SP(t);while(EP(t)||bP.test(t));return t.replace(TP,"$1")}});var Wg=l(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.matchAny=M.convertPatternsToRe=M.makeRe=M.getPatternParts=M.expandBraceExpansion=M.expandPatternsWithBraceExpansion=M.isAffectDepthOfReadingPattern=M.endsWithSlashGlobStar=M.hasGlobStar=M.getBaseDirectory=M.isPatternRelatedToParentDirectory=M.getPatternsOutsideCurrentDirectory=M.getPatternsInsideCurrentDirectory=M.getPositivePatterns=M.getNegativePatterns=M.isPositivePattern=M.isNegativePattern=M.convertToNegativePattern=M.convertToPositivePattern=M.isDynamicPattern=M.isStaticPattern=void 0;var RP=O("path"),OP=jg(),bc=sc(),kg="**",CP="\\",PP=/[*?]|^!/,IP=/\[[^[]*]/,wP=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,NP=/[!*+?@]\([^(]*\)/,LP=/,|\.\./;function qg(e,t={}){return!Gg(e,t)}M.isStaticPattern=qg;function Gg(e,t={}){return e===""?!1:!!(t.caseSensitiveMatch===!1||e.includes(CP)||PP.test(e)||IP.test(e)||wP.test(e)||t.extglob!==!1&&NP.test(e)||t.braceExpansion!==!1&&xP(e))}M.isDynamicPattern=Gg;function xP(e){let t=e.indexOf("{");if(t===-1)return!1;let r=e.indexOf("}",t+1);if(r===-1)return!1;let n=e.slice(t,r);return LP.test(n)}function MP(e){return Ds(e)?e.slice(1):e}M.convertToPositivePattern=MP;function DP(e){return"!"+e}M.convertToNegativePattern=DP;function Ds(e){return e.startsWith("!")&&e[1]!=="("}M.isNegativePattern=Ds;function Hg(e){return!Ds(e)}M.isPositivePattern=Hg;function BP(e){return e.filter(Ds)}M.getNegativePatterns=BP;function UP(e){return e.filter(Hg)}M.getPositivePatterns=UP;function FP(e){return e.filter(t=>!Tc(t))}M.getPatternsInsideCurrentDirectory=FP;function jP(e){return e.filter(Tc)}M.getPatternsOutsideCurrentDirectory=jP;function Tc(e){return e.startsWith("..")||e.startsWith("./..")}M.isPatternRelatedToParentDirectory=Tc;function kP(e){return OP(e,{flipBackslashes:!1})}M.getBaseDirectory=kP;function qP(e){return e.includes(kg)}M.hasGlobStar=qP;function $g(e){return e.endsWith("/"+kg)}M.endsWithSlashGlobStar=$g;function GP(e){let t=RP.basename(e);return $g(e)||qg(t)}M.isAffectDepthOfReadingPattern=GP;function HP(e){return e.reduce((t,r)=>t.concat(Vg(r)),[])}M.expandPatternsWithBraceExpansion=HP;function Vg(e){return bc.braces(e,{expand:!0,nodupes:!0})}M.expandBraceExpansion=Vg;function $P(e,t){let{parts:r}=bc.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return r.length===0&&(r=[e]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}M.getPatternParts=$P;function Yg(e,t){return bc.makeRe(e,t)}M.makeRe=Yg;function VP(e,t){return e.map(r=>Yg(r,t))}M.convertPatternsToRe=VP;function YP(e,t){return t.some(r=>r.test(e))}M.matchAny=YP});var Xg=l(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.merge=void 0;var WP=yc();function KP(e){let t=WP(e);return e.forEach(r=>{r.once("error",n=>t.emit("error",n))}),t.once("close",()=>Kg(e)),t.once("end",()=>Kg(e)),t}Bs.merge=KP;function Kg(e){e.forEach(t=>t.emit("close"))}});var zg=l(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.isEmpty=on.isString=void 0;function XP(e){return typeof e=="string"}on.isString=XP;function zP(e){return e===""}on.isEmpty=zP});var Ot=l(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.string=Se.stream=Se.pattern=Se.path=Se.fs=Se.errno=Se.array=void 0;var QP=wg();Se.array=QP;var ZP=Ng();Se.errno=ZP;var JP=Lg();Se.fs=JP;var eI=xg();Se.path=eI;var tI=Wg();Se.pattern=tI;var rI=Xg();Se.stream=rI;var nI=zg();Se.string=nI});var Jg=l(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.convertPatternGroupToTask=ye.convertPatternGroupsToTasks=ye.groupPatternsByBaseDirectory=ye.getNegativePatternsAsPositive=ye.getPositivePatterns=ye.convertPatternsToTasks=ye.generate=void 0;var Ct=Ot();function iI(e,t){let r=Qg(e),n=Zg(e,t.ignore),i=r.filter(u=>Ct.pattern.isStaticPattern(u,t)),s=r.filter(u=>Ct.pattern.isDynamicPattern(u,t)),o=Rc(i,n,!1),a=Rc(s,n,!0);return o.concat(a)}ye.generate=iI;function Rc(e,t,r){let n=[],i=Ct.pattern.getPatternsOutsideCurrentDirectory(e),s=Ct.pattern.getPatternsInsideCurrentDirectory(e),o=Oc(i),a=Oc(s);return n.push(...Cc(o,t,r)),"."in a?n.push(Pc(".",s,t,r)):n.push(...Cc(a,t,r)),n}ye.convertPatternsToTasks=Rc;function Qg(e){return Ct.pattern.getPositivePatterns(e)}ye.getPositivePatterns=Qg;function Zg(e,t){return Ct.pattern.getNegativePatterns(e).concat(t).map(Ct.pattern.convertToPositivePattern)}ye.getNegativePatternsAsPositive=Zg;function Oc(e){let t={};return e.reduce((r,n)=>{let i=Ct.pattern.getBaseDirectory(n);return i in r?r[i].push(n):r[i]=[n],r},t)}ye.groupPatternsByBaseDirectory=Oc;function Cc(e,t,r){return Object.keys(e).map(n=>Pc(n,e[n],t,r))}ye.convertPatternGroupsToTasks=Cc;function Pc(e,t,r,n){return{dynamic:n,positive:t,negative:r,base:e,patterns:[].concat(t,r.map(Ct.pattern.convertToNegativePattern))}}ye.convertPatternGroupToTask=Pc});var tm=l(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.removeDuplicateSlashes=an.transform=void 0;var sI=/(?!^)\/{2,}/g;function oI(e){return e.map(t=>em(t))}an.transform=oI;function em(e){return e.replace(sI,"/")}an.removeDuplicateSlashes=em});var nm=l(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.read=void 0;function aI(e,t,r){t.fs.lstat(e,(n,i)=>{if(n!==null){rm(r,n);return}if(!i.isSymbolicLink()||!t.followSymbolicLink){Ic(r,i);return}t.fs.stat(e,(s,o)=>{if(s!==null){if(t.throwErrorOnBrokenSymbolicLink){rm(r,s);return}Ic(r,i);return}t.markSymbolicLink&&(o.isSymbolicLink=()=>!0),Ic(r,o)})})}Us.read=aI;function rm(e,t){e(t)}function Ic(e,t){e(null,t)}});var im=l(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.read=void 0;function uI(e,t){let r=t.fs.lstatSync(e);if(!r.isSymbolicLink()||!t.followSymbolicLink)return r;try{let n=t.fs.statSync(e);return t.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(n){if(!t.throwErrorOnBrokenSymbolicLink)return r;throw n}}Fs.read=uI});var sm=l(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.createFileSystemAdapter=qt.FILE_SYSTEM_ADAPTER=void 0;var js=O("fs");qt.FILE_SYSTEM_ADAPTER={lstat:js.lstat,stat:js.stat,lstatSync:js.lstatSync,statSync:js.statSync};function cI(e){return e===void 0?qt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},qt.FILE_SYSTEM_ADAPTER),e)}qt.createFileSystemAdapter=cI});var om=l(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var lI=sm(),wc=class{constructor(t={}){this._options=t,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=lI.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(t,r){return t??r}};Nc.default=wc});var dr=l(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.statSync=Gt.stat=Gt.Settings=void 0;var am=nm(),dI=im(),Lc=om();Gt.Settings=Lc.default;function fI(e,t,r){if(typeof t=="function"){am.read(e,xc(),t);return}am.read(e,xc(t),r)}Gt.stat=fI;function pI(e,t){let r=xc(t);return dI.read(e,r)}Gt.statSync=pI;function xc(e={}){return e instanceof Lc.default?e:new Lc.default(e)}});var lm=l((hj,cm)=>{var um;cm.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(um||(um=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var fm=l((_j,dm)=>{dm.exports=_I;var hI=lm();function _I(e,t){let r,n,i,s=!0;Array.isArray(e)?(r=[],n=e.length):(i=Object.keys(e),r={},n=i.length);function o(u){function c(){t&&t(u,r),t=null}s?hI(c):c()}function a(u,c,d){r[u]=d,(--n===0||c)&&o(c)}n?i?i.forEach(function(u){e[u](function(c,d){a(u,c,d)})}):e.forEach(function(u,c){u(function(d,f){a(c,d,f)})}):o(null),s=!1}});var Mc=l(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var ks=process.versions.node.split(".");if(ks[0]===void 0||ks[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var pm=Number.parseInt(ks[0],10),gI=Number.parseInt(ks[1],10),hm=10,mI=10,EI=pm>hm,SI=pm===hm&&gI>=mI;qs.IS_SUPPORT_READDIR_WITH_FILE_TYPES=EI||SI});var _m=l(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.createDirentFromStats=void 0;var Dc=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function yI(e,t){return new Dc(e,t)}Gs.createDirentFromStats=yI});var Bc=l(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.fs=void 0;var AI=_m();Hs.fs=AI});var Uc=l($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.joinPathSegments=void 0;function vI(e,t,r){return e.endsWith(r)?e+t:e+r+t}$s.joinPathSegments=vI});var Am=l(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.readdir=Ht.readdirWithFileTypes=Ht.read=void 0;var bI=dr(),gm=fm(),TI=Mc(),mm=Bc(),Em=Uc();function RI(e,t,r){if(!t.stats&&TI.IS_SUPPORT_READDIR_WITH_FILE_TYPES){Sm(e,t,r);return}ym(e,t,r)}Ht.read=RI;function Sm(e,t,r){t.fs.readdir(e,{withFileTypes:!0},(n,i)=>{if(n!==null){Vs(r,n);return}let s=i.map(a=>({dirent:a,name:a.name,path:Em.joinPathSegments(e,a.name,t.pathSegmentSeparator)}));if(!t.followSymbolicLinks){Fc(r,s);return}let o=s.map(a=>OI(a,t));gm(o,(a,u)=>{if(a!==null){Vs(r,a);return}Fc(r,u)})})}Ht.readdirWithFileTypes=Sm;function OI(e,t){return r=>{if(!e.dirent.isSymbolicLink()){r(null,e);return}t.fs.stat(e.path,(n,i)=>{if(n!==null){if(t.throwErrorOnBrokenSymbolicLink){r(n);return}r(null,e);return}e.dirent=mm.fs.createDirentFromStats(e.name,i),r(null,e)})}}function ym(e,t,r){t.fs.readdir(e,(n,i)=>{if(n!==null){Vs(r,n);return}let s=i.map(o=>{let a=Em.joinPathSegments(e,o,t.pathSegmentSeparator);return u=>{bI.stat(a,t.fsStatSettings,(c,d)=>{if(c!==null){u(c);return}let f={name:o,path:a,dirent:mm.fs.createDirentFromStats(o,d)};t.stats&&(f.stats=d),u(null,f)})}});gm(s,(o,a)=>{if(o!==null){Vs(r,o);return}Fc(r,a)})})}Ht.readdir=ym;function Vs(e,t){e(t)}function Fc(e,t){e(null,t)}});var Om=l($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.readdir=$t.readdirWithFileTypes=$t.read=void 0;var CI=dr(),PI=Mc(),vm=Bc(),bm=Uc();function II(e,t){return!t.stats&&PI.IS_SUPPORT_READDIR_WITH_FILE_TYPES?Tm(e,t):Rm(e,t)}$t.read=II;function Tm(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map(n=>{let i={dirent:n,name:n.name,path:bm.joinPathSegments(e,n.name,t.pathSegmentSeparator)};if(i.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{let s=t.fs.statSync(i.path);i.dirent=vm.fs.createDirentFromStats(i.name,s)}catch(s){if(t.throwErrorOnBrokenSymbolicLink)throw s}return i})}$t.readdirWithFileTypes=Tm;function Rm(e,t){return t.fs.readdirSync(e).map(n=>{let i=bm.joinPathSegments(e,n,t.pathSegmentSeparator),s=CI.statSync(i,t.fsStatSettings),o={name:n,path:i,dirent:vm.fs.createDirentFromStats(n,s)};return t.stats&&(o.stats=s),o})}$t.readdir=Rm});var Cm=l(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.createFileSystemAdapter=Vt.FILE_SYSTEM_ADAPTER=void 0;var un=O("fs");Vt.FILE_SYSTEM_ADAPTER={lstat:un.lstat,stat:un.stat,lstatSync:un.lstatSync,statSync:un.statSync,readdir:un.readdir,readdirSync:un.readdirSync};function wI(e){return e===void 0?Vt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},Vt.FILE_SYSTEM_ADAPTER),e)}Vt.createFileSystemAdapter=wI});var Pm=l(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var NI=O("path"),LI=dr(),xI=Cm(),jc=class{constructor(t={}){this._options=t,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=xI.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,NI.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new LI.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};kc.default=jc});var Ys=l(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.Settings=Yt.scandirSync=Yt.scandir=void 0;var Im=Am(),MI=Om(),qc=Pm();Yt.Settings=qc.default;function DI(e,t,r){if(typeof t=="function"){Im.read(e,Gc(),t);return}Im.read(e,Gc(t),r)}Yt.scandir=DI;function BI(e,t){let r=Gc(t);return MI.read(e,r)}Yt.scandirSync=BI;function Gc(e={}){return e instanceof qc.default?e:new qc.default(e)}});var Nm=l((Rj,wm)=>{"use strict";function UI(e){var t=new e,r=t;function n(){var s=t;return s.next?t=s.next:(t=new e,r=t),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}wm.exports=UI});var xm=l((Oj,Hc)=>{"use strict";var FI=Nm();function Lm(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),r<1)throw new Error("fastqueue concurrency must be greater than 1");var n=FI(jI),i=null,s=null,o=0,a=null,u={push:_,drain:lt,saturated:lt,pause:d,paused:!1,concurrency:r,running:c,resume:h,idle:g,length:f,getQueue:p,unshift:v,empty:lt,kill:y,killAndDrain:b,error:z};return u;function c(){return o}function d(){u.paused=!0}function f(){for(var N=i,U=0;N;)N=N.next,U++;return U}function p(){for(var N=i,U=[];N;)U.push(N.value),N=N.next;return U}function h(){if(!!u.paused){u.paused=!1;for(var N=0;N<u.concurrency;N++)o++,A()}}function g(){return o===0&&u.length()===0}function _(N,U){var P=n.get();P.context=e,P.release=A,P.value=N,P.callback=U||lt,P.errorHandler=a,o===u.concurrency||u.paused?s?(s.next=P,s=P):(i=P,s=P,u.saturated()):(o++,t.call(e,P.value,P.worked))}function v(N,U){var P=n.get();P.context=e,P.release=A,P.value=N,P.callback=U||lt,o===u.concurrency||u.paused?i?(P.next=i,i=P):(i=P,s=P,u.saturated()):(o++,t.call(e,P.value,P.worked))}function A(N){N&&n.release(N);var U=i;U?u.paused?o--:(s===i&&(s=null),i=U.next,U.next=null,t.call(e,U.value,U.worked),s===null&&u.empty()):--o===0&&u.drain()}function y(){i=null,s=null,u.drain=lt}function b(){i=null,s=null,u.drain(),u.drain=lt}function z(N){a=N}}function lt(){}function jI(){this.value=null,this.callback=lt,this.next=null,this.release=lt,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var i=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=lt,e.errorHandler&&s(r,o),i.call(e.context,r,n),e.release(e)}}function kI(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(c,d){t.call(this,c).then(function(f){d(null,f)},d)}var i=Lm(e,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=u,i;function a(c){return new Promise(function(d,f){s(c,function(p,h){if(p){f(p);return}d(h)})})}function u(c){return new Promise(function(d,f){o(c,function(p,h){if(p){f(p);return}d(h)})})}}Hc.exports=Lm;Hc.exports.promise=kI});var Ws=l(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.joinPathSegments=dt.replacePathSegmentSeparator=dt.isAppliedFilter=dt.isFatalError=void 0;function qI(e,t){return e.errorFilter===null?!0:!e.errorFilter(t)}dt.isFatalError=qI;function GI(e,t){return e===null||e(t)}dt.isAppliedFilter=GI;function HI(e,t){return e.split(/[/\\]/).join(t)}dt.replacePathSegmentSeparator=HI;function $I(e,t,r){return e===""?t:e.endsWith(r)?e+t:e+r+t}dt.joinPathSegments=$I});var Yc=l(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var VI=Ws(),$c=class{constructor(t,r){this._root=t,this._settings=r,this._root=VI.replacePathSegmentSeparator(t,r.pathSegmentSeparator)}};Vc.default=$c});var Xc=l(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var YI=O("events"),WI=Ys(),KI=xm(),Ks=Ws(),XI=Yc(),Wc=class extends XI.default{constructor(t,r){super(t,r),this._settings=r,this._scandir=WI.scandir,this._emitter=new YI.EventEmitter,this._queue=KI(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(t){this._emitter.on("entry",t)}onError(t){this._emitter.once("error",t)}onEnd(t){this._emitter.once("end",t)}_pushToQueue(t,r){let n={directory:t,base:r};this._queue.push(n,i=>{i!==null&&this._handleError(i)})}_worker(t,r){this._scandir(t.directory,this._settings.fsScandirSettings,(n,i)=>{if(n!==null){r(n,void 0);return}for(let s of i)this._handleEntry(s,t.base);r(null,void 0)})}_handleError(t){this._isDestroyed||!Ks.isFatalError(this._settings,t)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",t))}_handleEntry(t,r){if(this._isDestroyed||this._isFatalError)return;let n=t.path;r!==void 0&&(t.path=Ks.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),Ks.isAppliedFilter(this._settings.entryFilter,t)&&this._emitEntry(t),t.dirent.isDirectory()&&Ks.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_emitEntry(t){this._emitter.emit("entry",t)}};Kc.default=Wc});var Mm=l(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var zI=Xc(),zc=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new zI.default(this._root,this._settings),this._storage=[]}read(t){this._reader.onError(r=>{QI(t,r)}),this._reader.onEntry(r=>{this._storage.push(r)}),this._reader.onEnd(()=>{ZI(t,this._storage)}),this._reader.read()}};Qc.default=zc;function QI(e,t){e(t)}function ZI(e,t){e(null,t)}});var Dm=l(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var JI=O("stream"),ew=Xc(),Zc=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new ew.default(this._root,this._settings),this._stream=new JI.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(t=>{this._stream.emit("error",t)}),this._reader.onEntry(t=>{this._stream.push(t)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}};Jc.default=Zc});var Bm=l(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var tw=Ys(),Xs=Ws(),rw=Yc(),el=class extends rw.default{constructor(){super(...arguments),this._scandir=tw.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(t,r){this._queue.add({directory:t,base:r})}_handleQueue(){for(let t of this._queue.values())this._handleDirectory(t.directory,t.base)}_handleDirectory(t,r){try{let n=this._scandir(t,this._settings.fsScandirSettings);for(let i of n)this._handleEntry(i,r)}catch(n){this._handleError(n)}}_handleError(t){if(!!Xs.isFatalError(this._settings,t))throw t}_handleEntry(t,r){let n=t.path;r!==void 0&&(t.path=Xs.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),Xs.isAppliedFilter(this._settings.entryFilter,t)&&this._pushToStorage(t),t.dirent.isDirectory()&&Xs.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_pushToStorage(t){this._storage.push(t)}};tl.default=el});var Um=l(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var nw=Bm(),rl=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new nw.default(this._root,this._settings)}read(){return this._reader.read()}};nl.default=rl});var Fm=l(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var iw=O("path"),sw=Ys(),il=class{constructor(t={}){this._options=t,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,iw.sep),this.fsScandirSettings=new sw.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};sl.default=il});var al=l(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.Settings=ft.walkStream=ft.walkSync=ft.walk=void 0;var jm=Mm(),ow=Dm(),aw=Um(),ol=Fm();ft.Settings=ol.default;function uw(e,t,r){if(typeof t=="function"){new jm.default(e,zs()).read(t);return}new jm.default(e,zs(t)).read(r)}ft.walk=uw;function cw(e,t){let r=zs(t);return new aw.default(e,r).read()}ft.walkSync=cw;function lw(e,t){let r=zs(t);return new ow.default(e,r).read()}ft.walkStream=lw;function zs(e={}){return e instanceof ol.default?e:new ol.default(e)}});var ll=l(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var dw=O("path"),fw=dr(),km=Ot(),ul=class{constructor(t){this._settings=t,this._fsStatSettings=new fw.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(t){return dw.resolve(this._settings.cwd,t)}_makeEntry(t,r){let n={name:r,path:r,dirent:km.fs.createDirentFromStats(r,t)};return this._settings.stats&&(n.stats=t),n}_isFatalError(t){return!km.errno.isEnoentCodeError(t)&&!this._settings.suppressErrors}};cl.default=ul});var pl=l(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var pw=O("stream"),hw=dr(),_w=al(),gw=ll(),dl=class extends gw.default{constructor(){super(...arguments),this._walkStream=_w.walkStream,this._stat=hw.stat}dynamic(t,r){return this._walkStream(t,r)}static(t,r){let n=t.map(this._getFullEntryPath,this),i=new pw.PassThrough({objectMode:!0});i._write=(s,o,a)=>this._getEntry(n[s],t[s],r).then(u=>{u!==null&&r.entryFilter(u)&&i.push(u),s===n.length-1&&i.end(),a()}).catch(a);for(let s=0;s<n.length;s++)i.write(s);return i}_getEntry(t,r,n){return this._getStat(t).then(i=>this._makeEntry(i,r)).catch(i=>{if(n.errorFilter(i))return null;throw i})}_getStat(t){return new Promise((r,n)=>{this._stat(t,this._fsStatSettings,(i,s)=>i===null?r(s):n(i))})}};fl.default=dl});var qm=l(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});var cn=Ot(),hl=class{constructor(t,r,n){this._patterns=t,this._settings=r,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){let t=cn.pattern.expandPatternsWithBraceExpansion(this._patterns);for(let r of t){let n=this._getPatternSegments(r),i=this._splitSegmentsIntoSections(n);this._storage.push({complete:i.length<=1,pattern:r,segments:n,sections:i})}}_getPatternSegments(t){return cn.pattern.getPatternParts(t,this._micromatchOptions).map(n=>cn.pattern.isDynamicPattern(n,this._settings)?{dynamic:!0,pattern:n,patternRe:cn.pattern.makeRe(n,this._micromatchOptions)}:{dynamic:!1,pattern:n})}_splitSegmentsIntoSections(t){return cn.array.splitWhen(t,r=>r.dynamic&&cn.pattern.hasGlobStar(r.pattern))}};_l.default=hl});var Gm=l(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var mw=qm(),gl=class extends mw.default{match(t){let r=t.split("/"),n=r.length,i=this._storage.filter(s=>!s.complete||s.segments.length>n);for(let s of i){let o=s.sections[0];if(!s.complete&&n>o.length||r.every((u,c)=>{let d=s.segments[c];return!!(d.dynamic&&d.patternRe.test(u)||!d.dynamic&&d.pattern===u)}))return!0}return!1}};ml.default=gl});var Hm=l(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var Qs=Ot(),Ew=Gm(),El=class{constructor(t,r){this._settings=t,this._micromatchOptions=r}getFilter(t,r,n){let i=this._getMatcher(r),s=this._getNegativePatternsRe(n);return o=>this._filter(t,o,i,s)}_getMatcher(t){return new Ew.default(t,this._settings,this._micromatchOptions)}_getNegativePatternsRe(t){let r=t.filter(Qs.pattern.isAffectDepthOfReadingPattern);return Qs.pattern.convertPatternsToRe(r,this._micromatchOptions)}_filter(t,r,n,i){if(this._isSkippedByDeep(t,r.path)||this._isSkippedSymbolicLink(r))return!1;let s=Qs.path.removeLeadingDotSegment(r.path);return this._isSkippedByPositivePatterns(s,n)?!1:this._isSkippedByNegativePatterns(s,i)}_isSkippedByDeep(t,r){return this._settings.deep===1/0?!1:this._getEntryLevel(t,r)>=this._settings.deep}_getEntryLevel(t,r){let n=r.split("/").length;if(t==="")return n;let i=t.split("/").length;return n-i}_isSkippedSymbolicLink(t){return!this._settings.followSymbolicLinks&&t.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(t,r){return!this._settings.baseNameMatch&&!r.match(t)}_isSkippedByNegativePatterns(t,r){return!Qs.pattern.matchAny(t,r)}};Sl.default=El});var $m=l(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var fr=Ot(),yl=class{constructor(t,r){this._settings=t,this._micromatchOptions=r,this.index=new Map}getFilter(t,r){let n=fr.pattern.convertPatternsToRe(t,this._micromatchOptions),i=fr.pattern.convertPatternsToRe(r,this._micromatchOptions);return s=>this._filter(s,n,i)}_filter(t,r,n){if(this._settings.unique&&this._isDuplicateEntry(t)||this._onlyFileFilter(t)||this._onlyDirectoryFilter(t)||this._isSkippedByAbsoluteNegativePatterns(t.path,n))return!1;let i=this._settings.baseNameMatch?t.name:t.path,s=this._isMatchToPatterns(i,r)&&!this._isMatchToPatterns(t.path,n);return this._settings.unique&&s&&this._createIndexRecord(t),s}_isDuplicateEntry(t){return this.index.has(t.path)}_createIndexRecord(t){this.index.set(t.path,void 0)}_onlyFileFilter(t){return this._settings.onlyFiles&&!t.dirent.isFile()}_onlyDirectoryFilter(t){return this._settings.onlyDirectories&&!t.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(t,r){if(!this._settings.absolute)return!1;let n=fr.path.makeAbsolute(this._settings.cwd,t);return fr.pattern.matchAny(n,r)}_isMatchToPatterns(t,r){let n=fr.path.removeLeadingDotSegment(t);return fr.pattern.matchAny(n,r)||fr.pattern.matchAny(n+"/",r)}};Al.default=yl});var Vm=l(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});var Sw=Ot(),vl=class{constructor(t){this._settings=t}getFilter(){return t=>this._isNonFatalError(t)}_isNonFatalError(t){return Sw.errno.isEnoentCodeError(t)||this._settings.suppressErrors}};bl.default=vl});var Wm=l(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});var Ym=Ot(),Tl=class{constructor(t){this._settings=t}getTransformer(){return t=>this._transform(t)}_transform(t){let r=t.path;return this._settings.absolute&&(r=Ym.path.makeAbsolute(this._settings.cwd,r),r=Ym.path.unixify(r)),this._settings.markDirectories&&t.dirent.isDirectory()&&(r+="/"),this._settings.objectMode?Object.assign(Object.assign({},t),{path:r}):r}};Rl.default=Tl});var Zs=l(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});var yw=O("path"),Aw=Hm(),vw=$m(),bw=Vm(),Tw=Wm(),Ol=class{constructor(t){this._settings=t,this.errorFilter=new bw.default(this._settings),this.entryFilter=new vw.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new Aw.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new Tw.default(this._settings)}_getRootDirectory(t){return yw.resolve(this._settings.cwd,t.base)}_getReaderOptions(t){let r=t.base==="."?"":t.base;return{basePath:r,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(r,t.positive,t.negative),entryFilter:this.entryFilter.getFilter(t.positive,t.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}};Cl.default=Ol});var Km=l(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var Rw=pl(),Ow=Zs(),Pl=class extends Ow.default{constructor(){super(...arguments),this._reader=new Rw.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t),i=[];return new Promise((s,o)=>{let a=this.api(r,t,n);a.once("error",o),a.on("data",u=>i.push(n.transform(u))),a.once("end",()=>s(i))})}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Il.default=Pl});var Xm=l(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var Cw=O("stream"),Pw=pl(),Iw=Zs(),wl=class extends Iw.default{constructor(){super(...arguments),this._reader=new Pw.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t),i=this.api(r,t,n),s=new Cw.Readable({objectMode:!0,read:()=>{}});return i.once("error",o=>s.emit("error",o)).on("data",o=>s.emit("data",n.transform(o))).once("end",()=>s.emit("end")),s.once("close",()=>i.destroy()),s}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Nl.default=wl});var zm=l(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var ww=dr(),Nw=al(),Lw=ll(),Ll=class extends Lw.default{constructor(){super(...arguments),this._walkSync=Nw.walkSync,this._statSync=ww.statSync}dynamic(t,r){return this._walkSync(t,r)}static(t,r){let n=[];for(let i of t){let s=this._getFullEntryPath(i),o=this._getEntry(s,i,r);o===null||!r.entryFilter(o)||n.push(o)}return n}_getEntry(t,r,n){try{let i=this._getStat(t);return this._makeEntry(i,r)}catch(i){if(n.errorFilter(i))return null;throw i}}_getStat(t){return this._statSync(t,this._fsStatSettings)}};xl.default=Ll});var Qm=l(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var xw=zm(),Mw=Zs(),Ml=class extends Mw.default{constructor(){super(...arguments),this._reader=new xw.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return this.api(r,t,n).map(n.transform)}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Dl.default=Ml});var Zm=l(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var ln=O("fs"),Dw=O("os"),Bw=Math.max(Dw.cpus().length,1);dn.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:ln.lstat,lstatSync:ln.lstatSync,stat:ln.stat,statSync:ln.statSync,readdir:ln.readdir,readdirSync:ln.readdirSync};var Bl=class{constructor(t={}){this._options=t,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,Bw),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0)}_getValue(t,r){return t===void 0?r:t}_getFileSystemMethods(t={}){return Object.assign(Object.assign({},dn.DEFAULT_FILE_SYSTEM_ADAPTER),t)}};dn.default=Bl});var kl=l((zj,tE)=>{"use strict";var Jm=Jg(),eE=tm(),Uw=Km(),Fw=Xm(),jw=Qm(),Ul=Zm(),pr=Ot();async function Fl(e,t){fn(e);let r=jl(e,Uw.default,t),n=await Promise.all(r);return pr.array.flatten(n)}(function(e){function t(o,a){fn(o);let u=jl(o,jw.default,a);return pr.array.flatten(u)}e.sync=t;function r(o,a){fn(o);let u=jl(o,Fw.default,a);return pr.stream.merge(u)}e.stream=r;function n(o,a){fn(o);let u=eE.transform([].concat(o)),c=new Ul.default(a);return Jm.generate(u,c)}e.generateTasks=n;function i(o,a){fn(o);let u=new Ul.default(a);return pr.pattern.isDynamicPattern(o,u)}e.isDynamicPattern=i;function s(o){return fn(o),pr.path.escape(o)}e.escapePath=s})(Fl||(Fl={}));function jl(e,t,r){let n=eE.transform([].concat(e)),i=new Ul.default(r),s=Jm.generate(n,i),o=new t(i);return s.map(o.read,o)}function fn(e){if(![].concat(e).every(n=>pr.string.isString(n)&&!pr.string.isEmpty(n)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}tE.exports=Fl});var nE=l(hr=>{"use strict";var{promisify:kw}=O("util"),rE=O("fs");async function ql(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return(await kw(rE[e])(r))[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}function Gl(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return rE[e](r)[t]()}catch(n){if(n.code==="ENOENT")return!1;throw n}}hr.isFile=ql.bind(null,"stat","isFile");hr.isDirectory=ql.bind(null,"stat","isDirectory");hr.isSymlink=ql.bind(null,"lstat","isSymbolicLink");hr.isFileSync=Gl.bind(null,"statSync","isFile");hr.isDirectorySync=Gl.bind(null,"statSync","isDirectory");hr.isSymlinkSync=Gl.bind(null,"lstatSync","isSymbolicLink")});var uE=l((Zj,Hl)=>{"use strict";var _r=O("path"),iE=nE(),sE=e=>e.length>1?`{${e.join(",")}}`:e[0],oE=(e,t)=>{let r=e[0]==="!"?e.slice(1):e;return _r.isAbsolute(r)?r:_r.join(t,r)},qw=(e,t)=>_r.extname(e)?`**/${e}`:`**/${e}.${sE(t)}`,aE=(e,t)=>{if(t.files&&!Array.isArray(t.files))throw new TypeError(`Expected \`files\` to be of type \`Array\` but received type \`${typeof t.files}\``);if(t.extensions&&!Array.isArray(t.extensions))throw new TypeError(`Expected \`extensions\` to be of type \`Array\` but received type \`${typeof t.extensions}\``);return t.files&&t.extensions?t.files.map(r=>_r.posix.join(e,qw(r,t.extensions))):t.files?t.files.map(r=>_r.posix.join(e,`**/${r}`)):t.extensions?[_r.posix.join(e,`**/*.${sE(t.extensions)}`)]:[_r.posix.join(e,"**")]};Hl.exports=async(e,t)=>{if(t={cwd:process.cwd(),...t},typeof t.cwd!="string")throw new TypeError(`Expected \`cwd\` to be of type \`string\` but received type \`${typeof t.cwd}\``);let r=await Promise.all([].concat(e).map(async n=>await iE.isDirectory(oE(n,t.cwd))?aE(n,t):n));return[].concat.apply([],r)};Hl.exports.sync=(e,t)=>{if(t={cwd:process.cwd(),...t},typeof t.cwd!="string")throw new TypeError(`Expected \`cwd\` to be of type \`string\` but received type \`${typeof t.cwd}\``);let r=[].concat(e).map(n=>iE.isDirectorySync(oE(n,t.cwd))?aE(n,t):n);return[].concat.apply([],r)}});var mE=l((Jj,gE)=>{function cE(e){return Array.isArray(e)?e:[e]}var pE="",lE=" ",$l="\\",Gw=/^\s+$/,Hw=/^\\!/,$w=/^\\#/,Vw=/\r?\n/g,Yw=/^\.*\/|^\.+$/,Vl="/",dE=typeof Symbol<"u"?Symbol.for("node-ignore"):"node-ignore",Ww=(e,t,r)=>Object.defineProperty(e,t,{value:r}),Kw=/([0-z])-([0-z])/g,hE=()=>!1,Xw=e=>e.replace(Kw,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:pE),zw=e=>{let{length:t}=e;return e.slice(0,t-t%2)},Qw=[[/\\?\s+$/,e=>e.indexOf("\\")===0?lE:pE],[/\\\s/g,()=>lE],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)\\\*(?=.+)/g,(e,t)=>`${t}[^\\/]*`],[/\\\\\\(?=[$.|*+(){^])/g,()=>$l],[/\\\\/g,()=>$l],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===$l?`\\[${r}${zw(n)}${i}`:i==="]"&&n.length%2===0?`[${Xw(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],fE=Object.create(null),Zw=(e,t)=>{let r=fE[e];return r||(r=Qw.reduce((n,i)=>n.replace(i[0],i[1].bind(e)),e),fE[e]=r),t?new RegExp(r,"i"):new RegExp(r)},Kl=e=>typeof e=="string",Jw=e=>e&&Kl(e)&&!Gw.test(e)&&e.indexOf("#")!==0,eN=e=>e.split(Vw),Yl=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},tN=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(Hw,"!").replace($w,"#");let i=Zw(e,t);return new Yl(r,e,n,i)},rN=(e,t)=>{throw new t(e)},Pt=(e,t,r)=>Kl(e)?e?Pt.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),_E=e=>Yw.test(e);Pt.isNotRelative=_E;Pt.convert=e=>e;var Wl=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){Ww(this,dE,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[dE]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(Jw(t)){let r=tN(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,cE(Kl(t)?eN(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(s=>{let{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let s=t&&Pt.convert(t);return Pt(s,t,this._allowRelativePaths?hE:rN),this._t(s,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(Vl)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let s=this._t(i.join(Vl)+Vl,r,n,i);return r[t]=s.ignored?s:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return cE(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Js=e=>new Wl(e),nN=e=>Pt(e&&Pt.convert(e),e,hE);Js.isPathValid=nN;Js.default=Js;gE.exports=Js;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");Pt.convert=e;let t=/^[a-z]:\//i;Pt.isNotRelative=r=>t.test(r)||_E(r)}});var SE=l((e2,EE)=>{"use strict";EE.exports=e=>{let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}});var OE=l((t2,Xl)=>{"use strict";var{promisify:iN}=O("util"),yE=O("fs"),It=O("path"),AE=kl(),sN=mE(),yi=SE(),vE=["**/node_modules/**","**/flow-typed/**","**/coverage/**","**/.git"],oN=iN(yE.readFile),aN=e=>t=>t.startsWith("!")?"!"+It.posix.join(e,t.slice(1)):It.posix.join(e,t),uN=(e,t)=>{let r=yi(It.relative(t.cwd,It.dirname(t.fileName)));return e.split(/\r?\n/).filter(Boolean).filter(n=>!n.startsWith("#")).map(aN(r))},bE=e=>{let t=sN();for(let r of e)t.add(uN(r.content,{cwd:r.cwd,fileName:r.filePath}));return t},cN=(e,t)=>{if(e=yi(e),It.isAbsolute(t)){if(yi(t).startsWith(e))return t;throw new Error(`Path ${t} is not in cwd ${e}`)}return It.join(e,t)},TE=(e,t)=>r=>e.ignores(yi(It.relative(t,cN(t,r.path||r)))),lN=async(e,t)=>{let r=It.join(t,e),n=await oN(r,"utf8");return{cwd:t,filePath:r,content:n}},dN=(e,t)=>{let r=It.join(t,e),n=yE.readFileSync(r,"utf8");return{cwd:t,filePath:r,content:n}},RE=({ignore:e=[],cwd:t=yi(process.cwd())}={})=>({ignore:e,cwd:t});Xl.exports=async e=>{e=RE(e);let t=await AE("**/.gitignore",{ignore:vE.concat(e.ignore),cwd:e.cwd}),r=await Promise.all(t.map(i=>lN(i,e.cwd))),n=bE(r);return TE(n,e.cwd)};Xl.exports.sync=e=>{e=RE(e);let r=AE.sync("**/.gitignore",{ignore:vE.concat(e.ignore),cwd:e.cwd}).map(i=>dN(i,e.cwd)),n=bE(r);return TE(n,e.cwd)}});var PE=l((r2,CE)=>{"use strict";var{Transform:fN}=O("stream"),eo=class extends fN{constructor(){super({objectMode:!0})}},zl=class extends eo{constructor(t){super(),this._filter=t}_transform(t,r,n){this._filter(t)&&this.push(t),n()}},Ql=class extends eo{constructor(){super(),this._pushed=new Set}_transform(t,r,n){this._pushed.has(t)||(this.push(t),this._pushed.add(t)),n()}};CE.exports={FilterStream:zl,UniqueStream:Ql}});var xE=l((n2,gr)=>{"use strict";var wE=O("fs"),to=Og(),pN=yc(),ro=kl(),no=uE(),Zl=OE(),{FilterStream:hN,UniqueStream:_N}=PE(),NE=()=>!1,IE=e=>e[0]==="!",gN=e=>{if(!e.every(t=>typeof t=="string"))throw new TypeError("Patterns must be a string or an array of strings")},mN=(e={})=>{if(!e.cwd)return;let t;try{t=wE.statSync(e.cwd)}catch{return}if(!t.isDirectory())throw new Error("The `cwd` option must be a path to a directory")},EN=e=>e.stats instanceof wE.Stats?e.path:e,io=(e,t)=>{e=to([].concat(e)),gN(e),mN(t);let r=[];t={ignore:[],expandDirectories:!0,...t};for(let[n,i]of e.entries()){if(IE(i))continue;let s=e.slice(n).filter(a=>IE(a)).map(a=>a.slice(1)),o={...t,ignore:t.ignore.concat(s)};r.push({pattern:i,options:o})}return r},SN=(e,t)=>{let r={};return e.options.cwd&&(r.cwd=e.options.cwd),Array.isArray(e.options.expandDirectories)?r={...r,files:e.options.expandDirectories}:typeof e.options.expandDirectories=="object"&&(r={...r,...e.options.expandDirectories}),t(e.pattern,r)},Jl=(e,t)=>e.options.expandDirectories?SN(e,t):[e.pattern],LE=e=>e&&e.gitignore?Zl.sync({cwd:e.cwd,ignore:e.ignore}):NE,ed=e=>t=>{let{options:r}=e;return r.ignore&&Array.isArray(r.ignore)&&r.expandDirectories&&(r.ignore=no.sync(r.ignore)),{pattern:t,options:r}};gr.exports=async(e,t)=>{let r=io(e,t),n=async()=>t&&t.gitignore?Zl({cwd:t.cwd,ignore:t.ignore}):NE,i=async()=>{let u=await Promise.all(r.map(async c=>{let d=await Jl(c,no);return Promise.all(d.map(ed(c)))}));return to(...u)},[s,o]=await Promise.all([n(),i()]),a=await Promise.all(o.map(u=>ro(u.pattern,u.options)));return to(...a).filter(u=>!s(EN(u)))};gr.exports.sync=(e,t)=>{let r=io(e,t),n=[];for(let o of r){let a=Jl(o,no.sync).map(ed(o));n.push(...a)}let i=LE(t),s=[];for(let o of n)s=to(s,ro.sync(o.pattern,o.options));return s.filter(o=>!i(o))};gr.exports.stream=(e,t)=>{let r=io(e,t),n=[];for(let a of r){let u=Jl(a,no.sync).map(ed(a));n.push(...u)}let i=LE(t),s=new hN(a=>!i(a)),o=new _N;return pN(n.map(a=>ro.stream(a.pattern,a.options))).pipe(s).pipe(o)};gr.exports.generateGlobTasks=io;gr.exports.hasMagic=(e,t)=>[].concat(e).some(r=>ro.isDynamicPattern(r,t));gr.exports.gitignore=Zl});var DE=l((i2,td)=>{"use strict";var yN=Object.prototype.hasOwnProperty,Pe="~";function Ai(){}Object.create&&(Ai.prototype=Object.create(null),new Ai().__proto__||(Pe=!1));function AN(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function ME(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new AN(r,n||e,i),o=Pe?Pe+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function so(e,t){--e._eventsCount===0?e._events=new Ai:delete e._events[t]}function Ae(){this._events=new Ai,this._eventsCount=0}Ae.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)yN.call(r,n)&&t.push(Pe?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Ae.prototype.listeners=function(t){var r=Pe?Pe+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Ae.prototype.listenerCount=function(t){var r=Pe?Pe+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Ae.prototype.emit=function(t,r,n,i,s,o){var a=Pe?Pe+t:t;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,d,f;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(f=1,d=new Array(c-1);f<c;f++)d[f-1]=arguments[f];u.fn.apply(u.context,d)}else{var p=u.length,h;for(f=0;f<p;f++)switch(u[f].once&&this.removeListener(t,u[f].fn,void 0,!0),c){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,r);break;case 3:u[f].fn.call(u[f].context,r,n);break;case 4:u[f].fn.call(u[f].context,r,n,i);break;default:if(!d)for(h=1,d=new Array(c-1);h<c;h++)d[h-1]=arguments[h];u[f].fn.apply(u[f].context,d)}}return!0};Ae.prototype.on=function(t,r,n){return ME(this,t,r,n,!1)};Ae.prototype.once=function(t,r,n){return ME(this,t,r,n,!0)};Ae.prototype.removeListener=function(t,r,n,i){var s=Pe?Pe+t:t;if(!this._events[s])return this;if(!r)return so(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&so(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:so(this,s)}return this};Ae.prototype.removeAllListeners=function(t){var r;return t?(r=Pe?Pe+t:t,this._events[r]&&so(this,r)):(this._events=new Ai,this._eventsCount=0),this};Ae.prototype.off=Ae.prototype.removeListener;Ae.prototype.addListener=Ae.prototype.on;Ae.prefixed=Pe;Ae.EventEmitter=Ae;typeof td<"u"&&(td.exports=Ae)});var UE=l((s2,BE)=>{"use strict";BE.exports=(e,t)=>(t=t||(()=>{}),e.then(r=>new Promise(n=>{n(t())}).then(()=>r),r=>new Promise(n=>{n(t())}).then(()=>{throw r})))});var jE=l((o2,ao)=>{"use strict";var vN=UE(),oo=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},FE=(e,t,r)=>new Promise((n,i)=>{if(typeof t!="number"||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0){n(e);return}let s=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){i(u)}return}let o=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,a=r instanceof Error?r:new oo(o);typeof e.cancel=="function"&&e.cancel(),i(a)},t);vN(e.then(n,i),()=>{clearTimeout(s)})});ao.exports=FE;ao.exports.default=FE;ao.exports.TimeoutError=oo});var kE=l(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});function bN(e,t,r){let n=0,i=e.length;for(;i>0;){let s=i/2|0,o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}rd.default=bN});var qE=l(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});var TN=kE(),nd=class{constructor(){this._queue=[]}enqueue(t,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:t};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=TN.default(this._queue,n,(s,o)=>o.priority-s.priority);this._queue.splice(i,0,n)}dequeue(){let t=this._queue.shift();return t?.run}filter(t){return this._queue.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this._queue.length}};id.default=nd});var HE=l(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var RN=DE(),GE=jE(),ON=qE(),uo=()=>{},CN=new GE.TimeoutError,sd=class extends RN{constructor(t){var r,n,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=uo,this._resolveIdle=uo,t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:ON.default},t),!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=t.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||t.interval===0,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=t.throwOnTimeout===!0,this._isPaused=t.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=uo,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=uo,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let t=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-t;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),t&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,r={}){return new Promise((n,i)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&r.timeout===void 0?t():GE.default(Promise.resolve(t()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(CN)});n(await o)}catch(o){i(o)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(t=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),t()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(t=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),t()}})}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}};od.default=sd});var VE=l((l2,ad)=>{"use strict";var $E=(e,...t)=>new Promise(r=>{r(e(...t))});ad.exports=$E;ad.exports.default=$E});var WE=l((d2,ud)=>{"use strict";var PN=VE(),YE=e=>{if(!((Number.isInteger(e)||e===1/0)&&e>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let t=[],r=0,n=()=>{r--,t.length>0&&t.shift()()},i=(a,u,...c)=>{r++;let d=PN(a,...c);u(d),d.then(n,n)},s=(a,u,...c)=>{r<e?i(a,u,...c):t.push(i.bind(null,a,u,...c))},o=(a,...u)=>new Promise(c=>s(a,c,...u));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>t.length},clearQueue:{value:()=>{t.length=0}}}),o};ud.exports=YE;ud.exports.default=YE});var KE=l(ld=>{"use strict";var co=class{constructor(t){this.tasks=[],this.count=t}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let t=this.tasks.shift();if(t===void 0)throw"Unexpected undefined value in tasks list";t()}}acquire(){return new Promise((t,r)=>{var n=()=>{var i=!1;t(()=>{i||(i=!0,this.count++,this.sched())})};this.tasks.push(n),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))})}use(t){return this.acquire().then(r=>t().then(n=>(r(),n)).catch(n=>{throw r(),n}))}};ld.Semaphore=co;var cd=class extends co{constructor(){super(1)}};ld.Mutex=cd});var zE=l((p2,XE)=>{"use strict";XE.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var dd=l((h2,QE)=>{"use strict";var IN=zE();QE.exports=e=>typeof e=="string"?e.replace(IN(),""):e});var JE=l((_2,fd)=>{"use strict";var ZE=e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141);fd.exports=ZE;fd.exports.default=ZE});var rS=l((g2,tS)=>{"use strict";var eS="[\uD800-\uDBFF][\uDC00-\uDFFF]",wN=e=>e&&e.exact?new RegExp(`^${eS}$`):new RegExp(eS,"g");tS.exports=wN});var iS=l((m2,nS)=>{"use strict";nS.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var pd=l((E2,oS)=>{var vi=iS(),sS={};for(let e of Object.keys(vi))sS[vi[e]]=e;var C={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};oS.exports=C;for(let e of Object.keys(C)){if(!("channels"in C[e]))throw new Error("missing channels property: "+e);if(!("labels"in C[e]))throw new Error("missing channel labels property: "+e);if(C[e].labels.length!==C[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=C[e];delete C[e].channels,delete C[e].labels,Object.defineProperty(C[e],"channels",{value:t}),Object.defineProperty(C[e],"labels",{value:r})}C.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=s-i,a,u;s===i?a=0:t===s?a=(r-n)/o:r===s?a=2+(n-t)/o:n===s&&(a=4+(t-r)/o),a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+s)/2;return s===i?u=0:c<=.5?u=o/(s+i):u=o/(2-s-i),[a,u*100,c*100]};C.rgb.hsv=function(e){let t,r,n,i,s,o=e[0]/255,a=e[1]/255,u=e[2]/255,c=Math.max(o,a,u),d=c-Math.min(o,a,u),f=function(p){return(c-p)/6/d+1/2};return d===0?(i=0,s=0):(s=d/c,t=f(o),r=f(a),n=f(u),o===c?i=n-r:a===c?i=1/3+t-n:u===c&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]};C.rgb.hwb=function(e){let t=e[0],r=e[1],n=e[2],i=C.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,s*100,n*100]};C.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n),s=(1-t-i)/(1-i)||0,o=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function NN(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}C.rgb.keyword=function(e){let t=sS[e];if(t)return t;let r=1/0,n;for(let i of Object.keys(vi)){let s=vi[i],o=NN(e,s);o<r&&(r=o,n=i)}return n};C.keyword.rgb=function(e){return vi[e]};C.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=t*.4124+r*.3576+n*.1805,s=t*.2126+r*.7152+n*.0722,o=t*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};C.rgb.lab=function(e){let t=C.rgb.xyz(e),r=t[0],n=t[1],i=t[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let s=116*n-16,o=500*(r-n),a=200*(n-i);return[s,o,a]};C.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100,i,s,o;if(r===0)return o=n*255,[o,o,o];n<.5?i=n*(1+r):i=n+r-n*r;let a=2*n-i,u=[0,0,0];for(let c=0;c<3;c++)s=t+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(i-a)*6*s:2*s<1?o=i:3*s<2?o=a+(i-a)*(2/3-s)*6:o=a,u[c]=o*255;return u};C.hsl.hsv=function(e){let t=e[0],r=e[1]/100,n=e[2]/100,i=r,s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;let o=(n+r)/2,a=n===0?2*i/(s+i):2*r/(n+r);return[t,a*100,o*100]};C.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-r),a=255*n*(1-r*s),u=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,u,o];case 1:return[a,n,o];case 2:return[o,n,u];case 3:return[o,a,n];case 4:return[u,o,n];case 5:return[n,o,a]}};C.hsv.hsl=function(e){let t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01),s,o;o=(2-r)*n;let a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[t,s*100,o*100]};C.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100,i=r+n,s;i>1&&(r/=i,n/=i);let o=Math.floor(6*t),a=1-n;s=6*t-o,(o&1)!==0&&(s=1-s);let u=r+s*(a-r),c,d,f;switch(o){default:case 6:case 0:c=a,d=u,f=r;break;case 1:c=u,d=a,f=r;break;case 2:c=r,d=a,f=u;break;case 3:c=r,d=u,f=a;break;case 4:c=u,d=r,f=a;break;case 5:c=a,d=r,f=u;break}return[c*255,d*255,f*255]};C.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100,s=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[s*255,o*255,a*255]};C.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,n=e[2]/100,i,s,o;return i=t*3.2406+r*-1.5372+n*-.4986,s=t*-.9689+r*1.8758+n*.0415,o=t*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};C.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*r-16,s=500*(t-r),o=200*(r-n);return[i,s,o]};C.lab.xyz=function(e){let t=e[0],r=e[1],n=e[2],i,s,o;s=(t+16)/116,i=r/500+s,o=s-n/200;let a=s**3,u=i**3,c=o**3;return s=a>.008856?a:(s-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};C.lab.lch=function(e){let t=e[0],r=e[1],n=e[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(r*r+n*n);return[t,o,i]};C.lch.lab=function(e){let t=e[0],r=e[1],i=e[2]/360*2*Math.PI,s=r*Math.cos(i),o=r*Math.sin(i);return[t,s,o]};C.rgb.ansi16=function(e,t=null){let[r,n,i]=e,s=t===null?C.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return s===2&&(o+=60),o};C.hsv.ansi16=function(e){return C.rgb.ansi16(C.hsv.rgb(e),e[2])};C.rgb.ansi256=function(e){let t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};C.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,n=(t&1)*r*255,i=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[n,i,s]};C.ansi256.rgb=function(e){if(e>=232){let s=(e-232)*10+8;return[s,s,s]}e-=16;let t,r=Math.floor(e/36)/5*255,n=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[r,n,i]};C.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};C.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};C.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),s=Math.min(Math.min(t,r),n),o=i-s,a,u;return o<1?a=s/(1-o):a=0,o<=0?u=0:i===t?u=(r-n)/o%6:i===r?u=2+(n-t)/o:u=4+(t-r)/o,u/=6,u%=1,[u*360,o*100,a*100]};C.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],n*100,i*100]};C.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],n*100,i*100]};C.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],s=t%1*6,o=s%1,a=1-o,u=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};C.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,n=t+r*(1-t),i=0;return n>0&&(i=t/n),[e[0],i*100,n*100]};C.hcg.hsl=function(e){let t=e[1]/100,n=e[2]/100*(1-t)+.5*t,i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],i*100,n*100]};C.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};C.hwb.hcg=function(e){let t=e[1]/100,n=1-e[2]/100,i=n-t,s=0;return i<1&&(s=(n-i)/(1-i)),[e[0],i*100,s*100]};C.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};C.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};C.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};C.gray.hsl=function(e){return[0,0,e[0]]};C.gray.hsv=C.gray.hsl;C.gray.hwb=function(e){return[0,100,e[0]]};C.gray.cmyk=function(e){return[0,0,0,e[0]]};C.gray.lab=function(e){return[e[0],0,0]};C.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n};C.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var uS=l((S2,aS)=>{var lo=pd();function LN(){let e={},t=Object.keys(lo);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function xN(e){let t=LN(),r=[e];for(t[e].distance=0;r.length;){let n=r.pop(),i=Object.keys(lo[n]);for(let s=i.length,o=0;o<s;o++){let a=i[o],u=t[a];u.distance===-1&&(u.distance=t[n].distance+1,u.parent=n,r.unshift(a))}}return t}function MN(e,t){return function(r){return t(e(r))}}function DN(e,t){let r=[t[e].parent,e],n=lo[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)r.unshift(t[i].parent),n=MN(lo[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}aS.exports=function(e){let t=xN(e),r={},n=Object.keys(t);for(let i=n.length,s=0;s<i;s++){let o=n[s];t[o].parent!==null&&(r[o]=DN(o,t))}return r}});var lS=l((y2,cS)=>{var hd=pd(),BN=uS(),pn={},UN=Object.keys(hd);function FN(e){let t=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function jN(e){let t=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=e(r);if(typeof i=="object")for(let s=i.length,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}UN.forEach(e=>{pn[e]={},Object.defineProperty(pn[e],"channels",{value:hd[e].channels}),Object.defineProperty(pn[e],"labels",{value:hd[e].labels});let t=BN(e);Object.keys(t).forEach(n=>{let i=t[n];pn[e][n]=jN(i),pn[e][n].raw=FN(i)})});cS.exports=pn});var gS=l((A2,_S)=>{"use strict";var dS=(e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,fS=(e,t)=>(...r)=>{let n=e(...r);return`\x1B[${38+t};5;${n}m`},pS=(e,t)=>(...r)=>{let n=e(...r);return`\x1B[${38+t};2;${n[0]};${n[1]};${n[2]}m`},fo=e=>e,hS=(e,t,r)=>[e,t,r],hn=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})},_d,_n=(e,t,r,n)=>{_d===void 0&&(_d=lS());let i=n?10:0,s={};for(let[o,a]of Object.entries(_d)){let u=o==="ansi16"?"ansi":o;o===t?s[u]=e(r,i):typeof a=="object"&&(s[u]=e(a[t],i))}return s};function kN(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,n]of Object.entries(t)){for(let[i,s]of Object.entries(n))t[i]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},n[i]=t[i],e.set(s[0],s[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",hn(t.color,"ansi",()=>_n(dS,"ansi16",fo,!1)),hn(t.color,"ansi256",()=>_n(fS,"ansi256",fo,!1)),hn(t.color,"ansi16m",()=>_n(pS,"rgb",hS,!1)),hn(t.bgColor,"ansi",()=>_n(dS,"ansi16",fo,!0)),hn(t.bgColor,"ansi256",()=>_n(fS,"ansi256",fo,!0)),hn(t.bgColor,"ansi16m",()=>_n(pS,"rgb",hS,!0)),t}Object.defineProperty(_S,"exports",{enumerable:!0,get:kN})});var AS=l((v2,yS)=>{"use strict";var qN=JE(),GN=rS(),mS=gS(),SS=["\x1B","\x9B"],po=e=>`${SS[0]}[${e}m`,ES=(e,t,r)=>{let n=[];e=[...e];for(let i of e){let s=i;i.includes(";")&&(i=i.split(";")[0][0]+"0");let o=mS.codes.get(Number.parseInt(i,10));if(o){let a=e.indexOf(o.toString());a===-1?n.push(po(t?o:s)):e.splice(a,1)}else if(t){n.push(po(0));break}else n.push(po(s))}if(t&&(n=n.filter((i,s)=>n.indexOf(i)===s),r!==void 0)){let i=po(mS.codes.get(Number.parseInt(r,10)));n=n.reduce((s,o)=>o===i?[o,...s]:[...s,o],[])}return n.join("")};yS.exports=(e,t,r)=>{let n=[...e],i=[],s=typeof r=="number"?r:n.length,o=!1,a,u=0,c="";for(let[d,f]of n.entries()){let p=!1;if(SS.includes(f)){let h=/\d[^m]*/.exec(e.slice(d,d+18));a=h&&h.length>0?h[0]:void 0,u<s&&(o=!0,a!==void 0&&i.push(a))}else o&&f==="m"&&(o=!1,p=!0);if(!o&&!p&&u++,!GN({exact:!0}).test(f)&&qN(f.codePointAt())&&(u++,typeof r!="number"&&s++),u>t&&u<=s)c+=f;else if(u===t&&!o&&a!==void 0)c=ES(i);else if(u>=s){c+=ES(i,!0,a);break}}return c}});var bS=l(vS=>{"use strict";Object.defineProperty(vS,"__esModule",{value:!0})});var TS=l(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho._globalThis=void 0;ho._globalThis=typeof globalThis=="object"?globalThis:global});var RS=l(mr=>{"use strict";var HN=mr&&mr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$N=mr&&mr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&HN(t,e,r)};Object.defineProperty(mr,"__esModule",{value:!0});$N(TS(),mr)});var OS=l(Er=>{"use strict";var VN=Er&&Er.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),YN=Er&&Er.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&VN(t,e,r)};Object.defineProperty(Er,"__esModule",{value:!0});YN(RS(),Er)});var gd=l(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.VERSION=void 0;_o.VERSION="1.1.0"});var IS=l(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.isCompatible=gn._makeCompatibilityCheck=void 0;var WN=gd(),CS=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function PS(e){var t=new Set([e]),r=new Set,n=e.match(CS);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(u){return u===e};function s(a){return r.add(a),!1}function o(a){return t.add(a),!0}return function(u){if(t.has(u))return!0;if(r.has(u))return!1;var c=u.match(CS);if(!c)return s(u);var d={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return d.prerelease!=null||i.major!==d.major?s(u):i.major===0?i.minor===d.minor&&i.patch<=d.patch?o(u):s(u):i.minor<=d.minor?o(u):s(u)}}gn._makeCompatibilityCheck=PS;gn.isCompatible=PS(WN.VERSION)});var mn=l(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.unregisterGlobal=Wt.getGlobal=Wt.registerGlobal=void 0;var KN=OS(),bi=gd(),XN=IS(),zN=bi.VERSION.split(".")[0],Ti=Symbol.for("opentelemetry.js.api."+zN),Ri=KN._globalThis;function QN(e,t,r,n){var i;n===void 0&&(n=!1);var s=Ri[Ti]=(i=Ri[Ti])!==null&&i!==void 0?i:{version:bi.VERSION};if(!n&&s[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(o.stack||o.message),!1}if(s.version!==bi.VERSION){var o=new Error("@opentelemetry/api: All API registration versions must match");return r.error(o.stack||o.message),!1}return s[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+bi.VERSION+"."),!0}Wt.registerGlobal=QN;function ZN(e){var t,r,n=(t=Ri[Ti])===null||t===void 0?void 0:t.version;if(!(!n||!XN.isCompatible(n)))return(r=Ri[Ti])===null||r===void 0?void 0:r[e]}Wt.getGlobal=ZN;function JN(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+bi.VERSION+".");var r=Ri[Ti];r&&delete r[e]}Wt.unregisterGlobal=JN});var wS=l(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.DiagComponentLogger=void 0;var e1=mn(),t1=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Oi("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Oi("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Oi("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Oi("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Oi("verbose",this._namespace,t)},e}();go.DiagComponentLogger=t1;function Oi(e,t,r){var n=e1.getGlobal("diag");if(!!n)return r.unshift(t),n[e].apply(n,r)}});var mo=l(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.DiagLogLevel=void 0;var r1;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(r1=Ci.DiagLogLevel||(Ci.DiagLogLevel={}))});var NS=l(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.createLogLevelDiagLogger=void 0;var wt=mo();function n1(e,t){e<wt.DiagLogLevel.NONE?e=wt.DiagLogLevel.NONE:e>wt.DiagLogLevel.ALL&&(e=wt.DiagLogLevel.ALL),t=t||{};function r(n,i){var s=t[n];return typeof s=="function"&&e>=i?s.bind(t):function(){}}return{error:r("error",wt.DiagLogLevel.ERROR),warn:r("warn",wt.DiagLogLevel.WARN),info:r("info",wt.DiagLogLevel.INFO),debug:r("debug",wt.DiagLogLevel.DEBUG),verbose:r("verbose",wt.DiagLogLevel.VERBOSE)}}Eo.createLogLevelDiagLogger=n1});var En=l(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.DiagAPI=void 0;var i1=wS(),s1=NS(),o1=mo(),So=mn(),a1="diag",u1=function(){function e(){function t(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=So.getGlobal("diag");if(!!o)return o[n].apply(o,i)}}var r=this;r.setLogger=function(n,i){var s,o;if(i===void 0&&(i=o1.DiagLogLevel.INFO),n===r){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=a.stack)!==null&&s!==void 0?s:a.message),!1}var u=So.getGlobal("diag"),c=s1.createLogLevelDiagLogger(i,n);if(u){var d=(o=new Error().stack)!==null&&o!==void 0?o:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),c.warn("Current logger will overwrite one already registered from "+d)}return So.registerGlobal("diag",c,r,!0)},r.disable=function(){So.unregisterGlobal(a1,r)},r.createComponentLogger=function(n){return new i1.DiagComponentLogger(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();yo.DiagAPI=u1});var LS=l(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.BaggageImpl=void 0;var c1=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var r=this._entries.get(t);if(!!r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=t[0],n=t[1];return[r,n]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),i=0,s=t;i<s.length;i++){var o=s[i];n._entries.delete(o)}return n},e.prototype.clear=function(){return new e},e}();Ao.BaggageImpl=c1});var xS=l(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.baggageEntryMetadataSymbol=void 0;vo.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var md=l(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.baggageEntryMetadataFromString=Sn.createBaggage=void 0;var l1=En(),d1=LS(),f1=xS(),p1=l1.DiagAPI.instance();function h1(e){return e===void 0&&(e={}),new d1.BaggageImpl(new Map(Object.entries(e)))}Sn.createBaggage=h1;function _1(e){return typeof e!="string"&&(p1.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:f1.baggageEntryMetadataSymbol,toString:function(){return e}}}Sn.baggageEntryMetadataFromString=_1});var DS=l(MS=>{"use strict";Object.defineProperty(MS,"__esModule",{value:!0})});var US=l(BS=>{"use strict";Object.defineProperty(BS,"__esModule",{value:!0})});var jS=l(FS=>{"use strict";Object.defineProperty(FS,"__esModule",{value:!0})});var kS=l(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.DiagConsoleLogger=void 0;var Ed=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],g1=function(){function e(){function t(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(console){var o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,i)}}}for(var r=0;r<Ed.length;r++)this[Ed[r].n]=t(Ed[r].c)}return e}();bo.DiagConsoleLogger=g1});var GS=l(Kt=>{"use strict";var m1=Kt&&Kt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),qS=Kt&&Kt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&m1(t,e,r)};Object.defineProperty(Kt,"__esModule",{value:!0});qS(kS(),Kt);qS(mo(),Kt)});var Sd=l(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.defaultTextMapSetter=yn.defaultTextMapGetter=void 0;yn.defaultTextMapGetter={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}};yn.defaultTextMapSetter={set:function(e,t,r){e!=null&&(e[t]=r)}}});var $S=l(HS=>{"use strict";Object.defineProperty(HS,"__esModule",{value:!0})});var YS=l(VS=>{"use strict";Object.defineProperty(VS,"__esModule",{value:!0})});var Pi=l(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.ROOT_CONTEXT=An.createContextKey=void 0;function E1(e){return Symbol.for(e)}An.createContextKey=E1;var S1=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var s=new e(r._currentContext);return s._currentContext.set(n,i),s},r.deleteValue=function(n){var i=new e(r._currentContext);return i._currentContext.delete(n),i}}return e}();An.ROOT_CONTEXT=new S1});var WS=l(vn=>{"use strict";var y1=vn&&vn.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(vn,"__esModule",{value:!0});vn.NoopContextManager=void 0;var A1=Pi(),v1=function(){function e(){}return e.prototype.active=function(){return A1.ROOT_CONTEXT},e.prototype.with=function(t,r,n){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return r.call.apply(r,y1([n],i))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();vn.NoopContextManager=v1});var vd=l(bn=>{"use strict";var b1=bn&&bn.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(bn,"__esModule",{value:!0});bn.ContextAPI=void 0;var T1=WS(),yd=mn(),KS=En(),Ad="context",R1=new T1.NoopContextManager,O1=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return yd.registerGlobal(Ad,t,KS.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return(i=this._getContextManager()).with.apply(i,b1([t,r,n],s))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return yd.getGlobal(Ad)||R1},e.prototype.disable=function(){this._getContextManager().disable(),yd.unregisterGlobal(Ad,KS.DiagAPI.instance())},e}();bn.ContextAPI=O1});var bd=l(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.TraceFlags=void 0;var C1;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(C1=Ii.TraceFlags||(Ii.TraceFlags={}))});var To=l(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.INVALID_SPAN_CONTEXT=pt.INVALID_TRACEID=pt.INVALID_SPANID=void 0;var P1=bd();pt.INVALID_SPANID="0000000000000000";pt.INVALID_TRACEID="00000000000000000000000000000000";pt.INVALID_SPAN_CONTEXT={traceId:pt.INVALID_TRACEID,spanId:pt.INVALID_SPANID,traceFlags:P1.TraceFlags.NONE}});var Oo=l(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.NonRecordingSpan=void 0;var I1=To(),w1=function(){function e(t){t===void 0&&(t=I1.INVALID_SPAN_CONTEXT),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();Ro.NonRecordingSpan=w1});var Rd=l(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.getSpanContext=Ye.setSpanContext=Ye.deleteSpan=Ye.setSpan=Ye.getSpan=void 0;var N1=Pi(),L1=Oo(),Td=N1.createContextKey("OpenTelemetry Context Key SPAN");function XS(e){return e.getValue(Td)||void 0}Ye.getSpan=XS;function zS(e,t){return e.setValue(Td,t)}Ye.setSpan=zS;function x1(e){return e.deleteValue(Td)}Ye.deleteSpan=x1;function M1(e,t){return zS(e,new L1.NonRecordingSpan(t))}Ye.setSpanContext=M1;function D1(e){var t;return(t=XS(e))===null||t===void 0?void 0:t.spanContext()}Ye.getSpanContext=D1});var Co=l(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.wrapSpanContext=ht.isSpanContextValid=ht.isValidSpanId=ht.isValidTraceId=void 0;var QS=To(),B1=Oo(),U1=/^([0-9a-f]{32})$/i,F1=/^[0-9a-f]{16}$/i;function ZS(e){return U1.test(e)&&e!==QS.INVALID_TRACEID}ht.isValidTraceId=ZS;function JS(e){return F1.test(e)&&e!==QS.INVALID_SPANID}ht.isValidSpanId=JS;function j1(e){return ZS(e.traceId)&&JS(e.spanId)}ht.isSpanContextValid=j1;function k1(e){return new B1.NonRecordingSpan(e)}ht.wrapSpanContext=k1});var Cd=l(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.NoopTracer=void 0;var q1=vd(),ey=Rd(),Od=Oo(),G1=Co(),ty=q1.ContextAPI.getInstance(),H1=function(){function e(){}return e.prototype.startSpan=function(t,r,n){var i=Boolean(r?.root);if(i)return new Od.NonRecordingSpan;var s=n&&ey.getSpanContext(n);return $1(s)&&G1.isSpanContextValid(s)?new Od.NonRecordingSpan(s):new Od.NonRecordingSpan},e.prototype.startActiveSpan=function(t,r,n,i){var s,o,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);var u=o??ty.active(),c=this.startSpan(t,s,u),d=ey.setSpan(u,c);return ty.with(d,a,void 0,c)}},e}();Po.NoopTracer=H1;function $1(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}});var Pd=l(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.ProxyTracer=void 0;var V1=Cd(),Y1=new V1.NoopTracer,W1=function(){function e(t,r,n,i){this._provider=t,this.name=r,this.version=n,this.options=i}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Y1},e}();Io.ProxyTracer=W1});var ry=l(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.NoopTracerProvider=void 0;var K1=Cd(),X1=function(){function e(){}return e.prototype.getTracer=function(t,r,n){return new K1.NoopTracer},e}();wo.NoopTracerProvider=X1});var Id=l(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.ProxyTracerProvider=void 0;var z1=Pd(),Q1=ry(),Z1=new Q1.NoopTracerProvider,J1=function(){function e(){}return e.prototype.getTracer=function(t,r,n){var i;return(i=this.getDelegateTracer(t,r,n))!==null&&i!==void 0?i:new z1.ProxyTracer(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Z1},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,r,n)},e}();No.ProxyTracerProvider=J1});var iy=l(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0})});var sy=l(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.SamplingDecision=void 0;var eL;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(eL=wi.SamplingDecision||(wi.SamplingDecision={}))});var ay=l(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0})});var uy=l(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.SpanKind=void 0;var tL;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(tL=Ni.SpanKind||(Ni.SpanKind={}))});var ly=l(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0})});var fy=l(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0})});var py=l(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.SpanStatusCode=void 0;var rL;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(rL=Li.SpanStatusCode||(Li.SpanStatusCode={}))});var _y=l(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0})});var gy=l(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateValue=Tn.validateKey=void 0;var wd="[_0-9a-z-*/]",nL="[a-z]"+wd+"{0,255}",iL="[a-z0-9]"+wd+"{0,240}@[a-z]"+wd+"{0,13}",sL=new RegExp("^(?:"+nL+"|"+iL+")$"),oL=/^[ -~]{0,255}[!-~]$/,aL=/,|=/;function uL(e){return sL.test(e)}Tn.validateKey=uL;function cL(e){return oL.test(e)&&!aL.test(e)}Tn.validateValue=cL});var Ay=l(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.TraceStateImpl=void 0;var my=gy(),Ey=32,lL=512,Sy=",",yy="=",dL=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,r){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n},e.prototype.unset=function(t){var r=this._clone();return r._internalState.delete(t),r},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(r,n){return r.push(n+yy+t.get(n)),r},[]).join(Sy)},e.prototype._parse=function(t){t.length>lL||(this._internalState=t.split(Sy).reverse().reduce(function(r,n){var i=n.trim(),s=i.indexOf(yy);if(s!==-1){var o=i.slice(0,s),a=i.slice(s+1,n.length);my.validateKey(o)&&my.validateValue(a)&&r.set(o,a)}return r},new Map),this._internalState.size>Ey&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Ey))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();Lo.TraceStateImpl=dL});var vy=l(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.createTraceState=void 0;var fL=Ay();function pL(e){return new fL.TraceStateImpl(e)}xo.createTraceState=pL});var Ty=l(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0})});var Oy=l(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0})});var Py=l(Cy=>{"use strict";Object.defineProperty(Cy,"__esModule",{value:!0})});var wy=l(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0})});var My=l(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.TraceAPI=void 0;var Nd=mn(),Ny=Id(),Ly=Co(),xi=Rd(),xy=En(),Ld="trace",hL=function(){function e(){this._proxyTracerProvider=new Ny.ProxyTracerProvider,this.wrapSpanContext=Ly.wrapSpanContext,this.isSpanContextValid=Ly.isSpanContextValid,this.deleteSpan=xi.deleteSpan,this.getSpan=xi.getSpan,this.getSpanContext=xi.getSpanContext,this.setSpan=xi.setSpan,this.setSpanContext=xi.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=Nd.registerGlobal(Ld,this._proxyTracerProvider,xy.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Nd.getGlobal(Ld)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){Nd.unregisterGlobal(Ld,xy.DiagAPI.instance()),this._proxyTracerProvider=new Ny.ProxyTracerProvider},e}();Mo.TraceAPI=hL});var Dy=l(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.NoopTextMapPropagator=void 0;var _L=function(){function e(){}return e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}();Do.NoopTextMapPropagator=_L});var By=l(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.deleteBaggage=Xt.setBaggage=Xt.getBaggage=void 0;var gL=Pi(),xd=gL.createContextKey("OpenTelemetry Baggage Key");function mL(e){return e.getValue(xd)||void 0}Xt.getBaggage=mL;function EL(e,t){return e.setValue(xd,t)}Xt.setBaggage=EL;function SL(e){return e.deleteValue(xd)}Xt.deleteBaggage=SL});var jy=l(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.PropagationAPI=void 0;var Md=mn(),yL=Dy(),Uy=Sd(),Dd=By(),AL=md(),Fy=En(),Bd="propagation",vL=new yL.NoopTextMapPropagator,bL=function(){function e(){this.createBaggage=AL.createBaggage,this.getBaggage=Dd.getBaggage,this.setBaggage=Dd.setBaggage,this.deleteBaggage=Dd.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return Md.registerGlobal(Bd,t,Fy.DiagAPI.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=Uy.defaultTextMapSetter),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=Uy.defaultTextMapGetter),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Md.unregisterGlobal(Bd,Fy.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return Md.getGlobal(Bd)||vL},e}();Bo.PropagationAPI=bL});var D=l(I=>{"use strict";var TL=I&&I.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ne=I&&I.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&TL(t,e,r)};Object.defineProperty(I,"__esModule",{value:!0});I.diag=I.propagation=I.trace=I.context=I.INVALID_SPAN_CONTEXT=I.INVALID_TRACEID=I.INVALID_SPANID=I.isValidSpanId=I.isValidTraceId=I.isSpanContextValid=I.createTraceState=I.baggageEntryMetadataFromString=void 0;ne(bS(),I);var RL=md();Object.defineProperty(I,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return RL.baggageEntryMetadataFromString}});ne(DS(),I);ne(US(),I);ne(jS(),I);ne(GS(),I);ne(Sd(),I);ne($S(),I);ne(YS(),I);ne(Pd(),I);ne(Id(),I);ne(iy(),I);ne(sy(),I);ne(ay(),I);ne(uy(),I);ne(ly(),I);ne(fy(),I);ne(py(),I);ne(bd(),I);ne(_y(),I);var OL=vy();Object.defineProperty(I,"createTraceState",{enumerable:!0,get:function(){return OL.createTraceState}});ne(Ty(),I);ne(Oy(),I);ne(Py(),I);var Ud=Co();Object.defineProperty(I,"isSpanContextValid",{enumerable:!0,get:function(){return Ud.isSpanContextValid}});Object.defineProperty(I,"isValidTraceId",{enumerable:!0,get:function(){return Ud.isValidTraceId}});Object.defineProperty(I,"isValidSpanId",{enumerable:!0,get:function(){return Ud.isValidSpanId}});var Fd=To();Object.defineProperty(I,"INVALID_SPANID",{enumerable:!0,get:function(){return Fd.INVALID_SPANID}});Object.defineProperty(I,"INVALID_TRACEID",{enumerable:!0,get:function(){return Fd.INVALID_TRACEID}});Object.defineProperty(I,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return Fd.INVALID_SPAN_CONTEXT}});ne(Pi(),I);ne(wy(),I);var CL=vd();I.context=CL.ContextAPI.getInstance();var PL=My();I.trace=PL.TraceAPI.getInstance();var IL=jy();I.propagation=IL.PropagationAPI.getInstance();var wL=En();I.diag=wL.DiagAPI.instance();I.default={trace:I.trace,context:I.context,propagation:I.propagation,diag:I.diag}});var Uo=l(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.isTracingSuppressed=zt.unsuppressTracing=zt.suppressTracing=void 0;var NL=D(),jd=(0,NL.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function LL(e){return e.setValue(jd,!0)}zt.suppressTracing=LL;function xL(e){return e.deleteValue(jd)}zt.unsuppressTracing=xL;function ML(e){return e.getValue(jd)===!0}zt.isTracingSuppressed=ML});var ky=l(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.validateValue=Rn.validateKey=void 0;var kd="[_0-9a-z-*/]",DL=`[a-z]${kd}{0,255}`,BL=`[a-z0-9]${kd}{0,240}@[a-z]${kd}{0,13}`,UL=new RegExp(`^(?:${DL}|${BL})$`),FL=/^[ -~]{0,255}[!-~]$/,jL=/,|=/;function kL(e){return UL.test(e)}Rn.validateKey=kL;function qL(e){return FL.test(e)&&!jL.test(e)}Rn.validateValue=qL});var qd=l(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.TraceState=void 0;var qy=ky(),Gy=32,GL=512,Hy=",",$y="=",Mi=class{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+$y+this.get(r)),t),[]).join(Hy)}_parse(t){t.length>GL||(this._internalState=t.split(Hy).reverse().reduce((r,n)=>{let i=n.trim(),s=i.indexOf($y);if(s!==-1){let o=i.slice(0,s),a=i.slice(s+1,n.length);(0,qy.validateKey)(o)&&(0,qy.validateValue)(a)&&r.set(o,a)}return r},new Map),this._internalState.size>Gy&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Gy))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new Mi;return t._internalState=new Map(this._internalState),t}};Fo.TraceState=Mi});var Hd=l(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.W3CTraceContextPropagator=ve.parseTraceParent=ve.TRACE_STATE_HEADER=ve.TRACE_PARENT_HEADER=void 0;var jo=D(),HL=Uo(),$L=qd();ve.TRACE_PARENT_HEADER="traceparent";ve.TRACE_STATE_HEADER="tracestate";var VL="00",YL="(?!ff)[\\da-f]{2}",WL="(?![0]{32})[\\da-f]{32}",KL="(?![0]{16})[\\da-f]{16}",XL="[\\da-f]{2}",zL=new RegExp(`^\\s?(${YL})-(${WL})-(${KL})-(${XL})(-.*)?\\s?$`);function Vy(e){let t=zL.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}ve.parseTraceParent=Vy;var Gd=class{inject(t,r,n){let i=jo.trace.getSpanContext(t);if(!i||(0,HL.isTracingSuppressed)(t)||!(0,jo.isSpanContextValid)(i))return;let s=`${VL}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||jo.TraceFlags.NONE).toString(16)}`;n.set(r,ve.TRACE_PARENT_HEADER,s),i.traceState&&n.set(r,ve.TRACE_STATE_HEADER,i.traceState.serialize())}extract(t,r,n){let i=n.get(r,ve.TRACE_PARENT_HEADER);if(!i)return t;let s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return t;let o=Vy(s);if(!o)return t;o.isRemote=!0;let a=n.get(r,ve.TRACE_STATE_HEADER);if(a){let u=Array.isArray(a)?a.join(","):a;o.traceState=new $L.TraceState(typeof u=="string"?u:void 0)}return jo.trace.setSpanContext(t,o)}fields(){return[ve.TRACE_PARENT_HEADER,ve.TRACE_STATE_HEADER]}};ve.W3CTraceContextPropagator=Gd});var $d=l(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.BAGGAGE_MAX_TOTAL_LENGTH=be.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=be.BAGGAGE_MAX_NAME_VALUE_PAIRS=be.BAGGAGE_HEADER=be.BAGGAGE_ITEMS_SEPARATOR=be.BAGGAGE_PROPERTIES_SEPARATOR=be.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;be.BAGGAGE_KEY_PAIR_SEPARATOR="=";be.BAGGAGE_PROPERTIES_SEPARATOR=";";be.BAGGAGE_ITEMS_SEPARATOR=",";be.BAGGAGE_HEADER="baggage";be.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;be.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;be.BAGGAGE_MAX_TOTAL_LENGTH=8192});var Vd=l(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.parseKeyPairsIntoRecord=_t.parsePairKeyValue=_t.getKeyPairs=_t.serializeKeyPairs=void 0;var QL=D(),Sr=$d();function ZL(e){return e.reduce((t,r)=>{let n=`${t}${t!==""?Sr.BAGGAGE_ITEMS_SEPARATOR:""}${r}`;return n.length>Sr.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"")}_t.serializeKeyPairs=ZL;function JL(e){return e.getAllEntries().map(([t,r])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=Sr.BAGGAGE_PROPERTIES_SEPARATOR+r.metadata.toString()),n})}_t.getKeyPairs=JL;function Yy(e){let t=e.split(Sr.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;let r=t.shift();if(!r)return;let n=r.split(Sr.BAGGAGE_KEY_PAIR_SEPARATOR);if(n.length!==2)return;let i=decodeURIComponent(n[0].trim()),s=decodeURIComponent(n[1].trim()),o;return t.length>0&&(o=(0,QL.baggageEntryMetadataFromString)(t.join(Sr.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:s,metadata:o}}_t.parsePairKeyValue=Yy;function ex(e){return typeof e!="string"||e.length===0?{}:e.split(Sr.BAGGAGE_ITEMS_SEPARATOR).map(t=>Yy(t)).filter(t=>t!==void 0&&t.value.length>0).reduce((t,r)=>(t[r.key]=r.value,t),{})}_t.parseKeyPairsIntoRecord=ex});var Wy=l(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.W3CBaggagePropagator=void 0;var Yd=D(),tx=Uo(),yr=$d(),Wd=Vd(),Kd=class{inject(t,r,n){let i=Yd.propagation.getBaggage(t);if(!i||(0,tx.isTracingSuppressed)(t))return;let s=(0,Wd.getKeyPairs)(i).filter(a=>a.length<=yr.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,yr.BAGGAGE_MAX_NAME_VALUE_PAIRS),o=(0,Wd.serializeKeyPairs)(s);o.length>0&&n.set(r,yr.BAGGAGE_HEADER,o)}extract(t,r,n){let i=n.get(r,yr.BAGGAGE_HEADER),s=Array.isArray(i)?i.join(yr.BAGGAGE_ITEMS_SEPARATOR):i;if(!s)return t;let o={};return s.length===0||(s.split(yr.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let c=(0,Wd.parsePairKeyValue)(u);if(c){let d={value:c.value};c.metadata&&(d.metadata=c.metadata),o[c.key]=d}}),Object.entries(o).length===0)?t:Yd.propagation.setBaggage(t,Yd.propagation.createBaggage(o))}fields(){return[yr.BAGGAGE_HEADER]}};ko.W3CBaggagePropagator=Kd});var Zy=l(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAttributeValue=Qt.isAttributeKey=Qt.sanitizeAttributes=void 0;var Ky=D();function rx(e){let t={};if(typeof e!="object"||e==null)return t;for(let[r,n]of Object.entries(e)){if(!Xy(r)){Ky.diag.warn(`Invalid attribute key: ${r}`);continue}if(!zy(n)){Ky.diag.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?t[r]=n.slice():t[r]=n}return t}Qt.sanitizeAttributes=rx;function Xy(e){return typeof e=="string"&&e.length>0}Qt.isAttributeKey=Xy;function zy(e){return e==null?!0:Array.isArray(e)?nx(e):Qy(e)}Qt.isAttributeValue=zy;function nx(e){let t;for(let r of e)if(r!=null){if(!t){if(Qy(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}function Qy(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}});var Xd=l(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.loggingErrorHandler=void 0;var ix=D();function sx(){return e=>{ix.diag.error(ox(e))}}qo.loggingErrorHandler=sx;function ox(e){return typeof e=="string"?e:JSON.stringify(ax(e))}function ax(e){let t={},r=e;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(t[n])return;let i=r[n];i&&(t[n]=String(i))}),r=Object.getPrototypeOf(r);return t}});var zd=l(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.globalErrorHandler=On.setGlobalErrorHandler=void 0;var ux=Xd(),Jy=(0,ux.loggingErrorHandler)();function cx(e){Jy=e}On.setGlobalErrorHandler=cx;function lx(e){try{Jy(e)}catch{}}On.globalErrorHandler=lx});var Qd=l(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.TracesSamplerValues=void 0;var dx;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(dx=Di.TracesSamplerValues||(Di.TracesSamplerValues={}))});var Zd=l(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.parseEnvironment=Ie.DEFAULT_ENVIRONMENT=Ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT=Ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;var Zt=D(),fx=Qd(),px=",",hx=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function _x(e){return hx.indexOf(e)>-1}var gx=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function mx(e){return gx.indexOf(e)>-1}Ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0;Ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;Ie.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Zt.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:Ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Ie.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Ie.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:fx.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:""};function Ex(e,t,r,n=-1/0,i=1/0){if(typeof r[e]<"u"){let s=Number(r[e]);isNaN(s)||(s<n?t[e]=n:s>i?t[e]=i:t[e]=s)}}function Sx(e,t,r,n=px){let i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(s=>s.trim()))}var yx={ALL:Zt.DiagLogLevel.ALL,VERBOSE:Zt.DiagLogLevel.VERBOSE,DEBUG:Zt.DiagLogLevel.DEBUG,INFO:Zt.DiagLogLevel.INFO,WARN:Zt.DiagLogLevel.WARN,ERROR:Zt.DiagLogLevel.ERROR,NONE:Zt.DiagLogLevel.NONE};function Ax(e,t,r){let n=r[e];if(typeof n=="string"){let i=yx[n.toUpperCase()];i!=null&&(t[e]=i)}}function vx(e){let t={};for(let r in Ie.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":Ax(n,t,e);break;default:if(_x(n))Ex(n,t,e);else if(mx(n))Sx(n,t,e);else{let i=e[n];typeof i<"u"&&i!==null&&(t[n]=String(i))}}}return t}Ie.parseEnvironment=vx});var tA=l(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.getEnv=void 0;var bx=O("os"),eA=Zd();function Tx(){let e=(0,eA.parseEnvironment)(process.env);return Object.assign({HOSTNAME:bx.hostname()},eA.DEFAULT_ENVIRONMENT,e)}Go.getEnv=Tx});var rA=l(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho._globalThis=void 0;Ho._globalThis=typeof globalThis=="object"?globalThis:global});var nA=l($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.hexToBase64=void 0;function Rx(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let i=e.substring(n,n+2),s=parseInt(i,16);r+=String.fromCharCode(s)}return Buffer.from(r,"ascii").toString("base64")}$o.hexToBase64=Rx});var oA=l(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.RandomIdGenerator=void 0;var Ox=8,sA=16,Jd=class{constructor(){this.generateTraceId=iA(sA),this.generateSpanId=iA(Ox)}};Yo.RandomIdGenerator=Jd;var Vo=Buffer.allocUnsafe(sA);function iA(e){return function(){for(let r=0;r<e/4;r++)Vo.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(Vo[r]>0);r++)r===e-1&&(Vo[e-1]=1);return Vo.toString("hex",0,e)}}});var aA=l(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.otperformance=void 0;var Cx=O("perf_hooks");Wo.otperformance=Cx.performance});var Xo=l(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.VERSION=void 0;Ko.VERSION="1.3.1"});var uA=l(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.MessageTypeValues=X.RpcGrpcStatusCodeValues=X.MessagingOperationValues=X.MessagingDestinationKindValues=X.HttpFlavorValues=X.NetHostConnectionSubtypeValues=X.NetHostConnectionTypeValues=X.NetTransportValues=X.FaasInvokedProviderValues=X.FaasDocumentOperationValues=X.FaasTriggerValues=X.DbCassandraConsistencyLevelValues=X.DbSystemValues=X.SemanticAttributes=void 0;X.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"};X.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"};X.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"};X.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"};X.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"};X.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};X.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"};X.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"};X.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"};X.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"};X.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"};X.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"};X.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16};X.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}});var cA=l(Ar=>{"use strict";var Px=Ar&&Ar.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ix=Ar&&Ar.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Px(t,e,r)};Object.defineProperty(Ar,"__esModule",{value:!0});Ix(uA(),Ar)});var lA=l(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.TelemetrySdkLanguageValues=Te.OsTypeValues=Te.HostArchValues=Te.AwsEcsLaunchtypeValues=Te.CloudPlatformValues=Te.CloudProviderValues=Te.SemanticResourceAttributes=void 0;Te.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};Te.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};Te.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"};Te.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"};Te.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"};Te.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"};Te.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var dA=l(vr=>{"use strict";var wx=vr&&vr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Nx=vr&&vr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wx(t,e,r)};Object.defineProperty(vr,"__esModule",{value:!0});Nx(lA(),vr)});var gt=l(Jt=>{"use strict";var Lx=Jt&&Jt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),fA=Jt&&Jt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Lx(t,e,r)};Object.defineProperty(Jt,"__esModule",{value:!0});fA(cA(),Jt);fA(dA(),Jt)});var pA=l(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.SDK_INFO=void 0;var xx=Xo(),Bi=gt();zo.SDK_INFO={[Bi.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[Bi.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[Bi.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Bi.TelemetrySdkLanguageValues.NODEJS,[Bi.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:xx.VERSION}});var hA=l(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.unrefTimer=void 0;function Mx(e){e.unref()}Qo.unrefTimer=Mx});var _A=l(Ge=>{"use strict";var Dx=Ge&&Ge.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),br=Ge&&Ge.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Dx(t,e,r)};Object.defineProperty(Ge,"__esModule",{value:!0});br(tA(),Ge);br(rA(),Ge);br(nA(),Ge);br(oA(),Ge);br(aA(),Ge);br(pA(),Ge);br(hA(),Ge)});var ef=l(Tr=>{"use strict";var Bx=Tr&&Tr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ux=Tr&&Tr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Bx(t,e,r)};Object.defineProperty(Tr,"__esModule",{value:!0});Ux(_A(),Tr)});var EA=l(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.isTimeInput=ce.isTimeInputHrTime=ce.hrTimeToMicroseconds=ce.hrTimeToMilliseconds=ce.hrTimeToNanoseconds=ce.hrTimeToTimeStamp=ce.hrTimeDuration=ce.timeInputToHrTime=ce.hrTime=void 0;var tf=ef(),rf=9,Ui=Math.pow(10,rf);function Zo(e){let t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(rf))*Ui;return[r,n]}function gA(){let e=tf.otperformance.timeOrigin;if(typeof e!="number"){let t=tf.otperformance;e=t.timing&&t.timing.fetchStart}return e}function mA(e){let t=Zo(gA()),r=Zo(typeof e=="number"?e:tf.otperformance.now()),n=t[0]+r[0],i=t[1]+r[1];return i>Ui&&(i-=Ui,n+=1),[n,i]}ce.hrTime=mA;function Fx(e){if(nf(e))return e;if(typeof e=="number")return e<gA()?mA(e):Zo(e);if(e instanceof Date)return Zo(e.getTime());throw TypeError("Invalid input type")}ce.timeInputToHrTime=Fx;function jx(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Ui),[r,n]}ce.hrTimeDuration=jx;function kx(e){let t=rf,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n)}ce.hrTimeToTimeStamp=kx;function qx(e){return e[0]*Ui+e[1]}ce.hrTimeToNanoseconds=qx;function Gx(e){return Math.round(e[0]*1e3+e[1]/1e6)}ce.hrTimeToMilliseconds=Gx;function Hx(e){return Math.round(e[0]*1e6+e[1]/1e3)}ce.hrTimeToMicroseconds=Hx;function nf(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}ce.isTimeInputHrTime=nf;function $x(e){return nf(e)||typeof e=="number"||e instanceof Date}ce.isTimeInput=$x});var yA=l(SA=>{"use strict";Object.defineProperty(SA,"__esModule",{value:!0})});var AA=l(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.ExportResultCode=void 0;var Vx;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(Vx=Fi.ExportResultCode||(Fi.ExportResultCode={}))});var bA=l(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.CompositePropagator=void 0;var vA=D(),sf=class{constructor(t={}){var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(t,r,n){for(let i of this._propagators)try{i.inject(t,r,n)}catch(s){vA.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${s.message}`)}}extract(t,r,n){return this._propagators.reduce((i,s)=>{try{return s.extract(i,r,n)}catch(o){vA.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${o.message}`)}return i},t)}fields(){return this._fields.slice()}};Jo.CompositePropagator=sf});var RA=l(TA=>{"use strict";Object.defineProperty(TA,"__esModule",{value:!0})});var OA=l(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.getRPCMetadata=Je.deleteRPCMetadata=Je.setRPCMetadata=Je.RPCType=void 0;var Yx=D(),of=(0,Yx.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA"),Wx;(function(e){e.HTTP="http"})(Wx=Je.RPCType||(Je.RPCType={}));function Kx(e,t){return e.setValue(of,t)}Je.setRPCMetadata=Kx;function Xx(e){return e.deleteValue(of)}Je.deleteRPCMetadata=Xx;function zx(e){return e.getValue(of)}Je.getRPCMetadata=zx});var uf=l(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.AlwaysOffSampler=void 0;var Qx=D(),af=class{shouldSample(){return{decision:Qx.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};ea.AlwaysOffSampler=af});var lf=l(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.AlwaysOnSampler=void 0;var Zx=D(),cf=class{shouldSample(){return{decision:Zx.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};ta.AlwaysOnSampler=cf});var PA=l(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.ParentBasedSampler=void 0;var ra=D(),Jx=zd(),CA=uf(),df=lf(),ff=class{constructor(t){var r,n,i,s;this._root=t.root,this._root||((0,Jx.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new df.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new df.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new CA.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new df.AlwaysOnSampler,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new CA.AlwaysOffSampler}shouldSample(t,r,n,i,s,o){let a=ra.trace.getSpanContext(t);return!a||!(0,ra.isSpanContextValid)(a)?this._root.shouldSample(t,r,n,i,s,o):a.isRemote?a.traceFlags&ra.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,s,o):this._remoteParentNotSampled.shouldSample(t,r,n,i,s,o):a.traceFlags&ra.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,s,o):this._localParentNotSampled.shouldSample(t,r,n,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};na.ParentBasedSampler=ff});var IA=l(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.TraceIdRatioBasedSampler=void 0;var pf=D(),hf=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:(0,pf.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?pf.SamplingDecision.RECORD_AND_SAMPLED:pf.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,s=parseInt(t.slice(i,i+8),16);r=(r^s)>>>0}return r}};ia.TraceIdRatioBasedSampler=hf});var MA=l(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.isPlainObject=void 0;var eM="[object Object]",tM="[object Null]",rM="[object Undefined]",nM=Function.prototype,wA=nM.toString,iM=wA.call(Object),sM=oM(Object.getPrototypeOf,Object),NA=Object.prototype,LA=NA.hasOwnProperty,Rr=Symbol?Symbol.toStringTag:void 0,xA=NA.toString;function oM(e,t){return function(r){return e(t(r))}}function aM(e){if(!uM(e)||cM(e)!==eM)return!1;let t=sM(e);if(t===null)return!0;let r=LA.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&wA.call(r)===iM}sa.isPlainObject=aM;function uM(e){return e!=null&&typeof e=="object"}function cM(e){return e==null?e===void 0?rM:tM:Rr&&Rr in Object(e)?lM(e):dM(e)}function lM(e){let t=LA.call(e,Rr),r=e[Rr],n=!1;try{e[Rr]=void 0,n=!0}catch{}let i=xA.call(e);return n&&(t?e[Rr]=r:delete e[Rr]),i}function dM(e){return xA.call(e)}});var jA=l(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.merge=void 0;var DA=MA(),fM=20;function pM(...e){let t=e.shift(),r=new WeakMap;for(;e.length>0;)t=UA(t,e.shift(),0,r);return t}ua.merge=pM;function _f(e){return aa(e)?e.slice():e}function UA(e,t,r=0,n){let i;if(!(r>fM)){if(r++,oa(e)||oa(t)||FA(t))i=_f(t);else if(aa(e)){if(i=e.slice(),aa(t))for(let s=0,o=t.length;s<o;s++)i.push(_f(t[s]));else if(ji(t)){let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o];i[u]=_f(t[u])}}}else if(ji(e))if(ji(t)){if(!hM(e,t))return t;i=Object.assign({},e);let s=Object.keys(t);for(let o=0,a=s.length;o<a;o++){let u=s[o],c=t[u];if(oa(c))typeof c>"u"?delete i[u]:i[u]=c;else{let d=i[u],f=c;if(BA(e,u,n)||BA(t,u,n))delete i[u];else{if(ji(d)&&ji(f)){let p=n.get(d)||[],h=n.get(f)||[];p.push({obj:e,key:u}),h.push({obj:t,key:u}),n.set(d,p),n.set(f,h)}i[u]=UA(i[u],c,r,n)}}}}else i=t;return i}}function BA(e,t,r){let n=r.get(e[t])||[];for(let i=0,s=n.length;i<s;i++){let o=n[i];if(o.key===t&&o.obj===e)return!0}return!1}function aa(e){return Array.isArray(e)}function FA(e){return typeof e=="function"}function ji(e){return!oa(e)&&!aa(e)&&!FA(e)&&typeof e=="object"}function oa(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function hM(e,t){return!(!(0,DA.isPlainObject)(e)||!(0,DA.isPlainObject)(t))}});var qA=l(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.isUrlIgnored=Cn.urlMatches=void 0;function kA(e,t){return typeof t=="string"?e===t:!!e.match(t)}Cn.urlMatches=kA;function _M(e,t){if(!t)return!1;for(let r of t)if(kA(e,r))return!0;return!1}Cn.isUrlIgnored=_M});var GA=l(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.isWrapped=void 0;function gM(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}ca.isWrapped=gM});var HA=l(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.Deferred=void 0;var gf=class{constructor(){this._promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}};la.Deferred=gf});var $A=l(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.BindOnceFuture=void 0;var mM=HA(),mf=class{constructor(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new mM.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}};da.BindOnceFuture=mf});var J=l(Y=>{"use strict";var EM=Y&&Y.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Z=Y&&Y.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&EM(t,e,r)};Object.defineProperty(Y,"__esModule",{value:!0});Y.baggageUtils=void 0;Z(Wy(),Y);Z(Zy(),Y);Z(zd(),Y);Z(Xd(),Y);Z(EA(),Y);Z(yA(),Y);Z(AA(),Y);Z(Xo(),Y);Y.baggageUtils=Vd();Z(ef(),Y);Z(bA(),Y);Z(Hd(),Y);Z(RA(),Y);Z(OA(),Y);Z(uf(),Y);Z(lf(),Y);Z(PA(),Y);Z(IA(),Y);Z(Uo(),Y);Z(qd(),Y);Z(Zd(),Y);Z(jA(),Y);Z(Qd(),Y);Z(qA(),Y);Z(GA(),Y);Z($A(),Y);Z(Xo(),Y)});var VA=l(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.ExceptionEventName=void 0;fa.ExceptionEventName="exception"});var Sf=l(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.Span=void 0;var mt=D(),et=J(),Or=gt(),SM=VA(),Ef=class{constructor(t,r,n,i,s,o,a=[],u=(0,et.hrTime)()){this.attributes={},this.links=[],this.events=[],this.status={code:mt.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=s,this.links=a,this.startTime=(0,et.timeInputToHrTime)(u),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}spanContext(){return this._spanContext}setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(mt.diag.warn(`Invalid attribute key: ${t}`),this):(0,et.isAttributeValue)(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=this._truncateToSize(r),this):(mt.diag.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(let[r,n]of Object.entries(t))this.setAttribute(r,n);return this}addEvent(t,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return mt.diag.warn("No events allowed."),this;this.events.length>=this._spanLimits.eventCountLimit&&(mt.diag.warn("Dropping extra events."),this.events.shift()),(0,et.isTimeInput)(r)&&(typeof n>"u"&&(n=r),r=void 0),typeof n>"u"&&(n=(0,et.hrTime)());let i=(0,et.sanitizeAttributes)(r);return this.events.push({name:t,attributes:i,time:(0,et.timeInputToHrTime)(n)}),this}setStatus(t){return this._isSpanEnded()?this:(this.status=t,this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t=(0,et.hrTime)()){if(this._isSpanEnded()){mt.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=(0,et.timeInputToHrTime)(t),this._duration=(0,et.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&mt.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(t,r=(0,et.hrTime)()){let n={};typeof t=="string"?n[Or.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[Or.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[Or.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[Or.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[Or.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[Or.SemanticAttributes.EXCEPTION_TYPE]||n[Or.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(SM.ExceptionEventName,n,r):mt.diag.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&mt.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),this._ended}_truncateToLimitUtil(t,r){return t.length<=r?t:t.substr(0,r)}_truncateToSize(t){let r=this._attributeValueLengthLimit;return r<=0?(mt.diag.warn(`Attribute value limit must be positive, got ${r}`),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):t}};pa.Span=Ef});var yf=l(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.buildSamplerFromEnv=In.DEFAULT_CONFIG=void 0;var ha=D(),te=J(),yM=(0,te.getEnv)(),AM=te.TracesSamplerValues.AlwaysOn,Pn=1;In.DEFAULT_CONFIG={sampler:WA(yM),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,te.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,te.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,te.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,te.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,te.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,te.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT}};function WA(e=(0,te.getEnv)()){switch(e.OTEL_TRACES_SAMPLER){case te.TracesSamplerValues.AlwaysOn:return new te.AlwaysOnSampler;case te.TracesSamplerValues.AlwaysOff:return new te.AlwaysOffSampler;case te.TracesSamplerValues.ParentBasedAlwaysOn:return new te.ParentBasedSampler({root:new te.AlwaysOnSampler});case te.TracesSamplerValues.ParentBasedAlwaysOff:return new te.ParentBasedSampler({root:new te.AlwaysOffSampler});case te.TracesSamplerValues.TraceIdRatio:return new te.TraceIdRatioBasedSampler(YA(e));case te.TracesSamplerValues.ParentBasedTraceIdRatio:return new te.ParentBasedSampler({root:new te.TraceIdRatioBasedSampler(YA(e))});default:return ha.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${AM}".`),new te.AlwaysOnSampler}}In.buildSamplerFromEnv=WA;function YA(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return ha.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${Pn}.`),Pn;let t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(ha.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${Pn}.`),Pn):t<0||t>1?(ha.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${Pn}.`),Pn):t}});var Af=l(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.reconfigureLimits=wn.mergeConfig=void 0;var _a=yf();function vM(e){let t={sampler:(0,_a.buildSamplerFromEnv)()},r=Object.assign({},_a.DEFAULT_CONFIG,t,e);return r.generalLimits=Object.assign({},_a.DEFAULT_CONFIG.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},_a.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r}wn.mergeConfig=vM;function bM(e){var t,r;let n=Object.assign({},e.spanLimits);return n.attributeCountLimit==null&&((t=e.generalLimits)===null||t===void 0?void 0:t.attributeCountLimit)!=null&&(n.attributeCountLimit=e.generalLimits.attributeCountLimit),n.attributeValueLengthLimit==null&&((r=e.generalLimits)===null||r===void 0?void 0:r.attributeValueLengthLimit)!=null&&(n.attributeValueLengthLimit=e.generalLimits.attributeValueLengthLimit),Object.assign({},e,{spanLimits:n})}wn.reconfigureLimits=bM});var KA=l(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.Tracer=void 0;var ge=D(),ki=J(),TM=Sf(),RM=Af(),vf=class{constructor(t,r,n){this._tracerProvider=n;let i=(0,RM.mergeConfig)(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new ki.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=t}startSpan(t,r={},n=ge.context.active()){var i,s;if((0,ki.isTracingSuppressed)(n))return ge.diag.debug("Instrumentation suppressed, returning Noop Span"),ge.trace.wrapSpanContext(ge.INVALID_SPAN_CONTEXT);r.root&&(n=ge.trace.deleteSpan(n));let o=ge.trace.getSpanContext(n),a=this._idGenerator.generateSpanId(),u,c,d;!o||!ge.trace.isSpanContextValid(o)?u=this._idGenerator.generateTraceId():(u=o.traceId,c=o.traceState,d=o.spanId);let f=(i=r.kind)!==null&&i!==void 0?i:ge.SpanKind.INTERNAL,p=((s=r.links)!==null&&s!==void 0?s:[]).map(b=>({context:b.context,attributes:(0,ki.sanitizeAttributes)(b.attributes)})),h=(0,ki.sanitizeAttributes)(r.attributes),g=this._sampler.shouldSample(n,u,t,f,h,p),_=g.decision===ge.SamplingDecision.RECORD_AND_SAMPLED?ge.TraceFlags.SAMPLED:ge.TraceFlags.NONE,v={traceId:u,spanId:a,traceFlags:_,traceState:c};if(g.decision===ge.SamplingDecision.NOT_RECORD)return ge.diag.debug("Recording is off, propagating context in a non-recording span"),ge.trace.wrapSpanContext(v);let A=new TM.Span(this,n,t,v,f,d,p,r.startTime),y=(0,ki.sanitizeAttributes)(Object.assign(h,g.attributes));return A.setAttributes(y),A}startActiveSpan(t,r,n,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,o=n,a=i);let u=o??ge.context.active(),c=this.startSpan(t,s,u),d=ge.trace.setSpan(u,c);return ge.context.with(d,a,void 0,c)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};ga.Tracer=vf});var XA=l(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.defaultServiceName=void 0;function OM(){return`unknown_service:${process.argv0}`}ma.defaultServiceName=OM});var QA=l(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.detectResources=void 0;var zA=Cr(),bf=D(),CM=O("util"),PM=async(e={})=>{let t=Object.assign(e),r=await Promise.all((t.detectors||[]).map(async n=>{try{let i=await n.detect(t);return bf.diag.debug(`${n.constructor.name} found resource.`,i),i}catch(i){return bf.diag.debug(`${n.constructor.name} failed: ${i.message}`),zA.Resource.empty()}}));return IM(r),r.reduce((n,i)=>n.merge(i),zA.Resource.empty())};Ea.detectResources=PM;var IM=e=>{e.forEach(t=>{if(Object.keys(t.attributes).length>0){let r=CM.inspect(t.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});bf.diag.verbose(r)}})}});var e0=l(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.hostDetector=void 0;var ZA=gt(),wM=Cr(),JA=O("os"),Tf=class{async detect(t){let r={[ZA.SemanticResourceAttributes.HOST_NAME]:(0,JA.hostname)(),[ZA.SemanticResourceAttributes.HOST_ARCH]:this._normalizeArch((0,JA.arch)())};return new wM.Resource(r)}_normalizeArch(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}}};Sa.hostDetector=new Tf});var n0=l(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.osDetector=void 0;var t0=gt(),NM=Cr(),r0=O("os"),Rf=class{async detect(t){let r={[t0.SemanticResourceAttributes.OS_TYPE]:this._normalizeType((0,r0.platform)()),[t0.SemanticResourceAttributes.OS_VERSION]:(0,r0.release)()};return new NM.Resource(r)}_normalizeType(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}};ya.osDetector=new Rf});var i0=l(Et=>{"use strict";var LM=Et&&Et.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Aa=Et&&Et.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&LM(t,e,r)};Object.defineProperty(Et,"__esModule",{value:!0});Aa(XA(),Et);Aa(QA(),Et);Aa(e0(),Et);Aa(n0(),Et)});var Of=l(Pr=>{"use strict";var xM=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),MM=Pr&&Pr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&xM(t,e,r)};Object.defineProperty(Pr,"__esModule",{value:!0});MM(i0(),Pr)});var Cr=l(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.Resource=void 0;var Ir=gt(),Cf=J(),DM=Of(),Nt=class{constructor(t){this.attributes=t}static empty(){return Nt.EMPTY}static default(){return new Nt({[Ir.SemanticResourceAttributes.SERVICE_NAME]:(0,DM.defaultServiceName)(),[Ir.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Cf.SDK_INFO[Ir.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],[Ir.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:Cf.SDK_INFO[Ir.SemanticResourceAttributes.TELEMETRY_SDK_NAME],[Ir.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:Cf.SDK_INFO[Ir.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(t){if(!t||!Object.keys(t.attributes).length)return this;let r=Object.assign({},this.attributes,t.attributes);return new Nt(r)}};va.Resource=Nt;Nt.EMPTY=new Nt({})});var o0=l(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0})});var u0=l(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0})});var c0=l(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.browserDetector=void 0;var BM=D(),ba=gt(),Pf=qi(),If=class{async detect(t){if(!(typeof navigator<"u"))return Pf.Resource.empty();let n={[ba.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[ba.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Web Browser",[ba.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:navigator.userAgent};return this._getResourceAttributes(n,t)}_getResourceAttributes(t,r){return t[ba.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]===""?(BM.diag.debug("BrowserDetector failed: Unable to find required browser resources. "),Pf.Resource.empty()):new Pf.Resource(Object.assign({},t))}};Ta.browserDetector=new If});var l0=l(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.envDetector=void 0;var UM=D(),FM=J(),jM=gt(),kM=Cr(),wf=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(t){let r={},n=(0,FM.getEnv)(),i=n.OTEL_RESOURCE_ATTRIBUTES,s=n.OTEL_SERVICE_NAME;if(i)try{let o=this._parseResourceAttributes(i);Object.assign(r,o)}catch(o){UM.diag.debug(`EnvDetector failed: ${o.message}`)}return s&&(r[jM.SemanticResourceAttributes.SERVICE_NAME]=s),new kM.Resource(r)}_parseResourceAttributes(t){if(!t)return{};let r={},n=t.split(this._COMMA_SEPARATOR,-1);for(let i of n){let s=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(s.length!==2)continue;let[o,a]=s;if(o=o.trim(),a=a.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(o))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(a))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[o]=a}return r}_isValid(t){return t.length<=this._MAX_LENGTH&&this._isPrintableString(t)}_isPrintableString(t){for(let r=0;r<t.length;r++){let n=t.charAt(r);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(t){return t.length>0&&this._isValid(t)}};Ra.envDetector=new wf});var d0=l(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.processDetector=void 0;var qM=D(),We=gt(),Nf=Cr(),Lf=class{async detect(t){if(typeof process!="object")return Nf.Resource.empty();let r={[We.SemanticResourceAttributes.PROCESS_PID]:process.pid,[We.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[We.SemanticResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[We.SemanticResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||"",[We.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:process.versions.node,[We.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"nodejs",[We.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Node.js"};return this._getResourceAttributes(r,t)}_getResourceAttributes(t,r){return t[We.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||t[We.SemanticResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||t[We.SemanticResourceAttributes.PROCESS_COMMAND]===""||t[We.SemanticResourceAttributes.PROCESS_COMMAND_LINE]===""||t[We.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]===""?(qM.diag.debug("ProcessDetector failed: Unable to find required process resources. "),Nf.Resource.empty()):new Nf.Resource(Object.assign({},t))}};Oa.processDetector=new Lf});var f0=l(Lt=>{"use strict";var GM=Lt&&Lt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xf=Lt&&Lt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&GM(t,e,r)};Object.defineProperty(Lt,"__esModule",{value:!0});xf(c0(),Lt);xf(l0(),Lt);xf(d0(),Lt)});var qi=l(tt=>{"use strict";var HM=tt&&tt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Gi=tt&&tt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&HM(t,e,r)};Object.defineProperty(tt,"__esModule",{value:!0});Gi(Cr(),tt);Gi(Of(),tt);Gi(o0(),tt);Gi(u0(),tt);Gi(f0(),tt)});var p0=l(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.MultiSpanProcessor=void 0;var $M=J(),Mf=class{constructor(t){this._spanProcessors=t}forceFlush(){let t=[];for(let r of this._spanProcessors)t.push(r.forceFlush());return new Promise(r=>{Promise.all(t).then(()=>{r()}).catch(n=>{(0,$M.globalErrorHandler)(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(t,r){for(let n of this._spanProcessors)n.onStart(t,r)}onEnd(t){for(let r of this._spanProcessors)r.onEnd(t)}shutdown(){let t=[];for(let r of this._spanProcessors)t.push(r.shutdown());return new Promise((r,n)=>{Promise.all(t).then(()=>{r()},n)})}};Ca.MultiSpanProcessor=Mf});var Bf=l(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.NoopSpanProcessor=void 0;var Df=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};Pa.NoopSpanProcessor=Df});var h0=l(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.BatchSpanProcessorBase=void 0;var Uf=D(),Nn=J(),Ff=class{constructor(t,r){this._exporter=t,this._finishedSpans=[];let n=(0,Nn.getEnv)();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Nn.BindOnceFuture(this._shutdown,this)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,r){}onEnd(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&Uf.TraceFlags.SAMPLED)!==0&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())}_flushAll(){return new Promise((t,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,o=i;s<o;s++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);Uf.context.with((0,Nn.suppressTracing)(Uf.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),i=>{var s;clearTimeout(n),i.code===Nn.ExportResultCode.SUCCESS?t():r((s=i.error)!==null&&s!==void 0?s:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(t=>{(0,Nn.globalErrorHandler)(t)})},this._scheduledDelayMillis),(0,Nn.unrefTimer)(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};Ia.BatchSpanProcessorBase=Ff});var _0=l(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.BatchSpanProcessor=void 0;var VM=h0(),jf=class extends VM.BatchSpanProcessorBase{onShutdown(){}};wa.BatchSpanProcessor=jf});var g0=l(wr=>{"use strict";var YM=wr&&wr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),WM=wr&&wr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&YM(t,e,r)};Object.defineProperty(wr,"__esModule",{value:!0});WM(_0(),wr)});var kf=l(Nr=>{"use strict";var KM=Nr&&Nr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),XM=Nr&&Nr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&KM(t,e,r)};Object.defineProperty(Nr,"__esModule",{value:!0});XM(g0(),Nr)});var E0=l(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.BasicTracerProvider=Lr.ForceFlushState=void 0;var Ln=D(),Mn=J(),m0=qi(),zM=Na(),QM=yf(),ZM=p0(),JM=Bf(),eD=kf(),tD=Af(),xn;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(xn=Lr.ForceFlushState||(Lr.ForceFlushState={}));var er=class{constructor(t={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map;let n=(0,Mn.merge)({},QM.DEFAULT_CONFIG,(0,tD.reconfigureLimits)(t));this.resource=(r=n.resource)!==null&&r!==void 0?r:m0.Resource.empty(),this.resource=m0.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let i=this._buildExporterFromEnv();if(i!==void 0){let s=new eD.BatchSpanProcessor(i);this.activeSpanProcessor=s}else this.activeSpanProcessor=new JM.NoopSpanProcessor}getTracer(t,r,n){let i=`${t}@${r||""}:${n?.schemaUrl||""}`;return this._tracers.has(i)||this._tracers.set(i,new zM.Tracer({name:t,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)}addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>Ln.diag.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new ZM.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(t={}){Ln.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Ln.context.setGlobalContextManager(t.contextManager),t.propagator&&Ln.propagation.setGlobalPropagator(t.propagator)}forceFlush(){let t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(i=>{let s,o=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),s=xn.timeout},t);n.forceFlush().then(()=>{clearTimeout(o),s!==xn.timeout&&(s=xn.resolved,i(s))}).catch(a=>{clearTimeout(o),s=xn.error,i(a)})}));return new Promise((n,i)=>{Promise.all(r).then(s=>{let o=s.filter(a=>a!==xn.resolved);o.length>0?i(o):n()}).catch(s=>i([s]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(t){var r;return(r=er._registeredPropagators.get(t))===null||r===void 0?void 0:r()}_getSpanExporter(t){var r;return(r=er._registeredExporters.get(t))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let t=Array.from(new Set((0,Mn.getEnv)().OTEL_PROPAGATORS)),n=t.map(i=>{let s=this._getPropagator(i);return s||Ln.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),s}).reduce((i,s)=>(s&&i.push(s),i),[]);if(n.length!==0)return t.length===1?n[0]:new Mn.CompositePropagator({propagators:n})}_buildExporterFromEnv(){let t=(0,Mn.getEnv)().OTEL_TRACES_EXPORTER;if(t==="none")return;let r=this._getSpanExporter(t);return r||Ln.diag.error(`Exporter "${t}" requested through environment variable is unavailable.`),r}};Lr.BasicTracerProvider=er;er._registeredPropagators=new Map([["tracecontext",()=>new Mn.W3CTraceContextPropagator],["baggage",()=>new Mn.W3CBaggagePropagator]]);er._registeredExporters=new Map});var S0=l(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.ConsoleSpanExporter=void 0;var qf=J(),Gf=class{export(t,r){return this._sendSpans(t,r)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:(0,qf.hrTimeToMicroseconds)(t.startTime),duration:(0,qf.hrTimeToMicroseconds)(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}}_sendSpans(t,r){for(let n of t)console.dir(this._exportInfo(n),{depth:3});if(r)return r({code:qf.ExportResultCode.SUCCESS})}};La.ConsoleSpanExporter=Gf});var A0=l(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.InMemorySpanExporter=void 0;var y0=J(),Hf=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(t,r){if(this._stopped)return r({code:y0.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...t),setTimeout(()=>r({code:y0.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};xa.InMemorySpanExporter=Hf});var b0=l(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0})});var T0=l(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.SimpleSpanProcessor=void 0;var $f=D(),Ma=J(),Vf=class{constructor(t){this._exporter=t,this._shutdownOnce=new Ma.BindOnceFuture(this._shutdown,this)}forceFlush(){return Promise.resolve()}onStart(t,r){}onEnd(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&$f.TraceFlags.SAMPLED)!==0&&$f.context.with((0,Ma.suppressTracing)($f.context.active()),()=>{this._exporter.export([t],r=>{var n;r.code!==Ma.ExportResultCode.SUCCESS&&(0,Ma.globalErrorHandler)((n=r.error)!==null&&n!==void 0?n:new Error(`SimpleSpanProcessor: span export failed (status ${r})`))})})}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}};Da.SimpleSpanProcessor=Vf});var O0=l(R0=>{"use strict";Object.defineProperty(R0,"__esModule",{value:!0})});var P0=l(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0})});var w0=l(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0})});var L0=l(N0=>{"use strict";Object.defineProperty(N0,"__esModule",{value:!0})});var Na=l(_e=>{"use strict";var rD=_e&&_e.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),He=_e&&_e.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&rD(t,e,r)};Object.defineProperty(_e,"__esModule",{value:!0});He(KA(),_e);He(E0(),_e);He(kf(),_e);He(S0(),_e);He(A0(),_e);He(b0(),_e);He(T0(),_e);He(O0(),_e);He(Bf(),_e);He(Sf(),_e);He(P0(),_e);He(w0(),_e);He(L0(),_e)});var Hi=l(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.invalidTimeout=Ke.configureExporterTimeout=Ke.appendRootPathToUrlIfNeeded=Ke.appendResourcePathToUrl=Ke.parseHeaders=void 0;var M0=D(),x0=J(),D0=1e4;function nD(e={}){let t={};return Object.entries(e).forEach(([r,n])=>{typeof n<"u"?t[r]=String(n):M0.diag.warn(`Header "${r}" has wrong value and will be ignored`)}),t}Ke.parseHeaders=nD;function iD(e,t){return e.endsWith("/")||(e=e+"/"),e+t}Ke.appendResourcePathToUrl=iD;function sD(e,t){return!e.includes(t)&&!e.endsWith("/")&&(e=e+"/"),e}Ke.appendRootPathToUrlIfNeeded=sD;function oD(e){return typeof e=="number"?e<=0?Yf(e,D0):e:aD()}Ke.configureExporterTimeout=oD;function aD(){var e;let t=Number((e=(0,x0.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:(0,x0.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?Yf(t,D0):t}function Yf(e,t){return M0.diag.warn("Timeout must be greater than 0",e),t}Ke.invalidTimeout=Yf});var Ua=l(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.OTLPExporterBase=void 0;var B0=D(),$i=J(),uD=Hi(),Wf=class{constructor(t={}){this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new $i.BindOnceFuture(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:1/0,this.timeoutMillis=(0,uD.configureExporterTimeout)(t.timeoutMillis),this.onInit(t)}export(t,r){if(this._shutdownOnce.isCalled){r({code:$i.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:$i.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(()=>{r({code:$i.ExportResultCode.SUCCESS})}).catch(n=>{r({code:$i.ExportResultCode.FAILED,error:n})})}_export(t){return new Promise((r,n)=>{try{B0.diag.debug("items to be sent",t),this.send(t,r,n)}catch(i){n(i)}})}shutdown(){return this._shutdownOnce.call()}_shutdown(){return B0.diag.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(()=>{})}};Ba.OTLPExporterBase=Wf});var Kf=l(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.CompressionAlgorithm=void 0;var cD;(function(e){e.NONE="none",e.GZIP="gzip"})(cD=Vi.CompressionAlgorithm||(Vi.CompressionAlgorithm={}))});var ja=l(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.OTLPExporterError=void 0;var Xf=class extends Error{constructor(t,r,n){super(t),this.name="OTLPExporterError",this.data=n,this.code=r}};Fa.OTLPExporterError=Xf});var Jf=l(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.configureCompression=tr.createHttpAgent=tr.sendWithHttp=void 0;var F0=O("url"),j0=O("http"),k0=O("https"),lD=O("zlib"),dD=O("stream"),Zf=D(),ka=Kf(),U0=J(),zf=ja(),Qf;function fD(e,t,r,n,i){let s=e.timeoutMillis,o=new F0.URL(e.url),a,u=Number(process.versions.node.split(".")[0]),c=setTimeout(()=>{a=!0,u>=14?p.destroy():p.abort()},s),d={hostname:o.hostname,port:o.port,path:o.pathname,method:"POST",headers:Object.assign({"Content-Type":r},e.headers),agent:e.agent},p=(o.protocol==="http:"?j0.request:k0.request)(d,h=>{let g="";h.on("data",_=>g+=_),h.on("aborted",()=>{if(a){let _=new zf.OTLPExporterError("Request Timeout");i(_)}}),h.on("end",()=>{if(!a){if(h.statusCode&&h.statusCode<299)Zf.diag.debug(`statusCode: ${h.statusCode}`,g),n();else{let _=new zf.OTLPExporterError(h.statusMessage,h.statusCode,g);i(_)}clearTimeout(c)}})});switch(p.on("error",h=>{if(a){let g=new zf.OTLPExporterError("Request Timeout",h.code);i(g)}else clearTimeout(c),i(h)}),e.compression){case ka.CompressionAlgorithm.GZIP:{Qf||(Qf=lD.createGzip()),p.setHeader("Content-Encoding","gzip"),pD(t).on("error",i).pipe(Qf).on("error",i).pipe(p);break}default:p.end(t);break}}tr.sendWithHttp=fD;function pD(e){let t=new dD.Readable;return t.push(e),t.push(null),t}function hD(e){if(e.httpAgentOptions&&e.keepAlive===!1){Zf.diag.warn("httpAgentOptions is used only when keepAlive is true");return}if(!(e.keepAlive===!1||!e.url))try{let r=new F0.URL(e.url).protocol==="http:"?j0.Agent:k0.Agent;return new r(Object.assign({keepAlive:!0},e.httpAgentOptions))}catch(t){Zf.diag.error(`collector exporter failed to create http agent. err: ${t.message}`);return}}tr.createHttpAgent=hD;function _D(e){return e||(((0,U0.getEnv)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,U0.getEnv)().OTEL_EXPORTER_OTLP_COMPRESSION)===ka.CompressionAlgorithm.GZIP?ka.CompressionAlgorithm.GZIP:ka.CompressionAlgorithm.NONE)}tr.configureCompression=_D});var H0=l(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.OTLPExporterNodeBase=void 0;var gD=Ua(),mD=Hi(),ep=Jf(),q0=D(),G0=J(),tp=class extends gD.OTLPExporterBase{constructor(t={}){super(t),this.DEFAULT_HEADERS={},t.metadata&&q0.diag.warn("Metadata cannot be set when using http"),this.headers=Object.assign(this.DEFAULT_HEADERS,(0,mD.parseHeaders)(t.headers),G0.baggageUtils.parseKeyPairsIntoRecord((0,G0.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)),this.agent=(0,ep.createHttpAgent)(t),this.compression=(0,ep.configureCompression)(t.compression)}onInit(t){}send(t,r,n){if(this._shutdownOnce.isCalled){q0.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=new Promise((a,u)=>{(0,ep.sendWithHttp)(this,JSON.stringify(i),"application/json",a,u)}).then(r,n);this._sendingPromises.push(s);let o=()=>{let a=this._sendingPromises.indexOf(s);this._sendingPromises.splice(a,1)};s.then(o,o)}onShutdown(){}};qa.OTLPExporterNodeBase=tp});var $0=l(xt=>{"use strict";var ED=xt&&xt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),rp=xt&&xt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ED(t,e,r)};Object.defineProperty(xt,"__esModule",{value:!0});rp(H0(),xt);rp(Jf(),xt);rp(Kf(),xt)});var Y0=l(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.sendWithXhr=Dn.sendWithBeacon=void 0;var V0=D(),np=ja();function SD(e,t,r,n,i){if(navigator.sendBeacon(t,new Blob([e],r)))V0.diag.debug("sendBeacon - can send",e),n();else{let s=new np.OTLPExporterError(`sendBeacon - cannot send ${e}`);i(s)}}Dn.sendWithBeacon=SD;function yD(e,t,r,n,i,s){let o,a=setTimeout(()=>{o=!0,u.abort()},n),u=new XMLHttpRequest;u.open("POST",t),Object.entries(Object.assign(Object.assign({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach(([d,f])=>{u.setRequestHeader(d,f)}),u.send(e),u.onreadystatechange=()=>{if(u.readyState===XMLHttpRequest.DONE)if(u.status>=200&&u.status<=299)clearTimeout(a),V0.diag.debug("xhr success",e),i();else if(o){let d=new np.OTLPExporterError("Request Timeout",u.status);s(d)}else{let d=new np.OTLPExporterError(`Failed to export with XHR (status: ${u.status})`,u.status);clearTimeout(a),s(d)}}}Dn.sendWithXhr=yD});var X0=l(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.OTLPExporterBrowserBase=void 0;var AD=Ua(),vD=Hi(),W0=Y0(),bD=D(),K0=J(),ip=class extends AD.OTLPExporterBase{constructor(t={}){super(t),this._useXHR=!1,this._useXHR=!!t.headers||typeof navigator.sendBeacon!="function",this._useXHR?this._headers=Object.assign({},(0,vD.parseHeaders)(t.headers),K0.baggageUtils.parseKeyPairsIntoRecord((0,K0.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)):this._headers={}}onInit(){window.addEventListener("unload",this.shutdown)}onShutdown(){window.removeEventListener("unload",this.shutdown)}send(t,r,n){if(this._shutdownOnce.isCalled){bD.diag.debug("Shutdown already started. Cannot send objects");return}let i=this.convert(t),s=JSON.stringify(i),o=new Promise((u,c)=>{this._useXHR?(0,W0.sendWithXhr)(s,this.url,this._headers,this.timeoutMillis,u,c):(0,W0.sendWithBeacon)(s,this.url,{type:"application/json"},u,c)}).then(r,n);this._sendingPromises.push(o);let a=()=>{let u=this._sendingPromises.indexOf(o);this._sendingPromises.splice(u,1)};o.then(a,a)}};Ga.OTLPExporterBrowserBase=ip});var z0=l(xr=>{"use strict";var TD=xr&&xr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),RD=xr&&xr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&TD(t,e,r)};Object.defineProperty(xr,"__esModule",{value:!0});RD(X0(),xr)});var Q0=l(Mt=>{"use strict";var OD=Mt&&Mt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),CD=Mt&&Mt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&OD(t,e,r)};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.OTLPExporterBrowserBase=void 0;CD($0(),Mt);var PD=z0();Object.defineProperty(Mt,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return PD.OTLPExporterBrowserBase}})});var sp=l(St=>{"use strict";var ID=St&&St.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ha=St&&St.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ID(t,e,r)};Object.defineProperty(St,"__esModule",{value:!0});Ha(Ua(),St);Ha(Q0(),St);Ha(ja(),St);Ha(Hi(),St)});var J0=l(Z0=>{"use strict";Object.defineProperty(Z0,"__esModule",{value:!0})});var tv=l(ev=>{"use strict";Object.defineProperty(ev,"__esModule",{value:!0})});var nv=l(rv=>{"use strict";Object.defineProperty(rv,"__esModule",{value:!0})});var iv=l(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.ESpanKind=void 0;var wD;(function(e){e[e.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",e[e.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",e[e.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",e[e.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",e[e.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",e[e.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"})(wD=Yi.ESpanKind||(Yi.ESpanKind={}))});var $a=l(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.bufToHex=Xe.hexToBuf=Xe.toAnyValue=Xe.toKeyValue=Xe.toAttributes=void 0;function ND(e){return Object.keys(e).map(t=>op(t,e[t]))}Xe.toAttributes=ND;function op(e,t){return{key:e,value:ap(t)}}Xe.toKeyValue=op;function ap(e){let t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(ap)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(([r,n])=>op(r,n))}}:{}}Xe.toAnyValue=ap;function LD(e){var t;let r=(t=e.match(/[\da-f]{2}/gi))===null||t===void 0?void 0:t.map(n=>parseInt(n,16));return r&&new Uint8Array(r)}Xe.hexToBuf=LD;function xD(e){return("0"+e.toString(16)).slice(-2)}function MD(e){if(!(e==null||e.length===0))return Array.from(e).map(xD).join("")}Xe.bufToHex=MD});var av=l(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.toOtlpSpanEvent=rr.toOtlpLink=rr.sdkSpanToOtlpSpan=void 0;var up=J(),cp=$a(),Wi=J();function DD(e,t){let r=e.spanContext(),n=e.status,i=t?e.parentSpanId:e.parentSpanId!=null?Wi.hexToBase64(e.parentSpanId):void 0;return{traceId:t?r.traceId:Wi.hexToBase64(r.traceId),spanId:t?r.spanId:Wi.hexToBase64(r.spanId),parentSpanId:i,name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:(0,up.hrTimeToNanoseconds)(e.startTime),endTimeUnixNano:(0,up.hrTimeToNanoseconds)(e.endTime),attributes:(0,cp.toAttributes)(e.attributes),droppedAttributesCount:0,events:e.events.map(ov),droppedEventsCount:0,status:{code:n.code,message:n.message},links:e.links.map(s=>sv(s,t)),droppedLinksCount:0}}rr.sdkSpanToOtlpSpan=DD;function sv(e,t){return{attributes:e.attributes?(0,cp.toAttributes)(e.attributes):[],spanId:t?e.context.spanId:Wi.hexToBase64(e.context.spanId),traceId:t?e.context.traceId:Wi.hexToBase64(e.context.traceId),droppedAttributesCount:0}}rr.toOtlpLink=sv;function ov(e){return{attributes:e.attributes?(0,cp.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:(0,up.hrTimeToNanoseconds)(e.time),droppedAttributesCount:0}}rr.toOtlpSpanEvent=ov});var uv=l(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.createExportTraceServiceRequest=void 0;var BD=$a(),UD=av();function FD(e,t){return{resourceSpans:kD(e,t)}}Va.createExportTraceServiceRequest=FD;function jD(e){let t=new Map;for(let r of e){let n=t.get(r.resource);n||(n=new Map,t.set(r.resource,n));let i=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`,s=n.get(i);s||(s=[],n.set(i,s)),s.push(r)}return t}function kD(e,t){let r=jD(e),n=[],i=r.entries(),s=i.next();for(;!s.done;){let[o,a]=s.value,u=[],c=a.values(),d=c.next();for(;!d.done;){let p=d.value;if(p.length>0){let{name:h,version:g,schemaUrl:_}=p[0].instrumentationLibrary,v=p.map(A=>(0,UD.sdkSpanToOtlpSpan)(A,t));u.push({scope:{name:h,version:g},spans:v,schemaUrl:_})}d=c.next()}let f={resource:{attributes:(0,BD.toAttributes)(o.attributes),droppedAttributesCount:0},scopeSpans:u,schemaUrl:void 0};n.push(f),s=i.next()}return n}});var lp=l(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=F.NOOP_OBSERVABLE_GAUGE_METRIC=F.NOOP_OBSERVABLE_COUNTER_METRIC=F.NOOP_UP_DOWN_COUNTER_METRIC=F.NOOP_HISTOGRAM_METRIC=F.NOOP_COUNTER_METRIC=F.NOOP_METER=F.NoopObservableUpDownCounterMetric=F.NoopObservableGaugeMetric=F.NoopObservableCounterMetric=F.NoopObservableMetric=F.NoopHistogramMetric=F.NoopUpDownCounterMetric=F.NoopCounterMetric=F.NoopMetric=F.NoopMeter=void 0;var Ya=class{constructor(){}createHistogram(t,r){return F.NOOP_HISTOGRAM_METRIC}createCounter(t,r){return F.NOOP_COUNTER_METRIC}createUpDownCounter(t,r){return F.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(t,r){return F.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(t,r){return F.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(t,r){return F.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(t,r){}removeBatchObservableCallback(t){}};F.NoopMeter=Ya;var Bn=class{};F.NoopMetric=Bn;var Wa=class extends Bn{add(t,r){}};F.NoopCounterMetric=Wa;var Ka=class extends Bn{add(t,r){}};F.NoopUpDownCounterMetric=Ka;var Xa=class extends Bn{record(t,r){}};F.NoopHistogramMetric=Xa;var Un=class{addCallback(t){}removeCallback(t){}};F.NoopObservableMetric=Un;var za=class extends Un{};F.NoopObservableCounterMetric=za;var Qa=class extends Un{};F.NoopObservableGaugeMetric=Qa;var Za=class extends Un{};F.NoopObservableUpDownCounterMetric=Za;F.NOOP_METER=new Ya;F.NOOP_COUNTER_METRIC=new Wa;F.NOOP_HISTOGRAM_METRIC=new Xa;F.NOOP_UP_DOWN_COUNTER_METRIC=new Ka;F.NOOP_OBSERVABLE_COUNTER_METRIC=new za;F.NOOP_OBSERVABLE_GAUGE_METRIC=new Qa;F.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new Za});var dp=l(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.NOOP_METER_PROVIDER=Fn.NoopMeterProvider=void 0;var qD=lp(),Ja=class{getMeter(t,r,n){return qD.NOOP_METER}};Fn.NoopMeterProvider=Ja;Fn.NOOP_METER_PROVIDER=new Ja});var lv=l(cv=>{"use strict";Object.defineProperty(cv,"__esModule",{value:!0})});var fv=l(dv=>{"use strict";Object.defineProperty(dv,"__esModule",{value:!0})});var pv=l(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.ValueType=void 0;var GD;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(GD=Ki.ValueType||(Ki.ValueType={}))});var _v=l(hv=>{"use strict";Object.defineProperty(hv,"__esModule",{value:!0})});var gv=l(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu._globalThis=void 0;eu._globalThis=typeof globalThis=="object"?globalThis:global});var mv=l(Mr=>{"use strict";var HD=Mr&&Mr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$D=Mr&&Mr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&HD(t,e,r)};Object.defineProperty(Mr,"__esModule",{value:!0});$D(gv(),Mr)});var Ev=l(Dr=>{"use strict";var VD=Dr&&Dr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),YD=Dr&&Dr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&VD(t,e,r)};Object.defineProperty(Dr,"__esModule",{value:!0});YD(mv(),Dr)});var Sv=l(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.API_BACKWARDS_COMPATIBILITY_VERSION=yt.makeGetter=yt._global=yt.GLOBAL_METRICS_API_KEY=void 0;var WD=Ev();yt.GLOBAL_METRICS_API_KEY=Symbol.for("io.opentelemetry.js.api.metrics");yt._global=WD._globalThis;function KD(e,t,r){return n=>n===e?t:r}yt.makeGetter=KD;yt.API_BACKWARDS_COMPATIBILITY_VERSION=4});var Av=l(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.MetricsAPI=void 0;var yv=dp(),ze=Sv(),Xi=class{constructor(){}static getInstance(){return this._instance||(this._instance=new Xi),this._instance}setGlobalMeterProvider(t){return ze._global[ze.GLOBAL_METRICS_API_KEY]?this.getMeterProvider():(ze._global[ze.GLOBAL_METRICS_API_KEY]=(0,ze.makeGetter)(ze.API_BACKWARDS_COMPATIBILITY_VERSION,t,yv.NOOP_METER_PROVIDER),t)}getMeterProvider(){var t,r;return(r=(t=ze._global[ze.GLOBAL_METRICS_API_KEY])===null||t===void 0?void 0:t.call(ze._global,ze.API_BACKWARDS_COMPATIBILITY_VERSION))!==null&&r!==void 0?r:yv.NOOP_METER_PROVIDER}getMeter(t,r,n){return this.getMeterProvider().getMeter(t,r,n)}disable(){delete ze._global[ze.GLOBAL_METRICS_API_KEY]}};tu.MetricsAPI=Xi});var kn=l(Me=>{"use strict";var XD=Me&&Me.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jn=Me&&Me.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&XD(t,e,r)};Object.defineProperty(Me,"__esModule",{value:!0});Me.metrics=void 0;jn(lp(),Me);jn(dp(),Me);jn(lv(),Me);jn(fv(),Me);jn(pv(),Me);jn(_v(),Me);var zD=Av();Me.metrics=zD.MetricsAPI.getInstance()});var ru=l(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.AggregationTemporality=void 0;var QD;(function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"})(QD=zi.AggregationTemporality||(zi.AggregationTemporality={}))});var Zi=l(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.DataPointType=void 0;var ZD;(function(e){e[e.SINGULAR=0]="SINGULAR",e[e.HISTOGRAM=1]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=2]="EXPONENTIAL_HISTOGRAM"})(ZD=Qi.DataPointType||(Qi.DataPointType={}))});var vv=l(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.ConsoleMetricExporter=void 0;var JD=ru(),eB=J(),fp=class{constructor(t){this._shutdown=!0,this._aggregationTemporality=t??JD.AggregationTemporality.CUMULATIVE}export(t,r){return r({code:eB.ExportResultCode.FAILED,error:new Error("Method not implemented")})}selectAggregationTemporality(t){return this._aggregationTemporality}async forceFlush(){}async shutdown(){this._shutdown=!0}};nu.ConsoleMetricExporter=fp});var Tv=l(bv=>{"use strict";Object.defineProperty(bv,"__esModule",{value:!0})});var Dt=l(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.setEquals=le.FlatMap=le.isPromiseAllSettledRejectionResult=le.PromiseAllSettled=le.callWithTimeout=le.TimeoutError=le.instrumentationScopeId=le.hashAttributes=le.isNotNullish=void 0;function tB(e){return e!=null}le.isNotNullish=tB;function rB(e){let t=Object.keys(e);return t.length===0?"":(t=t.sort(),t.reduce((r,n)=>(r.length>2&&(r+=","),r+=n+":"+e[n]),"|#"))}le.hashAttributes=rB;function nB(e){var t,r;return`${e.name}:${(t=e.version)!==null&&t!==void 0?t:""}:${(r=e.schemaUrl)!==null&&r!==void 0?r:""}`}le.instrumentationScopeId=nB;var qn=class extends Error{constructor(t){super(t),Object.setPrototypeOf(this,qn.prototype)}};le.TimeoutError=qn;function iB(e,t){let r,n=new Promise(function(s,o){r=setTimeout(function(){o(new qn("Operation timed out."))},t)});return Promise.race([e,n]).then(i=>(clearTimeout(r),i),i=>{throw clearTimeout(r),i})}le.callWithTimeout=iB;async function sB(e){return Promise.all(e.map(async t=>{try{return{status:"fulfilled",value:await t}}catch(r){return{status:"rejected",reason:r}}}))}le.PromiseAllSettled=sB;function oB(e){return e.status==="rejected"}le.isPromiseAllSettledRejectionResult=oB;function aB(e,t){let r=[];return e.forEach(n=>{r.push(...t(n))}),r}le.FlatMap=aB;function uB(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}le.setEquals=uB});var hp=l(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.MetricReader=void 0;var Rv=D(),Ov=Dt(),pp=class{constructor(){this._shutdown=!1}setMetricProducer(t){if(this._metricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._metricProducer=t,this.onInitialized()}onInitialized(){}async collect(t){if(this._metricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return this._metricProducer.collect({timeoutMillis:t?.timeoutMillis})}async shutdown(t){if(this._shutdown){Rv.diag.error("Cannot call shutdown twice.");return}t?.timeoutMillis==null?await this.onShutdown():await(0,Ov.callWithTimeout)(this.onShutdown(),t.timeoutMillis),this._shutdown=!0}async forceFlush(t){if(this._shutdown){Rv.diag.warn("Cannot forceFlush on already shutdown MetricReader.");return}if(t?.timeoutMillis==null){await this.onForceFlush();return}await(0,Ov.callWithTimeout)(this.onForceFlush(),t.timeoutMillis)}};iu.MetricReader=pp});var wv=l(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.PeriodicExportingMetricReader=void 0;var Cv=D(),Pv=J(),cB=hp(),Iv=Dt(),_p=class extends cB.MetricReader{constructor(t){var r,n;if(super(),t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=(r=t.exportIntervalMillis)!==null&&r!==void 0?r:6e4,this._exportTimeout=(n=t.exportTimeoutMillis)!==null&&n!==void 0?n:3e4,this._exporter=t.exporter}async _runOnce(){let{resourceMetrics:t,errors:r}=await this.collect({});return r.length>0&&Cv.diag.error("PeriodicExportingMetricReader: metrics collection errors",...r),new Promise((n,i)=>{this._exporter.export(t,s=>{var o;s.code!==Pv.ExportResultCode.SUCCESS?i((o=s.error)!==null&&o!==void 0?o:new Error(`PeriodicExportingMetricReader: metrics export failed (error ${s.error})`)):n()})})}onInitialized(){this._interval=setInterval(async()=>{try{await(0,Iv.callWithTimeout)(this._runOnce(),this._exportTimeout)}catch(t){if(t instanceof Iv.TimeoutError){Cv.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);return}(0,Pv.globalErrorHandler)(t)}},this._exportInterval)}async onForceFlush(){await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this._exporter.shutdown()}selectAggregationTemporality(t){return this._exporter.selectAggregationTemporality(t)}};su.PeriodicExportingMetricReader=_p});var Br=l(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.isDescriptorCompatibleWith=rt.createInstrumentDescriptorWithView=rt.createInstrumentDescriptor=rt.InstrumentType=void 0;var lB=kn(),dB;(function(e){e.COUNTER="COUNTER",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(dB=rt.InstrumentType||(rt.InstrumentType={}));function fB(e,t,r){var n,i,s;return{name:e,type:t,description:(n=r?.description)!==null&&n!==void 0?n:"",unit:(i=r?.unit)!==null&&i!==void 0?i:"",valueType:(s=r?.valueType)!==null&&s!==void 0?s:lB.ValueType.DOUBLE}}rt.createInstrumentDescriptor=fB;function pB(e,t){var r,n;return{name:(r=e.name)!==null&&r!==void 0?r:t.name,description:(n=e.description)!==null&&n!==void 0?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType}}rt.createInstrumentDescriptorWithView=pB;function hB(e,t){return e.name===t.name&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}rt.isDescriptorCompatibleWith=hB});var au=l(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.isObservableInstrument=de.ObservableUpDownCounterInstrument=de.ObservableGaugeInstrument=de.ObservableCounterInstrument=de.ObservableInstrument=de.HistogramInstrument=de.CounterInstrument=de.UpDownCounterInstrument=de.SyncInstrument=void 0;var ou=D(),_B=kn(),Gn=class{constructor(t,r){this._writableMetricStorage=t,this._descriptor=r}_record(t,r={},n=ou.context.active()){this._descriptor.valueType===_B.ValueType.INT&&!Number.isInteger(t)&&(ou.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t)),this._writableMetricStorage.record(t,r,n)}};de.SyncInstrument=Gn;var gp=class extends Gn{add(t,r,n){this._record(t,r,n)}};de.UpDownCounterInstrument=gp;var mp=class extends Gn{add(t,r,n){if(t<0){ou.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};de.CounterInstrument=mp;var Ep=class extends Gn{record(t,r,n){if(t<0){ou.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${t}`);return}this._record(t,r,n)}};de.HistogramInstrument=Ep;var Ur=class{constructor(t,r,n){this._observableRegistry=n,this._descriptor=t,this._metricStorages=r}addCallback(t){this._observableRegistry.addCallback(t,this)}removeCallback(t){this._observableRegistry.removeCallback(t,this)}};de.ObservableInstrument=Ur;var Sp=class extends Ur{};de.ObservableCounterInstrument=Sp;var yp=class extends Ur{};de.ObservableGaugeInstrument=yp;var Ap=class extends Ur{};de.ObservableUpDownCounterInstrument=Ap;function gB(e){return e instanceof Ur}de.isObservableInstrument=gB});var bp=l(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.Meter=void 0;var Qe=Br(),Hn=au(),vp=class{constructor(t){this._meterSharedState=t}createHistogram(t,r){let n=(0,Qe.createInstrumentDescriptor)(t,Qe.InstrumentType.HISTOGRAM,r),i=this._meterSharedState.registerMetricStorage(n);return new Hn.HistogramInstrument(i,n)}createCounter(t,r){let n=(0,Qe.createInstrumentDescriptor)(t,Qe.InstrumentType.COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new Hn.CounterInstrument(i,n)}createUpDownCounter(t,r){let n=(0,Qe.createInstrumentDescriptor)(t,Qe.InstrumentType.UP_DOWN_COUNTER,r),i=this._meterSharedState.registerMetricStorage(n);return new Hn.UpDownCounterInstrument(i,n)}createObservableGauge(t,r){let n=(0,Qe.createInstrumentDescriptor)(t,Qe.InstrumentType.OBSERVABLE_GAUGE,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new Hn.ObservableGaugeInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableCounter(t,r){let n=(0,Qe.createInstrumentDescriptor)(t,Qe.InstrumentType.OBSERVABLE_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new Hn.ObservableCounterInstrument(n,i,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(t,r){let n=(0,Qe.createInstrumentDescriptor)(t,Qe.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER,r),i=this._meterSharedState.registerAsyncMetricStorage(n);return new Hn.ObservableUpDownCounterInstrument(n,i,this._meterSharedState.observableRegistry)}addBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.addBatchCallback(t,r)}removeBatchObservableCallback(t,r){this._meterSharedState.observableRegistry.removeBatchCallback(t,r)}};uu.Meter=vp});var cu=l($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.ExactPredicate=$n.PatternPredicate=void 0;var mB=/[\^$\\.+?()[\]{}|]/g,Ji=class{constructor(t){t==="*"?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(Ji.escapePattern(t)))}match(t){return this._matchAll?!0:this._regexp.test(t)}static escapePattern(t){return`^${t.replace(mB,"\\$&").replace("*",".*")}$`}static hasWildcard(t){return t.includes("*")}};$n.PatternPredicate=Ji;var Tp=class{constructor(t){this._matchAll=t===void 0,this._pattern=t}match(t){return!!(this._matchAll||t===this._pattern)}};$n.ExactPredicate=Tp});var Op=l(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.InstrumentSelector=void 0;var EB=cu(),Rp=class{constructor(t){var r;this._nameFilter=new EB.PatternPredicate((r=t?.name)!==null&&r!==void 0?r:"*"),this._type=t?.type}getType(){return this._type}getNameFilter(){return this._nameFilter}};lu.InstrumentSelector=Rp});var Ip=l(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.MeterSelector=void 0;var Cp=cu(),Pp=class{constructor(t){this._nameFilter=new Cp.ExactPredicate(t?.name),this._versionFilter=new Cp.ExactPredicate(t?.version),this._schemaUrlFilter=new Cp.ExactPredicate(t?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}};du.MeterSelector=Pp});var ts=l(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.AggregatorKind=void 0;var SB;(function(e){e[e.DROP=0]="DROP",e[e.SUM=1]="SUM",e[e.LAST_VALUE=2]="LAST_VALUE",e[e.HISTOGRAM=3]="HISTOGRAM"})(SB=es.AggregatorKind||(es.AggregatorKind={}))});var Nv=l(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.DropAggregator=void 0;var yB=ts(),wp=class{constructor(){this.kind=yB.AggregatorKind.DROP}createAccumulation(){}merge(t,r){}diff(t,r){}toMetricData(t,r,n,i,s){}};fu.DropAggregator=wp});var Lv=l(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.HistogramAggregator=Yn.HistogramAccumulation=void 0;var AB=ts(),vB=Zi();function bB(e){let t=e.map(()=>0);return t.push(0),{buckets:{boundaries:e,counts:t},sum:0,count:0}}var Vn=class{constructor(t,r=bB(t)){this._boundaries=t,this._current=r}record(t){this._current.count+=1,this._current.sum+=t;for(let r=0;r<this._boundaries.length;r++)if(t<this._boundaries[r]){this._current.buckets.counts[r]+=1;return}this._current.buckets.counts[this._boundaries.length]+=1}toPointValue(){return this._current}};Yn.HistogramAccumulation=Vn;var Np=class{constructor(t){this._boundaries=t,this.kind=AB.AggregatorKind.HISTOGRAM}createAccumulation(){return new Vn(this._boundaries)}merge(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let u=0;u<s.length;u++)a[u]=s[u]+o[u];return new Vn(n.buckets.boundaries,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:n.count+i.count,sum:n.sum+i.sum})}diff(t,r){let n=t.toPointValue(),i=r.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length);for(let u=0;u<s.length;u++)a[u]=o[u]-s[u];return new Vn(n.buckets.boundaries,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:i.count-n.count,sum:i.sum-n.sum})}toMetricData(t,r,n,i,s){return{descriptor:t,aggregationTemporality:r,dataPointType:vB.DataPointType.HISTOGRAM,dataPoints:n.map(([o,a])=>({attributes:o,startTime:i,endTime:s,value:a.toPointValue()}))}}};Yn.HistogramAggregator=Np});var xv=l(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.LastValueAggregator=Kn.LastValueAccumulation=void 0;var TB=ts(),rs=J(),RB=Zi(),Wn=class{constructor(t=0,r=[0,0]){this._current=t,this.sampleTime=r}record(t){this._current=t,this.sampleTime=(0,rs.hrTime)()}toPointValue(){return this._current}};Kn.LastValueAccumulation=Wn;var Lp=class{constructor(){this.kind=TB.AggregatorKind.LAST_VALUE}createAccumulation(){return new Wn}merge(t,r){let n=(0,rs.hrTimeToMicroseconds)(r.sampleTime)>=(0,rs.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new Wn(n.toPointValue(),n.sampleTime)}diff(t,r){let n=(0,rs.hrTimeToMicroseconds)(r.sampleTime)>=(0,rs.hrTimeToMicroseconds)(t.sampleTime)?r:t;return new Wn(n.toPointValue(),n.sampleTime)}toMetricData(t,r,n,i,s){return{descriptor:t,aggregationTemporality:r,dataPointType:RB.DataPointType.SINGULAR,dataPoints:n.map(([o,a])=>({attributes:o,startTime:i,endTime:s,value:a.toPointValue()}))}}};Kn.LastValueAggregator=Lp});var Mv=l(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.SumAggregator=zn.SumAccumulation=void 0;var OB=ts(),CB=Zi(),Xn=class{constructor(t=0){this._current=t}record(t){this._current+=t}toPointValue(){return this._current}};zn.SumAccumulation=Xn;var xp=class{constructor(){this.kind=OB.AggregatorKind.SUM}createAccumulation(){return new Xn}merge(t,r){return new Xn(t.toPointValue()+r.toPointValue())}diff(t,r){return new Xn(r.toPointValue()-t.toPointValue())}toMetricData(t,r,n,i,s){return{descriptor:t,aggregationTemporality:r,dataPointType:CB.DataPointType.SINGULAR,dataPoints:n.map(([o,a])=>({attributes:o,startTime:i,endTime:s,value:a.toPointValue()}))}}};zn.SumAggregator=xp});var Dv=l(At=>{"use strict";var PB=At&&At.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),pu=At&&At.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&PB(t,e,r)};Object.defineProperty(At,"__esModule",{value:!0});pu(Nv(),At);pu(Lv(),At);pu(xv(),At);pu(Mv(),At)});var Dp=l(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.DefaultAggregation=Re.ExplicitBucketHistogramAggregation=Re.HistogramAggregation=Re.LastValueAggregation=Re.SumAggregation=Re.DropAggregation=Re.Aggregation=void 0;var IB=D(),ns=Dv(),Qn=Br(),Bt=class{static Drop(){return Bv}static Sum(){return Uv}static LastValue(){return Fv}static Histogram(){return jv}static Default(){return wB}};Re.Aggregation=Bt;var Fr=class extends Bt{createAggregator(t){return Fr.DEFAULT_INSTANCE}};Re.DropAggregation=Fr;Fr.DEFAULT_INSTANCE=new ns.DropAggregator;var jr=class extends Bt{createAggregator(t){return jr.DEFAULT_INSTANCE}};Re.SumAggregation=jr;jr.DEFAULT_INSTANCE=new ns.SumAggregator;var kr=class extends Bt{createAggregator(t){return kr.DEFAULT_INSTANCE}};Re.LastValueAggregation=kr;kr.DEFAULT_INSTANCE=new ns.LastValueAggregator;var qr=class extends Bt{createAggregator(t){return qr.DEFAULT_INSTANCE}};Re.HistogramAggregation=qr;qr.DEFAULT_INSTANCE=new ns.HistogramAggregator([0,5,10,25,50,75,100,250,500,1e3]);var Mp=class extends Bt{constructor(t){if(super(),t===void 0||t.length===0)throw new Error("HistogramAggregator should be created with boundaries.");t=t.concat(),t=t.sort((i,s)=>i-s);let r=t.lastIndexOf(-1/0),n=t.indexOf(1/0);n===-1&&(n=void 0),this._boundaries=t.slice(r+1,n)}createAggregator(t){return new ns.HistogramAggregator(this._boundaries)}};Re.ExplicitBucketHistogramAggregation=Mp;var hu=class extends Bt{_resolve(t){switch(t.type){case Qn.InstrumentType.COUNTER:case Qn.InstrumentType.UP_DOWN_COUNTER:case Qn.InstrumentType.OBSERVABLE_COUNTER:case Qn.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return Uv;case Qn.InstrumentType.OBSERVABLE_GAUGE:return Fv;case Qn.InstrumentType.HISTOGRAM:return jv}return IB.diag.warn(`Unable to recognize instrument type: ${t.type}`),Bv}createAggregator(t){return this._resolve(t).createAggregator(t)}};Re.DefaultAggregation=hu;var Bv=new Fr,Uv=new jr,Fv=new kr,jv=new qr,wB=new hu});var Up=l(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.FilteringAttributesProcessor=nr.NoopAttributesProcessor=nr.AttributesProcessor=void 0;var is=class{static Noop(){return NB}};nr.AttributesProcessor=is;var _u=class extends is{process(t,r){return t}};nr.NoopAttributesProcessor=_u;var Bp=class extends is{constructor(t){super(),this._allowedAttributeNames=t}process(t,r){let n={};return Object.keys(t).filter(i=>this._allowedAttributeNames.includes(i)).forEach(i=>n[i]=t[i]),n}};nr.FilteringAttributesProcessor=Bp;var NB=new _u});var jp=l(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.View=void 0;var LB=Dp(),xB=Up(),Fp=class{constructor(t){var r,n;this.name=t?.name,this.description=t?.description,this.aggregation=(r=t?.aggregation)!==null&&r!==void 0?r:LB.Aggregation.Default(),this.attributesProcessor=(n=t?.attributesProcessor)!==null&&n!==void 0?n:xB.AttributesProcessor.Noop()}};gu.View=Fp});var kv=l(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.ViewRegistry=void 0;var MB=Op(),DB=Ip(),BB=jp(),Zn=class{constructor(){this._registeredViews=[]}addView(t,r=new MB.InstrumentSelector,n=new DB.MeterSelector){this._registeredViews.push({instrumentSelector:r,meterSelector:n,view:t})}findViews(t,r){let n=this._registeredViews.filter(i=>this._matchInstrument(i.instrumentSelector,t)&&this._matchMeter(i.meterSelector,r)).map(i=>i.view);return n.length===0?[Zn.DEFAULT_VIEW]:n}_matchInstrument(t,r){return(t.getType()===void 0||r.type===t.getType())&&t.getNameFilter().match(r.name)}_matchMeter(t,r){return t.getNameFilter().match(r.name)&&(r.version===void 0||t.getVersionFilter().match(r.version))&&(r.schemaUrl===void 0||t.getSchemaUrlFilter().match(r.schemaUrl))}};mu.ViewRegistry=Zn;Zn.DEFAULT_VIEW=new BB.View});var qp=l(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.MetricStorage=void 0;var UB=Br(),kp=class{constructor(t){this._instrumentDescriptor=t}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(t){this._instrumentDescriptor=(0,UB.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit})}};Eu.MetricStorage=kp});var ss=l(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.AttributeHashMap=Jn.HashMap=void 0;var FB=Dt(),Su=class{constructor(t){this._hash=t,this._valueMap=new Map,this._keyMap=new Map}get(t,r){return r??(r=this._hash(t)),this._valueMap.get(r)}getOrDefault(t,r){let n=this._hash(t);if(this._valueMap.has(n))return this._valueMap.get(n);let i=r();return this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,i),i}set(t,r,n){n??(n=this._hash(t)),this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,r)}has(t,r){return r??(r=this._hash(t)),this._valueMap.has(r)}*entries(){let t=this._valueMap.entries(),r=t.next();for(;r.done!==!0;)yield[this._keyMap.get(r.value[0]),r.value[1],r.value[0]],r=t.next()}get size(){return this._valueMap.size}};Jn.HashMap=Su;var Gp=class extends Su{constructor(){super(FB.hashAttributes)}};Jn.AttributeHashMap=Gp});var Vp=l(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.DeltaMetricProcessor=void 0;var Hp=ss(),$p=class{constructor(t){this._aggregator=t,this._activeCollectionStorage=new Hp.AttributeHashMap,this._cumulativeMemoStorage=new Hp.AttributeHashMap}bind(t){return this._activeCollectionStorage.getOrDefault(t,()=>this._aggregator.createAccumulation())}record(t,r,n){let i=this.bind(r);i?.record(t)}batchCumulate(t){Array.from(t.entries()).forEach(([r,n,i])=>{let s=this._aggregator.createAccumulation();if(s?.record(n),this._cumulativeMemoStorage.has(r,i)){let o=this._cumulativeMemoStorage.get(r,i);s=this._aggregator.diff(o,s)}this._cumulativeMemoStorage.set(r,s,i),this._activeCollectionStorage.set(r,s,i)})}collect(){let t=this._activeCollectionStorage;return this._activeCollectionStorage=new Hp.AttributeHashMap,t}};yu.DeltaMetricProcessor=$p});var Yp=l(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.TemporalMetricProcessor=void 0;var qv=ru(),jB=ss(),ei=class{constructor(t){this._aggregator=t,this._unreportedAccumulations=new Map,this._reportHistory=new Map}buildMetrics(t,r,n,i,s,o){let a=s;this._stashAccumulations(r,i);let u=this._getMergedUnreportedAccumulations(t),c=u,d;if(this._reportHistory.has(t)){let f=this._reportHistory.get(t);a=f.collectionTime,d=f.aggregationTemporality,d===qv.AggregationTemporality.CUMULATIVE&&(c=ei.merge(f.accumulations,u,this._aggregator))}else d=t.selectAggregationTemporality(n.type);return this._reportHistory.set(t,{accumulations:c,collectionTime:o,aggregationTemporality:d}),this._aggregator.toMetricData(n,d,kB(c),d===qv.AggregationTemporality.CUMULATIVE?s:a,o)}_stashAccumulations(t,r){t.forEach(n=>{let i=this._unreportedAccumulations.get(n);i===void 0&&(i=[],this._unreportedAccumulations.set(n,i)),i.push(r)})}_getMergedUnreportedAccumulations(t){let r=new jB.AttributeHashMap,n=this._unreportedAccumulations.get(t);if(this._unreportedAccumulations.set(t,[]),n===void 0)return r;for(let i of n)r=ei.merge(r,i,this._aggregator);return r}static merge(t,r,n){var i;let s=t,o=r.entries(),a=o.next();for(;a.done!==!0;){let[u,c,d]=a.value,f=(i=t.get(u,d))!==null&&i!==void 0?i:n.createAccumulation();s.set(u,n.merge(f,c),d),a=o.next()}return s}};Au.TemporalMetricProcessor=ei;function kB(e){return Array.from(e.entries())}});var Gv=l(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.AsyncMetricStorage=void 0;var qB=qp(),GB=Vp(),HB=Yp(),$B=ss(),Wp=class extends qB.MetricStorage{constructor(t,r,n){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new GB.DeltaMetricProcessor(r),this._temporalMetricStorage=new HB.TemporalMetricProcessor(r)}record(t){let r=new $B.AttributeHashMap;Array.from(t.entries()).forEach(([n,i])=>{r.set(this._attributesProcessor.process(n),i)}),this._deltaMetricStorage.batchCumulate(r)}collect(t,r,n,i){let s=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,r,this._instrumentDescriptor,s,n,i)}};vu.AsyncMetricStorage=Wp});var Wv=l(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.getConflictResolutionRecipe=De.getDescriptionResolutionRecipe=De.getTypeConflictResolutionRecipe=De.getUnitConflictResolutionRecipe=De.getValueTypeConflictResolutionRecipe=De.getIncompatibilityDetails=void 0;function VB(e,t){let r="";return e.unit!==t.unit&&(r+=`	- Unit '${e.unit}' does not match '${t.unit}'
`),e.type!==t.type&&(r+=`	- Type '${e.type}' does not match '${t.type}'
`),e.valueType!==t.valueType&&(r+=`	- Value Type '${e.valueType}' does not match '${t.valueType}'
`),e.description!==t.description&&(r+=`	- Description '${e.description}' does not match '${t.description}'
`),r}De.getIncompatibilityDetails=VB;function Hv(e,t){return`	- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}De.getValueTypeConflictResolutionRecipe=Hv;function $v(e,t){return`	- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}De.getUnitConflictResolutionRecipe=$v;function Vv(e,t){let r={name:t.name,type:t.type},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}De.getTypeConflictResolutionRecipe=Vv;function Yv(e,t){let r={name:t.name,type:t.type},n=JSON.stringify(r);return`	- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'
    	- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}
    	- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}De.getDescriptionResolutionRecipe=Yv;function YB(e,t){return e.valueType!==t.valueType?Hv(e,t):e.unit!==t.unit?$v(e,t):e.type!==t.type?Vv(e,t):e.description!==t.description?Yv(e,t):""}De.getConflictResolutionRecipe=YB});var Xv=l(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.MetricStorageRegistry=void 0;var WB=Br(),Kv=D(),bu=Wv(),os=class{constructor(){this._metricStorageRegistry=new Map}static create(){return new os}getStorages(){let t=[];for(let r of this._metricStorageRegistry.values())t=t.concat(r);return t}register(t){let r=t.getInstrumentDescriptor(),n=this._metricStorageRegistry.get(r.name);if(n===void 0)return this._metricStorageRegistry.set(r.name,[t]),t;let i=null;for(let s of n){let o=s.getInstrumentDescriptor();(0,WB.isDescriptorCompatibleWith)(o,r)?(o.description!==r.description&&(r.description.length>o.description.length&&s.updateDescription(r.description),Kv.diag.warn("A view or instrument with the name ",r.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,(0,bu.getIncompatibilityDetails)(o,r),`The longer description will be used.
To resolve the conflict:`,(0,bu.getConflictResolutionRecipe)(o,r))),i=s):Kv.diag.warn("A view or instrument with the name ",r.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,(0,bu.getIncompatibilityDetails)(o,r),`To resolve the conflict:
`,(0,bu.getConflictResolutionRecipe)(o,r))}return i??(n.push(t),t)}};Tu.MetricStorageRegistry=os});var zv=l(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.MultiMetricStorage=void 0;var Kp=class{constructor(t){this._backingStorages=t}record(t,r,n){this._backingStorages.forEach(i=>{i.record(t,r,n)})}};Ru.MultiMetricStorage=Kp});var Qp=l(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.BatchObservableResultImpl=ti.ObservableResultImpl=void 0;var Qv=D(),Zv=kn(),Jv=ss(),KB=au(),Xp=class{constructor(t){this._descriptor=t,this._buffer=new Jv.AttributeHashMap}observe(t,r={}){this._descriptor.valueType===Zv.ValueType.INT&&!Number.isInteger(t)&&(Qv.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t)),this._buffer.set(r,t)}};ti.ObservableResultImpl=Xp;var zp=class{constructor(){this._buffer=new Map}observe(t,r,n={}){if(!(0,KB.isObservableInstrument)(t))return;let i=this._buffer.get(t);i==null&&(i=new Jv.AttributeHashMap,this._buffer.set(t,i)),t._descriptor.valueType===Zv.ValueType.INT&&!Number.isInteger(r)&&(Qv.diag.warn(`INT value type cannot accept a floating-point value for ${t._descriptor.name}, ignoring the fractional digits.`),r=Math.trunc(r)),i.set(n,r)}};ti.BatchObservableResultImpl=zp});var rb=l(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.ObservableRegistry=void 0;var XB=D(),eb=au(),tb=Qp(),as=Dt(),Zp=class{constructor(){this._callbacks=[],this._batchCallbacks=[]}addCallback(t,r){this._findCallback(t,r)>=0||this._callbacks.push({callback:t,instrument:r})}removeCallback(t,r){let n=this._findCallback(t,r);n<0||this._callbacks.splice(n,1)}addBatchCallback(t,r){let n=new Set(r.filter(eb.isObservableInstrument));if(n.size===0){XB.diag.error("BatchObservableCallback is not associated with valid instruments",r);return}this._findBatchCallback(t,n)>=0||this._batchCallbacks.push({callback:t,instruments:n})}removeBatchCallback(t,r){let n=new Set(r.filter(eb.isObservableInstrument)),i=this._findBatchCallback(t,n);i<0||this._batchCallbacks.splice(i,1)}async observe(t){let r=this._observeCallbacks(t),n=this._observeBatchCallbacks(t);return(await(0,as.PromiseAllSettled)([...r,...n])).filter(as.isPromiseAllSettledRejectionResult).map(o=>o.reason)}_observeCallbacks(t){return this._callbacks.map(async({callback:r,instrument:n})=>{let i=new tb.ObservableResultImpl(n._descriptor),s=Promise.resolve(r(i));t!=null&&(s=(0,as.callWithTimeout)(s,t)),await s,n._metricStorages.forEach(o=>{o.record(i._buffer)})})}_observeBatchCallbacks(t){return this._batchCallbacks.map(async({callback:r,instruments:n})=>{let i=new tb.BatchObservableResultImpl,s=Promise.resolve(r(i));t!=null&&(s=(0,as.callWithTimeout)(s,t)),await s,n.forEach(o=>{let a=i._buffer.get(o);a!=null&&o._metricStorages.forEach(u=>{u.record(a)})})})}_findCallback(t,r){return this._callbacks.findIndex(n=>n.callback===t&&n.instrument===r)}_findBatchCallback(t,r){return this._batchCallbacks.findIndex(n=>n.callback===t&&(0,as.setEquals)(n.instruments,r))}};Ou.ObservableRegistry=Zp});var nb=l(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.SyncMetricStorage=void 0;var zB=qp(),QB=Vp(),ZB=Yp(),Jp=class extends zB.MetricStorage{constructor(t,r,n){super(t),this._attributesProcessor=n,this._deltaMetricStorage=new QB.DeltaMetricProcessor(r),this._temporalMetricStorage=new ZB.TemporalMetricProcessor(r)}record(t,r,n){r=this._attributesProcessor.process(r,n),this._deltaMetricStorage.record(t,r,n)}collect(t,r,n,i){let s=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,r,this._instrumentDescriptor,s,n,i)}};Cu.SyncMetricStorage=Jp});var sb=l(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.MeterSharedState=void 0;var ib=Br(),JB=bp(),Pu=Dt(),eU=Gv(),tU=Xv(),rU=zv(),nU=rb(),iU=nb(),eh=class{constructor(t,r){this._meterProviderSharedState=t,this._instrumentationScope=r,this._metricStorageRegistry=new tU.MetricStorageRegistry,this.observableRegistry=new nU.ObservableRegistry,this.meter=new JB.Meter(this)}registerMetricStorage(t){let n=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(i=>{let s=(0,ib.createInstrumentDescriptorWithView)(i,t),o=i.aggregation.createAggregator(s),a=new iU.SyncMetricStorage(s,o,i.attributesProcessor);return this._metricStorageRegistry.register(a)}).filter(Pu.isNotNullish);return n.length===1?n[0]:new rU.MultiMetricStorage(n)}registerAsyncMetricStorage(t){return this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(i=>{let s=(0,ib.createInstrumentDescriptorWithView)(i,t),o=i.aggregation.createAggregator(s),a=new eU.AsyncMetricStorage(s,o,i.attributesProcessor);return this._metricStorageRegistry.register(a)}).filter(Pu.isNotNullish)}async collect(t,r,n){let i=await this.observableRegistry.observe(n?.timeoutMillis),s=Array.from(this._metricStorageRegistry.getStorages()).map(o=>o.collect(t,this._meterProviderSharedState.metricCollectors,this._meterProviderSharedState.sdkStartTime,r)).filter(Pu.isNotNullish);return{scopeMetrics:{scope:this._instrumentationScope,metrics:s.filter(Pu.isNotNullish)},errors:i}}};Iu.MeterSharedState=eh});var ob=l(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.MeterProviderSharedState=void 0;var sU=J(),oU=Dt(),aU=kv(),uU=sb(),th=class{constructor(t){this.resource=t,this.viewRegistry=new aU.ViewRegistry,this.sdkStartTime=(0,sU.hrTime)(),this.metricCollectors=[],this.meterSharedStates=new Map}getMeterSharedState(t){let r=(0,oU.instrumentationScopeId)(t),n=this.meterSharedStates.get(r);return n==null&&(n=new uU.MeterSharedState(this,t),this.meterSharedStates.set(r,n)),n}};wu.MeterProviderSharedState=th});var ab=l(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.MetricCollector=void 0;var cU=J(),lU=Dt(),rh=class{constructor(t,r){this._sharedState=t,this._metricReader=r}async collect(t){let r=(0,cU.hrTime)(),n=Array.from(this._sharedState.meterSharedStates.values()).map(s=>s.collect(this,r,t)),i=await Promise.all(n);return{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:i.map(s=>s.scopeMetrics)},errors:(0,lU.FlatMap)(i,s=>s.errors)}}async forceFlush(t){await this._metricReader.forceFlush(t)}async shutdown(t){await this._metricReader.shutdown(t)}selectAggregationTemporality(t){return this._metricReader.selectAggregationTemporality(t)}};Nu.MetricCollector=rh});var ub=l(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.MeterProvider=void 0;var nh=D(),dU=kn(),fU=qi(),pU=ob(),hU=Op(),_U=Ip(),gU=jp(),mU=ab(),EU=Up(),SU=cu();function yU(e){return e.name==null&&e.aggregation==null&&e.attributeKeys==null&&e.description==null}var ih=class{constructor(t){var r;this._shutdown=!1,this._sharedState=new pU.MeterProviderSharedState((r=t?.resource)!==null&&r!==void 0?r:fU.Resource.empty())}getMeter(t,r="",n={}){return this._shutdown?(nh.diag.warn("A shutdown MeterProvider cannot provide a Meter"),dU.NOOP_METER):this._sharedState.getMeterSharedState({name:t,version:r,schemaUrl:n.schemaUrl}).meter}addMetricReader(t){let r=new mU.MetricCollector(this._sharedState,t);t.setMetricProducer(r),this._sharedState.metricCollectors.push(r)}addView(t,r){var n;if(yU(t))throw new Error("Cannot create view with no view arguments supplied");if(t.name!=null&&(((n=r?.instrument)===null||n===void 0?void 0:n.name)==null||SU.PatternPredicate.hasWildcard(r.instrument.name)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");let i;t.attributeKeys!=null&&(i=new EU.FilteringAttributesProcessor(t.attributeKeys));let s=new gU.View({name:t.name,description:t.description,aggregation:t.aggregation,attributesProcessor:i}),o=new hU.InstrumentSelector(r?.instrument),a=new _U.MeterSelector(r?.meter);this._sharedState.viewRegistry.addView(s,o,a)}async shutdown(t){if(this._shutdown){nh.diag.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map(r=>r.shutdown(t)))}async forceFlush(t){if(this._shutdown){nh.diag.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map(r=>r.forceFlush(t)))}};Lu.MeterProvider=ih});var cb=l(fe=>{"use strict";var AU=fe&&fe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),vt=fe&&fe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&AU(t,e,r)};Object.defineProperty(fe,"__esModule",{value:!0});fe.TimeoutError=fe.InstrumentType=void 0;vt(ru(),fe);vt(Zi(),fe);vt(vv(),fe);vt(Tv(),fe);vt(hp(),fe);vt(wv(),fe);var vU=Br();Object.defineProperty(fe,"InstrumentType",{enumerable:!0,get:function(){return vU.InstrumentType}});vt(bp(),fe);vt(ub(),fe);vt(Qp(),fe);var bU=Dt();Object.defineProperty(fe,"TimeoutError",{enumerable:!0,get:function(){return bU.TimeoutError}});vt(Dp(),fe)});var pb=l(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.toMetric=ir.toScopeMetrics=ir.toResourceMetrics=void 0;var lb=kn(),xu=J(),bt=cb(),sh=$a();function TU(e){return{resource:{attributes:(0,sh.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:db(e.scopeMetrics)}}ir.toResourceMetrics=TU;function db(e){return Array.from(e.map(t=>({scope:{name:t.scope.name,version:t.scope.version},metrics:t.metrics.map(n=>fb(n)),schemaUrl:t.scope.schemaUrl})))}ir.toScopeMetrics=db;function fb(e){let t={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},r=wU(e.aggregationTemporality);if(e.dataPointType===bt.DataPointType.SINGULAR){let n=OU(e),i=e.descriptor.type===bt.InstrumentType.COUNTER||e.descriptor.type===bt.InstrumentType.OBSERVABLE_COUNTER;PU(e)?t.sum={aggregationTemporality:r,isMonotonic:i,dataPoints:n}:t.gauge={dataPoints:n}}else IU(e)&&(t.histogram={aggregationTemporality:r,dataPoints:CU(e)});return t}ir.toMetric=fb;function RU(e,t){let r={attributes:(0,sh.toAttributes)(e.attributes),startTimeUnixNano:(0,xu.hrTimeToNanoseconds)(e.startTime),timeUnixNano:(0,xu.hrTimeToNanoseconds)(e.endTime)};return t===lb.ValueType.INT?r.asInt=e.value:t===lb.ValueType.DOUBLE&&(r.asDouble=e.value),r}function OU(e){return e.dataPoints.map(t=>RU(t,e.descriptor.valueType))}function CU(e){return e.dataPoints.map(t=>{let r=t.value;return{attributes:(0,sh.toAttributes)(t.attributes),bucketCounts:r.buckets.counts,explicitBounds:r.buckets.boundaries,count:r.count,sum:r.sum,startTimeUnixNano:(0,xu.hrTimeToNanoseconds)(t.startTime),timeUnixNano:(0,xu.hrTimeToNanoseconds)(t.endTime)}})}function PU(e){return e.descriptor.type===bt.InstrumentType.COUNTER||e.descriptor.type===bt.InstrumentType.UP_DOWN_COUNTER||e.descriptor.type===bt.InstrumentType.OBSERVABLE_COUNTER||e.descriptor.type===bt.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER}function IU(e){return e.dataPointType===bt.DataPointType.HISTOGRAM}function wU(e){return e===bt.AggregationTemporality.DELTA?1:e===bt.AggregationTemporality.CUMULATIVE?2:0}});var hb=l(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.createExportMetricsServiceRequest=void 0;var NU=pb();function LU(e){return{resourceMetrics:e.map(t=>(0,NU.toResourceMetrics)(t))}}Mu.createExportMetricsServiceRequest=LU});var _b=l(Be=>{"use strict";var xU=Be&&Be.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Du=Be&&Be.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&xU(t,e,r)};Object.defineProperty(Be,"__esModule",{value:!0});Be.createExportMetricsServiceRequest=Be.createExportTraceServiceRequest=void 0;Du(J0(),Be);Du(tv(),Be);Du(nv(),Be);Du(iv(),Be);var MU=uv();Object.defineProperty(Be,"createExportTraceServiceRequest",{enumerable:!0,get:function(){return MU.createExportTraceServiceRequest}});var DU=hb();Object.defineProperty(Be,"createExportMetricsServiceRequest",{enumerable:!0,get:function(){return DU.createExportMetricsServiceRequest}})});var mb=l(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.OTLPTraceExporter=void 0;var ri=J(),BU=sp(),gb=sp(),UU=_b(),oh="v1/traces",FU=`http://localhost:4318/${oh}`,ah=class extends BU.OTLPExporterNodeBase{constructor(t={}){super(t),this.headers=Object.assign(this.headers,ri.baggageUtils.parseKeyPairsIntoRecord((0,ri.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS))}convert(t){return(0,UU.createExportTraceServiceRequest)(t,!0)}getDefaultUrl(t){return typeof t.url=="string"?t.url:(0,ri.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,gb.appendRootPathToUrlIfNeeded)((0,ri.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT,oh):(0,ri.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,gb.appendResourcePathToUrl)((0,ri.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,oh):FU}};Bu.OTLPTraceExporter=ah});var Eb=l(Gr=>{"use strict";var jU=Gr&&Gr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),kU=Gr&&Gr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&jU(t,e,r)};Object.defineProperty(Gr,"__esModule",{value:!0});kU(mb(),Gr)});var Sb=l(Hr=>{"use strict";var qU=Hr&&Hr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),GU=Hr&&Hr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qU(t,e,r)};Object.defineProperty(Hr,"__esModule",{value:!0});GU(Eb(),Hr)});var yb=l($r=>{"use strict";var HU=$r&&$r.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$U=$r&&$r.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&HU(t,e,r)};Object.defineProperty($r,"__esModule",{value:!0});$U(Sb(),$r)});var $b=l((Wr,Hb)=>{"use strict";var fh=O("crypto");Wr=Hb.exports=fs;function fs(e,t){return t=qb(e,t),aF(e,t)}Wr.sha1=function(e){return fs(e)};Wr.keys=function(e){return fs(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})};Wr.MD5=function(e){return fs(e,{algorithm:"md5",encoding:"hex"})};Wr.keysMD5=function(e){return fs(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var ci=fh.getHashes?fh.getHashes().slice():["sha1","md5"];ci.push("passthrough");var jb=["buffer","hex","binary","base64"];function qb(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=t.ignoreUnknown===!0,r.respectType=t.respectType!==!1,r.respectFunctionNames=t.respectFunctionNames!==!1,r.respectFunctionProperties=t.respectFunctionProperties!==!1,r.unorderedArrays=t.unorderedArrays===!0,r.unorderedSets=t.unorderedSets!==!1,r.unorderedObjects=t.unorderedObjects!==!1,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,typeof e>"u")throw new Error("Object argument required.");for(var n=0;n<ci.length;++n)ci[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=ci[n]);if(ci.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+ci.join(", "));if(jb.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+jb.join(", "));return r}function kb(e){if(typeof e!="function")return!1;var t=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i;return t.exec(Function.prototype.toString.call(e))!=null}function aF(e,t){var r;t.algorithm!=="passthrough"?r=fh.createHash(t.algorithm):r=new Gb,typeof r.write>"u"&&(r.write=r.update,r.end=r.update);var n=ph(t,r);if(n.dispatch(e),r.update||r.end(""),r.digest)return r.digest(t.encoding==="buffer"?void 0:t.encoding);var i=r.read();return t.encoding==="buffer"?i:i.toString(t.encoding)}Wr.writeToStream=function(e,t,r){return typeof r>"u"&&(r=t,t={}),t=qb(e,t),ph(t,r).dispatch(e)};function ph(e,t,r){r=r||[];var n=function(i){return t.update?t.update(i,"utf8"):t.write(i,"utf8")};return{dispatch:function(i){e.replacer&&(i=e.replacer(i));var s=typeof i;return i===null&&(s="null"),this["_"+s](i)},_object:function(i){var s=/\[object (.*)\]/i,o=Object.prototype.toString.call(i),a=s.exec(o);a?a=a[1]:a="unknown:["+o+"]",a=a.toLowerCase();var u=null;if((u=r.indexOf(i))>=0)return this.dispatch("[CIRCULAR:"+u+"]");if(r.push(i),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(i))return n("buffer:"),n(i);if(a!=="object"&&a!=="function"&&a!=="asyncfunction")if(this["_"+a])this["_"+a](i);else{if(e.ignoreUnknown)return n("["+a+"]");throw new Error('Unknown object type "'+a+'"')}else{var c=Object.keys(i);e.unorderedObjects&&(c=c.sort()),e.respectType!==!1&&!kb(i)&&c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter(function(f){return!e.excludeKeys(f)})),n("object:"+c.length+":");var d=this;return c.forEach(function(f){d.dispatch(f),n(":"),e.excludeValues||d.dispatch(i[f]),n(",")})}},_array:function(i,s){s=typeof s<"u"?s:e.unorderedArrays!==!1;var o=this;if(n("array:"+i.length+":"),!s||i.length<=1)return i.forEach(function(c){return o.dispatch(c)});var a=[],u=i.map(function(c){var d=new Gb,f=r.slice(),p=ph(e,d,f);return p.dispatch(c),a=a.concat(f.slice(r.length)),d.read().toString()});return r=r.concat(a),u.sort(),this._array(u,!1)},_date:function(i){return n("date:"+i.toJSON())},_symbol:function(i){return n("symbol:"+i.toString())},_error:function(i){return n("error:"+i.toString())},_boolean:function(i){return n("bool:"+i.toString())},_string:function(i){n("string:"+i.length+":"),n(i.toString())},_function:function(i){n("fn:"),kb(i)?this.dispatch("[native]"):this.dispatch(i.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),e.respectFunctionProperties&&this._object(i)},_number:function(i){return n("number:"+i.toString())},_xml:function(i){return n("xml:"+i.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(i){return n("regex:"+i.toString())},_uint8array:function(i){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return n("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return n("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return n("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return n("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return n("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return n("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return n("url:"+i.toString(),"utf8")},_map:function(i){n("map:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_set:function(i){n("set:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_file:function(i){return n("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return n("domwindow")},_bigint:function(i){return n("bigint:"+i.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function Gb(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}});var gF={};dT(gF,{default:()=>_F});var _s=O("clipanion");var Gu=O("@yarnpkg/cli"),we=O("@yarnpkg/core"),ae=O("clipanion"),Eh=Q(O("path")),ps=Q(sc()),nT=O("os");var Si=O("@yarnpkg/fslib"),q=Q(O("typanion"));function H_(e){return typeof e>"u"||e===null}function CR(e){return typeof e=="object"&&e!==null}function PR(e){return Array.isArray(e)?e:H_(e)?[]:[e]}function IR(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function wR(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function NR(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var LR=H_,xR=CR,MR=PR,DR=wR,BR=NR,UR=IR,he={isNothing:LR,isObject:xR,toArray:MR,repeat:DR,isNegativeZero:BR,extend:UR};function $_(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function _i(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=$_(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}_i.prototype=Object.create(Error.prototype);_i.prototype.constructor=_i;_i.prototype.toString=function(t){return this.name+": "+$_(this,t)};var Le=_i;function oc(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"\u2192")+o,pos:n-t+s.length}}function ac(e,t){return he.repeat(" ",t-e.length)+e}function FR(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",u,c,d=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+d+3);for(u=1;u<=t.linesBefore&&!(o-u<0);u++)c=oc(e.buffer,n[o-u],i[o-u],e.position-(n[o]-n[o-u]),f),a=he.repeat(" ",t.indent)+ac((e.line-u+1).toString(),d)+" | "+c.str+`
`+a;for(c=oc(e.buffer,n[o],i[o],e.position,f),a+=he.repeat(" ",t.indent)+ac((e.line+1).toString(),d)+" | "+c.str+`
`,a+=he.repeat("-",t.indent+d+3+c.pos)+`^
`,u=1;u<=t.linesAfter&&!(o+u>=i.length);u++)c=oc(e.buffer,n[o+u],i[o+u],e.position-(n[o]-n[o+u]),f),a+=he.repeat(" ",t.indent)+ac((e.line+u+1).toString(),d)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var jR=FR,kR=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],qR=["scalar","sequence","mapping"];function GR(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function HR(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(kR.indexOf(r)===-1)throw new Le('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=GR(t.styleAliases||null),qR.indexOf(this.kind)===-1)throw new Le('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var me=HR;function P_(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function $R(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function cc(e){return this.extend(e)}cc.prototype.extend=function(t){var r=[],n=[];if(t instanceof me)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Le("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof me))throw new Le("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Le("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Le("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof me))throw new Le("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(cc.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=P_(i,"implicit"),i.compiledExplicit=P_(i,"explicit"),i.compiledTypeMap=$R(i.compiledImplicit,i.compiledExplicit),i};var VR=cc,YR=new me("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),WR=new me("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),KR=new me("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),XR=new VR({explicit:[YR,WR,KR]});function zR(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function QR(){return null}function ZR(e){return e===null}var JR=new me("tag:yaml.org,2002:null",{kind:"scalar",resolve:zR,construct:QR,predicate:ZR,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function eO(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function tO(e){return e==="true"||e==="True"||e==="TRUE"}function rO(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var nO=new me("tag:yaml.org,2002:bool",{kind:"scalar",resolve:eO,construct:tO,predicate:rO,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function iO(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function sO(e){return 48<=e&&e<=55}function oO(e){return 48<=e&&e<=57}function aO(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!iO(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!sO(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!oO(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function uO(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function cO(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!he.isNegativeZero(e)}var lO=new me("tag:yaml.org,2002:int",{kind:"scalar",resolve:aO,construct:uO,predicate:cO,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),dO=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function fO(e){return!(e===null||!dO.test(e)||e[e.length-1]==="_")}function pO(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var hO=/^[-+]?[0-9]+e/;function _O(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(he.isNegativeZero(e))return"-0.0";return r=e.toString(10),hO.test(r)?r.replace("e",".e"):r}function gO(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||he.isNegativeZero(e))}var mO=new me("tag:yaml.org,2002:float",{kind:"scalar",resolve:fO,construct:pO,predicate:gO,represent:_O,defaultStyle:"lowercase"}),V_=XR.extend({implicit:[JR,nO,lO,mO]}),EO=V_,Y_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),W_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function SO(e){return e===null?!1:Y_.exec(e)!==null||W_.exec(e)!==null}function yO(e){var t,r,n,i,s,o,a,u=0,c=null,d,f,p;if(t=Y_.exec(e),t===null&&(t=W_.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(d=+t[10],f=+(t[11]||0),c=(d*60+f)*6e4,t[9]==="-"&&(c=-c)),p=new Date(Date.UTC(r,n,i,s,o,a,u)),c&&p.setTime(p.getTime()-c),p}function AO(e){return e.toISOString()}var vO=new me("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:SO,construct:yO,instanceOf:Date,represent:AO});function bO(e){return e==="<<"||e===null}var TO=new me("tag:yaml.org,2002:merge",{kind:"scalar",resolve:bO}),hc=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function RO(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=hc;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function OO(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=hc,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function CO(e){var t="",r=0,n,i,s=e.length,o=hc;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function PO(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var IO=new me("tag:yaml.org,2002:binary",{kind:"scalar",resolve:RO,construct:OO,predicate:PO,represent:CO}),wO=Object.prototype.hasOwnProperty,NO=Object.prototype.toString;function LO(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,NO.call(i)!=="[object Object]")return!1;for(s in i)if(wO.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function xO(e){return e!==null?e:[]}var MO=new me("tag:yaml.org,2002:omap",{kind:"sequence",resolve:LO,construct:xO}),DO=Object.prototype.toString;function BO(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],DO.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function UO(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var FO=new me("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:BO,construct:UO}),jO=Object.prototype.hasOwnProperty;function kO(e){if(e===null)return!0;var t,r=e;for(t in r)if(jO.call(r,t)&&r[t]!==null)return!1;return!0}function qO(e){return e!==null?e:{}}var GO=new me("tag:yaml.org,2002:set",{kind:"mapping",resolve:kO,construct:qO}),K_=EO.extend({implicit:[vO,TO],explicit:[IO,MO,FO,GO]}),kt=Object.prototype.hasOwnProperty,Cs=1,X_=2,z_=3,Ps=4,uc=1,HO=2,I_=3,$O=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,VO=/[\x85\u2028\u2029]/,YO=/[,\[\]\{\}]/,Q_=/^(?:!|!!|![a-z\-]+!)$/i,Z_=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function w_(e){return Object.prototype.toString.call(e)}function at(e){return e===10||e===13}function lr(e){return e===9||e===32}function xe(e){return e===9||e===32||e===10||e===13}function tn(e){return e===44||e===91||e===93||e===123||e===125}function WO(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function KO(e){return e===120?2:e===117?4:e===85?8:0}function XO(e){return 48<=e&&e<=57?e-48:-1}function N_(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function zO(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var J_=new Array(256),eg=new Array(256);for(cr=0;cr<256;cr++)J_[cr]=N_(cr)?1:0,eg[cr]=N_(cr);var cr;function QO(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||K_,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function tg(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=jR(r),new Le(t,r)}function w(e,t){throw tg(e,t)}function Is(e,t){e.onWarning&&e.onWarning.call(null,tg(e,t))}var L_={YAML:function(t,r,n){var i,s,o;t.version!==null&&w(t,"duplication of %YAML directive"),n.length!==1&&w(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&w(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&w(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Is(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&w(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],Q_.test(i)||w(t,"ill-formed tag handle (first argument) of the TAG directive"),kt.call(t.tagMap,i)&&w(t,'there is a previously declared suffix for "'+i+'" tag handle'),Z_.test(s)||w(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{w(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function jt(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||w(e,"expected valid JSON character");else $O.test(a)&&w(e,"the stream contains non-printable characters");e.result+=a}}function x_(e,t,r,n){var i,s,o,a;for(he.isObject(r)||w(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],kt.call(t,s)||(t[s]=r[s],n[s]=!0)}function rn(e,t,r,n,i,s,o,a,u){var c,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,d=i.length;c<d;c+=1)Array.isArray(i[c])&&w(e,"nested arrays are not supported inside keys"),typeof i=="object"&&w_(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&w_(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,d=s.length;c<d;c+=1)x_(e,t,s[c],r);else x_(e,t,s,r);else!e.json&&!kt.call(r,i)&&kt.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,w(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}function _c(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):w(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ue(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;lr(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(at(i))for(_c(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Is(e,"deficient indentation"),n}function Ls(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||xe(r)))}function gc(e,t){t===1?e.result+=" ":t>1&&(e.result+=he.repeat(`
`,t-1))}function ZO(e,t,r){var n,i,s,o,a,u,c,d,f=e.kind,p=e.result,h;if(h=e.input.charCodeAt(e.position),xe(h)||tn(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),xe(i)||r&&tn(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),xe(i)||r&&tn(i))break}else if(h===35){if(n=e.input.charCodeAt(e.position-1),xe(n))break}else{if(e.position===e.lineStart&&Ls(e)||r&&tn(h))break;if(at(h))if(u=e.line,c=e.lineStart,d=e.lineIndent,ue(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=u,e.lineStart=c,e.lineIndent=d;break}}a&&(jt(e,s,o,!1),gc(e,e.line-u),s=o=e.position,a=!1),lr(h)||(o=e.position+1),h=e.input.charCodeAt(++e.position)}return jt(e,s,o,!1),e.result?!0:(e.kind=f,e.result=p,!1)}function JO(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(jt(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else at(r)?(jt(e,n,i,!0),gc(e,ue(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Ls(e)?w(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);w(e,"unexpected end of the stream within a single quoted scalar")}function eC(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return jt(e,r,e.position,!0),e.position++,!0;if(a===92){if(jt(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),at(a))ue(e,!1,t);else if(a<256&&J_[a])e.result+=eg[a],e.position++;else if((o=KO(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=WO(a))>=0?s=(s<<4)+o:w(e,"expected hexadecimal character");e.result+=zO(s),e.position++}else w(e,"unknown escape sequence");r=n=e.position}else at(a)?(jt(e,r,n,!0),gc(e,ue(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Ls(e)?w(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}w(e,"unexpected end of the stream within a double quoted scalar")}function tC(e,t){var r=!0,n,i,s,o=e.tag,a,u=e.anchor,c,d,f,p,h,g=Object.create(null),_,v,A,y;if(y=e.input.charCodeAt(e.position),y===91)d=93,h=!1,a=[];else if(y===123)d=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),y=e.input.charCodeAt(++e.position);y!==0;){if(ue(e,!0,t),y=e.input.charCodeAt(e.position),y===d)return e.position++,e.tag=o,e.anchor=u,e.kind=h?"mapping":"sequence",e.result=a,!0;r?y===44&&w(e,"expected the node content, but found ','"):w(e,"missed comma between flow collection entries"),v=_=A=null,f=p=!1,y===63&&(c=e.input.charCodeAt(e.position+1),xe(c)&&(f=p=!0,e.position++,ue(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,nn(e,t,Cs,!1,!0),v=e.tag,_=e.result,ue(e,!0,t),y=e.input.charCodeAt(e.position),(p||e.line===n)&&y===58&&(f=!0,y=e.input.charCodeAt(++e.position),ue(e,!0,t),nn(e,t,Cs,!1,!0),A=e.result),h?rn(e,a,g,v,_,A,n,i,s):f?a.push(rn(e,null,g,v,_,A,n,i,s)):a.push(_),ue(e,!0,t),y=e.input.charCodeAt(e.position),y===44?(r=!0,y=e.input.charCodeAt(++e.position)):r=!1}w(e,"unexpected end of the stream within a flow collection")}function rC(e,t){var r,n,i=uc,s=!1,o=!1,a=t,u=0,c=!1,d,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)uc===i?i=f===43?I_:HO:w(e,"repeat of a chomping mode identifier");else if((d=XO(f))>=0)d===0?w(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?w(e,"repeat of an indentation width identifier"):(a=t+d-1,o=!0);else break;if(lr(f)){do f=e.input.charCodeAt(++e.position);while(lr(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!at(f)&&f!==0)}for(;f!==0;){for(_c(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),at(f)){u++;continue}if(e.lineIndent<a){i===I_?e.result+=he.repeat(`
`,s?1+u:u):i===uc&&s&&(e.result+=`
`);break}for(n?lr(f)?(c=!0,e.result+=he.repeat(`
`,s?1+u:u)):c?(c=!1,e.result+=he.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=he.repeat(`
`,u):e.result+=he.repeat(`
`,s?1+u:u),s=!0,o=!0,u=0,r=e.position;!at(f)&&f!==0;)f=e.input.charCodeAt(++e.position);jt(e,r,e.position,!1)}return!0}function M_(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,w(e,"tab characters must not be used in indentation")),!(u!==45||(o=e.input.charCodeAt(e.position+1),!xe(o))));){if(a=!0,e.position++,ue(e,!0,-1)&&e.lineIndent<=t){s.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,nn(e,t,z_,!1,!0),s.push(e.result),ue(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&u!==0)w(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function nC(e,t,r){var n,i,s,o,a,u,c=e.tag,d=e.anchor,f={},p=Object.create(null),h=null,g=null,_=null,v=!1,A=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),y=e.input.charCodeAt(e.position);y!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,w(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(y===63||y===58)&&xe(n))y===63?(v&&(rn(e,f,p,h,g,null,o,a,u),h=g=_=null),A=!0,v=!0,i=!0):v?(v=!1,i=!0):w(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=n;else{if(o=e.line,a=e.lineStart,u=e.position,!nn(e,r,X_,!1,!0))break;if(e.line===s){for(y=e.input.charCodeAt(e.position);lr(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),xe(y)||w(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(rn(e,f,p,h,g,null,o,a,u),h=g=_=null),A=!0,v=!1,i=!1,h=e.tag,g=e.result;else if(A)w(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=d,!0}else if(A)w(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=d,!0}if((e.line===s||e.lineIndent>t)&&(v&&(o=e.line,a=e.lineStart,u=e.position),nn(e,t,Ps,!0,i)&&(v?g=e.result:_=e.result),v||(rn(e,f,p,h,g,_,o,a,u),h=g=_=null),ue(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&y!==0)w(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&rn(e,f,p,h,g,null,o,a,u),A&&(e.tag=c,e.anchor=d,e.kind="mapping",e.result=f),A}function iC(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&w(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):w(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!xe(o);)o===33&&(n?w(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Q_.test(i)||w(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),YO.test(s)&&w(e,"tag suffix cannot contain flow indicator characters")}s&&!Z_.test(s)&&w(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{w(e,"tag name is malformed: "+s)}return r?e.tag=s:kt.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:w(e,'undeclared tag handle "'+i+'"'),!0}function sC(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&w(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!xe(r)&&!tn(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&w(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function oC(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!xe(n)&&!tn(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&w(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),kt.call(e.anchorMap,r)||w(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],ue(e,!0,-1),!0}function nn(e,t,r,n,i){var s,o,a,u=1,c=!1,d=!1,f,p,h,g,_,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=Ps===r||z_===r,n&&ue(e,!0,-1)&&(c=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;iC(e)||sC(e);)ue(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||Ps===r)&&(Cs===r||X_===r?_=t:_=t+1,v=e.position-e.lineStart,u===1?a&&(M_(e,v)||nC(e,v,_))||tC(e,_)?d=!0:(o&&rC(e,_)||JO(e,_)||eC(e,_)?d=!0:oC(e)?(d=!0,(e.tag!==null||e.anchor!==null)&&w(e,"alias node should not have any properties")):ZO(e,_,Cs===r)&&(d=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(d=a&&M_(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&w(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,p=e.implicitTypes.length;f<p;f+=1)if(g=e.implicitTypes[f],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(kt.call(e.typeMap[e.kind||"fallback"],e.tag))g=e.typeMap[e.kind||"fallback"][e.tag];else for(g=null,h=e.typeMap.multi[e.kind||"fallback"],f=0,p=h.length;f<p;f+=1)if(e.tag.slice(0,h[f].tag.length)===h[f].tag){g=h[f];break}g||w(e,"unknown tag !<"+e.tag+">"),e.result!==null&&g.kind!==e.kind&&w(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result,e.tag)?(e.result=g.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):w(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||d}function aC(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(ue(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!xe(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&w(e,"directive name must not be less than one character in length");o!==0;){for(;lr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!at(o));break}if(at(o))break;for(r=e.position;o!==0&&!xe(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&_c(e),kt.call(L_,n)?L_[n](e,n,i):Is(e,'unknown document directive "'+n+'"')}if(ue(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ue(e,!0,-1)):s&&w(e,"directives end mark is expected"),nn(e,e.lineIndent-1,Ps,!1,!0),ue(e,!0,-1),e.checkLineBreaks&&VO.test(e.input.slice(t,e.position))&&Is(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ls(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ue(e,!0,-1));return}if(e.position<e.length-1)w(e,"end of the stream or a document separator is expected");else return}function rg(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new QO(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,w(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)aC(r);return r.documents}function uC(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=rg(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function cC(e,t){var r=rg(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Le("expected a single document in the stream, but found more")}}var lC=uC,dC=cC,ng={loadAll:lC,load:dC},ig=Object.prototype.toString,sg=Object.prototype.hasOwnProperty,mc=65279,fC=9,gi=10,pC=13,hC=32,_C=33,gC=34,lc=35,mC=37,EC=38,SC=39,yC=42,og=44,AC=45,ws=58,vC=61,bC=62,TC=63,RC=64,ag=91,ug=93,OC=96,cg=123,CC=124,lg=125,Ee={};Ee[0]="\\0";Ee[7]="\\a";Ee[8]="\\b";Ee[9]="\\t";Ee[10]="\\n";Ee[11]="\\v";Ee[12]="\\f";Ee[13]="\\r";Ee[27]="\\e";Ee[34]='\\"';Ee[92]="\\\\";Ee[133]="\\N";Ee[160]="\\_";Ee[8232]="\\L";Ee[8233]="\\P";var PC=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],IC=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function wC(e,t){var r,n,i,s,o,a,u;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),u=e.compiledTypeMap.fallback[o],u&&sg.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[o]=a;return r}function NC(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Le("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+he.repeat("0",n-t.length)+t}var LC=1,mi=2;function xC(e){this.schema=e.schema||K_,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=he.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=wC(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?mi:LC,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function D_(e,t){for(var r=he.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function dc(e,t){return`
`+he.repeat(" ",e.indent*t)}function MC(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Ns(e){return e===hC||e===fC}function Ei(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==mc||65536<=e&&e<=1114111}function B_(e){return Ei(e)&&e!==mc&&e!==pC&&e!==gi}function U_(e,t,r){var n=B_(e),i=n&&!Ns(e);return(r?n:n&&e!==og&&e!==ag&&e!==ug&&e!==cg&&e!==lg)&&e!==lc&&!(t===ws&&!i)||B_(t)&&!Ns(t)&&e===lc||t===ws&&i}function DC(e){return Ei(e)&&e!==mc&&!Ns(e)&&e!==AC&&e!==TC&&e!==ws&&e!==og&&e!==ag&&e!==ug&&e!==cg&&e!==lg&&e!==lc&&e!==EC&&e!==yC&&e!==_C&&e!==CC&&e!==vC&&e!==bC&&e!==SC&&e!==gC&&e!==mC&&e!==RC&&e!==OC}function BC(e){return!Ns(e)&&e!==ws}function hi(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function dg(e){var t=/^\n* /;return t.test(e)}var fg=1,fc=2,pg=3,hg=4,en=5;function UC(e,t,r,n,i,s,o,a){var u,c=0,d=null,f=!1,p=!1,h=n!==-1,g=-1,_=DC(hi(e,0))&&BC(hi(e,e.length-1));if(t||o)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=hi(e,u),!Ei(c))return en;_=_&&U_(c,d,a),d=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=hi(e,u),c===gi)f=!0,h&&(p=p||u-g-1>n&&e[g+1]!==" ",g=u);else if(!Ei(c))return en;_=_&&U_(c,d,a),d=c}p=p||h&&u-g-1>n&&e[g+1]!==" "}return!f&&!p?_&&!o&&!i(e)?fg:s===mi?en:fc:r>9&&dg(e)?en:o?s===mi?en:fc:p?hg:pg}function FC(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===mi?'""':"''";if(!e.noCompatMode&&(PC.indexOf(t)!==-1||IC.test(t)))return e.quotingType===mi?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function u(c){return MC(e,c)}switch(UC(t,a,e.indent,o,u,e.quotingType,e.forceQuotes&&!n,i)){case fg:return t;case fc:return"'"+t.replace(/'/g,"''")+"'";case pg:return"|"+F_(t,e.indent)+j_(D_(t,s));case hg:return">"+F_(t,e.indent)+j_(D_(jC(t,o),s));case en:return'"'+kC(t)+'"';default:throw new Le("impossible error: invalid scalar style")}}()}function F_(e,t){var r=dg(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function j_(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function jC(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,k_(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],u=o[2];s=u[0]===" ",n+=a+(!i&&!s&&u!==""?`
`:"")+k_(u,t),i=s}return n}function k_(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,u="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,u+=`
`+e.slice(i,s),i=s+1),o=a;return u+=`
`,e.length-i>t&&o>i?u+=e.slice(i,o)+`
`+e.slice(o+1):u+=e.slice(i),u.slice(1)}function kC(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=hi(e,i),n=Ee[r],!n&&Ei(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||NC(r);return t}function qC(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(Rt(e,t,a,!1,!1)||typeof a>"u"&&Rt(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function q_(e,t,r,n){var i="",s=e.tag,o,a,u;for(o=0,a=r.length;o<a;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(Rt(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&Rt(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=dc(e,t)),e.dump&&gi===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function GC(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,u,c,d;for(o=0,a=s.length;o<a;o+=1)d="",n!==""&&(d+=", "),e.condenseFlow&&(d+='"'),u=s[o],c=r[u],e.replacer&&(c=e.replacer.call(r,u,c)),Rt(e,t,u,!1,!1)&&(e.dump.length>1024&&(d+="? "),d+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Rt(e,t,c,!1,!1)&&(d+=e.dump,n+=d));e.tag=i,e.dump="{"+n+"}"}function HC(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,u,c,d,f,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Le("sortKeys must be a boolean or a function");for(a=0,u=o.length;a<u;a+=1)p="",(!n||i!=="")&&(p+=dc(e,t)),c=o[a],d=r[c],e.replacer&&(d=e.replacer.call(r,c,d)),Rt(e,t+1,c,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&gi===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,f&&(p+=dc(e,t)),Rt(e,t+1,d,!0,f)&&(e.dump&&gi===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=s,e.dump=i||"{}"}function G_(e,t,r){var n,i,s,o,a,u;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,ig.call(a.represent)==="[object Function]")n=a.represent(t,u);else if(sg.call(a.represent,u))n=a.represent[u](t,u);else throw new Le("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function Rt(e,t,r,n,i,s,o){e.tag=null,e.dump=r,G_(e,r,!1)||G_(e,r,!0);var a=ig.call(e.dump),u=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var d=a==="[object Object]"||a==="[object Array]",f,p;if(d&&(f=e.duplicates.indexOf(r),p=f!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(i=!1),p&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(d&&p&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(HC(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(GC(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?q_(e,t-1,e.dump,i):q_(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(qC(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&FC(e,e.dump,t,s,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Le("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function $C(e,t){var r=[],n=[],i,s;for(pc(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function pc(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)pc(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)pc(e[n[i]],t,r)}function VC(e,t){t=t||{};var r=new xC(t);r.noRefs||$C(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Rt(r,0,n,!0,!0)?r.dump+`
`:""}var YC=VC,WC={dump:YC};function Ec(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var _g=V_;var gg=ng.load,DF=ng.loadAll,BF=WC.dump;var UF=Ec("safeLoad","load"),FF=Ec("safeLoadAll","loadAll"),jF=Ec("safeDump","dump");var KC=".yarnbuildrc.yml",XC=".bundleignore",zC=q.isObject({folders:q.isObject({input:q.isOneOf([q.isString(),q.isArray(q.isString())]),output:q.isNullable(q.isOneOf([q.isString(),q.isArray(q.isString())]))}),exclude:q.isArray(q.isString()),bail:q.isBoolean(),hideYarnBuildBadge:q.isBoolean(),ignoreFile:q.isString()}),QC=q.isObject({input:q.isOptional(q.isOneOf([q.isString(),q.isArray(q.isString())])),output:q.isOptional(q.isNullable(q.isOneOf([q.isString(),q.isArray(q.isString())]))),tsconfig:q.isOptional(q.isString())}),Sc={folders:{input:".",output:null},exclude:[],bail:!0,hideYarnBuildBadge:!1,ignoreFile:XC};async function ZC(e){let t=KC,r=Si.ppath.join(e.projectCwd||e.startingCwd,t);if(Si.xfs.existsSync(r)){let n=await Si.xfs.readFilePromise(r,"utf8"),i=[];try{let s=gg(n,{schema:_g});if(zC(s,{errors:i}))return s;console.warn(i)}catch{let o="";throw n.match(/^\s+(?!-)[^:]+\s+\S+/m)&&(o=" (config is corrupted, please check it matches the shape in the yarn.build readme."),new Error(`Parse error when loading ${r}; please check it's proper Yaml${o}`)}}return Sc}async function mg(e){let t=await ZC(e);return{...Sc,...t,folders:{...Sc.folders,...t.folders??{}}}}function Eg(e){let t={...e["yarn.build"]};return QC(t)?t:{}}var B=O("@yarnpkg/core"),Ue=Q(Tg()),Vb=O("os"),$=O("@yarnpkg/fslib");var gh=Q(xE()),Yb=O("events"),Wb=Q(HE()),Kb=Q(WE()),hh=Q(KE()),ku=Q(dd()),qu=Q(AS());var K={PACKAGE_NAME:"package.name",PACKAGE_SCOPE:"package.scope",PACKAGE_DIRECTORY:"package.directory",PACKAGE_COMMAND:"package.command",GIT_BRANCH:"git.branch",GIT_COMMIT:"git.commit",YARN_BUILD_MESSAGE_CODE:"yarn.build.message.code",YARN_BUILD_CONFIG_FOLDERS_INPUT:"yarn.build.config.folders.input",YARN_BUILD_CONFIG_FOLDERS_OUTPUT:"yarn.build.config.folders.output",YARN_BUILD_CONFIG_EXCLUDE:"yarn.build.config.exclude",YARN_BUILD_CONFIG_BAIL:"yarn.build.config.bail",YARN_BUILD_CONFIG_HIDE_BADGE:"yarn.build.config.hide-badge",YARN_BUILD_CONFIG_MAX_CONCURRENCY:"yarn.build.config.max-concurrency",YARN_BUILD_FLAGS_OUTPUT_JSON:"yarn.build.flags.output.json",YARN_BUILD_FLAGS_ALL:"yarn.build.flags.all",YARN_BUILD_FLAGS_TARGETS:"yarn.build.flags.targets",YARN_BUILD_FLAGS_COMMAND:"yarn.build.flags.command",YARN_BUILD_FLAGS_INTERLACED:"yarn.build.flags.interlaced",YARN_BUILD_FLAGS_VERBOSE:"yarn.build.flags.verbose",YARN_BUILD_FLAGS_DRY_RUN:"yarn.build.flags.dry-run",YARN_BUILD_FLAGS_IGNORE_CACHE:"yarn.build.flags.ignore-cache",YARN_BUILD_FLAGS_MAX_CONCURRENCY:"yarn.build.flags.max-concurrency",YARN_BUILD_FLAGS_CONTINUE_ON_ERROR:"yarn.build.flags.continue-on-error",YARN_BUILD_FLAGS_EXCLUDE:"yarn.build.flags.exclude",YARN_BUILD_FLAGS_EXCLUDE_CURRENT:"yarn.build.flags.exclude.current",YARN_BUILD_FLAGS_CHANGES:"yarn.build.flags.changes",YARN_BUILD_FLAGS_SINCE:"yarn.build.flags.since",YARN_BUILD_FLAGS_SINCE_BRANCH:"yarn.build.flags.since-branch",YARN_BUILD_FLAGS_ONLY_CURRENT:"yarn.build.flags.only-current",YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES:"yarn.build.flags.ignore-dependencies",YARN_BUILD_FLAGS_BUNDLE_QUIET:"yarn.build.flags.bundle.quiet",YARN_BUILD_FLAGS_BUNDLE_TEMPORARY_DIRECTORY:"yarn.build.flags.bundle.temporary-directory",YARN_BUILD_FLAGS_BUNDLE_OUTPUT_DIRECTORY:"yarn.build.flags.bundle.output-directory",YARN_BUILD_FLAGS_BUNDLE_NO_COMPRESS:"yarn.build.flags.bundle.no-compress",YARN_BUILD_FLAGS_BUNDLE_ARCHIVE_NAME:"yarn.build.flags.bundle.archive-name",YARN_BUILD_FLAGS_BUNDLE_EXCLUDE:"yarn.build.flags.bundle.exclude",YARN_BUILD_FLAGS_BUNDLE_IGNORE_FILE:"yarn.build.flags.bundle.ignore-file",YARN_BUILD_PACKAGE_NEEDS_RUN:"yarn.build.package.needs-run",YARN_BUILD_PACKAGE_RUN_COMMAND:"yarn.build.package.run.command",YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT:"yarn.build.package.run.command.exit"};var Pb=Q(D());var Ob=Q(D()),Cb=Q(Hd());var Ab=Q(Na()),vb=Q(qi()),bb=Q(gt()),Tb=Q(yb()),Rb=Q(Na()),ni=Q(D());process.env.DEBUG&&ni.diag.setLogger(new ni.DiagConsoleLogger,ni.DiagLogLevel.DEBUG);var us=class{static getInstance(){return this._instance||(this._instance=new this().start())}static provider(){return this._instance||(this._instance=new this().start())}start(){let t=new Tb.OTLPTraceExporter,r=new Ab.BasicTracerProvider({resource:new vb.Resource({[bb.SemanticResourceAttributes.SERVICE_NAME]:"yarn.build"})});r.addSpanProcessor(new Rb.BatchSpanProcessor(t));async function n(i){try{await r.shutdown(),process.env.DEBUG&&console.info("gracefullty exited trace provider")}finally{process.exit(isNaN(+i)?1:+i)}}return["beforeExit","exit","uncaughtException","unhandledRejection","SIGHUP","SIGINT","SIGQUIT","SIGILL","SIGTRAP","SIGABRT","SIGBUS","SIGFPE","SIGUSR1","SIGSEGV","SIGUSR2","SIGTERM"].forEach(i=>process.on(i,n)),r}};var Vr=Q(D()),Ut=class{constructor(t){this.name=t,this._tracer=us.getInstance().getTracer(t)}recordException(t,r){(typeof typeof r=="string"||r instanceof Error)&&(t.recordException(r),t.setStatus({code:Ob.SpanStatusCode.ERROR,message:r instanceof Error?r.message:r}))}async startSpan(t,r){let n;if(typeof t.ctx>"u"?n=Vr.context.active():n=t.ctx,!!t.propegateFromEnv||t?.spanOptions?.kind==4){let o=process.env.TRACEPARENT;if(typeof o=="string"){let a=(0,Cb.parseTraceParent)(o??"");a&&(n=Vr.trace.setSpanContext(Vr.context.active(),a))}}let i=this._tracer.startSpan(t.name,t.spanOptions,n),s=Vr.trace.setSpan(n,i);try{return r.constructor.name==="AsyncFunction"?await r({span:i,ctx:s}):r({span:i,ctx:s})}catch(o){if((typeof o=="string"||o instanceof Error)&&this.recordException(i,o),!t.supressExceptions)throw o}finally{i.end()}throw new Error("Unknown error")}async wrap(t,r,...n){let i;return typeof t.ctx>"u"?i=Vr.context.active():i=t.ctx,await(async()=>await this.startSpan({name:t.name,ctx:i},async()=>await r(...n)))()}};var si=class{constructor(){this.tracer=new Ut("yarn.build");this.nodes={};this.size=0;this.runSize=0;this.ran=new Set;this.dryRunCallback=()=>{}}addNode(t){if(this.nodes[t])return this.nodes[t];let r=new Yr(t);return this.nodes[t]=r,this.size=Object.keys(this.nodes).length,this.checkCyclical(r),r}addRunCallback(t,r){let n=t;this.nodes[t.id]||(n=this.addNode(t.id)),n.runCallback||(n.addRunCallback(r),this.runSize++)}getNode(t){if(this.nodes[t])return this.nodes[t]}resetRuns(){this.ran=new Set}checkCyclical(t){let r=new Set,n=new Set;this.resolveNode(t,r,n)}resolveNode(t,r,n){n.add(t.id),Object.keys(t.dependencies).forEach(i=>{let s=t.dependencies[i];if(!r.has(s.id)){if(n.has(s.id))throw new cs(t.id,s.id);this.resolveNode(s,r,n)}}),r.add(t.id),n.delete(t.id)}async run(t,r,n=!1){return await this.tracer.startSpan({name:"run commands",ctx:t},async({ctx:i})=>{let s=new Set,o=new Set,a={};for(let u of r)this.resolveQueue(u,s,a);return n?(await this.dryRunLoop(s,a,o,0),a):(await new Promise(u=>{this.workLoop(i,s,a,o,u)}),a)})}async dryRunLoop(t,r,n,i=0){if(n.forEach((s,o)=>{this.dryRunCallback(s,i-1),r[s.id]={success:!0,done:!0},n.delete(o)}),t.size!==0&&t.forEach(s=>{s.canStart(r)&&s?.node?.runCallback&&(n.add(s.node),t.delete(s))}),n.size!=0)return await this.dryRunLoop(t,r,n,i+1)}workLoop(t,r,n,i,s){if(r.size!==0&&r.forEach(o=>{o.canStart(n)&&(o?.node?.runCallback?(o?.node?.runCallback(t,n),i.add(o.node)):n[o.node.id]={success:!0,done:!0},r.delete(o))}),i.forEach((o,a)=>{n[o.id].done&&i.delete(a)}),Object.keys(n).map(o=>n[o]?.done??!0).every(o=>o===!0)){s();return}setTimeout(()=>this.workLoop(t,r,n,i,s),30)}resolveQueue(t,r,n){let i=[];if(Object.keys(t.dependencies).forEach(s=>{let o=t.dependencies[s];if(i.push(o.id),!n[o.id]&&o.runCallback){n[o.id]={...si.RunLogInit};let a=this.resolveQueue(o,r,n),u={node:o,canStart:si.QueueItemCanStart(a)};r.add(u)}}),!n[t.id]&&t.runCallback){n[t.id]={...si.RunLogInit};let s={node:t,canStart:si.QueueItemCanStart(i)};r.add(s)}return i}},ii=si;ii.RunLogInit={success:!1,done:!1},ii.QueueItemCanStart=t=>r=>t.map(n=>r[n]?.done??!0).every(n=>n===!0);var Yr=class{constructor(t){this.cancelled=!1;this.skip=!1;this.id=t,this.dependencies={}}addDependency(t){return this.dependencies[t.id]||(this.dependencies[t.id]=t),this}addRunCallback(t){return this.runCallback?this:(this.runCallback=(r,n)=>{if(!this.cancelled)return t(r,Yr.cancelDependentJobs(this)).then(i=>{n[this.id]={done:!0,success:i}})},this)}static cancelDependentJobs(t){return()=>{typeof t.dependencies>"u"||Object.keys(t.dependencies).forEach(r=>{let n=t.dependencies[r];n.cancelled=!0})}}},cs=class extends Error{constructor(r,n){super("");this.name="CyclicDependencyError",this.code="YN0003",this.node=r,this.dep=n}};var Ib=Q(dd()),VU="\x1B",$e=VU+"[",uh=class{static pad(t=1){for(let r=0;r<t;r++)process.stdout.write(`
`);uh.cursorUp(t)}static cursorUp(t=1){process.stdout.write($e+`${t}A`)}static cursorSave(){process.stdout.write($e+"s")}static cursorRestore(){process.stdout.write($e+"u")}static autoWrap(t){t?process.stdout.write($e+"?7h"):process.stdout.write($e+"?7l")}static clearScreenDown(){process.stdout.write($e+"J")}static async cursorPositionReport(){return new Promise(t=>{process.stdin.setRawMode(!0),process.stdin.once("data",r=>{process.stdin.setRawMode(!1),process.stdin.pause();let[n,i]=r.slice(2,r.length-1).toString().split(";").map(Number);t({x:i,y:n})}),process.stdout.write($e+"6n")})}static setScrollableRegion(t,r){process.stdout.write($e+`${t};${r}r`)}static resetScrollableRegion(){process.stdout.write($e+"r")}static moveTo(t){process.stdout.write($e+`${t.y};${t.x}H`)}static cursorHome(){process.stdout.write($e+"H")}static alternateScreen(){process.stdout.write($e+"?1049h")}static mainScreen(){process.stdout.write($e+"?1049l")}static linesRequired(t,r){let n=new RegExp(`([^
]{0,${r}})(
)?`,"gm");return((0,Ib.default)(t).match(n)??[""]).length-1}},Ze=uh;Ze.row=0,Ze.column=0;var Nb=O("child_process"),Lb=O("util");var wb=()=>process.platform==="win32"?"windows":"unix";var YU=(0,Lb.promisify)(Nb.exec),xb=async e=>{let t=wb(),r=(({platform:i,pid:s})=>{switch(i){case"unix":return`pgrep "-P ${s}"`;case"windows":return`wmic process where (ParentProcessId=${s}) get ProcessId`;default:throw new Error("Unable to find parent process")}})({platform:t,pid:e}),n=[];try{let{stdout:i}=await YU(r);n=i.split(`
`).filter(Boolean).map(s=>parseInt(s,10)).filter(s=>!isNaN(s))}catch{}return n};var oi={hasBeenTerminated:!1,callId:0},Uu=async(e=0)=>{if(e!==oi.callId||oi.hasBeenTerminated)return;let t=process.pid;(await xb(t)).forEach(i=>{try{process.kill(i,"SIGKILL")}catch{}});let n=oi.callId+1;oi.callId=n,setTimeout(async()=>{Uu(n)},50)};var Xb=Q(D());var ie=Q(O("path"),1),sr=Q(O("fs"),1),Fb=Q(O("module"),1);function Fu(e){let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}function Mb(e,t){for(;;){let r=ie.default.join(e,t);if(sr.default.existsSync(r))return Fu(r);let n=ie.default.dirname(e);if(n===e)return;e=n}}function WU(e,t){t===void 0&&(t=!1);var r=e.length,n=0,i="",s=0,o=16,a=0,u=0,c=0,d=0,f=0;function p(b,z){for(var N=0,U=0;N<b||!z;){var P=e.charCodeAt(n);if(P>=48&&P<=57)U=U*16+P-48;else if(P>=65&&P<=70)U=U*16+P-65+10;else if(P>=97&&P<=102)U=U*16+P-97+10;else break;n++,N++}return N<b&&(U=-1),U}function h(b){n=b,i="",s=0,o=16,f=0}function g(){var b=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&ai(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&ai(e.charCodeAt(n)))for(n++;n<e.length&&ai(e.charCodeAt(n));)n++;else return f=3,e.substring(b,n);var z=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&ai(e.charCodeAt(n))){for(n++;n<e.length&&ai(e.charCodeAt(n));)n++;z=n}else f=3;return e.substring(b,z)}function _(){for(var b="",z=n;;){if(n>=r){b+=e.substring(z,n),f=2;break}var N=e.charCodeAt(n);if(N===34){b+=e.substring(z,n),n++;break}if(N===92){if(b+=e.substring(z,n),n++,n>=r){f=2;break}var U=e.charCodeAt(n++);switch(U){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:var P=p(4,!0);P>=0?b+=String.fromCharCode(P):f=4;break;default:f=5}z=n;continue}if(N>=0&&N<=31)if(ls(N)){b+=e.substring(z,n),f=2;break}else f=6;n++}return b}function v(){if(i="",f=0,s=n,u=a,d=c,n>=r)return s=r,o=17;var b=e.charCodeAt(n);if(ch(b)){do n++,i+=String.fromCharCode(b),b=e.charCodeAt(n);while(ch(b));return o=15}if(ls(b))return n++,i+=String.fromCharCode(b),b===13&&e.charCodeAt(n)===10&&(n++,i+=`
`),a++,c=n,o=14;switch(b){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,i=_(),o=10;case 47:var z=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<r&&!ls(e.charCodeAt(n));)n++;return i=e.substring(z,n),o=12}if(e.charCodeAt(n+1)===42){n+=2;for(var N=r-1,U=!1;n<N;){var P=e.charCodeAt(n);if(P===42&&e.charCodeAt(n+1)===47){n+=2,U=!0;break}n++,ls(P)&&(P===13&&e.charCodeAt(n)===10&&n++,a++,c=n)}return U||(n++,f=1),i=e.substring(z,n),o=13}return i+=String.fromCharCode(b),n++,o=16;case 45:if(i+=String.fromCharCode(b),n++,n===r||!ai(e.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=g(),o=11;default:for(;n<r&&A(b);)n++,b=e.charCodeAt(n);if(s!==n){switch(i=e.substring(s,n),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(b),n++,o=16}}function A(b){if(ch(b)||ls(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){var b;do b=v();while(b>=12&&b<=15);return b}return{setPosition:h,getPosition:function(){return n},scan:t?y:v,getToken:function(){return o},getTokenValue:function(){return i},getTokenOffset:function(){return s},getTokenLength:function(){return n-s},getTokenStartLine:function(){return u},getTokenStartCharacter:function(){return s-d},getTokenError:function(){return f}}}function ch(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function ls(e){return e===10||e===13||e===8232||e===8233}function ai(e){return e>=48&&e<=57}var ju;(function(e){e.DEFAULT={allowTrailingComma:!1}})(ju||(ju={}));function KU(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=ju.DEFAULT);var n=null,i=[],s=[];function o(u){Array.isArray(i)?i.push(u):n!==null&&(i[n]=u)}var a={onObjectBegin:function(){var u={};o(u),s.push(i),i=u,n=null},onObjectProperty:function(u){n=u},onObjectEnd:function(){i=s.pop()},onArrayBegin:function(){var u=[];o(u),s.push(i),i=u,n=null},onArrayEnd:function(){i=s.pop()},onLiteralValue:o,onError:function(u,c,d){t.push({error:u,offset:c,length:d})}};return XU(e,a,r),i[0]}function XU(e,t,r){r===void 0&&(r=ju.DEFAULT);var n=WU(e,!1);function i(L){return L?function(){return L(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function s(L){return L?function(V){return L(V,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var o=i(t.onObjectBegin),a=s(t.onObjectProperty),u=i(t.onObjectEnd),c=i(t.onArrayBegin),d=i(t.onArrayEnd),f=s(t.onLiteralValue),p=s(t.onSeparator),h=i(t.onComment),g=s(t.onError),_=r&&r.disallowComments,v=r&&r.allowTrailingComma;function A(){for(;;){var L=n.scan();switch(n.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:_||y(11);break;case 2:y(12);break;case 6:y(16);break}switch(L){case 12:case 13:_?y(10):h();break;case 16:y(1);break;case 15:case 14:break;default:return L}}}function y(L,V,m){if(V===void 0&&(V=[]),m===void 0&&(m=[]),g(L),V.length+m.length>0)for(var G=n.getToken();G!==17;){if(V.indexOf(G)!==-1){A();break}else if(m.indexOf(G)!==-1)break;G=A()}}function b(L){var V=n.getTokenValue();return L?f(V):a(V),A(),!0}function z(){switch(n.getToken()){case 11:var L=n.getTokenValue(),V=Number(L);isNaN(V)&&(y(2),V=0),f(V);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return A(),!0}function N(){return n.getToken()!==10?(y(3,[],[2,5]),!1):(b(!1),n.getToken()===6?(p(":"),A(),x()||y(4,[],[2,5])):y(5,[],[2,5]),!0)}function U(){o(),A();for(var L=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(L||y(4,[],[]),p(","),A(),n.getToken()===2&&v)break}else L&&y(6,[],[]);N()||y(4,[],[2,5]),L=!0}return u(),n.getToken()!==2?y(7,[2],[]):A(),!0}function P(){c(),A();for(var L=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(L||y(4,[],[]),p(","),A(),n.getToken()===4&&v)break}else L&&y(6,[],[]);x()||y(4,[],[4,5]),L=!0}return d(),n.getToken()!==4?y(8,[4],[]):A(),!0}function x(){switch(n.getToken()){case 3:return P();case 1:return U();case 10:return b(!0);default:return z()}}return A(),n.getToken()===17?r.allowEmptyContent?!0:(y(4,[],[]),!1):x()?(n.getToken()!==17&&y(9,[],[]),!0):(y(4,[],[]),!1)}var zU=KU,QU=/^\.{1,2}(\/.*)?$/,lh=e=>Fu(QU.test(e)?e:`./${e}`),{existsSync:ds}=sr.default,ZU=e=>{try{return JSON.parse(e)}catch{}},JU=()=>{let{findPnpApi:e}=Fb.default;return e&&e(process.cwd())};function Db(e){let t=ZU(sr.default.readFileSync(e,"utf8"));return ie.default.join(e,"..",t&&"tsconfig"in t?t.tsconfig:"tsconfig.json")}function eF(e,t){let r=e;if(r===".."&&(r+="/tsconfig.json"),r.startsWith(".")){let s=ie.default.resolve(t,r);if(ds(s)&&sr.default.statSync(s).isFile()||!s.endsWith(".json")&&(s+=".json",ds(s)))return s;throw new Error(`File '${e}' not found.`)}let n=JU();if(n){let{resolveRequest:s}=n,[o,a]=e.split("/"),u=o.startsWith("@")?`${o}/${a}`:o;try{if(u===e){let c=s(ie.default.join(u,"package.json"),t);if(c){let d=Db(c);if(ds(d))return d}}else try{return s(e,t,{extensions:[".json"]})}catch{return s(ie.default.join(e,"tsconfig.json"),t)}}catch{}}let i=Mb(t,ie.default.join("node_modules",r));if(i){if(sr.default.statSync(i).isDirectory()){let s=ie.default.join(i,"package.json");if(ds(s)?i=Db(s):i=ie.default.join(i,"tsconfig.json"),ds(i))return i}else if(i.endsWith(".json"))return i}if(!r.endsWith(".json")&&(r+=".json",i=Mb(t,ie.default.join("node_modules",r)),i))return i;throw new Error(`File '${e}' not found.`)}var tF=Object.defineProperty,rF=Object.defineProperties,nF=Object.getOwnPropertyDescriptors,Bb=Object.getOwnPropertySymbols,iF=Object.prototype.hasOwnProperty,sF=Object.prototype.propertyIsEnumerable,Ub=(e,t,r)=>t in e?tF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ui=(e,t)=>{for(var r in t||(t={}))iF.call(t,r)&&Ub(e,r,t[r]);if(Bb)for(var r of Bb(t))sF.call(t,r)&&Ub(e,r,t[r]);return e},oF=(e,t)=>rF(e,nF(t));function dh(e){var t;let r;try{r=sr.default.realpathSync(e)}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}let n=ie.default.dirname(r),i=sr.default.readFileSync(r,"utf8").trim(),s={};if(i&&(s=zU(i),!s||typeof s!="object"))throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);if(s.extends){let o=eF(s.extends,n),a=dh(o);if(delete a.references,(t=a.compilerOptions)!=null&&t.baseUrl){let{compilerOptions:c}=a;c.baseUrl=ie.default.relative(n,ie.default.join(ie.default.dirname(o),c.baseUrl))||"./"}a.files&&(a.files=a.files.map(c=>ie.default.relative(n,ie.default.join(ie.default.dirname(o),c)))),a.include&&(a.include=a.include.map(c=>ie.default.relative(n,ie.default.join(ie.default.dirname(o),c)))),delete s.extends;let u=oF(ui(ui({},a),s),{compilerOptions:ui(ui({},a.compilerOptions),s.compilerOptions)});a.watchOptions&&(u.watchOptions=ui(ui({},a.watchOptions),s.watchOptions)),s=u}if(s.compilerOptions){let{compilerOptions:o}=s;o.baseUrl&&(o.baseUrl=lh(o.baseUrl)),o.outDir&&(Array.isArray(s.exclude)||(s.exclude=[]),s.exclude.push(o.outDir),o.outDir=lh(o.outDir))}if(s.files&&(s.files=s.files.map(lh)),s.include&&(s.include=s.include.map(Fu)),s.watchOptions){let{watchOptions:o}=s;o.excludeDirectories&&(o.excludeDirectories=o.excludeDirectories.map(a=>Fu(ie.default.resolve(n,a))))}return s}var zb=Q($b()),uF="yarn.build.json",Qb=80,cF="-".repeat(Qb);var _h=class{constructor({project:t,report:r,runCommand:n,cli:i,configuration:s,pluginConfiguration:o,dryRun:a,ignoreRunCache:u,verbose:c,concurrency:d,continueOnError:f,excludeWorkspacePredicate:p,ignoreDependencies:h,failFast:g}){this.tracer=new Ut("yarn.build");this.runGraph=new ii;this.runLength=0;this.runTargets=[];this.runMutexes={};this.dryRun=!1;this.ignoreRunCache=!1;this.verbose=!1;this.continueOnError=!1;this.entrypoints=new Set;this.excluded=new Set;this.runReporter=new Yb.EventEmitter;this.ignoreDependencies=!1;this.failFast=!1;this.runReport={mutex:new hh.Mutex,totalJobs:0,skipCount:0,previousOutput:"",successCount:0,failCount:0,ignoredCount:0,workspaces:{},done:!1};this.header="";this.nextUnitOfWork=[];this.checkIfRunIsRequiredCache={};this.planCache={};this.hasSetup=!1;this.setupRunReporter=()=>{this.runReporter.on("pending",(t,r,n)=>{this.runReport.mutex.acquire().then(i=>{this.runReport.workspaces[t]={name:n,stdout:[],stderr:[],done:!1,fail:!1,locator:r},i()})}),this.runReporter.on("start",(t,r,n,i)=>{this.runReport.mutex.acquire().then(s=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],start:Date.now(),runScript:i,name:n,locator:r},s()})}),this.runReporter.on("info",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stdout.push(r),n()})}),this.runReporter.on("error",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),n()})}),this.runReporter.on("success",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t]={...this.runReport.workspaces[t],done:!0},this.runReport.successCount++;let n=this.runReport.workspaces[t];if(Ue.default){let i=`\u2705 ${t}`.padEnd(60),s=Kr(0,n.runtimeSeconds??0).padStart(19);process.stdout.write(`${i}${s}
`)}r()})}),this.runReporter.on("skipped",t=>{this.runReport.mutex.acquire().then(r=>{if(this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].skipped=!0,this.runReport.skipCount++,r(),Ue.default){let n=`\u23E9 ${t} `.padEnd(60),i="--".padStart(19);process.stdout.write(`${n}${i}
`)}})}),this.runReporter.on("ignored",t=>{this.runReport.mutex.acquire().then(r=>{this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].ignored=!0,this.runReport.ignoredCount++,r();let n=this.runReport.workspaces[t],i=this.runLog?.get(`${t}#${this.runCommand}`);if(Ue.default){let s=`[IGNORE${i?.exitCode?`: ${i?.exitCode}`:""}] ${n.name} `.padEnd(60),o="--".padStart(19);process.stdout.write(`${s}${o}
`)}})}),this.runReporter.on("fail",(t,r)=>{this.runReport.mutex.acquire().then(n=>{typeof r<"u"&&this.runReport.workspaces[t].stderr.push(r),this.runReport.workspaces[t].done=!0,this.runReport.workspaces[t].fail=!0,this.runReport.failCount++,n();let i=this.runReport.workspaces[t],s=this.runLog?.get(`${t}#${this.runCommand}`);if(Ue.default){let o=`\u274C ${t}`.padEnd(50),a=`${s?.exitCode?`(exit code: ${s?.exitCode})`:"\u2192"} ${Kr(0,i.runtimeSeconds??0)}`.padStart(29);process.stdout.write(`${o}${a}
`)}})})};this.getDependenciesCount=async t=>{let r=0;for(let n of B.Manifest.hardDependencies)for(let i of t.manifest.getForScope(n).values())this.project.tryWorkspaceByDescriptor(i)!==null&&(r+=1);return r};this.plan=async(t,r)=>{if(!t)throw new Error("Internal error: lost reference to parent workspace. Please open an issue.");if(typeof this.planCache[r.relativeCwd]<"u")return this.planCache[r.relativeCwd];this.runGraph.checkCyclical(t);let n=!1,i=!1;if(this.runMutexes[r.relativeCwd]=new hh.Mutex,this.ignoreDependencies===!1)for(let o of B.Manifest.hardDependencies)for(let a of r.manifest.getForScope(o).values()){let u=this.project.tryWorkspaceByDescriptor(a);if(u===null||this.excludeWorkspacePredicate(u)||typeof u.manifest.scripts.get(this.runCommand)>"u")continue;let c=this.runGraph.addNode(u.relativeCwd);t.addDependency(c),this.runGraph.checkCyclical(c),await this.plan(c,u)&&(this.runGraph.addRunCallback(c,this.createRunItem(u)),i=!0,this.removeFromExcluded(u))}let s=!1;if(r!==this.project.topLevelWorkspace&&(s=await this.checkIfRunIsRequired(r)),this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator),i||s)n=!0,this.runReporter.emit("pending",r.relativeCwd,r.anchoredLocator,`${r.manifest.name?.scope?`@${r.manifest.name?.scope}/`:""}${r.manifest.name?.name}`),this.runGraph.addRunCallback(t,this.createRunItem(r)),this.removeFromExcluded(r),this.entrypoints.add(t),this.runTargets.push(r);else{let o=this.runLog?.get(`${r.relativeCwd}#${this.runCommand}`);o&&this.runLog?.set(`${r.relativeCwd}#${this.runCommand}`,{checksum:o.checksum,status:"succeeded",rerun:!1,command:this.runCommand})}if(n){let o=r.getRecursiveWorkspaceDependents();for(let u of o)this.markWorkspaceForRerun(u);let a=Array.from(r.getRecursiveWorkspaceDependencies()).filter(u=>this.isWorkspaceMarkedForRerun(u));for(let u of a){let c=u.getRecursiveWorkspaceDependents();for(let d of c)this.markWorkspaceForRerun(d)}}return this.planCache[r.relativeCwd]=n,n};this.performDryRun=async t=>await this.tracer.startSpan({name:"performDryRun",ctx:t},async({ctx:r})=>{let n=this.concurrency;this.concurrency=1;let i="",s={1:[]};this.runGraph.dryRunCallback=(u,c)=>{s[c]?s[c].push(u.id):s[c]=[u.id]},await this.runGraph.run(r,Array.from(this.entrypoints),!0);let o=(u,c,d,f)=>{let p=d?"\u2514\u2500":f&&d?"\u2514\u2500\u252C\u2500":"\u251C\u2500";return`${u==0?"":"  ".repeat(u)}${p}[${u}] ${c}`},a=Object.keys(s);return a.forEach((u,c)=>{let d=parseInt(u),f=s[d],p=c==a.length-1;f.forEach((h,g)=>{let _=this.runGraph.getNode(h);i+=o(d,h,g==f.length-1,p),_ instanceof Yr&&_.skip&&(i+="(skip)"),i+=`
`})}),this.concurrency=n,i});this.run=async t=>await this.tracer.startSpan({name:"command supervisor run",ctx:t},async({ctx:r})=>{let n="";if(this.hasSetup===!1)throw new Error("RunSupervisor is not setup, you need to call await supervisor.setup()");if(this.runReport.runStart=Date.now(),(Ue.default||this.dryRun)&&(n+=`${this.formatHeader("Run Order")+`
`}`,n+=await this.performDryRun(r),Ue.default||(n+=`${this.formatHeader(`Dry Run / Command: ${this.runCommand} / Total: ${this.runGraph.runSize}`,0,!0)+`
`}`),process.stdout.write(n),n="",this.dryRun))return!0;Ue.default||Ze.pad(this.concurrency+3),Ue.default&&process.stdout.write(`
${this.formatHeader(`Run / Command: ${this.runCommand} / Concurrency: ${this.concurrency}`,0,!1)+`
`}`),this.raf(this.waitUntilDone),this.currentRunTarget=this.runTargets.length>1?"All":this.runTargets[0]?.relativeCwd??"Nothing to run",Ue.default||process.stderr.write(`
`),this.header=this.generateHeaderString(),await this.runGraph.run(r,Array.from(this.entrypoints));let i=await this.runReport.mutex.acquire();this.runReport.done=!0,i();let s=this.generateFinalReport();return typeof s=="string"&&process.stdout.write(`
${s}
`),await this.saveRunLog(),this.runReport.failCount===0});this.raf=t=>{setImmediate(()=>t(Date.now()))};this.waitUntilDone=t=>{if(this.runReport.done)return;let r=90,n="";Ue.default?this.updateProgressCI(t):(n=this.generateProgressString(t),Ze.cursorUp(Ze.linesRequired(this.runReport.previousOutput,process.stdout.columns)),Ze.clearScreenDown()),typeof n<"u"&&typeof n=="string"&&process.stdout.write(n),this.runReport.previousOutput=n,dF(r).then(()=>{this.raf(this.waitUntilDone)})};this.grey=t=>B.formatUtils.pretty(this.configuration,t,"grey");this.generateRunCountString=t=>{let r="";if(this.runReport.runStart){let n=B.formatUtils.pretty(this.configuration,`${this.runReport.successCount}`,"green"),i=B.formatUtils.pretty(this.configuration,`${this.runReport.failCount}`,"red"),s=B.formatUtils.pretty(this.configuration,`${this.runGraph.runSize}`,"white");r+=this.formatHeader(`${n}:${i}/${s} ${Kr(this.runReport.runStart,t)}`,0,!0)+`
`}return r};this.generateFinalReport=()=>{Ue.default||(Ze.cursorUp(Ze.linesRequired(this.runReport.previousOutput,process.stdout.columns)),Ze.clearScreenDown());let t=!1,r="";if(this.runReport.failCount!==0&&(t=!0),this.verbose&&(t=!0),Ue.default&&(t=!0),t){let s=[];r+=`${this.formatHeader(this.header)+`
`}`;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(a.fail&&s.push(o),!(this.runReport.failCount!==0&&a.fail===!1)){if(a.stdout.length!==0||a.stderr.length!==0){let u=this.formatHeader(`Output: ${B.formatUtils.pretty(this.configuration,o,B.FormatType.PATH)}`,2);r+=`
${u+`
`}`}a.stdout.length!==0&&a.stdout.forEach(u=>{u.split(`
`).forEach(d=>{typeof d<"u"&&d.length!==0&&(r+=`${d+`
`}`)})}),a.stderr.length!==0&&(r+=`
${"[stderr]"+`
`}`,a.stderr.forEach(c=>{(c instanceof Error?c.toString():`${c}`).split(`
`).forEach(p=>{typeof p<"u"&&p.length!==0&&(r+=`${p+`
`}`)})}))}}if(s.length>=2){r+=`${this.grey(cF)+`
`}`;let o=this.grey(`ERROR for script ${this.header}
The following packages returned an error.
`);r+=`${o}`,s.forEach(a=>{let u=`- ${B.formatUtils.pretty(this.configuration,a,B.FormatType.PATH)}`;r+=`${u+`
`}`})}}let n=this.formatHeader(`${B.formatUtils.pretty(this.configuration,`${this.runCommand} finished`,this.runReport.failCount===0?"green":"red")}${this.runReport.failCount!=0?B.formatUtils.pretty(this.configuration,` with ${this.runReport.failCount} errors`,"red"):""}`,0,!0)+`
`;if(r+=`
`+this.formatHeader("Summary")+`
`,this.runReport.runStart){let{successCount:s,failCount:o,ignoredCount:a,skipCount:u}=this.runReport,c=this.runGraph.runSize-a,d=c-o-s-u,f=B.formatUtils.pretty(this.configuration,`Success: ${s}`,"green"),p=B.formatUtils.pretty(this.configuration,`Fail: ${o}`,"red"),h=B.formatUtils.pretty(this.configuration,`Skipped: ${u}`,"white"),g=B.formatUtils.pretty(this.configuration,`Excluded: ${this.excluded.size}`,"white"),_=B.formatUtils.pretty(this.configuration,`Up to date: ${d}`,"white"),v=B.formatUtils.pretty(this.configuration,`Total: ${c}`,"white");if(r+=f+`
`,r+=_+`
`,r+=p+`
`,this.verbose&&o>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let y=this.runReport.workspaces[A];y.fail&&(r+=` - ${B.formatUtils.pretty(this.configuration,A,"grey")}${B.formatUtils.pretty(this.configuration,y.locator,"IDENT")}
`)}),r+=h+`
`,this.verbose&&u>0&&Object.keys(this.runReport.workspaces).forEach(A=>{let y=this.runReport.workspaces[A];y.skipped&&(r+=` - ${B.formatUtils.pretty(this.configuration,A,"grey")}${B.formatUtils.pretty(this.configuration,y.locator,"IDENT")}
`)}),r+=g+`
`,this.verbose&&this.excluded.size>0)for(let A of this.excluded)r+=` - ${B.formatUtils.pretty(this.configuration,A.relativeCwd,"grey")}${B.formatUtils.pretty(this.configuration,A.anchoredLocator,"IDENT")}
`;r+=v+`
`+this.grey("---")+`
`}let i=50;for(let s in this.runReport.workspaces){let o=this.runReport.workspaces[s];i+=o.runtimeSeconds??0}if(!!this.runReport.runStart&&this.runGraph.runSize>1){let s=i,a=Date.now()-this.runReport.runStart,u=Kr(a,s);r+=`Cumulative: (cpu): ${Kr(0,i)}
`,r+=`Saved: ${u}
`}return this.runReport.runStart&&(r+="Runtime (wall): "+Kr(Date.now(),this.runReport.runStart)+`
`),r+=n,r+=`
`,r};this.createRunItem=t=>async(r,n)=>await this.limit(async()=>this.tracer.startSpan({name:"command",ctx:r},async({span:i,ctx:s})=>{let o=t.relativeCwd,a={[K.PACKAGE_NAME]:t.anchoredLocator.name,[K.PACKAGE_DIRECTORY]:t.relativeCwd,[K.PACKAGE_COMMAND]:this.runCommand};typeof t.anchoredLocator.scope=="string"&&(a[K.PACKAGE_SCOPE]=`@${t.anchoredLocator.scope}`);let u=t.manifest.scripts.get(this.runCommand);typeof u=="string"&&(a[K.YARN_BUILD_PACKAGE_RUN_COMMAND]=u);let c=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);if(this.runReporter.emit("start",t.relativeCwd,t.anchoredLocator,`${t.manifest.name?.scope?`@${t.manifest.name?.scope}/`:""}${t.manifest.name?.name}`,u),i.addEvent("start"),i.setAttributes(a),!u)return this.verbose&&this.runReporter.emit("info",t.relativeCwd,`[skip] No \`${this.runCommand}\` script in manifest.`),this.runReporter.emit("ignored",t.relativeCwd),i.addEvent("ignored"),!0;try{if(this.runReport.failCount!==0&&!this.continueOnError&&(this.runReporter.emit("skipped",t.relativeCwd),i.addEvent("skipped"),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"skipped",rerun:!1,command:this.runCommand}),i.addEvent("runReport failcount is not 0, exiting early"),this.continueOnError===!1))return!1;let d=await this.cli(s,this.runCommand,t.cwd,this.runReporter,o);if(i.setAttribute(K.YARN_BUILD_PACKAGE_RUN_COMMAND_EXIT,d),d!==0)return this.runReporter.emit("fail",t.relativeCwd),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand,exitCode:`${d}`}),this.failFast===!0&&(Ue.default&&process.stdout.write(`--fail-fast is set, terminating all processes
`),Uu()),!1;this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"succeeded",rerun:!1,command:this.runCommand}),this.runReporter.emit("success",t.relativeCwd)}catch(d){return this.runReporter.emit("fail",t.relativeCwd,d),this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:c?.checksum,status:"failed",rerun:!0,command:this.runCommand}),(typeof d=="string"||d instanceof Error)&&i.recordException(d),i.setStatus({code:Xb.SpanStatusCode.ERROR,message:"Command failed"}),this.continueOnError===!1&&(n(),Uu()),!1}return!1}));let _=d??(0,Vb.cpus)().length;this.configuration=s,this.pluginConfiguration=o,this.project=t,this.report=r,this.runCommand=n,this.cli=i,this.dryRun=a,this.ignoreRunCache=u,this.verbose=c,this.concurrency=_,this.continueOnError=f,this.limit=(0,Kb.default)(_),this.queue=new Wb.default({concurrency:_,carryoverConcurrencyCount:!0,timeout:5e4,throwOnTimeout:!0,autoStart:!0}),this.excludeWorkspacePredicate=p,this.verbose&&(this.errorLogFile=$.xfs.createWriteStream(this.getRunErrorPath(),{flags:"a"})),this.ignoreDependencies=h,this.failFast=g}async setup(){this.runLog=await this.readRunLog(),this.setupRunReporter(),this.hasSetup=!0}getRunErrorPath(){return $.ppath.resolve(this.project.cwd,"yarn.build-error.log")}getRunLogPath(){return $.ppath.resolve(this.project.cwd,".yarn",uF)}async readRunLog(){let t=new Map;try{let r=await $.xfs.readJsonPromise(this.getRunLogPath());if(r&&r.packages)for(let n in r.packages)t.set(n,{checksum:r.packages[n].checksum,status:r.packages[n].status,rerun:r.packages[n].rerun,command:this.runCommand})}catch{}return t}async saveRunLog(){if(!this.runLog)return;let t;try{t=await $.xfs.readJsonPromise(this.getRunLogPath())}catch{}let r={comment:"This is an auto-generated file, it keeps track of whats been built. This is a local file, don't store this in version control.",packages:{...t&&t.packages}};for(let[n]of this.runLog)r.packages[n]={...r.packages[n],...this.runLog.get(n)};await $.xfs.writeJsonPromise(this.getRunLogPath(),r)}removeFromExcluded(t){this.excluded.has(t)&&this.excluded.delete(t)}async addRunTarget(t){if(this.excluded.has(t))return;if(this.excludeWorkspacePredicate(t)){this.excluded.add(t);return}if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runGraph.addNode(t.relativeCwd);await this.plan(r,t)}markWorkspaceForRerun(t){if(typeof t.manifest.scripts.get(this.runCommand)>"u")return;let r=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:r?.checksum??"",status:"succeeded",rerun:!0,command:this.runCommand})}isWorkspaceMarkedForRerun(t){return typeof t.manifest.scripts.get(this.runCommand)>"u"?!1:this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`)?.rerun??!1}async checkIfRunIsRequired(t){if(typeof this.checkIfRunIsRequiredCache[t.relativeCwd]<"u")return this.checkIfRunIsRequiredCache[t.relativeCwd];if(typeof t.manifest.scripts.get(this.runCommand)!="string")return this.checkIfRunIsRequiredCache[t.relativeCwd]=!1,!1;let r=!1;this.ignoreRunCache&&(r=!0);let n=this.runLog?.get(`${t.relativeCwd}#${this.runCommand}`);n?.rerun&&(r=!0);for(let p of t.getRecursiveWorkspaceDependencies())if(this.checkIfRunIsRequiredCache[p.relativeCwd]===!0){r=!0;break}let i=Eg(t.manifest.raw),s=i?.input!=null,o=typeof i?.output<"u",a=i.input??this.pluginConfiguration.folders.input,u=new Set,c=new Set(Array.isArray(a)?a:[a]),d=i.output??[],f=new Set(Array.isArray(d)?d:[d]);if(o||(typeof t?.manifest?.raw?.bin=="string"?f.add(t.manifest.raw.bin):typeof t?.manifest?.raw?.directories?.bin=="string"?f.add(t.manifest.raw.directories.bin):typeof t?.manifest?.raw?.files=="string"?f.add(t.manifest.raw.files):Array.isArray(t?.manifest?.raw?.files)?t.manifest.raw.files.forEach(p=>p&&f.add(p)):typeof t?.manifest?.raw?.main=="string"&&f.add(t.manifest.raw.main)),!s||!o)try{let p=i.tsconfig??"tsconfig.json",h=$.xfs.pathUtils.join(t.cwd,$.npath.toPortablePath(p));if(await $.xfs.existsPromise(h)){let _=dh($.npath.fromPortablePath(h)),v=$.ppath.dirname(h);if(!s){if(_.compilerOptions?.incremental){let A=_.compilerOptions.tsBuildInfoFile??`${$.ppath.basename(h,$.ppath.extname(h))}.tsbuildinfo`,y=$.ppath.join(v,$.npath.toPortablePath(A)),b=$.ppath.relative(t.cwd,y);u.add(b)}_.include?.forEach(A=>{let y=$.ppath.join(v,$.npath.toPortablePath(A)),b=$.ppath.relative(t.cwd,y);c.add(b)}),_.exclude?.forEach(A=>{let y=$.ppath.join(v,$.npath.toPortablePath(A)),b=$.ppath.relative(t.cwd,y);u.add(b)})}if(!o&&_.compilerOptions?.outDir!=null){let A=$.ppath.join(v,$.npath.toPortablePath($.npath.toPortablePath(_.compilerOptions.outDir))),y=$.ppath.relative(t.cwd,A);f.add(y)}}}catch(p){console.warn(t.relativeCwd,`
`,p)}f.size===0&&(Array.isArray(this.pluginConfiguration.folders.output)?this.pluginConfiguration.folders.output.forEach(p=>p&&f.add(p)):typeof this.pluginConfiguration.folders.output=="string"&&f.add(this.pluginConfiguration.folders.output));{let p=[...new Set(["node_modules",...f,...u])].map(_=>$.npath.toPortablePath(_)),h=[...c].map(_=>$.npath.toPortablePath(_)),g=await this.runReport.mutex.acquire();try{let _=await lF(t.cwd,h,p);if(n?.checksum!==_&&(r=!0),!r){let v=$.npath.fromPortablePath(t.cwd);(await Promise.all([...f].map(async y=>{try{return(await(0,gh.default)(y,{dot:!0,cwd:v})).length===0}catch{return!1}}))).some(y=>y===!0)&&(r=!0)}this.runLog?.set(`${t.relativeCwd}#${this.runCommand}`,{checksum:_,status:r?"succeeded":"pending",rerun:r,command:this.runCommand})}catch(_){this.runReport.workspaces[t.relativeCwd]?.stderr.push(new Error(`${t.relativeCwd}: failed to get lastModified (${_})`))}finally{g()}}return this.checkIfRunIsRequiredCache[t.relativeCwd]=r,r}formatHeader(t,r=0,n=!1){let i="-",s=i.repeat(r),o=this.grey(s),a=this.grey("["),u=this.grey("]"),c=`${o}${a} ${t} ${u}`,d=(0,ku.default)(c).length,f=n?"[ yarn.build ]":"",p=Math.max(Qb-(d+f.length),0),h=i.repeat(p),g=this.grey(h),_=this.grey(f);return`${c}${g}${_}`}generateHeaderString(){return`${B.formatUtils.pretty(this.configuration,`${this.runCommand}`,B.FormatType.CODE)} for ${B.formatUtils.pretty(this.configuration,this.currentRunTarget?this.currentRunTarget:"",B.FormatType.SCOPE)}${this.dryRun?B.formatUtils.pretty(this.configuration," --dry-run",B.FormatType.NAME):""}`}updateRuntime(t){for(let r in this.runReport.workspaces){let n=this.runReport.workspaces[r];!n||!n.start||n.done||this.runReport.runStart&&(this.runReport.workspaces[r].runtimeSeconds=t-n.start)}}updateProgressCI(t){this.updateRuntime(t)}generateProgressString(t){let r="",n=o=>this.grey(`[${o}]`),i=B.formatUtils.pretty(this.configuration,"IDLE","grey");r+=this.formatHeader(this.generateHeaderString())+`
`,this.updateRuntime(t);let s=1;for(let o in this.runReport.workspaces){let a=this.runReport.workspaces[o];if(!a||!a.start||a.done)continue;let u=B.formatUtils.pretty(this.configuration,o,B.FormatType.PATH),c=B.formatUtils.pretty(this.configuration,`(${a.runScript})`,B.FormatType.REFERENCE),d=a.start?B.formatUtils.pretty(this.configuration,Kr(a.start,t),B.FormatType.RANGE):"",f=n(s++),p=" ".repeat(f.length-1),h=B.formatUtils.pretty(this.configuration,a.name,B.FormatType.NAME),g=`${f} ${h}${B.formatUtils.pretty(this.configuration,"@","grey")}${u} ${c} ${d}
`,_="",v="",A="";(0,ku.default)(g).length>=process.stdout.columns&&(_=`${f} ${u}${h}
`,v=`${p} ${c} ${d}
`,(0,ku.default)(_).length>=process.stdout.columns&&(_=(0,qu.default)(`${f} ${u}
`,0,process.stdout.columns),v=(0,qu.default)(`${p} ${h}
`,0,process.stdout.columns),A=(0,qu.default)(`${p} ${c} ${d}
`,0,process.stdout.columns)),g=_+v+A),r+=g}for(s;s<this.concurrency+1;)r+=`${n(s++)} ${i}
`;return this.runReport.runStart&&(r+=this.generateRunCountString(t)),r}},lF=async(e,t,r)=>{let n=await(0,gh.default)(t,{cwd:$.npath.fromPortablePath(e),absolute:!0,expandDirectories:!0,dot:!0,ignore:r});n.sort();let i=await Promise.all(n.map(async s=>{let o=$.npath.toPortablePath(s),a=await $.xfs.statPromise(o);return{path:$.ppath.relative(e,o),size:a.isFile()?a.size:0,lastModified:a.isFile()?a.mtimeMs:0}}));return(0,zb.default)(i)},Kr=(e,t)=>{let r=Math.abs(t-e),n="",i=Math.trunc(r/6e4);return i&&(n+=`${i}m`,r-=i*6e4),r&&(i&&(n+=" "),n+=`${(r/1e3).toFixed(2)}s`),n};function dF(e){return new Promise(t=>setTimeout(t,e))}var Zb=_h;var Jb=O("child_process"),eT=O("util"),fF=(0,eT.promisify)(Jb.exec);function pF(e){let{commit:t,sinceBranch:r}=e;if(t)return`git diff --name-only ..${t}`;if(r)return`git diff --name-only ${r}...`;throw new Error("Unable to determine how to detect changes.")}async function mh(e){try{let t=pF(e),{stdout:r}=await fF(t),n=r.split(`
`),s=e.root.project.workspaces.filter(o=>n.some(a=>a.startsWith(o.relativeCwd.replace(/^\.\//,"")))).reduce((o,a)=>{let u=a.getRecursiveWorkspaceDependents();return new Set([...o,...u,a])},new Set);return Array.from(s.values())}catch{return[]}}var Xr=O("@yarnpkg/core");var tT=(e,t)=>{let r=[];for(let n of e.workspacesCwds){let i=t.workspacesByCwd.get(n);i&&r.push(i,...tT(i,t))}return r},rT=async({targetWorkspace:e,project:t,supervisor:r})=>{try{if(e.workspacesCwds.size!==0){let n=tT(e,t);for(let i of n)for(let s of Xr.Manifest.hardDependencies){for(let o of i.manifest.getForScope(s).values()){let a=t.tryWorkspaceByDescriptor(o);a!==null&&await r.addRunTarget(a)}await r.addRunTarget(i)}await r.addRunTarget(e)}else await r.addRunTarget(e)}catch(n){if(n instanceof cs){let i=`${r.formatHeader("FATAL")}

You have a cyclic dependency.`,s=n.node.length<n.dep.length+4?"\u21B0":"",o=n.node.length>n.dep.length+4?"\u2934":"";i+=`

${Xr.formatUtils.pretty(r.configuration,n.node,"white")} ${s}
 \u21B3 ${Xr.formatUtils.pretty(r.configuration,n.dep,"red")} ${o}

`,i+=Xr.formatUtils.pretty(r.configuration,`
---

To fix this error you must remove the cyclic dependency.

Workspaces cannot directly or indirectly depend on each other. When running
the provided command yarn.build uses a parallelsied topological sort. This
maximises throughput (saving you time) while ensuring dependencies are run in
the order declared.

In a cyclic dependency A depends on B, which depends on A. Or in an indirect cyclic
dependency, A depends on B, which depends on C, and C depends on A.

In both cases A cannot be built, because to we cannot determine which one goes
first.

---
While some tooling may adapt to cyclic dependencies yarn.build cannot. Doing so
is unsound and unpredictable which goes against the stated goals of the tool.

In most cases this issue occurs by accident when you delcare a dependency on the
wrong package.

In some cases yuo may actually want the cyclic dependency. As that's not
possible, find the parts that are shared and move them to their own package
that both packages can depend on.
---

`,"grey"),i+=Xr.formatUtils.pretty(r.configuration,"FATAL: You have a cyclic dependency.","red"),console.error(i),process.exit(2)}else console.error("An error occured in yarn.build.",n)}};var hs=Q(D());var zr=class extends Gu.BaseCommand{constructor(){super(...arguments);this.json=ae.Option.Boolean("--json",!1,{description:`flag is set the output will follow a JSON-stream output
      also known as NDJSON (https://github.com/ndjson/ndjson-spec).`});this.all=ae.Option.Boolean("-A,--all",!1,{description:"run for all workspaces of a project"});this.buildCommand=ae.Option.String("-c,--build-command","build",{description:'the command to be run in each package (if available), defaults to "build"'});this.interlaced=ae.Option.Boolean("-i,--interlaced",!0,{description:"If false it will instead buffer the output from each process and print the resulting buffers only after their source processes have exited. Defaults to false."});this.verbose=ae.Option.Boolean("-v,--verbose",!1,{description:"more information will be logged to stdout than normal."});this.dryRun=ae.Option.Boolean("-d,--dry-run",!1,{description:"simulate running a job, but not actually run it"});this.ignoreBuildCache=ae.Option.Boolean("-r,--ignore-cache",!1,{description:"every package will be built, regardless of whether is has changed or not."});this.maxConcurrency=ae.Option.String("-m,--max-concurrency",{description:"is the maximum number of jobs that can run at a time, defaults to the number of logical CPUs on the current machine."});this.continueOnError=ae.Option.Boolean("--continue-on-error",!1,{description:"if a job fails, continue with the rest"});this.failFast=ae.Option.Boolean("--fail-fast",!1,{description:"if a job fails, terminate other running jobs"});this.exclude=ae.Option.Array("--exclude",{description:"exclude specifc packages or glob paths from being built, including their dependencies."});this.excludeCurrent=ae.Option.Boolean("--exclude-current",!1,{description:"run for this workspaces dependencies, but not this workspace. Useful for running as part of a `dev` command."});this.onlyGitChanges=ae.Option.Boolean("--changes",!1,{description:"only run for packages that were changed in the last commit"});this.onlyGitChangesSinceCommit=ae.Option.String("--since",{description:"only run for packages that were changed since the given commit"});this.onlyGitChangesSinceBranch=ae.Option.String("--since-branch",{description:"only run for packages that have changes compared to the give branch. Uses 'git diff --name-only branch...'",arity:1});this.onlyCurrent=ae.Option.Boolean("--only-current",!1,{description:"only run for the current workspace"});this.ignoreDependencies=ae.Option.Boolean("--ignore-dependencies",!1,{description:"when true, don't run for packages this one depends on"});this.buildTargets=ae.Option.Rest({name:"workspaceNames"});this.forceQuit=!1;this.commandType="build"}async execute(){return await new Ut("yarn.build").startSpan({name:`yarn ${this.commandType}`,propegateFromEnv:!0},async({span:n,ctx:i})=>{n.setAttributes({[K.YARN_BUILD_FLAGS_OUTPUT_JSON]:this.json,[K.YARN_BUILD_FLAGS_ALL]:this.all,[K.YARN_BUILD_FLAGS_TARGETS]:this.buildTargets,[K.YARN_BUILD_FLAGS_COMMAND]:this.buildCommand,[K.YARN_BUILD_FLAGS_INTERLACED]:this.interlaced,[K.YARN_BUILD_FLAGS_VERBOSE]:this.verbose,[K.YARN_BUILD_FLAGS_DRY_RUN]:this.dryRun,[K.YARN_BUILD_FLAGS_IGNORE_CACHE]:this.ignoreBuildCache,[K.YARN_BUILD_FLAGS_MAX_CONCURRENCY]:this.maxConcurrency,[K.YARN_BUILD_FLAGS_CONTINUE_ON_ERROR]:this.continueOnError,[K.YARN_BUILD_FLAGS_EXCLUDE]:this.exclude,[K.YARN_BUILD_FLAGS_EXCLUDE_CURRENT]:this.excludeCurrent,[K.YARN_BUILD_FLAGS_CHANGES]:this.onlyGitChanges,[K.YARN_BUILD_FLAGS_SINCE]:this.onlyGitChangesSinceCommit,[K.YARN_BUILD_FLAGS_SINCE_BRANCH]:this.onlyGitChangesSinceBranch,[K.YARN_BUILD_FLAGS_ONLY_CURRENT]:this.onlyCurrent});let s=await we.Configuration.find(this.context.cwd,this.context.plugins),{project:o,workspace:a}=await we.Project.find(s,this.context.cwd);if(!a)throw new Gu.WorkspaceRequiredError(o.cwd,this.context.cwd);let u=this.all?o.topLevelWorkspace:a,c=!1;u==o.topLevelWorkspace&&(c=!0);let d=[u,...this.buildTargets.length>0?u.getRecursiveWorkspaceChildren():[]];typeof this.onlyGitChangesSinceBranch=="string"?d=await mh({root:o.topLevelWorkspace,sinceBranch:this.onlyGitChangesSinceBranch}):(this.onlyGitChanges||this.onlyGitChangesSinceCommit)&&(d=await mh({root:o.topLevelWorkspace,commit:this.onlyGitChangesSinceCommit??"1"})),Array.isArray(this.exclude)||(this.exclude=[]),this.excludeCurrent&&this.exclude.push(we.structUtils.stringifyIdent(a.anchoredLocator)),!c&&this.onlyCurrent&&(this.maxConcurrency="1");let f=A=>!c&&this.onlyCurrent?A!=a:this.exclude?.some(y=>ps.default.isMatch(we.structUtils.stringifyIdent(A.anchoredLocator),y)||ps.default.isMatch(A.cwd,`${s.projectCwd}${Eh.default.posix.sep}${y}`))??!1,p=A=>!c&&this.onlyCurrent?A==a:this.buildTargets.some(y=>ps.default.isMatch(we.structUtils.stringifyIdent(A.anchoredLocator),y)||ps.default.isMatch(A.cwd,`${s.projectCwd}${Eh.default.posix.sep}${y}`)),h=this.buildTargets.length>0?d.filter(p):d,g=await mg(s);this.continueOnError=this.continueOnError??!!g.bail;let _=this.maxConcurrency===void 0?(0,nT.cpus)().length:parseInt(this.maxConcurrency);n.setAttributes({[K.YARN_BUILD_CONFIG_FOLDERS_INPUT]:g.folders.input,[K.YARN_BUILD_CONFIG_FOLDERS_OUTPUT]:g.folders.output,[K.YARN_BUILD_CONFIG_EXCLUDE]:g.exclude,[K.YARN_BUILD_CONFIG_BAIL]:g.bail,[K.YARN_BUILD_CONFIG_HIDE_BADGE]:g.hideYarnBuildBadge,[K.YARN_BUILD_CONFIG_MAX_CONCURRENCY]:_,[K.YARN_BUILD_FLAGS_IGNORE_DEPENDENCIES]:this.ignoreDependencies});let v=await we.StreamReport.start({configuration:s,json:this.json,stdout:this.context.stdout,includeLogs:!0},async A=>{let y=async(N,U,P,x,L)=>{let V=hs.trace.getSpan(N),m=new we.miscUtils.BufferStream;m.on("data",j=>x?.emit("info",L,j&&j.toString()));let G=new we.miscUtils.BufferStream;if(G.on("data",j=>x?.emit("error",L,j&&j.toString())),this.forceQuit)return m.destroy(),G.destroy(),m.end(),G.end(),2;try{let j=await this.cli.run(["run",U],{cwd:P,stdout:m,stderr:G})||0;return m.end(),G.end(),j}catch(j){V?.setStatus({code:hs.SpanStatusCode.ERROR,message:j.message}),(typeof j=="string"||j instanceof Error)&&V?.recordException(j),m.end(),G.end()}return 2},b=new Zb({project:o,configuration:s,pluginConfiguration:g,report:A,runCommand:this.buildCommand,cli:y,dryRun:this.dryRun,ignoreRunCache:this.ignoreBuildCache,verbose:this.verbose,concurrency:_,continueOnError:this.continueOnError,excludeWorkspacePredicate:f,ignoreDependencies:this.ignoreDependencies,failFast:this.failFast});b.runReporter.on("force-quit",()=>{this.forceQuit=!0}),await b.setup();for(let N of h)await rT({targetWorkspace:N,project:o,supervisor:b});await b.run(i)===!1&&(A.reportError(we.MessageName.BUILD_FAILED,"Build failed"),n.setStatus({code:hs.SpanStatusCode.ERROR,message:"Build failed"}))});return oi.hasBeenTerminated=!0,v.exitCode()})}};zr.paths=[["build"]],zr.usage=ae.Command.Usage({category:"Build commands",description:"build a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are built in the right order.

    `});var Qr=class extends zr{constructor(){super(...arguments);this.buildCommand=_s.Option.String("-c,--command","test",{description:'the command to be run in each package (if available), defaults to "test"'});this.onlyCurrent=_s.Option.Boolean("--only-current",!0,{description:"only test the current workspace"});this.ignoreDependencies=!0;this.commandType="test"}};Qr.paths=[["test"]],Qr.usage=_s.Command.Usage({category:"Test commands",description:"test a package and all its dependencies",details:`
      In a monorepo with internal packages that depend on others, this command
      will traverse the dependency graph and efficiently ensure, the packages
      are tested in the right order.
      `});var hF={commands:[Qr]},_F=hF;return fT(gF);})();
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
return plugin;
}
};
